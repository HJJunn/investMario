/* LightningChart JS v8.1.1 */
"use strict";Object.defineProperty(exports,"o",{value:!0});var t=require("immutable"),i=require("earcut");function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function e(t){if(t&&t.o)return t;var i=Object.create(null);return t&&Object.keys(t).forEach((function(s){if("default"!==s){var e=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,e.get?e:{enumerable:!0,get:function(){return t[s]}})}})),i.default=t,Object.freeze(i)}var r=e(t),h=s(i);class n{constructor(){this.u=!0}S(){return this.u}}class o extends n{constructor(t,i){super(),this.M=t,this._=t,this.u=i}C(t){return t!==this.M&&(this._=this.M,this.M=t,this.u=!0),this}T(){return this.M}S(){return super.S()}}const a=(t,i)=>({x:t,y:i}),l=(t,i)=>({x:t,y:i}),u=(t,i,s)=>({position:t,high:i,low:s}),c=(t,i,s)=>({x:t,y:i,z:s}),d=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(a(t.position,t.high)),s.push(a(t.position,t.low))})),[i,s]},f=(t,i)=>({min:t,max:i}),A=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),g=(t,i=!0)=>new o(t,i),p=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),v=p,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),m=t.Record({type:"color",r:1,g:1,b:1,a:1});class x extends m{constructor(t){super(t)}toUint32(){return void 0!==this.F||(this.F=F(this.getR(),this.getG(),this.getB(),this.getA())),this.F}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.I||(this.I=new x({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.I}getLighter(){return this.L||(this.L=new x({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.L}getDarker(){return this.P||(this.P=new x({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.P}toRGBAString(){return`rgba(${(255*this.r).toFixed(0)},${(255*this.g).toFixed(0)},${(255*this.b).toFixed(0)},${this.a})`}}const S=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),b=(t,i,s,e=255)=>new x({r:t/255,g:i/255,b:s/255,a:e/255}),M=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new x({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new x({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new x({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new x({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},w=(t,i=1,s=1)=>{let e,r,h;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,r=u,h=a;break;case 1:e=l,r=s,h=a;break;case 2:e=a,r=s,h=u;break;case 3:e=a,r=l,h=s;break;case 4:e=u,r=a,h=s;break;default:e=s,r=a,h=l}return new x({r:e,g:r,b:h})},_=t=>b(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},C=new x({}),T=b(0,0,0,0),F=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,I=t.Record({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class L extends I{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const P=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),B=new L;var D,E;exports.GradientShape=void 0,(D=exports.GradientShape||(exports.GradientShape={})).circle="circle",D.ellipse="ellipse",exports.GradientExtent=void 0,(E=exports.GradientExtent||(exports.GradientExtent={})).closestSide="closest-side",E.closestCorner="closest-corner",E.farthestSide="farthest-side",E.farthestCorner="farthest-corner";const R=t.Record({type:"fillstyle",fillType:"radial-gradient",ditheringEnabled:!0,stops:[{color:M("#f00"),offset:0},{color:M("#0f0"),offset:1}],position:a(.5,.5),shape:exports.GradientShape.ellipse,extent:exports.GradientExtent.farthestCorner});class O extends R{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.ditheringEnabled},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`radial-gradient(${this.shape} ${this.extent} at ${100*this.position.x}% ${100*this.position.y}%, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}setDitheringEnabled(t){return this.set("ditheringEnabled",t)}getDitheringEnabled(){return this.get("ditheringEnabled")}}const z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),V=t.Record({type:"fillstyle",fillType:"linear-gradient",stops:[{color:M("#f00"),offset:0},{color:M("#0f0"),offset:1}],angle:0});class N extends V{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`linear-gradient(${this.angle}deg, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Ns(this.get("angle")):this.get("angle")}}const G=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class ${constructor(t,i,s,e){this.D=new yt,this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new U,this.y=new U,this.z=new U;const r={...t},h={...i};if(e){const t=t=>{const i=t.value;this.cellsAmount.x=i.reduce(fs,0),this.cellIndex.x=i.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=i.reduce(((t,i,s)=>s>=r.x&&s<r.x+h.x?t+i:t),0),this.D.R("cellresize",{})};e.x.O("change",t),t({value:e.x.T()});const i=t=>{const i=t.value;this.cellsAmount.y=i.reduce(fs,0),this.cellIndex.y=i.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=i.reduce(((t,i,s)=>s>=r.y&&s<r.y+h.y?t+i:t),0),this.D.R("cellresize",{})};e.y.O("change",i),i({value:e.y.T()}),this.V=()=>{e.x.N("change",t),e.y.N("change",i)}}}G(){return this.V&&(this.V(),this.V=void 0),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class U extends n{constructor(){super(...arguments),this.$=0,this.U=10,this.Y=1}j(){return this.u=!1,this}H(){return this.u=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}W(t,i){return this.$=t,this.U=i,this.X(),this}Z(t){return this.Y=t,this.X(),this}J(t){return t/this.Y}X(){const t=this.J(this.U-this.$),i=this.Y;void 0!==this.K&&!1!==Ht(t,this.K)||(this.u=!0,this.q=i,this.K=t)}tt(){return this.K}it(){return this.q}st(){return this.U<this.$}et(t,i){return!0}}class Y{constructor(){this.rt=!0}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.U-this.$)}W(t,i){return this.rt=t!==this.$||i!==this.U,this.$=t,this.U=i,this}j(){return this.rt=!1,this}H(){return this.rt=!0,this}}class j extends Y{constructor(t,i,s,e){if(super(),this.ht=!0,this.nt=!0,this.ot=[0,0],this.ut=!0,this.ct=t,this.dt=i,this.ft=s,this.At=t,this.vt=i,e){const t=t=>{this.yt(t.value)};e.O("change",t),this.yt(e.T()),this.xt=()=>e.N("change",t)}}Z(t){return this.Y=t,this.nt=!0,this}St(t){return this.ot=t.map(Math.abs),this.ut=!0,this}bt(){return this.ct/this.ft*this.Y+this.ot[0]}Mt(){return(this.ct+this.dt)/this.ft*this.Y-this.ot[1]}wt(){return this.getCellSize()-this._t()}kt(){return this.Y}getCellSize(){return this.Ct(this.Y)}_t(){return this.ot[0]+this.ot[1]}Tt(){return this.ot}yt(t){this.ft=t.reduce(fs,0),this.ct=t.reduce(((t,i,s)=>s>=this.At?t:t+i),0),this.dt=t.reduce(((t,i,s)=>s>=this.At&&s<this.At+this.vt?t+i:t),0),this.ht=!0,this.Ft()}Ct(t){return t*this.dt/this.ft}j(){return super.j(),this.nt=!1,this.ut=!1,this.ht=!1,this}H(){return super.H(),this.nt=!0,this.ut=!0,this.ht=!0,this}}class H extends j{constructor(t,i,s,e){super(t,i,s,e),this.It=!1,this.Lt=!1,this.Pt=0,this.Y=1e3,this.W(0,10),this.X()}Bt(){return this.Lt}et(t,i,s,e,r){if(t===i)return!1;const h=Math.abs(e-s),n=Math.abs(i-t);if(!this.It){const s=bi(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(r?s/2:h/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(r?o/2:h/2)*(t>i?-1:1);return{start:a-l,end:a+l}}Ft(){this.X()}Dt(t){return this.bt()+(t-this.$)/(this.U-this.$)*(this.Mt()-this.bt())}Et(t){return this.$+(t-this.bt())/(this.Mt()-this.bt())*(this.U-this.$)}W(t,i){return super.W(t,i),this.X(),this}St(t){return super.St(t),this.X(),this}Z(t){return super.Z(t),this.Rt=W(this.U-this.$,this.ot,this.Y,this.dt,this.ft),this.X(),this}Ot(){return this.It=!0,this}zt(){return this.It}Vt(){return Math.abs(this.Nt)}Gt(){return this.Vt()/this.Rt}$t(){return this.Ut}Yt(){return this.jt}getPixelSize(){return this.Rt}Ht(){return this.Wt}H(){return super.H(),this.Lt=!0,this}j(){return super.j(),this.Lt=!1,this}Xt(t,i=Ks.Numeric){return i(t,{start:this.$,end:this.U})}Zt(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Jt(t){return W(t,this.ot,this.Y,this.dt,this.ft)}X(){let t=this.$,i=this.U,s=0;this.It&&(t=0,i=this.U-this.$,s=this.$);const e=i-t,r=W(e,this.ot,this.Y,this.dt,this.ft);this.jt=t-this.ot[0]*r,this.Ut=i+this.ot[1]*r;const h=this.Ut-this.jt,n=h-this.Nt,o=Math.abs(n/r),a=e-this.Pt,l=Math.abs(a/r);(!this.Wt||o>=.4||l>=.4)&&(this.Pt=e,this.Nt=h,this.Rt=r,this.Lt=!0);const u=this.Nt*this.ft/(2*this.dt),c=-(this.jt-this.Nt*this.ct/this.dt)-u,d=2*this.bt()/this.Y-1,f=2*this.Mt()/this.Y-1-d;this.Wt={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Qt(t,i){return t+this.Rt*i}}const W=(t,i,s,e=1,r=1)=>t/(s*e/r-(i[0]+i[1]));class X{Kt(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}j(){return this.x.j(),this.y.j(),this}H(){return this.x.H(),this.y.H(),this}Z(t,i){return"object"==typeof t?(this.x.Z(t.x),this.y.Z(t.y)):(this.x.Z(t),this.y.Z(i)),this}kt(){return a(this.x.kt(),this.y.kt())}qt(t){return this.x.St(t),this}ti(t){return this.y.St(t),this}_t(){return a(this.x._t(),this.y._t())}ii(t,i){return this.x.W(t,i),this}si(t,i){return this.y.W(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x._t(),y:i-this.y._t()}}ei(){return this.x.Bt()||this.y.Bt()}}class Z extends X{constructor(){super(...arguments),this.ri="LinearScaleXY"}hi(t,i,s,e){return this.x=new H(t.x,i.x,s.x,e?e.x:void 0),this.y=new H(t.y,i.y,s.y,e?e.y:void 0),this}zt(){return this.x.zt()||this.y.zt()}ni(){return a(this.x.getPixelSize(),this.y.getPixelSize())}Ht(){return{x:this.x.Ht(),y:this.y.Ht()}}Qt(t,i){const s=this.ni();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}oi(t,i,s,e){const r=this.ni(),h=Is(t,i);return h.x*=e,h.y*=e,{x:t.x+s*r.x*h.x,y:t.y+s*r.y*h.y}}}class J extends X{constructor(){super(...arguments),this.ri="MixedScaleXY"}zt(){return!1}Qt(t,i){const s=this.x.Dt(t.x),e=this.y.Dt(t.y),r={x:s+i.x,y:e+i.y};return{x:this.x.Et(r.x),y:this.y.Et(r.y)}}oi(t,i,s,e){const r={x:this.x.Dt(t.x),y:this.y.Dt(t.y)},h={x:this.x.Dt(i.x),y:this.y.Dt(i.y)},n=Fs(Ds(h,r)),o=Is(h,r),a={x:r.x+n.x*e+o.x*s,y:r.y+n.y*e+o.y*s};return{x:this.x.Et(a.x),y:this.y.Et(a.y)}}Ht(){const t=this.x.Ht(),i=this.y.Ht();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.U-this.x.$,this.y.U-this.y.$],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Q={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).hi({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new $({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},K=(t,i,s)=>i===s?t:s.Et(i.Dt(t)),q=(t,i,s)=>{if(i===s)return t;const e=i instanceof X?i.x:i.x instanceof X?i.x.x:i.x.ai,r=i instanceof X?i.y:i.y instanceof X?i.y.y:i.y.ai,h=s instanceof X?s.x:s.x instanceof X?s.x.x:s.x.ai,n=s instanceof X?s.y:s.y instanceof X?s.y.y:s.y.ai;return{...t,x:K(t.x,e,h),y:K(t.y,r,n)}},tt=(...t)=>{if(0===t.length)return{remove:jt};let i=!1;const s=t.map((s=>{const e=e=>{((s,e,r)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.li(e,r,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,e.start,e.end)};return s.addEventListener("intervalchange",e),e}));let e=!1;const r=t.map((i=>{const s=s=>{((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,s.isStopped)};return i.addEventListener("stoppedchange",s),s}));return{remove:()=>{t.forEach(((t,i)=>{t.removeEventListener("intervalchange",s[i]),t.removeEventListener("stoppedchange",r[i])}))}}},it=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,st=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,et=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,rt=t=>t&&"object"==typeof t&&"index"in t,ht=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,nt=(t,i,s,e)=>s<0?t:s>1?i:b(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),void 0===e?t.getA()+s*(i.getA()-t.getA()):e);var ot;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(ot||(ot={}));const at=(t,i,s,e,r,h,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(r?2:1);if(s===ot.Nearest)return lt(t,i,h,n,c,d);if(s===ot.NearestX||s===ot.NearestY){if("boolean"==typeof l&&("x"===a&&s===ot.NearestX||"y"===a&&s===ot.NearestY))return dt(t,q(i,n,h),a,l,c,d);if(s===ot.NearestX)return ut(t,q(i,n,h),o,c,d);if(s===ot.NearestY)return ct(t,q(i,n,h),o,c,d)}},lt=(t,i,s,e,r,h)=>{let n,o=Number.MAX_VALUE;for(let a=r;a<=h;a+=1){const r=t[a];if(!Number.isNaN(r.x)&&!Number.isNaN(r.y)){const t=q(r,s,e),h=(t.x-i.x)**2+(t.y-i.y)**2;h<o&&(o=h,n=a)}}return n},ut=(t,i,s,e,r)=>{if(i.x<s.min.x||i.x>s.max.x)return;let h,n=Number.MAX_VALUE;for(let s=e;s<=r;s+=1){const e=t[s],r=e.x>i.x?e.x-i.x:i.x-e.x;r<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=r,h=s)}return h},ct=(t,i,s,e,r)=>{if(i.y<s.min.y||i.y>s.max.y)return;let h,n=Number.MAX_VALUE;for(let s=e;s<=r;s+=1){const e=t[s],r=e.y>i.y?e.y-i.y:i.y-e.y;r<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=r,h=s)}return h},dt=(t,i,s,e,r,h)=>{const n="x"===s,o=n?i.x:i.y,a=t[r],l=t[h],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=r,g=Math.floor((r+h)/2),p=h,v=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,p),v=Math.floor((A+p)/2);else{if(0===Math.abs(i))return g;p=Math.max(g-1,A),v=Math.floor((A+p)/2)}if(v===g){const s=g>r?Math.abs(o-(n?t[g-1].x:t[g-1].y)):rs,e=g<h?Math.abs(o-(n?t[g+1].x:t[g+1].y)):rs,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=v}},ft=(t,i,s,e,r,h)=>{const n="x"===s,o=n?i.x:i.y,a=t[r],l=t[h],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=r,g=Math.floor((r+h)/2),p=h,v=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,p),v=Math.floor((A+p)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};p=Math.max(g-1,A),v=Math.floor((A+p)/2)}if(v===g){if(s*(e?-1:1)<0&&g>r){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<h){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=v}};let At=0;class gt{constructor(t,i,s){this.ui=g(!0),this.ci=!1,this.di=!0,this.fi=!1,this.Ai=void 0,this.gi=0,this.D=new yt,this.pi=t,this.yi=i,this.mi=s,this.xi=At,At+=1,this.Si=t.bi.highlightColorOffset}Mi(){let t;return this.wi("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?ot.NearestX:"ProgressiveY"===t||"RegressiveY"===t?ot.NearestY:ot.Nearest}_i(){}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}R(t,i,s,e){this.D.R(t,i,{collectionMember:s,info:e})}removeEventListener(t,i){this.D.removeEventListener(t,i)}ki(t){return void 0!==this.mi.find((i=>i.type===t))}wi(t,i){var s;return!!this.ki(t)&&!0===i(null===(s=this.mi.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.ci||(this.pi.Ci(this),this.ci=!0,this.yi(this),this.D.R("dispose",{})),this}isDisposed(){return this.ci}setVisible(t){const i=this.di;return this.di=t,!t&&i&&this.ui.T()&&this.pi.Ci(this),this}getVisible(){return this.di}setPointerEvents(t){const i=this.ui.T();return this.ui.C(t),t||i&&this.pi.Ci(this),this}getPointerEvents(){return this.ui.T()}Ti(t){return this.Ai=t,this}Fi(){return this.Ai?this.Ai:pt}Ii(t){return this.gi=t,this}Li(){return this.gi}Pi(t){return this.Si=t,this}Bi(){return this.Si}}const pt=f(a(0,0),a(0,0)),vt={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class yt{constructor(){this.Di=new Array,this.Ei=[],this.ui=!0,this.Ri=!1,this.Oi=new Map}setPointerEvents(t){this.ui=t,this.Ei.forEach((i=>i.setPointerEvents(t)))}getPointerEvents(){return this.ui}addEventListener(t,i,s){this.Di.push({listener:i,key:t,options:s||{}})}removeEventListener(t,i){const s=this.Di.findIndex((t=>t.listener===i));s>=0&&this.Di.splice(s,1)}set draggable(t){this.Ri=t,this.Ei.forEach((i=>{i.fi=t}))}get draggable(){return this.Ri}R(t,i,s=void 0){const e=this.Di.slice();for(let r=e.length-1;r>=0;r-=1){const h=e[r];h.key===t&&(h.listener(i,s),!0===h.options.once&&this.removeEventListener(t,h.listener))}}zi(t,i){const s=[];Object.keys(vt).forEach((e=>{const r=(t,s)=>{const r=mt(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,h=(null==i?void 0:i.getExtraData)&&void 0!==r.clientX?i.getExtraData(r,s.collectionMember,s.info):{};this.R(e,t,h),!t.defaultPrevented&&(null==i?void 0:i.continueIfNotPrevented)&&i.continueIfNotPrevented(e,t,h)};t.addEventListener(e,r),s.push((()=>t.removeEventListener(e,r)))})),this.Ei.push(t);const e=()=>{const i=this.Ei.indexOf(t);i>=0&&this.Ei.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.Oi.set(t,(()=>{s.forEach((t=>t()))})),t.fi=this.Ri,t.setPointerEvents(this.ui)}Vi(){this.Oi.forEach((t=>t())),this.Oi.clear(),this.Ei.length=0}Ni(t,i){const s=[];Object.keys(vt).forEach((e=>{const r=(t,s)=>{const r=i(s.collectionMember);r&&this.R(e,t,r)};t.addEventListener(e,r),s.push((()=>t.removeEventListener(e,r)))})),this.Ei.push(t);const e=()=>{const i=this.Ei.indexOf(t);i>=0&&this.Ei.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.Oi.set(t,(()=>{s.forEach((t=>t()))})),t.setPointerEvents(this.ui),t.fi=this.Ri}Gi(t){Object.keys(vt).forEach((i=>{t.addEventListener(i,((t,s)=>{this.R(i,t,s)}))})),t.setPointerEvents(this.ui),t.draggable=this.Ri}}const mt=t=>!(!t||"object"!=typeof t||!("touches"in t)),xt={linear:(t,i,s)=>{const e=i-t;return r=>r<s?t+e/s*r:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=wi(t);return(s,e,r)=>{const h=i(s),n=i(e);return i=>i<r?t**(h+Math.abs(1-2*(Math.sqrt(.5)*(1-i/r))**2)*(n-h)):e}}};class St{constructor(t,i,s,e=xt.linear,r){this.delta=0,this.nextAnimations=new Array,this.$i=!1,this.easing=xt.linear,this.isOver=()=>(this.delta===this.duration||this.$i)&&0===this.nextAnimations.length,this.D=new yt,this.values=t,this.action=i,this.duration=s,this.easing=e,this.Ui=r,this.eases=t.map((([t,i])=>e(t,i,s)))}Yi(){this.D.R("start",{})}start(){return this.Ui.includes(this)||this.Ui.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const r=new St(t,i,s,e,this.Ui);return this.nextAnimations.push(r),r}finish(t=!0){if(this.$i=!0,this.Ui.splice(this.Ui.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&this.D.Di.forEach((t=>{"allAnimationEnd"===t.key&&i.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&i.addEventListener("everyAnimationEnd",t.listener)})),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.D.R("end",{nextAnimation:i}),this.D.R("everyAnimationEnd",{nextAnimation:i})),i}t&&(this.D.R("end",{nextAnimation:void 0}),this.D.R("everyAnimationEnd",{nextAnimation:void 0}),this.D.R("allAnimationEnd",{}))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Ut):this.values.map(Ut)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const bt=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,r,h=0;const n=()=>{e=void 0;const o=Date.now();r=r||o,h=o-r,h/1e3>=1/i&&(r=Date.now()-h%(1e3/i),s.forEach((t=>{0===t.delta&&t.Yi(),t.delta+=h-h%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Nt.requestAnimationFrame(n):(e=void 0,r=void 0)};return(t=1e3,i=xt.linear)=>(r,h,o=t)=>{const a=new St(r,h,o,i,s).start();return e||(e=Nt.requestAnimationFrame(n)),a}};var Mt;exports.ImageFitMode=void 0,(Mt=exports.ImageFitMode||(exports.ImageFitMode={}))[Mt.Fill=0]="Fill",Mt[Mt.Fit=1]="Fit",Mt[Mt.Stretch=2]="Stretch",Mt[Mt.Center=3]="Center",Mt[Mt.Tile=4]="Tile";const wt=t.Record({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:b(0,0,0,0),sourceMissingColor:b(0,0,0,0),fitMode:exports.ImageFitMode.Fill});class _t extends wt{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return S(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return S(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}toCSS(){return`url(${this.getSource().src})`}}const kt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Ct=t.Record({type:"linestyle",lineType:"empty"}),Tt=new class extends Ct{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}ji(){return 0}setFillStyle(t){return this}getFillStyle(){return ae}},Ft=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),It=-34028234663852886e22,Lt="-340282346638528859811704183484516925440.0";var Pt,Bt,Dt,Et;exports.UISpace=void 0,(Pt=exports.UISpace||(exports.UISpace={}))[Pt.Content=0]="Content",Pt[Pt.PaddedContent=1]="PaddedContent",Pt[Pt.PaddedBackground=2]="PaddedBackground",Pt[Pt.Everything=3]="Everything",exports.UIVisibilityModes=void 0,(Bt=exports.UIVisibilityModes||(exports.UIVisibilityModes={}))[Bt.never=0]="never",Bt[Bt.always=1]="always",Bt[Bt.whenHovered=2]="whenHovered",Bt[Bt.whenDragged=3]="whenDragged",Bt[Bt.whenNotDragged=4]="whenNotDragged",Bt[Bt.whenHoveredOrDragged=5]="whenHoveredOrDragged",exports.UIDraggingModes=void 0,(Dt=exports.UIDraggingModes||(exports.UIDraggingModes={}))[Dt.notDraggable=0]="notDraggable",Dt[Dt.draggable=1]="draggable",Dt[Dt.onlyHorizontal=2]="onlyHorizontal",Dt[Dt.onlyVertical=3]="onlyVertical",exports.UIDirections=void 0,(Et=exports.UIDirections||(exports.UIDirections={}))[Et.Up=0]="Up",Et[Et.Right=1]="Right",Et[Et.Down=2]="Down",Et[Et.Left=3]="Left";const Rt=t=>"getHighlight"in t&&"setHighlight"in t,Ot=(t,i,s)=>void 0===t||"number"==typeof t?t:Array.isArray(t)?t.slice(i,s):t.subarray(i,s),zt=(...t)=>{const i=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,s)=>s?(Object.keys(s).forEach((e=>{const r=t[e],h=s[e];i(r)&&i(h)?t[e]=zt(r,h):t[e]=h})),t):t),{})},Vt=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=kt(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{ji(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${Nt.location.origin}/resources`,s=t.styleFactory(i);if(kt(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=kt(s)&&s.getSource(),r=e&&e instanceof Image?e:void 0;Nt.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==r||r.addEventListener("load",(()=>{t.apply(s)})),null==r||r.addEventListener("error",(()=>{ji(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},Nt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Gt=(t,i)=>t.x===i.x&&t.y===i.y,$t=t=>t!==rs&&t!==hs&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Ut=t=>t[1],Yt=t=>t.dispose(),jt=()=>{},Ht=(t,i)=>t===i,Wt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Xt=t=>Array.prototype.concat.apply([],t),Zt=(t,i)=>void 0===t||Number.isNaN(t)?i:t,Jt=t=>t.Hi(),Qt=t=>t.Wi(),Kt=t=>t.Xi(),qt=t=>t.Zi(),ti=t=>t.min.x,ii=t=>t.max.x,si=t=>t.min.y,ei=t=>t.max.y,ri=(t,i,s,e,r)=>{if(t.length>0){let h=r?e(r):void 0;for(let e=0;e<t.length;e+=1){const r=i(t[e]);void 0!==r&&(h=void 0!==h?s(h,r):r)}return h}if(r)return e(r)},hi=a(0,1),ni=a(1,0),oi=a(0,-1),ai=a(-1,0),li=a(0,0),ui=t=>{switch(t){case exports.UIDirections.Up:return hi;case exports.UIDirections.Right:return ni;case exports.UIDirections.Down:return oi;case exports.UIDirections.Left:return ai;default:return li}},ci=t=>t===exports.UIDirections.Left||t===exports.UIDirections.Right,di=t=>{t.stopPropagation(),t.preventDefault()},fi=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let r=0;for(let i=0;i<s;i+=1){const s=t[i],h=Math.fround(s);e[r+0]=h,e[r+1]=s-h,r+=2}return e},Ai=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let r=0;for(let s=0;s<i;s+=1){const i=t[s];e[r+0]=i.x,e[r+1]=i.y,r+=2}return e}const e=t.length,r=new s(4*e);let h=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);r[h+0]=e,r[h+1]=n,r[h+2]=s.x-e,r[h+3]=s.y-n,h+=4}return r},gi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let r=0;r<i;r+=1){const i=t[r];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},pi=(t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(r,h,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=r.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=r[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&ge(n)&&n.getFallbackColor()||C;c=u;for(let i=0;i<a;i+=1){const s=r[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=h&&h.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=r[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=r[t];l[c+0]=void 0!==i.value?i.value:It,c+=o}u+=1}if(e){const t=h&&h.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=r[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,h=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=h,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>vi(t,i):(t,i,s)=>xi(t):(t,i,s)=>mi(t,i):(t,i,s)=>yi(t,s):(t,i,s)=>gi(t),vi=(t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const r=t.length,h=new Float32Array(6*r);let n=0;for(let i=0;i<r;i+=1){const s=t[i];h[n+0]=s.x,h[n+1]=s.y,h[n+2]=s.z;const r=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;h[n+3]=r,h[n+4]=o,h[n+5]=a,n+=6}return h},yi=(t,i)=>{const s=i&&ge(i)&&i.getFallbackColor()||C,e=t.length,r=new Float32Array(7*e);for(let i=0,h=0;i<e;i+=1){const e=t[i];r[h+0]=e.x,r[h+1]=e.y,r[h+2]=e.z;const n=e.color||s;r[h+3]=n.r,r[h+4]=n.g,r[h+5]=n.b,r[h+6]=n.a,h+=7}return r},mi=(t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const r=t.length,h=new Float32Array(4*r);for(let i=0,s=0;i<r;i+=1){const r=t[i];h[s+0]=r.x,h[s+1]=r.y,h[s+2]=r.z;const n=void 0!==r.size?r.size:e;h[s+3]=n,s+=4}return h},xi=t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,r=0;e<i;e+=1){const i=t[e];s[r+0]=i.x,s[r+1]=i.y,s[r+2]=i.z,s[r+3]=void 0!==i.value?i.value:It,r+=4}return s},Si=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},bi=(t,i,s)=>{const e=((t,i)=>{if(i<rs&&i>hs&&t<rs&&t>hs){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),r=Math.min(s,e);return 10**Math.floor(Math.log10(r))}})(t,i);if(void 0!==e)return e*s},Mi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},wi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},_i=wi(Math.E),ki=(t,i)=>{const s=i[t];return s?s():void 0},Ci=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Gs(Ds(t,s))-Gs(Ds(i,s))))},Ti=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Fi=t=>255===t.getA()?t:t.setA(255),Ii=(()=>{const t=b(0,0,0);return i=>(i=Fi(i),new N({angle:180,stops:[{offset:0,color:i},{offset:1,color:nt(i,t,.5)}]}))})(),Li=(()=>{const t=(t,i)=>{var s;if(t){if(fe(t)){if(0===t.getColor().getA())return;return t.getColor()}if(z(t)||G(t)){const i=t.getColorStops();return 2===i.length?i[1].color:null===(s=i[0])||void 0===s?void 0:s.color}return ye(t)&&void 0!==i?t.lut.getColors(i,void 0):void 0}};return(i,s,e)=>{var r;const h=[];if(e.fill&&h.push(e.fill),e.fill2&&h.push(e.fill2),e.stroke){const t=e.stroke.getFillStyle();t!==ae&&("stroke"===(null===(r=e.behavior)||void 0===r?void 0:r.priority)?h.unshift(t):h.push(t))}if(e.point3D){const t=e.point3D;h.push(t.getFillStyle())}let n;if(e.behavior&&!0===e.behavior.colorStep){const[s,r]=h.reduce(((i,s)=>{if(i[0]&&i[1])return i;const r=t(s,e.lutValue);return r&&(void 0===i[0]?i[0]=r:i[1]=r),i}),[void 0,void 0]);n=s&&r?(o=s)===(a=r)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?Ii(o):(o=Fi(o),a=Fi(a),new N({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):i.uiButtonFillStyle}else{const r=h.reduce(((i,s)=>i||t(s,e.lutValue)),void 0);n=r?s?new de({color:r}):Ii(r):i.uiButtonFillStyle}var o,a;return n}})(),Pi=(t,i)=>{const s=t;if(ye(s))return{lut:s.getPalette(),lookUpProperty:s.getLookUpProperty(),valueRange:i}},Bi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Di=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let r=e>=0?e:s.length;for(;r<i;r+=1)s=`0${s}`;return s},Ei=(t,i)=>"function"==typeof t?t(i):t,Ri=(t,i)=>i(),Oi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"),zi=t=>t===ns||t.min.x===ns.min.x&&t.max.x===ns.max.x&&t.min.y===ns.min.y&&t.max.y===ns.max.y,Vi=t=>Array.from(new Set(t)),Ni=t=>t.filter((t=>void 0!==t)),Gi=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,$i=(t,i)=>{throw new Error(i)},Ui=t=>{let i;return()=>i||(i=t(),i)},Yi=t=>{if(t===Tt)return 0;const i=t.getThickness();return i<0?1:1*i},ji=(t,i,s,e)=>{const r=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Nt.alert(r),new Error(r);Nt.console.warn(r)},Hi=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const r=i;for(;e!==i;){const r=Math.ceil((e+i)/2);t<s(r)?i=r-1:e=r}const h=Math.abs(t-s(e));return e<r&&Math.abs(t-s(e+1))<h?e+1:e},Wi=()=>{const t=new Map;return{Ji:i=>(Object.keys(vt).forEach((s=>{i.addEventListener(s,((i,e)=>{const r=e.collectionMember&&t.get(e.collectionMember);if(!r)return;const h=mt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:i,n=r.Qi(e.info,h,e.collectionMember);r.D.R(s,i,n)}))})),i),Ki:(i,s)=>{t.set(i,s)},Vi:()=>{t.clear()}}},Xi={left:0,right:0,top:0,bottom:0},Zi=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Ji=(t,i,s)=>{i&&i.qi();const e=s();return Object.keys(e).forEach((i=>{const s=i,r=e[s];t.addEventListener(s,r)})),{ts:t,qi:()=>{Object.entries(e).forEach((([i,s])=>{const e=i,r=s;t.removeEventListener(e,r)}))}}},Qi=(t,i,s)=>{let e;const r=()=>(e=s(),e),h={...t,resolve:()=>e||r()};for(const t of Object.keys(i))Object.defineProperty(h,t,{get:function(){return e?e[t]:r()[t]}});return h},Ki=t=>{if(t)return"resolve"in t?t.resolve():t},qi=t=>{let i=t;return{ss:t=>{const s=i;return i=s+t,[s,t]}}},ts=t=>{const i=Date.now();Nt.document.body.addEventListener(t,(t=>{Date.now()-i>500||(t.stopPropagation(),t.preventDefault())}),{once:!0,capture:!0})},is=()=>{const t=Nt.performance.now();Nt.document.body.addEventListener("contextmenu",(i=>{Nt.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},ss=()=>{const t=Nt.performance.now();Nt.document.body.addEventListener("touchstart",(i=>{Nt.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},es={add:(t,i)=>c(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>c(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>c(t.x*i,t.y*i,t.z*i),divide:(t,i)=>c(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>es.divide(t,es.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>c(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(es.dot(t,i)/(es.length(t)*es.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),r=Math.sin(s),h=es.dot(i,t),n=es.cross(i,t);return es.addVec(es.multiply(t,e),es.addVec(es.multiply(i,(1-e)*h),es.multiply(n,r)))},lerp:(t,i,s)=>(s=Wt(s,0,1),es.addVec(es.multiply(t,1-s),es.multiply(i,s))),equals:(t,i)=>Ht(t.x,i.x)&&Ht(t.y,i.y)&&Ht(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},rs=Number.MAX_VALUE,hs=-Number.MAX_VALUE,ns=f(a(rs,rs),a(hs,hs)),os=f(c(rs,rs,rs),c(hs,hs,hs)),as=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},ls=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),us=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),cs=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),ds=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(ls(t[s],t[e]))return!0;return!1},fs=(t,i)=>i+t,As=(t,i,s)=>{const e=Ds(i,t),r=e.x*e.x+e.y*e.y;if(0===r)return t;const h=Ds(s,t),n=(h.x*e.x+h.y*e.y)/r;return n<=0?t:n>=1?i:a(t.x+n*e.x,t.y+n*e.y)},gs=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,ps=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},vs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},ys=(t,i,s)=>{let e=s.x-i.x,r=s.y-i.y;const h=e*e+r*r;if(h<.01)return Number.MAX_VALUE;const n=((t.x-i.x)*e+(t.y-i.y)*r)/h,o=i.x+n*e,a=i.y+n*r;return e=t.x-o,r=t.y-a,e*e+r*r},ms=(t,i,s)=>Bs(t,Ps(Ds(i,t),s)),xs=(t,i,s)=>es.addVec(t,es.multiply(es.subtractVec(i,t),s));function Ss(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,r=t[0].y,h=t[0].y;for(let n=1;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>r&&(r=i.y),i.y<h&&(h=i.y)}return f(a(e,h),a(s,r))}return ns}function bs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,r=t[0].y,h=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>r&&(r=i.y),i.y<h&&(h=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return f(c(e,h,o),c(s,r,n))}return os}const Ms=(...t)=>{const i={min:{x:rs,y:rs},max:{x:hs,y:hs}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},ws=(t,i)=>f(c(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),c(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function _s(t,i,s,e){const r=t.x-e.x,h=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*r+n*h,l=(e.y-i.y)*r+(i.x-e.x)*h,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}const ks=(t,i,s)=>!(t.x>s.x||t.y>s.y||t.x<i.x||t.y<i.y);function Cs(t,i,s){return a(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Ts(t,i){return a(t.x-i.x,t.y-i.y)}function Fs(t){const i=Ls(t);return 0===i?a(0,0):a(t.x/i,t.y/i)}function Is(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Fs(s);const e=Math.PI/2,r=s.x;return s.x=-Math.sin(e)*s.y,s.y=r*Math.sin(e),s}function Ls(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Ps(t,i){return a(t.x*i,t.y*i)}function Bs(t,i){return a(t.x+i.x,t.y+i.y)}function Ds(t,i){return a(t.x-i.x,t.y-i.y)}function Es(t,i){return a(t.x*i.x,t.y*i.y)}function Rs(t,i){return a(t.x/i.x,t.y/i.y)}function Os(t){return Ps(t,-1)}function zs(t,i){return t.x*i.x+t.y*i.y}const Vs=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),r=i.y+(t-i.x)*e;return a(t,r)};function Ns(t){return t*Math.PI/180}function Gs(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function $s(t){return a(Math.cos(t),Math.sin(t))}const Us=(t,i,s,e)=>{let r,h,n,o;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(n=i.x,h=(e.y-s.y)/(e.x-s.x),o=h*(n-s.x)+s.y):e.x-s.x==0?(n=e.x,r=(i.y-t.y)/(i.x-t.x),o=r*(n-t.x)+t.y):(r=(i.y-t.y)/(i.x-t.x),h=(e.y-s.y)/(e.x-s.x),n=(s.y-h*s.x+r*t.x-t.y)/(r-h),o=r*(n-t.x)+t.y),a(n,o)},Ys=(t,i)=>{const s=t.length,e=i.length,r=new Uint16Array(s+e);return r.set(t,0),r.set(i,s),r};class js extends j{constructor(t,i,s,e){super(t,i,s,e),this.es={internal:10,function:Hs(10),number:10},this.Y=1e3,this.W(1,1e3),this.Wt=this.rs()}et(t,i,s,e,r){if(t===i)return!1;const h=Math.min(t,i)<Xs,n=Math.max(t,i)>Zs;return!h&&!n||!!r&&(i>t?{start:h?Xs:t,end:n?Zs:i}:{start:n?Zs:t,end:h?Xs:i})}Dt(t){const i=this.bt(),s=this.Mt(),e=Math.max(t,Xs);return i+(this.es.function(e)-this.Wt.scaleStartLog)/this.Wt.scaleIntervalLog*(s-i)}Et(t){const i=this.bt(),s=(t-i)/(this.Mt()-i),e=this.Wt.scaleStartLog+s*this.Wt.scaleIntervalLog;return this.es.number**e}Ft(){this.es&&this.rs()}W(t,i){return super.W(t,i),this.es&&this.rs(),this}St(t){return super.St(t),this.es&&this.rs(),this}Z(t){return super.Z(t),this.es&&this.rs(),this}hs(t){return this.es={internal:t,function:Hs(t),number:Ws(t)},this}ns(){return this.es.internal}Qt(t,i){const s=this.Dt(t)+i;return this.Et(s)}Bt(){return this.nt||this.rt||this.ut||this.ht}rs(){const t=this.es.function(this.$),i=this.es.function(this.U)-t,s=2*this.bt()/this.Y-1,e=2*this.Mt()/this.Y-1-s;return this.Wt={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Wt}Ht(){return this.Wt}}const Hs=t=>"e"===t?_i:wi(t),Ws=t=>"e"===t?Math.E:t,Xs=.9*10**-20,Zs=1.1*10**25,Js=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Qs=(t,i,s)=>{const e=Math.abs(s-i);if(0===e)return t.toFixed(0);const r=Math.max(2-as(e,10),0);return t.toFixed(r)},Ks={Numeric:(t,i)=>{const{start:s,end:e}=i;return Qs(t,s,e)},NumericUnits:(t,i)=>{const{start:s,end:e}=i,r=Math.abs(e-s),h=t<0;t=Math.abs(t);let n="",o="";if(r>=1e3&&t>1e3){let i="";for(const s of Js){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),o=s.prefix;break}}n=(h?"-":"")+i}else{let i=String(Math.floor(t));const s=as(t,1e3);for(let t=1;t<=s;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}n=(h?"-":"")+i+(r<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-as(r,10)):"")}return n+=o,n},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const r=Hs(e)(t);return`${e}${qs(r)}`},LogarithmicExponents:(t,i,s,e=10)=>{const r=Hs(e),h=Math.floor(r(t)),n=t/Ws(e)**h;return`${Math.round(n)}×${e}${qs(h)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const r=Hs(e),h=Math.floor(r(t));return`${(t/Ws(e)**h).toFixed(2)}×${e}${qs(h)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const r=Hs(e);if("e"===e)return`${Math.floor(r(t))}e`;const h=t.toString();if(t>1)return h;const n=Math.floor(r(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const{start:s,end:e}=i,r=Math.max(Math.abs(s),Math.abs(e)),h=Math.floor(Math.log10(r));return 0===t?`0.00e${h<0?"":"+"}${h}`:t.toExponential(2)}},qs=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join(""),te=(t,i)=>t.value-i.value,ie=t.Record({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:b(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1,formatter:(t,i)=>Qs(t,i.min,i.max)}),se=t=>{const{steps:i}=t,s=i.length;i.sort(te);const[e,r]=s>0?[i[0].value,i[s-1].value]:[0,0],h=s>0?s-1:0,n=Array(h);for(let t=0;t<h;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:r,length:s,steps:i,subranges:n,isValid:s>0&&e!==r}};class ee extends ie{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,formatter:t.formatter,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,se(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(se({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}setFormatter(t){return this.set("formatter",t)}getFormatter(){return this.get("formatter")}getColors(t,i){if(Array.isArray(t)){if(Array.isArray(t[0])){const s=t,e=s.length,r=s[0].length,h=[...Array(e)].map((()=>Array(r)));for(let t=0;t<e;t+=1)for(let e=0;e<r;e+=1)h[t][e]=this.ls(s[t][e],i);return h}const s=t,e=s.length,r=Array(e);for(let t=0;t<e;t+=1)r[t]=this.ls(s[t],i);return r}return this.ls(t,i)}ls(t,i){const{steps:s}=this,e=s.length;if(0===e)return this.getFallbackColor();if(1===e)return s[0].color||this.color;if(this.percentageValues,this.percentageValues&&i&&(t=Math.max(Math.min((t-i.min)/(i.max-i.min),1),0)),this.interpolate){for(let i=0;i<e-1;i+=1){const e=s[i],o=s[i+1],a=Math.min(e.value,o.value),l=Math.max(e.value,o.value);if(t>=a&&t<=l){if(a===l)return e.color;const i=(t-e.value)/(o.value-e.value);return r=e.color,h=o.color,n=i,new x({r:r.r+(h.r-r.r)*n,g:r.g+(h.g-r.g)*n,b:r.b+(h.b-r.b)*n,a:r.a+(h.a-r.a)*n})}}return t<s[0].value?s[0].color:s[e-1].color}var r,h,n;for(let i=e-1;i>=0;i-=1)if(t>=s[i].value)return s[i].color;return s[0].color}}const re=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),he=(t,i)=>t.formatter(i,{min:t.min,max:t.max,percentageValues:t.percentageValues}),ne=t.Record({type:"fillstyle",fillType:"empty"});class oe extends ne{toString(){return"emptyFill"}toCSS(){return"transparent"}}const ae=new oe,le=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),ue=t.Record({type:"fillstyle",fillType:"solid",color:b(255,255,255)});class ce extends ue{}class de extends ce{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}toCSS(){return this.color.toRGBAString()}setColor(t){return S(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const fe=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class Ae extends ce{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}toCSS(){return this.getFallbackColor().toRGBAString()}setFallbackColor(t){return S(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const ge=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),pe=t.Record({type:"fillstyle",fillType:"palette",lut:new ee({steps:[]}),lookUpProperty:"value"});class ve extends pe{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}toCSS(){return`linear-gradient(${this.lut.getSteps().map((t=>t.color.toRGBAString())).join(", ")})`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const ye=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),me=(t,i)=>t instanceof js||i instanceof js?(new J).Kt(t,i):(new Z).Kt(t,i),xe=t=>"client"===t,Se=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),be=t=>"relative"===t,Me=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),we=(t,i,s,e)=>{let r,h,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===r||i<n)&&(r=l,h=a,n=i)}}return r&&h?[r,h]:void 0},_e=(t,i,s,e,r,h)=>{if(!t)return;let n=t;const o="button"in s?s:void 0;if(o&&"wheel"!==s.type)if(0===o.button){if(!1===t.lmb)return;void 0!==t.lmb&&(n=zt(n,t.lmb))}else if(1===o.button){if(!1===t.mmb)return;void 0!==t.mmb&&(n=zt(n,t.mmb))}else if(2===o.button){if(!1===t.rmb)return;void 0!==t.rmb&&(n=zt(n,t.rmb))}if(e){if(!1===t.shift)return;n=zt(n,t.shift)}if(r){if(!1===t.ctrl)return;n=zt(n,t.ctrl)}if(h){if(!1===t.alt)return;n=zt(n,t.alt)}if(!i)return n;const a=n[i];return a?!0===a?n:zt(n,a):void 0},ke=t=>{const i=[];return{push:t=>{i.push(t)},end:()=>{i.length>1&&t&&Nt.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),i.forEach((t=>t()))}}},Ce=(t,i,s)=>{if(t){const t={x:s.x.bt(),y:s.y.bt(),width:s.x.wt(),height:s.y.wt()};i.forEach((i=>{i.us=t}))}else i.forEach((t=>{t.us=void 0}))},Te=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.cs)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},Fe=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},Ie=(t,i,s,e=1)=>Wt(t+.1*e*(i-t)+.5*e*Math.abs(s.getPixelSize())*Math.sign(i-t),t,i),Le=(t,i,s,e=1)=>{const r=s.Dt(t),h=s.Dt(i);return Wt(s.Et(r+.1*e*(h-r)+.5*e*Math.sign(h-r)),t,i)};var Pe,Be;exports.HighlightModes=void 0,(Pe=exports.HighlightModes||(exports.HighlightModes={}))[Pe.noHighlighting=0]="noHighlighting",Pe[Pe.onHover=1]="onHover",Pe[Pe.onHoverIndividual=2]="onHoverIndividual";class De{constructor(t,i,s,e){this.ds=exports.HighlightModes.onHover,this.ci=!1,this.di=!0,this.fs=[],this.chart=t,this.As=i,this.bi=s,this.gs=new Map,this.ps=e,this.vs=this.ps.ys(this,{xs:{themeEffectEnabled:this.bi.effectsText},Ss:{}}),this.chart.pi.Ms.bs(this,(t=>{this.gs.forEach(((i,s)=>s.Ii(t))),this.fs.forEach((i=>i.Ii(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),Nt.requestAnimationFrame((()=>{this.ci||(this.addEventListener("pointerenter",(()=>{this.ds===exports.HighlightModes.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.ds===exports.HighlightModes.onHover&&this.setHighlight(!1)})))}))}ws(){}_s(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.pointerEventsDisabled)&&i.pointerEventsDisabled,r=void 0!==(null==i?void 0:i.isText)&&i.isText;this.gs.set(t,{isText:r,pointerEventsDisabled:e});const h=Array.from(this.gs);this.vs.xs.ks(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.vs.Ss.ks(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.di).Ii(this.chart.pi.Ms.Cs(this,!0)),Nt.requestAnimationFrame((()=>{this.ci||t.isDisposed()||(t.setPointerEvents(!0!==(null==i?void 0:i.pointerEventsDisabled)&&this.getPointerEvents()),s&&this.D.zi(t,{getExtraData:(t,i,s)=>this.Qi(s,t,i)}))}));const n=i=>{t.removeEventListener("dispose",n),this.gs.delete(t)};t.addEventListener("dispose",n)}Ts(t){this.fs=t;const i=this.chart.pi.Ms.Cs(this,!0);t.forEach((t=>{t.Ii(i).Fs(this.di)}))}Qi(t,i,s){}Is(t){const i=this.chart.pi.Ls(t);if(i&&Array.from(this.gs.keys()).includes(i.entity))return this.Qi(i.info,t,i.collectionMember)}setEffect(t){return this.vs.xs.Ps(t&&this.bi.effectsText),this.vs.Ss.Ps(t),this.chart.pi.Bs(),this}getEffect(){return this.vs.xs.Ds()||this.vs.Ss.Ds()}setIcon(t){return this.Es=t,this.chart.pi.Bs(),this}getIcon(){return this.Es}setName(t){return this.Rs=t,this}getName(){return this.Rs||"Component"}dispose(){return this.ci||(this.ci=!0,this.gs.forEach(((t,i)=>i.dispose())),this.As(this),this.D.R("dispose",{}),this.chart.legend.remove(this),this.chart.pi.Bs()),this}setVisible(t){return t===this.di||(this.di=t,this.gs.forEach(((i,s)=>s.setVisible(t))),this.fs.forEach((i=>i.Fs(t))),this.D.R("visiblechange",{isVisible:t}),this.chart.Os.forEach((t=>t.zs())),this.chart.pi.Bs()),this}getVisible(){return this.di}setHighlight(t){return this.chart.pi.Ms.Vs(this,t),this.D.R("highlightchange",{highlight:Gi(t)}),this}getHighlight(){return this.chart.pi.Ms.Cs(this)}setAnimationHighlight(t){return this.chart.pi.Ms.Ns(this,t),this}getAnimationHighlight(){return this.chart.pi.Ms.Gs(this)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}getPointed(){if(!this.chart.pi.$s())return!1;for(const t of this.gs)if(this.chart.pi.Us(t[0]))return!0;for(const t of this.fs)if(this.chart.pi.Us(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.ds="boolean"==typeof t?t?exports.HighlightModes.onHover:exports.HighlightModes.noHighlighting:t,this.ds===exports.HighlightModes.noHighlighting&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.ds!==exports.HighlightModes.noHighlighting}Ys(){}js(){return this.Es}isDisposed(){return this.ci}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}}class Ee extends De{constructor(t,i,s,e,r,h,n,o){super(i,s,n,o),this.Hs=!0,this.Ws=t,this.axis=e,this.ai=r,this.Xs=h,Nt.requestAnimationFrame((()=>this.Zs()))}setClipping(t){return this.Hs=t,this.Ws.Bs(),this}getClipping(){return this.Hs}}exports.TextObjectIdentifier=void 0,(Be=exports.TextObjectIdentifier||(exports.TextObjectIdentifier={}))[Be.Other=0]="Other",Be[Be.CursorResultTable=1]="CursorResultTable",Be[Be.CursorTickMarker=2]="CursorTickMarker",Be[Be.ChartTitle=3]="ChartTitle",Be[Be.AxisTitle=4]="AxisTitle";const Re=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Oe;exports.PointShape=void 0,(Oe=exports.PointShape||(exports.PointShape={}))[Oe.Square=0]="Square",Oe[Oe.Circle=1]="Circle",Oe[Oe.HollowCircle=2]="HollowCircle",Oe[Oe.Triangle=3]="Triangle",Oe[Oe.Cross=4]="Cross",Oe[Oe.Diamond=5]="Diamond",Oe[Oe.Plus=6]="Plus",Oe[Oe.Minus=7]="Minus",Oe[Oe.Arrow=8]="Arrow",Oe[Oe.Star=9]="Star";const ze=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",Ve=t=>"ProgressiveX"===t||"ProgressiveY"===t,Ne=(t,i,s)=>t*(1-s)+i*s,Ge=(t,i,s,e,r)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===r.value)return;const h=(t.x-s.point.x)/(r.point.x-s.point.x),n=(r.point.y-s.point.y)*h+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=Ne(s.value,r.value,h),c=Ne(i.value,e.value,o);return Ne(c,u,l)},$e={warm:t=>i=>w(60/(t-1)*i,.8,.8),cold:t=>i=>w(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>w(360/t*i,.8,.8),reverseSpectrum:t=>i=>w(360/t*(t-i),.8,.8),flatUI:t=>i=>w(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return w(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return w(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return w(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return w(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return w(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>w(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return w(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return w(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),w(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return w(0,0,e);const r=i.getR()/255,h=i.getG()/255,n=i.getB()/255,o=Math.max(r,h,n),a=Math.min(r,h,n);let l=0;if(o!==a){const t=o-a;switch(o){case r:l=(h-n)/t+(h<n?6:0);break;case h:l=(n-r)/t+2;break;case n:l=(r-h)/t+4;break;default:l=0}return l=l/6*360,w(l,.8,e)}return w(0,0,e)},sector:(t,i,s=.8,e=.8)=>r=>h=>w(t+(i-t)/r*h,s,e),auroraBorealis:t=>i=>Ue([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Ue([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Ue([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Ue([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Ue([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Ue([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Ue=(t,i,s)=>{const e=je(i,s),[r,h]=He(e,t),n=Ye(t[r]),o=Ye(t[h]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Ne(n.h,o.h,a),s:Ne(n.s,o.s,a),v:Ne(n.v,o.v,a)};return w(l.h,l.s,l.v)},Ye=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,r=Math.max(i,s,e),h=Math.min(i,s,e);let n=0;const o=r,a=r-h,l=0===r?0:a/r;if(r===h)n=0;else{switch(r){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(M(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},je=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},He=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class We{constructor(){this.type="simple"}}const Xe=new We;class Ze{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=M("#000"),this.specularColor=M("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Je=new Ze,Qe={Simple:We,Phong:Ze};class Ke{getFillStyle(){return ae}}const qe=new Ke,tr=t.Record({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new de,wireframeStyle:Tt});class ir extends tr{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const sr=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),er=t.Record({type:"pixelated-points-3d",size:5,fillStyle:new de});class rr extends er{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const hr=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),nr={Triangulated:ir,Pixelated:rr},or=t.Record({type:"linestyle",lineType:"solid",fillStyle:new de({color:b(255,255,255)}),thickness:1});class ar extends or{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}ji(){const t=this.getThickness();return t<0?1:t}}const lr=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),ur={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},cr=t.Record({type:"linestyle",lineType:"dashed",pattern:ur.DashedEqual,fillStyle:new de({color:b(255,255,255)}),thickness:1,patternScale:3});class dr extends cr{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}ji(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const fr=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),Ar=t.Record({type:"icon",width:void 0,height:void 0,Js:void 0,Qs:jt,Ks:jt});class gr extends Ar{constructor(t,i,s,e){super({...e,Js:t,Qs:i,Ks:s})}dispose(){return this.Ks(this),this}setWidth(t){const i=this.set("width",t);return this.Qs(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.Qs(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.Qs(s),s}kt(){if(!this.Js)return{x:0,y:0};const t=this.Js.width,i=this.Js.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const pr=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),vr=t.Record({type:"glow",color:b(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class yr extends vr{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class mr extends X{constructor(){super(...arguments),this.ri="RadialScale",this.qs={start:0,end:1},this.te=!1,this.ie=0,this.Y=a(0,0),this.se=[0,0],this.ee=[0,0],this.u=!0,this.Lt=!0,this.re=!0,this.he=!0,this.ne={x:0,y:0},this.Wt={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}oe(t,i){return t===this.qs.start&&i===this.qs.end||(this.qs={start:t,end:i},this.re=!0,this.ae()),this}le(){return this.qs}ue(){return this.qs.end>=this.qs.start}ce(t){this.te=t,this.he=!0}de(){return!1===this.te}fe(t){this.ie=t,this.he=!0}Ae(){return this.ie}Bt(){return this.Lt}zt(){return!1}hi(t,i,s,e){return this.x=new H(t.x,i.x,s.x,e?e.x:void 0),this.y=new H(t.y,i.y,s.y,e?e.y:void 0),this}Ht(){return this.Wt}ge(){return this.re}pe(){return this.he}ni(){return this.ne}j(){return this.u=!1,this.Lt=!1,this.re=!1,this.he=!1,this}H(){return this.u=!0,this.Lt=!0,this.re=!0,this.he=!0,this}Z(t,i){return"object"==typeof t?(this.Y.x=t.x,this.Y.y=t.y):(this.Y.x=t,this.Y.y=i),this.ae(),this}qt(t){return this.se=t,this.ae(),this}ti(t){return this.ee=t,this.ae(),this}_t(){return a(this.se[0]+this.se[1],this.ee[0]+this.ee[1])}kt(){return this.Y}ae(){const t=this.qs,i=a(this.x.Ct(this.Y.x),this.y.Ct(this.Y.y)),s=this.se[0]+this.se[1],e=this.ee[0]+this.ee[1],r=Math.max(i.x-s,0),h=Math.max(i.y-e,0),n=.5*(r>h?h:r),o=[this.se[0]+Math.max((r-2*n)/2,0),this.se[1]+Math.max((r-2*n)/2,0)],l=[this.ee[0]+Math.max((h-2*n)/2,0),this.ee[1]+Math.max((h-2*n)/2,0)],u=Math.abs(t.end-t.start);this.x.Z(this.Y.x).St(o).W(-u,u),this.y.Z(this.Y.y).St(l).W(-u,u),this.ne={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Wt={x:this.x.Ht(),y:this.y.Ht()},this.H()}Qt(t,i){const s=this.ni();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}oi(t,i,s,e){const r=this.ni(),h=Is(t,i);return h.x*=e,h.y*=e,{x:t.x+s*r.x*h.x,y:t.y+s*r.y*h.y}}}const xr=t=>{if(t instanceof Z||t instanceof mr)return t.zt()?"linear-highPrecision":"linear";if(t instanceof J){const i={};return t.x instanceof js&&(i.x={base:t.x.ns()}),t.y instanceof js&&(i.y={base:t.y.ns()}),["logarithmic",i]}return"linear"},Sr=(t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,r=Math.cos(e),h=Math.sin(e);return{x:Math.abs(t*r)+Math.abs(i*h),y:Math.abs(t*h)+Math.abs(i*r)}},br=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let r=!1;s[i]=t=>{if(!t)return r;const i=e();return r=i,i}})),s},Mr=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.Hi(),max:i.Wi()}:"y"===t.getLookUpProperty()?{min:i.Xi(),max:i.Zi()}:"z"===t.getLookUpProperty()?{min:i.ve(),max:i.ye()}:void 0,wr=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),_r={init:t=>(t=>{const i=new Map;t.engine.addEventListener("locationchange",(()=>{i.forEach((t=>{t.bounds=void 0}))}));const s=s=>{let e=i.get(s.uid);if(!e){const r=document.createElement("p");r.className="lcjs-text",t.engine.container.append(r),r.style.userSelect="none",r.style.whiteSpace="nowrap",r.style.margin="0px",e={span:r,active:!0},i.set(s.uid,e),r.addEventListener("pointerenter",(i=>t.handleEvent(s,i))),r.addEventListener("pointermove",(i=>t.handleEvent(s,i))),r.addEventListener("pointerleave",(i=>t.handleEvent(s,i)))}if(e.text!==s.text&&(((t,i)=>{const s=t.includes("latex:"),e=!s&&t.includes("tex:");let r=!0;if(s||e)try{Nt.MathJax&&s?(r=!1,i.innerHTML=t.replace(/latex:/g,""),Nt.MathJax.typesetPromise([i]).catch((t=>Nt.console.error(t.message)))):Nt.katex&&e&&(r=!1,Nt.katex.render(t.replace(/tex:/g,""),i,{throwOnError:!1}))}catch(t){r=!0}r&&(i.innerHTML=t)})(s.text,e.span),e.bounds=void 0),e.font!==s.font&&(e.span.style.font=s.font,e.bounds=void 0),e.position!==s.position&&(e.span.style.position=s.position,e.bounds=void 0),e.color!==s.color&&(e.span.style.color=s.color),e.padding!==s.padding&&(e.span.style.padding=s.padding,e.bounds=void 0),e.rotation!==s.rotation&&(e.span.style.transform=`rotate(${s.rotation}deg)`,e.bounds=void 0),e.span.style.lineHeight="80%",e.text!==s.text||e.left!==s.left||e.top!==s.top||e.alignmentX!==s.alignmentX||e.alignmentY!==s.alignmentY||e.padding!==s.padding||e.rotation!==s.rotation||e.font!==s.font){e.span.style.width="unset",e.span.style.height="unset";const t=e.span.clientWidth,i=e.span.clientHeight,r=Sr(t,i,s.rotation),h={x:(r.x-t)/2,y:(r.y-i)/2};e.span.style.left=`${s.left+(-.5*s.alignmentX-.5)*r.x+h.x}px`,e.span.style.top=`${s.top+(.5*s.alignmentY-.5)*r.y+h.y}px`,e.bounds=void 0}return e.text=s.text,e.font=s.font,e.position=s.position,e.color=s.color,e.padding=s.padding,e.rotation=s.rotation,e.left=s.left,e.top=s.top,e.alignmentX=s.alignmentX,e.alignmentY=s.alignmentY,e},e=t=>{const i=s(t);let e=i.bounds;return e||(e=i.span.getBoundingClientRect(),i.bounds=e),e},r="polygon(0 0, 0 0, 0 0, 0 0)";return{update:t=>{i.forEach((t=>t.active=!1)),t.textList.forEach((t=>{const i=s(t);i.active=!0,i.span.style.clipPath="unset",t.identifier,exports.TextObjectIdentifier.Other})),t.obstructingOverlays.forEach((s=>{const h=Math.min(s.p1.clientX,s.p2.clientX)-0,n=Math.min(s.p1.clientY,s.p2.clientY)-0,o=Math.max(s.p1.clientX,s.p2.clientX)+0,a=Math.max(s.p1.clientY,s.p2.clientY)+0;t.textList.forEach((t=>{if(s.blacklist.includes(t.identifier))return;const l=i.get(t.uid),u=e(t);var c,d,f,A,g,p,v,y;if(c=h,d=n,f=o,A=a,g=u.left-0,p=u.top-0,v=u.right+0,y=u.bottom+0,!((c>=f?c:f)<(g<v?g:v)||(c<f?c:f)>(g>=v?g:v)||(d>=A?d:A)<(p<y?p:y)||(d<A?d:A)>(p>=y?p:y))&&l)if(0!==t.rotation)l.span.style.clipPath=r;else{const t=((t,i,s,e,r,h,n,o)=>{const a=t<s?t:s,l=t>=s?t:s,u=i<e?i:e,c=i>=e?i:e,d=r<n?r:n,f=r>=n?r:n,A=h<o?h:o,g=h>=o?h:o;if(d<a&&f>l&&A<u&&g>c)return[];if(d>=a&&f<=l&&A>=u&&g<=c){const t=.5*(c+u);return[{x:a,y:u},{x:l,y:u},{x:l,y:t},{x:f,y:t},{x:f,y:A},{x:d,y:A},{x:d,y:g},{x:f,y:g},{x:f,y:t},{x:l,y:t},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>d&&l<f){if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:d,y:A},{x:d,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(u>A&&u<g&&c>g)return[{x:a,y:u},{x:d,y:u},{x:d,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(A<u&&g>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:a,y:c}];if(A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:d,y:A},{x:d,y:c},{x:a,y:c}]}if(d<a&&f>a&&f<l){if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:g},{x:f,y:g},{x:f,y:A},{x:a,y:A}];if(g>u&&A<u&&g<c)return[{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:g},{x:f,y:g},{x:f,y:u}];if(A<u&&g>c)return[{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c}];if(A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:A},{x:a,y:A}]}if(a>d&&l<f){if(A<u&&g>u&&g<c)return[{x:a,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(u<A&&A<c&&g>c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:a,y:A}];if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:a,y:A},{x:a,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>f){if(u<A&&c>A)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:A},{x:d,y:A},{x:d,y:c},{x:a,y:c}];if(A<u&&g>u&&g<c)return[{x:a,y:u},{x:d,y:u},{x:d,y:g},{x:f,y:g},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}];if(A<u&&A<c&&g>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:f,y:c},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]}return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]})(u.left-0,u.top-0,u.right+0,u.bottom+0,h,n,o,a);l.span.style.clipPath=0===t.length?r:`polygon(${t.map((t=>`${100*(t.x-u.left)/u.width}% ${100*(t.y-u.top)/u.height}%`)).join(", ")})`}}))})),i.forEach(((t,s)=>{t.active||(t.span.remove(),i.delete(s))}))},measureText:t=>{if(!t.visible)return{x:0,y:0};const i=e(t);return{x:i.width,y:i.height}},getTextBoundingBox:t=>{if(t.visible)return e(t)},dispose:()=>{i.forEach((t=>{t.span.remove()}))}}})(t)};class kr{constructor(t,i){this.me=t,this.xe=i,this.Se=i.rows*sh,this.be=i.columns*eh}}var Cr,Tr;exports.OnScreenMenuButtonType=void 0,(Cr=exports.OnScreenMenuButtonType||(exports.OnScreenMenuButtonType={}))[Cr.ZoomIn=0]="ZoomIn",Cr[Cr.ZoomInX=1]="ZoomInX",Cr[Cr.ZoomInY=2]="ZoomInY",Cr[Cr.ZoomOut=3]="ZoomOut",Cr[Cr.ZoomOutX=4]="ZoomOutX",Cr[Cr.ZoomOutY=5]="ZoomOutY",Cr[Cr.ZoomToFit=6]="ZoomToFit",Cr[Cr.ToggleAnimations=7]="ToggleAnimations",exports.OnScreenMenuButtonShape=void 0,(Tr=exports.OnScreenMenuButtonShape||(exports.OnScreenMenuButtonShape={}))[Tr.Circle=0]="Circle",Tr[Tr.Rectangle=1]="Rectangle",Tr[Tr.RoundedRectangle=2]="RoundedRectangle";const Fr={x:-43,y:0},Ir={x:-65,y:0},Lr={x:-86,y:0},Pr={x:-107,y:-1},Br={x:-128,y:-3},Dr={x:-150,y:0},Er={x:-171,y:0},Rr={x:-276,y:0},Or={x:-298,y:0},zr={x:0,y:0},Vr={x:-21,y:0};class Nr extends kr{constructor(t,i,s,e){super(t,s),this.Me=Nt.document.createElement("button"),this.we=Nt.document.createElement("div"),this._e=Nt.document.createElement("label"),this.xe=s,this.ke=i,this.Ce=e}Te(t,i,s,e){this.Fe(t,e),this.Ie(),this.Le(i),this.Pe(),this._e.textContent=s||"";const r=Nt.document.createElement("div");this.Be(r),this.Me.onclick=this.onClick.bind(this),r.appendChild(this.we),r.appendChild(this._e),this.Me.appendChild(r)}Pe(){this.Me.style.cursor="pointer"}Be(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Le(t){"string"==typeof t?(this.we.style.backgroundImage=`url(${t})`,this.we.style.backgroundSize="100%",this.we.style.backgroundRepeat="no-repeat",this.we.style.backgroundPosition="center",this.we.style.width="20px",this.we.style.height="20px"):this.applyStyleForSprite(t),this.we.style.margin="auto"}Ie(){switch(this.ke){case exports.OnScreenMenuButtonShape.RoundedRectangle:this.Me.style.borderRadius="10px";break;case exports.OnScreenMenuButtonShape.Rectangle:this.Me.style.borderRadius="0px";break;case exports.OnScreenMenuButtonShape.Circle:default:this.Me.style.borderRadius="31px"}}Fe(t,i){this.Me.style.width=`${this.be.toString()}px`,this.Me.style.height=`${this.Se.toString()}px`,this.Me.style.backgroundColor=t,this.Me.style.opacity=i||rh,this.Me.style.alignItems="center",this.Me.style.border="2px solid #707070",this.Me.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.we.style.backgroundImage=`url(${this.me}/${hh})`,this.we.style.backgroundPositionX=`${t.x}px`,this.we.style.backgroundPositionY=`${t.y}px`,this.we.style.backgroundSize="1600%",this.we.style.backgroundRepeat="no-repeat",this.we.style.width="20px",this.we.style.height="20px"}De(t){return t.appendChild(this.Me),t}Ee(){return this.Me}}class Gr extends Nr{constructor(t,i,s,e){super(t,i,s,e),this.Re="",this.Oe="",this.ze=!1,this.Ce=e}Ve(){this.Ne(),this.onToggledStateAction()}Ge(){this.$e(),this.onInitialStateAction()}$e(){this.Ue(this.Re)}Ne(){this.Ue(this.Oe)}Ue(t){"string"==typeof t?this.we.style.background=t:(this.we.style.backgroundImage=`url(${this.me}/${hh})`,this.we.style.backgroundPositionX=`${t.x}px`,this.we.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ze?this.Ge():this.Ve(),this.ze=!this.ze}}class $r extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Fr)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:-1,y:-1})}}class Ur extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Pr)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:-1,y:0})}}class Yr extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Dr)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:0,y:-1})}}class jr extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Ir)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:1,y:1})}}class Hr extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Br)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:1,y:0})}}class Wr extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Er)}onClick(){const t=this.Ce.Ye();t&&this.Ce.zoom(t,{x:0,y:1})}}class Xr extends Gr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Re=Rr,this.Oe=Or,this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),this.Re)}onToggledStateAction(){this.Ce.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ce.setAnimationsEnabled(!0)}}class Zr extends Nr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Ce=i;const e=this.Ce.getTheme();this.Te(e.onScreenMenuBackgroundColor.toRGBAString(),Lr)}onClick(){this.Ce.forEachAxis((t=>{t.fit(!0)}))}}class Jr extends Nr{constructor(t,i,s){super(t,i.shape||nh,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),r=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),h=i.icon||"",n=i.label||"",o=i.opacity||"";this.Te(r,h,n,o),this.je=i.action}onClick(){this.je(this.Ce)}}class Qr extends Gr{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Ce=s,this.He=e,this.Re=Vr,this.Oe=zr,this.Te(oh,this.Re)}$e(){this.Ue(this.Re),this.Me.style.backgroundColor=oh,this.Me.style.border="2px solid #707070",this.Me.style.margin="0px"}Ne(){this.Ue(this.Oe),this.Me.style.background="#FECC00 0% 0% no-repeat padding-box",this.Me.style.border="10px solid #BCBCBC12",this.Me.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.He)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.He)||void 0===t||t.style.setProperty("display","none")}}var Kr;exports.MouseStyles=void 0,(Kr=exports.MouseStyles||(exports.MouseStyles={})).Move="move",Kr.ResizeColumn="col-resize",Kr.ResizeRow="row-resize",Kr.Horizontal="ew-resize",Kr.Vertical="ns-resize",Kr.NorthWest="nw-resize",Kr.NorthEast="ne-resize",Kr.Copy="copy",Kr.CrossHair="crosshair",Kr.Default="default",Kr.Help="help",Kr.Restricted="not-allowed",Kr.None="none",Kr.Point="pointer",Kr.Text="text",Kr.Wait="wait",Kr.ZoomIn="zoom-in",Kr.ZoomOut="zoom-out",Kr.Grab="grab",Kr.Grabbing="grabbing";const qr={LeftBottom:a(-1,-1),CenterBottom:a(0,-1),RightBottom:a(1,-1),LeftCenter:a(-1,0),Center:a(0,0),RightCenter:a(1,0),LeftTop:a(-1,1),CenterTop:a(0,1),RightTop:a(1,1)},th=new de({color:b(255,255,255,0)}),ih=new ar({thickness:1,fillStyle:th}),sh=60,eh=60,rh="1.0",hh="osm/osm-sprite-transparent.png",nh=exports.OnScreenMenuButtonShape.Circle,oh="#363636";var ah;exports.OSMPosition=void 0,(ah=exports.OSMPosition||(exports.OSMPosition={}))[ah.TopRight=0]="TopRight",ah[ah.TopLeft=1]="TopLeft",ah[ah.BottomLeft=2]="BottomLeft",ah[ah.BottomRight=3]="BottomRight";class lh extends Ee{constructor(t,i,s,e,r,h,n,o){super(t,i,s,e,r,h,n,o),this.Rs="Band",this.We=0,this.Xe=1,this.Ze=this.bi.bandFillStyle,this.Je=this.bi.bandStrokeStyle,this.D=new yt,this.Qe=this.Ws.tr(this.ai).qe(this.Ze).Ke(this.Je).Ii(this.getHighlight()),this._s(this.Qe)}setValueStart(t){return this.We=t,this.D.R("valuechange",{start:this.We,end:this.Xe}),this.Ws.Bs(),this}getValueStart(){return this.We}setValueEnd(t){return this.Xe=t,this.D.R("valuechange",{start:this.We,end:this.Xe}),this.Ws.Bs(),this}getValueEnd(){return this.Xe}setFillStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;return this.Qe.qe(i),this.Ws.Bs(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){this.Je="function"==typeof t?t(this.Je):t;const i=this.Je;return this.Qe.Ke(i),this.Ws.Bs(),this}getStrokeStyle(){return this.Je}ir(){return this.Qe.sr(this.Xs.toVec2(this.We,this.Xs.getHeight(this.ai).getInnerStart())).Z(this.Xs.toVec2(this.Xe-this.We,this.Xs.getHeight(this.ai).getInnerInterval())),Ce(this.Hs,[this.Qe],this.ai),this}er(){return{fill:this.Ze,stroke:this.Je}}rr(t,i){t.Ii(i),this.Ws.Bs()}Zs(){let t,i,s;const e=(e,r,h)=>{const n=q(this.Ws.pi.hr(e.clientX,e.clientY),this.Ws.pi.ai,this.ai),o=this.Xs.getWidth(n),a=this.axis.ai.Dt(this.We),l=this.axis.ai.Dt(this.Xe),u=(this.axis.ai.Dt(o)-a)/(l-a);t=r&&(!(u<.1||u>.9)||!h),i=h&&!t,i&&(s=u<.5)},r=s=>{const r=this.getUserInteractions(),h=_e(r.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),n=_e(r.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);e(s,!!(null==h?void 0:h.drag),!!(null==n?void 0:n.drag));const o=t?exports.MouseStyles.Point:i?this.Xs.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical}):exports.MouseStyles.Default;this.nr=this.chart.engine.setMouseStyle(o,this.nr)},h=t=>{this.nr=this.chart.engine.restoreMouseStyle(this.nr)};this.addEventListener("pointermove",r),this.addEventListener("pointerleave",h);const n=(e,r,h,n)=>{const o=this.Xs.getWidth(e);if(t){this.We=this.axis.ai.Qt(this.We,o),this.Xe=this.axis.ai.Qt(this.Xe,o);const t=null==h?void 0:h.on;t&&t({event:r})}else if(i&&s){this.We=this.axis.ai.Qt(this.We,o);const t=null==n?void 0:n.on;t&&t({event:r})}else if(i&&!s){this.Xe=this.axis.ai.Qt(this.Xe,o);const t=null==n?void 0:n.on;t&&t({event:r})}di(r),this.D.R("valuechange",{start:this.We,end:this.Xe}),this.Ws.Bs()};this.addEventListener("pointerdown",(s=>{const e=this.getUserInteractions(),o=_e(e.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),a=_e(e.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);if(!(null==o?void 0:o.drag)&&t)return;if(!(null==a?void 0:a.drag)&&i)return;di(s);let l=s;const u=t=>{if(t.pointerId!==s.pointerId)return;const i={x:t.clientX-l.clientX,y:l.clientY-t.clientY};n(i,t,o,a),l=t},c=t=>{t.pointerId===s.pointerId&&(this.addEventListener("pointermove",r),this.addEventListener("pointerleave",h),Nt.removeEventListener("pointermove",u),Nt.removeEventListener("pointerup",c),is())};this.removeEventListener("pointermove",r),this.removeEventListener("pointerleave",h),Nt.addEventListener("pointermove",u),Nt.addEventListener("pointerup",c)}))}setUserInteractions(t){return this.ar=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return zt({move:{drag:!0},scale:{drag:!0}},this.ar)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class uh extends Ee{constructor(t,i,s,e,r,h,n,o){super(t,i,s,e,r,h,n,o),this.Rs="Constant Line",this.M=0,this.Je=this.bi.constantLineStrokeStyle,this.lr=!0,this.D=new yt,this.ur=this.Ws.dr(this.ai).cr(this.Je).Ii(this.getHighlight()),this._s(this.ur)}setValue(t){return this.M=t,this.D.R("valuechange",{value:this.M}),this.Ws.Bs(),this}getValue(){return this.M}setStrokeStyle(t){this.Je="function"==typeof t?t(this.Je):t;const i=this.Je;return this.ur.cr(i),this.Ws.Bs(),this}getStrokeStyle(){return this.Je}ir(){return this.ur.gr(this.Xs.toVec2(this.M,this.Xs.getHeight(this.ai).getInnerStart())).Ar(this.Xs.toVec2(this.M,this.Xs.getHeight(this.ai).getInnerEnd())),Ce(this.Hs,[this.ur],this.ai),this}er(){return{stroke:this.Je}}rr(t,i){t.Ii(i),this.Ws.Bs()}setUserInteractions(t){return this.ar=void 0===t?{move:!1}:t,this}getUserInteractions(){return zt({move:{drag:!0}},this.ar)}Zs(){this.addEventListener("pointerenter",(t=>{const i=this.getUserInteractions();if(_e(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Xs.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical});this.nr=this.chart.engine.setMouseStyle(t,this.nr)}})),this.addEventListener("pointerleave",(t=>{this.nr=this.chart.engine.restoreMouseStyle(this.nr)})),this.addEventListener("pointerdown",(t=>{const i=this.getUserInteractions(),s=_e(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(s){di(t),is();let i=t;const e=t=>{const e={x:t.clientX-i.clientX,y:i.clientY-t.clientY};i=t,this.M=this.axis.ai.Qt(this.M,this.Xs.getWidth(e)),this.D.R("valuechange",{value:this.M}),this.Ws.Bs();const r=s.on;r&&r({event:t})},r=i=>{i.pointerId===t.pointerId&&(Nt.removeEventListener("pointermove",e),Nt.removeEventListener("pointerup",r))};Nt.addEventListener("pointermove",e),Nt.addEventListener("pointerup",r)}}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const ch="fitting",dh="expansion",fh="progressive",Ah="regressive",gh={fitting:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end,e=void 0===(null==t?void 0:t.considerVisibleRangeOnly)||t.considerVisibleRangeOnly;return{id:ch,init:t=>{t.axis.pr((t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax}))},considerVisibleRangeOnly:e,apply:t=>{if(t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min:t.seriesDataRange.max:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max:t.seriesDataRange.min:t.curEnd,allowIntervalLengthChange:!0}}}},scrolling:t=>{const i=void 0!==(null==t?void 0:t.progressive)&&!t.progressive,s=!0===(null==t?void 0:t.realTime)?{}:null==t?void 0:t.realTime;if(s){const t=void 0!==s.catchUpThresholdMs?s.catchUpThresholdMs:3e3;let e;const r=t=>{t.isStopped&&(e=void 0)};return{id:i?Ah:fh,init:t=>{t.axis.pr((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax})),t.axis.addEventListener("stoppedchange",r)},dispose:t=>{t.axis.removeEventListener("stoppedchange",r)},considerVisibleRangeOnly:!0,apply:s=>{if(!s.seriesDataRange)return;const r=Nt.performance.now();if(void 0!==e){const h=(r-e)*(i?-1:1);let n=s.curStart+h,o=s.curEnd+h;const a=s.axis.vr({forStart:n,forEnd:o,allowIntervalLengthChange:!1});if(!i&&a&&s.curEnd>s.curStart&&a.end-o>=t){const t=a.end-o;o+=t,n+=t}if(!i&&a&&s.curEnd<s.curStart&&a.start-n>=t){const t=a.start-n;o+=t,n+=t}return e=r,{start:n,end:o,allowIntervalLengthChange:!1,keepScrolling:!0,allowAnimation:!1}}return e=r,{keepScrolling:!0,start:s.curStart,end:s.curEnd,allowIntervalLengthChange:!1,allowAnimation:!1}}}}return{id:i?Ah:fh,init:t=>{t.axis.pr((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax}))},considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange){if(Math.sign(t.curEnd-t.curStart)*Math.sign(i?-1:1)>0){const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{end:s,start:s+(t.curStart-t.curEnd),allowIntervalLengthChange:!1}}{const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{start:s,end:s+(t.curEnd-t.curStart),allowIntervalLengthChange:!1}}}}}},expansion:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:dh,considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min<t.curStart?t.seriesDataRange.min:t.curStart:t.seriesDataRange.max>t.curStart?t.seriesDataRange.max:t.curStart:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max>t.curEnd?t.seriesDataRange.max:t.curEnd:t.seriesDataRange.min<t.curEnd?t.seriesDataRange.min:t.curEnd:t.curEnd,allowIntervalLengthChange:!0}}}},nextPowerOf10:{id:ch,start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?10**Math.ceil(Math.log10(e)):10**Math.ceil(Math.log10(s)),allowIntervalLengthChange:!0},fittingStepped:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:ch,considerVisibleRangeOnly:!0,apply:t=>{if(void 0===t.seriesDataRange)return;let e,r;if(i)if(t.curEnd>=t.curStart)if(t.seriesDataRange.min<t.curStart)e=t.curStart-(t.curEnd-t.curStart);else{const i=t.curStart+.5*(t.curEnd-t.curStart);e=t.seriesDataRange.min>i?i:t.curStart}else if(t.seriesDataRange.max>t.curStart)e=t.curStart+(t.curStart-t.curEnd);else{const i=t.curStart-.5*(t.curStart-t.curEnd);e=t.seriesDataRange.max<i?i:t.curStart}else e=t.curStart;if(s)if(t.curEnd>=t.curStart)if(t.seriesDataRange.max>t.curEnd)r=t.curEnd+(t.curEnd-t.curStart);else{const i=t.curEnd-.5*(t.curEnd-t.curStart);r=t.seriesDataRange.max<i?i:t.curEnd}else if(t.seriesDataRange.min<t.curEnd)r=t.curEnd-(t.curStart-t.curEnd);else{const i=t.curEnd+.5*(t.curStart-t.curEnd);r=t.seriesDataRange.min>i?i:t.curEnd}else r=t.curEnd;return{start:e,end:r,allowIntervalLengthChange:!0}}}}},ph={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},vh=t=>void 0!==t.yr,yh=t=>void 0!==t.mr,mh=t=>void 0!==t.Sr,xh=(t,i,s,e,r,h,n)=>[h,n],Sh=(t,i,s,e)=>{const r=[],h=Math.round(Math.abs((t-i)/s));for(let n=1;n<h;n+=1){let h=t+s*n;void 0!==e&&(h=Math.round(h*e)/e),h<i&&r.push(h)}return r},bh=(t,i,s,e,r)=>{Ht(t,0)&&(t=0),Ht(i,0)&&(i=0);const h=[],n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;let o=n;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);let a=0;for(;(o-t)/(i-t)<.98;)h.push(o),a+=1,o=n+a*s,void 0!==r&&(o=Math.round(o*r)/r);return h.push(o),h},Mh=(t,i,s,e)=>{const r=[];let h=s(t),n=0;for(;h<i&&!1===Ht(h,i);)if(r.push(h),h=e(h),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(h),r},wh=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,r,h,n,o,a)=>{if(r>=s)return;const l=i[r]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,r)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+r)%i==0))))(e,l,u,c,d)}},_h=(...t)=>{const i=t.length>0?t.length:0;return(s,e,r,h,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},kh=t.Record({cursorFormatter:void 0});class Ch extends kh{br(t){return{Mr:[],wr:[],_r:this.cursorFormatter?this.cursorFormatter:Ks.Numeric,kr:void 0,Cr:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const Th=t=>t&&"function"==typeof t?t():t,Fh=(t,i,s,e,r,h,n,o,a,l,u)=>{let c=a.get(n);if(c||(c=new Map,a.set(n,c)),c.has(t))return c.get(t);if(0===i.length)return ns;const d=u.Tr(i,n.Fr.labelFont,r),f=o.Qt(s,{x:-(e.x/2+.5)*d.x+h.x-l,y:-(e.y/2+.5)*d.y+h.y-l}),A=o.Qt(f,{x:d.x+l,y:d.y+l}),g={min:{x:Math.min(f.x,A.x),y:Math.min(f.y,A.y)},max:{x:Math.max(f.x,A.x),y:Math.max(f.y,A.y)}};return c.set(t,g),g},Ih=(new Ch).br({type:"linear"});class Lh{constructor(t,i,s,e,r,h,n){this.Ir=Ih,this.Lr=ph.Empty,this.Pr=new Map,this.Br=!0,this.Dr=bt((()=>this.chart.pi.Bs()))(300,xt.linear),this.Er=!0,this.di=!0,this.Rr=!1,this.Or=hs,this.zr=!1,this.Vr=!1,this.Nr=hs,this.Gr=hs,this.$r=hs,this.Ur=!1,this.Yr="",this.jr=!1,this.Hr=!1,this.Wr=!1,this.Xr=()=>{this.Jr.Zr=exports.TextObjectIdentifier.AxisTitle,this.Jr.setPointerEvents(!0),this.title.zi(this.Jr),this.Xr=void 0},this.Qr=(t,i,s,e,r,h,n,o,a,l,u)=>{const c=this.Kr(),d=[],f=t.filter((t=>this.qr(t.keyValue,t.labelText,i))),A=[...f,...a.filter((t=>this.qr(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,g=[];if(this.qr(a.keyValue,a.labelText,i)){const t=Fh(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,i,c,o,u,this.chart.pi.th);g=Ni(A.map((i=>i&&i!==a&&ls(t,Fh(i.keyValue,i.labelText,i.labelPosition,i.labelAlignment,i.labelRotation,i.labelOffset,i.tickLevel,c,o,u,this.chart.pi.th))?i:void 0))),l=g.length>0}else l=!1;if(l){let o=!0;if(o&&g.every((t=>vh(t.tickLevel)))&&(o=!1),o&&i.ih&&i.ih.eh&&!1===i.ih.eh(a.keyValue,s,e,r,h,n)&&(o=!1),!1===o){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.Ir._r(t,{start:this.ai.getInnerStart(),end:this.ai.getInnerEnd()}),this.rh=!0,this.hh=!0,this.title=new yt,this.chart=t,this.oh=i,this.bi=e,this.ah=h,this.ai=s,this.uh=n,"logarithmic"===n.type&&this.setAnimationZoom(xt.logarithmic(Ws(n.base))),this.dh=h.numeric,this.fh("Numeric"),this.Ah=s.getInnerStart(),this.gh=s.getInnerEnd(),this.setAnimationsEnabled(r),this.setScrollStrategy(gh.fitting)}setUnits(t,i={}){return this.ph=t,this.cs=i,this.mh(),this}getUnits(){return this.ph}setDefaultInterval(t,i){return this.Sh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.Ur=!0,this.chart.pi.Bs()),this.bh=void 0!==(null==i?void 0:i.skipIntervalRestrictions)?i.skipIntervalRestrictions:void 0,this}getDefaultInterval(){return this.Sh}getTitle(){return this.Yr}setTitle(t){return this.Yr=t,this.mh(),this}getTitleFillStyle(){return this.Jr.Mh()}setIntervalRestrictions(t){return this.wh=t,this.jr=!0,this.chart.pi.Bs(),this}getIntervalRestrictions(){if("function"==typeof this.wh){const t=this._h();return this.wh({curStart:this.Ah,curEnd:this.gh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.wh}pr(t){this.jr||this.Hr||(this.wh=t)}setTitleFillStyle(t){return this.Jr.qe(t),this.chart.pi.Bs(),this}getTitleFont(){return this.Jr.kh()}setTitleFont(t){return this.Jr.Ch(t),this.chart.pi.Bs(),this}setTitleRotation(t){return this.Jr.Th(t),this.chart.pi.Bs(),this.Wr=!0,this}getTitleRotation(){return this.Jr.Fh()}setTitleEffect(t){return this.Ih.Ps(t),this.chart.pi.Bs(),this}getTitleEffect(){return this.Ih.Ds()}fh(t,i){if(this.Pr.size>0&&this.Lh(),"Empty"===t){const s=i||(t=>t);this.dh=s(new Ch),this.Ir=this.dh.br(this.uh),this.Lr=t}else if("Numeric"===t){"Numeric"!==this.Lr&&(this.dh=this.ah.numeric);const s=i||(t=>t);this.dh=s(this.dh),this.Ir=this.dh.br(this.uh),this.Lr=t}else if("DateTime"===t){"DateTime"!==this.Lr&&(this.dh=this.ah.datetime);const s=i||(t=>t);this.dh=s(this.dh),this.Ir=this.dh.br(this.uh),this.Lr=t}else if("Time"===t){"Time"!==this.Lr&&(this.dh=this.ah.time);const s=i||(t=>t);this.dh=s(this.dh),this.Ir=this.dh.br(this.uh),this.Lr=t}return this.chart.pi.Bs(),this}Ph(){return this.Ir}Bh(t,i){this.Ir=t,this.Lr=i,this.chart.pi.Bs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:r}=t;return this.jr||(this.Hr=!0,this.wh=void 0),this.li(void 0!==i?i:this.Ah,void 0!==s?s:this.gh,void 0!==e&&e,void 0===r||r,"userSetInterval"),this}li(t,i,s=!1,e=!0,r){let h={start:t,end:i};const n="synchronizedAxis"===r||"setDefaultInterval"===r&&!1!==this.bh,o="setDefaultInterval"!==r,a=Math.abs(i-t),l=Math.abs(this.gh-this.Ah);if(void 0!==this.Ir.kr&&this.Ir.kr>a){const s=(i+t)/2,e=(o?this.Ir.kr/2:l/2)*(t>i?-1:1);h={start:s-e,end:s+e}}if(void 0!==this.Ir.Cr&&this.Ir.Cr<a){const s=(i+t)/2,e=(o?this.Ir.Cr/2:l/2)*(t>i?-1:1);h={start:s-e,end:s+e}}const u=this.ai.et(h.start,h.end,this.Ah,this.gh,o);if(!1===u)return this;if(!0===u);else if(h=u,"zoomBandChartOther"===r)return this;let c;switch(r){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":case"zoomBandChartClick":c=!0;break;case"zoomBandChartOther":case"synchronizedAxis":c=!1;break;default:return $i(0,""),this}if(this.Dh&&this.Dh.finishAll(!1),this.Dr&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Dh||this.Dh.isOver()?this.Dr:this.Dh.NextAnimation.bind(this);this.Dh=i([[this.Ah,h.start],[this.gh,h.end]],(([t,i])=>{this.Eh(t,i,{allowIntervalLengthChange:o,skipIntervalRestriction:n})}),t),this.Dh.addEventListener("end",(()=>{this.Dh=void 0,c&&(this.$r=Nt.performance.now())})),this.Dh.addEventListener("end",(()=>{this.setStopped(e)}))}else this.Eh(h.start,h.end,{allowIntervalLengthChange:o,skipIntervalRestriction:n}),this.setStopped(e),c&&(this.$r=Nt.performance.now());return this}getInterval(){return{start:this.Ah,end:this.gh}}setStopped(t){return t===this.Rr||(t&&(this.Dh&&this.Dh.finishAll(!1),this.Dh=void 0),this.Rr=t,this.D.R("stoppedchange",{isStopped:this.Rr}),this.Or=Nt.performance.now(),this.chart.pi.Bs()),this}getStopped(){return this.Rr}fit(t,i){const s=this._h(),e=this.Sh||Rh,r="function"==typeof e?e({curStart:this.Ah,curEnd:this.gh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.li(void 0!==r.start?r.start:this.Ah,void 0!==r.end?r.end:this.gh,void 0!==t?t:void 0!==r.animate?r.animate:this.Er,void 0!==i?i:void 0===r.stopAxisAfter||r.stopAxisAfter,this.Sh?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){var i,s;return(null===(i=this.Rh)||void 0===i?void 0:i.dispose)&&this.Rh.dispose({axis:this}),this.Rh=Th(t),this.jr||(this.wh=void 0),(null===(s=this.Rh)||void 0===s?void 0:s.init)&&this.Rh.init({axis:this}),this.chart.pi.Bs(),this}getScrollStrategy(){return this.Rh}setAnimationScroll(t){return this.Br=Boolean(t),this.chart.pi.Bs(),this}setAnimationZoom(t,i=300){return this.Dh&&(this.Dh.finishAll(!1),this.Dh=void 0),this.Dr=t?bt((()=>this.chart.pi.Bs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.Er=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(xt.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.Er}setVisible(t){const i=this.di!==t;return this.di=t,this.Jr.setVisible(t),this.Oh((i=>{i.zh.setVisible(t)})),i&&this.D.R("visiblechange",{isVisible:this.di}),this}getVisible(){return this.di}Vh(t){return!1}Nh(t){this.Xr&&this.Xr(),this.title.setPointerEvents(this.title.Di.length>0);const i=this.Gh(),s=i.min,e=i.max;if(!this.Vh(t)||!this.$h||this.Wr){const i=new Map,r=new Map,h=Bh(this.Ir,s,e,this.Ah,this.gh,t.physicalAxisSize,Math.min(this.Ah,this.gh),Math.max(this.Ah,this.gh));this.Uh();const n=Ne(3,20,Wt((t.physicalAxisSize-30)/270,0,1)),o={...t,...this.Yh(t)},a=this.jh(this.Ir,Math.min(s,this.Ah,this.gh),Math.max(e,this.Ah,this.gh),h,i,o,r,n),l=this.Hh(this.Ir,Math.min(s,this.Ah,this.gh),Math.max(e,this.Ah,this.gh),h,i,o,a,r,n),u=new Map([...a,...l]),c=this.Ir.Wh,d=void 0!==this.Ir.wr.find((t=>yh(t)&&!le(t.Fr.labelFillStyle)));if(c&&d&&Array.from(u).reduce(((t,i)=>t+(i[1].labelText.length>0&&!le(i[0].zh.Mh())?1:0)),0)<=1){this.Uh(),u.clear();const i=[Math.min(this.Ah,this.gh),Math.max(this.Ah,this.gh)],s={start:this.ai.getInnerStart(),end:this.ai.getInnerEnd()};i.forEach((i=>{const e=this.Xh(i,c,c.mr(i,s),t,o),r=this.Zh(e.keyValue,c,o,e,e.labelText);u.set(r,e)}))}return this.Jh(),this.$h={...o,...this.Qh(t,u,!0),min:s,max:e},this.$h}let r=!1;return this.Pr.forEach((t=>{t.forEach(((i,h)=>{(h<s||h>e)&&(i.dispose(),t.delete(h),r=!0)}))})),{...this.$h,updatedTicks:r}}Kh(t,i,s){const e=i.Fr;s.length>0?t.zh.qe(e.getLabelFillStyle()).Ch(e.getLabelFont()).tn(s).setVisible(this.getVisible()).qh(e.getLabelShadow()):t.zh.setVisible(!1)}Zh(t,i,s,e,r){const h=this.Pr.get(i)||new Map;this.Pr.set(i,h);let n=h.get(t);return n||(n=this.sn(t,i,s,e),h.set(t,n)),this.Kh(n,i,r),n.en=!1,n}jh(t,i,s,e,r,h,n,o){const a=new Map,l=this.Kr(),u=[];for(const c of t.Mr){const t=e.get(c).filter((t=>t>=i&&t<=s)),d=t.map((t=>this.Xh(t,c,c.mr(t,{start:this.ai.getInnerStart(),end:this.ai.getInnerEnd()}),h,h)));for(let i=0;i<t.length;i+=1){const s=t[i],e=d[i],f=this.Zh(s,c,h,e,e.labelText),A=Fh(f.M,f.zh.rn(),e.labelPosition,e.labelAlignment,e.labelRotation,{x:0,y:0},c,l,r,o,this.chart.pi.th);u.find(((t,i)=>{const s=d[i];return ls(A,Fh(t.M,t.zh.rn(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},c,l,r,o,this.chart.pi.th))}))&&f.zh.setVisible(!1),f.en=!1,n.set(f,e),u.push(f),a.set(f,e)}}return a}Hh(t,i,s,e,r,h,n,o,a){var l;const u={start:this.ai.getInnerStart(),end:this.ai.getInnerEnd()},c=new Map,d=Array.from(n.values());let f,A=[];for(const g of t.wr){const p=g===t.wr[t.wr.length-1],v=e.get(g);if(!v)break;let y;if(void 0===f)y=[{start:i,end:s,keyValues:v}];else{y=[];for(let t=0;t<f.length-1;t+=1){const e=f[t],r=f[t+1],h={start:e,end:r,keyValues:[]};for(const t of v)t>=e&&t<r&&h.keyValues.push(t);h.end<i||h.start>s||y.push(h)}}if(f=v,mh(g))continue;let m,x=0,S=!1,b=-1,M=!0,w=[];for(let t=0;t<y.length;t+=1){const i=y[t].keyValues.map((t=>this.Xh(t,g,g.mr(t,u),h,h)));w=w.concat(i)}if(g.Fr.getLabelFillStyle()!==ae)for(m=[];++b<y.length;){const t=y[b],e=t.start,h=t.end;let o=t.keyValues;if(x>0){if(void 0===g.ih){M=!1;break}if(o=(0,g.ih.hn)(t.keyValues,x-1,e,h,i,s),void 0===o)break}const l=Ni(o.map((t=>w.find((i=>i.keyValue===t)))));if(S)m=m.concat(l);else{const t=this.Qr(l,g,x,e,h,i,s,r,d,A,a);if(!0===t){x+=1,b=-1,m=[];continue}m=m.concat(t)}t!==y[y.length-1]||n.size+m.reduce(((t,e)=>t+(gs(e.keyValue,i,s)?1:0)),0)>=2||p||S||(S=!0,x-=1,b=-1,m=[])}else m=w;const _=m.reduce(((t,e)=>t+(gs(e.keyValue,i,s)?1:0)),0);void 0!==g.nn&&_<g.nn&&(m.length=0);const k=[];for(const t of w){if(t.keyValue<i||t.keyValue>s)continue;const e=m.includes(t);if(!e&&"hide-tick"===(null===(l=g.ih)||void 0===l?void 0:l.an))continue;t.labelText=e?t.labelText:"";const r=this.Zh(t.keyValue,g,h,t,t.labelText);o.set(r,t),k.push(t),c.set(r,t)}if(A=k,!M)break}return c}Oh(t){for(const i of this.Pr.values())for(const s of i.values())t(s)}ln(t,i){for(const s of this.Pr.values())for(const e of s.values())i=t(i,e);return i}Lh(){this.Pr.forEach(((t,i)=>{t.forEach((t=>{t.dispose()}))})),this.Pr.clear()}Uh(){for(const t of this.Pr.values())for(const i of t.values())i.en=!0}Jh(){for(const t of this.Pr.values()){const i=Array.from(t.entries());for(let s=0;s<i.length;s+=1){const[e,r]=i[s];r.en&&(r.dispose(),t.delete(e))}}}Gh(){const t=this.ai.getInnerStart()<this.ai.getInnerEnd()?this.ai.getInnerStart():this.ai.getInnerEnd(),i=this.ai.getInnerEnd()>this.ai.getInnerStart()?this.ai.getInnerEnd():this.ai.getInnerStart();return f(t,i)}qr(t,i,s){return 0!==i.length&&(!vh(s)||!0===s.un)}cn(t,i){return"Empty"===this.Lr||(this.Ir.Mr.forEach((s=>{i=t(i,s.Fr)})),this.Ir.wr.forEach((s=>{yh(s)&&(i=t(i,s.Fr))}))),i}getSeriesDataRange(){const t=this._h();if(t&&!0!==t.emptyBounds)return t}vr(t){const i=void 0!==t.forStart?t.forStart:this.Ah,s=void 0!==t.forEnd?t.forEnd:this.gh,e=this._h();if(e)return Eh(this.wh,e,{start:s>i?e.min:e.max,end:s>i?e.max:e.min},{start:i,end:s},!0)}_h(){const t=!this.Rh||this.Rh.considerVisibleRangeOnly;let i=this.oh.dn(t);const s=this.oh.fn(t);let e;if(void 0!==i&&$t(i)&&void 0!==s&&$t(s)&&("logarithmic"===this.uh.type&&(0===i&&(i=Math.min(1,s)),Math.sign(i)!==Math.sign(s)&&(i=Math.min(1,s-.1))),e?(e.min=Math.min(e.min,i),e.max=Math.max(e.max,s)):e=f(i,s)),e&&$t(e.min)&&$t(e.max))return Ht(e.min,e.max)?{min:e.min-1,max:e.max+1,emptyBounds:!0}:e}An(){if(!1===this.rh)return{start:0,end:0};if("object"==typeof this.rh)return this.rh;let t=0;const i=this.oh.gn();return i&&(t=Math.max(t,i)),{start:t,end:t}}setScrollMargins(t){return this.rh=void 0!==t&&("number"==typeof t?{start:t,end:t}:t),this.chart.pi.Bs(),this}getScrollMargins(){return this.rh}setAutoRegionsEnabled(t){return this.setScrollMargins(t),this}pn(){const t=this.zr;let i=!1;if(this.Ur&&this.Sh){const t=this._h();if(t){const i="function"==typeof this.Sh?this.Sh({curStart:this.Ah,curEnd:this.gh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Sh;if("object"==typeof this.Sh&&!this.jr){const s=Eh(this.wh,t,{start:void 0!==i.start?i.start:this.Ah,end:void 0!==i.end?i.end:this.gh},this.getInterval(),!0);s.start===i.start&&s.end===i.end||(this.Hr=!0,this.wh=void 0)}this.li(void 0!==i.start?i.start:this.Ah,void 0!==i.end?i.end:this.gh,void 0!==i.animate&&i.animate,void 0===i.stopAxisAfter||i.stopAxisAfter,"setDefaultInterval"),this.Ur=!1,this.bh=void 0}}if(this.Rh&&!this.Rr){let t=this._h();(null==t?void 0:t.emptyBounds)&&this.Rh.id===dh&&(t=void 0);const s=this.Ah,e=this.gh,r=this.Rh.apply({axis:this,curStart:s,curEnd:e,seriesDataRange:t});if(r){const h=Eh(this.wh,t,{start:r.start,end:r.end},{start:s,end:e},r.allowIntervalLengthChange);let n=h.start,o=h.end;const a=!1===Ht(s,n)||r.keepScrolling,l=!1===Ht(e,o)||r.keepScrolling;if(n=a?n:s,o=l?o:e,a||l){let t=!1;if(this.Br&&!this.hh&&!1!==r.allowAnimation)if(this.Br){t=!0;const h=a?this.vn(s,n):s,u=l?this.vn(e,o):e;if(!0===this.Eh(h,u,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1})&&(a&&!1===Ht(h,n)||l&&!1===Ht(u,o))||!0===r.keepScrolling){this.chart.pi.Bs(!0),i=!0;let t=Math.abs(o-n)/Math.abs(h-u);t<1&&(t=1/t),this.Vr=t>=1.4}}else t=!1;t||(this.Eh(n,o,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1}),!0===r.keepScrolling&&this.chart.pi.Bs(!0)),this.hh=!1}}}return i?(this.zr!==i&&(this.zr=i,this.Nr=Nt.performance.now()),this.yn&&(clearTimeout(this.yn),this.yn=void 0)):!0===t&&void 0===this.yn&&(this.Vr=!1,this.yn=setTimeout((()=>{!1!==this.zr&&(this.zr=!1,this.Nr=Nt.performance.now()),this.yn=void 0,this.chart.pi.Bs()}),200)),this}mn(){const t=this.getInterval(),i=this._h();return"function"==typeof this.wh?this.wh({curStart:t.start,curEnd:t.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):this.wh}Eh(t,i,s){let e={start:t,end:i};const{allowIntervalLengthChange:r,skipIntervalRestriction:h}=s;let n=!0;if(this.wh&&!h){const t=this._h();e=Eh(this.wh,t,e,{start:this.Ah,end:this.gh},r)}const o=Math.abs(i-t),a=Math.abs(this.gh-this.Ah);if(void 0!==this.Ir.kr&&this.Ir.kr>o){const s=(i+t)/2,h=(r?this.Ir.kr/2:a/2)*(t>i?-1:1);e={start:s-h,end:s+h},n=!1}if(void 0!==this.Ir.Cr&&this.Ir.Cr<o){const s=(i+t)/2,h=(r?this.Ir.Cr/2:a/2)*(t>i?-1:1);e={start:s-h,end:s+h},n=!1}let l=this.ai.et(e.start,e.end,this.Ah,this.gh,r);if(!1===l)return!1;!0!==l&&(e=l);const u=this.An(),c=this.xn(e.start,e.end,u);return l=this.ai.et(c.start,c.end,this.Ah,this.gh,!1),!!l&&(!0===l?this.ai.W(c.start,c.end):this.ai.W(e.start,e.end),this.Ah=e.start,this.gh=e.end,this.D.R("intervalchange",{start:e.start,end:e.end}),this.Gr=Nt.performance.now(),this.chart.pi.Bs(),n)}Sn(){return this.zr}bn(){return void 0!==this.Dh}mh(){var t;const i=!1!==(null===(t=this.cs)||void 0===t?void 0:t.displayOnAxis);this.Jr.tn(this.ph&&i&&this.Yr?`${this.Yr} (${this.ph})`:this.Yr),this.chart.pi.Bs()}}class Ph{constructor(t,i,s,e,r=s._n(e).wn(Xi).Mn(Xi).setPointerEvents(!1)){this.en=!1,this.ci=!1,this.gs=[],this.kn=t,this.M=i,this.Cn=s,this.Tn=e,this.zh=r,this.gs.push(r)}Fs(t){this.gs.forEach((i=>i.setVisible(t)))}dispose(){return this.ci||(this.ci=!0,this.gs.forEach((t=>t.dispose()))),this}}const Bh=(t,i,s,e,r,h,n,o,a=!1)=>{const l=new Map;for(const a of t.Mr){let t=a.Fn(i,s,e,r,h,n,o);t=Dh(t),l.set(a,t)}let u;for(const e of t.wr){let r;if(void 0===u)r=e.Fn(i,s,i,s,h);else{if(a&&e===t.wr[t.wr.length-1])break;let n=[];const o=u.filter((t=>i<=t&&t<=s)).length;if(o>0){const t=h/(o-1);if(void 0!==e.In&&e.In>t)break}for(let t=0;t<u.length-1;t+=1){const r=e.Fn(u[t],u[t+1],i,s,h);n=n.concat(r)}r=n}r=Dh(r),l.set(e,r),u=r}return l},Dh=t=>Array.from(new Set(t)),Eh=(t,i,s,e,r)=>{const h="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!h)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==h.intervalMin&&o<h.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*h.intervalMin,n.end=t+.5*Math.sign(s.end-t)*h.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==h.intervalMax&&o>h.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*h.intervalMax,n.end=t+.5*Math.sign(s.end-t)*h.intervalMax}return o=Math.abs(s.end-s.start),void 0!==h.startMin&&(n.start=Math.max(n.start,h.startMin),r||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==h.startMax&&(n.start=Math.min(n.start,h.startMax),r||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==h.endMin&&(n.end=Math.max(n.end,h.endMin),r||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==h.endMax&&(n.end=Math.min(n.end,h.endMax),r||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),Math.sign(n.end-n.start)!==Math.sign(s.end-s.start)?{end:n.start,start:n.end}:n},Rh=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Oh=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==exports.UIDraggingModes.notDraggable?i===exports.UIDraggingModes.draggable?exports.MouseStyles.Move:i===exports.UIDraggingModes.onlyHorizontal?exports.MouseStyles.Horizontal:exports.MouseStyles.Vertical:void 0};class zh{constructor(){this.di=!0}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setVisible(t){const i=this.di!==t;return this.di=t,i&&this.D.R("visiblechange",{isVisible:this.di}),this}getVisible(){return this.di}}class Vh extends zh{constructor(t,i,s,e,r){super(),this.D=new yt,this.Ln=a(50,50),this.origin=a(0,0),this.size=a(0,0),this.ci=!1,this.Pn=void 0,this.Bn=void 0,this.Dn=Oh,this.En=void 0,this.ot=p(0,0,0,0),this.Ws=t,this.renderingScale=i,this.scale=s,this.yi=e,this.bi=r,this.Ws.Bs(),this.bi=r,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.Dn?this.Dn(this):this.Dn;t&&(this.Bn=this.Ws.pi.Rn(t))})),this.addEventListener("pointerleave",(()=>{this.Ws.pi.On(this.Bn)}));const h=t=>{const i=this.getDraggingMode();if(i===exports.UIDraggingModes.notDraggable)return;di(t);let s=t;const e=t=>{const e={x:t.clientX-s.clientX,y:t.clientY-s.clientY};s=t;const r=this.scale.Qt(this.getPosition(),{x:i!==exports.UIDraggingModes.onlyVertical?e.x:0,y:i!==exports.UIDraggingModes.onlyHorizontal?-e.y:0}),h=this.scale,n=this.getSize(),o=this.getOrigin(),a=h.Qt({x:h.x.getInnerStart(),y:h.y.getInnerStart()},Es({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=h.Qt({x:h.x.getInnerEnd(),y:h.y.getInnerEnd()},Es({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(r.x,a.x),l.x),y:Math.min(Math.max(r.y,a.y),l.y)};this.setPosition(u)},r=t=>{this.Ws.pi.zn.removeEventListener("pointermove",e),this.Ws.pi.zn.removeEventListener("pointerup",r),this.addEventListener("pointerdown",h)};this.removeEventListener("pointerdown",h),this.Ws.pi.zn.addEventListener("pointermove",e),this.Ws.pi.zn.addEventListener("pointerup",r)};this.addEventListener("pointerdown",h)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setEffect(t){return this.vs=this.vs||this.Ws.pi.vs.ys(this,{Vn:{shapes:this.Nn()}}),this.vs.Vn.Ps(t),this}getEffect(){return!!this.vs&&this.vs.Vn.Ds()}setAutoDispose(t){return this.En=t,this.Ws.Bs(),this}getAutoDispose(){return this.En}getSize(t=exports.UISpace.Everything){return t===exports.UISpace.Everything?a(this.size.x+(this.ot.left+this.ot.right),this.size.y+(this.ot.bottom+this.ot.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.ot="object"==typeof t?y(this.ot,t):{left:t,top:t,right:t,bottom:t},this.Ws.Bs(),this}getMargin(){return this.ot}ir(){if(this.En){const t=this.size,i=this.renderingScale.kt(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.En.type&&s.x>=this.En.maxWidth||"max-height"===this.En.type&&s.y>=this.En.maxHeight)&&this.dispose()}return this}Nh(){return this}dispose(){return this.ci||(this.Ws.Bs(),this.ci=!0,this.yi(this),this.D.R("dispose",{}),this.Nn().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Nn().forEach((i=>i.setVisible(t))),this.Ws.Bs(),this}isDisposed(){return this.ci}setPosition(t){return this.Ln=t,this.Ws.Bs(),this}getPosition(t=this.origin,i=exports.UISpace.Everything){const s=this.getSize(exports.UISpace.Everything),e=this.scale.Qt(this.Ln,Es({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===exports.UISpace.Everything)return this.scale.Qt(e,Es({x:(t.x+1)/2,y:(t.y+1)/2},s));const r=this.scale.Qt(e,{x:this.ot.left,y:this.ot.bottom}),h=this.getSize(exports.UISpace.Content);return this.scale.Qt(r,Es({x:(t.x+1)/2,y:(t.y+1)/2},h))}setOrigin(t){return this.origin=t,this.Ws.Bs(),this}getOrigin(){return this.origin}setDraggingMode(t=exports.UIDraggingModes.notDraggable){return this.Pn=t,this.Ws.Bs(),this}getDraggingMode(){return void 0!==this.Pn?this.Pn:exports.UIDraggingModes.notDraggable}setMouseStyle(t){return this.Dn=t,this}getMouseStyle(){return this.Dn}}class Nh extends Vh{constructor(t,i,s,e,r,h){super(t,i,s,r,h),this.Gn=p(),this.$n=0,this.Un=e,this.backgroundElement=new this.Un(this.Ws,this.renderingScale,this.scale,jt,h),this.D.Gi(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}Nn(){return this.backgroundElement.Nn()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}ir(){return super.ir(),this.ci||(void 0!==this.Yn&&(this.backgroundElement.Yn=this.Yn-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,exports.UISpace.PaddedBackground)).ir()),this}Nh(){const t=this.getSize(exports.UISpace.PaddedContent);return this.backgroundElement.jn(t).Nh(),super.Nh()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Gn="object"==typeof t?y(this.Gn,t):{left:t,top:t,right:t,bottom:t},this.Ws.Bs(),this}getPadding(){return this.Gn}getSize(t=exports.UISpace.Everything){let i=super.getSize(t);return t>=exports.UISpace.PaddedContent&&(i=a(i.x+this.Gn.left+this.Gn.right,i.y+this.Gn.bottom+this.Gn.top)),t>=exports.UISpace.PaddedBackground&&(i=a(i.x+this.backgroundElement.Hn()+this.backgroundElement.Wn(),i.y+this.backgroundElement.Xn()+this.backgroundElement.Zn())),i}getPosition(t=this.origin,i=exports.UISpace.Everything){if(i===exports.UISpace.Everything)return super.getPosition(t,i);const s=super.getPosition(a(-1,-1),exports.UISpace.Everything),e=this.getMargin(),r=this.scale.Qt(s,{x:e.left,y:e.bottom});if(i===exports.UISpace.PaddedBackground){const i=this.getSize(exports.UISpace.PaddedBackground);return this.scale.Qt(r,Es({x:(t.x+1)/2,y:(t.y+1)/2},i))}const h=this.scale.Qt(r,{x:this.backgroundElement.Hn(),y:this.backgroundElement.Xn()});if(i===exports.UISpace.PaddedContent){const i=this.getSize(exports.UISpace.PaddedContent);return this.scale.Qt(h,Es({x:(t.x+1)/2,y:(t.y+1)/2},i))}const n=this.getPadding(),o=this.scale.Qt(h,{x:n.left,y:n.bottom}),l=this.getSize(exports.UISpace.Content);return this.scale.Qt(o,Es({x:(t.x+1)/2,y:(t.y+1)/2},l))}getHighlight(){return this.$n}setHighlight(t){return this.$n=Gi(t),this.backgroundElement.setHighlight(t),this.D.R("highlightchange",{highlight:this.$n}),this}}const Gh=t=>"setBackground"in t,$h=t=>{const i=t.getPosition({x:-1,y:-1},exports.UISpace.PaddedBackground),s=t.getSize(exports.UISpace.PaddedBackground),e=t.scale.Qt(i,s),r=q(i,t.scale,t.Ws.pi.ai),h=q(e,t.scale,t.Ws.pi.ai),n=t.Ws.pi.Jn(r.x,r.y),o=t.Ws.pi.Jn(h.x,h.y);return{p1:{clientX:n.x,clientY:n.y},p2:{clientX:o.x,clientY:o.y}}};class Uh extends zh{constructor(t,i,s,e,r,h,n,o,a,l,u){super(),this.M=0,this.Qn=1,this.Kn=!0,this.qn=new L,this.io=!0,this.ci=!1,this.D=new yt,this.axisScale=e,this.renderingScale=r,this.so=n,this.eo=o,this.ro=a,this.yi=l,this.ho=i,this.no=s,this.oo=this.ho.dr(this.renderingScale),this.D.zi(this.oo),this.bi=u,this.ao=this.ro.setDirection(this.eo).lo(this.no,this.renderingScale,h,jt,this.bi,!1).setOrigin(ui(this.eo)),this.D.Gi(this.ao),this.axis=t,this.setPointerEvents(!1),"major"===this.ao.uo?this.oo.cr(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.ao.uo?this.oo.cr(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.ao.uo&&this.oo.cr(u.cursorGridStrokeStyleX)}setValue(t){return this.M=t,this.no.Bs(),this.D.R("valuechange",{value:this.M}),this}getValue(){return this.M}setTextFormatter(t){return this.co=t,this.no.Bs(),this}setTickLength(t){return this.ao.setPointerLength(t),this.ho.Bs(),this}getTickLength(){return this.ao.getPointerLength()}setTickLabelAlignment(t,i){return this.ao.setTickLabelAlignment(t,i),this.ho.Bs(),this}getTickLabelAlignment(){return this.ao.getTickLabelAlignment()}setTickLabelPadding(t){return this.ao.setTickLabelPadding(t),this.ho.Bs(),this}setTickLabelRotation(t){return this.ao.setTextRotation(t),this.ho.Bs(),this}getTickLabelRotation(){return this.ao.getTextRotation()}getTickLabelPadding(){return this.ao.getTickLabelPadding()}setGridStrokeLength(t){return this.Qn=t,this.ho.Bs(),this}getGridStrokeLength(){return this.Qn}setGridStrokeStyle(t){return this.oo.cr(t),this.ho.Bs(),this}getGridStrokeStyle(){return this.oo.do()}dispose(){return this.ci||(this.ci=!0,this.oo.dispose(),this.ao.dispose(),this.yi(this),this.ho.pi.Bs(),this.D.R("dispose",{})),this}setMarkerVisible(t){return this.Kn=t,this.no.Bs(),this}getMarkerVisible(){return this.Kn}setMarker(t){return t(this.ao),this.no.Bs(),this}getMarker(){return this.ao}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setAllocatesAxisSpace(t){return this.io=t,this.no.Bs(),this}getAllocatesAxisSpace(){return this.io}isInScale(){return gs(this.M,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Yh extends Uh{constructor(t,i,s,e,r,h,n,o,a,l,u){super(t,i,s,e,r,h,n,o,u,a,l),this.fo=!1,this.yi=a,this.ho=i,this.no=s}dispose(){return this.fo=!1,super.dispose()}update(){return this}plot(t,i,s,e,r){if(this.isInScale()&&this.getVisible()&&t){this.fo=!1;const t=K(this.M,this.axisScale,this.so.getWidth(this.renderingScale));this.oo.setVisible(!0).gr(this.so.toPoint(t,i)).Ar(this.so.toPoint(t,i-(e+s*this.Qn))),this.Kn?(this.co&&this.ao.setText(this.co(this.M,this)),this.ao.setVisible(!0).setPosition(this.so.toPoint(t,r))):this.ao.setVisible(!1)}else this.oo.setVisible(!1),this.ao.setVisible(!1);return this.ao.Nh().ir(),this}Ao(){this.Kn?(this.co&&this.ao.setText(this.co(this.M,this)),this.ao.setVisible(!0)):this.ao.setVisible(!1);const t=this.ao.Nh().getSize();return this.so.getHeight(t)}}const jh={po:"X0Z1bGxBY2Nlc3M=",vo:"X0Jhc2VDaGFydHM=",yo:"RGF0YSBHcmlk",mo:"X0hhc0hhcmRFeHBpcmF0aW9u",xo:"X0lzVHJpYWw=",So:"X0lzQ29tbXVuaXR5",bo:"T0hMQyBTZXJpZXM=",Mo:"QmFyIENoYXJ0",wo:"c2xpY2VkIGNoYXJ0cw==",_o:"R2F1Z2UgQ2hhcnQ=",ko:"U3BpZGVyIENoYXJ0",Co:"UG9sYXIgQ2hhcnQ=",To:"M0QgQ2hhcnQ=",Fo:"Wm9vbSBCYW5kIENoYXJ0",Io:"TWFwIENoYXJ0",Lo:"WFkgQ2hhcnQ=",Po:"WFkgU2VyaWVz",Bo:"SGVhdG1hcCBTZXJpZXM=",Do:"RmlndXJlIFNlcmllcw==",Eo:"bG9nYXJpdGhtaWMgYXhpcw==",Ro:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Oo:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",zo:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",Vo:"VHJlZU1hcCBDaGFydA==",No:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Go:"X1B5dGhvbkxpY2Vuc2U=",$o:"X1N0dWRlbnRMaWNlbnNl"},Hh=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Wh=(t,i,s)=>{s&&Gh(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Xh={uiElement:void 0,stylers:r.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Zh={background:void 0,setBackground(t){return{...this,background:t}}},Jh={lo(t,i,s,e,r,h){const n=this.applyStylers(new this.uiElement(t,i,s,e,r),r);return Wh(n,r,h),n}},Qh={lo(t,i,s,e,r,h){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,r),r);return Wh(n,r,h),n}};class Kh extends Vh{constructor(){super(...arguments),this.Uo=!0}ir(){return super.ir(),this}setPointerEvents(t){return this.Uo=t,this}getPointerEvents(){return this.Uo}Nn(){return[]}}class qh extends Kh{jn(t){return this.size=t,this}Hn(){return 0}Wn(){return 0}Zn(){return 0}Xn(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return ae}setStrokeStyle(){return this}getStrokeStyle(){return Tt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class tn{constructor(t){this.Yo=new Map,this.pi=t}bs(t,i,s){const e=s.animationEnabled;this.Yo.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const r=()=>{this.Yo.delete(t),t.removeEventListener("dispose",r)};Nt.requestAnimationFrame((()=>{t.addEventListener("dispose",r)}))}jo(t,i){let s=i.animationEnabled;const e=[],r=()=>{e.forEach((t=>{this.Yo.delete(t)})),t.removeEventListener("dispose",r)};return Nt.requestAnimationFrame((()=>{t.addEventListener("dispose",r)})),{Ho:(t,i)=>{const r={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Yo.set(t,r)},Wo:()=>{e.forEach((t=>{this.Yo.delete(t)})),e.length=0},Xo:t=>{s=t,e.forEach((t=>{this.Ns(t,s)}))},Zo:()=>s}}Vs(t,i){const s=this.Yo.get(t);s&&(s.curUnanimatedHighlightValue=Gi(i),this.pi.Bs())}Cs(t,i=!1){const s=this.Yo.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}Ns(t,i){const s=this.Yo.get(t);s&&(s.animationEnabled=i)}Gs(t){const i=this.Yo.get(t);return!!i&&i.animationEnabled}Nh(t){let i=!1;this.Yo.forEach(((s,e)=>{let r;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const h=s.curAnimationPositionMillis/e;r=s.curUnanimatedHighlightValue*Math.abs(Math.sin(h*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(r=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||r>0):r=0,s.curAnimationPositionMillis=0}else r=s.curUnanimatedHighlightValue;r!==s.curAnimatedHighlightValue&&(s.applyHighlight(r),s.curAnimatedHighlightValue=r)})),i&&this.pi.Bs(!0)}}const sn=new Map,en=(t,i)=>{const s=t.getSize(),e=t.getFamily(),r=t.getWeight(),h=t.getStyle(),n=t.getVariant(),o=`${h} ${n?"small-caps":"normal"} ${r} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=sn.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:h,variant:n,weight:r},i,a),sn.set(a,l)),l},rn=t=>({container:t.zn,setMouseStyle:(i,s)=>t.Rn(i,s),restoreMouseStyle:i=>t.On(i),clearMouseStyle:()=>t.Jo(),captureFrame:(i,s,e,r)=>t.Qo(i,s,e,r),renderFrame:(i,s,e=!1)=>t.Ko(i,s,e),layout:()=>{t.qo(),t.ta(),t.sa.ia(),t.Bs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.ea(i,s),addEventListener:(i,s,e)=>t.O(i,s,e),removeEventListener:(i,s)=>t.N(i,s)}),hn=[];let nn;const on=()=>{if(void 0!==nn){const t=Nt.getComputedStyle(Nt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));nn.style.height=Nt.innerHeight-i+"px",(()=>{for(let t=0;t<hn.length;t+=1)hn[t]()})()}},an=new de({color:b(255,255,255)}),ln={font:en(B,0),fillStyle:an,lineStyle:new ar({fillStyle:an,thickness:1}),pointStyle3D:new nr.Triangulated};class un{constructor(t,i,s){this.ai=Q.d2({scaleXYConstructor:Z}),this.ra=new Map,this.ha=bt((()=>this.Bs()),60),this.na=a(0,0),this.oa=!1,this.aa=jt,this.la=()=>{},this.ua=[],this.ca=-1,this.da=[],this.ci=!1,this.fa=!1,this.Aa=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.ga=new Map,this.pa=(t,i)=>{var s,e,r;const h=i instanceof PointerEvent&&i,n=mt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:{clientX:i.clientX,clientY:i.clientY};if(h){if(!h.pointerType)return;this.va=i}const o=this.Ls({x:n.clientX,y:n.clientY});if(("pointermove"===t||"pointerenter"===t)&&o&&h){const t=this.ga.get(h.pointerId);let e=t;e||(e={lastEvent:h,entity:o.entity,collectionMember:o.collectionMember,info:o.info},this.ga.set(h.pointerId,e));const r=void 0===t||t.entity!==o.entity||t.collectionMember!==o.collectionMember;r&&t&&t.entity.R("pointerleave",i,t.collectionMember,t.info),r&&o&&o.entity.R("pointerenter",i,o.collectionMember,o.info),o&&(o.entity.R("pointermove",i,o.collectionMember,o.info),this.zn.draggable=null!==(s=o.entity.fi)&&void 0!==s&&s),e.lastEvent=h,e.entity=o.entity,e.collectionMember=o.collectionMember,e.info=o.info}else if("pointerleave"===t&&h){const t=this.ga.get(h.pointerId);t&&(t.entity.R("pointerleave",i,t.collectionMember,t.info),this.ga.delete(h.pointerId))}else if("click"===t&&h){const t=(null===(e=this.ya)||void 0===e?void 0:e.event)instanceof PointerEvent&&this.ya.event.pointerId===h.pointerId&&this.ya;t&&t.entity.R("click",h,t.collectionMember,t.info)}else if("dblclick"===t&&i instanceof MouseEvent){const t="click"===(null===(r=this.ya)||void 0===r?void 0:r.event.type)&&this.ya;t&&t.entity.R("dblclick",i,t.collectionMember,t.info)}else{const s=i instanceof PointerEvent?this.ga.get(i.pointerId):o;null==s||s.entity.R(t,i,s.collectionMember,s.info)}i&&o&&!["touchend"].includes(t)&&(this.ya={...o,event:i})},this.ta=()=>{const{bottom:t,left:i}=this.zn.getBoundingClientRect(),s=a(Math.floor(i),Math.floor(t));return s.x===this.na.x&&s.y===this.na.y||this.D.R("locationchange",{}),this.na=s,this.ma=Nt.performance.now(),this},this.qo=()=>{this.xa&&this.xa()},this.Rn=(t,i)=>{if(void 0!==i){const s=this.da.find((t=>t[0]===i));return s&&(s[1]=t,this.da.indexOf(s)===this.da.length-1&&(this.zn.style.cursor=t)),i}const s=this.ca;return this.ca+=1,this.da.push([s,t]),this.zn.style.cursor=t,s},this.On=t=>{var i;const s=this.da.find((i=>i[0]===t));if(s){const t=this.da.indexOf(s),e=t===this.da.length-1;if(this.da.splice(t,1),e){const t=(null===(i=this.da[this.da.length-1])||void 0===i?void 0:i[1])||"default";this.zn.style.cursor=t}}},this.Sa=t=>(this.ba.C(t),this),this.Ma=()=>this.ba.T(),this.wa=()=>{this.aa&&this.aa(1e3/60),this._a(),this.ka(),this.la&&this.la()},this.Ca=t=>(this.ra.set(t.Ta(),t),this.ra=new Map([...this.ra.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Fa=t=>(this.ra.delete(t),this),this.j=()=>(this.ba.u=!1,this),this.H=()=>(this.ba.u=!0,this),this.Ia=()=>this.va,this.D=new yt,this.sa=t,this.bi=i.theme,this.La=s.La,this.Pa=s.Ba,this.Da={me:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,Ea:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,Ra:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),Oa:void 0===(null==i?void 0:i.interactable)||i.interactable,za:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const e=i?i.container:void 0;if(e){if("string"==typeof e){const t=Nt.document.getElementById(e);if(!t)throw new Error(`Container "${e}" doesn't exist.`);this.zn=t}else this.zn=e;Nt.addEventListener("resize",this.qo),this.ua.push((()=>{Nt.removeEventListener("resize",this.qo)}))}else{if(void 0===nn){const t=Nt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Nt.document.body.appendChild(t),nn=t,Nt.addEventListener("resize",on)}let t=1;for(;null!==Nt.document.getElementById(`chart-${t}`);)t+=1;this.zn=Nt.document.createElement("div"),this.zn.id=`chart-${t}`,this.zn.style.flex="1",this.zn.style.height="100%",nn.appendChild(this.zn),on(),hn.push(this.qo),this.ua.push((()=>{nn&&nn.removeChild(this.zn),hn.includes(this.qo)&&hn.splice(hn.indexOf(this.qo),1),0===hn.length&&nn&&(Nt.document.body.removeChild(nn),nn=void 0,Nt.removeEventListener("resize",on))}))}if(Nt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.zn&&this.qo()};this.Va=new Nt.ResizeObserver(t.bind(this)),this.Va.observe(this.zn)}this.zn.style.position="relative",this.zn.style.boxSizing="content-box",!1!==this.Da.Oa&&(this.zn.style.touchAction="none"),this.zn.style.overflow="hidden",this.zn.addEventListener("fullscreenchange",this.qo),this.zn.addEventListener("webkitfullscreenchange",this.qo),this.zn.addEventListener("dragstart",this.Aa);const r=i?i.maxFps:void 0;this.Na=r?-1===r?-1:0!==r?1e3/r:0:0,Object.keys(vt).forEach((t=>{const i=i=>{this.pa(t,i)};this.zn.addEventListener(t,i),this.ua.push((()=>{this.zn.removeEventListener(t,i)}))})),Nt.addEventListener("scroll",this.ta,{passive:!0}),this.ba=g(new x({r:0,g:0,b:0,a:0})),this.Ms=new tn(this)}Ga(t,i,s){this.$a=t?{entity:t,timestamp:s,pointed:i}:void 0}Ua(t,i){const s=Array.from(this.ga.values()).find((i=>i.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===i.collectionMember)));s&&(s.entity=i.entity,s.collectionMember=i.collectionMember)}Ci(t,i=void 0){const s=Array.from(this.ga.values()).find((s=>s.entity===t&&(void 0===i||i===s.collectionMember)));s&&(t.R("pointerleave",s.lastEvent,s.collectionMember,s.info),this.ga.delete(s.lastEvent.pointerId))}Ya(){this.fa=!0,this.aa=void 0,this.la=void 0}Jo(){this.da.length=0,this.zn.style.cursor="unset"}ja(){return this.Ha}Wa(){return this.Xa}setBackgroundFillStyle(t){return this.Za.qe(t),this.Bs(),this}getBackgroundFillStyle(){return this.Za.Mh()}setBackgroundStrokeStyle(t){return this.Za.Ke(t),this.Bs(),this}getBackgroundStrokeStyle(){return this.Za.Ja()}Qa(t){return this.la=t,this}Ka(t){return this.aa=t,this}qa(t){return this.ra.get(t)}tl(){return Array.from(this.ra.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}G(){if(!this.ci){if(this.ci=!0,this.ra)for(const t of this.ra.values())t.G();this.aa=void 0,this.la=void 0,Nt.removeEventListener("scroll",this.ta),this.zn.removeEventListener("fullscreenchange",this.qo),this.zn.removeEventListener("webkitfullscreenchange",this.qo),this.zn.removeEventListener("dragstart",this.Aa),this.Va&&(this.Va.disconnect(),this.Va=void 0),this.ua.forEach((t=>{t()})),this.ua.length=0}}hr(t,i){return a(t-this.na.x,this.na.y-i)}Jn(t,i){return a(t+this.na.x,this.na.y-i)}il(t){const i=this.hr(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}sl(t){const i=this.Jn(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}el(t,i,s,e){const r=q(t,s,this.ai),h=q(i,s,this.ai),n=this.sl({engineX:r.x,engineY:r.y}),o=this.sl({engineX:h.x,engineY:h.y});return{p1:{clientX:Math.min(n.clientX,o.clientX)-e.left,clientY:Math.min(n.clientY,o.clientY)-e.top},p2:{clientX:Math.max(n.clientX,o.clientX)+e.right,clientY:Math.max(n.clientY,o.clientY)+e.bottom}}}O(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}class cn extends gt{constructor(t,i,s,e){super(t,s,e),this.Yn=0,this.Ws=i,this.Ws.rl=!0}hl(){}nl(t){return this.Yn===t||(this.Yn=t,this.Ws.rl=!0),this}ol(){return this.Yn}}class dn extends cn{constructor(t,i,s,e,r){super(t,i,e,r),this.al=!0,this.ai=s}}const fn=(t,i,s)=>{if(s instanceof Z){const e=s.ni(),r=Es(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return f(a(t.min.x-r.x,t.min.y-r.y),a(t.max.x+r.x,t.max.y+r.y))}return f(s.Qt(a(t.min.x,t.min.y),Ps(i,-1)),s.Qt(a(t.max.x,t.max.y),i))},An=(t,i)=>"function"==typeof i?i(t):i,gn=(t,i)=>!t||t!==i,pn=(t,i)=>t===ae&&i!==ae,vn=t=>t!==ae;class yn extends dn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Ze=ln.fillStyle,this.pi=t}qe(t){return this.Ze=An(this.Ze,t),this}Mh(){return this.Ze}ll(){return gn(this.ul,this.Ze)}cl(){return pn(this.ul,this.Ze)}dl(){return vn(this.Ze)}fl(t){this.ul=t}}class mn extends yn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Je=ln.lineStyle,this.pi=t}Ke(t){return this.Je="function"==typeof t?t(this.Je):t,this}Ja(){return this.Je}Al(){return!this.pl||this.pl!==this.Je}vl(t){return!this.pl||this.pl.getThickness()!==t}dl(){return this.Je!==Tt||super.dl()}cl(){return(this.Je!==Tt||this.Ze!==ae)&&this.pl===Tt&&this.ul===ae}yl(t){this.pl=t}}class xn extends yn{constructor(t,i,s,e,r,h=g(ln.font)){super(t,i,s,e,r),this.ml=g(""),this.xl=!1,this.Sl={x:1,y:-1},this.Ln=g(a(0,0)),this.bl=g(0),this.Ml=g(0),this.wl=g(a(0,0)),this._l=g(0),this.kl=g(B),this.Cl=a(0,0),this.ot=g(p(1,1,1,1)),this.Gn=g(v(4,4,4,4)),this.font=g(ln.font),this.Tl=!1,this.font=h}dl(){return vn(this.Ze)&&this.ml.T().length>0}cl(){return!1===this.Tl&&this.dl()}tn(t){return this.ml.C(t),this}rn(){return this.ml.T()}Ch(t){return P(t)?this.kl.C(t):this.kl.C(t(this.kl.T())),this}kh(){return this.kl.T()}Fl(t){return this.kl.C(this.kl.T().setFamily(t)),this}Il(){return this.kl.T().getFamily()}Ll(t){return this.kl.C(this.kl.T().setSize(t)),this}Pl(){return this.kl.T().getSize()}Bl(t){return this.kl.C(this.kl.T().setWeight(t)),this}Dl(){return this.kl.T().getWeight()}El(t){return this.kl.C(this.kl.T().setStyle(t)),this}Rl(){return this.kl.T().getStyle()}Ol(t){return this.kl.C(this.kl.T().setVariant(t)),this}zl(){return this.kl.T().getVariant()}sr(t){return this.Ln.C(t),this}Vl(){return this.Ln.T()}Th(t){return this._l.C(t),this}Fh(){return this._l.T()}qh(t){return this.Nl=t,this}Gl(){return this.Nl}$l(t,i){return this.wl.C(a(t,i)),this}Ul(){return this.wl.T()}Yl(t){return this.Ml.C(t),this}jl(){return this.Ml.T()}Hl(){return{x:this.Ml.T(),y:this.bl.T()}}Wl(t){return this.bl.C(t),this}Xl(){return this.bl.T()}Zl(t){return this.Ml.C(t.x),this.bl.C(t.y),this}Mn(t){return this.ot.C(t),this}Jl(){return this.ot.T()}wn(t){return this.Gn.C(t),this}Ql(){return this.Gn.T()}}class Sn extends mn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Ln=g(a(0,0)),this.Y=g(a(100,100)),this._l=g(0),this.Cl=g(a(0,0)),this.Kl=!1}Nh(){return this.ql(),this}sr(t){const i=this.Ln.T();return t.x===i.x&&t.y===i.y||(this.Ln.C(t),this.ql()),this}Vl(){return this.Ln.T()}tu(t){const i=this.Ln.T();return t!==i.x&&(this.Ln.C(a(t,i.y)),this.ql()),this}iu(t){const i=this.Ln.T();return t!==i.y&&(this.Ln.C(a(i.x,t)),this.ql()),this}Z(t){const i=this.Y.T();return t.x===i.x&&t.y===i.y||(this.Y.C(a(t.x,t.y)),this.ql()),this}kt(){return this.Y.T()}su(t){const i=this.Y.T();return t!==i.x&&(this.Y.C(a(t,i.y)),this.ql()),this}eu(t){const i=this.Y.T();return t!==i.x&&(this.Y.C(a(i.x,t)),this.ql()),this}Th(t){return this._l.C(t),this}Fh(){return this._l.T()}ru(t){const i=this.Cl.T();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Kl=!1,this.ql()):(this.Kl=!0,this.Cl.C(t))),this}ql(){if(!this.Kl){const t=this.Ln.T(),i=this.Y.T(),s=a(t.x+i.x/2,t.y+i.y/2),e=this.Cl.T();s.x===e.x&&s.y===e.y||this.Cl.C(s)}}}class bn extends mn{constructor(){super(...arguments),this.hu=[],this.Ln=g(a(0,0)),this.nu=ns,this.ou=!1}au(t){return t=Mi(t),this.hu=t,this.ou=!0,this}lu(){return this.hu}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return 0}cu(){return 0}}class Mn extends yn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.du=new Array,this.fu=new Array,this.nu=ns,this.Au=0,this.gu=!1,this.pu=[Array(),Array()],this.vu=!1,this.yu=(new de).setColor(b(42,171,240)),this.mu=!1,this.xu=!1,this.Su=!1}bu(t,i){const s=this.Au-1,e=s>0&&!this.vu;let[r,h]=e?[[this.du[s]],[this.fu[s]]]:[[],[]];if(t instanceof Array){const[i,s]=d(t);r=Ti(r,i,{canReturnB:!0}),h=Ti(h,s,{canReturnB:!0})}else{const i=t.position;r.push(a(i,t.high)),h.push(a(i,t.low))}return this.vu?(this.pu[0]=Ti(this.pu[0],r,{canReturnB:!0}),this.pu[1]=Ti(this.pu[1],h,{canReturnB:!0})):(this.pu=[r,h],this.vu=!0),this.nu=Ms(this.nu,i||Ms(Ss(r),Ss(h))),this}Vi(){return this.mu=!0,this.du.length=0,this.fu.length=0,this.Au=0,this.nu=ns,this}Mu(){return[this.du,this.fu]}wu(){return[this.pu[0],this.pu[1]]}_u(t){return this.yu="function"==typeof t?t(this.yu):t,this}ku(){return this.yu}Cu(){return this.Au-(Number(this.xu)+Number(this.Su))}Tu(){return this.pu.length}Fu(t){return this.xu=t,this}Iu(){return this.xu}Lu(t){return this.Su=t,this}Pu(){return this.Su}cl(){return this.ul===ae&&this.Bu===ae&&(this.Ze!==ae||this.yu!==ae)}Du(t){this.Bu=t}dl(){return this.yu!==ae||super.dl()}ll(){return super.ll()||!this.Bu||this.Bu!==this.yu}}class wn extends mn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Ln=g(a(0,0)),this.Eu=g(0),this.Ut=g(360),this.Ru=g(100),this.Ou=g(100),this.zu=g(0),this.Vu=g(void 0),this.Nu=a(0,0),this.Gu=a(0,0),this.$u=a(0,0)}Uu(){return this.Ru.T()}Yu(){return this.Ou.T()}Vl(){return this.Ln.T()}ju(){return this.Eu.T()}$t(){return this.Ut.T()}Hu(){return this.zu.T()}Wu(){return this.Vu.T()}Xu(){return this.Nu}Zu(){return this.Gu}Ju(){return this.$u}sr(t){return this.Ln.C(t),this}Qu(t){return this.Eu.C(t),this}Ar(t){return this.Ut.C(t),this}Ku(t){return this.Ou.C(t),this.Ru.C(t),this}qu(t){return this.Ru.C(t),this}tc(t){return this.Ou.C(t),this}sc(t){return this.zu.C(t<0?0:t),this}rc(t){return this.Vu.C(void 0!==t&&t<=0?void 0:t),this}}var _n;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(_n||(_n={}));const kn=(t,i)=>"function"==typeof i?i(t):i,Cn=(t,i)=>!t||t!==i,Tn=(t,i)=>!t||t.getThickness()!==i,Fn=(t,i)=>t===Tt&&i!==Tt,In=t=>t!==Tt&&t.getFillStyle()!==ae;class Ln extends dn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.hc=ln.lineStyle,this.engine=t,this.nc=s instanceof J}cr(t){return this.hc=kn(this.hc,t),this.nc&&fr(this.hc)&&(Nt.console.error("LightningChart JS error | DashedLine is not supported together with logarithmic axis"),this.hc=ln.lineStyle),this}do(){return this.hc}Al(){return Cn(this.oc,this.hc)}ac(t){return Tn(this.oc,t)}cl(){return Fn(this.oc,this.hc)}dl(){return In(this.hc)}lc(t){this.oc=t}}class Pn extends Ln{constructor(t,i,s,e,r){super(t,i,s,e,r),this.jt=a(0,0),this.Ut=a(0,0),this.uc=!1}C({min:t,max:i}){return t.x===this.jt.x&&t.y===this.jt.y&&i.x===this.Ut.x&&i.y===this.Ut.y||(this.uc=!0,this.jt=t,this.Ut=i),this}Yt(){return this.jt}$t(){return this.Ut}gr(t){return t.x===this.jt.x&&t.y===this.jt.y||(this.uc=!0,this.jt=t),this}Ar(t){return t.x===this.Ut.x&&t.y===this.Ut.y||(this.uc=!0,this.Ut=t),this}}class Bn extends Ln{constructor(t,i,s,e,r){super(t,i,s,e,r),this.cc=void 0,this.dc=0}}class Dn extends Ln{constructor(t,i,s,e,r){super(t,i,s,e,r),this.fc=[],this.nu=ns,this.pu=new Array,this.Ac=0,this.mu=!1,this.gc=g(void 0),this.xu=!1,this.Su=!1}wu(){return this.pu}Mu(){return this.fc}Vi(){return this.mu=!0,this.fc.length=0,this.Ac=0,this.pu=[],this.nu=ns,this}Cu(){return this.Ac-(Number(this.xu)+Number(this.Su))}Tu(){return this.pu.length}Fu(t){return this.xu=t,this}Iu(){return this.xu}Lu(t){return this.Su=t,this}Pu(){return this.Su}}class En extends xn{constructor(t,i,s,e,r){super(t,i,s,e,[]),this.vc={uid:r,text:"",font:"",color:"",position:"absolute",left:0,top:0,padding:"",alignmentX:0,alignmentY:0,rotation:0,identifier:exports.TextObjectIdentifier.Other,visible:!0}}yc(){var t;if(!this.getVisible()||0===this.ml.T().length||le(this.Ze))return this.vc.visible=!1,this.vc;this.vc.visible=!0;const i=en(this.kl.T(),devicePixelRatio);this.vc.identifier=null!==(t=this.Zr)&&void 0!==t?t:exports.TextObjectIdentifier.Other,this.vc.text=this.ml.T(),this.vc.font=i.font,this.vc.color=fe(this.Ze)?`rgba(${255*this.Ze.color.r},${255*this.Ze.color.g},${255*this.Ze.color.b},${this.Ze.color.a})`:this.vc.color;const s=this.Ln.T(),e=q(s,this.ai,this.pi.ai),r=Math.round(10*e.x)/10,h=Math.round(10*(this.pi.kt().y-e.y))/10;this.vc.top=h,this.vc.left=r,this.vc.alignmentX=this.Ml.T(),this.vc.alignmentY=this.bl.T(),this.vc.rotation=this._l.T();const n=this.ot.T(),o=this.Gn.T();return this.vc.padding=`${n.top+o.top}px ${n.right+o.right}px ${n.bottom+o.bottom}px ${n.left+o.left}px`,this.vc}mc(){var t;this.yc();const i=null===(t=this.pi.xc)||void 0===t?void 0:t.Sc.getTextBoundingBox;if(i){const t=i(this.vc);if(t){const i=this.pi.il({clientX:t.left,clientY:t.top}),s=this.pi.il({clientX:t.left+t.width,clientY:t.top+t.height}),e=q({x:i.engineX,y:i.engineY},this.pi.ai,this.ai),r=q({x:s.engineX,y:s.engineY},this.pi.ai,this.ai);return{min:{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)},max:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}}}}return ns}bc(){var t;this.yc();const i=null===(t=this.pi.xc)||void 0===t?void 0:t.Sc.measureText;if(i){const t=i(this.vc);if(t)return t}return this.pi.Mc.th.Tr(this.ml.T(),this.kl.T(),this._l.T())}kt(){if(!(this.ai instanceof Z))return{x:0,y:0};const t=this.ai.ni(),i=this.bc();return{x:i.x*t.x,y:i.y*t.y}}Nh(){return this}Wi(){return 0}Hi(){return 0}Zi(){return 0}Xi(){return 0}uu(){return 0}cu(){return 0}wc(t,i){return{}}_c(){return this}kc(t,i,s,e,r){return{}}}class Rn extends Vh{constructor(){super(...arguments),this.$n=0}getHighlight(){return this.$n}setHighlight(t){return this.$n=t,this.Nn().forEach((i=>i.Ii(t))),this.D.R("highlightchange",{highlight:t}),this.Ws.Bs(),this}}class On extends Rn{}class zn extends On{constructor(t,i,s,e,r,h){super(t,i,s,r,h),this.Cc=this.Ws.Tc(this.renderingScale,_n.Simple).setVisible(!1).qe(ae).Ke(Tt),this.D.zi(this.Cc)}Fc(){const t=this.Ic();if(t.length>2){const i=Ss(t),s=a(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=Bs(t,Ps(i.min,-1));return this.scale.Qt(this.Ln,Bs(e,Es(Ps(Bs(this.origin,a(1,1)),-.5),s)))})).map((t=>q(t,this.scale,this.renderingScale)));this.Cc.au(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Cc&&this.Cc.setVisible(!1),this.setContentSize(a(0,0))}ir(){return super.ir(),this.ci||(this.Fc(),void 0!==this.Yn&&this.Cc.nl(this.Yn)),this}Nh(){return this.Fc(),super.Nh()}setVisible(t){return super.setVisible(t),this.Cc.setVisible(t),this}}const Vn=t=>!(!t||"object"!=typeof t||!("elementAt"in t)),Nn=t=>{if("srcLoopArray"in t){const{srcLoopArray:i,dataRanges:s,NewArray:e}=t;return{length:s.reduce(((t,i)=>t+i.count),0),elementAt:t=>{let e=0;for(const r of s){if(e+r.count-1>=t){const s=r.offset+(t-e);return i[s]}e+=r.count}return Ri(0,(()=>{})),-1},toArray:(t,r)=>{const h=r-t+1;if(1===s.length){const e=s[0],h=e.offset+t,n=e.offset+r;return i.subarray(h,n+1)}{const n=s[0],o=s[1],a=0,l=a+n.count-1,u=l+1,c=u+o.count-1,d=new e(h);let f=0;if(!(r<a||t>l)){const s=Math.max(a,t),e=Math.min(l,r)-s+1,h=n.offset+(t+f-a);d.set(i.subarray(h,h+e),f),f+=e}if(!(r<u||t>c)){const s=Math.max(u,t),e=Math.min(c,r)-s+1,h=o.offset+(t+f-u);d.set(i.subarray(h,h+e),f),f+=e}return d}}}}return{length:t.length,elementAt:i=>t[i],toArray:(i,s)=>Ot(t,i,s+1)}},Gn=(t,i)=>Object.keys(t).length===Object.keys(i).length&&!Object.keys(t).find((t=>void 0===i[t]))&&!Object.entries(t).find((([t,s])=>i[t]!==s));class $n{constructor(t){if(this.Lc=0,this.Pc=0,this.Bc=0,this.Dc=!1,this.Ec=!0,this.Rc=!1,this.Oc={warningDisplayed:!1,expandEvents:[]},this.D=new yt,this.Ec=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,this.zc=!1!==(null==t?void 0:t.allowInputModification),this.Vc=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN,this.Nc=void 0!==(null==t?void 0:t.strictMode)&&t.strictMode,this.Ea=void 0===(null==t?void 0:t.warnings)||t.warnings,this.Gc=void 0===(null==t?void 0:t.autoDetectPatterns)||t.autoDetectPatterns,null==t?void 0:t.schema){const i={};Object.entries(t.schema).forEach((([t,s])=>{var e;if(!s)return;let r=void 0!==s.pattern?s.pattern:void 0;s.auto&&(r=("object"==typeof s.auto&&null!==(e=s.auto.step)&&void 0!==e?e:1)>0?"progressive":"regressive");const h={dataStorage:s.storage,$c:{effective:r,userSpecified:r},auto:s.auto,cache:void 0,ensureNoDuplication:void 0!==s.ensureNoDuplication&&s.ensureNoDuplication};if(this.Nc&&void 0===s.pattern)throw new Error(`LightningChart JS error - DataSetXY property ('${t}') data pattern not specified. This is not allowed when strict mode is enabled.`);i[t]=h})),this.Uc=i}if(this.Nc&&!this.Uc)throw new Error("LightningChart JS error - DataSetXY schema not defined. This is not allowed when strict mode is enabled.")}appendJSON(t,i,s){if(!Array.isArray(t))return this.appendJSON([t]);const e=t.length;if(0===e)return this;const r=Object.keys(t[0]).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===r.length)return this;const h=t[0],n=Object.fromEntries(r.map((t=>{if("number"!=typeof h[t])return[t,[]];const i=this.Uc&&this.Uc[t];return[t,new((null==i?void 0:i.dataStorage)||Float64Array)(e)]})));for(let i=0;i<e;i+=1){const s=t[i];for(const t of r)n[t][i]=s[t]}return s&&Object.entries(s).forEach((([t,i])=>{n[t]=i})),this.appendSamples(n,i),this}appendSample(t,i){const s=Object.keys(t).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===s.length)return this;const e=Object.fromEntries(s.map((i=>{var s,e;return[i,Jn(t[i],this.Uc&&null!==(e=null===(s=this.Uc[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),r=this.Yc({appendCount:1,keys:s,parsedDataArrs:e,opts:i});if(!r.incomingDataReplacedCache&&this.Ec){let t=this.jc(e);if(t=t&&t.filter((t=>this.Uc&&this.Uc[t].$c&&!("autoDetectResult"in this.Uc[t].$c))),t&&t.length>0)if(this.Rc);else{t.length>1&&this.Ea&&Nt.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.Uc?this.Uc[i]:void 0;if(!(t&&t.$c&&"autoDetectResult"in t.$c))return this.Hc(i,{parsedDataArrs:Object.fromEntries(r.keys.map((t=>[t,"number"==typeof e[t]?new Array(1).fill(e[t]):e[t]]))),offset:0,count:1}),this}Nt.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}for(const t of r.keys){const i=r.buckets[t].cache;if(!i)continue;const s=e[t];i[this.Lc]="number"==typeof s?s:s[0]}return this.D.R("change",{type:"change",iDataStart:this.Lc,iDataEnd:this.Lc}),this.Lc+=1,this.Lc>r.maxSampleCount-1&&void 0!==this.Wc&&(this.Lc=0,this.Dc=!0,this.D.R("loop",{type:"loop"})),this.Pc=Math.min(this.Pc+1,r.maxSampleCount),this.Bc+=1,this}appendSamples(t,i){const s=Object.entries(t).filter((([,t])=>void 0!==t)).map((t=>t[0]));if(0===s.length)return this;const e=Object.entries(t).filter((([,t])=>"object"==typeof t&&"length"in t)).map((t=>t[0])),r=e.reduce(((i,s)=>Math.min(i,t[s].length)),Number.MAX_SAFE_INTEGER);e.forEach((i=>{const s=t[i];s.length>r&&(Nt.console.warn(`LightningChart JS warning - insymmetric DataSetXY input (${i}). Extra measurements will be dropped`),Array.isArray(s)?this.zc?s.length=r:t[i]=s.slice(0,r):t[i]=s.subarray(0,r))}));let h=null==i?void 0:i.offset,n=null==i?void 0:i.count;if(h=void 0!==h?h:0,n=void 0!==n?n:r-h,n<=0)return this;const o=Object.fromEntries(s.map((i=>{var s,e;const r=t[i];return this.Uc&&this.Uc[i]&&void 0!==this.Uc[i].dataStorage||this.Nc||!Kn(r)?[i,Jn(t[i],this.Uc&&null!==(e=null===(s=this.Uc[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]:[i,r]}))),a=this.Yc({appendCount:n,keys:s,parsedDataArrs:o,opts:i});if(Object.entries(a.buckets).forEach((([t,i])=>{if(0===this.Pc&&i.ensureNoDuplication){const s=o[t],e=i.cache;if(Array.isArray(s)||e!==s)throw new Error(`LightningChart JS error | DataSetXY ensureNoDuplication check failed for '${t}'`)}})),!a.incomingDataReplacedCache&&this.Ec){let t=this.jc(o);if(t=t&&t.filter((t=>this.Uc&&this.Uc[t].$c&&!("autoDetectResult"in this.Uc[t].$c))),t&&t.length>0)if(this.Rc);else{t.length>1&&this.Ea&&Nt.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.Uc?this.Uc[i]:void 0;if(!(t&&t.$c&&"autoDetectResult"in t.$c))return this.Hc(i,{parsedDataArrs:Object.fromEntries(s.map((t=>[t,"number"==typeof o[t]?new Array(n).fill(o[t]):o[t]]))),offset:h,count:n}),this}Nt.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}const l=a.maxSampleCount-this.Lc,u=Math.min(n,l);if(u>0){if(!a.incomingDataReplacedCache)for(const t of a.keys){const i=a.buckets[t].cache,s=o[t];Hn(i,s,h,u,this.Lc)}this.D.R("change",{type:"change",iDataStart:this.Lc,iDataEnd:this.Lc+u-1}),this.Lc+=u,this.Lc>a.maxSampleCount-1&&(this.Lc=0,this.Dc=!0,this.D.R("loop",{type:"loop"}))}if(this.Pc=Math.min(this.Pc+u,a.maxSampleCount),this.Bc+=u,n-u>0&&!a.incomingDataReplacedCache){const t={};for(const i of a.keys)t[i]=Ot(o[i],h+u,void 0);this.appendSamples(t,i)}else this.Xc();return this}fill(t){return this.Uc?(Object.keys(t).forEach((t=>{this.Uc&&!this.Uc[t]&&this.Ea&&Nt.console.warn(`LightningChart JS warning - DataSetXY.fill() tried to fill data property that doesn't exist in schema ("${t}")`)})),Object.entries(this.Uc).forEach((([i,s])=>{let e=t[i];s.cache&&void 0!==e&&(S(e)&&(e=e.toUint32()),s.cache.fill(e))})),this.D.R("clear",{type:"clear"}),this):this}setSamples(t,i){return this.clear().appendSamples(t,i)}alterSamplesStartingFrom(t,i,s){var e,r,h;const n=Object.values(i).find((t=>"number"!=typeof t));let o=null==s?void 0:s.offset,a=null==s?void 0:s.count;const l=n?n.length:1;if(o=void 0!==o?o:0,a=void 0!==a?a:l-o,a<=0)return this;const u=Object.keys(i),c=Object.fromEntries(u.map((t=>{var s,e;return[t,Jn(i[t],this.Uc&&null!==(e=null===(s=this.Uc[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),d=this.Bc-1,f=void 0!==this.Wc?Math.max(this.Bc-this.Wc,0):0,A=t+a-1,g=Math.max(t,f),p=Math.min(A,d),v=p-g+1;if(this.Bc>0&&v>0){const i=this.Yc({appendCount:0,keys:u,parsedDataArrs:c,opts:s}),n=null!==(h=null===(r=null===(e=Object.values(i.buckets).find((t=>t.cache)))||void 0===e?void 0:e.cache)||void 0===r?void 0:r.length)&&void 0!==h?h:0;if(void 0!==this.Wc&&this.Dc&&this.Bc%this.Wc!=0){const s=this.Bc-this.Bc%this.Wc,e=this.Bc-1,r=this.Bc-this.Pc,h=s-1,a=Math.max(g,r),l=Math.min(p,h)-a+1;if(l>0){const s=a-t,e=Un(a,this.Bc,n,this.Lc);for(const t of i.keys){const r=i.buckets[t].cache,h=c[t];Hn(r,h,o+s,l,e)}}const u=Math.max(g,s),d=Math.min(p,e)-u+1;if(d>0){const s=u-t,e=Un(u,this.Bc,n,this.Lc);for(const t of i.keys){const r=i.buckets[t].cache,h=c[t];Hn(r,h,o+s,d,e)}}}else{const t=g-f;for(const s of i.keys){const e=i.buckets[s].cache,r=c[s];Hn(e,r,o,v,t)}}this.D.R("clear",{type:"clear"})}const y=t+a-1-d;if(y>0){const s=p+1-t;this.appendSamples(i,{offset:o+s,count:y})}return this}alterSamplesByIndex(t,i){var s;if(!this.Uc)return this;const e=t.length,r=Object.keys(i),h=Object.fromEntries(r.map((t=>{var s,e;return[t,Jn(i[t],this.Uc&&null!==(e=null===(s=this.Uc[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),n=this.Bc-1,o=void 0!==this.Wc?Math.max(this.Bc-this.Wc,0):0;if(e<=0)return this;let a=!1;const l=Object.values(this.Uc).find((t=>t.cache)).cache.length;for(let i=0;i<e;i+=1){const e=t[i];if(e<o||e>n)continue;const u=Un(e,this.Bc,l,this.Lc);for(const t of r){const e=null===(s=this.Uc[t])||void 0===s?void 0:s.cache,r=h[t];e&&(e[u]="number"==typeof r?r:r[i],a=!0)}}return a&&this.D.R("clear",{type:"clear"}),this}alterSamplesByMatch(t,i,s){var e;if(!this.Uc)return this;const r=i.length,h=this.Pc,n=this.Bc-1,o=Math.max(n-h+1,0),a=Object.keys(s),l=Object.fromEntries(a.map((t=>{var i,e;return[t,Jn(s[t],this.Uc&&null!==(e=null===(i=this.Uc[t])||void 0===i?void 0:i.dataStorage)&&void 0!==e?e:Float64Array)]})));if(r<=0)return this;let u=!1;const c=this.Uc[t].cache,d=this.Zc(t);if(!c)return this;const f=c.length;for(let s=0;s<r;s+=1){const r=i[s];let h;if(d){const t=jn(r,o,n,!0,(t=>c[Un(t,this.Bc,f,this.Lc)]));h=Un(t,this.Bc,f,this.Lc)}else for(let t=0;t<f;t+=1)if(c[t]===r){h=t;break}if(void 0!==h){if(c[h]===r)for(const t of a){const i=null===(e=this.Uc[t])||void 0===e?void 0:e.cache,r=l[t];i&&(i[h]="number"==typeof r?r:r[s],u=!0)}}else this.Ea&&Nt.console.warn(`LightningChart JS warning - DataSetXY.alterSamplesByMatch no match found for "${t}=${r}"`)}return u&&this.D.R("clear",{type:"clear"}),this}Xc(t=!1){this.Uc&&this.Gc&&Object.entries(this.Uc).forEach((([i,s])=>{if(!s.cache)return;let e;if(s.$c&&"userSpecified"in s.$c)e=s.$c.userSpecified;else if(s.$c&&"autoDetectResult"in s.$c)e=s.$c.autoDetectResult;else if(s.cache&&this.Bc>0&&!t){const t=void 0!==this.Wc&&this.Dc?this.Lc:0,r=this.Pc-1,h=void 0!==this.Wc&&this.Dc?0:void 0,n=void 0!==this.Wc&&this.Dc?this.Lc-1:void 0,[o,a]=void 0!==h&&void 0!==n&&Math.abs(n-h)>Math.abs(r-t)?[h,n]:[t,r];if(1+a-o>=5){let t,r=s.cache[o];for(let i=o+1;i<=a;i+=1)if(!1!==t){const e=s.cache[i],h=Math.sign(e-r);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),r=e}e=t&&t.direction>0?"progressive":t&&t.direction<0?"regressive":null,s.$c={autoDetectResult:e,effective:e},this.Ea&&Nt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (${i}=${e}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nDefine data patterns in schema when creating series or DataSetXY to clear this warning and improve performance.`)}}}))}Yc(t){var i,s,e,r,h,n,o,a,l;if(this.Uc||(this.Uc=Object.fromEntries(t.keys.map((i=>[i,{dataStorage:Qn(t.parsedDataArrs[i]),$c:void 0}])))),0===this.Pc&&this.Uc&&!this.Nc){const i=this.Uc;t.keys.forEach((s=>{i[s]||(i[s]={dataStorage:Qn(t.parsedDataArrs[s])})}))}if((this.Pc>0||this.Nc)&&this.Uc){const i=this.Uc,s=t.keys.filter((t=>!i[t]));if(s.length>0&&t.appendCount>0){if(this.Nc)throw new Error(`LightningChart JS error - Input data includes data properties that are not defined in schema. This is not allowed when strict mode is enabled. Extra data properties: ${s.map((t=>`'${t}'`)).join(", ")}`);this.Ea&&Nt.console.warn(`LightningChart JS warning - Input data includes data properties that are not defined in schema. This is OK for data sets that don't yet have data pushed in, but this was not the case. Extra data properties were dropped: ${s.map((t=>`'${t}'`)).join(", ")}`)}s.forEach((i=>{delete t.parsedDataArrs[i]})),t.keys=Object.keys(t.parsedDataArrs)}if(Object.entries(this.Uc).forEach((([i,s])=>{s.dataStorage||(s.dataStorage=Qn(t.parsedDataArrs[i]))})),0===this.Pc&&1===Object.keys(this.Uc).length&&!this.Nc){const o=(null!==(s=null===(i=t.opts)||void 0===i?void 0:i.step)&&void 0!==s?s:1)>0?"progressive":"regressive";this.Uc._auto={dataStorage:Float64Array,auto:{start:null!==(r=null===(e=t.opts)||void 0===e?void 0:e.start)&&void 0!==r?r:0,step:null!==(n=null===(h=t.opts)||void 0===h?void 0:h.step)&&void 0!==n?n:1},$c:{userSpecified:o,effective:o}}}Object.entries(this.Uc).forEach((([i,s])=>{var e,r,h,n,o,a,l,u;if(!s.auto)return;const c=null!==(h=null!==(r=null===(e=t.opts)||void 0===e?void 0:e.step)&&void 0!==r?r:"object"==typeof s.auto?s.auto.step:void 0)&&void 0!==h?h:1;let d;if(0===this.Pc)d=null!==(a=null!==(o=null===(n=t.opts)||void 0===n?void 0:n.start)&&void 0!==o?o:"object"==typeof s.auto?s.auto.start:void 0)&&void 0!==a?a:0;else if(void 0!==(null===(l=t.opts)||void 0===l?void 0:l.start))d=t.opts.start;else{const t=this.Jc();if(!t)return;d=t[i]+c}const f=new(null!==(u=s.dataStorage)&&void 0!==u?u:Float64Array)(t.appendCount);for(let i=0;i<t.appendCount;i+=1)f[i]=d+i*c;t.parsedDataArrs[i]=f})),t.keys=Object.keys(t.parsedDataArrs);const u=Object.keys(this.Uc).filter((i=>!t.keys.includes(i)));if(u.length>0&&t.appendCount>0){if(this.Nc)throw new Error(`LightningChart JS error - Input data is missing keys that were defined in schema. This is not allowed when strict mode is enabled. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`);this.Ea&&Nt.console.warn(`LightningChart JS warning - Input data is missing keys that were defined in schema. They will be filled with \`0\`. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`)}for(const i of u)t.parsedDataArrs[i]=new(null!==(o=this.Uc[i].dataStorage)&&void 0!==o?o:Float64Array)(t.appendCount).fill(0);if(t.keys=Object.keys(t.parsedDataArrs),0===this.Pc&&0===Object.values(this.Uc).reduce(((t,i)=>t+(i.cache?1:0)),0)&&(void 0===this.Wc||this.Wc===t.appendCount)&&this.zc&&(0===(null===(a=t.opts)||void 0===a?void 0:a.offset)||void 0===(null===(l=t.opts)||void 0===l?void 0:l.offset)))return Object.entries(this.Uc).forEach((([i,s])=>{var e,r;s.cache="number"==typeof t.parsedDataArrs[i]?new(null!==(e=s.dataStorage)&&void 0!==e?e:Float64Array)(t.appendCount).fill(t.parsedDataArrs[i]):Wn(t.parsedDataArrs[i],null!==(r=s.dataStorage)&&void 0!==r?r:Float64Array)})),this.Xc(),{maxSampleCount:t.appendCount,buckets:this.Uc,incomingDataReplacedCache:!0,keys:t.keys};if(void 0===this.Wc){const i=this.Pc+t.appendCount;if(!Object.values(this.Uc).find((t=>t.cache)))return Object.values(this.Uc).forEach((t=>{var s;t.cache=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i)})),this.Xc(),{maxSampleCount:i,buckets:this.Uc,keys:t.keys};const s=Object.values(this.Uc)[0].cache.length;if(s<i){if(!this.Oc.warningDisplayed){const s=Nt.performance.now();if(this.Oc.expandEvents=this.Oc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.Oc.expandEvents.push({timestamp:s}),this.Oc.expandEvents.length>5)return this.Ea&&Nt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Oc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Yc(t)}return Object.values(this.Uc).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e})),this.Lc=this.Pc,this.Xc(),{maxSampleCount:i,buckets:this.Uc,keys:t.keys}}return s>4*i?(Object.values(this.Uc).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache.subarray(0,this.Pc)),t.cache=e})),this.Xc(),{maxSampleCount:i,buckets:this.Uc,keys:t.keys}):(this.Xc(),{maxSampleCount:i,buckets:this.Uc,keys:t.keys})}t.appendCount+this.Pc>this.Wc&&this.D.R("maxsamplecountexceed",{type:"maxsamplecountexceed",currentSampleCount:this.Pc,currentMaxSampleCount:this.Wc,newTotalSampleCount:this.Pc+t.appendCount});const c=this.Wc;return Object.values(this.Uc).forEach((t=>{var i;t.cache=t.cache||new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(c)})),this.Xc(),{maxSampleCount:c,buckets:this.Uc,keys:t.keys}}getSampleCount(){return this.Pc}getNextSampleIndex(){return this.Bc}Zc(t){const i=this.Uc&&this.Uc[t];if(i)return i.$c&&"userSpecified"in i.$c?i.$c.userSpecified:i.$c&&"autoDetectResult"in i.$c?i.$c.autoDetectResult:void 0}Qc(t){if(!this.Uc)return;const i=null==t?void 0:t.x,s=null==t?void 0:t.y,e=void 0!==i?this.Uc[i]:void 0,r=void 0!==s?this.Uc[s]:void 0;if(e&&e.$c&&"userSpecified"in e.$c){if("progressive"===e.$c.userSpecified)return"ProgressiveX";if("regressive"===e.$c.userSpecified)return"RegressiveX"}if(r&&r.$c&&"userSpecified"in r.$c){if("progressive"===r.$c.userSpecified)return"ProgressiveY";if("regressive"===r.$c.userSpecified)return"RegressiveY"}if(e&&e.$c&&"autoDetectResult"in e.$c&&e.$c.autoDetectResult){if("progressive"===e.$c.autoDetectResult)return"ProgressiveX";if("regressive"===e.$c.autoDetectResult)return"RegressiveX"}if(r&&r.$c&&"autoDetectResult"in r.$c&&r.$c.autoDetectResult){if("progressive"===r.$c.autoDetectResult)return"ProgressiveY";if("regressive"===r.$c.autoDetectResult)return"RegressiveY"}}Kc(t){if(!t||!this.Uc)return{dataPattern:void 0,qc:Float64Array,td:Float64Array};const i={dataPattern:this.Qc(t)};for(const s of Object.keys(t)){const e=s,r=t[e];if(void 0===r)continue;const h=this.Uc[r];h&&h.cache&&("x"===e&&(i.sd=h.cache,i.qc=h.dataStorage),"y"===e&&(i.ed=h.cache,i.td=h.dataStorage),"color"===e&&(i.rd=h.cache),"rotation"===e&&(i.hd=h.cache),"size"===e&&(i.nd=h.cache),"lookupValue"===e&&(i.od=h.cache))}return i}setMaxSampleCount(t){if("object"==typeof t){this.ad&&this.removeEventListener("maxsamplecountexceed",this.ad);const i=t.max,s=t.initial;this.ad=t=>{if(void 0!==i&&t.currentMaxSampleCount>=i)return;let s=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==i&&(s=Math.min(s,i)),this.setMaxSampleCount(s)},this.addEventListener("maxsamplecountexceed",this.ad),void 0===this.Wc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.Pc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Wc&&this.Wc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Uc||!Object.values(this.Uc).find((t=>t.cache)))return this.Wc=i,this;if(i===this.Wc)return this;if(this.Dc&&0!==this.Lc&&this.Lc!==this.getSampleCount())throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Wc=i,this.Pc<i?(this.Lc=this.Pc,this.Dc=!1):(this.Lc=0,this.Dc=!0),Object.values(this.Uc).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e}))}return this}getMaxSampleCount(){return this.Wc}clear(){return this.Lc=0,this.Pc=0,this.Bc=0,this.Dc=!1,this.D.R("clear",{type:"clear"}),this}readBack(t){var i;if(!this.Uc)return{data:{},iSampleFirst:0};const s=null===(i=Object.values(this.Uc).find((t=>t.cache)))||void 0===i?void 0:i.cache;if(!s)return{data:{},iSampleFirst:0};const e=s.length;let r,h=[];if(null==t?void 0:t.onlyInRange){const i=this.Uc[t.onlyInRange.key],s=this.Zc(t.onlyInRange.key),e=i.cache;if(!s)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");if(!e)return{data:{},iSampleFirst:0};const n=Math.min(t.onlyInRange.start,t.onlyInRange.end),o=Math.max(t.onlyInRange.start,t.onlyInRange.end),a=Yn(n,o,e,this.Bc,this.Pc,this.Lc,s,0);if(!a)return{data:{},iSampleFirst:0};h=a.dataRanges,r=a.iFirstSample}else if(void 0!==this.Wc&&this.Dc&&this.Bc%this.Wc!=0){const t=this.Lc,i=e-t,s=this.Lc-1;h.push({offset:t,count:i}),h.push({offset:0,count:s+1}),r=this.Bc-e}else h.push({offset:0,count:this.Pc}),r=0;const n=h.reduce(((t,i)=>t+i.count),0),o=Object.fromEntries(Object.entries(this.Uc).filter((([t,i])=>i.cache)).map((([t,i])=>{var s;const e=i.cache;let r;if(1===h.length&&h[0].count===e.length)r=e;else{r=new(null!==(s=i.dataStorage)&&void 0!==s?s:Float64Array)(n);let t=0;for(const s of h)r.set(i.cache.subarray(s.offset,s.offset+s.count),t),t+=s.count}return[t,r]})));return{data:o,iSampleFirst:r}}ld(t,i){var s,e;const r=this.readBack(i);return{xValues:null!==(s=r.data[t.x])&&void 0!==s?s:new Float64Array,yValues:null!==(e=r.data[t.y])&&void 0!==e?e:new Float64Array,lookupValues:t.lookupValue?r.data[t.lookupValue]:void 0,colors:t.color?r.data[t.color]:void 0,sizes:t.size?r.data[t.size]:void 0,rotations:t.rotation?r.data[t.rotation]:void 0,iSampleFirst:r.iSampleFirst}}ud(t){}dd(){return{min:0,max:void 0!==this.Wc&&this.Dc?this.Wc-1:this.Pc-1}}fd(t){t=Math.min(t,this.Pc),this.Bc-=t,this.Pc-=t,this.Lc-=t,this.Lc<0&&void 0!==this.Wc&&(this.Lc+=this.Wc)}Hc(t,i){const s=this.Uc;if(!s)return;const e=this.Zc(t),r="progressive"===e,h=s[t].cache,n=i.parsedDataArrs[t],o=Object.keys(i.parsedDataArrs);if(!e||!h||!n)return;const a=i.count,l=n[0];if(this.jc(Object.fromEntries(o.map((t=>[t,i.parsedDataArrs[t][i.offset+i.count-1]]))))){const t=h.length,e=this.Pc,n=this.Bc-1,u=Math.max(n-e+1,0),c=jn(l,u,n,r,(i=>h[Un(i,this.Bc,t,this.Lc)])),d=c-1,f=c+1,A=h[Un(c,this.Bc,t,this.Lc)],g=f<=this.Bc-1?h[Un(f,this.Bc,t,this.Lc)]:void 0,p=void 0!==g&&(r&&g<l||!r&&g>l)?f+1:r&&A<l||!r&&A>l?c+1:d+1,v=n-p+1,y=Object.fromEntries(o.map((t=>{var i;return[t,new(null!==(i=s[t].dataStorage)&&void 0!==i?i:Float64Array)(v)]})));let m=0;for(let i=p;i<=n;i+=1){const e=Un(i,this.Bc,t,this.Lc);for(const t of o)y[t][m]=s[t].cache[e];m+=1}this.fd(v);const x=Object.fromEntries(o.map((t=>{var e;const r=new(null!==(e=s[t].dataStorage)&&void 0!==e?e:Float64Array)(a+v);return r.set(i.parsedDataArrs[t]),r.set(y[t],a),[t,r]})));this.Rc=!0,this.appendSamples(x),this.Rc=!1,this.D.R("clear",{type:"clear"})}else{const s=this.Jc(),e=s?s[t]:0;let r=0;for(let t=0;t<a;t+=1)if(n[t]>e){r=t;break}this.Rc=!0,this.appendSamples(i.parsedDataArrs,{offset:r}),this.Rc=!1}}jc(t){const i=this.Jc();if(!i||!this.Uc)return;const s=Object.keys(t),e=[];for(const r of s){const s=this.Zc(r);if(!s)continue;const h=i[r],n=t[r],o="number"==typeof n?n:n[0];("progressive"===s&&o<h||"regressive"===s&&o>h)&&e.push(r)}return e.length>0?e:void 0}Ad(t){const i=this.Kc(t);if(!i.sd||!i.ed||0===this.Pc)return;if(void 0===this.Wc)return this.Bc>0?{x:i.sd[0],y:i.ed[0]}:void 0;if(!this.Dc)return{x:i.sd[0],y:i.ed[0]};let s=this.Lc-this.Pc;return s<0&&(s+=this.Wc),{x:i.sd[s],y:i.ed[s]}}gd(t){const i=this.Kc(t);if(!i.sd||!i.ed||0===this.Pc)return;if(void 0===this.Wc){const t=this.Pc-1;return t>=0?{x:i.sd[t],y:i.ed[t]}:void 0}let s=this.Lc-1;return s<0&&(s+=this.Wc),{x:i.sd[s],y:i.ed[s]}}pd(){if(!this.Uc||0===this.Pc)return;let t;if(void 0===this.Wc){if(this.Bc>0)return;t=0}else this.Dc?(t=this.Lc-this.Pc,t<0&&(t+=this.Wc)):t=0;return Object.fromEntries(Object.entries(this.Uc).map((([i,s])=>[i,s.cache[t]])))}Jc(){if(!this.Uc||0===this.Pc)return;let t;return void 0===this.Wc?t=this.Pc-1:(t=this.Lc-1,t<0&&(t+=this.Wc)),Object.fromEntries(Object.entries(this.Uc).map((([i,s])=>[i,s.cache[t]])))}vd(t,i){const s=this.Kc(t);if(!(this.Uc&&0!==this.Pc&&s&&s.sd&&s.ed))return;const e=s.sd.length,r=this.Pc,h=this.Bc-1,n=Math.max(h-r+1,0)+i,o=Un(n,this.Bc,e,this.Lc);return{x:s.sd[o],y:s.ed[o],lookupValue:s.od?s.od[o]:void 0,color:s.rd?s.rd[o]:void 0,size:s.nd?s.nd[o]:void 0,rotation:s.hd?s.hd[o]:void 0,iSample:n,sample:Object.fromEntries(Object.entries(this.Uc).map((([t,i])=>[t,i.cache?i.cache[o]:void 0])))}}yd(t,i,s,e,r){if(!t)return;const h=this.Uc,n=this.Kc(t),o=n.dataPattern,a=n.sd,l=n.ed;if(!a||!l||!h)return;const u=(t,i)=>({x:a[t],y:l[t],lookupValue:n.od?n.od[t]:void 0,color:n.rd?n.rd[t]:void 0,size:n.nd?n.nd[t]:void 0,rotation:n.hd?n.hd[t]:void 0,iSample:i,sample:Object.fromEntries(Object.entries(h).map((([i,s])=>[i,s.cache?s.cache[t]:void 0])))}),c=a.length,d=this.Pc,f=this.Bc-1,A=Math.max(f-d+1,0);if(o){const e=Ve(o),r=this.Ad(t),a=this.gd(t);if(!(r&&a&&n.sd&&n.ed))return;const l="ProgressiveX"===o||"RegressiveX"===o?"x":"y",d="x"===l?"y":"x",g="x"===l?n.sd:n.ed,p="x"===d?n.sd:n.ed,v=i[l],y=Math.min(r[l],a[l]),m=Math.max(r[l],a[l]);if(v<y||v>m)return;const x=jn(v,A,f,e,(t=>g[Un(t,this.Bc,c,this.Lc)])),S=Un(x,this.Bc,c,this.Lc);if(!s)return u(S,x);const b=x-1,M=x+1,w=g[S],_=e?v>=w?M<=f?M:void 0:b>=A?b:void 0:v<=w?M<=f?M:void 0:b>=A?b:void 0;if(void 0===_)return;const k=Un(_,this.Bc,c,this.Lc),C=x<_?{pos:g[S],val:p[S],iSample:x}:{pos:g[k],val:p[k],iSample:_},T=x>_?{pos:g[S],val:p[S],iSample:x}:{pos:g[k],val:p[k],iSample:_},F=(v-C.pos)/(T.pos-C.pos),I=Ne(C.val,T.val,F),L=Object.fromEntries(Object.entries(h).map((([t,i])=>[t,i.cache?i.cache[S]:void 0])));return"x"===ze(o)?{x:v,y:I,iSample:Ne(C.iSample,T.iSample,F),sample:L}:{y:v,x:I,iSample:Ne(C.iSample,T.iSample,F),sample:L}}let g,p=Number.MAX_VALUE;const v=q(i,e,r),y=this.Pc-1;for(let t=0;t<=y;t+=1){const i=a[t],s=l[t];if(!this.Vc||!Number.isNaN(i)&&!Number.isNaN(s)){const h=K(i,e.x,r.x),n=K(s,e.y,r.y),o=(h-v.x)**2+(n-v.y)**2;o<p&&(p=o,g=t)}}return void 0===g?void 0:u(g,g)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Un=(t,i,s,e)=>t%s,Yn=(t,i,s,e,r,h,n,o)=>{if(0===e||0===r)return;const a="progressive"===n,l=s.length,u=e-1,c=Math.max(u-r+1,0),d=Vn(s)?jn(t,c,u,a,(t=>s.elementAt(Un(t,e,l)))):jn(t,c,u,a,(t=>s[Un(t,e,l)])),f=Vn(s)?jn(i,c,u,a,(t=>s.elementAt(Un(t,e,l)))):jn(i,c,u,a,(t=>s[Un(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f);if(A===g&&(0===A||A===u))return;const p=Math.max(A-o,c),v=Math.min(g+o,u),y=Un(p,e,l),m=Un(v,e,l);return y>m?{iFirstSample:p,iLastSample:v,iFirstSampleDataArray:y,iLastSampleDataArray:m,dataRanges:[{offset:y,count:l-y},{offset:0,count:m+1}]}:{iFirstSample:p,iLastSample:v,iFirstSampleDataArray:y,iLastSampleDataArray:m,dataRanges:[{offset:y,count:m-y+1}]}},jn=(t,i,s,e,r)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2),n=r(h);e&&t<n||!e&&t>n?s=h-1:i=h}const n=Math.abs(t-r(i));return i<h&&Math.abs(t-r(i+1))<n?i+1:i},Hn=(t,i,s,e,r)=>{if("number"==typeof i)t.fill(i,r,r+e);else{const h=i.length;if(Array.isArray(i))for(let h=0;h<e;h+=1)t[r+h]=i[s+h];else t.set(h===e?i:i.subarray(s,s+e),r)}},Wn=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),Xn=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Zn=t=>"string"==typeof t&&Xn.test(t)&&!Nt.isNaN(Date.parse(t)),Jn=(t,i)=>{if("number"==typeof t)return t;if(S(t))return t.toUint32();if(t instanceof Date)return t.getTime();if("string"==typeof t){if(Zn(t))return new Date(t).getTime();throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings")}const s=t.length,e=t[0]&&t[0]instanceof Date,r=t[0]&&Zn(t[0]),h=t[0]&&S(t[0]);if(!r&&t[0]&&"string"==typeof t[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(r){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=new Date(t[i]).getTime();return e}if(e){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=t[i].getTime();return e}if(h){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],r=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=r}return s}return t},Qn=t=>{if(t&&Array.isArray(t))return Float64Array;const i="object"==typeof t?Object.getPrototypeOf(t).constructor:void 0;return null!=i?i:Float64Array},Kn=t=>!!t&&!Array.isArray(t)&&(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array);class qn extends Rn{constructor(t,i,s,e,r){var h;super(t,i,s,e,r),this.ml="label",this.Cc=this.Ws._n(this.renderingScale).tn(this.ml).qe(ae).Mn(Xi).wn(Xi),this.setMargin(null!==(h=r.uiTextPadding)&&void 0!==h?h:5),this.D.zi(this.Cc)}Nn(){return[this.Cc]}setFillStyle(t){return this.Cc.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Mh()}ir(){void 0!==this.Yn&&this.Cc.nl(this.Yn);const t=this.getPosition(a(0,0),exports.UISpace.Content),i=q(t,this.scale,this.renderingScale);return this.Cc.sr(i),this.Cc.Zr=this.Zr,this}Nh(){this.Cc.Nh();const t=0===this.ml.length?a(0,0):this.Cc.bc();return this.setContentSize(t),super.Nh()}setText(t){return this.ml=t,this.Cc.tn(this.ml),this.Ws.Bs(),this}getText(){return this.ml}setFont(t){return this.Cc.Ch(t),this.Ws.Bs(),this}getFont(){return this.Cc.kh()}setTextRotation(t){return this.Cc.Th(t),this.Ws.Bs(),this}getTextRotation(){return this.Cc.Fh()}}const to={...Xh,...Jh,uiElement:qn};class io extends On{constructor(t,i,s,e,r){super(t,i,s,e,r),this.fitTo=this.jn.bind(this),this.setSize=this.fitTo,this.Cc=this.Ws.md(i).qe(ae).Ke(Tt),this.xd=this.Cc.Ho(),this.D.zi(this.Cc)}Nn(){return[this.Cc]}setCornerRadius(t,i){var s,e,r,h;return this.Sd=t,this.xd.bd(t?{extent:t,c_x1_y1:null===(s=null==i?void 0:i.bottomLeft)||void 0===s||s,c_x1_y2:null===(e=null==i?void 0:i.topLeft)||void 0===e||e,c_x2_y1:null===(r=null==i?void 0:i.bottomRight)||void 0===r||r,c_x2_y2:null===(h=null==i?void 0:i.topRight)||void 0===h||h,skipTooSmallCheck:!!i}:void 0),this.Ws.Bs(),this}getCornerRadius(){return this.Sd}setFillStyle(t){return this.Cc.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Mh()}setStrokeStyle(t){return this.Cc.Ke(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.Ja()}ir(){void 0!==this.Yn&&this.Cc.nl(this.Yn);const t=Ss([this.getPosition(a(-1,-1),exports.UISpace.Content),this.getPosition(a(1,1),exports.UISpace.Content)].map((t=>q(t,this.scale,this.renderingScale))));return this.xd.Md(t.min.x,t.min.y,t.max.x,t.max.y),this}jn(t){return this.setContentSize(t),this.Ws.Bs(),this}Hn(){return 0}Wn(){return 0}Zn(){return 0}Xn(){return 0}}class so extends On{constructor(t,i,s,e,r){super(t,i,s,e,r),this.wd=a(0,0),this.Cc=t._d(i).Qu(0).Ar(360).qe(ae).Ke(Tt),this.D.zi(this.Cc)}Nn(){return[this.Cc]}setFillStyle(t){return this.Cc.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Mh()}setStrokeStyle(t){return this.Cc.Ke(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.Ja()}ir(){void 0!==this.Yn&&this.Cc.nl(this.Yn);const t=this.getSize(exports.UISpace.Content).x/2;return this.Cc.qu(t*this.renderingScale.ni().x).tc(t*this.renderingScale.ni().y).sr(q(this.getPosition(a(0,0),exports.UISpace.Content),this.scale,this.renderingScale)).rc(255).Nh(),this}jn(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(a(2*i,2*i)),this.wd=t,this.Ws.Bs(),this}Hn(){return(this.getSize(exports.UISpace.Content).x-this.wd.x)/2}Wn(){return(this.getSize(exports.UISpace.Content).x-this.wd.x)/2}Zn(){return(this.getSize(exports.UISpace.Content).y-this.wd.y)/2}Xn(){return(this.getSize(exports.UISpace.Content).y-this.wd.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(a(i,i)),this.wd=t,this}}class eo extends zn{constructor(t,i,s,e,r){super(t,i,s,_n.Simple,e,r),this.kd=g(a(0,0)),this.Cd=!1,this.Fc()}Ic(){const t=this.kd.T();if(this.Cd){const i=Math.min(t.x,t.y);return[a(0,0),a(i/2,i/2),a(0,i),a(-i/2,i/2)]}const i=2*Math.sqrt(this.kd.T().x*this.kd.T().x/4+this.kd.T().y*this.kd.T().y/4),s=a(Math.cos(Math.PI/4)*i,0),e=a(0,Math.sin(Math.PI/4)*i),r=a(0,0),h=Bs(r,Bs(s,e)),n=Bs(h,Bs(e,Ps(s,-1)));return[r,h,n,Ds(n,Bs(s,e))]}Nn(){return[this.Cc]}setFillStyle(t){return this.Cc.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Mh()}setStrokeStyle(t){return this.Cc.Ke(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.Ja()}jn(t){return this.kd.C(t),this.Cd=!1,this.Ws.Bs(),this}Hn(){return this.Cd?0:(this.getSize(exports.UISpace.Content).x-this.kd.T().x)/2}Wn(){return this.Cd?0:(this.getSize(exports.UISpace.Content).x-this.kd.T().x)/2}Zn(){return this.Cd?0:(this.getSize(exports.UISpace.Content).y-this.kd.T().y)/2}Xn(){return this.Cd?0:(this.getSize(exports.UISpace.Content).y-this.kd.T().y)/2}fitTo(t){return this.kd.C(t),this.Cd=!0,this.Ws.Bs(),this}}class ro extends zn{constructor(t,i,s,e,r){super(t,i,s,_n.Simple,e,r),this.Td=g(a(0,0)),this.Fd=g(10),this.Id=g(void 0),this.eo=g(exports.UIDirections.Right),this.Fc()}Nn(){return[this.Cc]}setFillStyle(t){return this.Cc.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Mh()}setStrokeStyle(t){return this.Cc.Ke(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.Ja()}setDirection(t){return this.eo.C(t),this.Ws.Bs(),this}getDirection(){return this.eo.T()}setPointerLength(t){return this.Fd.C(t),this.Ws.Bs(),this}getPointerLength(){return this.Fd.T()}setPointerAngle(t){return this.Id.C(t),this.Ws.Bs(),this}getPointerAngle(){let t=this.Id.T();if(void 0===t){const i=this.Ld();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}jn(t){return this.Td.C(t),this.Ws.Bs(),this}Pd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Bd(){return ci(this.eo.T())?this.Td.T().x:this.Td.T().y}Ld(){return ci(this.eo.T())?this.Td.T().y:this.Td.T().x}Hn(){switch(this.eo.T()){case exports.UIDirections.Right:return 0;case exports.UIDirections.Left:return this.getPointerLength();case exports.UIDirections.Up:case exports.UIDirections.Down:return Math.max(0,this.Pd()-this.Ld());default:return 0}}Wn(){switch(this.eo.T()){case exports.UIDirections.Right:return this.getPointerLength();case exports.UIDirections.Left:return 0;case exports.UIDirections.Up:case exports.UIDirections.Down:return Math.max(0,this.Pd()-this.Ld());default:return 0}}Zn(){switch(this.eo.T()){case exports.UIDirections.Right:case exports.UIDirections.Left:return Math.max(0,this.Pd()-this.Ld());case exports.UIDirections.Up:return this.getPointerLength();case exports.UIDirections.Down:default:return 0}}Xn(){switch(this.eo.T()){case exports.UIDirections.Right:case exports.UIDirections.Left:return Math.max(0,this.Pd()-this.Ld());case exports.UIDirections.Up:return 0;case exports.UIDirections.Down:return this.getPointerLength();default:return 0}}Ic(){const t=ui(this.eo.T()),i=Is(a(0,0),t),s=this.getPointerLength(),e=this.Pd(),r=this.Bd(),h=this.Ld();if(!(0!==s&&0!==e||0!==r&&0!==h))return[];const n=a(0,0),o=Bs(Bs(n,Ps(t,-s)),Ps(i,e/2)),l=Bs(o,Ps(i,(h-e)/2)),u=Bs(l,Ps(t,-r)),c=Bs(Bs(n,Ps(t,-s)),Ps(i,-e/2)),d=Bs(c,Ps(i,-(h-e)/2)),f=Bs(d,Ps(t,-r));let A;return A=0===r||0===h?[n,o,c]:0===s||0===e?[l,u,f,d]:Ht(h,e)?[n,o,u,f,c]:[n,o,l,u,f,d,c],A}}class ho extends Rn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.fitTo=this.jn.bind(this),this.setSize=this.fitTo,this.Dd=new $n,this.Cc=this.Ws.zd(i).cr(Tt).Od(ae).Rd(ae).Ed(this.Dd,{x:"x",y:"y"}),this.D.zi(this.Cc)}Nn(){return[this.Cc]}setShape(t){return this.Cc.Vd(t),this}getShape(){return this.Cc.Nd()}setRotation(t){return this.Cc.Gd(t),this}getRotation(){return this.Cc.$d()}setFillStyle(t){return this.Cc.Rd(t),this.Ws.Bs(),this}getFillStyle(){return this.Cc.Ud()}setStrokeStyle(t){return this.Cc.Yd(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.jd()}ir(){void 0!==this.Yn&&this.Cc.nl(this.Yn);const t=q(this.getPosition({x:0,y:0},exports.UISpace.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.Dd.clear(),i>0){const s=this.Cc.Nd(),e=this.Cc.Ud(),r=pr(s)&&s,h=kt(e)&&e;if(r){const t=i/r.kt().y;this.Cc.Hd(t)}else if(h){const t=h.source;if(t instanceof Image){const s=i/t.height;this.Cc.Hd(s)}}else this.Cc.Hd(i);this.Dd.appendSample(t)}return this}jn(t){return this.setContentSize(t),this.Ws.Bs(),this}Hn(){return 0}Wn(){return 0}Zn(){return 0}Xn(){return 0}}const no={...Xh,...Jh,uiElement:ho};class oo extends Kh{setSize(t){return this.setContentSize(t),this.Ws.Bs(),this}}class ao extends Nh{constructor(){super(...arguments),this.Wd=[],this.Xd=0,this.Zd=t=>{const i=this.Wd.indexOf(t);i>=0&&this.Wd.splice(i,1)}}getMembers(){return this.Wd}getMemberCount(){return this.Wd.length}setMinimumSize(t){return this.Jd=t,this.Ws.Bs(),this}getMinimumSize(){return this.Jd}addElement(t,i=-1){const s=t.lo(this.Ws,this.renderingScale,this.scale,this.Zd,this.bi,!1);return s.setPointerEvents(this.getPointerEvents()),i>=0?this.Wd.splice(i,0,s):this.Wd.push(s),s.setVisible(this.getVisible()),this.D.Gi(s),this.ci&&(Ri(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Wd.slice().forEach(Yt),this}ir(){super.ir(),this.Wd.forEach((t=>{t.Zr=this.Zr}));const t=this.Yn;return void 0!==t&&this.Wd.forEach(((i,s)=>{i.Yn=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.Wd.forEach((i=>i.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let i=0;i<this.Wd.length;i+=1)this.Wd[i].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.Wd.length;t+=1)if(this.Wd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Wd.length;i+=1){const s=this.Wd[i];Rt(s)&&s.setHighlight(t)}return this}}class lo extends ao{ir(){super.ir();const t=this.getPosition(a(-1,1),exports.UISpace.Content),i=this.Wd.reduce(((t,i)=>t+ +(i instanceof oo)),0),s=i>0?(this.size.x-this.Xd)/i:0;return this.Wd.reduce(((i,e)=>e instanceof oo?this.scale.Qt({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(a(-1,1)).setPosition(a(i,t.y)).ir().getPosition(a(1,0)).x),t.x),this}Nh(){for(let t=0;t<this.Wd.length;t+=1){const i=this.Wd[t];i instanceof uo&&i.setMinimumSize(0),i.Nh()}const t=this.Wd.reduce(this.Qd.bind(this),l(0,0));this.Xd=t.x;const i=void 0===this.Jd?t:a(Math.max(t.x,this.Jd),t.y);this.setContentSize(i);for(let t=0;t<this.Wd.length;t+=1){const s=this.Wd[t];s instanceof uo&&s.setMinimumSize(i.y).Nh()}return super.Nh()}Qd(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(co,i).setSize(a(0,t))}}class uo extends ao{ir(){super.ir();const t=this.getPosition(a(-1,1),exports.UISpace.Content),i=this.Wd.reduce(((t,i)=>t+ +(i instanceof oo)),0),s=i>0?(this.size.y-this.Xd)/i:0;return this.Wd.reduce(((i,e)=>e instanceof oo?this.scale.Qt({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(a(-1,1)).setPosition(a(t.x,i)).ir().getPosition(a(0,-1)).y),t.y),this}Nh(){for(let t=0;t<this.Wd.length;t+=1){const i=this.Wd[t];i instanceof lo&&i.setMinimumSize(0),i.Nh()}const t=this.Wd.reduce(this.Qd.bind(this),l(0,0));this.Xd=t.y;const i=void 0===this.Jd?t:a(t.x,Math.max(t.y,this.Jd));this.setContentSize(i);for(let t=0;t<this.Wd.length;t+=1){const s=this.Wd[t];s instanceof lo&&s.setMinimumSize(i.x).Nh()}return super.Nh()}Qd(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(co,i).setSize(a(0,t))}}const co={...Xh,...Jh,uiElement:oo};class fo extends uo{constructor(){super(...arguments),this.Wd=[]}addRow(){return this.addElement(po,void 0)}getRow(t,i=!1){return i&&this.Wd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Wd[t]}}const Ao={...Xh,...Zh,...Qh},go={...Ao,uiElement:uo,background:io},po={...Ao,uiElement:lo,background:io},vo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},yo=(t=>{const i={},s=`stylable${t}s`;return i[s]=[],i[`set${t}FillStyle`]=function(t){return this[s].forEach((i=>i.setFillStyle(t))),this},i[`get${t}FillStyle`]=function(){return this[s][0].getFillStyle()},i[`set${t}Font`]=function(t){return this[s].forEach((i=>i.setFont(t))),this},i[`get${t}Font`]=function(){return this[s][0].getFont()},i[`set${t}Rotation`]=function(t){return this[s].forEach((i=>i.setTextRotation(t))),this},i[`get${t}Rotation`]=function(){return this[s][0].getTextRotation()},i})("Text"),mo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.D.R("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonStrokeStyle(t){return this.button.setStrokeStyle(t),this},getButtonStrokeStyle(){return this.button.getStrokeStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},xo={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},So={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},bo={...Xh,...Zh,background:io,lo(t,i,s,e,r,h){const n=new lo(t,i,s,this.background,e,r),o=n.addElement(to,void 0),a=Object.assign(n,vo,{setTextLabel:o},yo,{stylableTexts:[o]});return Wh(a,r,h),this.applyStylers(a,r)}}.addStyler(Hh),Mo={...Xh,...Zh,background:ro,direction:exports.UIDirections.Up,setDirection(t){return this.direction=t,this},lo(t,i,s,e,r,h){const n=this.direction,o=new lo(t,i,s,this.background,e,r),a=o.addElement(to,void 0),l=o.getBackground().setDirection(n),u=o.ir.bind(o),c=Object.assign(o,vo,{setTextLabel:a},yo,{stylableTexts:[a]},So,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===exports.UIDirections.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===exports.UIDirections.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===exports.UIDirections.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===exports.UIDirections.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===exports.UIDirections.Up?this.getPadding().top:this.getDirection()===exports.UIDirections.Down?this.getPadding().bottom:this.getDirection()===exports.UIDirections.Right?this.getPadding().right:this.getPadding().left},setTickLabelAlignment(t,i){return this},getTickLabelAlignment:()=>0,Zr:void 0,ir(){a.Zr=this.Zr,u()}});return c.uo="other",c.setPointerLength(r.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(r.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(r.uiTextFont).setTextFillStyle(r.uiTextFillStyle).setBackground((t=>t.setFillStyle(r.uiBackgroundFillStyle).setStrokeStyle(r.uiBackgroundStrokeStyle))),Wh(c,r,h),this.applyStylers(c,r)}};class wo extends Vh{constructor(t,i,s,e,r,h){super(t,i,s,r,h),this.Kd=!1,this.qd=ae,this.tf=ae,this.getOn=()=>this.Kd,this.tf=h.uiButtonFillStyleHidden||h.uiButtonFillStyle,this.if=new ho(this.Ws,this.renderingScale,this.scale,jt,h).setShape(e).setFillStyle(this.tf),this.D.Gi(this.if)}Nn(){return[...this.if.Nn()]}setOn(t){return this.Kd=t,this.if.setFillStyle(t?this.qd:this.tf),this.Ws.Bs(),this}setOffFillStyle(t){return this.tf="function"==typeof t?t(this.tf):t,this.Kd||this.if.setFillStyle(this.tf),this}getOffFillStyle(){return this.tf}setSize(t){return this.if.fitTo("number"==typeof t?a(t,t):t),this}getSize(){return this.if.getSize()}setOnFillStyle(t){return this.qd="function"==typeof t?t(this.qd):t,this.Kd&&this.if.setFillStyle(this.qd),this}getOnFillStyle(){return this.qd}setStrokeStyle(t){return this.if.setStrokeStyle(t),this}getStrokeStyle(){return this.if.getStrokeStyle()}setButtonShape(t){return this.if.setShape(t),this.Ws.Bs(),this}getButtonShape(){return this.if.getShape()}ir(){return super.ir(),this.if.Yn=this.Yn,this.if.setVisible(this.getVisible()).setPosition(this.getPosition(a(0,0),exports.UISpace.Content)).ir(),this}Nh(){const t=this.if.Nh().getSize();return this.setContentSize(t),super.Nh()}dispose(){return super.dispose(),this.if.dispose(),this}setPointerEvents(t){return this.if.setPointerEvents(t),this}getPointerEvents(){return this.if.getPointerEvents()}setHighlight(t){const i=Gi(t);return this.if.setHighlight(i),this.D.R("highlightchange",{highlight:i}),this.Ws.Bs(),this}getHighlight(){return this.if.getHighlight()}}const _o={...Xh,uiElement:wo,buttonShape:exports.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},lo(t,i,s,e,r,h){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,r),r);return Wh(n,r,h),n}},ko={...Xh,...Zh,background:io,buttonBuilder:_o,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},lo(t,i,s,e,r,h){var n;const o=new lo(t,i,s,this.background,e,r),a=o.addElement(go);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(go);u.addGap();const c=u.addElement(to);u.addGap(),o.addGap();const d=Object.assign(o,vo,{setTextLabel:c},yo,{stylableTexts:[c]},mo,{button:l},xo);let f;return d.addEventListener("click",(()=>{d.getLocked()||d.setOn(!d.getOn())})),d.addEventListener("pointerenter",(()=>{d.setHighlight(!0)})),d.addEventListener("pointerleave",(()=>{d.setHighlight(!1)})),d.setMouseStyle(exports.MouseStyles.Point),d.setTextFillStyleHidden(r.uiTextFillStyleHidden||r.uiTextFillStyle),d.addEventListener("switch",(t=>{t.state?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:null!==(n=r.uiTextPadding)&&void 0!==n?n:5}),Wh(d,r,h),this.applyStylers(d,r)}}.addStyler(Hh).addStyler(((t,i)=>(t.setButtonOnFillStyle(i.uiButtonFillStyle).setButtonOffFillStyle(i.uiButtonFillStyleHidden).setButtonSize(i.uiButtonSize).setButtonStrokeStyle(i.uiButtonStrokeStyle),t)));class Co extends Vh{constructor(t,i,s,e,r){super(t,i,s,e,r),this.sf=10,this.ef=exports.UIDirections.Up,this.rf=0,this.uo="major",this.hf=0,this.nf=1,this.ml=t._n(this.renderingScale).Mn(Xi).wn(Xi),this.D.zi(this.ml),this.ur=t.dr(this.renderingScale),this.D.zi(this.ur)}Nn(){return[this.ml]}ir(){if(super.ir(),this.ci)return this;const t=q(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.Qt(t,{x:this.ef===exports.UIDirections.Right?-this.sf:this.ef===exports.UIDirections.Left?this.sf:0,y:this.ef===exports.UIDirections.Up?-this.sf:this.ef===exports.UIDirections.Down?this.sf:0}),s=this.renderingScale.Qt(i,{x:this.ef===exports.UIDirections.Right?-this.rf:this.ef===exports.UIDirections.Left?this.rf:0,y:this.ef===exports.UIDirections.Up?-this.rf:this.ef===exports.UIDirections.Down?this.rf:0});return this.ur.gr(t).Ar(i),this.ml.sr(s).Zl(this.ef===exports.UIDirections.Up?{x:this.hf,y:this.nf}:this.ef===exports.UIDirections.Down?{x:this.hf,y:-this.nf}:this.ef===exports.UIDirections.Right?{x:this.nf,y:this.hf}:{x:-this.nf,y:this.hf}),this.ml.Zr=this.Zr,this}Nh(){const t=this.ur.do().getThickness();return this.size=this.ef===exports.UIDirections.Left||this.ef===exports.UIDirections.Right?{x:this.sf+this.rf+this.ml.Nh().bc().x,y:t}:{y:this.sf+this.rf+this.ml.Nh().bc().y,x:t},super.Nh()}dispose(){return super.dispose(),this.ml.dispose(),this.ur.dispose(),this}setVisible(t){return super.setVisible(t),this.ml.setVisible(t),this.ur.setVisible(t),this}setPointerEvents(t){return this.ml.setPointerEvents(t),this.ur.setPointerEvents(t),this}getPointerEvents(){return this.ml.getPointerEvents()}getText(){return this.ml.rn()}setTextFillStyle(t){return this.ml.qe(t),this.Ws.Bs(),this}getTextFillStyle(){return this.ml.Mh()}setTextFont(t){return this.ml.Ch(t),this}setTextRotation(t){return this.ml.Th(t),this}getTextRotation(){return this.ml.Fh()}getTextFont(){return this.ml.kh()}setText(t){return this.ml.tn(t),this.Ws.Bs(),this}setDirection(t){return this.ef=t,this.Ws.Bs(),this}getDirection(){return this.ef}setPointerLength(t){return this.sf=t,this.Ws.Bs(),this}getPointerLength(){return this.sf}setTickLabelPadding(t){return this.rf=t,this.Ws.Bs(),this}getTickLabelPadding(){return this.rf}setTickStyle(t){return this.ur.cr(t),this.Ws.Bs(),this}getTickStyle(){return this.ur.do()}setTickLabelAlignment(t,i){return this.hf=t,i&&(this.nf=i),this.Ws.Bs(),this}getTickLabelAlignment(){return this.hf}}const To={...Xh,direction:exports.UIDirections.Up,setDirection(t){return this.direction=t,this},lo(t,i,s,e,r,h){const n=this.direction,o=new Co(t,i,s,e,r);return Wh(o,r,h),o.setDirection(n),this.applyStylers(o,r)}}.addStyler(Hh),Fo=To.addStyler(((t,i)=>(t.uo="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Io=To.addStyler(((t,i)=>(t.uo="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle))));class Lo extends Vh{constructor(t,i,s,e,r,h){var n,o,a,l,u,c;super(t,i,s,e,r),this.af=[],this.lf="",this.uf=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:he(i,t.value),this.cf=0,this.df=!1,this.hf=h,this.ff=t.md(i).Ke(Tt),this.xd=this.ff.Ho().bd("number"==typeof r.legendLUTCornerRadius?{extent:r.legendLUTCornerRadius,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.D.zi(this.ff),this.Af=t._n(i).qe(r.uiTextFillStyle).Ch(r.uiTextFont).setPointerEvents(!1),this.D.zi(this.Af),this.gf=null!==(n=r.legendLUTLabelMargin)&&void 0!==n?n:7,this.pf=null!==(o=r.legendLUTUnitLabelMargin)&&void 0!==o?o:7,"vertical"===h?(this.vf=null!==(a=r.legendLUTLengthVertical)&&void 0!==a?a:140,this.yf=null!==(l=r.legendLUTThicknessVertical)&&void 0!==l?l:25):(this.vf=null!==(u=r.legendLUTLengthHorizontal)&&void 0!==u?u:160,this.yf=null!==(c=r.legendLUTThicknessHorizontal)&&void 0!==c?c:15)}Nn(){return[this.ff,this.Af]}mf(t){return this.Af.Mn(t),this.af.forEach((i=>i.Mn(t))),this.Ws.Bs(),this}xf(t){this.Sf=t;const i=Do(t,"vertical"===this.hf?0:90,this.df);return this.ff.qe(i),this.Ws.Bs(),this}Ys(){return this.Sf}bf(t){return this.vf=t,this.Ws.Bs(),this}Zl(t){return this.hf=t,this.Ws.Bs(),this}Mf(){return this.vf}wf(t){return this.yf=t,this.Ws.Bs(),this}_f(){return this.yf}kf(t){return this.lf=t,this.Ws.Bs(),this}Cf(){return this.lf}Tf(t){return this.uf=t,this.Ws.Bs(),this}setLUTDisplayProportionalSteps(t){if(this.df=t,this.Sf){const t=Do(this.Sf,"vertical"===this.hf?0:90,this.df);this.ff.qe(t)}return this.Ws.Bs(),this}getLUTDisplayProportionalSteps(){return this.df}setFillStyle(t){return this.Af.qe(t),this.Ws.Bs(),this}getFillStyle(){return this.Af.Mh()}setFont(t){return this.Af.Ch(t),this.Ws.Bs(),this}getFont(){return this.Af.kh()}setTextRotation(t){return this.cf=t,this.Af.Th(t),this.Ws.Bs(),this}getTextRotation(){return this.Af.Fh()}ir(){var t,i,s,e;if(super.ir(),this.ci||!this.getVisible())return this;const r=this.Sf;if(r){const h=this.renderingScale.ni(),n=r.min,o=r.max;if("vertical"===this.hf){const s=this.getPosition({x:-1,y:-1},exports.UISpace.Content),e=Bs(s,{x:this.yf*this.renderingScale.x.getPixelSize()+this.gf*h.x,y:0}),a={x:e.x,y:e.y+(this.lf.length>0?this.pf*h.y+this.Af.kt().y:0)+.5*((null===(t=this.af[0])||void 0===t?void 0:t.kt().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},exports.UISpace.Content).y-.5*((null===(i=this.af[this.af.length-1])||void 0===i?void 0:i.kt().y)||0)};this.xd.Md(s.x,a.y,s.x+this.yf*this.renderingScale.x.getPixelSize(),a.y+this.vf*this.renderingScale.y.getPixelSize()),this.Af.Zl({x:-1,y:-1}).sr(e),r.getSteps().forEach(((t,i)=>{const s=ms(a,l,this.df?!0===r.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.af[i].Zl({x:-1,y:0}).sr(s)}))}else{const t=this.getPosition({x:-1,y:-1},exports.UISpace.Content),i=this.getPosition({x:1,y:1},exports.UISpace.Content),a=Math.max(this.af.reduce(((t,i)=>Math.max(t,i.kt().y)),0),this.Af.Nh().kt().y),l=Bs(t,{x:.5*((null===(s=this.af[0])||void 0===s?void 0:s.kt().x)||0),y:a}),u={x:i.x,y:l.y},c={x:r.getInterpolation()?u.x-(.5*((null===(e=this.af[this.af.length-1])||void 0===e?void 0:e.kt().x)||0)+(this.lf.length>0?this.pf*h.x+this.Af.kt().x:0)):l.x+this.vf*this.renderingScale.x.getPixelSize(),y:l.y},d={x:l.x,y:l.y+this.gf*h.y};this.xd.Md(d.x,d.y,d.x+this.vf*this.renderingScale.x.getPixelSize(),d.y+this.yf*this.renderingScale.y.getPixelSize()),this.Af.Zl({x:1,y:1}).sr(u),r.getSteps().forEach(((t,i)=>{const s=ms(l,c,this.df?!0===r.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this.af[i].Zl({x:0,y:1}).sr(s)}))}}return this}Nh(){if(this.Sf&&this.getVisible()){const t=this.Sf.getSteps();for(let i=this.af.length;i<t.length;i+=1){const t=this.Ws._n(this.renderingScale).setPointerEvents(!1);this.af.push(t),this.D.zi(t)}for(let i=0;i<t.length;i+=1)this.af[i].qe(this.Af.Mh()).Ch(this.Af.kh()).tn(this.uf(t[i],this.Sf)).Th(this.cf);for(let i=t.length;i<this.af.length;i+=1)this.af[i].dispose();if(this.af.length=t.length,this.Af.tn(this.lf),"vertical"===this.hf){const t=this.yf,i=this.vf,s=t+Math.max(this.af.reduce(((t,i)=>Math.max(t,i.Nh().bc().x)),0),this.Af.Nh().bc().x),e=(this.lf.length>0?this.pf+this.Af.Nh().bc().y:0)+i+.5*this.af[0].Nh().bc().y+.5*this.af[this.af.length-1].Nh().bc().y;this.setContentSize({x:s,y:e})}else{const t=this.vf,i=this.yf,s=Math.max(this.lf.length>0?this.pf+this.Af.Nh().bc().x+(this.Sf.getInterpolation()?.5*this.af[this.af.length-1].Nh().bc().x:0):0,this.Sf.getInterpolation()?.5*this.af[this.af.length-1].Nh().bc().x:0),e=t+.5*this.af[0].Nh().bc().x+s,r=i+this.gf+Math.max(this.af.reduce(((t,i)=>Math.max(t,i.Nh().bc().y)),0),this.Af.Nh().bc().y);this.setContentSize({x:e,y:r})}}else this.af.forEach((t=>t.dispose())),this.af.length=0,this.Af.setVisible(!1),this.ff.setVisible(!1),this.setContentSize({x:0,y:0});return super.Nh()}dispose(){return super.dispose(),this.ff.dispose(),this.af.forEach(Yt),this.Af.dispose(),this}setPointerEvents(t){return this.ff.setPointerEvents(t),this}getPointerEvents(){return this.ff.getPointerEvents()}}const Po={lutElement:{},setLUT(t){return this.lutElement.xf(t),this},getLUT(){return this.lutElement.Ys()},setLUTLength(t){return this.lutElement.bf(t),this},getLUTLength(){return this.lutElement.Mf()},setLUTThickness(t){return this.lutElement.wf(t),this},getLUTThickness(){return this.lutElement._f()},setLookUpUnit(t){return this.lutElement.kf(t),this},getLookUpUnit(){return this.lutElement.Cf()},setLUTStepValueFormatter(t){return this.lutElement.Tf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Bo={...Xh,...Zh,background:io,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},lo(t,i,s,e,r,h){const n=new uo(t,i,s,this.background,e,r),o=n.addElement({lo:()=>new Lo(t,i,s,jt,r,this.alignment)}),a=Object.assign(n,yo,{stylableTexts:[o]},Po,{lutElement:o});return Wh(a,r,h),this.applyStylers(a,r)}}.addStyler(Hh),Do=(t,i,s)=>{const e=t.getSteps(),r=t.min,h=t.max-r;if(!0===t.getInterpolation())return new N({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-r)/h:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-r)/h:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-r)/h:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new N({angle:i,stops:n})},Eo=ko.addStyler((t=>t.addEventListener("switch",(i=>!0===i.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),Ro={TextBox:bo,CheckBox:ko,ButtonBox:Eo,PointableTextBox:Mo,AxisTickMajor:Fo,AxisTickMinor:Io,LUTRange:Bo};class Oo extends Ph{constructor(t,i,s,e,r,h){super(t,i,s,e,h),this.Ff=r}}class zo extends Lh{constructor(t,i,s,e,r,h,n,o,a,l,u,c,d,f,A,g){var p,v,y;super(l,a,n,f,A,{numeric:a.getWidth({x:f.xAxisNumericTicks,y:f.yAxisNumericTicks}),datetime:a.getWidth({x:f.xAxisDateTimeTicks,y:f.yAxisDateTimeTicks}),time:a.getWidth({x:f.xAxisTimeTicks,y:f.yAxisTimeTicks})},g),this.If=new Map,this.Lf=void 0,this.Pf=0,this.Bf=[],this.Df=[],this.Ef=!0,this.Rf=[],this.Of=t=>{const i=this.Df.indexOf(t);i>=0&&this.Df.splice(i,1)},this.zf=t=>(this.Df.indexOf(t)<0&&this.Df.push(t),this.Of),this.Vf=!0,this.Nf=Si(this.Rf),this.vf={relative:1},this.Gf=(t,i)=>i.getAllocatesAxisSpace()&&gs(i.getValue(),this.Ah,this.gh)?Math.max(t,i.update().Ao()):t,this.$f=t=>{const i=this.Bf.indexOf(t);-1!==i&&this.Bf.splice(i,1)},this.ds=exports.HighlightModes.onHover,this.D=new yt,this.ar={},this.Uf=n instanceof H?n:void 0,this.isX=this.oh.getWidth({x:!0,y:!1}),this.isY=this.oh.getHeight({x:!0,y:!1}),this.Yf=t,this.jf=i,this.Hf=e,this.Wf=r,this.chart=l,this.Xf=c,this.Zf=s,this.ps=h,"logarithmic"===g.type&&this.chart.pi.La(jh.Eo),this.wh=No,d(this,this.zf),n.Jf=this,this.Qf=u,this.Kf=this.Qf>50?1:-1,this.qf=(y=this.oh.toPoint(0,-this.Kf),Math.abs(y.x)>=Math.abs(y.y)?y.x>=0?exports.UIDirections.Right:exports.UIDirections.Left:y.y>=0?exports.UIDirections.Up:exports.UIDirections.Down),this.tA=o,this.iA=this.ai instanceof H?(new Z).Kt(this.oh.toVec2(this.ai,this.tA)):(new J).Kt(this.oh.toVec2(this.ai,this.tA)),this.sA=this.chart.eA,this.rA=(new Z).Kt(this.oh.toVec2(this.oh.getWidth(this.sA),this.tA)),this.hA=this.jf.dr(this.iA).setPointerEvents(!1),this.nA=this.Zf.tr(this.sA).qe(a.getWidth({x:f.xAxisOverlayStyle,y:f.yAxisOverlayStyle})).Ke(Tt).Pi(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.oA=this.Zf.tr(this.sA).qe(a.getWidth({x:f.xAxisZoomingBandFillStyle,y:f.yAxisZoomingBandFillStyle})).Ke(a.getWidth({x:f.xAxisZoomingBandStrokeStyle,y:f.yAxisZoomingBandStrokeStyle})).Pi(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Jr=this.Zf._n(this.iA).setPointerEvents(!1).Th(this.oh.getTitleTextRotation(this.Kf)).wn(Xi).Mn(Xi),this.chart.pi.Ms.bs(this.nA,(t=>this.nA.Ii(t)),{animationEnabled:this.Er}),this.D.zi(this.nA),this.hA.cr(a.getWidth({x:f.xAxisStrokeStyle,y:f.yAxisStrokeStyle})),this.Jr.qe(a.getWidth({x:f.xAxisTitleFillStyle,y:f.yAxisTitleFillStyle})).Ch(a.getWidth({x:f.xAxisTitleFont,y:f.yAxisTitleFont})),this.vs=h.ys(this,{}),this.Ih=this.vs.aA([this.Jr]).Ps(f.effectsText),this.lA=null!==(p=a.getWidth({x:f.xAxisMarginAfterTicks,y:f.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.uA=null!==(v=a.getWidth({x:f.xAxisMarginAfterTitle,y:f.yAxisMarginAfterTitle}))&&void 0!==v?v:7}setHighlight(t){return this.chart.pi.Ms.Vs(this.nA,t),this.D.R("highlightchange",{highlight:Gi(t)}),this}getHighlight(){return this.chart.pi.Ms.Cs(this)}Sn(){return this.zr}bn(){return void 0!==this.Dh}setKeepTickLabelsInAxisBounds(t){return this.Vf=t,this.chart.pi.Bs(),this}getKeepTickLabelsInAxisBounds(){return this.Vf}setTickStrategy(t,i){return super.fh(t,i)}getTickStrategy(){return this.Lr}addBand(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,r=s?this.Wf:this.Hf,h=new lh(r,this.chart,this.Nf,this,this.iA,this.oh,this.bi,this.ps);return e&&this.chart.legend.add(h,e),this.Rf.push(h),h}addConstantLine(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,r=s?this.Wf:this.Hf,h=new uh(r,this.chart,this.Nf,this,this.iA,this.oh,this.bi,this.ps);return e&&this.chart.legend.add(h,e),this.Rf.push(h),h}cA(t){this.Rf.forEach(t)}dA(t){return this.Rf.map(t)}getHighlighters(){return this.Rf}setThickness(t){return"number"==typeof t?(this.fA=t,this.AA=t):"object"==typeof t?(this.fA=t.min,this.AA=t.max):void 0===t&&(this.fA=void 0,this.AA=void 0),this.$h=void 0,this.chart.pi.Bs(),this}getThickness(){return{min:this.fA,max:this.AA}}gA(){return this.Df}Yh(t){return{}}Xh(t,i,s,e,r){var h;const n=i.Fr;return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.oh.toPoint(t,0),labelAlignment:this.oh.toPoint(n.getLabelAlignment(),null!==(h=n.labelAlignmentOpposite)&&void 0!==h?h:-this.Kf),labelOffset:{x:0,y:0},labelRotation:i.Fr.labelRotation}}Qh(t,i,s){if(!this.di)return{pA:0,vA:0,yA:0,ticksInfo:i,updatedTicks:s};const e=this.Jr&&this.Jr.rn().length>0&&this.getTitleFillStyle()!==ae,r=this.oh.getHeight(e?this.Jr.Nh().bc():{x:0,y:0})+(e?this.uA:0);let h=0;this.Pr.forEach(((t,i)=>{const s=i.Fr.tickLength<0||i.Fr.tickPadding<0,e=i.Fr.tickLength+i.Fr.tickPadding;t.forEach((t=>{if(!t.zh.getVisible()||le(t.zh.Mh()))return void(s||(h=Math.max(h,e)));const i=e+this.oh.getHeight(t.zh.Nh().bc());s||(h=Math.max(h,i))}))}));const n=this.Bf.reduce(this.Gf,0);h=Math.max(h,n),h+=this.lA;const o=Wt(r+h,void 0!==this.fA?this.fA:0,void 0!==this.AA?this.AA:rs);return this.Pf=o,{pA:h,vA:r,yA:o,ticksInfo:i,updatedTicks:s}}sn(t,i){return new Oo(i,t,this.jf,this.iA,this.iA)}Kr(){return this.iA}Lh(){if(this.If){for(const t of this.If)t[1].grid.dispose(),t[1].tick.dispose();this.If.clear()}super.Lh()}vn(t,i){return"linear"===this.uh.type||"linear-highPrecision"===this.uh.type?Ie(t,i,this.ai):Le(t,i,this.ai)}mA(t,i){return i instanceof H?Ie:Le}xn(t,i,s){if("logarithmic"!==this.uh.type){const e=this.ai.Jt(Math.abs(i-t));return{start:t+Math.sign(t-i)*s.start*e,end:i+Math.sign(i-t)*s.end*e}}const e=this.ai,r={start:e.$,end:e.U};e.W(t,i).rs();const h={start:e.Qt(t,s.start*Math.sign(t-i)),end:e.Qt(i,s.end*Math.sign(i-t))};return e.W(r.start,r.end).rs(),h}Vh(t){var i,s;const e=this.Gh(),r=e.min,h=e.max,n=this.Pr.size>0,o=(null===(i=this.$h)||void 0===i?void 0:i.physicalAxisSize)!==t.physicalAxisSize;let a=(null===(s=this.$h)||void 0===s?void 0:s.min)!==r||this.$h.max!==h;if(this.$h&&this.Uf){const t=this.Uf.getPixelSize(),i=Math.abs(h-this.$h.max),s=Math.abs(i/t),e=Math.abs(r-this.$h.min),n=Math.abs(e/t);a=Math.max(s,n)>=10}return!(!n||o||a||t.anyPreviousAxisUpdated)}ir(t){const i=this.getVisible()&&t.xA>0,s=this.ai.getInnerStart()<this.ai.getInnerEnd()?this.ai.getInnerStart():this.ai.getInnerEnd(),e=this.ai.getInnerEnd()>this.ai.getInnerStart()?this.ai.getInnerEnd():this.ai.getInnerStart();i||this.Lh();const r=this.hA.do().getThickness()*this.Kf/2,h=this.tA.getInnerInterval(),n=this.Qf/100*h,o=n+t.SA,a=h*this.Kf,l=o+r;if("Empty"!==this.Lr&&i){const i=this.ai.bt(),s=this.ai.Mt(),e=Math.min(i,s),r=Math.max(i,s);for(const[i,s]of this.Pr){let h=this.If.get(i);if(!h)if(i.yr)h={grid:this.Yf[0].bA(this.iA).setPointerEvents(!1),tick:this.Yf[0].bA(this.iA).setPointerEvents(!1)};else if("MA"in i){const t=Array.from(this.Pr.keys()).filter((t=>"MA"in t)).reverse().indexOf(i),s=this.Yf[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");h={grid:s.bA(this.iA).setPointerEvents(!1),tick:s.bA(this.iA).setPointerEvents(!1)}}if(!h)continue;h.grid.Vi(),h.tick.Vi();const u=i.Fr,c=n-a*u.getGridStrokeLength(),d=l+u.getTickLength()*this.Kf,f=d+u.getTickPadding()*this.Kf;for(const[i,n]of s){const i=t.ticksInfo.get(n);if(!i)continue;const s={start:this.oh.toPoint(n.M,o),end:this.oh.toPoint(n.M,c)},a={start:this.oh.toPoint(n.M,l),end:this.oh.toPoint(n.M,d)};let u=0;if(this.Vf){const t=n.zh.bc(),s=this.ai.Dt(i.keyValue)+this.oh.getWidth(i.labelOffset)+(-.5*this.oh.getWidth(i.labelAlignment)-.5)*this.oh.getWidth(t),h=s+this.oh.getWidth(t);u=h>r?r-h:s<e?e-s:0}n.zh.sr(this.oh.toPoint(this.ai.Qt(n.M,u),f)).Zl(i.labelAlignment).Th(i.labelRotation),h.grid.Ho().wA(s.start,s.end),h.tick.Ho().wA(a.start,a.end)}h.grid.cr(i.Fr.getGridStrokeStyle()),h.tick.cr(i.Fr.getTickStyle()),this.If.set(i,h)}}const u=l,c=u+this.Kf*t.yA,d={start:this.oh.toVec2(this.ai.getInnerStart(),u),end:this.oh.toVec2(this.ai.getInnerEnd(),c)},f=q(d.start,this.iA,this.sA),A=q(d.end,this.iA,this.sA);this.hA.gr(this.oh.toPoint(s,o)).Ar(this.oh.toPoint(e,o)).setVisible(i);let g=this._A;g||(g="center-chart",("pixels"in this.vf||void 0!==this.kA||void 0!==this.CA||1!==t.TA||this.isY)&&(g="center"));const p=o+t.pA*this.Kf;if(this.Jr.sr(this.oh.toPoint(this.oh.getWidth(q("center-chart"===g?{x:.5*this.sA.x.getInnerInterval(),y:.5*this.sA.y.getInnerInterval()}:"center"===g?Ps(Bs(f,A),.5):"start"===g?f:A,this.sA,this.iA)),p)).Zl(this.oh.toPoint("center-chart"===g||"center"===g?0:"start"===g?-1:1,-1*this.Kf)).setVisible(i),this.Lf){const i=this.Qf/100*h+t.SA,s=-this.Kf*h-t.SA,e={start:this.oh.toVec2(this.Lf.min,l+this.Kf*this.Pf),end:this.oh.toVec2(this.Lf.max,i+s)},r=q(e.start,this.iA,this.sA),n=q(e.end,this.iA,this.sA);this.oA.sr(r).Z(Ds(n,r)).setVisible(!0)}else this.oA.setVisible(!1);this.nA.sr(f).Z(Ds(A,f)).setVisible(i);for(const s of this.Bf)if(s.update().plot(i,o,a,t.SA,l),this.Zf.pi.xc&&s.getVisible()&&s.getMarkerVisible()&&s.ao.Zr===exports.TextObjectIdentifier.CursorTickMarker){const t=$h(s.ao);this.Zf.pi.xc.FA({...t,blacklist:[exports.TextObjectIdentifier.CursorResultTable,exports.TextObjectIdentifier.CursorTickMarker]})}for(const t of this.Rf)t.ir();return{width:Math.abs(A.x-f.x),height:Math.abs(A.y-f.y),left:Math.min(f.x,A.x),right:this.sA.x.getInnerEnd()-Math.max(f.x,A.x),bottom:Math.min(f.y,A.y),top:this.sA.y.getInnerEnd()-Math.max(f.y,A.y)}}setLength(t){return this.vf=t,this.$h=void 0,this.chart.pi.Bs(),this}getLength(){return this.vf}setMargins(t,i){return this.kA=t,this.CA=i,this.$h=void 0,this.chart.pi.Bs(),this}getMargins(){var t,i;return{start:null!==(t=this.kA)&&void 0!==t?t:0,end:null!==(i=this.CA)&&void 0!==i?i:0}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.IA,...this.chart.LA,...this.chart.PA,...this.chart.BA].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.IA,...this.chart.LA,...this.chart.PA,...this.chart.BA].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}DA(){return this.Pf}EA(t,i){i=i||Ro.AxisTickMajor;const s=new Yh(this,t?this.Yf[0]:this.Zf,this.Zf,this.ai,this.rA,this.rA,this.oh,this.qf,this.$f,this.bi,i).setTextFormatter(this.formatValue);return this.Bf.push(s),this.$h=void 0,"other"===s.ao.uo&&(s.ao.Zr=exports.TextObjectIdentifier.CursorTickMarker),s}RA(t,i){const s=-this.oh.getWidth(i);this.pan(s)}pan(t,i){var s,e;const r=this.Ah,h=this.gh,n=this.ai.Qt(r,t),o=this.ai.Qt(h,t);this.Eh(n,o,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1});const a=this._h();if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(s=this.Rh)||void 0===s?void 0:s.id)===fh&&this.Rr&&a){const t=this.vr({forStart:n,forEnd:o,allowIntervalLengthChange:!1});t&&(this.gh>this.Ah&&this.gh>=t.end||this.gh<this.Ah&&this.Ah>=t.start)&&this.setStopped(!1)}if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(e=this.Rh)||void 0===e?void 0:e.id)===Ah&&this.Rr&&a){const t=this.vr({forStart:n,forEnd:o,allowIntervalLengthChange:!1});t&&(this.gh<this.Ah&&this.gh<=t.end||this.gh>this.Ah&&this.Ah<=t.start)&&this.setStopped(!1)}}zoom(t,i){const s=this.ai.Dt(this.Ah),e=this.ai.Dt(this.gh),r=this.ai.Dt(t),h=Wt((r-s)/(e-s),0,1),n=.2*this.ai.wt(),o=h*n*-i,a=(1-h)*n*i,l=this.ai.Qt(this.Ah,o),u=this.ai.Qt(this.gh,a),c=this.mn();let d=l,f=u;if(void 0!==(null==c?void 0:c.intervalMax)&&Math.abs(f-d)>c.intervalMax){const t=c.intervalMax-Math.abs(f-d);d-=t*h,f+=t*(1-h)}if(void 0!==(null==c?void 0:c.intervalMin)&&Math.abs(f-d)<c.intervalMin){const t=c.intervalMin-Math.abs(f-d);d-=t*h,f+=t*(1-h)}this.Eh(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.EA(!0,t)}getCustomTicks(){return[...this.Bf]}setTitlePosition(t){return this._A=t,this.chart.pi.Bs(),this}getTitlePosition(){var t;return null!==(t=this._A)&&void 0!==t?t:"center-chart"}getUiPosition(){return this.Qf}setStrokeStyle(t){return this.hA.cr(t),this.jf.Bs(),this}getStrokeStyle(){return this.hA.do()}getOverlayStyle(){return this.nA.Mh()}setOverlayStyle(t){return this.nA.qe(t),this.jf.Bs(),this}setAnimationHighlight(t){return this.chart.pi.Ms.Ns(this.nA,t),this}getAnimationHighlight(){return this.chart.pi.Ms.Gs(this.nA)}getMarginAfterTicks(){return this.lA}setMarginAfterTicks(t){return this.lA=t,this.$h=void 0,this.jf.Bs(),this}getMarginAfterTitle(){return this.uA}setMarginAfterTitle(t){return this.uA=t,this.$h=void 0,this.jf.Bs(),this}j(){return this.ai.j(),this}H(){return this.ai.H(),this}dispose(){var t;(null===(t=this.Rh)||void 0===t?void 0:t.dispose)&&this.Rh.dispose({axis:this}),this.hA.dispose(),this.nA.dispose(),this.oA.dispose(),this.Jr.dispose(),this.Oh(Yt);for(const t of this.If.values())t.grid.dispose(),t.tick.dispose();return this.Df.slice().forEach(Yt),this.Rf.slice().forEach(Yt),this.Xf(this),this.D.R("dispose",{}),this}setVisible(t){this.hA.setVisible(t),this.Jr.setVisible(t),this.nA.setVisible(t),this.Oh((i=>{i.Fs(t)}));for(const i of this.If.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.$h=void 0,this.chart.pi.Bs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.Er),this}setHighlightOnHover(t){return this.ds=t?exports.HighlightModes.onHover:exports.HighlightModes.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.ds!==exports.HighlightModes.noHighlighting}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setUserInteractions(t){return this.ar=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.ar}}var Vo;exports.AxisXYTitlePositionOptions=void 0,(Vo=exports.AxisXYTitlePositionOptions||(exports.AxisXYTitlePositionOptions={})).Start="start",Vo.Center="center",Vo.End="end",Vo.CenterChart="center-chart";const No=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},Go={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>a(t,i)},$o={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>a(i,t)},Uo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof zo&&"y"in t&&t.y instanceof zo),Yo=t.Record({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new ar,tickLength:7,tickStyle:new ar,tickPadding:0,labelFont:new L,labelFillStyle:new de,labelAlignment:0,labelAlignmentOpposite:void 0,labelRotation:0,labelShadow:void 0});class jo extends Yo{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t,i){return this.withMutations((s=>s.set("labelAlignment",t).set("labelAlignmentOpposite",i)))}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Ho=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),Wo=new jo({labelFillStyle:ae,gridStrokeStyle:Tt,tickStyle:Tt}),Xo=t=>Ho(t)&&le(t.labelFillStyle)&&Ft(t.gridStrokeStyle)&&Ft(t.tickStyle),Zo=1e6,Jo=t.Record({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new jo,minorTickStyle:new jo,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Qo=36e5,Ko=6e4,qo=1e3,ta=1e-6,ia=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=Qo?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=qo?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},sa={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Qo);i%=Qo;const r=Math.floor(i/Ko);i%=Ko;const h=Math.floor(i/qo);return`${s}${Di(e,2)}:${Di(r,2)}:${Di(h,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Qo);i%=Qo;const r=Math.floor(i/Ko);i%=Ko;const h=Math.floor(i/qo);i%=qo;const n=Math.floor(i/1);return`${s}${Di(e,2)}:${Di(r,2)}:${Di(h,2)}.${Di(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Qo),r=Math.floor(i/Ko)%60,h=Math.floor(i/qo)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Di(e,2)}:${Di(r,2)}:${Di(h,2)}.${Di(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Qo),r=Math.floor(i/Ko)%60,h=Math.floor(i/qo)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Di(e,2)}:${Di(r,2)}:${Di(h,2)}.${Di(n,3)}${o}`}},ea={MajorHours12:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>{const r=432e5;return t=Math.floor(t/(4*r))*r*4,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,4)},minor:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>Sh(t,i,36e5,Zo),fitKeyValues:wh({},2,3,4,6)},defaultValueFormatter:sa.hhmmss},MajorHours:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>{const r=Qo;return t=Math.floor(t/(12*r))*r*12,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,6,12)},minor:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>Sh(t,i,3e5,Zo),fitKeyValues:wh({},2,4,6)},defaultValueFormatter:sa.hhmmss},MajorMinutes15:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/Qo)*Qo,bh(t,i,9e5,void 0,Zo)),fitKeyValues:wh({ignore:"first"},2)},minor:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>Sh(t,i,6e4,Zo),fitKeyValues:wh({},3,5)},defaultValueFormatter:sa.hhmmss},MajorMinutes:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>{const r=Ko;return t=Math.floor(t/6e5)*r*10,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>Sh(t,i,5e3,Zo),fitKeyValues:wh({},2,3,4,6)},defaultValueFormatter:sa.hhmmss},MajorSeconds15:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>{const r=15e3;return t=Math.floor(t/6e4)*r*4,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,4)},minor:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>Sh(t,i,1e3,Zo),fitKeyValues:wh({},3,5)},defaultValueFormatter:sa.hhmmss},MajorSeconds:{major:{format:sa.hhmmss,getKeyValues:(t,i,s,e)=>{const r=qo;return t=Math.floor(t/1e4)*r*10,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sh(t,i,100,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmm},MajorMilliseconds100:{major:{format:sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,bh(t,i,100,void 0,Zo)),fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sh(t,i,10,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmm},MajorMilliseconds10:{major:{format:sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,bh(t,i,10,void 0,Zo)),fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sh(t,i,1,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmm},MajorMilliseconds:{major:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,bh(t,i,1,void 0,Zo)),fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sh(t,i,.1,Zo),fitKeyValues:wh({},2)},defaultValueFormatter:sa.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,bh(t,i,.1,void 0,Zo)),fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sh(t,i,.01,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const r=.01;return t=Math.floor(t/.1)*r*10,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sh(t,i,.001,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmmuuu},MajorMicroseconds:{major:{format:sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const r=.001;return t=Math.floor(t/.01)*r*10,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Sh(t,i,100*ta,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const r=100*ta;return t=Math.floor(t/.001)*r*10,bh(t,i,r,void 0,Zo)},fitKeyValues:wh({ignore:"first"},2,5)},minor:{format:sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Sh(t,i,10*ta,Zo),fitKeyValues:wh({},2,3,5)},defaultValueFormatter:sa.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class ra extends Jo{br(t){const i=this.timeOrigin||0,s=[{zh:"Major ticks",MA:0,Fr:this.majorTickStyle,mr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const r=ia(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ea[r].major.format)(t+i,s,e)},Fn:(t,i,s,e,r)=>{const h=ia(s,e);return(0,ea[h].major.getKeyValues)(t,i,s,e,r)},ih:{hn:(t,i,s,e,r,h)=>{const n=ia(r,h),o=ea[n].major.fitKeyValues;if(o)return o(t,i,s,e,r,h)},an:"hide-label"},In:void 0}];return Ho(this.minorTickStyle)&&s.push({zh:"Minor ticks",MA:1,Fr:this.minorTickStyle,mr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const r=ia(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ea[r].minor.format)(t+i,s,e)},Fn:(t,i,s,e,r)=>{const h=ia(s,e);return(0,ea[h].minor.getKeyValues)(t,i,s,e,r)},ih:{hn:(t,i,s,e,r,h)=>{const n=ia(r,h),o=ea[n].minor.fitKeyValues;if(o)return o(t,i,s,e,r,h)},an:"hide-tick"},In:void 0}),{Mr:[],wr:s,_r:this.cursorFormatter||((t,s,e)=>{const r=ia(Math.min(s.start,s.end),Math.max(s.start,s.end));return ea[r].defaultValueFormatter(t+i,s,e)}),kr:1e-4,Cr:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const ha=(t,i,s,e,r)=>(h,n)=>o=>{const a=new Date(o+h),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];r.includes("year")&&(l.year=Math.floor(l.year/s)*s),r.includes("monthIndex")&&(l.monthIndex=0),r.includes("day")&&(l.day=1),r.includes("hours")&&(l.hours=0),r.includes("minutes")&&(l.minutes=0),r.includes("seconds")&&(l.seconds=0),r.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-h:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-h},na=(t,i,s,...e)=>ha(-1,t,i,s,e),oa=(t,i,s,...e)=>ha(-1,t,i,s,e),aa=(t,i,s,...e)=>ha(0,t,i,s,e),la=(t,i,...s)=>ha(1,t,i,void 0,s),ua=t=>(i,s)=>e=>{const r=new Date(e+i),h=s?r.getUTCDay():r.getDay(),n=1===h&&0===(s?r.getUTCHours():r.getHours())&&0===(s?r.getUTCMinutes():r.getMinutes())&&0===r.getSeconds()&&0===r.getMilliseconds();if(0===t&&!0===n)return e;let o=s?r.getUTCDate():r.getDate();return-1===t&&1===h&&!1===n||(-1===t?o-=h>=2?h-1:h+6:o+=h>0?8-h:1),s?Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),o,0,0,0,0)-i:new Date(r.getFullYear(),r.getMonth(),o,0,0,0,0).getTime()-i},ca=[{label:"NanoSecond10",unit:1e-5,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"NanoSecond100",unit:1e-4,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>1e-4*Math.floor(t/1e-4)},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MicroSecond1",unit:.001,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.001*Math.floor(t/.001)},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MicroSecond10",unit:.01,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.01*Math.floor(t/.01)},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MicroSecond100",unit:.1,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.1*Math.floor(t/.1)},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",1,(t=>t.millis%1==0),"millis")},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:wh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:na("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:_h(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:wh(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:na("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:_h(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:wh(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:na("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:_h(3,6,12)},minorTicks:{amount:8,fitFunction:wh(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:na("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:wh({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:wh({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:ua(-1),getNextKeyValueIncludingRef:ua(0),getNextKeyValue:ua(1),greatTicks:!0,majorTicks:{fitFunction:wh(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:oa("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:aa("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:la("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:wh(void 0,2,3,6)},minorTicks:{fitFunction:wh(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:oa("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:aa("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:la("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:wh({ignore:"first"},2,5)},minorTicks:{fitFunction:wh(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:oa("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:aa("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:la("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:wh(void 0,2,4)},minorTicks:{fitFunction:wh(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:oa("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:aa("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:la("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:oa("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:aa("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:la("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],da=(t,i,s,e,r)=>{const h=i-t;let n;for(let t=r?0:ca.length-1;r?t<ca.length:t>=0;r?t+=1:t-=1){const i=h/ca[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=ca[t];break}}return n},fa=(t,i,s)=>{let e=da(i,s,void 0,2,!0);if(void 0!==e&&0===ca.indexOf(e)&&(e=ca[1]),void 0===e)return;if("great"===t)return e;const r="major"===t?1:2,h=ca[ca.indexOf(e)-r];return void 0===h?ca[0]:h},Aa=(t,i,s)=>(e,r,h,n)=>{const o=fa("great",e,r);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>h?e:r,l=(e+r)/2,u=n>h?r:e;if(ca.indexOf(o)<=ca.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=Mh(e,r,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=bh(e,r,o.unit,s,void 0)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,r,c);return"left"===s?void 0===d||gs(d,l,u)?[a]:[d]:void 0!==d&&gs(d,l,u)?[d]:[u]},ga=(t,i,s)=>(e,r,h,n)=>{const o=fa(t,h,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=Mh(e,r,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=bh(e,r,o.unit,t,void 0)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const r=[];let h=s(t),n=0;for(;h<i;)if(r.push(h),h=e(h),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(h),r})(e,r,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let r=t,h=0;for(;(r-t)/(i-t)<.98;)if(e.push(r),h+=1,r=t+h*s,h>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(r),e})(e,r,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const r=[];let h=e(t),n=0;for(;h<i;)if(r.push(h),h=e(h),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r})(e,r,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return ca[ca.indexOf(t)+1]})(o);if(void 0===t)return[];a=Sh(e,r,t.unit/o.minorTicks.amount,void 0)}}return a},pa=t=>(i,s,e,r,h,n)=>{const o=fa(t,h,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,r,h,n):void 0},va=t.Record({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new jo,majorTickStyle:new jo,minorTickStyle:new jo,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),r=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${r}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),sa.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),sa.hhmmssmmm(t-i.getTime())},formatMicrosecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),sa.hhmmssmmmuuu(t-i.getTime())},formatNanosecondRange:(t,i,s,e)=>{if(e){const t=new Date(e.valueShifted);return t.setHours(0,0,0,0),sa.hhmmssmmmuuunnn(e.valueShifted-t.getTime())}{const i=new Date(t);return i.setHours(0,0,0,0),sa.hhmmssmmmuuunnn(t-i.getTime())}},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ya extends va{br(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>ca.map((i=>{const s=((t,i,s)=>{switch(s.label){case"NanoSecond10":case"NanoSecond100":return t.formatNanosecondRange;case"MicroSecond1":case"MicroSecond10":case"MicroSecond100":return t.formatMicrosecondRange;case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Nt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const r=t=>String(t),h=(t,s)=>(h,n)=>{let o=h,a=h+i;const l=n.start,u=n.end,c=l>u,d=fa(t,c?u:l,c?l:u);if(void 0===d)return r(a);if("great"===t){const t=Ht(h,"left"===s?l:u);let e;if(e=!1===t?h:!1===d.irregular?"left"===s&&!1===c||"right"===s&&!0===c?d.greatTicks.getReferenceKeyValue(i,this.utc)(h):d.greatTicks.getReferenceKeyValue(i,this.utc)(h+1*d.unit):"left"===s&&!1===c||"right"===s&&!0===c?d.getPrevKeyValue(i,this.utc)(h):d.getNextKeyValue(i,this.utc)(h),o=e,a=e+i,"right"===s&&!0===t)return"";if("right"===s&&"Week"===d.label)return""}const f=e.get(t);if(void 0===f)return r(a,this.locale);const A=f[ca.indexOf(d)];return void 0===A?"":"function"==typeof A?A(a,n,this.locale,{valueShifted:o,shiftOrigin:this.dateOrigin?this.dateOrigin.getTime():0}):A.format(a)},n=[],o=[{zh:"Great ticks (directive)",MA:0,Sr:!0,Fn:ga("great",i,this.utc),In:void 0},{zh:"Major ticks",MA:1,Fr:this.majorTickStyle,mr:h("major"),Fn:ga("major",i,this.utc),ih:{hn:pa("major"),an:"hide-tick"},In:void 0}];Xo(this.greatTickStyle)||n.push({zh:"Great ticks (left)",Fr:this.greatTickStyle.setLabelAlignment(-1),mr:h("great","left"),Fn:Aa(i,this.utc,"left"),yr:!0,un:!1}),Xo(this.minorTickStyle)||o.push({zh:"Minor ticks",MA:2,Fr:this.minorTickStyle,mr:h("minor"),Fn:ga("minor",i,this.utc),ih:{hn:pa("minor"),eh:(t,i,s,e,r,h)=>{const n=fa("minor",r,h);return!n||"Week"!==n.label},an:"hide-tick"},In:void 0,nn:2});const a=this.cursorFormatter;return{Mr:n,wr:o,_r:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const r=da(Math.min(s.start,s.end),Math.max(s.start,s.end),void 0,1,!0),h=r&&r.unit<=.1,n=r&&r.unit<=100,o=r&&r.unit<=6e4,a=new Date(i+t),l=new Date(i+t);l.setHours(0,0,0,0);const u=h?this.formatNanosecondRange:n?this.formatMicrosecondRange:o?this.formatMillisecondRange:sa.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(a)} ${u(a.getTime()-l.getTime(),s,this.locale,{valueShifted:t,shiftOrigin:i})}`},kr:10**-5,Cr:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const ma=(t,i)=>(s,e,r,h,n)=>{const o=e-s;if(i){let i=5;n<=125?i=2:n<=250?i=3:n<=500&&(i=4);const r=Math.log10(o/i),h=Math.floor(2*r)/2;let a;a=h%1==0?10**(h-t):10**Math.ceil(h)/2;const l=1/a;a=Math.round(a*l)/l;const u=Math.round(Math.floor(s/(10*a))*a*10*l)/l;return bh(u,e,a,void 0,l)}let a=o/5;const l=1/a;return a=Math.round(a*l)/l,Sh(s,e,a,l)},xa=(t,i,s,e,r,h)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):2===i?t.filter(((t,i)=>i%10==0)):void 0,Sa=(t,i,s,e,r,h)=>{},ba=(t,i,s,e,r,h)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Ma=(t,i,s,e,r,h)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,wa=(t,i)=>{const s=Hs(t),e=Ws(t);if(i)return(t,i)=>{const r=[],h=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=h-1;t<=n+1;t+=1){const i=e**t;r.push(i)}return r};const r=10===t?9:4;return(t,i)=>{const h=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**h,l=(e**n-a)/r;for(let s=1;s<=r;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},_a=t.Record({cursorFormatter:void 0,extremeTickStyle:new jo,majorTickStyle:new jo,minorTickStyle:new jo,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class ka extends _a{br(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),r=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),h=[],n=[];Xo(this.extremeTickStyle)||h.push({zh:"Extreme ticks",Fr:this.extremeTickStyle,mr:void 0===i?s:(t,e,r)=>s(i+t,e,r),Fn:xh,yr:!0,un:!0});const o={zh:"Major ticks",MA:0,Fr:this.majorTickStyle,mr:void 0===i?e:(t,s,r)=>e(i+t,s,r),Fn:"logarithmic"===t.type?wa(t.base,!0):ma(0,!0),ih:{an:"hide-label",hn:"logarithmic"===t.type?ba:xa},In:void 0};if(n.push(o),!Xo(this.minorTickStyle)){const s="logarithmic"===t.type?wa(t.base,!1):ma(1,!1);n.push({zh:"Minor ticks",MA:1,Fr:this.minorTickStyle,mr:void 0===i?r:(t,s,e)=>r(i+t,s,e),Fn:(t,i,e,r,h)=>s(t,i,e,r,h),ih:{an:"hide-tick",hn:"logarithmic"===t.type?Ma:Sa},In:80})}const a=this.cursorFormatter?this.cursorFormatter:Ks.Numeric;return{Mr:h,wr:n,_r:void 0===i?a:(t,s,e)=>a(i+t,s,e),kr:1e-9,Cr:void 0,Wh:this.fallBackToExtremeTicksAutomatically?o:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==Wo?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const Ca=(t,i,s="image/png",e,r=1)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e,void 0,r);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Nt.navigator.msSaveBlob)Nt.navigator.msSaveBlob(h,i);else{const t=Nt.document.createElement("a");Nt.document.body.appendChild(t);const s=Nt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Nt.URL.revokeObjectURL(s),Nt.document.body.removeChild(t)}),0)}},Ta=(t,i,s,e,r,h)=>{const n=t.lo(i,s,e,r,h,!0);return n.setDraggingMode(exports.UIDraggingModes.draggable),n},Fa=(t,i)=>{if("relative"===t)return i;if(t instanceof X)return t;const s=t.x instanceof Lh?t.x.ai:t.x.x,e=t.y instanceof Lh?t.y.ai:t.y.y;return me(s,e)},Ia=(t,i,s,e,r)=>{if(s){const h=t,n=i,o=Uo(n)?n:be(n)?e:void 0;if(o&&xe(s)){const t=q(h,o,r.ai);return r.sl({engineX:t.x,engineY:t.y})}if(o&&be(s))return q(h,o,e);if(o&&Uo(s))return q(h,o,s)}else{const s=t;if(be(i)){const t=r.il(s);return q({x:t.engineX,y:t.engineY},r.ai,e)}if(Uo(i)){const t=i,e=r.il(s);return q({x:e.engineX,y:e.engineY},r.ai,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class La{constructor(t){this.OA=[],this.zA=t}VA(){return this.NA(),{add:()=>this.GA(),finishPlot:()=>{this.$A()}}}GA(){let t=this.OA.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.zA()},this.OA.push(t)),t.isFree=!1,t.shape}NA(){this.OA.forEach((t=>{t.isFree=!0}))}$A(){this.OA.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.OA.splice(this.OA.indexOf(t),1)}))}UA(){this.OA.forEach((t=>t.shape.dispose())),this.OA.length=0}Nn(){return this.OA.map((t=>t.shape))}}const Pa=t=>{const i=t.layer,s=t.scale,e=t.panel,r=t.legend;let h;const n=e.pi.Ms,o=new Map,a=(t,i,s,e)=>{var r;o.has(t)||o.set(t,[]),null===(r=o.get(t))||void 0===r||r.push({eventType:i,callback:s}),t.addEventListener(i,s,e)},l=()=>{for(const[t,i]of o.entries())for(const{eventType:s,callback:e}of i)t.removeEventListener(s,e);o.clear()},u=[];let c=[],d=[];const f=new La((()=>i._n(s).Mn(Xi).wn(Xi))),A=new La((()=>i.zd(s))),g=i.md(s).qe(e.getTheme().uiBackgroundFillStyle).setVisible(!1),p=g.Ho().bd({extent:8,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}),v=e.getTheme().uiButtonFillStyle,y=e.getTheme().uiButtonFillStyleHidden,m=e.getTheme().uiTextFillStyle,x=e.getTheme().uiTextFillStyleHidden,S=e.getTheme().uiTextFont,b=e.getTheme().uiBackgroundFillStyle,M=e.getTheme().uiBackgroundStrokeStyle,w=e.getTheme().uiButtonStrokeStyle,_=()=>{g.setVisible(!1),u.forEach((t=>t.setVisible(!1).Nh())),c.forEach((t=>t.setVisible(!1))),d.forEach((t=>t.setVisible(!1)))},k=h=>{var o,c,d,g;l(),h.titleEvents.Vi(),h.backgroundEvents.Vi(),u.forEach((t=>t.dispose())),u.length=0;const p=f.VA(),b=A.VA(),M=null!==(o=h.marginInner)&&void 0!==o?o:0,_=h.marginOuter,k=h.chartPadding,C={left:_.left+k.left,right:_.right+k.right,top:_.top+k.top,bottom:_.bottom+k.bottom},T=e.getSizePixels();let F,I={x:-1,y:1};if("number"==typeof h.position)switch(h.position){case exports.LegendPosition.TopLeft:case exports.LegendPosition.TopCenter:case exports.LegendPosition.TopRight:case exports.LegendPosition.BottomLeft:case exports.LegendPosition.BottomCenter:case exports.LegendPosition.BottomRight:F={x:T.x-h.chartTitleSpace.left-h.chartTitleSpace.right-C.left-C.right,y:T.y-h.chartTitleSpace.top-h.chartTitleSpace.bottom-C.top-C.bottom};break;default:F={x:T.x-C.left-C.right,y:T.y-C.top-C.bottom}}else h.position.origin&&(I=h.position.origin),F={x:T.x-h.position.x*(I.x+1)/2,y:h.position.y*(I.y+1)/2};const P=void 0!==h.orientation?h.orientation===exports.LegendOrientation.Vertical:"number"==typeof h.position&&h.position<6,B=null!==(c=h.padding)&&void 0!==c?c:{left:5,right:5,top:5,bottom:5},D=B.top+B.bottom,E=B.left+B.right,R=null!==(d=h.entryMargin)&&void 0!==d?d:10,O={left:R,right:R,top:R,bottom:R},z=t.panel.getTheme().uiButtonSize;let V=0,N=0,G=0,$=0;const U=[],Y=h.title?p.add().Zl({x:-1,y:0}).tn(h.title).Ch(h.titleFont?new L(h.titleFont):S.setWeight("bold")).qe(null!==(g=h.titleFillStyle)&&void 0!==g?g:m).Mn(O):void 0;if(Y){const t=Y.setVisible(!0).Nh().bc();G=P?t.y:t.x+R,$=P?t.x:t.y,V=t.x,N=t.y,h.titleEvents.zi(Y)}const j=h.entries.filter((t=>!1!==t.options.show)),H=j.map(((t,h)=>{var o,l;const c=void 0!==t.options.text?t.options.text:t.component&&"getName"in t.component?t.component.getName():"",d=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.textFillStyle?t.options.textFillStyle:m:x:void 0!==t.options.textFillStyle?t.options.textFillStyle:m,f=t.options.textFont?new L(t.options.textFont):S,A=p.add().Zl({x:-1,y:0}).tn(c).qe(d).Ch(f).Mn(O),g=void 0!==t.options.buttonShape?t.options.buttonShape:t.component&&t.component.js?t.component.js():exports.PointShape.Circle,M=pr(g);M&&g.Js instanceof Image&&a(g.Js,"load",(()=>{r.zs()}));const _=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.er?Li(e.getTheme(),t.options.matchStyleExactly||!1,t.component.er()):v:y:void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.er?Li(e.getTheme(),t.options.matchStyleExactly||!1,t.component.er()):v,k=null!==(o=t.options.buttonStrokeStyle)&&void 0!==o?o:w,C=void 0!==t.options.buttonSize?t.options.buttonSize:M?Math.max(g.kt().x,g.kt().y):c?z:0,T=void 0!==t.options.buttonRotation?t.options.buttonRotation:t.component&&t.component.getPointRotation?t.component.getPointRotation():0,I=b.add().YA({x:-1,y:0}).Hd(C).Gd(T);_&&I.Rd(_),void 0!==g&&I.Vd(g),I.Yd(k);const B=null===t.options.lut?void 0:t.options.lut?t.options.lut:t.component&&t.component.Ys?null===(l=t.component.Ys())||void 0===l?void 0:l.lut:void 0;let Y;B&&(Y=new Lo(i,s,s,(()=>{}),e.getTheme(),P?"vertical":"horizontal").xf(B),u.push(Y),Y.xf(B).setVisible(!0).Zl(P?"vertical":"horizontal").setFillStyle(d).setFont(f).setMargin(R).mf(Xi),t.options.lutLength&&Y.bf(t.options.lutLength),t.options.lutThickness&&Y.wf(t.options.lutThickness),t.options.lutDisplayProportionalSteps&&Y.setLUTDisplayProportionalSteps(t.options.lutDisplayProportionalSteps),t.options.lutStepValueFormatter&&Y.Tf(t.options.lutStepValueFormatter),B.units&&Y.kf(B.units)),n.bs(A,(t=>{A.Ii(t)}),{animationEnabled:!0}),n.bs(I,(t=>{I.Ii(t)}),{animationEnabled:!0});const H=t.component&&Rt(t.component)?t.component:void 0;H&&a(H,"highlightchange",(t=>{const i=t.highlight;A.Ii(i),I.Ii(i),e.pi.Bs()})),[A,I].forEach((i=>{i&&(a(i,"pointerenter",(()=>{!1!==t.options.highlight&&(H&&H.setHighlight(!0),A.Ii(1),I.Ii(1))})),a(i,"pointerleave",(()=>{H&&H.setHighlight(!1),A.Ii(0),I.Ii(0)})))})),[A,I,Y].forEach((i=>{i&&(a(i,"pointerenter",(()=>{e.engine.setMouseStyle(exports.MouseStyles.Point)})),a(i,"pointerleave",(()=>{e.engine.clearMouseStyle()})),t.options.events&&Object.entries(t.options.events).forEach((([s,e])=>{a(i,s,(i=>e(i,{entry:t,allEntries:j})))})),a(i,"click",(()=>{r.zs(),e.pi.Bs()})))}));const W=A.setVisible(!0).Nh().bc();let X={length:0,thickness:0};if(Y){const t=Y.Nh().getSize();X=P?{length:t.y,thickness:t.x}:{length:t.x,thickness:t.y}}const Z=P?{width:(C?R+C:0)+Math.max(W.x,X.thickness),height:Math.max(C,W.y)+X.length}:{width:(C?R+C:0)+W.x+X.length,height:Math.max(C,W.y,X.thickness)};return V=Math.max(Z.width,V),N=Math.max(Z.height,N),(P?G+Z.height<F.y-D:G+Z.width<F.x-E)?($=P?Math.max(Z.width,$):Math.max(Z.height,$),G+=P?Z.height:Z.width,h===j.length-1&&U.push(P?{width:$,height:0===U.length?G:F.y-D}:{width:0===U.length?G:F.x-E,height:$})):(U.push(P?{width:$,height:F.y-D}:{width:F.x-E,height:$}),G=P?Z.height:Z.width,h===j.length-1&&U.push(P?{width:Z.width,height:F.y-D}:{width:F.x-E,height:Z.height}),$=P?Z.width:Z.height),{text:c?A:void 0,button:c&&0!==C?I:void 0,buttonSize:C,lut:Y}}));return{entries:H,sectionSizes:U,legendTitle:Y,isVertical:P,availableChartSize:F,horizontalLegendPadding:E,verticalLegendPadding:D,marginInner:M,totalMarginOuter:C,maxEntryWidth:V,maxEntryHeight:N,chartSize:T,legendSpace:{left:0,right:0,top:0,bottom:0},origin:I,legendPadding:B,entryMarginValue:R,shapeProviderText:p,shapeProviderMarker:b}};return{update:t=>{if(!t.visible||t.renderOnTop)return Xi;const i=k(t);h=i;const{entries:s,sectionSizes:e,isVertical:r,availableChartSize:n,horizontalLegendPadding:o,verticalLegendPadding:a,marginInner:l,totalMarginOuter:u,maxEntryWidth:c,maxEntryHeight:d,legendSpace:f,shapeProviderText:A,shapeProviderMarker:g}=i;if(A.finishPlot(),g.finishPlot(),0===s.length&&0===e.length)return Xi;const p=Da(r,e,o,a,n);if(t.autoHideThreshold&&Ba(t.autoHideThreshold,p,n,r,c,d))return Xi;const v={...f},y=t.chartPadding,m=Math.max(0,u.left-y.left),x=Math.max(0,u.right-y.right),S=Math.max(0,u.top-y.top),b=Math.max(0,u.bottom-y.bottom);switch(t.position){case exports.LegendPosition.RightTop:case exports.LegendPosition.RightCenter:case exports.LegendPosition.RightBottom:v.right=p.width+l+x;break;case exports.LegendPosition.LeftTop:case exports.LegendPosition.LeftCenter:case exports.LegendPosition.LeftBottom:v.left=p.width+l+m;break;case exports.LegendPosition.TopLeft:case exports.LegendPosition.TopCenter:case exports.LegendPosition.TopRight:v.top=p.height+l+S;break;case exports.LegendPosition.BottomLeft:case exports.LegendPosition.BottomCenter:case exports.LegendPosition.BottomRight:v.bottom=p.height+l+b}return v},plot:t=>{var i;if(!t.visible)return void _();const s=h||k(t);h=void 0;const{entries:e,sectionSizes:r,legendTitle:n,isVertical:o,availableChartSize:a,horizontalLegendPadding:l,verticalLegendPadding:u,chartSize:v,maxEntryWidth:y,maxEntryHeight:m,origin:x,legendPadding:S,entryMarginValue:w,shapeProviderText:C,shapeProviderMarker:T,totalMarginOuter:F}=s;if(c=f.Nn(),d=A.Nn(),0===e.length&&0===r.length)return _(),C.finishPlot(),void T.finishPlot();const I=Da(o,r,l,u,a);if(t.autoHideThreshold&&Ba(t.autoHideThreshold,I,a,o,y,m))return _(),C.finishPlot(),void T.finishPlot();const L=(x.x+1)*I.width/2,P=(x.y+1)*I.height/2;c.forEach((t=>t.setVisible(!0))),d.forEach((t=>t.setVisible(!0)));const B=t.chartTitleSpace;let D={leftBottom:{x:0,y:0},leftTop:{x:0,y:0},rightTop:{x:0,y:0},rightBottom:{x:0,y:0}};switch(t.position){case exports.LegendPosition.RightTop:case exports.LegendPosition.RightCenter:case exports.LegendPosition.RightBottom:D={leftBottom:{x:v.x-I.width-F.right,y:0+F.bottom},leftTop:{x:v.x-I.width-F.right,y:v.y-F.top},rightTop:{x:v.x-F.right,y:v.y-F.top},rightBottom:{x:v.x-F.right,y:0+F.bottom}};break;case exports.LegendPosition.LeftTop:case exports.LegendPosition.LeftCenter:case exports.LegendPosition.LeftBottom:D={leftBottom:{x:0+F.left,y:0+F.bottom},leftTop:{x:0+F.left,y:v.y-F.top},rightTop:{x:I.width+F.left,y:v.y-F.top},rightBottom:{x:I.width+F.left,y:0+F.bottom}};break;case exports.LegendPosition.TopLeft:case exports.LegendPosition.TopCenter:case exports.LegendPosition.TopRight:D={leftBottom:{x:0+F.left,y:v.y-I.height-F.top-B.top},leftTop:{x:0+F.left,y:v.y-F.top-B.top},rightTop:{x:v.x-F.right,y:v.y-F.top-B.top},rightBottom:{x:v.x-F.right,y:v.y-I.height-F.top-B.top}};break;case exports.LegendPosition.BottomLeft:case exports.LegendPosition.BottomCenter:case exports.LegendPosition.BottomRight:D={leftBottom:{x:0+F.left,y:0+F.bottom+B.bottom},leftTop:{x:0+F.left,y:I.height+F.bottom+B.bottom},rightTop:{x:v.x-F.right,y:I.height+F.bottom+B.bottom},rightBottom:{x:v.x-F.right,y:0+F.bottom+B.bottom}};break;default:D={leftBottom:{x:t.position.x-L,y:t.position.y-P},leftTop:{x:t.position.x-L,y:t.position.y-P+I.height},rightTop:{x:t.position.x-L+I.width,y:t.position.y-P+I.height},rightBottom:{x:t.position.x-L+I.width,y:t.position.y-P}}}if(t.backgroundVisible){let i={x:0,y:0};const s=I.width,e=I.height;switch(t.position){case exports.LegendPosition.RightTop:i={x:v.x-I.width-F.right,y:v.y-I.height-F.top};break;case exports.LegendPosition.RightCenter:i={x:v.x-I.width-F.right,y:v.y/2-I.height/2-F.top/2+F.bottom/2};break;case exports.LegendPosition.RightBottom:i={x:v.x-I.width-F.right,y:0+F.bottom};break;case exports.LegendPosition.LeftTop:i={x:0+F.left,y:v.y-I.height-F.top};break;case exports.LegendPosition.LeftCenter:i={x:0+F.left,y:v.y/2-I.height/2-F.top/2+F.bottom/2};break;case exports.LegendPosition.LeftBottom:i={x:0+F.left,y:0+F.bottom};break;case exports.LegendPosition.TopLeft:i={x:0+F.left,y:v.y-I.height-F.top-B.top};break;case exports.LegendPosition.TopCenter:i={x:v.x/2-I.width/2+F.left/2-F.right/2,y:v.y-I.height-F.top-B.top};break;case exports.LegendPosition.TopRight:i={x:v.x-I.width-F.right,y:v.y-I.height-F.top-B.top};break;case exports.LegendPosition.BottomLeft:i={x:0+F.left,y:0+F.bottom+B.bottom};break;case exports.LegendPosition.BottomCenter:i={x:v.x/2-I.width/2+F.left/2-F.right/2,y:0+F.bottom+B.bottom};break;case exports.LegendPosition.BottomRight:i={x:v.x-I.width-F.right,y:0+F.bottom+B.bottom};break;default:i={x:t.position.x-L,y:t.position.y-P}}p.Md(i.x,i.y,i.x+s,i.y+e)}t.backgroundEvents.zi(g),g.setVisible(null===(i=t.backgroundVisible)||void 0===i||i),g.qe(void 0!==t.backgroundFillStyle?t.backgroundFillStyle:b),g.Ke(void 0!==t.backgroundStrokeStyle?t.backgroundStrokeStyle:M);let E={x:0,y:0};switch(t.position){case exports.LegendPosition.LeftTop:case exports.LegendPosition.RightTop:E={x:D.leftTop.x,y:D.leftTop.y};break;case exports.LegendPosition.LeftCenter:case exports.LegendPosition.RightCenter:E={x:D.leftBottom.x,y:D.leftBottom.y+(D.leftTop.y-D.leftBottom.y)/2+I.height/2};break;case exports.LegendPosition.LeftBottom:case exports.LegendPosition.RightBottom:E={x:D.leftBottom.x,y:D.leftBottom.y+I.height};break;case exports.LegendPosition.TopLeft:case exports.LegendPosition.BottomLeft:E={x:D.leftTop.x,y:D.leftTop.y};break;case exports.LegendPosition.TopCenter:case exports.LegendPosition.BottomCenter:E={x:D.leftBottom.x+(D.rightBottom.x-D.leftBottom.x)/2-I.width/2,y:D.leftTop.y};break;case exports.LegendPosition.TopRight:case exports.LegendPosition.BottomRight:E={x:D.rightTop.x-I.width,y:D.leftTop.y};break;default:E={x:D.leftTop.x,y:D.leftTop.y}}E={x:E.x+S.left,y:E.y-S.top};const R={...E};let O=0,z=0;const V=[];let N=[];if(n){const t=n.bc();n.sr({...E,y:E.y-t.y/2}),z+=o?t.y:t.x+w,E=o?{...E,y:E.y-t.y}:{...E,x:E.x+t.x+w}}e.forEach((t=>{const i=t.text?t.text.bc():{x:0,y:0},s=t.button?t.buttonSize:0,e=t.lut||void 0,h=Ea(i,s,o,w,t.lut);z+h>=(o?r[O].height:r[O].width)&&r.length-1>O&&(V.push(N),N=[],O+=1,z=0),N.push({entry:t,textSize:i,buttonSize:s,lut:e,entryLength:h}),z+=h})),N.length>0&&V.push(N);const G=V.map(((t,i)=>{const s=t.reduce(((t,i)=>t+i.entryLength),0);if(0===i&&n){const t=n.bc();return s+(o?t.y:t.x+w)}return s}));V.forEach(((i,s)=>{let e;const h=G[s],a=V.length>1;if(0===s)if(a)if(o){const t=r[s].height-h;e={x:R.x,y:R.y-t/2}}else{const t=r[s].width-h;e={x:R.x+t/2,y:R.y}}else e={...R};else if(o){const i=r.slice(0,s).reduce(((t,i)=>t+i.width),0),n=r[s].height;let o;if(a){const i=n-h;let s;switch(t.position){case exports.LegendPosition.LeftTop:case exports.LegendPosition.RightTop:s=D.leftTop.y-S.top;break;case exports.LegendPosition.LeftCenter:case exports.LegendPosition.RightCenter:s=D.leftBottom.y+(D.leftTop.y-D.leftBottom.y)/2+n/2;break;case exports.LegendPosition.LeftBottom:case exports.LegendPosition.RightBottom:s=D.leftBottom.y+n+S.bottom;break;default:s=R.y}o=s-i/2}else o=R.y;e={x:R.x+i,y:o}}else{const i=r.slice(0,s).reduce(((t,i)=>t+i.height),0),n=r[s].width;let o;if(a){const i=n-h;let s;switch(t.position){case exports.LegendPosition.TopLeft:case exports.LegendPosition.BottomLeft:s=D.leftTop.x+S.left;break;case exports.LegendPosition.TopCenter:case exports.LegendPosition.BottomCenter:s=D.leftBottom.x+(D.rightBottom.x-D.leftBottom.x)/2-n/2;break;case exports.LegendPosition.TopRight:case exports.LegendPosition.BottomRight:s=D.rightTop.x-n-S.right;break;default:s=R.x}o=s+i/2}else o=R.x;e={x:o,y:R.y-i}}if(0===s&&n){const t=n.bc();o?(n.sr({x:e.x,y:e.y-t.y/2}),e={...e,y:e.y-t.y}):(n.sr({x:e.x,y:e.y-t.y/2}),e={...e,x:e.x+t.x+w})}let l={...e};i.forEach((t=>{Ra(l,t.entry.button,t.entry.text,t.lut,t.textSize,t.buttonSize,o,w),l=o?{...l,y:l.y-t.entryLength}:{...l,x:l.x+t.entryLength}}))})),C.finishPlot(),T.finishPlot()},dispose:()=>{l(),f.UA(),A.UA(),g.dispose(),u.forEach((t=>t.dispose()))}}},Ba=(t,i,s,e,r,h)=>(e?Math.ceil(i.width)>=Math.ceil(s.x*t):Math.ceil(i.height)>=Math.ceil(s.y*t))||r>s.x||h>s.y,Da=(t,i,s,e,r)=>t?{width:i.reduce(((t,i)=>t+i.width),0)+s,height:i.length>1?r.y:i[0].height+e}:{width:i.length>1?r.x:i[0].width+s,height:i.reduce(((t,i)=>t+i.height),0)+e},Ea=(t,i,s,e=0,r)=>{if(r){const h=r.Nh().getSize(),n=s?{length:h.y,thickness:h.x}:{length:h.x,thickness:h.y};return s?Math.max(i,t.y)+n.length:(i?e+i:0)+t.x+n.length}return s?Math.max(i,t.y):(i?e+i:0)+t.x},Ra=(t,i,s,e,r,h,n,o=0)=>{let a,l;if(r.y>h?(a={x:t.x+(h?o:0),y:t.y-r.y/2},l={x:a.x+h,y:t.y-r.y/2}):(a={x:t.x+(h?o:0),y:t.y-h/2},l={x:a.x+h,y:t.y-h/2}),i&&i.Ed(new $n({schema:{x:{},y:{}}}).appendSample(a),{x:"x",y:"y"}),s&&s.sr(l),e){const i=e.Nh().getSize(),s=n?{length:i.y,thickness:i.x}:{length:i.x,thickness:i.y},o=n?{x:l.x+s.thickness/2,y:t.y-Math.max(h,r.y)-s.length/2}:{x:l.x+r.x+s.length/2,y:t.y-s.thickness/2};e.setPosition(o),e.ir()}},Oa=t=>"Ys"in t;var za,Va;exports.LegendPosition=void 0,(za=exports.LegendPosition||(exports.LegendPosition={}))[za.RightTop=0]="RightTop",za[za.RightCenter=1]="RightCenter",za[za.RightBottom=2]="RightBottom",za[za.LeftTop=3]="LeftTop",za[za.LeftCenter=4]="LeftCenter",za[za.LeftBottom=5]="LeftBottom",za[za.TopLeft=6]="TopLeft",za[za.TopCenter=7]="TopCenter",za[za.TopRight=8]="TopRight",za[za.BottomLeft=9]="BottomLeft",za[za.BottomCenter=10]="BottomCenter",za[za.BottomRight=11]="BottomRight",exports.LegendOrientation=void 0,(Va=exports.LegendOrientation||(exports.LegendOrientation={}))[Va.Horizontal=0]="Horizontal",Va[Va.Vertical=1]="Vertical";const Na={toggleIndividualVisibility:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;const s=i.entry.component.getVisible();i.entry.component.setVisible(!s)},focusClicked:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;let s=!1;i.allEntries.forEach((t=>{t.component&&t.component.getVisible&&t.component.getVisible()&&t!==i.entry&&(s=!0)})),i.allEntries.forEach((t=>{t.component&&t.component.setVisible&&t.component.setVisible(!s)})),i.entry.component.setVisible(!0)},doNothing:()=>{}};class Ga{constructor(t,i,s,e,r,h){var n;this.jA=[],this.HA=!0,this.Ln=exports.LegendPosition.BottomCenter,this.Yr=void 0,this.WA=!1,this.XA=!1,this.ZA=!0,this.JA=!1,this.QA={left:0,right:0,top:0,bottom:0},this.ci=!1,this.KA=5,this.qA={x:0,y:0},this.tg=!0,this.ig=.5,this.sg=[],this.eg=!1,this.title=new yt,this.background=new yt,this.rg=i,this.hg=null!==(n=i.getTheme().panelPadding)&&void 0!==n?n:7,this.ng={events:{click:Na.toggleIndividualVisibility}},t!==Pa&&(this.WA=!0);const o=this.WA?{panel:i}:{panel:i,layer:s,scale:e,legend:this};this.og=t(o),r&&(this.jA=r),h&&this.setOptions(h),this.rg.pi.Bs();const a=()=>{Nt.setTimeout((()=>{this.zs(),this.rg.pi.Bs()}),0)};Nt.setTimeout((()=>{this.ci||this.rg.addEventListener("resize",a)}),0),this.ag=()=>{this.rg.removeEventListener("resize",a)}}lg(t,i){const s=t&&"number"==typeof t?{...Xi,top:t}:t&&"number"!=typeof t?t:Xi;let e={visible:this.jA.length>0&&this.HA,chartTitleSpace:s,marginOuter:this.QA,chartPadding:i,titleEvents:this.title,backgroundEvents:this.background,position:this.Ln,orientation:this.ug,padding:this.Gn?this.Gn:this.XA?{left:5,right:5,top:5,bottom:5}:Xi,entryMargin:this.KA,marginInner:this.hg,renderOnTop:this.JA,title:this.Yr,titleFont:this.cg,titleFillStyle:this.dg,backgroundVisible:this.XA,backgroundFillStyle:this.Ag,backgroundStrokeStyle:this.gg,autoHideThreshold:this.ig,entries:this.jA};if(this.WA){const t=this.rg.getTheme().uiTextFillStyle,i=this.rg.getTheme().uiButtonFillStyle,s=this.rg.getTheme().uiTextFont,r=this.jA.map((e=>{var r,h,n,o,a;return{component:e.component,options:{...e.options,show:null===(r=e.options.show)||void 0===r||r,text:null!==(h=e.options.text)&&void 0!==h?h:e.component&&e.component.getName?e.component.getName():"",textFont:e.options.textFont?e.options.textFont:s,textFillStyle:e.options.textFillStyle?e.options.textFillStyle:t,buttonSize:null!==(n=e.options.buttonSize)&&void 0!==n?n:10,buttonShape:null!==(o=e.options.buttonShape)&&void 0!==o?o:exports.PointShape.Circle,buttonRotation:null!==(a=e.options.buttonRotation)&&void 0!==a?a:0,buttonFillStyle:e.component&&e.component.er?Li(this.rg.getTheme(),e.options.matchStyleExactly||!1,e.component.er()):i,events:{click:Na.toggleIndividualVisibility,...e.options.events}}}}));e={...e,entries:r}}return e}pg(){let t=!1;const i=this.rg.getSizePixels(),s=this.rg.getMinimumSize(),e=void 0===s||i.x>s.x&&i.y>s.y;return i.x===this.qA.x&&i.y===this.qA.y&&e||(t=!0),this.qA=i,t}vg(){const t=this.jA.map((t=>({entryText:t.component&&t.component.getName?t.component.getName():void 0,buttonShape:t.component&&t.component.js?t.component.js():void 0,legendStyle:t.component&&t.component.er?t.component.er():void 0})));if(this.sg.length!==t.length)return this.sg=t,!0;const i=t.some(((t,i)=>{var s,e,r,h;const n=this.sg[i];if(t.entryText!==n.entryText)return!0;if(t.buttonShape!==n.buttonShape)return!0;if(t.legendStyle&&n.legendStyle){if(t.legendStyle.fill!==n.legendStyle.fill)return!0;if(t.legendStyle.fill2!==n.legendStyle.fill2)return!0;if(t.legendStyle.stroke!==n.legendStyle.stroke)return!0;if(t.legendStyle.point3D!==n.legendStyle.point3D)return!0;if((null===(s=t.legendStyle.behavior)||void 0===s?void 0:s.colorStep)!==(null===(e=n.legendStyle.behavior)||void 0===e?void 0:e.colorStep))return!0;if((null===(r=t.legendStyle.behavior)||void 0===r?void 0:r.priority)!==(null===(h=n.legendStyle.behavior)||void 0===h?void 0:h.priority))return!0;if(t.legendStyle.lutValue!==n.legendStyle.lutValue)return!0}}));return this.sg=t,i}yg(){this.eg||this.Ln===exports.LegendPosition.RightCenter||this.jA.some((t=>{var i;return!!(t.component&&t.component.Ys&&(null===(i=t.component.Ys())||void 0===i?void 0:i.lut)||re(t.component)||t.options.lut)}))&&(this.Ln=exports.LegendPosition.RightCenter,this.tg=!0)}Nh(t,i){var s;if(this.ci)return Xi;if((this.pg()||this.vg())&&(this.tg=!0),this.yg(),!this.tg&&!this.WA)return null!==(s=this.mg)&&void 0!==s?s:Xi;const e=this.lg(t,i),r=this.og.update(e);return this.mg=r||Xi,this.mg}ir(t,i){if(!this.ci&&this.tg){const s=this.lg(t,i);this.og.plot(s),this.tg=!1}}bu(t,i){if(void 0===t||!this.jA.some((i=>i.component===t))){if(this.jA.push({component:t,options:{...this.ng,...i}}),t instanceof De){const i=()=>{this.zs(),this.rg.pi.Bs()},s=()=>{t.removeEventListener("dispose",s),t.removeEventListener("visiblechange",i),this.remove(t),this.rg.pi.Bs()};t.addEventListener("visiblechange",i),t.addEventListener("dispose",s)}return this.tg=!0,this}}xg(){return this.ZA}zs(){return this.tg=!0,this}Sg(t){const i=(t=Array.isArray(t)?t:[t]).map((t=>Oa(t)?this.jA.find((i=>i.component===t)):this.jA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Ys)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Ys())||void 0===r?void 0:r.lut)===t})))).filter((t=>void 0!==t)),s=this.jA.filter((t=>!i.includes(t)));return this.jA=[...i,...s],this.tg=!0,this.rg.pi.Bs(),this}add(t,i){return void 0===t&&void 0===i||(t instanceof ja?t.bg().forEach((t=>this.bu(t,i))):t&&!Oa(t)?this.bu({Ys:()=>({lut:t})},i):this.bu(t,i),this.tg=!0,this.rg.pi.Bs()),this}remove(t){const i=this.jA.find((i=>i.component===t));if(i){const t=this.jA.indexOf(i);this.jA.splice(t,1)}return this.tg=!0,this.rg.pi.Bs(),this}clear(){return this.jA=[],this.tg=!0,this.rg.pi.Bs(),this}dispose(){return this.ci||(this.ci=!0,this.ag(),this.og.dispose&&this.og.dispose(),this.tg=!0,this.rg.pi.Bs()),this}setOptions(t){var i,s,e,r,h,n,o,a;return void 0!==t.addEntriesAutomatically&&(this.ZA=t.addEntriesAutomatically),void 0!==t.position&&(this.Ln=t.position,this.eg=!0),void 0!==t.orientation&&(this.ug=t.orientation),void 0!==t.padding&&("number"==typeof t.padding?this.Gn={left:t.padding,right:t.padding,top:t.padding,bottom:t.padding}:this.Gn={left:null!==(i=t.padding.left)&&void 0!==i?i:0,right:null!==(s=t.padding.right)&&void 0!==s?s:0,top:null!==(e=t.padding.top)&&void 0!==e?e:0,bottom:null!==(r=t.padding.bottom)&&void 0!==r?r:0}),void 0!==t.marginOuter&&("number"==typeof t.marginOuter?this.QA={left:t.marginOuter,right:t.marginOuter,top:t.marginOuter,bottom:t.marginOuter}:this.QA={left:null!==(h=t.marginOuter.left)&&void 0!==h?h:0,right:null!==(n=t.marginOuter.right)&&void 0!==n?n:0,top:null!==(o=t.marginOuter.top)&&void 0!==o?o:0,bottom:null!==(a=t.marginOuter.bottom)&&void 0!==a?a:0}),void 0!==t.entryMargin&&(this.KA=t.entryMargin),void 0!==t.marginInner&&(this.hg=t.marginInner),void 0!==t.renderOnTop&&(this.JA=t.renderOnTop),void 0!==t.title&&(this.Yr=t.title),void 0!==t.titleFont&&(this.cg=t.titleFont),void 0!==t.titleFillStyle&&(this.dg=t.titleFillStyle),void 0!==t.visible&&(this.HA=t.visible),void 0!==t.backgroundVisible&&(this.XA=t.backgroundVisible),void 0!==t.backgroundFillStyle&&(this.Ag=t.backgroundFillStyle),void 0!==t.backgroundStrokeStyle&&(this.gg=t.backgroundStrokeStyle),void 0!==t.autoHideThreshold&&(this.ig=t.autoHideThreshold),void 0!==t.entries&&(this.ng={...this.ng,...t.entries},this.jA.forEach((t=>{t.options={...this.ng,...t.options}}))),this.tg=!0,this.rg.pi.Bs(),this}getOptions(){return{addEntriesAutomatically:this.ZA,position:this.Ln,orientation:this.ug,padding:this.Gn,marginOuter:this.QA,entryMargin:this.KA,marginInner:this.hg,renderOnTop:this.JA,title:this.Yr,titleFont:new L(this.cg),titleFillStyle:this.dg,visible:this.HA,backgroundVisible:this.XA,backgroundFillStyle:this.Ag,backgroundStrokeStyle:this.gg,autoHideThreshold:this.ig,entries:this.ng}}setEntryOptions(t,i){const s=Oa(t)?this.jA.find((i=>i.component===t)):this.jA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Ys)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Ys())||void 0===r?void 0:r.lut)===t}));return s&&(s.options={...s.options,...i}),this.tg=!0,this.rg.pi.Bs(),this}getEntryOptions(t){const i=Oa(t)?this.jA.find((i=>i.component===t)):this.jA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Ys)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Ys())||void 0===r?void 0:r.lut)===t}));if(i)return i.options}getEntries(){return this.jA}}class $a{constructor(t,i,s,e,r,h,n,o,l){this.coordsRelative="relative",this.coordsClient="client",this.Mg=[],this.Os=[],this.wg=void 0,this._g=void 0,this.kg=void 0,this.ot=p(0,0,0,0),this.Cg=!1,this.ci=!1,this.Tg=()=>{this.Fg=!0,this.Ig.Bs()},this.Lg=t=>i=>{const s=this.Mg.indexOf(i);-1!==s&&this.Mg.splice(s,1),this.pi.Bs(),t.G()},this.Fg=!0,this.background=new yt,this.Pg=t,this.Bg=s,this.Ig=e,this.removePanel=r,this.bi=i.pi.bi;const u=i.pi.kt();this.uiScale=s.d2({scaleXYConstructor:Z}).ii(0,100).si(0,100).Z(u),this.eA=s.d2({scaleXYConstructor:Z}).ii(0,this.uiScale.x.getCellSize()).si(0,this.uiScale.y.getCellSize()).Z(u),this.engine=i.pi.Dg,this.pi=i.pi.Mc,this.vs=this.pi.vs.ys(this,{}),this.Eg=()=>i.Rg("unidentified ui"),this.Og=i.zg(),this.Vg=this.Ig.tr(this.uiScale).sr(a(0,0)).Z(a(100,100)).qe(h).Ke(n),this.background.zi(this.Vg),o?(o.addEventListener("resize",this.Tg),this.Ng=()=>o.removeEventListener("resize",this.Tg)):(i.pi.O("resize",this.Tg),this.Gg=()=>i.pi.N("resize",this.Tg));const c=t=>{this.Cg=t.isInView,this.D.R("inviewchanged",{isInView:this.Cg})};i.pi.O("inviewchanged",c),this.$g=()=>i.pi.N("inviewchanged",c),this.wg=r,this.legend=new Ga(null!=l?l:Pa,this,this.Og,this.eA),this.Os=[this.legend]}getTheme(){return this.bi}getSizePixels(){return this.eA.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Vg.qe(t),this.Ig.Bs(),this}getBackgroundFillStyle(){return this.Vg.Mh()}setBackgroundStrokeStyle(t){return this.Vg.Ke(t),this.Ig.Bs(),this}getBackgroundStrokeStyle(){return this.Vg.Ja()}translateCoordinate(t,i,s){return Ia(t,i,s,this.eA,this.pi)}Ug(t){return this.Mg.push(t),this.pi.Bs(),t}addUIElement(t=bo,i=this.uiScale){i=Fa(i,this.eA);const s=this.Eg();return this.Ug(Ta(t,s,this.uiScale,i,this.Lg(s),this.bi))}dispose(){return this.ci||(this.ci=!0,this.Gg&&this.Gg(),this.Ng&&this.Ng(),Ua(this.uiScale),Ua(this.eA),this.$g&&this.$g(),this._g&&this._g(),this.Ig.G(),this.Og.G(),this.Mg.slice().forEach((t=>{t.dispose()})),this.Os.forEach((t=>t.dispose())),this.pi.Bs(),this.wg&&this.wg(this),this.D.R("dispose",{})),this}isDisposed(){return this.ci}saveToFile(t,i,s,e){return Ca(this.engine,t,i,s,e),this}Mn(t){this.ot=t,this.Tg()}j(){return this.eA.j(),this.uiScale.j(),this}H(){return this.eA.H(),this.uiScale.H(),this}ir(t){if(this.Fg){const t=this.Ig.pi.kt(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.eA.Z(i,s);const e=[this.ot.left,this.ot.right],r=[this.ot.bottom,this.ot.top];this.uiScale.qt(e),this.uiScale.ti(r);const h=this.uiScale.getInnerIntervalPixels();this.eA.ii(0,h.x).qt(e).si(0,h.y).ti(r),this.D.R("resize",{width:h.x,height:h.y,engineHeight:s,engineWidth:i})}this.Fg=!1}Yg(){for(let t=0;t<this.Mg.length;t+=1)this.Mg[t].Nh().ir();this.kg&&this.kg()}jg(t,i){if(t){const s=t(i);this.addEventListener("resize",s.Nh.bind(s)),this._g=s.G.bind(s),this.kg=s.Nh.bind(s)}}getIsInView(){return this.Cg}}const Ua=t=>{t.xt&&t.xt()};class Ya extends $a{constructor(t,i,s,e,r,h,n){super(t,i,s,i.Hg("uipanel bg",0),e,i.pi.bi.uiPanelBackgroundFillStyle,i.pi.bi.uiPanelBackgroundStrokeStyle,h),this.D=new yt,this.legend.setOptions({position:exports.LegendPosition.LeftTop,...n}),this.jg(r,this.eA)}setMinimumSize(t){return this.Jd=t,this.pi.Bs(),this}getMinimumSize(){return this.Jd}ir(t){this.Os.forEach((t=>t.Nh(0,Xi))),super.ir(t),super.Yg(),this.Os.forEach((t=>t.ir(0,Xi)))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ja extends $a{constructor(t,i,s,e,r,h,n,o,l,u,c,d){super(t,i,s,e,r,h,n,c,d),this.Wg={},this.Er=!0,this.Xg={left:!1,top:!1,right:!1,bottom:!1},this.title=new yt,this.Zg=i.Jg("chart internal ui",0),this.Gn=void 0!==this.bi.panelPadding?{left:this.bi.panelPadding,right:this.bi.panelPadding,top:this.bi.panelPadding,bottom:this.bi.panelPadding}:{left:7,right:7,top:7,bottom:7},this.Yr=this.Zg._n(this.uiScale).tn("Chart").sr(a(50,100)).Zl(a(0,1)).Ch(o).qe(l).setPointerEvents(!1).qh(u),this.Yr.Zr=exports.TextObjectIdentifier.ChartTitle,this.title.zi(this.Yr),this.Qg=this.vs.aA([this.Yr]).Ps(this.bi.effectsText)}addLegend(t){var i;let s;(t={addEntriesAutomatically:!1,backgroundVisible:!0,...t}).addEntriesAutomatically&&this.legend&&(s=this.legend.getEntries());const e=null!==(i=t.customLegend)&&void 0!==i?i:Pa,r=new Ga(e,this,this.Og,this.eA,s,t);return this.Os.push(r),this.pi.Bs(),r}setAnimationsEnabled(t){return this.Er=t,this}getAnimationsEnabled(){return this.Er}setTitle(t){return this.Yr.tn(t),this.pi.Bs(),this}getTitle(){return this.Yr.rn()}getTitleSize(){return this.Yr.Nh().bc()}setTitleFillStyle(t){return this.Yr.qe(t),this.Tg(),this}getTitleFillStyle(){return this.Yr.Mh()}setTitleShadow(t){return this.Yr.qh(t),this.pi.Bs(),this}getTitleShadow(){return this.Yr.Gl()}setTitleFont(t){return this.Yr.Ch(t),this.Tg(),this}getTitleFont(){return this.Yr.kh()}setTitleRotation(t){return this.Yr.Th(t),this.pi.Bs(),this}getTitleRotation(){return this.Yr.Fh()}setTitleEffect(t){return this.Qg.Ps(t),this.pi.Bs(),this}getTitleEffect(){return this.Qg.Ds()}setTitleMargin(t){var i,s;return this.Wg="object"==typeof t?this.Wg?(i=this.Wg,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Tg(),this}getTitleMargin(){return this.Wg}wn(t,i){const s="object"==typeof t?y(this.Gn,t):{left:t,top:t,right:t,bottom:t};return s.bottom===this.Gn.bottom&&s.left===this.Gn.left&&s.right===this.Gn.right&&s.top===this.Gn.top||(Object.entries(t).forEach((t=>{const s=t[0],e=t[1];void 0===e||!i&&this.Xg[s]||(this.Gn[s]=e,this.Xg[s]=i)})),this.Tg()),this}setPadding(t){return this.wn("object"==typeof t?t:{left:t,top:t,right:t,bottom:t},!0),this}getPadding(){return this.Gn}Kg(t){const i=t.qg(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Zg.G(),this}}const Ha={tp(t,i){var s,e;return t.Mh()!==ae&&0!==t.rn().length&&t.getVisible()?t.Nh().bc().y+(null!==(s=i.bottom)&&void 0!==s?s:10)+(null!==(e=i.top)&&void 0!==e?e:10):0},ip(t,i,s,e,r){var h;const n=r&&r.left?r.left:0,o=r&&r.right?r.right:0,a={x:50,y:100-s.y*(e.top+(null!==(h=i.top)&&void 0!==h?h:10))};t.sr(a).Zl({x:0,y:1}).Mn({top:0,bottom:0,right:e.right+(i.right||0)+o,left:e.left+(i.left||0)+n})}};class Wa extends De{constructor(t,i,s,e,r){super(t,i,e,r),this.sp=Je,this.ep=!0,this.rp=!0,this.hp=!0,this.chart=t,this.np=s,this.gs=new Map,this.axisX=t.axisX,this.axisY=t.axisY,this.axisZ=t.axisZ}Qi(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.eA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.ep=t,this}getCursorEnabled(){return this.ep}setCursorFormattingOverride(t){return this.op=t,this}getCursorFormattingOverride(){return this.op}ap(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.rp=t,this.chart.pi.Bs(),this}getAutoScrollingEnabled(){return this.rp}setColorShadingStyle(t){return this.sp=t,this.gs.forEach(((i,s)=>s.lp(t))),this.np.Bs(),this}getColorShadingStyle(){return this.sp}setDepthTestEnabled(t){return this.hp=t,this.gs.forEach(((i,s)=>s.up(t))),this.np.Bs(),this}getDepthTestEnabled(){return this.hp}cp(){}ir(){}dp(){}getXMax(){const t=this.Cc;return t?t.Wi():0}getXMin(){const t=this.Cc;return t?t.Hi():0}getYMax(){const t=this.Cc;return t?t.Zi():0}getYMin(){const t=this.Cc;return t?t.Xi():0}getZMax(){const t=this.Cc;return t?t.ye():0}getZMin(){const t=this.Cc;return t?t.ve():0}gn(){const t=this.Cc;return t?c(t.uu(),t.cu(),t.fp()):c(0,0,0)}}class Xa extends Wa{constructor(t,i,s,e,r,h){super(t,i,s,e,h),this.Rs="Box Series 3D",this.Ap=.25,this.gp=!1,this.D=new yt,this.Ze=Ei(this.bi.boxSeries3DFillStyle,r),this.Cc=this.np.vp().up(this.hp).qe(this.Ze).pp(this.Ap).Ii(this.getHighlight()),this._s(this.Cc)}yp(){return this.gp}invalidateData(t){const i=t.length;if(0===i)return this;this.gp&&this.chart.pi.La(jh.Ro);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],r="xMin"in i&&"xMax"in i,h="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:r?(i.xMin+i.xMax)/2:void 0,yCenter:h?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:r?i.xMax-i.xMin:void 0,ySize:h?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Cc.mp(e.slice()),this.chart.pi.Bs(),this.gp=!0,this}clear(){return this.Cc.Vi(),this.gp=!1,this.chart.pi.Bs(),this}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Cc.qe(t),this.chart.pi.Bs(),this}getFillStyle(){return this.Ze}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Ap=void 0!==t?Wt(t,0,1):void 0,this.Cc.pp(this.Ap),this.np.Bs(),this}getRoundedEdges(){return this.Ap}xp(){return this.rp&&this.getVisible()}rr(t,i){t.Ii(i),this.chart.pi.Bs()}Ys(){return Pi(this.Ze,this.Cc._i())}ir(){super.ir(),this.Cc.Nh(!1)}er(){return{fill:this.Ze}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Za=t=>{if(lr(t)){const i=t.getThickness(),s=t.getFillStyle();if(fe(s))return 1===i?qe:new ir({size:i,fillStyle:s,shape:"sphere"})}return qe},Ja={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}};class Qa{constructor(t,i,s,e,r,h,n,o,a,l){this.M=0,this.di=!0,this.ci=!1,this.ui=!0,this.D=new yt,this.Bs=t,this.Sp=i,this.bp=s,this.Mp=e,this.wp=r,this._p=h,this.cf=n,this.kp=o,this.Cp=a,this.co=l}setValue(t){return t===this.M||(this.M=t,this.Bs(),this.D.R("valuechange",{value:this.M})),this}getValue(){return this.M}setTickStyle(t){return this.bp="function"==typeof t?t(this.bp):t,this.Bs(),this}getTickStyle(){return this.bp}setTickLength(t){return this.Mp=t,this.Bs(),this}getTickLength(){return this.Mp}setGridStrokeStyle(t){return this.wp="function"==typeof t?t(this.wp):t,this.Bs(),this}getGridStrokeStyle(){return this.wp}setTextPadding(t){return this._p=t,this.Bs(),this}getTextPadding(){return this._p}setTextRotation(t){return this.cf=t,this.Bs(),this}getTextRotation(){return this.cf}setTextFillStyle(t){return this.kp="function"==typeof t?t(this.kp):t,this.Bs(),this}getTextFillStyle(){return this.kp}setTextFont(t){return this.Cp="function"==typeof t?t(this.Cp):t,this.Bs(),this}getTextFont(){return this.Cp}setTextFormatter(t){return this.co=t,this.Bs(),this}dispose(){return this.ci||(this.ci=!0,this.Sp(),this.Bs(),this.D.R("dispose",{})),this}isDisposed(){return this.ci}setVisible(t){const i=this.di!==t;return this.di=t,i&&(this.D.R("visiblechange",{isVisible:this.di}),this.Bs()),this}getVisible(){return this.di}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.ui=t,this.Bs(),this}getPointerEvents(){return this.ui}}class Ka extends Qa{constructor(t,i,s,e,r,h,n,o,a,l,u,c,d){super(t,i,s,e,r,h,n,o,a,l),this.Ag=u,this.gg=c,this.Gn=d}setBackgroundFillStyle(t){return this.Ag="function"==typeof t?t(this.Ag):t,this.Bs(),this}getBackgroundFillStyle(){return this.Ag}setBackgroundStrokeStyle(t){return this.gg="function"==typeof t?t(this.gg):t,this.Bs(),this}getBackgroundStrokeStyle(){return this.gg}setPadding(t){return this.Gn="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Gn,...t},this.Bs(),this}getPadding(){return this.Gn}}class qa{constructor(t,i,s,e){this.Tp=[],this.Fp=new Map,this.Ip=t,this.Lp=i,this.Pp=s,this.dp=e}VA(){this.Pp&&this.Pp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.Tp.slice(),r=[];i.forEach((t=>{let i=e.shift();i||(i=this.Ip(),this.Tp.push(i));const h=[],n=i.Bp().slice();t.instances.forEach((t=>{const i=n.shift();h.push({...t,existingMember:i})}));const o=this.Lp(i,h,t.sharedProperties);s=Ti(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)r.push({xi:t.instances[s].xi,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Zd(t)}))})),e.forEach((t=>{t.dispose();const i=this.Tp.indexOf(t);i<0?Ri(0,(()=>{})):this.Tp.splice(i,1)})),r.forEach((t=>{const i=this.Fp.get(t.xi);i&&t.collection.pi.Ua({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.Fp.clear(),r.forEach((t=>{this.Fp.set(t.xi,t)})),this.dp&&this.dp(this.Tp,s)}}}UA(){this.Tp.forEach((t=>{t.dispose()})),this.Tp.length=0}}class tl extends Lh{constructor(t,i,s,e,r,h,n,o,a){super(t,i,s,e,o,{numeric:i.Dp({x:t.pi.bi.xAxis3DNumericTicks,y:t.pi.bi.yAxis3DNumericTicks,z:t.pi.bi.zAxis3DNumericTicks}),datetime:i.Dp({x:t.pi.bi.xAxis3DDateTimeTicks,y:t.pi.bi.yAxis3DDateTimeTicks,z:t.pi.bi.zAxis3DDateTimeTicks}),time:i.Dp({x:t.pi.bi.xAxis3DTimeTicks,y:t.pi.bi.yAxis3DTimeTicks,z:t.pi.bi.zAxis3DTimeTicks})},{type:"linear"}),this.Bf=[],this.D=new yt,this.chart=t,this.np=r,this.Ep=h,this.Rp=n,this.Op=this.np.ai;const l=this.oh.Dp({x:this.bi.xAxis3DStrokeStyle,y:this.bi.yAxis3DStrokeStyle,z:this.bi.zAxis3DStrokeStyle});this.zp=this.np.Np([Ja.InternalUI],void 0).cr(l).Vp(Za(l)).setPointerEvents(!1),this.Jr=this.Ep._n(this.Rp).setPointerEvents(!1).qe(i.Dp({x:t.pi.bi.xAxis3DTitleFillStyle,y:t.pi.bi.yAxis3DTitleFillStyle,z:t.pi.bi.zAxis3DTitleFillStyle})).Ch(i.Dp({x:t.pi.bi.xAxis3DTitleFont,y:t.pi.bi.yAxis3DTitleFont,z:t.pi.bi.zAxis3DTitleFont})).nl(3),this.Gp=new La((()=>this.Ep._n(this.Rp).nl(2).wn(Xi).Mn(Xi))),this.$p=new qa((()=>this.Ep.Yp(this.Rp).setPointerEvents(!1).nl(1)),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.Ho();return e.au(i),e}))))),this.jp=new qa((()=>this.np.bA().setPointerEvents(!1)),((t,i,s)=>(t.Vi().cr(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.bu(i)))))),this.vs=a,this.Ih=this.vs.aA([this.Jr]).Ps(e.effectsText),s.Jf=this}setTickStrategy(t,i){return super.fh(t,i)}getTickStrategy(){return this.Lr}addCustomTick(){const t=new Ka((()=>this.chart.pi.Bs()),(()=>{const i=this.Bf.indexOf(t);i>=0&&this.Bf.splice(i,1)}),this.bi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.bi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.bi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),ae,Tt,{left:4,right:4,top:4,bottom:4});return this.Bf.push(t),this.chart.pi.Bs(),t}getCustomTicks(){return[...this.Bf]}setStrokeStyle(t){return this.zp.cr(t).Vp(Za(this.zp.do())),this.chart.pi.Bs(),this}getStrokeStyle(){return this.zp.do()}setVisible(t){return super.setVisible(t),this.zp.setVisible(t),!1===t&&(this.jp.UA(),this.Gp.UA(),this.$p.UA()),this.np.Bs(),this}gA(){return this.chart.getSeries()}xn(t,i,s){const e=Math.abs(this.ai.J(Math.abs(i-t))*this.np.Hp(1));return{start:t+s.start*e*Math.sign(t-i),end:i+s.end*e*Math.sign(i-t)}}Yh(t){const i=this.Op,s=c(i.x.tt(),i.y.tt(),i.z.tt()),{gridlinePositionA:e,gridlinePositionB:r,gridlinePositionC:h}=this.oh.Wp(t.cameraDirection),n=t=>({x:-1===t.x?this.Op.x.getInnerStart():1===t.x?this.Op.x.getInnerEnd():0,y:-1===t.y?this.Op.y.getInnerStart():1===t.y?this.Op.y.getInnerEnd():0,z:-1===t.z?this.Op.z.getInnerStart():1===t.z?this.Op.z.getInnerEnd():0}),o=n(e),l=n(r),u=n(h),d=this.oh.ef,f=xs(t.start,t.end,.5),A=es.addVec(f,es.multiplyVec(es.multiply(d,-1),s)),g=this.np.Xp(f)||a(0,0),p=this.np.Xp(A)||a(0,0);return{center:f,wuSize:s,tickDirection3D:d,tickDirection2D:Fs(Ds(q(g,this.chart.pi.ai,this.Rp),q(p,this.chart.pi.ai,this.Rp))),gridlinePositionA:o,gridlinePositionB:l,gridlinePositionC:u}}Xh(t,i,s,e,r){return{...this.Zp(r,t,i.Fr.tickLength,i.Fr.tickPadding),keyValue:t,tickLevel:i,labelText:s,labelOffset:{x:0,y:0},labelRotation:i.Fr.labelRotation}}sn(t,i){const s=new il(i,t,this.Ep,this.Rp,this.np);return s.zh.nl(0),s}Qh(t,i,s){return{ticksInfo:i,updatedTicks:s}}Kr(){return this.Rp}Zp(t,i,s,e){const{wuSize:r,start:h,end:n,tickDirection3D:o,tickDirection2D:l}=t,u=(i-this.ai.getInnerStart())/(this.ai.getInnerEnd()-this.ai.getInnerStart()),c=es.addVec(xs(h,n,u),es.multiplyVec(es.multiply(o,this.np.Hp(.5*this.zp.do().getThickness())),r)),d=es.addVec(c,es.multiplyVec(es.multiply(o,this.np.Hp(s)),r)),f=this.np.Xp(d)||a(0,0);return{labelPosition:Bs(q(f,this.chart.pi.ai,this.Rp),Ps(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Jp(t,i,s){const{wuSize:e,start:r,end:h,tickDirection3D:n}=i,o=(t-this.ai.getInnerStart())/(this.ai.getInnerEnd()-this.ai.getInnerStart()),l=es.addVec(xs(r,h,o),es.multiplyVec(es.multiply(n,this.np.Hp(.5*this.zp.do().getThickness())),e)),u=es.addVec(l,es.multiplyVec(es.multiply(n,this.np.Hp(10)),e)),c=this.np.Xp(l)||a(0,0),d=this.np.Xp(u)||a(0,0);return this.Ep.dr(this.Rp).gr(c).Ar(d).cr(new ar({fillStyle:new de({color:w(120*s)}),thickness:1}))}vn(t,i){return sl(t,i,this.ai)}Qp(t){const i=this.Op;let s,e;this.Kp()?(s=c(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),e=c(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(s=c(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),e=this.oh.qp(c(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),s));const r=this.np.Xp(s)||a(0,0),h=this.np.Xp(e)||a(0,0);return{cameraDirection:t,physicalAxisSize:Ls(Ds(r,h)),start:s,end:e,start2D:r,end2D:h}}ir(t){if(!this.di)return;const i=Math.min(this.Ah,this.gh),s=Math.max(this.Ah,this.gh);this.zp.Vi().bu([t.start,t.end]);const e=this.jp.VA();for(const[i,s]of this.Pr)for(const[,r]of s){const s=t.ticksInfo.get(r);if(!s)continue;const h=this.tv(t,s);e.add({xi:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:i.Fr.tickStyle}),h.gridStroke&&e.add({xi:0,positions:h.gridStroke},{lineStyle:i.Fr.gridStrokeStyle}),r.zh.sr(s.labelPosition).Zl(s.labelAlignment).Th(s.labelRotation).$l(s.labelOffset.x,s.labelOffset.y)}const r=this.Gp.VA(),h=this.$p.VA(),n={x:0,y:0};this.Bf.forEach((o=>{if(!o.di||o.M<i||o.M>s)return;const a=this.Zp(t,o.M,o.Mp,o._p),l=this.tv(t,a);if(o.kp!==ae){const t=r.add().sr(a.labelPosition).Zl(a.labelAlignment).qe(o.kp).Ch(o.Cp).tn(o.co(o.M)).Th(o.cf).setPointerEvents(o.ui);t.Zr=o.Zr;const i=t.Nh().kt();if(n.x=Math.max(n.x,i.x),n.y=Math.max(n.y,i.y),o.Ag!==ae){const i=t.mc(),s=[{x:i.min.x-o.Gn.left,y:i.max.y+o.Gn.top},{x:i.max.x+o.Gn.right,y:i.max.y+o.Gn.top},{x:i.max.x+o.Gn.right,y:i.min.y-o.Gn.bottom},{x:i.min.x-o.Gn.left,y:i.min.y-o.Gn.bottom}];h.add({xi:0,positions:s},{fillStyle:o.Ag,strokeStyle:o.gg}),this.Ep.pi.xc&&o.Zr===exports.TextObjectIdentifier.CursorTickMarker&&this.Ep.pi.xc.FA({...this.Ep.pi.el(i.min,i.max,t.ai,o.Gn),blacklist:[exports.TextObjectIdentifier.CursorTickMarker]})}}e.add({xi:0,positions:[l.tickStroke.start,l.tickStroke.end]},{lineStyle:o.bp}),l.gridStroke&&e.add({xi:0,positions:l.gridStroke},{lineStyle:o.wp})})),r.finishPlot(),h.finishPlot(),e.finishPlot();const o=this.ln(((t,i)=>{const s=i.zh.Nh().kt();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:n.x,y:n.y}),l=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.Jr.Zl({x:0,y:0}).Th(180*-l/Math.PI);const u=es.addVec(t.center,es.multiplyVec(es.multiply(t.tickDirection3D,this.np.Hp(.5*this.zp.do().getThickness()+this.cn(((t,i)=>Math.max(t,i.tickLength)),0))),t.wuSize)),c=this.np.Xp(u)||a(0,0),d=Bs(q(c,this.chart.pi.ai,this.Rp),Bs(Bs(Es(o,t.tickDirection2D),Ps(t.tickDirection2D,this.cn(((t,i)=>Math.max(t)),0))),Es(Ps(this.Jr.Nh().kt(),.5),t.tickDirection2D)));this.Jr.sr(d)}tv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:r}=t,h=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ht(o,0)||Ht(o,1)||(a=[this.sv()?{...s,x:h.x}:this.ev()?{...s,y:h.y}:this.Kp()?{...s,z:h.z}:{x:0,y:0,z:0},this.sv()?{...e,x:h.x}:this.ev()?{...e,y:h.y}:this.Kp()?{...e,z:h.z}:{x:0,y:0,z:0},this.sv()?{...r,x:h.x}:this.ev()?{...r,y:h.y}:this.Kp()?{...r,z:h.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:h,end:n}}}rv(t){const i=this.Ah,s=this.gh,e=.01*t*(s-i),r=i+e,h=s+e;this.Eh(r,h,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}hv(t,i,s){if(0===i)return;s<0&&(i*=-1,s*=-1);const e=this.gh-this.Ah,r=e*(i>=1?1+.02*s:1-.02*s)-e;"centered"===t?this.Eh(this.Ah+r/2,this.gh-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.Eh(this.Ah,this.gh-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.Eh(this.Ah+r/2,this.gh,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}Lh(){super.Lh(),this.jp.UA(),this.Gp.UA(),this.$p.UA()}sv(){return this.oh.sv()}ev(){return this.oh.ev()}Kp(){return this.oh.Kp()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class il extends Ph{constructor(t,i,s,e,r,h){super(t,i,s,e,h),this.nv=r}}const sl=(t,i,s)=>Wt(t+.1*(i-t)+Math.abs(s.tt())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),el=(t,i,s,e)=>({dn:s=>{const e=t();let r;for(const t of e){if(!t.xp())continue;const e=i(t,s);r=void 0===e?r:void 0!==r?Math.min(r,e):e}return r},fn:i=>{const e=t();let r;for(const t of e){if(!t.xp())continue;const e=s(t,i);r=void 0===e?r:void 0!==r?Math.max(r,e):e}return r},gn:()=>{const i=t();let s;for(const t of i){if(!t.xp())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),rl=t=>({...el(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.gn().y)),Dp:t=>t.y,qp:(t,i)=>({x:i.x,y:t.y,z:i.z}),ef:c(-1,0,0),Wp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:c(i.x,0,i.z),gridlinePositionB:c(i.x,0,-i.z),gridlinePositionC:c(-i.x,0,-i.z)}},sv:()=>!1,ev:()=>!0,Kp:()=>!1}),hl=t=>({...el(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.gn().z)),Dp:t=>t.z,qp:(t,i)=>({x:i.x,y:i.y,z:t.z}),ef:c(1,0,0),Wp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:c(i.x,-i.y,0),gridlinePositionB:c(i.x,i.y,0),gridlinePositionC:c(-i.x,i.y,0)}},sv:()=>!1,ev:()=>!1,Kp:()=>!0});class nl extends Wa{constructor(t,i,s,e,r){super(t,i,s,e,r),this.gp=!1,this.D=new yt}yp(){return this.getPointAmount()>0}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.Cc.cr(i),this.np.Bs(),this}getStrokeStyle(){return this.hc}add(t){return this.gp&&this.chart.pi.La(jh.Ro),this.gp=!0,(t=Array.isArray(t)?t:[t])?(this.Cc.bu(t.slice()),this.np.Bs(),this):this}clear(){return this.Cc.Vi(),this}getPointAmount(){const t=this.Cc;return t.Cu()+t.Tu()}xp(){return this.rp&&this.getPointAmount()>0&&this.getVisible()}rr(t,i){t.Ii(i),this.np.Bs()}er(){return{stroke:this.hc}}Ys(){return Pi(this.hc.getFillStyle(),this.Cc._i())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ol extends nl{constructor(t,i,s,e,r,h,n){super(t,i,s,e,h),this.Rs="Line Series 3D",this.hc=Ei(e.lineSeries3DStrokeStyle,r),this.ov=ln.pointStyle3D,this.av(this.hc);const o={individualLookupValuesEnabled:!1,...n};this.Cc=this.np.Np([Ja.UserSeries],o).up(this.hp).cr(this.hc).Vp(this.ov).Ii(this.getHighlight()),this._s(this.Cc)}setStrokeStyle(t){super.setStrokeStyle(t),this.av(this.hc);const i=this.ov;return this.Cc.Vp(i),this}av(t){const i=new nr.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.ov=i}}class al extends nl{constructor(t,i,s,e,r,h,n){super(t,i,s,e,h),this.Rs="Point Line Series 3D",this.ov=Ei(e.pointLineSeries3DPointStyle,r),this.hc=Ei(e.lineSeries3DStrokeStyle,r),this.lv();const o={individualLookupValuesEnabled:!1,...n};this.Cc=this.np.Np([Ja.UserSeries],o).up(this.hp).cr(this.hc).Vp(this.ov).Ii(this.getHighlight()),this._s(this.Cc)}setPointStyle(t){return this.ov="function"==typeof t?t(this.ov):t,this.lv(),this.Cc.Vp(this.ov),this.np.Bs(),this}getPointStyle(){return this.ov}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.hc,s=Math.abs(i.getThickness()),e=this.ov,r=e.getSize();s>("object"==typeof r?Math.max(r.x,r.y,r.z):r)&&(this.ov=e.setSize(s)),this.lv();const h=this.ov;return this.Cc.Vp(h),this.np.Bs(),this}Ys(){return Pi(this.hc.getFillStyle(),this.Cc._i())||Pi(this.ov.getFillStyle(),this.Cc._i())}lv(){const t=this.ov,i=t.getSize();this.ov=t.setSize(i)}rr(t,i){t.Ii(i),this.np.Bs()}}class ll extends Wa{constructor(t,i,s,e,r,h){super(t,i,s,e,r),this.gp=!1,this.D=new yt,((null==h?void 0:h.individualPointSizeAxisEnabled)||(null==h?void 0:h.individualPointSizeEnabled))&&this.chart.pi.La(jh.Oo)}yp(){return this.getPointAmount()>0}add(t){return this.gp&&this.chart.pi.La(jh.Ro),this.gp=!0,(t=Array.isArray(t)?t:[t])?(this.Cc.bu(t.slice()),this.np.Bs(),this):this}clear(){return this.Cc.Vi(),this}getPointAmount(){const t=this.Cc;return t.Cu()+t.Tu()}xp(){return this.rp&&this.getPointAmount()>0&&this.getVisible()}rr(t,i){t.Ii(i),this.np.Bs()}er(){return{point3D:this.uv}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ul extends ll{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.Rs="Point Series 3D";const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.uv=Ei(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...h};this.Cc=this.np.dv(o).up(this.hp).cv(this.uv).Ii(this.getHighlight()),this._s(this.Cc)}setPointStyle(t){this.uv="function"==typeof t?t(this.uv):t;const i=this.uv;return this.Cc.cv(i),this.np.Bs(),this}getPointStyle(){return this.uv}Ys(){return Pi(this.uv.getFillStyle(),this.Cc._i())}}class cl extends ll{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.Rs="Point Cloud Series 3D";const n=this.chart.getSeries().length;this.uv=Ei(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...h};this.Cc=this.np.dv(o).cv(this.uv).Ii(this.getHighlight()),this._s(this.Cc)}setPointStyle(t){this.uv="function"==typeof t?t(this.uv):t;const i=this.uv;return this.Cc.cv(i),this.np.Bs(),this}getPointStyle(){return this.uv}Ys(){return Pi(this.uv.getFillStyle(),this.Cc._i())}}const dl={Triangulated:ul,Pixelated:cl};class fl extends ja{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,a,l,u,c),this.fv=[],this.Av=0,this.gv=t=>{const i=this.fv.indexOf(t);i>=0&&(this.fv.splice(i,1),this.D.R("seriesdispose",{series:t}))},this.seriesBackground=new yt,this.pv=this.vs.aA()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.fv.forEach((i=>i.setAnimationHighlight(t))),this}vv(t,i){this.pv.ks([i]),this.seriesBackground.zi(t)}setSeriesBackgroundFillStyle(t){return this.yv.qe(t),this.pi.Bs(),this}getSeriesBackgroundFillStyle(){return this.yv.Mh()}setSeriesBackgroundStrokeStyle(t){return this.mv.Ke(t),this.pi.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.mv.Ja()}setSeriesBackgroundEffect(t){return this.pv.Ps(t),this.pi.Bs(),this}getSeriesBackgroundEffect(){return this.pv.Ds()}xv(t,i){this.fv.push(t),void 0!==this.Sv&&t.setHighlightOnHover(this.Sv),this.D.R("seriesadd",{series:t}),this.Os.forEach((s=>{s.xg()&&null!==(null==i?void 0:i.legend)&&s.bu(t,null==i?void 0:i.legend)}))}bg(){return this.fv}setSeriesHighlightOnHover(t){return this.Sv=t,this.fv.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.fv.slice().forEach(Yt),super.dispose()}}const Al=es.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class gl{constructor(t,i,s,e){this.bv=!0,this.Mv=!0,this.wv=2*-Math.PI/2160,this._v=2*Math.PI/2160,this.kv=.1,this.Cv=1*Math.PI/180,this.Tv=t,this.Fv=i,this.Iv=s,this.Xp=e}getDefaultCameraConfiguration(t,i){const s={direction:Al,location:es.multiply(Al,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Lv(s,t):"wheel-zoom"===t.type?s=this.Pv(s,t):"rotate+zoom"===t.type?s=this.Bv(s,t):"fixed-rotate"===t.type?s=this.Dv(s,t):"move"===t.type&&(s=this.Ev(s,t))})),this.bv?s=this.Rv(t.boundingBox,s):this.Mv&&(s=this.Ov(t.boundingBox,t.projection,s)),s}Lv(t,i){const{rotation:s}=i,e=t.location,r=es.multiply(es.normalize(t.location),-1),{Right:h,Up:n}=this.zv(r);let o=e;const a=this.Vv(r),l=s.x*this.wv*a;o=es.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this._v,a-this.Cv);return 0!==u&&(o=es.rotateAroundAxis(o,h,u)),{location:o,direction:es.multiply(es.normalize(o),-1)}}Pv(t,i){const{deltaY:s}=i;this.bv&&this.Nv(!1);const e=t.location,r=es.multiply(es.normalize(e),-1),h=s*this.kv,n=es.length(e)*-h;return{direction:r,location:es.addVec(e,es.multiply(r,n))}}Bv(t,i){const{rotation:s,cameraDistance:e}=i;this.bv&&this.Nv(!1);let r=this.Lv(t,{type:"rotate",rotation:s});const h=r.location,n=es.multiply(es.normalize(h),-1),o=es.multiply(n,-e);return r={direction:es.multiply(es.normalize(o),-1),location:o},r}Dv(t,i){this.bv&&this.Nv(!1);const{rotation:s}=i,e=t.location,r=t.direction,{Right:h,Up:n}=this.zv(r),o=s.x*this.wv;let a=es.normalize(es.rotateAroundAxis(r,n,o));const l=s.y*this._v;return a=es.normalize(es.rotateAroundAxis(a,h,l)),{location:e,direction:a}}Ev(t,i){this.bv&&this.Nv(!1),this.Mv=!1;const{amountRight:s,amountForward:e}=i,r=t.location,h=t.direction,{Right:n}=this.zv(h);return{location:es.addVec(r,es.multiply(h,.01*e),es.multiply(n,.01*s)),direction:h}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:es.multiply(es.normalize(t.cameraLocation),-1)};return this.bv?this.Rv(t.boundingBox,i):this.Ov(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:es.multiply(es.normalize(t.cameraLocation),-1)};return this.bv?this.Rv(t.boundingBox,i):this.Ov(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:es.multiply(es.normalize(t.cameraLocation),-1)};if(this.bv)return this.Rv(t.boundingBox,i)}Rv(t,i,s){let e=i;s=void 0!==s?s:0,e=this.Gv(t,e,100,20,1,s,5);const r=this.Vv(e.direction);return e=this.$v(e,this.Uv(t,e,100,1),r),e}Gv(t,i,s,e,r,h,n){return pl(h,n,(t=>({direction:i.direction,location:es.multiply(i.direction,-t)})),(i=>this.Yv(t,i)),s,r,"linear",e)}Uv(t,i,s,e){const{Right:r,Left:h,Up:n,Down:o}=this.zv(i.direction),a=this.jv(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?vl(0,c,(t=>({location:l.location,direction:es.normalize(es.lerp(l.direction,o,t))})),(i=>this.Hv(t,i)),0,u,!0,s):vl(0,c,(t=>({location:l.location,direction:es.normalize(es.lerp(l.direction,n,t))})),(i=>this.Hv(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?vl(0,c,(t=>({location:l.location,direction:es.normalize(es.lerp(l.direction,h,t))})),(i=>this.Wv(t,i)),0,u,!0,s):vl(0,c,(t=>({location:l.location,direction:es.normalize(es.lerp(l.direction,r,t))})),(i=>this.Wv(t,i)),0,u,!0,s)),l}Yv(t,i){const s=this.jv(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}Wv(t,i){const s=this.jv(t,!1,i);return Math.abs(s.left-s.right)}Hv(t,i){const s=this.jv(t,!1,i);return Math.abs(s.top-s.bottom)}jv(t,i,s){const e=Ss(this.Xv(t,i,s).map((t=>q(t,this.Tv,this.Fv))));return{left:e.min.x,right:this.Fv.x.getInnerEnd()-e.max.x,top:this.Fv.y.getInnerEnd()-e.max.y,bottom:e.min.y}}Xv(t,i,s){const e=this.Iv,r=c(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),h=c(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(r.x+h.x)/2,l=(r.z+h.z)/2,u=Math.sqrt(2)*(h.x-a),d=Math.sqrt(2)*(h.z-l);return[r.y,h.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*u,r=l+Math.sin(s)*d;n.push({x:e,y:t,z:r})}})),n.map((t=>this.Xp(t,s))).filter((t=>void 0!==t))}Ov(t,i,s){const e=es.length(s.location),r=this.Zv(t,i);return e<r.min?{direction:s.direction,location:es.multiply(s.direction,-r.min)}:e>r.max?{direction:s.direction,location:es.multiply(s.direction,-r.max)}:s}Zv(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}zv(t){const i=c(0,1,0),s=es.normalize(es.cross(i,es.multiply(t,-1)));let e=es.cross(s,t);return e.y=Math.abs(e.y),e=es.normalize(e),{Right:s,Up:e,Down:es.multiply(e,-1),Left:es.multiply(s,-1)}}Vv(t){const i={x:0,y:1,z:0},s=es.angle(t,i),e=es.angle(t,es.multiply(i,-1));return Math.min(s,e)}$v(t,i,s){return{location:es.lerp(t.location,i.location,s),direction:es.normalize(es.lerp(t.direction,i.direction,s))}}Nv(t){return this.bv=t,this}Jv(){return this.bv}}const pl=(t,i,s,e,r,h,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-r)<=h)break;const c=a.score>r;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},vl=(t,i,s,e,r,h,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-r)<Math.abs(a.score-r)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-r)<=h)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class yl extends Wa{constructor(t,i,s,e,r,h){super(t,i,s,r,h),this.Rs="Surface Grid Series 3D",this.Qv={},this.gp=!1,this.D=new yt,this.sp=Xe;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ze=Ei(this.bi.surfaceGridSeries3DFillStyle,n),this.Kv=Ei(this.bi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Da=o,this.Cc=this.np.ty(o).qe(this.Ze).qv(this.Kv).lp(this.sp).Ii(this.getHighlight()),this._s(this.Cc),this.setHighlightOnHover(!1)}yp(){return this.gp}Qi(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.eA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:ye(this.Ze)?this.Ze.lut:void 0}}er(){return{fill:this.Ze}}iy(){const t=this.Qv.start||{x:0,z:0};let i;i=this.Qv.end?{x:(this.Qv.end.x-t.x)/this.Da.columns,z:(this.Qv.end.z-t.z)/this.Da.rows}:this.Qv.step?this.Qv.step:{x:1,z:1},this.Cc.sy(t,i),this.chart.pi.Bs()}setStart(t){return this.Qv.start=t,this.iy(),this}getStart(){return this.Cc.ey().start}setStep(t){return this.Qv.step=t,this.iy(),this}getStep(){return this.Cc.ey().step}setEnd(t){return this.Qv.end=t,this.iy(),this}getEnd(){return this.Cc.ey().end}setContours(t){return this.Cc.hy(t?{valueSource:t.valueSource,levels:t.levels.map((t=>{var i,s;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.bi.surfaceGridSeriesContourStrokeStyle)&&void 0!==s?s:new ar({thickness:1,fillStyle:new de({color:b(255,0,0)})})}}))}:void 0),this.np.Bs(),this}getContours(){return this.Cc.ny()}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Cc.qe(this.Ze),this.np.Bs(),this}getFillStyle(){return this.Ze}setWireframeStyle(t){return this.Kv="function"==typeof t?t(this.Kv):t,this.Cc.qv(this.Kv),this.np.Bs(),this}getWireframeStyle(){return this.Cc.oy()}setIntensityInterpolation(t){return t=t||"disabled",this.Cc.ly(t),this.np.Bs(),this}getIntensityInterpolation(){return this.Cc.uy()}invalidateIntensityValues(t){if(this.gp&&this.chart.pi.La(jh.Ro),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Da.dataOrder?t.length:t[0].length,rows:"rows"===this.Da.dataOrder?t.length:t[0].length},s="columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows,e="columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns;if(i.x>s||i.y>e){if(!0===this.chart.Pg.Ea){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Da.columns}x${this.Da.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);t=r}this.Cc.Ay({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Da.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Da.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Da.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let r="columns"===this.Da.dataOrder?t.iRow:t.iColumn;const h=r+i.secondary-1,n=("columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows)-1,o=("columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns)-1;if(s<0||r<0||e>n||h>o){if(!0===this.chart.Pg.Ea){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Da.columns}x${this.Da.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-r,0),u=Math.max(e-n,0),c=Math.max(h-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),r=Math.max(r,0)}this.Cc.Ay({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.np.Bs(),this.gp=!0,this}invalidateHeightMap(t){if(this.gp&&this.chart.pi.La(jh.Ro),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Da.dataOrder?t.length:t[0].length,rows:"rows"===this.Da.dataOrder?t.length:t[0].length},s="columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows,e="columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns;if(i.x>s||i.y>e){if(!0===this.chart.Pg.Ea){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Da.columns}x${this.Da.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);t=r}this.Cc.gy({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Da.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Da.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Da.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let r="columns"===this.Da.dataOrder?t.iRow:t.iColumn;const h=r+i.secondary-1,n=("columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows)-1,o=("columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns)-1;if(s<0||r<0||e>n||h>o){if(!0===this.chart.Pg.Ea){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Da.columns}x${this.Da.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-r,0),u=Math.max(e-n,0),c=Math.max(h-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),r=Math.max(r,0)}this.Cc.gy({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.np.Bs(),this.gp=!0,this}setCullMode(t){return this.Cc.vy("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Cc.yy()}Ys(){return Pi(this.Ze,this.Cc._i())}cp(){}ir(){}dp(){}xp(){return this.rp&&this.getVisible()}rr(t,i){t.Ii(i),this.np.Bs()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ml extends Wa{constructor(t,i,s,e,r,h){super(t,i,s,r,h),this.Rs="Surface Grid Series 3D",this.gp=!1,this.Qv={},this.D=new yt,this.chart.pi.La(jh.Ro),this.sp=Xe;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ze=Ei(this.bi.surfaceScrollingGridSeries3DFillStyle,n),this.Kv=Ei(this.bi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Da=o,this.Cc=this.np.my(o).qe(this.Ze).qv(this.Kv).lp(this.sp).Ii(this.getHighlight()),this._s(this.Cc),this.setHighlightOnHover(!1)}yp(){return this.gp}Qi(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.eA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:ye(this.Ze)?this.Ze.lut:void 0}}iy(){const t=this.Qv.start||{x:0,z:0};let i;i=this.Qv.step?this.Qv.step:{x:1,z:1},this.Cc.sy(t,i),this.chart.pi.Bs()}setStart(t){return this.Qv.start=t,this.iy(),this}getStart(){return this.Cc.ey().start}setStep(t){return this.Qv.step=t,this.iy(),this}getStep(){return this.Cc.ey().step}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Cc.qe(this.Ze),this.np.Bs(),this}getFillStyle(){return this.Ze}setWireframeStyle(t){return this.Kv="function"==typeof t?t(this.Kv):t,this.Cc.qv(this.Kv),this.np.Bs(),this}getWireframeStyle(){return this.Cc.oy()}setIntensityInterpolation(t){return t=t||"disabled",this.Cc.ly(t),this.np.Bs(),this}getIntensityInterpolation(){return this.Cc.uy()}clear(){return this.Cc.Vi(),this.np.Bs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),this.gp=!0,i){const t=i[0].length,s=0+t-1,e="columns"===this.Da.scrollDimension?this.Da.rows:this.Da.columns;if(s>e-1){if(!0===this.chart.Pg.Ea){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Da.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Da.scrollDimension?this.Da.rows:this.Da.columns;if(i>e-1){if(!0===this.chart.Pg.Ea){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Da.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.Pg.Ea){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Nt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,r=i?i[0].length:null==s?void 0:s[0].length;return this.Cc.xy({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:r,heightMapValues:i,intensityValues:s}),this.np.Bs(),this}invalidateValues(t){return this.Cc.Ay(t),this.chart.pi.Bs(),this}getSampleCount(){return this.Cc.Sy()}setCullMode(t){return this.Cc.vy("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Cc.yy()}Ys(){return Pi(this.Ze,this.Cc._i())}cp(){}ir(){}dp(){}xp(){return this.rp&&this.getVisible()}rr(t,i){t.Ii(i),this.np.Bs()}er(){return{fill:this.Ze}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const xl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof zl),Sl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),bl=(t,i=/\s+/g)=>Array.from(t.split(i).map(parseFloat)),Ml=t=>{if(t.length<=3)return t;const i=new Array;for(let s=1;s<t.length-1;s+=1)i.push(t[0]),i.push(t[s]),i.push(t[s+1]);return i},wl=t=>{const i=t.split(/\s+/g);let s=[],e=[],r=[];for(const t of i){const i=bl(t.trim(),"/");s.push(i[0]),i.length>1&&!Number.isNaN(i[1])&&r.push(i[1]),i.length>2&&!Number.isNaN(i[2])&&e.push(i[2])}return s=Ml(s),r=Ml(r),e=Ml(e),{vertexIndex:s,textureIndex:r||void 0,normalIndex:e||void 0}},_l={id:"",ambient:b(0,0,0,0),diffuse:b(254,204,0),emissive:b(0,0,0,0),specular:b(255,255,255),specularCoeff:1,opacity:1};class kl extends Wa{constructor(t,i,s,e,r,h){super(t,i,s,e,h),this.Rs="Mesh Model 3D",this.by=new Float32Array,this.My=new Float32Array,this.wy=new Uint16Array,this.ai={x:1,y:1,z:1},this._y={x:0,y:0,z:0},this.ky={x:0,y:0,z:0},this.Cy={x:0,y:0,z:0},this.Ty={w:1,x:0,y:0,z:0},this.Fy={x:0,y:0,z:0},this.Iy=new Array,this.Ly=[],this.nu=os,this.D=new yt;const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.Cc=this.np.Py().up(this.hp).qe(Ei(this.bi.meshModel3DFillStyle||this.bi.pointSeriesFillStyle,n)).Ii(this.getHighlight()),this._s(this.Cc)}yp(){return this.by.length>0}Qi(t,i,s){const e=this.getFillStyle();return Qi({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:ye(e)?e.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const s=this.Cc.By(t,i);if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.eA,axisLocation:s.coordAxis},...s.coordAxis,index:s.index,value:s.value,coordAxis:s.coordAxis,coordModel:s.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:ye(e)?e.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let r=hs,h=rs,n=hs,o=rs,a=hs,l=rs;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];r=Math.max(r,i),h=Math.min(h,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.nu={min:{x:h,y:o,z:l},max:{x:r,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.nu.min.x,s[t+1]-=this.nu.min.y,s[t+2]-=this.nu.min.z;this.Fy={x:this.nu.max.x-this.nu.min.x,y:this.nu.max.y-this.nu.min.y,z:this.nu.max.z-this.nu.min.z},this.by=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(Xe);const u=new Array,c={indexStart:0,count:i.length,useIndexBuffer:!0,offset:0,material:{id:_l.id,diffuse:_l.diffuse,specular:_l.specular,ambient:_l.ambient,emissive:_l.emissive,specularCoeff:_l.specularCoeff,opacity:1}};return u.push(c),this.Ly=u,this.Cc.Dy({vertices:this.by,normals:this.checkedNormals,indices:i instanceof Uint32Array||i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Fy,parts:this.Ly}),this.chart.pi.Bs(),this}Ey(t){if(!t)return this;this.Iy=[];let i={id:_l.id,diffuse:_l.diffuse,specular:_l.specular,ambient:_l.ambient,emissive:_l.emissive,specularCoeff:_l.specularCoeff,opacity:1};const s=t.split("\n");for(let t of s){if(t=t.trim(),""===t||t.startsWith("#"))continue;const s=t.split(/\s+/g);switch(s[0].trim().toLowerCase()){case"ka":{const s=bl(t.substring(2).trim()).map((t=>255*t));i.ambient=b(s[0],s[1],s[2])}break;case"ke":{const s=bl(t.substring(2).trim()).map((t=>255*t));i.emissive=b(s[0],s[1],s[2])}break;case"kd":{const s=bl(t.substring(2).trim()).map((t=>255*t));i.diffuse=b(s[0],s[1],s[2])}break;case"ks":{const s=bl(t.substring(2).trim()).map((t=>255*t));i.specular=b(s[0],s[1],s[2])}break;case"d":i.opacity=parseFloat(s[1].trim());break;case"tr":i.opacity=1-parseFloat(s[1].trim());break;case"newmtl":i.diffuse=b(255*i.diffuse.r,255*i.diffuse.g,255*i.diffuse.b,255*i.opacity),i.specular=b(255*i.specular.r,255*i.specular.g,255*i.specular.b,255*i.opacity),i.emissive=b(255*i.emissive.r,255*i.emissive.g,255*i.emissive.b,255*i.opacity),i={id:s[1],diffuse:_l.diffuse,specular:_l.specular,ambient:_l.ambient,emissive:_l.emissive,specularCoeff:_l.specularCoeff,opacity:_l.opacity},this.Iy.push(i)}}return this}setModelMaterial(t){return t?(this.Ey(t),this.setFillStyle(ae),this.Ly?(this.Ly.forEach((t=>{const i=this.Iy.find((i=>i.id.toLowerCase()===t.material.id.toLowerCase()));i&&(t.material=i)})),this.Ly.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.chart.pi.Bs(),this):this):this}setModelFromObj(t){if(!t)return this;const i=new Array,s=new Array,e=new Array,r=new Array,h=new Array,n=new Array,o=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:_l.id,diffuse:_l.diffuse,specular:_l.specular,ambient:_l.ambient,emissive:_l.emissive,specularCoeff:_l.specularCoeff,opacity:_l.opacity}},l=0,u=0,c=0,d=0,f=0,A=0,g=0,p=hs,v=rs,y=hs,m=rs,x=hs,S=rs;const b=t.replace(/\r/g,"").split("\n");for(let t of b){if(t=t.trim(),""===t||t.startsWith("#"))continue;const b=t.split(/\s+/g);let M=0;switch(b[0].trim().toLowerCase()){case"v":{const s=bl(t.substring(1).trim()),e=s[0],r=s[1],h=s[2];p=Math.max(p,e),v=Math.min(v,e),y=Math.max(y,r),m=Math.min(m,r),x=Math.max(x,h),S=Math.min(S,h),i.push(...s.slice(0,3)),l+=1,d=l}break;case"vt":{const i=bl(t.substring(2).trim());s.push(...i),u+=1,f=u}break;case"vn":{const i=bl(t.substring(2).trim());e.push(...i),c+=1,A=c}break;case"usemtl":{const t=this.Iy.find((t=>t.id.toLowerCase()===b[1].toLowerCase()));g+=o.length>0?a.count:0,a={indexStart:void 0!==a?3*g*2:0,count:0,offset:void 0!==a?1*g:0,useIndexBuffer:!1,material:t||{id:b[1].toLowerCase(),diffuse:_l.diffuse,specular:_l.specular,ambient:_l.ambient,emissive:_l.emissive,specularCoeff:1,opacity:1}},o.push(a)}break;case"fo":M+=1;case"f":M+=1;{const o=wl(t.substring(M).trim());for(let t=0;t<o.vertexIndex.length;t+=1){let s=o.vertexIndex[t];s<0?s+=d:s-=1,s*=3,r.push(i[s]),r.push(i[s+1]),r.push(i[s+2])}if(a.count+=o.vertexIndex.length,o.textureIndex)for(let t=0;t<o.textureIndex.length;t+=1){let i=o.textureIndex[t];i<0?i+=f:i-=1,i*=3,n.push(s[i]),n.push(s[i+1]),n.push(s[i+2])}if(o.normalIndex)for(let t=0;t<o.normalIndex.length;t+=1){let i=o.normalIndex[t];i<0?i+=A:i-=1,i*=3,h.push(e[i]),h.push(e[i+1]),h.push(e[i+2])}}}}this.nu={min:{x:v,y:m,z:S},max:{x:p,y:y,z:x}};for(let t=0;t<r.length;t+=3)r[t]-=this.nu.min.x,r[t+1]-=this.nu.min.y,r[t+2]-=this.nu.min.z;if(this.Fy={x:this.nu.max.x-this.nu.min.x,y:this.nu.max.y-this.nu.min.y,z:this.nu.max.z-this.nu.min.z},o.length<1&&r.length>0&&(a.count=r.length/3,o.push(a)),this.Ly=o,this.by=new Float32Array(r),h.length<1)for(let t=0;t<r.length/9;t+=1){const i={x:r[9*t],y:r[9*t+1],z:r[9*t+2]},s={x:r[9*t+3],y:r[9*t+4],z:r[9*t+5]},e={x:r[9*t+6],y:r[9*t+7],z:r[9*t+8]},n=es.normalize(es.cross(es.subtractVec(i,s),es.subtractVec(i,e)));for(let t=0;t<3;t+=1)h.push(n.x),h.push(n.y),h.push(n.z)}return this.My=new Float32Array(h.map(((t,i)=>h[i]))),this.checkedNormals=new Float32Array,this.Iy&&this.Ly.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.Cc.Dy({vertices:this.by,normals:this.My,indices:this.wy,modelSize:this.Fy,parts:this.Ly}),this.chart.pi.Bs(),this}setVertexValues(t){return this.Cc.Ry(t),this.chart.pi.Bs(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ai=i,this.Cc.Oy(i),this.chart.pi.Bs(),this}getScale(){return this.ai}setModelLocation(t){return this.ky=t,this.Cc.zy(t),this.chart.pi.Bs(),this}getModelLocation(){return this.ky}setModelAlignment(t){return this._y=t,this.Cc.Vy(t),this.chart.pi.Bs(),this}getModelAlignment(){return this._y}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.Cy}setModelRotationEuler(t){const i={x:Ns(t.x),y:Ns(t.y),z:Ns(t.z)};return this.Cy=i,this.Cc.Ny(this.Cy),this.chart.pi.Bs(),this}getModelRotationEuler(){return this.Cy}setModelRotationQuaternion(t){return this.Ty=t,this.Cc.Gy(this.Ty),this.chart.pi.Bs(),this}getModelRotationQuaternion(){return this.Ty}setBackfaceCullingMode(t){return this.Cc.$y(t),this.chart.pi.Bs(),this}getBackfaceCullingMode(){return this.Cc.Uy()}setFillStyle(t){return this.Cc.qe(t),this.chart.pi.Bs(),this}getFillStyle(){return this.Cc.Mh()}setColorShadingStyle(t){return this.checkedNormals||t!==Je?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Qe.Simple))}xp(){return!1}rr(t,i){t.Ii(i),this.chart.pi.Bs()}Ys(){return Pi(this.getFillStyle(),this.Cc._i())}er(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Cl={None:qh,Rectangle:io,Circle:so,Diamond:eo,Pointer:ro};class Tl extends fo{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.qn=this.bi.cursorResultTableTextFont,this.cf=0,this.kp=this.bi.cursorResultTableTextFillStyle,this.Yn=100,this.Zr=exports.TextObjectIdentifier.CursorResultTable}setContent(t){var i;let s;void 0===t?s=[]:Array.isArray(t)?(s=[],t.forEach((t=>{s.push(Array.isArray(t)?t:[t])}))):s=[[t]];for(let t=0;t<s.length;t+=1){const i=s[t];let e=!1;for(let t=0;t<i.length;t+=1){const s=i[t],r="object"==typeof s&&"text"in s?s.text:"string"==typeof s?s:void 0,h="object"==typeof s&&"icon"in s?s.icon:pr(s)?s:void 0,n=s instanceof De&&s;if(!(r&&r.length>0||h||n)){e=!0;break}}e||(i.unshift(""),i.push(""))}const e=s.length;let r=this.getMembers().length;for(let t=0;t<Math.max(e,r);t+=1){const n=this.getRow(t,!0);if(t>=e)this.getMembers()[t].dispose(),t-=1,r-=1;else{const r=s[t].length;let o=n.getMembers().length;for(let a=0;a<Math.max(r,o);a+=1){const l=s[t][a],u="object"==typeof l&&"font"in l?l.font:void 0,c="object"==typeof l&&"fillStyle"in l?l.fillStyle:void 0,d="object"==typeof l&&"text"in l?l.text:"string"==typeof l?l:void 0,f="object"==typeof l&&"icon"in l?l.icon:pr(l)?l:void 0,A=l instanceof De&&l||("object"==typeof l&&"component"in l?l.component:void 0),g="object"==typeof l&&"componentColor"in l&&l.componentColor,p="object"==typeof l&&"componentFillStyle"in l&&l.componentFillStyle,v="object"==typeof l&&"rowFillStyle"in l?l.rowFillStyle:void 0,y=n.getMembers();if(a>=r)n.getMembers()[a].dispose(),a-=1,o-=1;else if(void 0!==d&&d.length>0||f||A){const s=u?this.qn.withMutations((t=>{for(const i of Object.keys(u)){const s=u[i];void 0!==s&&t.set(i,s)}return t})):this.qn,r=c||this.kp,o=y[a];if(d){let t;o&&o instanceof qn?t=o:(o&&o.dispose(),t=n.addElement(to,a)),t.setText(d).setFont(s).setFillStyle(r).setTextRotation(this.cf)}else if(f){let t;o&&o instanceof ho?t=o:(o&&o.dispose(),t=n.addElement(no,a)),t.setFillStyle(r).setShape(f).setSize({y:s.size,x:s.size}),t.setMargin(null!==(i=this.bi.uiTextPadding)&&void 0!==i?i:5)}else if(A){let t;o&&"setTextFillStyleHidden"in(h=o)&&"setText"in h?t=o:(o&&o.dispose(),t=n.addElement(ko.setBackground(Cl.None),a).setOn(!0));const i=A.js();void 0!==i&&t.setButtonShape(i),t.setText(A.getName()).setTextFont(s).setTextFillStyle(r).setTextRotation(this.cf),g?t.setButtonOnFillStyle(new de({color:g})):p?t.setButtonOnFillStyle(p):t.setButtonOnFillStyle(Li(A.chart.getTheme(),!1,A.er()))}v&&n.setBackground((i=>{i.setFillStyle(v);const s=this.getBackground();Re(s)&&i instanceof io&&i.setCornerRadius(s.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===e-1,bottomRight:t===e-1})}))}else{const t=y[a];t&&t instanceof oo||(t&&t.dispose(),n.addGap(void 0,a))}}}}var h;return this.Ws.Bs(),this}ir(){if(super.ir(),this.Ws.pi.xc&&this.getVisible()){const t=$h(this);this.Ws.pi.xc.FA({...t,blacklist:[exports.TextObjectIdentifier.CursorResultTable]})}return this}setTextFillStyle(t){this.kp="function"==typeof t?t(this.kp):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof qn&&s.setFillStyle(this.kp)}}return this.Ws.Bs(),this}getTextFillStyle(){return this.kp}setTextFont(t){return P(t)?this.qn=t:this.qn=t(this.qn),this.Ws.Bs(),this}getTextFont(){return this.qn}setTextRotation(t){return this.cf=t,this.Ws.Bs(),this}getTextRotation(){return this.cf}Yy(){for(let t=0;t<this.Wd.length;t+=1)for(let i=0;i<this.Wd[t].getMembers().length;i+=1)this.Wd[t].getMembers()[i].dispose()}Nh(){for(let t=0;t<this.Wd.length;t+=1)this.Wd[t].setMinimumSize(void 0);super.Nh();for(let t=0;t<this.Wd.length;t+=1)this.Wd[t].setMinimumSize(this.size.x);return super.Nh(),this}}class Fl{constructor(t,i,s,e,r,h){this.jy=[],this.Hy=!0,this.Wy=!0,this.Cg=!1,this.di=!0,this.ci=!1,this.Xy=[],this.Zy=!0,this.D=new yt,this.Ws=t,this.renderingScale=i,this.scale=s,this.Jy=e,this.Qy=r,this.bi=h,this.Ky=new Tl(this.Ws,this.renderingScale,this.scale,this.Qy,jt,h).setPointerEvents(!1).setBackground((t=>t.setFillStyle(h.cursorResultTableFillStyle).setStrokeStyle(h.cursorResultTableStrokeStyle))).setTextFillStyle(h.cursorResultTableTextFillStyle).setTextFont(h.cursorResultTableTextFont),this.qy=new Ll((t=>this.Ky.setOrigin(t)),(()=>this.Ky.getOrigin())),this.tm=new Ll((t=>this.Ky.setPosition(t)),(()=>this.Ky.getPosition()))}isDisposed(){return this.ci}setPointMarkerVisible(t){return this.Hy=t,this.jy.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ws.Bs(),this}getPointMarkerVisible(){return this.Hy}setPointMarker(t){return this.jy.forEach((i=>t(i.pointMarker))),this.Xy.push(t),this.Ws.Bs(),this}setResultTableVisible(t){return this.Wy=t,this.Ws.Bs(),this}getResultTableVisible(){return this.Wy}setResultTable(t){return t(this.Ky),this.Ws.Bs(),this}setAutoFit(t){return this.Zy=t,this.qy.resetValue(),this.tm.resetValue(),this.Ws.Bs(),this}getAutoFit(){return this.Zy}setVisible(t){return this.di=t,this.Ws.Bs(),this}getVisible(){return this.di}dispose(){return this.jy.forEach((t=>t.pointMarker.dispose())),this.Ky.dispose(),this.Xy.length=0,this.Jy(this),this.D.R("dispose",{}),this}im(){const t=this.Ky,i=this.Ws.pi.ai,s=q(t.getPosition(a(-1,-1),exports.UISpace.PaddedBackground),t.scale,i),e=q(t.getPosition(a(1,1),exports.UISpace.PaddedBackground),t.scale,i),r=s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),h=s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd();return{x:r,y:h,either:r||h,resultTableViewport:this.Ky.Ws.pi.ai,resultTableViewportBounds:{x:{min:Math.min(i.x.getInnerStart(),i.x.getInnerEnd()),max:Math.max(i.x.getInnerStart(),i.x.getInnerEnd())},y:{min:Math.min(i.y.getInnerStart(),i.y.getInnerEnd()),max:Math.max(i.y.getInnerStart(),i.y.getInnerEnd())}}}}ir(){if(this.di){(this.qy.isAltered()||this.tm.isAltered())&&(this.qy.resetValue(),this.tm.resetValue(),this.Ky.Nh());let t=this.Zy&&this.im();if(t&&t.either){const i=t.resultTableViewport;let s=q(this.Ky.getPosition(a(-1,-1),exports.UISpace.PaddedBackground),this.Ky.scale,i),e=q(this.Ky.getPosition(a(1,1),exports.UISpace.PaddedBackground),this.Ky.scale,i);const r=t.resultTableViewportBounds,h=this.Ky.getOrigin();let n={x:0,y:0},o={...h};if(e.y>r.y.max?n.y=r.y.max-e.y:s.y<r.y.min&&(n.y=r.y.min-s.y),(e.x>r.x.max||s.x<r.x.min)&&(o.x*=-1),0!==n.x||0!==n.y||o.x!==h.x||o.y!==h.y){const h=this.Ky.getPosition(),l=q(h,this.Ky.scale,i);let u={x:l.x+n.x,y:l.y+n.y},c=q(u,i,this.Ky.scale);this.tm.alter(c),this.qy.alter(o),this.Ky.Nh(),t=this.im(),t.x&&(s=q(this.Ky.getPosition(a(-1,-1),exports.UISpace.PaddedBackground),this.Ky.scale,i),e=q(this.Ky.getPosition(a(1,1),exports.UISpace.PaddedBackground),this.Ky.scale,i),e.x>r.x.max?n.x=r.x.max-e.x:s.x<r.x.min&&(n.x=r.x.min-s.x),u={x:l.x+n.x,y:l.y+n.y},c=q(u,i,this.Ky.scale),this.tm.alter(c),this.Ky.Nh())}}}return this.jy.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.Cg&&this.di&&this.Hy))),this.jy.forEach((t=>t.pointMarker.ir())),this.Ky.ir(),this}Nh(){return this.Ky.setVisible(this.Cg&&this.di&&this.Wy),this.jy.forEach((t=>t.pointMarker.Nh())),this.Ky.Nh(),this}sm(t,i){const s=i===this.scale?t:q(t,i,this.scale);this.Ky.setPosition(s)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Il=(t,i)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(a(-1,-1)).setMargin(.5*i.cursorPointMarkerSize.x+2).setBackground((t=>{i.cursorResultTableBorderRadius&&Re(t)&&t.setCornerRadius(i.cursorResultTableBorderRadius)}))));class Ll{constructor(t,i){this.rm=t,this.hm=i}alter(t){this.nm=void 0!==this.nm?this.nm:this.hm(),this.om=t,this.rm(t)}resetValue(){void 0!==this.om&&(void 0!==this.nm&&this.isAltered()&&this.rm(this.nm),this.nm=void 0,this.om=void 0)}getNormalValue(){return void 0!==this.nm?this.nm:this.hm()}isAltered(){return void 0!==this.om&&this.hm()===this.om}}class Pl extends Fl{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,h),this.chart=n,this.am=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleX).setTickStyle(h.cursor3DTickStrokeStyleX).setTextFillStyle(h.cursor3DTickLabelFillStyleX).setTextFont(h.cursor3DTickLabelFontX).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(h.cursor3DTickLabelPaddingX),this.lm=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleY).setTickStyle(h.cursor3DTickStrokeStyleY).setTextFillStyle(h.cursor3DTickLabelFillStyleY).setTextFont(h.cursor3DTickLabelFontY).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(h.cursor3DTickLabelPaddingY),this.um=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleZ).setTickStyle(h.cursor3DTickStrokeStyleZ).setTextFillStyle(h.cursor3DTickLabelFillStyleZ).setTextFont(h.cursor3DTickLabelFontZ).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(h.cursor3DTickLabelPaddingZ),this.am.Zr=exports.TextObjectIdentifier.CursorTickMarker,this.lm.Zr=exports.TextObjectIdentifier.CursorTickMarker,this.um.Zr=exports.TextObjectIdentifier.CursorTickMarker}setTickX(t){return t(this.am),this.chart.pi.Bs(),this}setTickY(t){return t(this.lm),this.chart.pi.Bs(),this}setTickZ(t){return t(this.um),this.chart.pi.Bs(),this}setTicks(t){return t(this.am),t(this.lm),t(this.um),this.chart.pi.Bs(),this}dispose(){return super.dispose(),this.am.dispose(),this.lm.dispose(),this.um.dispose(),this}ir(){return this.am.setVisible(this.di&&this.Cg),this.lm.setVisible(this.di&&this.Cg),this.um.setVisible(this.di&&this.Cg),super.ir()}setPosition(...t){if(0===t.length)return this;const i=t[0];this.Cg=!0;const s=this.renderingScale,e=Fa(i.resultTableScale,s),r=e===this.scale?i.resultTable:q(i.resultTable,e,this.scale);this.Ky.setPosition(r),this.am.setValue(i.axisLocation.x),this.lm.setValue(i.axisLocation.y),this.um.setValue(i.axisLocation.z);let h=this.jy[0];if(!h){const t=new ho(this.Ws,this.renderingScale,this.scale,jt,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.jy.push(h),this.Xy.forEach((i=>i(t)))}return i.pointMarkerShape&&h.pointMarker.setShape(i.pointMarkerShape),i.pointMarkerSize&&h.pointMarker.setSize(i.pointMarkerSize),i.pointMarkerFillStyle&&h.pointMarker.setFillStyle(i.pointMarkerFillStyle),i.pointMarkerStrokeStyle&&h.pointMarker.setStrokeStyle(i.pointMarkerStrokeStyle),h.pointMarker.setPosition(r),this.chart.pi.Bs(),this}}class Bl{constructor(t,i){this.dm=[],this.fm=(t,i)=>(this.dm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Bl(this.Qy,this.dm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Bl(t,this.dm.map((t=>t))),this.Am=(t,i,s,e,r,h)=>this.fm(new Pl(t,i,s,e,this.Qy,r,h),r),this.Qy=t,this.dm=i}}const Dl=new Bl(io,[(t,i)=>{Il(t,i)}]),El=(t,i,s,e)=>{t.background.addEventListener(i,s,e),t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const r=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",r),()=>{t.background.removeEventListener(i,s),t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",r)}},Rl=(t,i,s,e)=>{var r,h,n,o,a,l;ss(),i.camera&&s.gm(),i.x&&t.axisX.fit(null!==(r=i.animationsEnabled)&&void 0!==r?r:void 0,null!==(h=i.stopScroll)&&void 0!==h?h:void 0),i.y&&t.axisY.fit(null!==(n=i.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=i.stopScroll)&&void 0!==o?o:void 0),i.z&&t.axisZ.fit(null!==(a=i.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=i.stopScroll)&&void 0!==l?l:void 0);let u=i.cursor;if(null!==u){u=null!=u?u:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(u);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const c=i.on;c&&Nt.requestAnimationFrame((()=>c({event:e})))},Ol=(t,i,s,e)=>{ss(),t.restorePreviousZoomState();const r=i.on;r&&Nt.requestAnimationFrame((()=>r({event:e})))};class zl extends fl{constructor(t,i,s,e,r,h,n){var o,l;super(t,i,s,i.Hg("chart3D bg",0),e,i.pi.bi.chart3DBackgroundFillStyle,i.pi.bi.chart3DBackgroundStrokeStyle,i.pi.bi.chart3DTitleFont,i.pi.bi.chart3DTitleFillStyle,i.pi.bi.chart3DTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.pm=1,this.vm=[],this.ym=2,this.xm=!0,this.Sm=!0,this.bm=!0,this.Mm=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.ua=[],this.wm=[],this._m=!1,this.km=()=>{if(this.ci)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.gA().find((t=>t.yp()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.wm.push(t),this.wm.length>100&&this.wm.shift())},this.xa=()=>{const t=this.np.Cm();this.Fm.Tm(t),this.Im.Tm(t);const i=this.Lm.viewportChanged(this.Pm());i&&this.Bm(i),this.pi.Bs()},this.D=new yt,this.pi.La(jh.To),this.Yr.tn("Chart3D"),this.Dm=s.d3(),this.Dm.x.W(-1,1),this.Dm.y.W(-1,1),this.Dm.z.W(-1,1),this.np=i.Em("chart3D layer3D",0,this.Dm),this.Fm=i.Rm("chart3D series bg",0),this.Im=i.Om("chart3D axis ui",1),this.zm={x:new tl(this,(l=()=>this.fv,{...el(l,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.gn().x)),Dp:t=>t.x,qp:(t,i)=>({x:t.x,y:i.y,z:i.z}),ef:c(0,-1,0),Wp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:c(0,i.y,i.z),gridlinePositionB:c(0,i.y,-i.z),gridlinePositionC:c(0,-i.y,-i.z)}},sv:()=>!0,ev:()=>!1,Kp:()=>!1}),this.Dm.x,this.bi,this.np,this.Im,this.eA,!1,this.vs),y:new tl(this,rl((()=>this.fv)),this.Dm.y,this.bi,this.np,this.Im,this.eA,!1,this.vs),z:new tl(this,hl((()=>this.fv)),this.Dm.z,this.bi,this.np,this.Im,this.eA,!1,this.vs)},this.Vm=this.np.Np([Ja.InternalUI],void 0).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this.bi.chart3DBoundingBoxStrokeStyle),this.yv=this.Fm.Tc(this.pi.ai,_n.Simple).qe(this.bi.chart3DSeriesBackgroundFillStyle).Ke(Tt).setPointerEvents(!0),this.mv=this.Fm.Tc(this.pi.ai,_n.Simple).qe(ae).Ke(this.bi.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.vv(this.yv,this.mv),this.Nm({x:1,y:1,z:1},!0),this.Lm=new gl(this.pi.ai,this.eA,this.Dm,((t,i)=>(i&&this.Bm(i),this.np.Xp(t)))),this.Gm=this.Lm.getDefaultCameraConfiguration(this.$m(this.Um),this.getProjection()),this.Bm(this.Gm);const u=Zt(n?n.cursorBuilder:void 0,Dl),d=i.Ym();this.jm=oA(this,d,u.Am(d,this.eA,this.eA,jt,this.bi,this),this,"show-pointed",Vl,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.addEventListener("resize",this.xa),this.xa(),this.jg(r,this.eA),this.Hm=(t=>{let i=!1,s=!1,e=!1;const r=(t=>{let i=!0,s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled();return{Wm:()=>{i&&(s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled()),i=!1},gm:()=>{t.setCameraLocation(s).setCameraAutomaticFittingEnabled(e),i=!0}}})(t);let h={};const n=()=>zt({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},h),o=h=>{const o=n();let a=!1,l=!1,u=!1;for(const t of Object.keys(o)){const i=o[t];"object"==typeof i&&(void 0!==i.ctrl&&(a=!0),void 0!==i.shift&&(l=!0),void 0!==i.alt&&(u=!0))}s=h.ctrlKey,i=h.shiftKey,e=h.altKey,("Control"===h.key&&a||"Shift"===h.key&&l||"Alt"===h.key&&u)&&h.preventDefault();const c=_e(o.restoreDefault,void 0,h,i,s,e);c&&c.code===h.code&&(di(h),Rl(t,c,r,h));const d=_e(o.restorePrevious,void 0,h,i,s,e);d&&d.code===h.code&&(di(h),Ol(t,d,0,h))},l=t=>{s=t.ctrlKey,i=t.shiftKey,e=t.altKey},u=()=>{s=!1,i=!1,e=!1};Nt.addEventListener("keydown",o),Nt.addEventListener("keyup",l),Nt.addEventListener("blur",u),t.addEventListener("dispose",(()=>{Nt.removeEventListener("keydown",o),Nt.removeEventListener("keyup",l),Nt.removeEventListener("blur",u)}));const c=t=>{},d=h=>{const o=ke(!1!==t.pi.Da.Ea),l=n(),u=_e(l.rotate,"drag",h,i,s,e),c=_e(l.pan,"drag",h,i,s,e);c&&o.push((()=>((t,i,s,e)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let h=i;"mouse"===i.pointerType&&i.preventDefault();const n=e=>{var r,n,o;if(e.pointerId!==i.pointerId)return;di(e);const a=e.clientX-h.clientX,l=e.clientY-h.clientY;if(h=e,s&&s.x){const i=a+-l;t.axisX.rv(-Math.sign(i)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s&&s.y){const i=-a+l;t.axisY.rv(Math.sign(i)*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s&&s.z){const i=-a+l;t.axisZ.rv(Math.sign(i)*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}const u=null==s?void 0:s.on;u&&Nt.requestAnimationFrame((()=>u({event:e})))},o=s=>{s.pointerId===i.pointerId&&(di(s),t.setCursorMode(r),Nt.removeEventListener("pointermove",n),Nt.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())},a=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),Nt.removeEventListener("pointermove",n),Nt.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())};Nt.addEventListener("pointermove",n),Nt.addEventListener("pointerup",o),t.engine.container.addEventListener("pointerdown",a),ss()})(t,h,c,f()))),u&&o.push((()=>((t,i,s,e,r)=>{const h=t.getCursorMode();t.setCursorMode(void 0);let n=i,o=!1,a=0;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var h,l;if(e.pointerId!==i.pointerId)return;di(e);const u={x:e.clientX-n.clientX,y:e.clientY-n.clientY};n=e,a+=Ls(u),r.Wm(),t.Xm({x:u.x*(null!==(h=s.sensitivity)&&void 0!==h?h:1),y:-u.y*(null!==(l=s.sensitivity)&&void 0!==l?l:1)}),o||(is(),o=!0);const c=s.on;c&&Nt.requestAnimationFrame((()=>c({event:e})))},u=s=>{s.pointerId===i.pointerId&&(di(s),t.setCursorMode(h),Nt.removeEventListener("pointermove",l),Nt.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e(),a>=10&&ts("click"))},c=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(h),Nt.removeEventListener("pointermove",l),Nt.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e())};Nt.addEventListener("pointermove",l),Nt.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",c),ss()})(t,h,u,f(),r)));const d=_e(l.zoom,"drag",h,i,s,e);d&&o.push((()=>((t,i,s,e,r)=>{const h=t.getCursorMode();t.setCursorMode(void 0);let n=i;"mouse"===i.pointerType&&i.preventDefault();const o=e=>{var h,o,a,l,u,c,d;if(e.pointerId!==i.pointerId)return;di(e);const f=e.clientX-n.clientX,A=e.clientY-n.clientY;if(n=e,s.x){const i=f+-A;t.axisX.hv(null!==(h=s.mode)&&void 0!==h?h:"centered",Math.sign(i),null!==(o=s.sensitivity)&&void 0!==o?o:1),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s.y){const i=-f+A;t.axisY.hv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i),null!==(l=s.sensitivity)&&void 0!==l?l:1),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s.z){const i=-f+A;t.axisZ.hv(null!==(u=s.mode)&&void 0!==u?u:"centered",-Math.sign(i),null!==(c=s.sensitivity)&&void 0!==c?c:1),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}if(s.camera){const i=f+-A;r.Wm(),t.Zm(-.15*Math.sign(i)*(null!==(d=s.sensitivity)&&void 0!==d?d:1))}const g=s.on;g&&Nt.requestAnimationFrame((()=>g({event:e})))},a=s=>{s.pointerId===i.pointerId&&(di(s),t.setCursorMode(h),Nt.removeEventListener("pointermove",o),Nt.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e())},l=i=>{t.setCursorMode(h),Nt.removeEventListener("pointermove",o),Nt.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e()};Nt.addEventListener("pointermove",o),Nt.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),ss()})(t,h,d,f(),r))),o.end();const A=_e(l.rotate,"pinch",h,i,s,e),g=_e(l.pan,"pinch",h,i,s,e),p=_e(l.zoom,"pinch",h,i,s,e);(A||p||g)&&((t,i,s,e,r,h,n)=>{if(!s&&!e&&!r)return;const o=u=>{if(u.pointerId===i.pointerId)return;const c=h();let d;t.engine.container.removeEventListener("pointerdown",o),Nt.removeEventListener("pointerup",l);let f,A=u;const g=u,p=t.getCursorMode();t.setCursorMode(void 0);const v=t.getCameraLocation();let y,m,x;const S=[],b=()=>{var h,o,l,c,p,b,w,_;M=void 0;const k=d,C=A;if(S.forEach((t=>{t.pointerId===i.pointerId?d=t:t.pointerId===u.pointerId&&(A=t)})),S.length=0,f=f||d,void 0===d||void 0===k||void 0===f)return;if(!m||!x){const i=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},s=(s,e)=>{const r=t.np.Xp(s),h=t.np.Xp(e);if(!r||!h)return{deg:-1,dir:{x:0,y:0}};const n=t.pi.sl({engineX:r.x,engineY:r.y}),o=t.pi.sl({engineX:h.x,engineY:h.y});return{deg:i(Gs(Ds(h,r))),dir:Fs(Ds({x:o.clientX,y:o.clientY},{x:n.clientX,y:n.clientY}))}},e=t.axisX.getInterval(),r=t.axisY.getInterval(),h=t.axisZ.getInterval(),n={x:s({x:e.start,y:r.start,z:h.start},{x:e.end,y:r.start,z:h.start}),y:s({x:e.start,y:r.start,z:h.start},{x:e.start,y:r.end,z:h.start}),z:s({x:e.end,y:r.start,z:h.start},{x:e.end,y:r.start,z:h.end})},o=t.pi.il(f),a=t.pi.il(g),l=i(Gs(Ds({x:a.engineX,y:a.engineY},{x:o.engineX,y:o.engineY})));m=["x","y","z"].reduce(((t,s)=>{const e=Math.abs(n[s].deg-l),r=Math.abs(i(n[s].deg+180)-l),h=Math.min(e,r);return Math.min(h,r)<t.angleDiff?{angleDiff:h,axis:s}:t}),{axis:"x",angleDiff:1e3}).axis,x=n[m].dir}const T=d.clientX-k.clientX,F=d.clientY-k.clientY,I=A.clientX-C.clientX,L=A.clientY-C.clientY,P=Math.sqrt((f.clientX-g.clientX)**2+(f.clientY-g.clientY)**2),B=Math.sqrt((d.clientX-A.clientX)**2+(d.clientY-A.clientY)**2),D=es.length(v),E=P/B*(null!==(h=null==r?void 0:r.sensitivity)&&void 0!==h?h:1)*D,R=a((null!==(o=null==s?void 0:s.sensitivity)&&void 0!==o?o:1)*(T+I)/2,(null!==(l=null==s?void 0:s.sensitivity)&&void 0!==l?l:1)*-(F+L)/2);n.Wm(),(s||(null==r?void 0:r.camera))&&(t.vm.push({type:"rotate+zoom",rotation:s?R:{x:0,y:0},cameraDistance:(null==r?void 0:r.camera)?E:D}),t.pi.Bs());const O=void 0===y?0:B-Ls(y)?1:-1,z=y?.25*(null!==(c=null==r?void 0:r.sensitivity)&&void 0!==c?c:1)*(B-Ls(y)):0;r&&r.x&&("x"===m||void 0===r.y&&void 0===r.z)&&(t.axisX.hv(null!==(p=r.mode)&&void 0!==p?p:"centered",O,z),!1!==r.stopScroll&&t.axisX.setStopped(!0)),r&&r.y&&("y"===m||void 0===r.x&&void 0===r.z)&&(t.axisY.hv(null!==(b=r.mode)&&void 0!==b?b:"centered",O,z),!1!==r.stopScroll&&t.axisY.setStopped(!0)),r&&r.z&&("z"===m||void 0===r.x&&void 0===r.y)&&(t.axisZ.hv(null!==(w=r.mode)&&void 0!==w?w:"centered",O,z),!1!==r.stopScroll&&t.axisZ.setStopped(!0));const V=(k.clientX+C.clientX)/2,N=(k.clientY+C.clientY)/2,G={x:(d.clientX+A.clientX)/2-V,y:(d.clientY+A.clientY)/2-N},$=zs(Fs(G),x),U=Ls(G)*$*.3*(null!==(_=null==e?void 0:e.sensitivity)&&void 0!==_?_:1);e&&e.x&&("x"===m||void 0===e.y&&void 0===e.z)&&(t.axisX.rv(-U),!1!==e.stopScroll&&t.axisX.setStopped(!0)),e&&e.y&&("y"===m||void 0===e.x&&void 0===e.z)&&(t.axisY.rv(-U),!1!==e.stopScroll&&t.axisY.setStopped(!0)),e&&e.z&&("z"===m||void 0===e.x&&void 0===e.y)&&(t.axisZ.rv(-U),!1!==e.stopScroll&&t.axisZ.setStopped(!0)),y={x:Math.abs(d.clientX-A.clientX),y:Math.abs(d.clientY-A.clientY)};const Y=(null==e?void 0:e.on)||(null==s?void 0:s.on)||(null==r?void 0:r.on);Y&&Nt.requestAnimationFrame((()=>Y({event:void 0})))};let M;const w=t=>{t.pointerId!==i.pointerId&&t.pointerId!==u.pointerId||(di(t),S.push(t),M||(M=Nt.requestAnimationFrame(b)))},_=s=>{s.pointerId!==i.pointerId&&s.pointerId!==u.pointerId||(di(s),t.setCursorMode(p),Nt.removeEventListener("pointermove",w),Nt.removeEventListener("pointerup",_),c(),M&&Nt.cancelAnimationFrame(M))};Nt.addEventListener("pointermove",w),Nt.addEventListener("pointerup",_),ss()},l=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",o),Nt.removeEventListener("pointerup",l))};t.engine.container.addEventListener("pointerdown",o),Nt.addEventListener("pointerup",l)})(t,h,A,g,p,f,r)};El(t,"wheel",(h=>{const o=ke(!1!==t.pi.Da.Ea),a=n(),l=_e(a.pan,"wheel",h,i,s,e);l&&o.push((()=>((t,i,s)=>{var e,r,h;di(i),s.x&&(t.axisX.rv(2*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.rv(2*Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.rv(2*Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0));const n=s.on;n&&Nt.requestAnimationFrame((()=>n({event:i})))})(t,h,l)));const u=_e(a.zoom,"wheel",h,i,s,e);u&&o.push((()=>((t,i,s,e)=>{var r,h,n,o,a,l,u;di(i),s.x&&(t.axisX.hv(null!==(r=s.mode)&&void 0!==r?r:"centered",-Math.sign(i.deltaY),3*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.hv(null!==(n=s.mode)&&void 0!==n?n:"centered",-Math.sign(i.deltaY),3*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.hv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i.deltaY),3*(null!==(l=s.sensitivity)&&void 0!==l?l:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),s.camera&&(e.Wm(),t.Zm(.5*Math.sign(i.deltaY)*(null!==(u=s.sensitivity)&&void 0!==u?u:1)));const c=s.on;c&&Nt.requestAnimationFrame((()=>c({event:i})))})(t,h,u,r))),o.end()})),El(t,"dblclick",(h=>{if(h.defaultPrevented)return;const o=ke(!1!==t.pi.Da.Ea),a=n(),l=_e(a.restoreDefault,void 0,h,i,s,e);l&&l.doubleClick&&(di(h),Rl(t,l,r,h));const u=_e(a.restorePrevious,void 0,h,i,s,e);u&&u.doubleClick&&(di(h),Ol(t,u,0,h)),o.end()})),El(t,"click",(h=>{if(h.defaultPrevented)return;const o=ke(!1!==t.pi.Da.Ea),a=n(),l=_e(a.restoreDefault,void 0,h,i,s,e);l&&l.singleClick&&(di(h),Rl(t,l,r,h));const u=_e(a.restorePrevious,void 0,h,i,s,e);u&&u.singleClick&&(di(h),Ol(t,u,0,h)),o.end()})),El(t,"contextmenu",(h=>{if(h.defaultPrevented)return;const o=ke(!1!==t.pi.Da.Ea),a=n(),l=_e(a.restoreDefault,"rmb",h,i,s,e);l&&l.singleClick&&(di(h),Rl(t,l,r,h));const u=_e(a.restorePrevious,"rmb",h,i,s,e);u&&u.singleClick&&(di(h),Ol(t,u,0,h)),o.end()}));const f=()=>(A(),g(),()=>{A=El(t,"pointermove",c),g=El(t,"pointerdown",d)});let A=El(t,"pointermove",c),g=El(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)h={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)h={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?h[i]=t[i]:h[i]={}},getUserInteractions:n}})(this),this.Jm(this.axisX),this.Jm(this.axisY),this.Jm(this.axisZ);const f={position:exports.LegendPosition.RightCenter,backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(f)}restorePreviousZoomState(t){if(this.wm.length<=1)return this;this.wm.pop();const i=this.wm[this.wm.length-1];return i?(this._m=!0,this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.li(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this._m=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Qm)this.wm.length=0;else for(;this.wm.length>1;)this.wm.unshift();return this}Jm(t){const i=()=>{this._m||(this.Qm&&Nt.clearTimeout(this.Qm),this.Qm=Nt.setTimeout((()=>{this.km(),this.Qm=void 0}),300))};Nt.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.wm.forEach((i=>{i.delete(t)}))}))}setUserInteractions(t){return this.Hm.setUserInteractions(t),this}getUserInteractions(){return this.Hm.getUserInteractions()}setProjection(t){this.np.Km(t);const i=this.Lm.projectionChanged(this.Pm(),t);return i&&this.Bm(i),this.pi.Bs(),this}getProjection(){return this.np.qm()}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Dl){const i=this.Eg(),s=t.Am(i,this.eA,this.eA,this.Lg(i),this.bi,this);return this.Ug(s),s}addPointSeries(t){const i=new(t&&t.type||ul)(this,this.gv,this.np,this.bi,this.pi.vs,t);return this.xv(i,t),i}addLineSeries(t){const i=new ol(this,this.gv,this.np,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs,t);return this.xv(i,t),i}addPointLineSeries(t){const i=new al(this,this.gv,this.np,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs,t);return this.xv(i,t),i}addSurfaceGridSeries(t){const i=new yl(this,this.gv,this.np,t,this.bi,this.pi.vs);return this.xv(i,t),i}addSurfaceScrollingGridSeries(t){const i=new ml(this,this.gv,this.np,t,this.bi,this.pi.vs);return this.xv(i,t),i}addBoxSeries(t){const i=new Xa(this,this.gv,this.np,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addMeshModel(t){const i=new kl(this,this.gv,this.np,this.bi,t,this.pi.vs);return this.xv(i,t),i}translateCoordinate(t,i,s){if(xl(i)||xl(s)||Sl(t)){if(xl(i)&&xl(s)&&Sl(t)){if("axes"===i.id&&"world"===s.id)return this.np.ix(t);if("world"===i.id&&"axes"===s.id)return this.np.sx(t);if(i.id===s.id)return t}if(xl(i)&&xe(s)&&Sl(t)){const i=this.np.Xp(t);return i?this.pi.sl({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(xl(i)&&be(s)&&Sl(t)){const i=this.np.Xp(t);return i?q(i,this.pi.ai,this.eA):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Ia(t,i,s,this.eA,this.pi)}getDefaultAxisX(){return this.zm.x}getDefaultAxisY(){return this.zm.y}getDefaultAxisZ(){return this.zm.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.zm.x,this.zm.y,this.zm.z]}setCameraLocation(t){let i={location:t,direction:es.normalize(es.multiply(t,-1))};const s=this.Lm.cameraLocationChanged(this.Pm(i));return s&&(i=s),this.Bm(i),this.pi.Bs(),this}getCameraLocation(){return this.np.getCameraLocation()}getCameraDirection(){return this.np.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.Lm.Nv(t);const i=this.Lm.cameraLocationChanged(this.Pm());return i&&this.Bm(i),this}getCameraAutomaticFittingEnabled(){return this.Lm.Jv()}setBoundingBoxStrokeStyle(t){return this.Vm.cr(t).Vp(Za(this.Vm.do())),this.np.Bs(),this}getBoundingBoxStrokeStyle(){return this.Vm.do()}setBoundingBox(t){return this.Nm(t,!1),this}Nm(t,i){this.Um=t;const s=this.$m(t);if(this.Dm.x.Z(s.x),this.Dm.y.Z(s.y),this.Dm.z.Z(-s.z),!i){const t=this.Lm.boundingBoxChanged(this.Pm());t&&this.Bm(t)}this.pi.Bs()}getBoundingBox(){return this.Um}ir(t){const i=Ha.tp(this.Yr,this.Wg);this.Os.forEach((t=>t.Nh(i,this.Gn)));const s=Xi;if(Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,s),0!==this.Mm){const i=this.Mm*t*.006;this.vm.push({type:"wheel-zoom",deltaY:i}),this.Mm=Math.sign(this.Mm)*Math.max(Math.abs(this.Mm)-.01*t,0),0!==this.Mm&&this.pi.Bs(!0)}const e=this.getCameraDirection();if(this.vm.length>0){const t=this.Lm.applyCameraInteractions(this.Pm(),this.vm);t&&this.Bm(t),this.vm.length=0}this.hx&&es.equals(this.hx.location,this.Gm.location)&&es.equals(this.hx.direction,this.Gm.direction)||this.D.R("camerachange",{cameraLocation:this.getCameraLocation()}),this.hx=this.Gm,super.ir(t);for(let t=0;t<this.fv.length;t+=1)this.fv[t].cp();for(let t=0;t<this.fv.length;t+=1)this.fv[t].ir();this.zm.x.pn(),this.zm.y.pn(),this.zm.z.pn();const r=this.zm.x.Nh(this.zm.x.Qp(e)),h=this.zm.y.Nh(this.zm.y.Qp(e)),n=this.zm.z.Nh(this.zm.z.Qp(e));this.zm.x.ir(r),this.zm.y.ir(h),this.zm.z.ir(n),this.jm.ir(!1,this.fv,void 0),super.Yg();const o=this.Dm,a=c(o.x.getInnerStart(),o.y.getInnerStart(),o.z.getInnerStart()),l=c(o.x.getInnerEnd(),o.y.getInnerEnd(),o.z.getInnerEnd());this.Vm.Vi().bu([c(l.x,a.y,a.z),c(l.x,l.y,a.z),c(l.x,l.y,l.z),c(l.x,a.y,l.z),c(a.x,a.y,l.z),c(a.x,l.y,l.z),c(l.x,l.y,l.z),c(l.x,l.y,a.z),c(a.x,l.y,a.z),c(a.x,l.y,l.z),c(a.x,a.y,l.z),c(a.x,a.y,a.z)]);const u=[c(a.x,a.y,a.z),c(l.x,a.y,a.z),c(a.x,l.y,a.z),c(l.x,l.y,a.z),c(a.x,a.y,l.z),c(l.x,a.y,l.z),c(a.x,l.y,l.z),c(l.x,l.y,l.z)].map((t=>this.np.Xp(t))),d=this.np.Xp(c((a.x+l.x)/2,(a.y+l.y)/2,(a.z+l.z)/2)),f=Ci(u,d),A=[];for(let t=0;t<f.length;t+=1){const i=f[t];_s(i,d,f[t>0?t-1:f.length-1],f[t<f.length-1?t+1:0])||A.push(i)}const g=Ci(A,d);this.yv.au(g),this.mv.au(g);for(let t=0;t<this.fv.length;t+=1)this.fv[t].dp();this.Os.forEach((t=>t.ir(i,this.Gn)))}dispose(){return this.ua.forEach((t=>{t()})),this.ua.length=0,this.Dm.G(),this.np.G(),this.Im.G(),this.Fm.G(),this.jm.G(),super.dispose()}j(){return this.Dm.x.j(),this.Dm.y.j(),this.Dm.z.j(),super.j()}H(){return super.H()}Bm(t){this.np.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(es.addVec(t.location,es.multiply(t.direction,-this.ym))),this.Gm=t,this.pi.Bs()}$m(t){return es.divide(t,es.length(t)/this.pm)}Pm(t=this.Gm){return{boundingBox:this.$m(this.Um),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.zm.x),t(this.zm.y),t(this.zm.z),this}getSeries(){return this.fv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.xm=!!t,this}getAnimationZoom(){return this.xm}Xm(t){this.vm.push({type:"rotate",rotation:t}),this.pi.Bs()}Zm(t){this.xm?Math.sign(this.Mm)!==Math.sign(t)?this.Mm=t:this.Mm+=t:this.vm.push({type:"wheel-zoom",deltaY:t}),this.pi.Bs()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Vl=(t,i,s)=>{var e,r;const h=t.axisX.getTitle()||void 0,n=t.axisY.getTitle()||void 0,o=t.axisZ.getTitle()||void 0;return st(i)?eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...h?[h,""]:[],{text:Te(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...n?[n,""]:[],{text:Te(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Te(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Te(i.lut?he(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):rt(i)?eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==i.value?["Value","",{text:Te(i.lut?he(i.lut,i.value):i.value.toFixed(2),null===(r=i.lut)||void 0===r?void 0:r.units),font:{weight:"bold"}}]:[]]):eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...h?[h,""]:[],{text:Te(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...n?[n,""]:[],{text:Te(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Te(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])};class Nl extends Fl{setPosition(...t){const i=this.renderingScale;if(t.length>0){const s=Fa(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:q(t[0].resultTable,s,this.scale);this.Ky.setPosition(e)}return this.Cg=!1,this.jy.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=Fa(t.pointMarkerScale,i),r=e===this.scale?t.pointMarker:q(t.pointMarker,e,this.scale);let h=this.jy[s];if(!h){const t=new ho(this.Ws,this.renderingScale,this.scale,jt,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.jy.push(h),this.Xy.forEach((i=>i(t)))}t.pointMarkerShape&&h.pointMarker.setShape(t.pointMarkerShape),t.pointMarkerSize&&h.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&h.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&h.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle),h.pointMarker.setPosition(r),h.targetVisible=((t,i,s=i)=>{const e=i!==s?q(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),h.targetVisible&&(this.Cg=!0)})),this.Ws.Bs(),this}}class Gl{constructor(t,i=[]){this.dm=[],this.fm=(t,i)=>(this.dm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Gl(this.Qy,this.dm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Gl(t,this.dm.map((t=>t))),this.Am=(t,i,s,e,r)=>this.fm(new Nl(t,i,s,e,this.Qy,r),r),this.Qy=t,this.dm=i}}const $l=new Gl(io,[Il]),Ul=$l,Yl=$l,jl=$l,Hl=$l,Wl=Ul,Xl=new Gl(io,[Il,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(qr.LeftBottom)))]),Zl=$l,Jl={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},Ql={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},Kl={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},ql={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},tu={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},iu={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},su={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},eu={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},ru={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},hu={World:iu,USA:su,NorthAmerica:eu,SouthAmerica:ru,Canada:ql,Europe:tu,Asia:Ql,Africa:Jl,Australia:Kl},nu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},ou=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),au=(t,i)=>{let s=i.geometry;return s=lu(t,i,s),s=uu(t,i,s),s},lu=(t,i,s)=>{if(t===nu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],r=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?r[t]={x:i.x+360,y:i.y}:r[t]=i}}return t}return s},uu=(t,i,s)=>{const e=i.name.toLowerCase();let r;if(t===nu.USA&&("alaska"===e?r={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(r={translate:{x:48,y:7},scale:{x:1,y:1}})),r){const{translate:t,scale:h}=r,n=Ss(Xt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const r=s[i],a=o[i];for(let i=0;i<r.length;i+=1){const s=r[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*h.x+n.min.x,y:t.y+(s.y-n.min.y)*h.y+n.min.y}}}return i.outlier=!0,i.transform={...r,vertexBoundaries:n},o}return s},cu={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},du={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class fu extends ja{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("mapChart bg",0),e,i.pi.bi.mapChartBackgroundFillStyle,i.pi.bi.mapChartBackgroundStrokeStyle,i.pi.bi.mapChartTitleFont,i.pi.bi.mapChartTitleFillStyle,i.pi.bi.mapChartTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.nx=[],this.ai=this.Bg.d2({scaleXYConstructor:Z}),this.ox=!0,this.lx=this.bi.mapChartSeparateRegionFillStyle,this.ux=this.bi.mapChartSeparateRegionStrokeStyle,this.Er=!0,this.Ax=0,this.gx=!0,this.vx=new Map,this.regions=new yt,this.yx=t=>{this.ai.x.Z(t.engineWidth).St([this.ot.left+this.Gn.left,this.ot.right+this.Gn.right]),this.ai.y.Z(t.engineHeight).St([this.ot.bottom+this.Gn.bottom,this.ot.top+this.Gn.top+Ha.tp(this.Yr,this.Wg)]),this.mx&&this.xx(this.Sx,this.ai,this.mx)},this.D=new yt,this.pi.La(jh.Io),this.Er=!1!==(null==h?void 0:h.animationsEnabled),this.bx=i.Om("mapChart plotting",0),this.addEventListener("resize",this.yx),this.Yr.tn("Map Chart");const a=i.Ym(),l=Zt(h?h.cursorBuilder:void 0,Xl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),void 0,"show-pointed",gu,(()=>0)),this.Mx=this.vs.aA(),this.jg(r,this.uiScale),this.wx=this.bx.Yp(this.ai).setPointerEvents(this.ox).qe(this.bi.mapChartFillStyle).Ke(this.bi.mapChartStrokeStyle),this.regions.Ni(this.wx,(t=>{if(!this._x)return;const i=this.kx(this._x,t);return i?i.region:void 0})),this.wx.addEventListener("pointermove",((t,i)=>{const s=i.collectionMember;if(!this._x||!s)return;const e=this.kx(this._x,s);this.Cx(e),this.gx&&e&&this.pi.Ms.Vs(e.region,!0)})),this.wx.addEventListener("pointerleave",((t,i)=>{const s=i.collectionMember;if(!this._x||!s)return;const e=this.kx(this._x,s);this.Tx(),this.gx&&e&&this.pi.Ms.Vs(e.region,!1)})),this.Fx=this.bx.Yp(this.ai).setPointerEvents(this.ox).qe(this.bi.mapChartOutlierRegionFillStyle).Ke(this.bi.mapChartOutlierRegionStrokeStyle);const u=Zt(h&&h.type,nu.World);this.Sx=u,this.Ix(u).then((()=>{this.D.R("ready",{})}));const c={renderOnTop:!0,backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(c)}setFillStyle(t){return this.wx.qe(t),this.Os.forEach((t=>{t.xg()&&t.add(this)})),this.Os.forEach((t=>t.zs())),this.pi.Bs(),this}getFillStyle(){return this.wx.Mh()}setStrokeStyle(t){return this.wx.Ke(t),this.pi.Bs(),this}getStrokeStyle(){return this.wx.Ja()}setEffect(t){return this.Mx.Ps(t),this.pi.Bs(),this}getEffect(){return this.Mx.Ds()}setOutlierRegionFillStyle(t){return this.Fx.qe(t),this.pi.Bs(),this}getOutlierRegionFillStyle(){return this.Fx.Mh()}setOutlierRegionStrokeStyle(t){return this.Fx.Ke(t),this.pi.Bs(),this}getOutlierRegionStrokeStyle(){return this.Fx.Ja()}setSeparateRegionFillStyle(t){return this.lx="function"==typeof t?t(this.lx):t,this.nx.forEach((t=>t.qe(this.lx))),this.pi.Bs(),this}getSeparateRegionFillStyle(){return this.lx}setSeparateRegionStrokeStyle(t){return this.ux="function"==typeof t?t(this.ux):t,this.nx.forEach((t=>t.Ke(this.ux))),this.pi.Bs(),this}getSeparateRegionStrokeStyle(){return this.ux}invalidateRegionValues(t){if(!this._x||!this.Lx)return this.Px=this.Px||[],this.Px.push(t),this;if("function"==typeof t)for(let i=0;i<this._x.regions.length;i+=1){const s=this._x.regions[i],e=this.Lx[i],r=t({...s,geometry:void 0},e);if(void 0!==r&&r!==e){this.Lx[i]=r;const t=this.vx.get(s);null==t||t.forEach((t=>{t.Bx(r)}))}}else for(const i of t)if(i)for(let t=0;t<this._x.regions.length;t+=1){const s=this._x.regions[t],e=this.Lx[t];if(void 0!==i.value&&i.value!==e&&ou(s,i)){this.Lx[t]=i.value;const e=this.vx.get(s);null==e||e.forEach((t=>{t.Bx(i.value)}))}}return this.Os.forEach((t=>{t.xg()&&t.add(this)})),this.pi.Bs(),this}setPointerEvents(t){return this.ox=t,this.wx.setPointerEvents(t),this}getPointerEvents(){return this.ox}setHighlight(t){var i;return t=Gi(t),this.Ax=t,null===(i=this._x)||void 0===i||i.regions.forEach((i=>{this.pi.Ms.Vs(i,t)})),this.D.R("highlightchange",{highlight:t}),this}getHighlight(){return this.Ax}setAnimationHighlight(t){var i;return null===(i=this._x)||void 0===i||i.regions.forEach((i=>{this.pi.Ms.Ns(i,t)})),this}getAnimationHighlight(){var t;return this.pi.Ms.Gs(null===(t=this._x)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.gx=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.gx}async Ix(t){const i=await((t,i)=>{let s;if(t===nu.World)s="countries_world.json";else if(t===nu.NorthAmerica)s="countries_northAmerica.json";else if(t===nu.SouthAmerica)s="countries_southAmerica.json";else if(t===nu.Africa)s="countries_africa.json";else if(t===nu.Europe)s="countries_europe.json";else if(t===nu.Asia)s="countries_asia.json";else if(t===nu.USA)s="states_usa.json";else if(t===nu.Canada)s="territoriesProvinces_canada.json";else{if(t!==nu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Nt.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void Nt.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${Nt.location.origin}/resources${t.fileName}`;Nt.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;Nt.fetch(s).then((i=>{Nt.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>ji(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.Pg.me);this.Lx=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=cu[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.Fx.Ho().au(i);if(t===nu.USA){const t=25.8,i=29.7;this.nx.push(this.Ig.tr(this.ai).setPointerEvents(!1).qe(this.lx).Ke(this.ux).sr({x:-126,y:t}).Z({x:10,y:i-t}),this.Ig.tr(this.ai).setPointerEvents(!1).qe(this.lx).Ke(this.ux).sr({x:-113,y:t}).Z({x:7,y:i-t}))}const e=this.pi.Ms.jo(this.wx,{animationEnabled:this.Er});for(let s=0;s<i.regions.length;s+=1){const r=i.regions[s],h=au(t,r),n=[];for(const t of h)t.length<3||n.push(this.wx.Ho().au(t));this.vx.set(r,n),e.Ho(r,(t=>{n.forEach((i=>i.Ii(t)))}))}if(this.Mx.ks([this.wx]),this.mx=s,this.xx(t,this.ai,s),this._x=i,this.Px){for(const t of this.Px)this.invalidateRegionValues(t);this.Px=void 0}this.pi.Bs()}xx(t,i,s){const e=du[t],r=i.x.getCellSize(),h=i.y.getCellSize()/r,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(h<e){const t=(n.max.x-n.min.x)*(e/h-1);n.min.x-=t/2,n.max.x+=t/2}else if(h>e){const t=(n.max.y-n.min.y)*(h/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.W(n.min.x,n.max.x),i.y.W(n.min.y,n.max.y);const o=this.ai.x.Tt(),a=this.ai.y.Tt();this.D.R("viewchange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Cx(t){this.Dx=t,this.pi.Bs()}Tx(){this.Dx=void 0,this.pi.Bs()}kx(t,i){const s=Array.from(this.vx.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],r=this.pi.Ia();if(!r)return;const h=this.pi.il(r),n=this.Lx&&this.Lx[s];let o=q({x:h.engineX,y:h.engineY},this.pi.ai,this.ai);o={x:Wt(o.x,this.ai.x.getInnerStart(),this.ai.x.getInnerEnd()),y:Wt(o.y,this.ai.y.getInnerStart(),this.ai.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:h.engineX,y:h.engineY},pointMarkerScale:this.pi.ai,resultTable:{x:h.engineX,y:h.engineY},resultTableScale:this.pi.ai},region:e,value:n,longitude:l,latitude:a,lut:ye(c)?c.lut:void 0}}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Xl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}setAnimationsEnabled(t){return this.Er=!t,this}getAnimationsEnabled(){return this.Er}getMinimumSize(){}bg(){return[this]}ir(t){super.ir(t),super.Yg();const i=Ha.tp(this.Yr,this.Wg),s=this.Os.reduce(((t,s)=>{const e=s.Nh(i,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,s);const e=A(this.ai.x.bt()+s.left,this.ai.y.bt()+s.bottom,this.ai.x.wt()-s.right,this.ai.y.wt()-s.top);return this.bx.Tm(e),this.jm.ir(!1,[],void 0,{explicitTarget:this.Dx}),this.Os.forEach((t=>t.ir(i,this.Gn))),this}dispose(){return this.bx.G(),this.jm.G(),Ua(this.ai),super.dispose()}j(){return super.j(),this.ai.j(),this}H(){return super.H(),this.ai.H(),this}Ys(){return Pi(this.getFillStyle(),this.wx._i())}er(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Au=(t,i)=>{const s=t>0,e=i>0;return`${[Di(Math.abs(0|t),2),"° ",Di(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Di(Math.abs(0|i),2),"° ",Di(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},gu=(t,i,s)=>{var e;const r=[[{text:i.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Au(i.longitude,i.latitude)]];return void 0!==i.value&&r.push({text:Te(i.lut?he(i.lut,i.value):i.value.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),r};class pu extends Lh{constructor(t,i,s,e,r,h,n,o,a){super(t,i,i.Ex(s),e,r,{numeric:i.Rx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.Rx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.Rx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.D=new yt,this.Ox=h,this.zx=n,this.Vx=o,this.vs=a,this.Nx=s,this.Gx=i.Rx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Jr=o._n(s).setPointerEvents(!1).Ch(i.Rx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).qe(i.Rx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Ih=this.vs.aA([this.Jr]).Ps(e.effectsText)}setTickStrategy(t,i){return super.fh(t,i)}setStrokeStyle(t){return this.Gx="function"==typeof t?t(this.Gx):t,this.zx.Bs(),this}getStrokeStyle(){return this.Gx}Yh(t){return{}}Xh(t,i,s,e){const r=this.$x(this.Nx,t,i.Fr);return{keyValue:t,tickLevel:i,labelText:s,labelPosition:Bs(this.Ux(this.Nx,t),r.padding),labelAlignment:r.alignment,labelRotation:r.rotation,labelOffset:r.offset}}sn(t,i,s,e){return new vu(i,t,this.Nx,this.Vx,this.Yx(this.Ox,this.Nx),this.Vx.dr(this.Nx).setPointerEvents(!1))}Kr(){return this.Nx}ir(t){this.jx(this.Nx,this.Gx,t.yA),this.Hx(this.Nx,this.Jr,t.yA),t.ticksInfo.forEach(((t,i)=>{i.zh.sr(t.labelPosition).Zl(t.labelAlignment).Th(t.labelRotation).$l(t.labelOffset.x,t.labelOffset.y),this.Wx&&!1===this.Wx(i)&&i.zh.setVisible(!1),this.Xx(this.Nx,i.Zx,i.Jx,i)}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class vu extends Ph{constructor(t,i,s,e,r,h,n){super(t,i,e,s,n),this.Zx=r,this.Jx=h,r.setPointerEvents(!1),this.gs.push(r,h)}}class yu extends pu{constructor(t,i,s,e,r,h,n,o,a){super(t,mu((()=>this.gA())),i,s,e,r,h,n,o),this.zp=this.zx.dr(this.Nx).setPointerEvents(!1),this.Qx=a,this.setScrollStrategy(gh.expansion),this.setTickStrategy(ph.Numeric),this.setTitle("Amplitude"),this.Jr.qh(s.polarAmplitudeAxisTitleShadow)}gA(){return this.Qx()}Qh(t,i,s){return{ticksInfo:i,yA:this.ln(((t,i)=>{const s=i.kn.Fr,e=.5*this.Gx.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.zh.Nh().bc().y);return Math.max(t,e)}),0),updatedTicks:s}}vn(t,i){return Ie(t,i,this.Nx.y)}xn(t,i,s){const e=2*Math.abs(i-t),r=this.Nx.x.Jt(e);return{start:t+s.start*r*Math.sign(t-i),end:i+s.end*r*Math.sign(i-t)}}Ux(t,i){return{x:t.ue()?i-t.le().start:t.le().start-i,y:0}}Yx(t,i){return t._d(i)}Xx(t,i,s,e){const r=e.kn.Fr,h=t.ue()?e.M-t.le().start:t.le().start-e.M;Ht(e.M,t.le().start)||Ht(e.M,t.le().end)?i.setVisible(!1):i.setVisible(!0).Qu(0).Ar(360).rc(void 0).sc(0).Ku(h).rc(60).qe(ae).Ke(r.gridStrokeStyle);const n=.5*this.Gx.getThickness();s.gr({x:h,y:-n*t.ni().y}).Ar({x:h,y:-(n+r.tickLength)*t.ni().y}).cr(r.tickStyle)}$x(t,i,s){return{alignment:{x:0,y:1},padding:{x:0,y:t.ni().y*-(.5*this.Gx.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}jx(t,i,s){const e=t.ue()?t.le().end-t.le().start:t.le().start-t.le().end;this.zp.gr({x:0,y:0}).Ar({x:e,y:0}).cr(i)}Hx(t,i,s){const e=t.ue()?(t.le().start+t.le().end)/2-t.le().start:t.le().start-(t.le().start+t.le().end)/2;i.Zl({x:0,y:1}).sr({x:e,y:-s*t.ni().y})}}const mu=t=>({...el(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),Ex:t=>({getInnerStart:()=>t.le().start,getInnerEnd:()=>t.le().end,W:(i,s)=>t.oe(i,s),et:(i,s,e,r,h)=>t.y.et(i,s,e,r,h)}),Rx:t=>t.amplitude});class xu{constructor(t,i,s,e){this.Kx=!1,this.D=new yt,this.Ce=t,this.qx=i,this.fv=s,this.Cc=e}setGeometry(t){return this.tS=t,this.Kx=!0,this.Ce.pi.Bs(),this}getGeometry(){return this.tS}setPointerEvents(t){return this.Cc.setPointerEvents(t),this}dispose(){return this.Cc.dispose(),this.qx(this),this.D.R("dispose",{}),this}setVisible(t){const i=this.Cc.getVisible()!==t;return this.Cc.setVisible(t),i&&this.D.R("visiblechange",{isVisible:t}),this.Ce.pi.Bs(),this}getVisible(){return this.Cc.getVisible()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Su extends De{constructor(){super(...arguments),this.rp=!0,this.ep=!0}setAutoScrollingEnabled(t){return this.rp=t,this.chart.pi.Bs(),this}getAutoScrollingEnabled(){return this.rp}cp(){}ir(){}dp(){}setCursorEnabled(t){return this.ep=t,this}getCursorEnabled(){return this.ep}ap(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.op=t,this}getCursorFormattingOverride(){return this.op}}class bu extends Su{constructor(t,i,s,e,r,h){super(i,s,r,h),this.Ws=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.iS?this.iS.min:void 0}getAmplitudeMax(){return this.iS?this.iS.max:void 0}}const Mu=(t,i)=>{const s=[],e=i.le().start,r=i.le().end,h=i.ue(),n=i.de()?1:-1,o=i.Ae(),a=Math.abs(r-e),l=Math.min(e,r)+.001*a,u=Math.max(e,r)-.001*a;for(const i of t){const t=Wt(i.amplitude,l,u),r=i.angle*Math.PI/180-o,a=Math.cos(r*n)*(h?t-e:e-t),c=Math.sin(r*n)*(h?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},wu=t=>{const i={min:rs,max:hs};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},_u=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),ku=(t,i)=>{let s=Gs(t);for(i.de()||(s*=-1),s+=180*i.Ae()/Math.PI;s<0;)s+=360;s%=360;const e=Ls(t),r=i.le(),h=Math.abs(r.end-r.start);return{angle:s,amplitude:Ne(r.start,r.end,e/h),color:t.color?_(t.color):void 0}};class Cu extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,n),this.Rs="Polygon Series",this.sS=[],this.eS=[],this.rS=t=>{const i=this.eS.indexOf(t);i>=0&&this.eS.splice(i,1);const s=this.sS.findIndex((i=>i===t.Cc));s>=0&&this.sS.splice(s,1),this.Ws.Bs()},this.D=new yt,this.Ze=Ei(this.bi.polarPolygonSeriesFillStyle,h),this.Je=Ei(this.bi.polarPolygonSeriesStrokeStyle,h)}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=we(e,this.sS,((t,i)=>{const s=t.yd(i);if(s)return q(s,this.scale,t.pi.ai)}),ps);if(!r)return;const h=q(r[0],r[1].pi.ai,this.scale);if(!this.hS(r[1]))return;const n=ku(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...n}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new xu(this.chart,this.rS,this,this.nS());return this.eS.push(t),t}setFillStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;for(const t of this.sS)t.qe(i);return this.Ws.Bs(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){this.Je="function"==typeof t?t(this.Je):t;const i=this.Je;for(const t of this.sS)t.Ke(i);return this.Ws.Bs(),this}getStrokeStyle(){return this.Je}xp(){return this.rp&&void 0!==this.eS.find((t=>void 0!==t.oS))&&this.getVisible()}ir(){this.eS.forEach((t=>{(t.Kx||this.scale.ge())&&t.aS&&(t.Cc.au(Mu(t.aS,this.scale)),t.Kx=!1,t.Cc.Nh())}))}cp(){super.cp();const t=f(rs,hs);this.eS.forEach((i=>{if(!i.tS)return;const s=!i.Kx&&i.aS?i.aS:_u(i.tS);i.aS=s;const e=!i.Kx&&i.oS?i.oS:wu(s);i.oS=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.iS=t}rr(t,i){t.Ii(i),this.Ws.Bs()}er(){return{fill:this.Ze,stroke:this.Je}}nS(){const t=this.Ws.Tc(this.scale,_n.Simple).qe(this.Ze).Ke(this.Je).Ii(this.getHighlight());return this.sS.push(t),this._s(t),t}hS(t){return this.eS.find((i=>i.Cc===t))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Tu extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,n),this.Rs="Area Series",this.lS=[],this.uS=!1,this.cS=!1,this.dS=!1,this.D=new yt,this.Ze=Ei(this.bi.polarAreaSeriesFillStyle,h),this.Je=Ei(this.bi.polarAreaSeriesStrokeStyle,h)}setData(t){0!==this.lS.length&&this.chart.pi.La(jh.Ro);const i=(t=>{const i=[];let s,e,r=!1;for(let h=0;h<t.length;h+=1){const n=t[h];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Ht(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):r=!0,s=n}return{progressivePoints:i,userDataModified:r}})(t);return i.userDataModified&&!1===this.dS&&(console.warn(`${this.Rs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.dS=!0),this.lS=i.progressivePoints,this.uS=!0,this.iS=wu(this.lS),this.Ws.Bs(),this}getData(){return this.lS}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Ws.Bs(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.Ws.Bs(),this}getStrokeStyle(){return this.Je}setConnectDataAutomaticallyEnabled(t){return this.cS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.cS}xp(){return this.rp&&this.lS.length>0&&this.getVisible()}er(){return{fill:this.Ze,stroke:this.Je}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Fu extends Tu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,h,n),this.fS=this.Ws.Tc(this.scale,_n.Simple).Ii(this.getHighlight()),this._s(this.fS)}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=this.fS.yd(e);if(!r)return;const h=ku(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...h}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}ir(){if(this.uS||this.scale.ge()){const t=this.lS,i=!0===this.cS?Mu(t,this.scale):[...Mu(t,this.scale),{x:0,y:0}];this.fS.au(i).qe(this.Ze).Ke(this.Je),this.uS=!1,this.fS.Nh()}}rr(t,i){t.Ii(i),this.Ws.Bs()}}class Iu extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,n),this.Rs="Line Series",this.lS=[],this.uS=!1,this.cS=!1,this.D=new yt,this.hc=Ei(this.bi.polarLineSeriesStrokeStyle,h),this.AS=t.Np(e,void 0,[Ja.UserSeries]).cr(this.hc).Ii(this.getHighlight()),this._s(this.AS)}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=this.AS.gS(e);if(!r)return;const h=ku(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...h}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.lS.length&&this.chart.pi.La(jh.Ro),this.lS=_u(t),this.uS=!0,this.iS=wu(this.lS),this.Ws.Bs(),this}getData(){return this.lS}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.AS.cr(i),this.Ws.Bs(),this}getStrokeStyle(){return this.hc}setConnectDataAutomaticallyEnabled(t){return this.cS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.cS}xp(){return this.rp&&this.lS.length>0&&this.getVisible()}rr(t,i){t.Ii(i),this.Ws.Bs()}ir(){if(this.uS||this.scale.ge()){const t=Mu(this.lS,this.scale),i=Ss(t);this.cS?(t.push({...t[0]}),this.AS.Lu(!0)):this.AS.Lu(!1),this.AS.Vi().bu(t).Ti(i),this.uS=!1,this.AS.Nh()}}er(){return{stroke:this.hc}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Lu extends zh{constructor(t,i,s,e,r,h,n,o,a){super(),this.xi=Zi(),this.ci=!1,this.D=new yt,this.pS=e,this.vS=r,this.yS=h,this.mS=n,this.xS=o,this.Ws=t,this.scale=i,this.SS=s,this.bi=a}bS(t){this.MS=t}setHighlight(t){const i=Gi(t);return this.wS=i<=0?void 0:i,this.MS&&this.MS.Ii(i),this.D.R("highlightchange",{highlight:i}),this}dispose(){return this.SS&&this.SS(this),this.Ws.pi.Bs(),this.D.R("dispose",{}),this.ci=!0,this}setVisible(t){return super.setVisible(t),this.yS(),this.Ws.pi.Bs(),this}isDisposed(){return this.ci}setPointerEvents(t){return this.mS(this,t),this}getPointerEvents(){return this.xS(this)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Pu extends Lu{constructor(t,i,s,e,r,h,n,o,a,l,u,c,d,A,g,p,v,y){super(i,s,e,r,h,n,o,a,y),this._S=1,this.kS=1,this.fv=t,this.Ws=i,this.scale=s,this.dimensionStrategy=l,this.start=u,this.end=c,this.lowerExtreme=d,this.lowerQuartile=A,this.median=g,this.upperQuartile=p,this.upperExtreme=v,this.boundaries=f(this.dimensionStrategy.toPoint(u,d),this.dimensionStrategy.toPoint(c,v)),this.CS=this.bi.boxSeriesBodyFillStyle,this.TS=this.bi.boxSeriesBodyStrokeStyle,this.hc=this.bi.boxSeriesStrokeStyle,this.FS=this.bi.boxSeriesMedianStrokeStyle,this.Nh()}Qi(t,i){const s=this.fv.Xs.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...s,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return this.boundaries}setBodyWidth(t){return this._S=t,this.Nh(),this}getBodyWidth(){return this._S}setBodyFillStyle(t){return this.CS="function"==typeof t?t(this.CS):t,this.vS(),this}getBodyFillStyle(){return this.CS}setBodyStrokeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.vS(),this}getBodyStrokeStyle(){return this.TS}setTailWidth(t){return this.kS=t,this.Nh(),this}getTailWidth(){return this.kS}setStrokeStyle(t){return this.hc="function"==typeof t?t(this.hc):t,this.vS(),this}getStrokeStyle(){return this.hc}setMedianStrokeStyle(t){return this.FS="function"==typeof t?t(this.FS):t,this.vS(),this}getMedianStrokeStyle(){return this.FS}Nh(){this.pS()}getDominantStyle(){return this.getBodyFillStyle()}}class Bu extends Su{constructor(t,i,s,e,r,h,n,o,a,l){super(t,i,a,l),this.Hs=!0,this.gs=new Map,this.chart=t,this.Ws=s,this.axisX=e,this.axisY=r,this.axisXAttachHandler=h,this.axisYAttachHandler=n,this.scale=me(e.ai,r.ai),this.LS=t.PS,t.PS+=1,this.BS(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}hl(){const t=Array.from(this.gs.keys());for(const i of t){const t=i.hl();if(t)return t}}setClipping(t){return this.Hs=t,this.Ws.Bs(),this}getClipping(){return this.Hs}attacheAxis(){this.DS=this.axisXAttachHandler(this),this.ES=this.axisYAttachHandler(this)}_s(t,i){super._s(t,i),t.nl(this.LS)}getName(){const t=this.ws(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Rs||i.length>0&&i||"Series"}setDrawOrder(t){return this.LS=t.seriesDrawOrderIndex,this.gs.forEach(((t,i)=>{i.nl(this.LS)})),this.chart.pi.Bs(),this}dispose(){return super.dispose(),this.DS(this),this.ES(this),this.chart.legend.remove(this),this}dp(){super.dp(),Ce(this.Hs,Array.from(this.gs.keys()),this.scale)}getXMax(){var t;return null!==(t=this.RS(!1))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.OS(!1))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.zS(!1))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.VS(!1))&&void 0!==t?t:0}getBoundaries(){return f(a(this.getXMin()||0,this.getYMin()||0),a(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Du=(t,i,s,e)=>{const r=t.length;let h=0;if(void 0!==i){const r=s-i;if(r>0){const i=t.slice(h,r);h+=r,e(i,!0)}}for(;h<r;){const i=t.slice(h,h+s);h+=s,e(i,!1)}};class Eu extends Bu{constructor(t,i,s,e,r,h,n,o,a,l){super(t,i,s,e,r,h,n,o,a,l),this.NS=[],this.GS=void 0,this.$S=!1,this.SS=t=>{const i=this.NS.findIndex((i=>i===t));i>=0&&this.NS.splice(i,1),this.$S=!0,this.GS=void 0,this.Ws.Bs()},this.pS=()=>{this.GS=void 0,this.$S=!0,this.chart.pi.Bs()},this.vS=()=>{this.$S=!0,this.chart.pi.Bs()},this.yS=()=>{this.GS=void 0,this.$S=!0,this.chart.pi.Bs()},this.mS=(t,i)=>{this.setPointerEvents(i)},this.US=t=>this.getPointerEvents(),this.ds=exports.HighlightModes.onHoverIndividual}getFigures(){return this.NS.slice()}setPointerEvents(t){return super.setPointerEvents(t),this.gs.forEach(((i,s)=>s.setPointerEvents(t))),this}yp(){return this.NS.length>0}ir(){super.ir(),this.$S&&(this.YS(this.NS),this.$S=!1)}clear(){return this.NS.slice().forEach(Yt),this.NS.length=0,this.$S=!0,this.GS=void 0,this.Ws.Bs(),this}jS(t,i){void 0!==i?this.NS.splice(i,0,t):this.NS.push(t),this.$S=!0,this.HS&&this.HS(t),this.D.Gi(t),this.Ws.Bs(),t.addEventListener("pointerenter",(()=>{this.ds===exports.HighlightModes.onHoverIndividual&&t.setHighlight(!0)})),t.addEventListener("pointerleave",(()=>{this.ds===exports.HighlightModes.onHoverIndividual&&t.setHighlight(!1)}))}xp(){return this.rp&&this.NS.length>0&&this.getVisible()}setDefaultStyle(t){return this.HS=t,this.NS.forEach(t),t(this.WS),this.$S=!0,this.chart.pi.Bs(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.NS.forEach((i=>i.setVisible(t))),this}RS(){return this.GS||(this.GS=this.XS()),this.GS.max.x}OS(){return this.GS||(this.GS=this.XS()),this.GS.min.x}zS(){return this.GS||(this.GS=this.XS()),this.GS.max.y}VS(){return this.GS||(this.GS=this.XS()),this.GS.min.y}gn(){return a(0,0)}XS(){const t=f(l(rs,rs),l(hs,hs));for(let i=0;i<this.NS.length;i+=1)if(this.NS[i].getVisible()){const s=this.NS[i].IS();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}er(){return{fill:this.NS.length>0?this.NS[0].getDominantStyle():this.WS.getDominantStyle()}}}class Ru extends Eu{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Box Series",this.ZS=Wi(),this.JS=t=>q(this.Xs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ws.pi.ai),this.D=new yt,this.chart.pi.La(jh.Do),this.Xs=a,this.WS=new Pu(this,this.Ws,this.scale,this.SS,jt,jt,jt,jt,(t=>!1),this.Xs,0,0,0,0,0,0,0,this.bi).dispose(),this.QS=new qa((()=>{const t=this.Ws.bA(this.scale);return this._s(t,{setEventHandlers:!1,pointerEventsDisabled:!0}),t}),((t,i,s)=>(t.cr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.wA(i.start,i.end),s}))))),this.KS=new qa((()=>{const t=this.ZS.Ji(this.Ws.Yp(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.au(i.vertices),this.ZS.Ki(s,i.figure),i.figure.bS(s),s})))),(()=>{this.ZS.Vi()}),((t,i)=>{this.Ts(i)}))}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r=we(e,this.NS.filter((t=>t.getVisible())),this.JS,ps);if(!r)return;const h=q(r[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:r[1],start:r[1].start,end:r[1].end,lowerExtreme:r[1].lowerExtreme,lowerQuartile:r[1].lowerQuartile,median:r[1].median,upperQuartile:r[1].upperQuartile,upperExtreme:r[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){if(!s)return;const e=this.NS.find((t=>t.MS===s));if(!e)return;const r=this.Xs.toPoint((e.start+e.end)/2,e.median);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,start:e.start,end:e.end,lowerExtreme:e.lowerExtreme,lowerQuartile:e.lowerQuartile,median:e.median,upperQuartile:e.upperQuartile,upperExtreme:e.upperExtreme,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}BS(t){if(!(t instanceof Z||t instanceof J))throw new Error("BoxSeries only supports Linear Axes")}YS(t){const i=this.KS.VA(),s=this.QS.VA();t.forEach((t=>{if(!t.getVisible())return;const e=this.Xs.toPoint((t.start+t.end-t._S*(t.end-t.start))/2,t.lowerQuartile),r=this.Xs.toPoint((t.end-t.start)*t._S,t.upperQuartile-t.lowerQuartile),h=this.Xs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Xs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Xs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Xs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Xs.toPoint((t.start+t.end-t.kS*(t.end-t.start))/2,t.lowerExtreme),u=this.Xs.toPoint((t.start+t.end+t.kS*(t.end-t.start))/2,t.lowerExtreme),c=this.Xs.toPoint((t.start+t.end-t.kS*(t.end-t.start))/2,t.upperExtreme),d=this.Xs.toPoint((t.start+t.end+t.kS*(t.end-t.start))/2,t.upperExtreme),f=this.Xs.toPoint((t.start+t.end-t._S*(t.end-t.start))/2,t.median),A=this.Xs.toPoint((t.start+t.end+t._S*(t.end-t.start))/2,t.median);i.add({xi:t.xi,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+r.y},{x:e.x+r.x,y:e.y+r.y},{x:e.x+r.x,y:e.y}],figure:t},{fillStyle:t.CS,strokeStyle:t.TS}),s.add({xi:0,start:h,end:n,figure:t},{strokeStyle:t.hc}),s.add({xi:0,start:o,end:a,figure:t},{strokeStyle:t.hc}),s.add({xi:0,start:l,end:u,figure:t},{strokeStyle:t.hc}),s.add({xi:0,start:c,end:d,figure:t},{strokeStyle:t.hc}),s.add({xi:0,start:f,end:A,figure:t},{strokeStyle:t.FS})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Pu(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.Xs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.bi);return this.jS(i),this.$S=!0,this.chart.pi.Bs(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Ou extends Lu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(i,s,e,r,h,n,o,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.nu=f(a(0,0),a(0,0)),this.fv=t,this.Ws=i,this.scale=s,this.Ze=Ei(u.ellipseSeriesFillStyle,c),this.Je=Ei(u.ellipseSeriesStrokeStyle,c)}Qi(t,i){const s=this.getDimensions(),e=a(s.x,s.y);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...e,figure:this,...this.getDimensions(),series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return this.nu}setDimensions(t){return this.dimensions=t,this.nu=f(a(t.x-t.radiusX,t.y-t.radiusY),a(t.x+t.radiusX,t.y+t.radiusY)),this.pS(),this.Ws.Bs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.vS(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.vS(),this}getStrokeStyle(){return this.Je}getDominantStyle(){return this.Ze}}class zu extends Eu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Ellipse Series",this.ZS=Wi(),this.JS=t=>{const i=t.getDimensions(),s=a(i.x,i.y);return q(s,this.scale,this.Ws.pi.ai)},this.D=new yt,this.chart.pi.La(jh.Do),this.qS=c,this.WS=new Ou(this,this.Ws,this.scale,jt,jt,jt,jt,jt,(t=>!1),this.bi,this.qS).dispose(),this.KS=new qa((()=>{const t=this.ZS.Ji(this.Ws.Yp(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.au(i.vertices),this.ZS.Ki(s,i.figure),i.figure.bS(s),s})))),(()=>{this.ZS.Vi()}),((t,i)=>{this.Ts(i)}))}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r=we(e,this.NS.filter((t=>t.getVisible())),this.JS,ps);if(!r)return;const h=q(r[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){if(!s)return;const e=this.NS.find((t=>t.MS===s));if(!e)return;const r=e.getDimensions();return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}BS(t){if(!(t instanceof Z||t instanceof J))throw new Error("EllipseSeries only supports Linear Axes")}YS(t){const i=this.KS.VA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],r=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=r;t+=1){const i=t/r*2*Math.PI,h=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:h,y:n})}const h=t.getFillStyle(),n=t.getStrokeStyle();i.add({xi:t.xi,vertices:e,figure:t},{fillStyle:h,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Ou(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.bi,this.qS).setDimensions(t);return this.jS(i),this.$S=!0,this.chart.pi.Bs(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Vu extends Lu{constructor(t,i,s,e,r,h,n,o,a,l,u){super(i,s,e,r,h,n,o,a,l),this.tb=[],this.nu=ns,this.fv=t,this.Ws=i,this.scale=s,this.Ze=Ei(l.polygonSeriesFillStyle,u),this.Je=Ei(l.polygonSeriesStrokeStyle,u)}Qi(t,i){const s=this.IS(),e=a((s.min.x+s.max.x)/2,(s.min.y+s.max.y)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...e,figure:this,coordinates:this.getDimensions(),series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return this.nu}setDimensions(t){return this.tb=t,this.nu=Ss(this.tb),this.pS(),this.Ws.Bs(),this}getDimensions(){return this.tb}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.vS(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.vS(),this}getStrokeStyle(){return this.Je}getDominantStyle(){return this.Ze}}class Nu extends Eu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Polygon Series",this.ZS=Wi(),this.JS=t=>{const i=t.IS(),s=a((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return q(s,this.scale,this.Ws.pi.ai)},this.D=new yt,this.chart.pi.La(jh.Do),this.qS=c,this.WS=new Vu(this,this.Ws,this.scale,jt,jt,jt,jt,jt,(t=>!1),this.bi,this.qS).dispose(),this.KS=new qa((()=>{const t=this.ZS.Ji(this.Ws.Yp(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.au(i.vertices),this.ZS.Ki(s,i.figure),i.figure.bS(s),s})))),(()=>{this.ZS.Vi()}),((t,i)=>{this.Ts(i)}))}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r=we(e,this.NS.filter((t=>t.getVisible())),this.JS,ps);if(!r)return;const h=q(r[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:r[1],coordinates:r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){if(!s)return;const e=this.NS.find((t=>t.MS===s));if(!e)return;const r=e.IS(),h=a((r.min.x+r.max.x)/2,(r.min.y+r.max.y)/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,coordinates:e.getDimensions(),figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}BS(t){}YS(t){const i=this.KS.VA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),r=t.getStrokeStyle();i.add({xi:t.xi,vertices:s,figure:t},{fillStyle:e,strokeStyle:r})})),i.finishPlot()}add(t){const i=new Vu(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.bi,this.qS).setDimensions(t);return this.jS(i),this.$S=!0,this.chart.pi.Bs(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Gu extends Lu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(i,s,e,r,h,n,o,l,u),this.ib={x:0,y:0,width:0,height:0},this.sb={x1:0,y1:0,x2:0,y2:0},this.nu=f(a(0,0),a(0,0)),this.fv=t,this.Ze=Ei(u.rectangleSeriesFillStyle,c),this.Ws=i,this.scale=s,this.Je=Ei(u.rectangleSeriesStrokeStyle,c)}setCornerRadius(t){return this.eb=t,this.pS(),this}getCornerRadius(){return this.eb}Qi(t,i){const s=this.getDimensionsPositionAndSize(),e=a(s.x+s.width/2,s.y+s.height/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...e,figure:this,positionAndSize:this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return this.nu}setDimensions(t){return"x"in t?(this.ib=t,this.sb={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.sb=t,this.ib={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.nu=Ss([this.ib,a(this.ib.x+this.ib.width,this.ib.y+this.ib.height)]),this.pS(),this.Ws.Bs(),this}getDimensionsPositionAndSize(){return this.ib}getDimensionsTwoPoints(){return this.sb}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.vS(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.vS(),this}getStrokeStyle(){return this.Je}getDominantStyle(){return this.Ze}}class $u extends Eu{constructor(t,i,s,e,r,h,n,o,l,u,c,d){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Rectangle Series",this.rb=Wi(),this.hb="xy",this.JS=t=>{const i=t.getDimensionsPositionAndSize(),s=a(i.x+i.width/2,i.y+i.height/2);return q(s,this.scale,this.Ws.pi.ai)},this.D=new yt,this.chart.pi.La(jh.Do),this.qS=c,this.Da=d,this.WS=new Gu(this,this.Ws,this.scale,jt,jt,jt,jt,jt,(t=>!1),this.bi,this.qS).dispose(),this.nb=new qa((()=>{const t=this.rb.Ji(this.Ws.md(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.Md(i.x1,i.y1,i.x2,i.y2).bd(i.roundedCorners?{extent:i.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.rb.Ki(s,i.figure),i.figure.bS(s),s})))),(()=>{this.rb.Vi()}),((t,i)=>{this.Ts(i)}))}ob(){var t,i,s;let e,r;if(!(null===(t=this.Da)||void 0===t?void 0:t.solvePlane)&&this.NS.length>=3){let t;for(const i of this.NS){const s=i.getDimensionsPositionAndSize(),h={x:s.x+s.width/2,y:s.y+s.height/2};if(t){const i=h.x-t.x,s=0===i?e:i>0?"progressive":"regressive";e=null===e?null:void 0===e?s:s!==e?null:e;const n=h.y-t.y,o=0===n?r:n>0?"progressive":"regressive";r=null===r?null:void 0===r?o:o!==r?null:r}t=h}}const h=null!==(s=null===(i=this.Da)||void 0===i?void 0:i.solvePlane)&&void 0!==s?s:e?"x":r?"y":"xy";this.hb=h}ws(){return"x"===this.hb?"ProgressiveX":"y"===this.hb?"ProgressiveY":void 0}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r="x"===this.hb?(t,i)=>Math.abs(t.x-i.x):"y"===this.hb?(t,i)=>Math.abs(t.y-i.y):ps,h=we(e,this.NS.filter((t=>t.getVisible())),this.JS,r);if(!h)return;const n=q(e,this.Ws.pi.ai,this.scale);if("x"===this.hb&&!gs(n.x,this.getXMin(),this.getXMax()))return;if("y"===this.hb&&!gs(n.y,this.getYMin(),this.getYMax()))return;const o=q(h[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:o,resultTableScale:this.scale,pointMarker:o,pointMarkerScale:{x:this.axisX,y:this.axisY}},...o,figure:h[1],positionAndSize:h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){if(!s)return;const e=this.NS.find((t=>t.MS===s));if(!e)return;const r=e.getDimensionsPositionAndSize(),h=a(r.x+r.width/2,r.y+r.height/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,positionAndSize:e.getDimensionsPositionAndSize(),...e.getDimensionsTwoPoints(),figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}BS(t){}YS(t){const i=this.nb.VA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=t.getFillStyle(),r=t.getStrokeStyle();i.add({xi:t.xi,figure:t,roundedCorners:t.eb,...s},{fillStyle:e,strokeStyle:r})})),i.finishPlot(),this.ob()}add(t){const i=new Gu(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.bi,this.qS).setDimensions(t);return this.jS(i),this.$S=!0,this.chart.pi.Bs(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Uu extends Lu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(i,s,e,r,h,n,o,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.nu=f(a(0,0),a(0,0)),this.fv=t,this.bi=u,this.Ws=i,this.scale=s,this.Je=Ei(u.segmentSeriesStrokeStyle,c)}Qi(t,i){const s=this.getDimensions(),e=a((s.startX+s.endX)/2,(s.startY+s.endY)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...e,figure:this,...this.getDimensions(),series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return this.nu}setDimensions(t){return this.dimensions=t,this.nu=f(a(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),a(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.pS(),this.Ws.Bs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.vS(),this}getStrokeStyle(){return this.Je}getDominantStyle(){const t=this.Je;return t!==Tt?t.getFillStyle():ae}}class Yu extends Eu{constructor(t,i,s,e,r,h,n,o,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Segment Series",this.ab=Wi(),this.JS=t=>{const i=t.getDimensions(),s=a((i.startX+i.endX)/2,(i.startY+i.endY)/2);return q(s,this.scale,this.Ws.pi.ai)},this.D=new yt,this.chart.pi.La(jh.Do),this.qS=c,this.WS=new Uu(this,this.Ws,this.scale,jt,jt,jt,jt,jt,(t=>!1),this.bi,this.qS).dispose(),this.QS=new qa((()=>{const t=this.ab.Ji(this.Ws.bA(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.cr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.wA(i.start,i.end),this.ab.Ki(s,i.figure),i.figure.bS(s),s})))),(()=>{this.ab.Vi()}),((t,i)=>{this.Ts(i)}))}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r=we(e,this.NS.filter((t=>t.getVisible())),this.JS,ps);if(!r)return;const h=q(r[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){if(!s)return;const e=this.NS.find((t=>t.MS===s));if(!e)return;const r=e.getDimensions(),h=a((r.startX+r.endX)/2,(r.startY+r.endY)/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,...r,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}BS(t){}YS(t){const i=this.QS.VA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},r={x:s.endX,y:s.endY},h=t.getStrokeStyle();i.add({xi:t.xi,start:e,end:r,figure:t},{strokeStyle:h})})),i.finishPlot()}add(t){const i=new Uu(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.bi,this.qS).setDimensions(t);return this.jS(i),this.$S=!0,this.chart.pi.Bs(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const ju={x:0,y:0};class Hu extends Lu{constructor(t,i,s,e,r,h,n,o,a,l,u){var c;super(i,s,e,r,h,n,o,a,l),this.ml="Text",this.na=ju,this.hf=ju,this._l=0,this.ot=Xi,this.fv=t,this.Ze=l.textSeriesFillStyle?Ei(l.textSeriesFillStyle,u):l.uiTextFillStyle,this.qn=null!==(c=l.textSeriesFont)&&void 0!==c?c:l.uiTextFont,this.Cc=this.Ws._n(s,!1).qh(l.textSeriesShadow),this.Cc.xl=!0,this.D.zi(this.Cc,{getExtraData:(t,i,s)=>this.Qi(s,t)}),this.addEventListener("dispose",(()=>this.Cc.dispose()))}Qi(t,i){const s=this.na;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.fv.axisX,y:this.fv.axisY}},...s,figure:this,series:this.fv,axisX:this.fv.axisX,axisY:this.fv.axisY}}IS(){return{min:{x:this.na.x,y:this.na.y},max:{x:this.na.x,y:this.na.y}}}lb(){this.Cc.tn(this.ml).sr(this.na).Zl(this.hf).Th(this._l).Mn(this.ot).qe(this.Ze).Ch(this.qn)}getSizePixels(){return this.lb(),this.Cc.Nh().bc()}getBoundingBox(){return this.lb(),this.Cc.Nh().mc()}setText(t){return this.ml=t,this.pS(),this}getText(){return this.ml}setLocation(t){return this.na=t,this.pS(),this}getLocation(){return this.na}setAlignment(t){return this.hf=t,this.pS(),this}getAlignment(){return this.hf}setRotation(t){return this._l=t,this.pS(),this}getRotation(){return this._l}setMargin(t){return this.ot=y(this.ot,t),this.pS(),this}getMargin(){return this.ot}setLabelShadow(t){return this.Cc.qh(t),this.Ws.Bs(),this}getLabelShadow(){return this.Cc.Gl()}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.vS(),this}getFillStyle(){return this.Ze}setFont(t){return this.qn="function"==typeof t?t(this.qn):t,this.vS(),this}getFont(){return this.qn}getDominantStyle(){return this.Ze}}class Wu extends Eu{constructor(t,i,s,e,r,h,n,o,a,l,u){super(t,i,s,e,r,h,n,o,a,l),this.Rs="Text Series",this.JS=t=>q(t.getLocation(),this.scale,this.Ws.pi.ai),this.D=new yt,this.qS=u,this.WS=new Hu(this,this.Ws,this.scale,jt,jt,jt,jt,jt,(t=>!1),this.bi,this.qS).dispose()}BS(t){}YS(t){t.forEach((t=>{t.lb(),t.Cc.setVisible(t.getVisible())}))}add(t){const i=new Hu(this,this.Ws,this.scale,this.SS,this.pS,this.vS,this.yS,this.mS,this.US,this.bi,this.qS);return(null==t?void 0:t.alignment)&&i.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&i.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&i.setFont(t.font),(null==t?void 0:t.location)&&i.setLocation(t.location),(null==t?void 0:t.margin)&&i.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&i.setRotation(t.rotation),(null==t?void 0:t.text)&&i.setText(t.text),this.jS(i),this.$S=!0,this._s(i.Cc,{setEventHandlers:!1,isText:!0}),this.chart.pi.Bs(),this.D.zi(i.Cc,{getExtraData:(t,s,e)=>i.Qi(e,t)}),i}Qi(t,i,s){return Qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY};if(0===this.NS.length)return;const r=we(e,this.NS.filter((t=>t.getVisible())),this.JS,ps);if(!r)return;const h=q(r[0],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:r[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Xu=(t,i)=>{let s=0;const e=[];for(;s<t;){const r=s;let h=i;const n=s>0;h-=n?1:0,h-=s+h<t?1:0;const o=Math.min(h,t-r),a=s-(n?1:0),l={start:a,startUnique:r,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Zu=(t,i)=>{let s=0;const e=[];for(;s<t;){const r=s;let h=i;const n=s>0;h-=n?1:0,h-=0;const o=Math.min(h,t-r),a=s-(n?1:0),l={start:a,startUnique:r,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Ju=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const r=new Map;for(let s=0;s<t.length;s+=1){const h=t[s],n={x:h.startPrimary,y:h.startSecondary},o={x:n.x+h.lengthPrimary-1,y:n.y+h.lengthSecondary-1},l=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!us(l,o))return;let u=r.get(t);u||(u={type:h.type,dataInvalidationRanges:[]},r.set(t,u));const c=(d=l,A=o,f(a(Math.max(Math.min(d[0].x,d[2].x),Math.min(A[0].x,A[2].x)),Math.max(Math.min(d[0].y,d[2].y),Math.min(A[0].y,A[2].y))),a(Math.min(Math.max(d[0].x,d[2].x),Math.max(A[0].x,A[2].x)),Math.min(Math.max(d[0].y,d[2].y),Math.max(A[0].y,A[2].y)))));var d,A;const g={primary:c.min.x-i.primary,secondary:c.min.y-i.secondary},p={primary:1+c.max.x-c.min.x,secondary:1+c.max.y-c.min.y};let v=!1;const y=[{x:g.primary,y:g.secondary},{x:g.primary+p.primary,y:g.secondary},{x:g.primary+p.primary,y:g.secondary+p.secondary},{x:g.primary,y:g.secondary+p.secondary}];for(let t=0;t<u.dataInvalidationRanges.length;t+=1)if(!v){const i=u.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(us(y,s)){const t=cs(y,s);i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,v=!0}}v||u.dataInvalidationRanges.push({tileInvalidationLength:p,tileInvalidationOffset:g})}))}return r},Qu=t=>Kn(t)||Array.isArray(t)&&"number"==typeof t[0],Ku=t=>!Qu(t)&&Array.isArray(t),qu=(t,i,s,e)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),r=Math.max(i.startPrimary,t.iFirstVector.primary),h=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);if(Ku(i.values))for(let s=r;s<=h;s+=1){const r=s-i.startPrimary,h=i.values[r],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const r=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=h[r];e[a+n]=o}}else for(let s=r;s<=h;s+=1){const r=s-i.startPrimary,h=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const n=s-i.startSecondary,o=s-t.iFirstVector.secondary,a=r*i.lengthSecondary+n,l=i.values[a];e[h+o]=l}}}));else{const r=t[0],h=s(r);if(Ku(i.values))for(let t=0;t<i.lengthPrimary;t+=1){const s=t*r.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}else e(r,Qn(i.values)===Float32Array?i.values:new Float32Array(i.values))}},tc=(t,i,s)=>{var e,r;const h=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(h)return t.ub(null,h.RED,!1,!0,{x:i,y:s},!1,h.FLOAT,h.R32F);const n=t.gl;return(null===(r=t.gl1)||void 0===r?void 0:r.optional.OES_texture_float)?t.ub(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.ub(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},ic=(t,i,s,e)=>{i.forEach(((i,r)=>{var h,n;const o=s(r),a=e(r),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(h=t.gl2)||void 0===h?void 0:h.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/r.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*r.sizeHeatmapDataVectors.secondary,h=e+i.tileInvalidationLength.primary*r.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,h));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,h));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*h);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class sc extends Bu{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Heatmap Grid Series",this.cb=!0,this.Qv={},this.chart.pi.La(jh.Bo),this.fb=a,this.bi=l;const d=c;this.Ze=Ei(l.heatmapGridSeriesFillStyle,d),this.Kv=Ei(this.bi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,Ab:a.maxTileSize};this.Da=f,this.gb=this.Ws.pb(this.scale,[],f).qe(this.Ze).qv(this.Kv).Ii(this.getHighlight()),this._s(this.gb),this.cb=!0,this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=q(e,this.Ws.pi.ai,this.scale),h=sA(i)?this.gb.yb(r):this.gb.yd(r);if(h)return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h.x,y:h.y,column:h.column,row:h.row,intensity:h.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:ye(this.Ze)?this.Ze.lut:void 0}}Qi(t,i,s){return Qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:ye(this.Ze)?this.Ze.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}iy(){const t=this.Qv.start||{x:0,y:0};let i;i=this.Qv.end?{x:(this.Qv.end.x-t.x)/this.Da.columns,y:(this.Qv.end.y-t.y)/this.Da.rows}:this.Qv.step?this.Qv.step:{x:1,y:1},this.gb.sy(t,i),this.chart.pi.Bs()}setStart(t){return this.Qv.start=t,this.iy(),this}getStart(){return this.gb.ey().start}setStep(t){return this.Qv.step=t,this.iy(),this}getStep(){return this.gb.ey().step}setEnd(t){return this.Qv.end=t,this.iy(),this}getEnd(){return this.gb.ey().end}setContours(t){var i,s,e;return this.gb.hy(t?{showLabels:null===(i=t.showLabels)||void 0===i||i,levels:t.levels.map((t=>{var i,s,e,r,h,n;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.bi.heatmapGridSeriesContourStrokeStyle)&&void 0!==s?s:new ar({thickness:1,fillStyle:new de({color:b(0,0,0)})}),labelFillStyle:new de({color:null!==(e=t.labelColor)&&void 0!==e?e:this.bi.heatmapGridSeriesContourLabelColor}),labelFont:(h=t.labelFont,n=null!==(r=this.bi.heatmapGridSeriesContourLabelFont)&&void 0!==r?r:this.bi.uiTextFont,void 0===h?n:P(h)?h:new L({size:n.size,family:n.family,variant:n.variant,type:n.type,style:n.style,weight:n.weight,...h})),label:t.label}})),shadows:null!==(e=null!==(s=t.shadows)&&void 0!==s?s:this.bi.heatmapGridSeriesContourLabelShadow)&&void 0!==e?e:null}:void 0),this.Ws.Bs(),this}getContours(){return this.gb.ny()}xp(){return this.rp&&this.getVisible()}Ys(){return Pi(this.Ze,this.gb._i())}er(){return{fill:this.Ze}}mb(t){this.gb.mb().forEach((i=>{t.gb.Ay(i)}))}RS(){const t=this.gb;return t?t.Wi():void 0}OS(){const t=this.gb;return t?t.Hi():void 0}zS(){const t=this.gb;return t?t.Zi():void 0}VS(){const t=this.gb;return t?t.Xi():void 0}gn(){const t=a(0,0);return t.x=Math.max(t.x,this.gb.uu()),t.y=Math.max(t.y,this.gb.cu()),t}BS(t){if(!(t instanceof Z))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}rr(t,i){t.Ii(i),this.Ws.Bs()}ir(){return super.ir(),this.gb.Ti(this.getBoundaries()),this}}class ec extends sc{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,a,l,u,c),this.gp=!1,this.D=new yt}yp(){return this.gp}invalidateIntensityValues(t){if(this.gp&&this.chart.pi.La(jh.Ro),Kn(t)||Array.isArray(t)&&"number"==typeof t[0]){const i=this.Da.columns*this.Da.rows,s=t.length;if(i!==s)throw new Error(`LightningChart JS input error | Heatmap invalidateIntensityValues received typed array whose length does not match heatmap columns x rows (received ${s}, expected ${i})`);this.gb.Ay({type:"intensity",lengthPrimary:"columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows,lengthSecondary:"columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns,startPrimary:0,startSecondary:0,values:t})}else if(Array.isArray(t)){let i=t;if(0===t.length)return this;const s={x:i.length,y:i[0].length,columns:"columns"===this.Da.dataOrder?i.length:i[0].length,rows:"rows"===this.Da.dataOrder?i.length:i[0].length},e="columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows,r="columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns;if(s.x>e||s.y>r){if(!0===this.chart.Pg.Ea){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Da.columns}x${this.Da.rows}, input ${s.columns}x${s.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const t=[];for(let s=0;s<e;s+=1)t[s]=i[s].slice(0,r);i=t}this.gb.Ay({type:"intensity",lengthPrimary:s.x,lengthSecondary:s.y,startPrimary:0,startSecondary:0,values:i})}else if("iColumn"in t&&"iRow"in t&&"values"in t&&Ku(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:i.length,secondary:i[0].length,columns:"columns"===this.Da.dataOrder?i.length:i[0].length,rows:"rows"===this.Da.dataOrder?i.length:i[0].length},e="columns"===this.Da.dataOrder?t.iColumn:t.iRow,r=e+s.primary-1,h="columns"===this.Da.dataOrder?t.iRow:t.iColumn,n=h+s.secondary-1,o=("columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows)-1,a=("columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns)-1;if(e<0||h<0){if(!0===this.chart.Pg.Ea){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Nt.console.warn(i)}return this}if(r>o||n>a){if(!0===this.chart.Pg.Ea){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Da.columns}x${this.Da.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(i)}const e=Math.max(r-o,0),h=s.primary-e,l=Math.max(n-a,0),u=[];for(let t=0;t<h;t+=1)u[t]=i[t].slice(0,l>0?-l:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:u}}this.gb.Ay({type:"intensity",lengthPrimary:i.length,lengthSecondary:i[0].length,startPrimary:e,startSecondary:h,values:i})}else if("iColumn"in t&&"iRow"in t&&"columns"in t&&"rows"in t&&"values"in t&&Qu(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:"columns"===this.Da.dataOrder?t.columns:t.rows,secondary:"columns"===this.Da.dataOrder?t.rows:t.columns,columns:t.columns,rows:t.rows},e="columns"===this.Da.dataOrder?t.iColumn:t.iRow,r=e+s.primary-1,h="columns"===this.Da.dataOrder?t.iRow:t.iColumn,n=h+s.secondary-1,o=("columns"===this.Da.dataOrder?this.Da.columns:this.Da.rows)-1,a=("columns"===this.Da.dataOrder?this.Da.rows:this.Da.columns)-1;if(e<0||h<0){if(!0===this.chart.Pg.Ea){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Nt.console.warn(i)}return this}if(r>o||n>a){if(!0===this.chart.Pg.Ea){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Da.columns}x${this.Da.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nWith flat array input, this operation is not permitted. No intensity values will be invalidated.`;Nt.console.warn(i)}return this}const l=s.columns*s.rows;if(i.length!==l){if(!0===this.chart.Pg.Ea){const s=`HeatmapGridSeries.invalidateIntensityValues invalid flat data input.\ncolumns=${t.columns} rows=${t.rows}, array length must be ${l}, received ${i.length}\nNo intensity values will be invalidated.`;Nt.console.warn(s)}return this}this.gb.Ay({type:"intensity",lengthPrimary:s.primary,lengthSecondary:s.secondary,startPrimary:e,startSecondary:h,values:i})}return this.D.R("invalidateintensity",{value:t}),this.Ws.Bs(),this.gp=!0,this}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.gb.qe(this.Ze),this.D.R("stylechange",{}),this.Ws.Bs(),this}getFillStyle(){return this.Ze}setIntensityInterpolation(t){return t=t||"disabled",this.gb.ly(t),this.Ws.Bs(),this.D.R("stylechange",{}),this}getIntensityInterpolation(){return this.gb.uy()}setAggregation(t){return this.gb.xb(t),this.Ws.Bs(),this}getAggregation(){return this.gb.Sb()}clear(){return this.gb.Vi(),this.Ws.Bs(),this.D.R("dataclear",{}),this}setWireframeStyle(t){return this.Kv="function"==typeof t?t(this.Kv):t,this.gb.qv(this.Kv),this.Ws.Bs(),this.D.R("stylechange",{}),this}getWireframeStyle(){return this.Kv}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class rc extends Bu{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,l,u),this.Rs="Scrolling Heatmap Grid Series",this.Qv={},this.chart.pi.La(jh.Bo),this.chart.pi.La(jh.Ro);const d=c;this.Ze=Ei(l.heatmapScrollingGridSeriesFillStyle,d),this.Kv=Ei(this.bi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Da=f,this.bb=this.Ws.Mb(this.scale,[],f).qe(this.Ze).qv(this.Kv).Ii(this.getHighlight()),this._s(this.bb),this.setHighlightOnHover(!1)}yp(){return this.bb.Sy()>0}solveNearest(t,i="show-nearest"){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=q(e,this.Ws.pi.ai,this.scale),h=sA(i)?this.bb.yb(r):this.bb.yd(r);if(h)return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h.x,y:h.y,column:h.column,row:h.row,intensity:h.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:ye(this.Ze)?this.Ze.lut:void 0}}Qi(t,i,s){return Qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:ye(this.Ze)?this.Ze.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}iy(){const t=this.Qv.start||{x:0,y:0};let i;i=this.Qv.step?this.Qv.step:{x:1,y:1},this.bb.sy(t,i),this.chart.pi.Bs()}setStart(t){return this.Qv.start=t,this.iy(),this}getStart(){return this.bb.ey().start}setStep(t){return this.Qv.step=t,this.iy(),this}getStep(){return this.bb.ey().step}clear(){return this.bb.Vi(),this.Ws.Bs(),this}setAggregation(t){return this.bb.xb(t),this.Ws.Bs(),this}getAggregation(){return this.bb.Sb()}setWireframeStyle(t){return this.Kv="function"==typeof t?t(this.Kv):t,this.bb.qv(this.Kv),this.Ws.Bs(),this}getWireframeStyle(){return this.Kv}setIntensityInterpolation(t){return t=t||"disabled",this.bb.ly(t),this.Ws.Bs(),this}getIntensityInterpolation(){return this.bb.uy()}setPixelInterpolationMode(t){return this.setIntensityInterpolation(t),this}getPixelInterpolationMode(){return this.getIntensityInterpolation()}setDataCleaning(t){return this.bb.wb(t),this.Ws.Bs(),this}xp(){return this.rp&&this.getVisible()}Ys(){return Pi(this.Ze,this.bb._i())}er(){return{fill:this.Ze}}qe(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.bb.qe(this.Ze),this.Ws.Bs(),this}BS(t){if(!(t instanceof Z))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}RS(){return this.bb.Wi()||0}OS(){return this.bb.Hi()||0}zS(){return this.bb.Zi()||0}VS(){return this.bb.Xi()||0}gn(){const t=a(0,0);return t.x=Math.max(t.x,this.bb.uu()),t.y=Math.max(t.y,this.bb.cu()),t}rr(t,i){t.Ii(i),this.Ws.Bs()}}class hc extends rc{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,i,s,e,r,h,n,o,a,l,u,c),this.D=new yt}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Da.scrollDimension?t.length:t[0].length,"rows"===this.Da.scrollDimension?t.length:t[0].length,0+s-1),r=this.Da.resolution-1;if(e>r){if(!0===this.chart.Pg.Ea){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Da.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,r+1);t=e}return this.bb.xy(t),this.Ws.Bs(),this}invalidateIntensityValues(t){return this.bb.Ay(t.iSample,t.values),this.Ws.Bs(),this}getSampleCount(){return this.bb.Sy()}setFillStyle(t){return this.qe(t),this}getFillStyle(){return this.Ze}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class nc extends Bu{constructor(){super(...arguments),this._b=[],this.fc=[],this.kb=[],this.Cb=[],this.Tb=1e3,this.Fb=0,this.ds=exports.HighlightModes.onHover,this.Ib=[],this.Lb=[],this.Pb=!1,this.Bb=(t,i)=>{const s=t.gS(i);if(s)return[q(s[0],this.scale,this.Ws.pi.ai),q(s[1],this.scale,this.Ws.pi.ai)]},this.Db=(t,i)=>{const s=t.Eb(i);if(s)return[q(s[0],this.scale,this.Ws.pi.ai),q(s[1],this.scale,this.Ws.pi.ai)]},this.Rb=t=>{const i=t.length;if(this._b.length>0){const s=this._b.length-1,e=this._b[s];if(i>0){const[i,s]=e.Mu(),[r,h]=e.wu();if((r?i.length+r.length:i.length)>=this.Tb){const n=r&&r.length>0?r[r.length-1]:i[i.length-1],o=h&&h.length>0?h[h.length-1]:s[i.length-1],l=(n.x+t[0].position)/2,c=Vs(l,n,a(t[0].position,t[0].high)).y,d=Vs(l,o,a(t[0].position,t[0].low)).y,A=u(l,c,d);e.bu(A,f(a(l,d),a(l,c))).Lu(!0),this.Ob([A].concat(t)).Fu(!0)}else e.bu(t)}}else i>0&&this.Ob(t)},this.zb=t=>{const i=this.Ib,s=t.length;if(this.Ib.length>0){if(s>0){const s=i[i.length-1],e=s.Mu(),r=s.wu();if(e.length+r.length>=this.Tb){const h=r.length>0?r[r.length-1]:e[e.length-1],n=(h.x+t[0].x)/2,o=Vs(n,h,a(t[0].x,t[0].y)).y,l=a(n,o);s.bu(l,f(a(n,o),a(n,o))).Lu(!0),i.push(this.Vb([l].concat(t),this.Nb).Fu(!0))}else s.bu(t)}}else s>0&&i.push(this.Vb(t))},this.Gb=t=>{const i=this.Lb,s=t.length;if(this.Lb.length>0){if(s>0){const s=i[i.length-1],e=s.Mu(),r=s.wu();if(e.length+r.length>=this.Tb){const h=r.length>0?r[r.length-1]:e[e.length-1],n=(h.x+t[0].x)/2,o=Vs(n,h,a(t[0].x,t[0].y)).y,l=a(n,o);s.bu(l,f(a(n,o),a(n,o))).Lu(!0),i.push(this.$b([l].concat(t)).Fu(!0))}else s.bu(t)}}else s>0&&i.push(this.$b(t))}}ws(){return"ProgressiveX"}yp(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Fb=void 0!==i&&i>0?i:0,this.Ws.Bs(),this}clear(){for(let t=0;t<this._b.length;t+=1)this._b[t].dispose();for(let t=0;t<this.Ib.length;t+=1)this.Ib[t].dispose();for(let t=0;t<this.Lb.length;t+=1)this.Lb[t].dispose();return this.fc.length=0,this.kb.length=0,this.Cb.length=0,this.Nb=void 0,this._b.length=0,this.Ib.length=0,this.Lb.length=0,this.Ws.Bs(),this.D.R("dataclear",{}),this}getPointAmount(){return this._b.reduce(((t,i)=>t+i.Cu()+i.Tu()),this.fc.length)}RS(){return ri(this._b,Qt,Math.max,ii,this.Nb)||0}OS(){return ri(this._b,Jt,Math.min,ti,this.Nb)||0}zS(){return ri(this._b,qt,Math.max,ei,this.Nb)||0}VS(){return ri(this._b,Kt,Math.min,si,this.Nb)||0}gn(){const t=a(0,0);for(const i of this._b)t.x=Math.max(t.x,i.uu()),t.y=Math.max(t.y,i.cu());return t}Ys(){return Pi(this.Ub,void 0)||Pi(this.Yb,void 0)}xp(){return this.rp&&this.getPointAmount()>0&&this.getVisible()}BS(t){}jb(t,i,s){this.fc=Ti(this.fc,t,{canReturnB:!1}),this.kb=Ti(this.kb,i,{canReturnB:!1}),this.Cb=Ti(this.Cb,s,{canReturnB:!1}),this.Ws.Bs()}Hb(t,i,s,e){this.Wb(i,s,e),this.jb(Array.isArray(t)?t:[t],i,s)}Wb(t,i,s){const e=Ms(Ss(t),Ss(i));this.Nb?this.Nb=Ms(this.Nb,e):this.Nb=e,s&&(this.Nb=Ms(this.Nb,s))}Xb(){const t=this._b.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Qt(this._b[e].Wi(),this._b[e].uu())<i&&(s+=1);return s}Zb(t,i,s,e){if(s>0){const r=Math.ceil(s/i),h=t.length-r;if(h>0&&e>0){const i=h-e>0?e:h;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}Jb(t){const i=this._b.length>0?this._b[this._b.length-1]:void 0,s=i?i.Mu()[0].length+(i.wu()[0]?i.wu()[0].length:0):void 0;Du(t,s,this.Tb,this.Rb)}Qb(t){const i=this.Ib.length>0?this.Ib[this.Ib.length-1].Mu().length+this.Ib[this.Ib.length-1].wu().length:void 0;Du(t,i,this.Tb,this.zb)}Kb(t,i){const s=this.Ib.length>0?this.Ib[this.Ib.length-1].Mu().length+this.Ib[this.Ib.length-1].wu().length:void 0;Du(t,s,this.Tb,this.zb),Du(i,s,this.Tb,this.Gb)}Ob(t,i){const s=this.Ws.qb(this.scale).bu(t,i).qe(this.Ub)._u(this.Yb).Ii(this.getHighlight());return this._b.push(s),this._s(s),s}tM(t,i,s){const e=this.Ws.Np(this.scale,void 0,[Ja.UserSeries]).bu(t,s).setPointerEvents(!1).cr(i).Ii(this.getHighlight());return this._s(e),e}Vb(t,i){return this.tM(t,this.iM,i)}$b(t,i){return this.tM(t,this.sM,i)}eM(t){this.Ub="function"==typeof t?t(this.Ub):t;const i=this.Ub;for(let t=0;t<this._b.length;t+=1)this._b[t].qe(i);this.Ws.Bs()}rM(t){this.Yb="function"==typeof t?t(this.Yb):t;const i=this.Yb;for(let t=0;t<this._b.length;t+=1)this._b[t]._u(i);this.Ws.Bs()}hM(){return this.Ub}ku(){return this.Yb}nM(t){this.iM="function"==typeof t?t(this.iM):t;const i=this.iM;for(let t=0;t<this.Ib.length;t+=1)this.Ib[t].cr(i);this.Ws.Bs()}oM(t){this.sM="function"==typeof t?t(this.sM):t;const i=this.sM;for(let t=0;t<this.Lb.length;t+=1)this.Lb[t].cr(i);this.Ws.Bs()}aM(){return this.iM}lM(){return this.sM}rr(t,i){t.Ii(i),this.uM(i),this.Ws.Bs()}uM(t){for(let i=0;i<this.Ib.length;i+=1)this.Ib[i].Ii(t);for(let i=0;i<this.Lb.length;i+=1)this.Lb[i].Ii(t)}cp(){if(super.cp(),this.Pb=!1,this.Fb>0){const t=this.Xb();this.Zb(this._b,this.Tb,this.Fb,t),this.Ib.length>0&&this.Zb(this.Ib,this.Tb,this.Fb,t),this.Lb.length>0&&this.Zb(this.Lb,this.Tb,this.Fb,t),this.Pb=!0}}ir(){if(super.ir(),this.fc.length>0&&(this.Jb(this.fc),this.cM(this.kb,this.Cb),this.Pb=!0),this.Pb){const t=this.getBoundaries();for(const i of this._b)i.Ti(t);for(const i of this.Ib)i.Ti(t);for(const i of this.Lb)i.Ti(t)}}dp(){super.dp(),this.Nb=void 0,this.fc.length=0,this.kb.length=0,this.Cb.length=0}}class oc extends nc{constructor(t,i,s,e,r,h,n,o,a,l,u){super(t,i,s,e,r,h,n,o,a,l),this.D=new yt,this.chart.pi.La(jh.Po);const c=u;this.Ub=Ei(this.bi.areaRangeSeriesFillStyle,c),this.iM=Ei(this.bi.areaRangeSeriesStrokeStyle,c),this.Yb=Ei(this.bi.areaRangeSeriesFillStyleInverted,c),this.sM=Ei(this.bi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.pi.il(t),e=((t,i,s)=>{let e,r,h=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=ps(t,a[0]),s=ps(t,a[1]);(void 0===e||i<h||s<h)&&(e=a,r=o,i<h?h=i:s<h&&(h=s))}}return e&&r?[e,r]:void 0})({x:s.engineX,y:s.engineY},this._b,sA(i)?this.Db:this.Bb);if(void 0!==e&&void 0!==e[0]){const t=q(e[0][0],this.Ws.pi.ai,this.scale),i=q(e[0][1],this.Ws.pi.ai,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=d(i);this.Hb(t,s,e);const r=this.fc[this.fc.length-1];return this.dM=r?{position:r.position,high:r.high,low:r.low}:void 0,this.D.R("dataadd",{data:i,boundaries:this.Nb}),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let r=e;r||(r=this.dM?this.dM.position+s:0),this.add(((t,i,s=1,e)=>{const r=void 0!==e?e:0,h=new Array(t.length);for(let e=0;e<t.length;e+=1)h[e]={position:r+s*e,high:t[e],low:i[e]};return h})(t,i,s,r))}return this}cM(t,i){this.Kb(t,i)}setHighFillStyle(t){return this.eM(t),this}setLowFillStyle(t){return this.rM(t),this}setHighStrokeStyle(t){return this.nM(t),this}setLowStrokeStyle(t){return this.oM(t),this}getHighFillStyle(){return this.hM()}getLowFillStyle(){return this.ku()}getHighStrokeStyle(){return this.aM()}getLowStrokeStyle(){return this.lM()}fM(){return((t,i=t=>t)=>{const s=[];let e;for(let r=0;r<t.length;r+=1){e=t[r];const h=i(e.Mu()),n=e.wu(),o=n?i(n):[];let a=!1,l=!1;"Iu"in e&&(a=e.Iu(),l=e.Pu()),s.push.apply(s,h.slice(a?1:0,h.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===h.length?1:0,o.length-(l?1:0)))}return s})(this._b,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],r=i.length;for(let t=0;t<r;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}er(){return{fill:this.Ub,fill2:this.Yb,behavior:{colorStep:!0}}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ac extends Bu{constructor(t,i,s,e,r,h,n,o,a,u){super(t,i,s,e,r,h,n,o,a,u),this.AM=t=>t[4]>=t[1],this.GS=f(l(rs,rs),l(hs,hs)),this.gM=[],this.pM=!1,this.vM=-1,this.yM=[],this.mM=!0,this.xM=!1,this.SM=4,this.bM=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.D=new yt,this.chart.pi.La(jh.bo)}yp(){return this.yM.length>0}ws(){return"ProgressiveX"}fM(){return this.yM}xp(){return this.rp&&this.yM.length>0&&this.getVisible()}MM(t){if(!(this.yM.length<1))return[this.yM[t][0],this.yM[t][1],this.yM[t][2],this.yM[t][3],this.yM[t][4]]}solveNearest(t,i){if(0===this.yM.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let r,h,n,o,l;if(e){const t=this.wM;if(!t)return;const i=Hi(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;o=e[3],n=e[2],h=e[1],l=e[4],r=e[0]}else{const t=Hi(s,this.yM.length-1,(t=>this.yM[t][0])),i=void 0!==t&&this.yM[t];if(!i)return;r=i[0],h=i[1],n=i[2],o=i[3],l=i[4]}return{cursorPosition:{resultTable:a(r,l),resultTableScale:this.scale,pointMarker:a(r,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r,y:l,open:h,high:n,low:o,close:l,position:r,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Qi(t,i,s){return Qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}BS(t){if(!(t.x instanceof H))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this._M=t.x}gn(){return a(5,5)}Pb(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.GS.min.y&&(this.GS.min.y=t[s][3]),this.GS.max.y<t[s][2]&&(this.GS.max.y=t[s][2]);return this.GS.min.x=Math.min(this.GS.min.x,t[0][0]),this.GS.max.x=Math.max(this.GS.max.x,t[i][0]),this}RS(){return this.GS.max.x}OS(){return this.GS.min.x}zS(){return this.GS.max.y}VS(){return this.GS.min.y}add(t){this.yM.length>0&&this.chart.pi.La(jh.Ro);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.pM=!0;const t=this.yM.length,s=this.gM.length,e=i.length;this.yM.length=t+e,this.gM.length=s+e;for(let r=0;r<e;r+=1)this.yM[t+r]=i[r],this.gM[s+r]=this.yM[t+r];this.Pb(i),this.D.R("dataadd",{data:i}),this.Ws.Bs()}return this}setPackData(t){return t!==this.mM&&(this.xM=!0,this.mM=t,this.chart.pi.Bs()),this}getPackData(){return this.mM}getPackDataState(){const t=this.vM;if(!(t<0||void 0===this.wM||this.wM.length===this.yM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.kM=t,this.chart.pi.Bs(),this}getFigureWidth(){return this.kM}setFigureMinimumGap(t){return this.SM=t,this.chart.pi.Bs(),this}getFigureMinimumGap(){return this.SM}clear(){return this.yM=[],this.gM=[],this.wM=void 0,this.CM(),this.GS.min.x=rs,this.GS.min.y=rs,this.GS.max.x=hs,this.GS.max.y=hs,this.D.R("dataclear",{}),this}TM(t){return this._M.getPixelSize()*t/1e3}FM(){const t=this.bM.length-1,i=this.TM(this.kM+this.SM);let s=Hi(i,t,(t=>this.bM[t]));return void 0===s?s=i<this.bM[0]?0:this.bM[t]<i?t:this.bM.length/2:this.bM[s]<i&&(s+=1),this.bM.length<=s&&(s=t),1e3*this.bM[s]}ir(){if(super.ir(),!this.mM){this.wM=void 0;let t=null;if(this.xM?(this.xM=!1,t=this.yM,this.CM()):t=this.gM,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.AM(s)?this.IM(e,s):this.LM(e,s)}this.gM.length=0,this.pM=!1,this.vM=-1}}}dp(){super.dp();const t=this.FM();if(this.mM&&this.yM.length>=1&&(t!==this.vM||this.pM||this.xM)){this.xM=!1,this.vM=t,this.pM=!1,this.CM(),this.wM=[];const i=this.yM.length;let s=this.yM[0][0]-this.yM[0][0]%(t/2)+t,e=0;for(;e<i;){let r=this.MM(e);if(void 0===r)break;let h=r[3],n=r[2];const o=e;for(e+=1;e<i&&this.yM[e][0]<s;)r=this.yM[e],this.yM[e][3]<h&&(h=this.yM[e][3]),n<this.yM[e][2]&&(n=this.yM[e][2]),e+=1;const a=e-1;let l=r[0];o<a&&(l=this.yM[a][0],r=[l,this.yM[o][1],n,h,this.yM[a][4]]),r[1]<r[4]?this.IM(l,r):this.LM(l,r),this.wM.push(r),s+=t}}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class lc extends ac{constructor(t,i,s,e,r,h,n,o,a,l){super(t,i,s,e,r,h,n,o,a,l),this.PM=1175494351e-14,this.kM=this.bi.ohlcCandleThicknessPixels||5,this.BM=this.bi.ohlcCandleTailStrokeStylePositive,this.DM=this.bi.ohlcCandleTailStrokeStyleNegative,this.EM=this.bi.ohlcCandleBodyFillStylePositive,this.RM=this.bi.ohlcCandleBodyFillStyleNegative,this.OM=s.bA(this.scale).cr(new ar({thickness:this.kM,fillStyle:this.EM})),this.OM.cc={x:0,y:1},this.zM=s.bA(this.scale).cr(new ar({thickness:this.kM,fillStyle:this.RM})),this.zM.cc={x:0,y:-1},this.VM=s.bA(this.scale).cr(this.BM),this.NM=s.bA(this.scale).cr(this.DM),this._s(this.OM),this._s(this.zM),this._s(this.VM),this._s(this.NM)}setBodyThickness(t){return this.kM=t,this.OM.cr(new ar({thickness:this.kM,fillStyle:this.EM})),this.zM.cr(new ar({thickness:this.kM,fillStyle:this.RM})),this.chart.pi.Bs(),this}getBodyThickness(){return this.kM}setBodyFillStylePositive(t){return this.EM="function"==typeof t?t(this.EM):t,this.OM.cr(new ar({thickness:this.kM,fillStyle:this.EM})),this.chart.pi.Bs(),this}getBodyFillStylePositive(){return this.EM}setBodyFillStyleNegative(t){return this.RM="function"==typeof t?t(this.RM):t,this.zM.cr(new ar({thickness:this.kM,fillStyle:this.RM})),this.chart.pi.Bs(),this}getBodyFillStyleNegative(){return this.RM}setTailStrokeStylePositive(t){return this.BM="function"==typeof t?t(this.BM):t,this.VM.cr(this.BM),this.chart.pi.Bs(),this}getTailStrokeStylePositive(){return this.BM}setTailStrokeStyleNegative(t){return this.DM="function"==typeof t?t(this.DM):t,this.NM.cr(this.DM),this.chart.pi.Bs(),this}getTailStrokeStyleNegative(){return this.DM}er(){return{fill:this.EM,fill2:this.RM,behavior:{colorStep:!0}}}CM(){return this.VM.Vi(),this.NM.Vi(),this.OM.Vi(),this.zM.Vi(),this}IM(t,i){return Math.abs(i[1]-i[4])<this.PM?this.OM.Ho().wA({x:t,y:i[1]-this.PM},{x:t,y:i[1]+this.PM}):this.OM.Ho().wA({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.VM.Ho().wA({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.VM.Ho().wA({x:t,y:i[3]},{x:t,y:i[1]}),this}LM(t,i){return Math.abs(i[1]-i[4])<this.PM?this.zM.Ho().wA({x:t,y:i[1]-this.PM},{x:t,y:i[1]+this.PM}):this.zM.Ho().wA({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.NM.Ho().wA({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.NM.Ho().wA({x:t,y:i[1]},{x:t,y:i[2]}),this}}class uc extends ac{constructor(t,i,s,e,r,h,n,o,a,l){super(t,i,s,e,r,h,n,o,a,l),this.kM=this.bi.ohlcBarThicknessPixels||10,this.GM=this.bi.ohlcBarStrokeStylePositive,this.$M=this.bi.ohlcBarStrokeStyleNegative,this.UM=s.bA(this.scale).cr(this.GM),this._s(this.UM),this.YM=s.bA(this.scale).cr(this.GM),this.YM.cc={x:-this.kM/2,y:0},this._s(this.YM),this.jM=s.bA(this.scale).cr(this.GM),this.jM.cc={x:this.kM/2,y:0},this._s(this.jM),this.HM=s.bA(this.scale).cr(this.$M),this._s(this.HM),this.WM=s.bA(this.scale).cr(this.$M),this.WM.cc={x:-this.kM/2,y:0},this._s(this.WM),this.XM=s.bA(this.scale).cr(this.$M),this.XM.cc={x:this.kM/2,y:0},this._s(this.XM)}setStrokeStylePositive(t){return this.GM="function"==typeof t?t(this.GM):t,this.UM.cr(this.GM),this.YM.cr(this.GM),this.jM.cr(this.GM),this.chart.pi.Bs(),this}getStrokeStylePositive(){return this.GM}setStrokeStyleNegative(t){return this.$M="function"==typeof t?t(this.$M):t,this.HM.cr(this.$M),this.WM.cr(this.$M),this.XM.cr(this.$M),this.chart.pi.Bs(),this}getStrokeStyleNegative(){return this.$M}er(){return{fill:this.GM.getFillStyle(),fill2:this.$M.getFillStyle(),behavior:{colorStep:!0}}}setFigureWidth(t){return super.setFigureWidth(t),this.YM.cc={x:-t/2,y:0},this.WM.cc={x:-t/2,y:0},this.jM.cc={x:t/2,y:0},this.XM.cc={x:t/2,y:0},this}CM(){return this.HM.Vi(),this.UM.Vi(),this.WM.Vi(),this.YM.Vi(),this.XM.Vi(),this.jM.Vi(),this}IM(t,i){return this.UM.Ho().wA({x:t,y:i[3]},{x:t,y:i[2]}),this.YM.Ho().wA({x:t,y:i[1]},{x:t,y:i[1]}),this.jM.Ho().wA({x:t,y:i[4]},{x:t,y:i[4]}),this}LM(t,i){return this.HM.Ho().wA({x:t,y:i[3]},{x:t,y:i[2]}),this.WM.Ho().wA({x:t,y:i[1]},{x:t,y:i[1]}),this.XM.Ho().wA({x:t,y:i[4]},{x:t,y:i[4]}),this}}const cc={Candlesticks:lc,Bars:uc},dc=t=>({defaultDragMouseStyle:exports.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...el(t,((t,i)=>t.OS(i)),((t,i)=>t.RS(i)),(t=>t.gn().x))}),fc=t=>({defaultDragMouseStyle:exports.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...el(t,((t,i)=>t.VS(i)),((t,i)=>t.zS(i)),(t=>t.gn().y))});class Ac extends Fl{constructor(t,i,s,e,r,h,n,o){super(t,i,s,e,r,o),this.ZM=!1,this.JM=!1,this.QM=!1,this.KM=!1,this.qM=!1,this.tw=new Map,this.iw=new Map,this.sw=[],this.ew=[],this.rw=!0,this.hw=!0,this.nw=!1,this.ow=[],this.aw=new Set,this.lw=!1,this.Qy=r,this.uw=h,this.cw=n,this.dw=o.cursorGridStrokeStyleX,this.fw=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.ZM=t,this.Ws.Bs(),this}getKeepWithinAxisBoundaries(){return this.ZM}dispose(){return super.dispose(),this.tw.forEach((t=>t.forEach((t=>t.dispose())))),this.iw.forEach((t=>t.forEach((t=>t.dispose())))),this.sw.length=0,this.ew.length=0,this.Xy.length=0,this}ir(){return this.nw&&this.di&&this.setPosition(...this.ow),this.tw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.iw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.sw.forEach((t=>t.setVisible(this.di&&this.Cg).setMarkerVisible(this.di&&this.Cg&&this.rw))),this.ew.forEach((t=>t.setVisible(this.di&&this.Cg).setMarkerVisible(this.di&&this.Cg&&this.hw))),super.ir()}im(){if(!this.ZM)return super.im();const t=this.Ky,i=t.getPosition(a(-1,-1),exports.UISpace.PaddedBackground),s=t.getPosition(a(1,1),exports.UISpace.PaddedBackground),e=this.ow.map((e=>{const r=e.pointMarkerScale.x,h=e.pointMarkerScale.y,n=q({x:r.ai.$,y:h.ai.$},{x:r,y:h},t.scale),o=q({x:r.ai.U,y:h.ai.U},{x:r,y:h},t.scale),a={x:Wt(i.x,n.x,o.x),y:Wt(i.y,n.y,o.y)},l={x:Wt(s.x,n.x,o.x),y:Wt(s.y,n.y,o.y)};return{axisX:r,axisY:h,a:n,b:o,visibleArea:Math.abs(l.x-a.x)*Math.abs(l.y-a.y),clampMin:a,clampMax:l,tableMin:i,tableMax:s}}));e.sort(((t,i)=>i.visibleArea-t.visibleArea));const r=e[0];if(!r)return super.im();const h=gs(r.tableMin.x,r.a.x,r.b.x)&&gs(r.tableMax.x,r.a.x,r.b.x),n=gs(r.tableMin.y,r.a.y,r.b.y)&&gs(r.tableMax.y,r.a.y,r.b.y);return{x:!h,y:!n,either:!h||!n,resultTableViewport:{x:r.axisX,y:r.axisY},resultTableViewportBounds:{x:{min:Math.min(r.axisX.ai.$,r.axisX.ai.U),max:Math.max(r.axisX.ai.$,r.axisX.ai.U)},y:{min:Math.min(r.axisY.ai.$,r.axisY.ai.U),max:Math.max(r.axisY.ai.$,r.axisY.ai.U)}}}}setPosition(...t){t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.ow=t,this.sw.length=0,this.ew.length=0;const i=this.renderingScale;if(t.length>0){const s=t[0].resultTable,e=Fa(t[0].resultTableScale,i),r=e===this.scale?s:q(s,e,this.scale);this.Ky.setPosition(r)}this.Cg=!1,this.jy.forEach((t=>{t.targetVisible=!1}));const s=new Map;t.forEach(((t,e)=>{const r=t.pointMarkerScale.x,h=t.pointMarkerScale.y,n=s.get(r)||[],o=s.get(h)||[],l=!n.includes(t.pointMarker.x),u=!o.includes(t.pointMarker.y);n.push(t.pointMarker.x),o.push(t.pointMarker.y),s.set(r,n),s.set(h,o);const c=t.pointMarker,d=vc(a(c.x,c.y),r,h);if(l){const t=this.Aw(r,!0);t.setValue(c.x),t.setGridStrokeLength(this.JM?d.x:1).setAllocatesAxisSpace(this.lw),this.sw.push(t)}if(u){const t=this.Aw(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.QM?d.y:1).setAllocatesAxisSpace(this.lw),this.ew.push(t)}let f=this.jy[e];if(!f){const t=new ho(this.Ws,this.renderingScale,this.scale,jt,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.jy.push(f),this.Xy.forEach((i=>i(t)))}void 0!==t.pointMarkerShape&&f.pointMarker.setShape(t.pointMarkerShape),void 0!==t.pointMarkerSize&&f.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&f.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&f.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle);const A=Fa(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:q(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const p=r.getInterval(),v=h.getInterval(),y=Math.min(p.start,p.end),m=Math.max(p.start,p.end),x=Math.min(v.start,v.end),S=Math.max(v.start,v.end);c.x>=y&&c.x<=m&&c.y>=x&&c.y<=S&&(this.Cg=!0)}));for(const t of this.jy)t.targetVisible||(t.pointMarker.dispose(),this.jy.splice(this.jy.indexOf(t),1));return this}setTickMarkersAllocateAxisSpace(t){return this.lw=t,this.Ws.Bs(),this}getTickMarkersAllocateAxisSpace(){return this.lw}Aw(t,i){this.aw.has(t)||(t.addEventListener("dispose",(()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.aw.add(t));const s=i?this.tw:this.iw,e=i?this.sw:this.ew,r=s.get(t)||[];s.set(t,r);let h=r.find((t=>!e.includes(t)));return h||(h=i?t.EA(!1,this.uw):t.EA(!1,this.cw),r.push(h),this.Kh(h,i),h.setPointerEvents(!1)),h}Kh(t,i){const s=i?this.dw:this.fw;return t.setGridStrokeStyle(s),t.setPointerEvents(!1),(i?this.rw:this.hw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.JM=t,this.Ws.Bs(),this}getGridStrokeXCut(){return this.JM}setGridStrokeYCut(t){return this.QM=t,this.Ws.Bs(),this}getGridStrokeYCut(){return this.QM}setGridStrokeXStyle(t){return this.dw=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.tw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.dw))))),this}getGridStrokeXStyle(){return this.dw}setGridStrokeYStyle(t){return this.fw=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.iw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.fw))))),this}getGridStrokeYStyle(){return this.fw}setTickMarkerXVisible(t){return this.rw=t,this.Ws.Bs(),this}getTickMarkerXVisible(){return this.rw}setTickMarkerYVisible(t){return this.hw=t,this.Ws.Bs(),this}getTickMarkerYVisible(){return this.hw}setTickMarkerX(t){return this.tw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.uw=this.uw.addStyler(t),this.Ws.Bs(),this}setTickMarkerY(t){return this.iw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.cw=this.cw.addStyler(t),this.Ws.Bs(),this}}class gc{constructor(t,i,s,e){this.dm=[],this.fm=(t,i)=>(this.dm.forEach((s=>s(t,i))),t),this.addStyler=t=>new gc(this.Qy,this.uw,this.cw,this.dm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new gc(t,this.uw,this.cw,this.dm.map((t=>t))),this.Am=(t,i,s,e,r)=>this.fm(new Ac(t,i,s,e,this.Qy,this.uw,this.cw,r),r),this.Qy=t,this.dm=e,this.uw=i,this.cw=s}}const pc=new gc(io,Ro.PointableTextBox,Ro.PointableTextBox,[(t,i)=>{Il(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Gh(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Gh(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),vc=(t,i,s)=>{const e=i.ai,r=s.ai;let h=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),n=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===s.Kf&&(h=1-h),1===i.Kf&&(n=1-n),a(n,h)};class yc{constructor(t,i,s,e){this.gw=!1,this.D=new yt,this.chart=s,this.pw=e,this.me=t.me,this.ke=e||nh,this.yw=Nt.document.createElement("div"),this.yw.style.position="absolute",this.yw.style.pointerEvents="none",Nt.document.body.append(this.yw);const r=()=>{const t=s.engine.container.getBoundingClientRect();this.yw.style.left=`${t.left}px`,this.yw.style.top=`${t.top}px`,this.yw.style.width=`${t.width}px`,this.yw.style.height=`${t.height}px`};r(),s.addEventListener("resize",r),this.mw(this.yw),this.xw(),this.Sw(),this.bw(),this.Mw(i),this.chart.ww().push(this)}mw(t){this._w=Nt.document.createElement("div"),this._w.style.pointerEvents="all",t.append(this._w),this.kw=Nt.document.createElement("div"),this.Cw=new Qr(this.me,this.ke,this.chart,this.kw),this.Tw=Nt.document.createElement("table"),this.Tw.style.borderSpacing="0",this._w.appendChild(this.Cw.Ee()),this._w.appendChild(this.kw),this.kw.appendChild(this.Tw)}Sw(){let t=0,i=0,s=0,e=0,r=!1;this.gw=!1,this._w.onmousedown=h=>{h=h||Nt.event,s=h.clientX,e=h.clientY,r=!0,Nt.document.onmouseup=t=>{this.gw?this._w.addEventListener("click",di,!0):this._w.removeEventListener("click",di,!0),r=!1,this.gw=!1,Nt.document.onmouseup=null,Nt.document.onmousemove=null},Nt.document.onmousemove=h=>{h=h||Nt.event,r&&(t=s-h.clientX,i=e-h.clientY,s=h.clientX,e=h.clientY,this.gw=!0,this._w.style.top=this._w.offsetTop-i+"px",this._w.style.left=this._w.offsetLeft-t+"px",this._w.style.removeProperty("right"),this._w.style.removeProperty("bottom"))}}}bw(){let t=0,i=0,s=0,e=0,r=!1;this._w.ontouchstart=h=>{h=h||Nt.event,s=h.touches[0].clientX,e=h.touches[0].clientY,r=!0,this._w.ontouchend=()=>{r=!1,Nt.document.ontouchend=null,Nt.document.ontouchmove=null},this._w.ontouchmove=h=>{r&&(di(h),h=h||Nt.event,t=s-h.touches[0].clientX,i=e-h.touches[0].clientY,s=h.touches[0].clientX,e=h.touches[0].clientY,this._w.style.top=this._w.offsetTop-i+"px",this._w.style.left=this._w.offsetLeft-t+"px",this._w.style.removeProperty("right"),this._w.style.removeProperty("bottom"))}}}xw(){this._w.style.setProperty("top","10px"),this._w.style.setProperty("left","10px"),this._w.style.position="absolute",this._w.style.display="flex",this._w.style.alignItems="flex-start",this.kw.style.setProperty("display","none")}removePositionProperty(){this._w.style.removeProperty("top"),this._w.style.removeProperty("left"),this._w.style.removeProperty("bottom"),this._w.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case exports.OSMPosition.BottomLeft:this._w.style.setProperty("bottom","10px"),this._w.style.setProperty("left","10px");break;case exports.OSMPosition.TopLeft:this._w.style.setProperty("top","10px"),this._w.style.setProperty("left","10px");break;case exports.OSMPosition.BottomRight:this._w.style.setProperty("bottom","10px"),this._w.style.setProperty("right","10px");break;case exports.OSMPosition.TopRight:default:this._w.style.setProperty("top","10px"),this._w.style.setProperty("right","10px")}}Mw(t){for(let i=0;i<t.length;i+=1){const s=this.Tw.insertRow();for(let e=0;e<t[i].length;e+=1){const r=s.insertCell(),h=t[i][e];"object"!=typeof h?this.Fw(h,r):this.addCustomButton(h,r)}}}Fw(t,i){switch(t){case exports.OnScreenMenuButtonType.ZoomIn:this.Iw(new $r(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomInX:this.Iw(new Ur(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomInY:this.Iw(new Yr(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomOut:this.Iw(new jr(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomOutX:this.Iw(new Hr(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomOutY:this.Iw(new Wr(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ZoomToFit:this.Iw(new Zr(this.me,this.chart,this.ke),i);break;case exports.OnScreenMenuButtonType.ToggleAnimations:this.Iw(new Xr(this.me,this.chart,this.ke),i);break;default:console.error(`No predefined button like "${exports.OnScreenMenuButtonType[t]}" exists.`)}}Iw(t,i){i.rowSpan=t.xe.rows,i.colSpan=t.xe.columns,t.De(i)}addCustomButton(t,i){const s=new Jr(this.me,t,this.chart);return this.Iw(s,i),this}dispose(){this.yw.remove(),this.D.R("dispose",{})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class mc extends Bu{constructor(t,i,s,e,r,h,n,o,a,l,u,c){var d;super(t,i,s,e,r,h,n,o,a,l),this.Lw=t=>{this.D.R(t.type,t)},this.Pw=0,this.D=new yt,this.Da=c,this.Cc=this.Ws.zd(this.scale).cr(Ei(this.bi.lineSeriesStrokeStyle,u)).Rd(Ei(this.bi.pointSeriesFillStyle,u)).Yd(Ei(this.bi.pointSeriesStrokeStyle,u)).Od(Ei(this.bi.areaSeriesPositiveFillStyle,u)).Bw(void 0).Hd(7),this.Cc.Dw=!1!==(null===(d=this.Da)||void 0===d?void 0:d.allowDataGrouping),this._s(this.Cc)}yp(){return this.Ew().getSampleCount()>0}ws(){return this.getDataSet().Qc(this.Rw)}setDataSet(t,i){var s;const e=null===(s=this.Dd)||void 0===s?void 0:s.ts;if(t===e&&i&&this.Rw&&Gn(i,this.Rw))return this;const r=["change","clear","loop","maxsamplecountexceed"];return e&&r.forEach((t=>e.removeEventListener(t,this.Lw))),t?(r.forEach((i=>t.addEventListener(i,this.Lw))),!i&&t.Uc&&(i=this.Ow(t.Uc)),i&&t.ud(i),this.Rw=i,this.zw=!1,(null==i?void 0:i.color)&&this.chart.pi.La(jh.zo),(null==i?void 0:i.size)&&this.chart.pi.La(jh.Oo),this.Dd=Ji(t,this.Dd,(()=>({change:()=>{this.Pw+=1,this.Pw>1&&this.chart.pi.La(jh.Ro),this.chart.pi.Bs()},clear:()=>{this.chart.pi.Bs()}}))),i&&this.Cc.Ed(t,i),this.chart.pi.Bs(),this):(this.Cc.Ed(),this)}getDataSet(){return this.Ew()}setDataMapping(t){var i;return(null===(i=this.Dd)||void 0===i?void 0:i.ts)?this.setDataSet(this.getDataSet(),t):this.Rw=t,this.zw=!1,this}getDataMapping(){return this.Rw}setStrokeStyle(t){return this.Cc.cr(t),this.Ws.Bs(),this}getStrokeStyle(){return this.Cc.do()}setAreaFillStyle(t){return this.Cc.Od(t),this.Ws.Bs(),this}getAreaFillStyle(){return this.Cc.Vw()}setPointFillStyle(t){return this.Cc.Rd(t),this.Ws.Bs(),this}getPointFillStyle(){return this.Cc.Ud()}setPointStrokeStyle(t){return this.Cc.Yd(t),this.Ws.Bs(),this}getPointStrokeStyle(){return this.Cc.jd()}setPointSize(t){return this.Cc.Hd(t),this.Ws.Bs(),this}getPointSize(){return this.Cc.Nw()}setPointShape(t){return this.Cc.Vd(t),this.Ws.Bs(),this}getPointShape(){return this.Cc.Nd()}setPointRotation(t){return this.Cc.Gd(t),this.Ws.Bs(),this}getPointRotation(){return this.Cc.$d()}setPointAlignment(t){return this.Cc.YA(t),this.chart.pi.Bs(),this}getPointAlignment(){return this.Cc.Gw()}setCurvePreprocessing(t){return this.Cc.Bw(t),this.Ws.Bs(),this}getCurvePreprocessing(){return this.Cc.$w()}appendJSON(t,i,s){return this.Ew().appendJSON(t,i,s),this.Ws.pi.Bs(),this}appendSample(t,i){return this.Ew().appendSample(t,i),this.Ws.pi.Bs(),this}appendSamples(t,i){return this.Ew().appendSamples(t,i),this.Ws.pi.Bs(),this}fill(t){return this.Ew().fill(t),this.Ws.Bs(),this}setSamples(t,i){return this.Ew().setSamples(t,i),this.Ws.Bs(),this}alterSamplesStartingFrom(t,i,s){return this.Ew().alterSamplesStartingFrom(t,i,s),this.Ws.Bs(),this}alterSamplesByIndex(t,i){return this.Ew().alterSamplesByIndex(t,i),this.Ws.Bs(),this}alterSamplesByMatch(t,i,s){return this.Ew().alterSamplesByMatch(t,i,s),this.Ws.Bs(),this}getSampleCount(){return this.Ew().getSampleCount()}getNextSampleIndex(){return this.Ew().getNextSampleIndex()}setMaxSampleCount(t){return this.Ew().setMaxSampleCount(t),this.Ws.Bs(),this}getMaxSampleCount(){return this.Ew().getMaxSampleCount()}clear(){return this.Ew().clear(),this.Ws.Bs(),this}readBack(t){if(this.Rw||this.Uw(),!this.Rw)return{xValues:new Float64Array,yValues:new Float64Array,iSampleFirst:0};const i=this.Ew();if(null==t?void 0:t.onlyInRange){const s=i.Qc(this.Rw),e=s&&ze(s);if(!e)throw new Error("LightningChart JS - attempted to use `PointLineAreaSeries.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");const r=this.Rw[e];return i.ld(this.Rw,{onlyInRange:{key:r,start:t.onlyInRange.start,end:t.onlyInRange.end}})}return i.ld(this.Rw)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){this.Rw||this.Uw();let s=sA(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.Yw(),r=Se(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,h=e.yd(this.Rw,r,s,this.scale,this.chart.eA);if(void 0!==h)return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}}Qi(t,i,s){const e=this.getDataSet(),r=null==t?void 0:t.dataPoint;return void 0===e.Qc(this.Rw)||r?r?{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}:void 0:Qi({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0,sample:0,pointShape:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Yw(){return this.Ew()}Ys(){return Pi(this.getPointFillStyle(),this.Cc._i())||Pi(this.getStrokeStyle().getFillStyle(),this.Cc._i())||Pi(this.getAreaFillStyle(),this.Cc._i())}xp(){var t;const i=null===(t=this.Dd)||void 0===t?void 0:t.ts;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.Bc>0}BS(t){}RS(t){this.Rw||this.Uw();const i=this.Cc.hl();return i&&"y"===i.jw&&t&&i.Hw(),this.Cc.Wi(t)}OS(t){this.Rw||this.Uw();const i=this.Cc.hl();return i&&"y"===i.jw&&t&&i.Hw(),this.Cc.Hi(t)}zS(t){this.Rw||this.Uw();const i=this.Cc.hl();return i&&"x"===i.jw&&!t&&i.Hw(),this.Cc.Zi(t)}VS(t){this.Rw||this.Uw();const i=this.Cc.hl();return i&&"x"===i.jw&&t&&i.Hw(),this.Cc.Xi(t)}gn(){return{x:this.Cc.uu(),y:this.Cc.cu()}}Uw(){var t;const i=null===(t=this.Dd)||void 0===t?void 0:t.ts;if((!this.Rw||this.zw)&&i&&i.Uc){const t=i.Uc,s=this.Ww;let e=!1;if(this.Rw&&this.zw&&s){const i=Object.keys(t).length!==Object.keys(s).length,r=Object.entries(t).find((([t,i])=>{var e;return t in s&&s[t]!==(null===(e=i.$c)||void 0===e?void 0:e.effective)}));e=!i&&void 0===r}if(!e){const t=this.Ow(i.Uc);!t||this.Rw&&Gn(this.Rw,t)||(this.Rw=t,this.zw=!0,t.color&&this.chart.pi.La(jh.zo),t.size&&this.chart.pi.La(jh.Oo),this.Cc.Ed(i,t)),this.Ww=Object.fromEntries(Object.entries(i.Uc).map((([t,i])=>{var s;return[t,null===(s=i.$c)||void 0===s?void 0:s.effective]})))}}}cp(){var t,i,s,e;if(super.cp(),this.Uw(),((null===(t=this.Da)||void 0===t?void 0:t.strictMode)||(null===(i=this.Dd)||void 0===i?void 0:i.ts.Nc))&&this.Rw&&(null===(s=this.Dd)||void 0===s?void 0:s.ts)){const t=this.Dd.ts.Uc;t&&Object.values(this.Rw).forEach((i=>{if(!(i in t))throw new Error(`LightningChart JS error - PointLineAreaSeries data mapping is referencing a data property ('${i}') that doesn't exist in the connected data set. This is not allowed when strict mode is enabled.`)}))}const r=ze(null!==(e=this.ws())&&void 0!==e?e:"ProgressiveX");this.Cc.Xw("x"===r?0===this.xAxis.Qf?"bottom":"top":0===this.yAxis.Qf?"left":"right")}Ew(){var t;if(!this.Dd){const t=new $n(this.Da);return this.setDataSet(t,!0!==this.zw?this.Rw:void 0),t}return null===(t=this.Dd)||void 0===t?void 0:t.ts}Ow(t){var i,s;if((null===(i=this.Da)||void 0===i?void 0:i.strictMode)||(null===(s=this.Dd)||void 0===s?void 0:s.ts.Nc))throw new Error("LightningChart JS error - PointLineAreaSeries data mapping is not explicitly defined. This is not allowed when strict mode is enabled.");const e=Object.entries(t),r=e.find((t=>t[0].toLowerCase().includes("x"))),h=e.find((t=>t[0].toLowerCase().includes("y"))),n=e.find((t=>t[0].toLowerCase().includes("size"))),o=e.find((t=>t[0].toLowerCase().includes("rot"))),a=e.find((t=>t[0].toLowerCase().includes("lookup")||t[0].toLowerCase().includes("value")&&!t[0].toLowerCase().includes("y")&&!t[0].toLowerCase().includes("x"))),l=e.find((t=>t[0].toLowerCase().includes("color"))),u={};n&&(u.size=n[0]),o&&(u.rotation=o[0]),a&&(u.lookupValue=a[0]),l&&(u.color=l[0]);const c=e.find((t=>{var i;return Boolean(null===(i=t[1].$c)||void 0===i?void 0:i.effective)})),d=(t,...i)=>{for(const s of i)if(s!==t)return s[0];for(const i of e)if(i!==t&&!Object.keys(u).includes(i[0]))return i[0]};if("xValues"in t&&"yValues"in t)return{...u,x:"xValues",y:"yValues"};if("yValues"in t){const t=d(e.find((t=>"yValues"===t[0])));if(t)return{...u,x:t,y:"yValues"}}if("xValues"in t){const t=d(e.find((t=>"xValues"===t[0])));if(t)return{...u,y:t,x:"xValues"}}if(r&&h)return{...u,x:r[0],y:h[0]};if(c){const t="x",i="y",s=d(c);if(s)return{...u,[t]:c[0],[i]:s}}return e.length>=2?{...u,x:e[0][0],y:e[1][0]}:void 0}er(){const t=this.getPointFillStyle(),i=this.getAreaFillStyle();return{stroke:this.getStrokeStyle(),fill:t!==ae?t:i,behavior:{priority:"stroke"}}}js(){return this.Es||this.getPointShape()}rr(t,i){t.Ii(i),this.Ws.Bs()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const xc={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},Sc=(t,i,s,e)=>{t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const r=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",r),()=>{t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",r)}},bc=(t,i,s,e)=>{const r=[];t.forEachAxis((t=>{const h=i=>s(t,i);t.addEventListener(i,h,e),r.push((()=>t.removeEventListener(i,h)))}));const h=t=>{const h=i=>s(t.axis,i);t.axis.addEventListener(i,h,e),r.push((()=>t.axis.removeEventListener(i,h)))};return t.addEventListener("axisadd",h),r.push((()=>t.removeEventListener("axisadd",h))),()=>{r.forEach((t=>t()))}},Mc=(t,i,s)=>{ss();const e=new Map;t.forEachAxis((t=>{var s,r;const h=t.ar.chartInteractions;!1===h||"object"==typeof h&&!1===h.restoreDefault||e.set(t,{animate:null!==(s=i.animationsEnabled)&&void 0!==s?s:void 0,stopAxisAfter:null!==(r=i.stopScroll)&&void 0!==r?r:void 0})})),t.Zw(e);let r=i.cursor;if(null!==r){r=null!=r?r:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(r);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=i.on;h&&Nt.requestAnimationFrame((()=>h({event:s})))},wc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ai.Z(i),t.axis.tA.Z(s)})))),_c=a(10,10);var kc;exports.AxisPosition=void 0,(kc=exports.AxisPosition||(exports.AxisPosition={}))[kc.Top=0]="Top",kc[kc.Bottom=1]="Bottom",kc[kc.Left=2]="Left",kc[kc.Right=3]="Right";const Cc=new Set([exports.AxisPosition.Top,exports.AxisPosition.Bottom,exports.AxisPosition.Left,exports.AxisPosition.Right]),Tc=t=>t.setStopped(!0),Fc=(t,i)=>{if(!t||!i)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const s="linear-highPrecision"===t.uh.type||"linear-highPrecision"===i.uh.type,e="logarithmic"===t.uh.type||"logarithmic"===i.uh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.uh.type}, y: ${i.uh.type})`;throw new Error(s)}};var Ic,Lc,Pc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Ic||(Ic={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Lc||(Lc={}));class Bc extends fl{constructor(t,i,s,e,r,h,n){var o,a,l,u,c;super(t,i,s,i.Hg("chartXY bg",0),e,i.pi.bi.chartXYBackgroundFillStyle,i.pi.bi.chartXYBackgroundStrokeStyle,i.pi.bi.chartXYTitleFont,i.pi.bi.chartXYTitleFillStyle,i.pi.bi.chartXYTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.Jw=this.Bg.d2({scaleXYConstructor:Z}),this.IA=[],this.LA=[],this.BA=[],this.PA=[],this.Qw=new Map,this.Kw=!0,this.qw=[],this.t_=this.bi.chartXYZoomingRectangleFillStyle,this.i_=this.bi.chartXYZoomingRectangleStrokeStyle,this._A=Dc,this.PS=0,this.wm=[],this.km=()=>{if(this.ci)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.gA().find((t=>t.yp()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.wm.push(t),this.wm.length>100&&this.wm.shift())},this.s_=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&gs(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&gs(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.e_=wc(this.LA,this.IA),this.r_=wc(this.BA,this.PA),this.h_=t=>{this.e_(t.engineWidth,t.engineHeight),this.r_(t.engineHeight,t.engineWidth),this.Jw.Z(t.engineWidth,t.engineHeight),this.pi.Bs()},this.n_=(t,i)=>{this.Qw.set(t,i)},this.Xf=t=>{const i=this.LA.findIndex((i=>i.axis===t)),s=this.IA.findIndex((i=>i.axis===t)),e=this.BA.findIndex((i=>i.axis===t)),r=this.PA.findIndex((i=>i.axis===t));i>=0&&this.LA.splice(i,1),s>=0&&this.IA.splice(s,1),e>=0&&this.BA.splice(e,1),r>=0&&this.PA.splice(r,1),this.Qw.delete(t),this.pi.Bs()},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new oc(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(e,t),e},this.D=new yt,this.pi.La(jh.Lo),this.wn({left:null!==(a=this.bi.panelPadding)&&void 0!==a?a:7,right:null!==(l=this.bi.panelPadding)&&void 0!==l?l:7,top:null!==(u=this.bi.panelPadding)&&void 0!==u?u:7,bottom:null!==(c=this.bi.panelPadding)&&void 0!==c?c:7},!1),this.a_=i.Rm("chartXY series bg",Ic.seriesBackground),this.l_=[Ic.gridLine0,Ic.gridLine1,Ic.gridLine2].map((t=>i.u_(`chartXY gridline #${t}`,t))),this.Hf=i.u_("chartXY highlighters below",Ic.highlightersBelow),this.bx=i.Om("chartXY plotting",Lc.plotting),this.Wf=i.Om("chartXY highlighters above",Lc.highlightersAbove),this.jf=i.Om("chartXY fg",Lc.fg),this.Jw.x.W(0,this.uiScale.x.getCellSize()-(this.ot.left+this.ot.right+this.Gn.left+this.Gn.right)),this.Jw.y.W(0,this.uiScale.y.getCellSize()-(this.ot.bottom+this.ot.top+this.Gn.bottom+this.Gn.top)),this.Jw.Z(this.uiScale.kt().x,this.uiScale.kt().y),this.yv=this.a_.tr(this.Jw).qe(this.bi.chartXYSeriesBackgroundFillStyle).Ke(Tt),this.mv=this.a_.tr(this.Jw).qe(ae).Ke(this.bi.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.vv(this.yv,this.mv),this.setSeriesBackgroundEffect(!1);const d=Zt(h?h.cursorBuilder:void 0,pc),f=i.Ym();this.jm=oA(this,f,d.Am(f,this.Jw,this.Jw,jt,this.bi),this,"show-all",Vc,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(h&&h.defaultAxisX),this.addAxisY(h&&h.defaultAxisY),this.addEventListener("resize",this.h_),this.Yr.tn("ChartXY"),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.jg(r,this.Jw),this.Hm=(t=>{let i={},s=!1,e=!1,r=!1;const h=()=>{var s;const e=t.getAxes().find((t=>{var i,s;return(null===(i=t.getScrollStrategy())||void 0===i?void 0:i.id)===fh||(null===(s=t.getScrollStrategy())||void 0===s?void 0:s.id)===Ah})),r=t.getSeries().map((t=>t.ws())).find((t=>t)),h=t.getSeries().find((t=>t instanceof mc&&!le(t.getAreaFillStyle())&&t.ws())),n=e?{type:"scrolling",scrollingAxis:e,x:e.isX,y:e.isY}:r?{type:"progressive",x:"ProgressiveX"===r||"RegressiveX"===r,y:"ProgressiveY"===r||"RegressiveY"===r}:{type:"freeform"};if("progressive"===n.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},s={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return zt({rectangleZoom:{x:n.x,y:n.y,rmb:!1},pan:{x:n.x,y:n.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:!1,zoom:{x:n.x,y:n.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:n.x?t:s,yAxis:n.y?t:s},i)}if("scrolling"===n.type){const t=((null===(s=n.scrollingAxis.Rh)||void 0===s?void 0:s.id)===Ah?-1:1)*(n.scrollingAxis.getInterval().end>n.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",e={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},r={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return zt({rectangleZoom:!1,pan:{x:n.x,y:n.y,pinch:{},drag:{}},paginate:!1,zoom:{x:n.x,y:n.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:n.x?e:r,yAxis:n.y?e:r},i)}return zt({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},i)},n=t=>{const i=h(),s=t.getUserInteractions();let e=t.isX?i.xAxis:i.yAxis,r=i.axes;return e=!1!==e?e:xc,r=!1!==r?r:xc,zt(null!=r?r:{},null!=e?e:{},s)},o=t=>{},a=i=>{if(!t.axisX||!t.axisY)return;const n=ke(!1!==t.pi.Da.Ea),o=h(),a=_e(o.pan,"drag",i,s,e,r);a&&n.push((()=>((t,i,s,e)=>{let r;const h=t.getCursorMode();let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;const h=e.clientX-o.clientX,a=e.clientY-o.clientY;if(o=e,!n){if(!("mouse"===e.pointerType||Math.max(Math.abs(e.clientX-i.clientX),Math.abs(e.clientY-i.clientY))>=10))return;{n=!0;let i=s.cursor;null!==i&&(i=null!=i?i:!1===s.x?exports.MouseStyles.Vertical:!1===s.y?exports.MouseStyles.Horizontal:exports.MouseStyles.Move,r=t.engine.setMouseStyle(i)),t.setCursorMode(void 0),is()}}di(e),s.x&&t.forEachAxisX((t=>{var i;const e=t.ar.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-h*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),s.y&&t.forEachAxisY((t=>{var i;const e=t.ar.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(a*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))}));const l=s.on;l&&Nt.requestAnimationFrame((()=>l({event:e})))},l=s=>{s.pointerId===i.pointerId&&(Nt.removeEventListener("pointermove",a),Nt.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",u),r=t.engine.restoreMouseStyle(r),e(),t.setCursorMode(h),n&&(ts("click"),ts("contextmenu")))},u=s=>{s.pointerId!==i.pointerId&&(Nt.removeEventListener("pointermove",a),Nt.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",u),r=t.engine.restoreMouseStyle(r),e(),t.setCursorMode(h))};Nt.addEventListener("pointermove",a),Nt.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",u),ss()})(t,i,a,f())));const l=_e(o.zoom,"drag",i,s,e,r);l&&n.push((()=>((t,i,s,e)=>{let r;const h=s.cursor;if(null!==h){let i="function"==typeof h?h("in"):h;null!==i&&(i=null!=i?i:exports.MouseStyles.ZoomIn,r=t.engine.setMouseStyle(i))}const n=t.getCursorMode();t.setCursorMode(void 0);let o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{if(e.pointerId!==i.pointerId)return;di(e);const n={x:e.clientX-a.clientX,y:e.clientY-a.clientY};a=e,s.x&&t.forEachAxisX((e=>{var o;const a=e.ar.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ai.Et((e.ai.bt()+e.ai.Mt())/2):t.translateCoordinate(i,{x:e,y:e}).x;const u=.05*e.oh.getWidth({x:-n.x,y:n.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(e.zoom(l,u),!1!==s.stopScroll&&e.setStopped(!0),null!==h){let i="function"==typeof h?h(u<0?"in":"out"):h;null!==i&&(i=null!=i?i:u<0?exports.MouseStyles.ZoomIn:exports.MouseStyles.ZoomOut,r=t.engine.setMouseStyle(i,r))}})),s.y&&t.forEachAxisY((e=>{var o;const a=e.ar.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ai.Et((e.ai.bt()+e.ai.Mt())/2):t.translateCoordinate(i,{x:e,y:e}).y;const u=.05*e.oh.getWidth({x:-n.x,y:n.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(e.zoom(l,u),!1!==s.stopScroll&&e.setStopped(!0),null!==h){let i="function"==typeof h?h(u<0?"in":"out"):h;null!==i&&(i=null!=i?i:u<0?exports.MouseStyles.ZoomIn:exports.MouseStyles.ZoomOut,r=t.engine.setMouseStyle(i,r))}})),o||(is(),o=!0);const l=s.on;l&&Nt.requestAnimationFrame((()=>l({event:e})))},u=s=>{s.pointerId===i.pointerId&&(Nt.removeEventListener("pointermove",l),Nt.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),e(),t.setCursorMode(n))},c=s=>{s.pointerId!==i.pointerId&&(Nt.removeEventListener("pointermove",l),Nt.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),e(),t.setCursorMode(n))};Nt.addEventListener("pointermove",l),Nt.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",c),ss()})(t,i,l,f())));const u=_e(o.rectangleZoom,void 0,i,s,e,r);u&&n.push((()=>((t,i,s,e)=>{let r;const h=t.getCursorMode(),n=t.addRectangleSeries({legend:null}).setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),o=n.add({x1:0,x2:0,y1:0,y2:0});let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{if(e.pointerId!==i.pointerId)return;di(e),s.x&&t.forEachAxisX((t=>{const i=t.ar.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)})),s.y&&t.forEachAxisY((t=>{const i=t.ar.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)}));const n=t.translateCoordinate(i,t.coordsAxis),u=t.translateCoordinate(e,t.coordsAxis),c=q({x:0,y:0},t.Jw,t.coordsAxis),d=q({x:t.Jw.x.getInnerEnd(),y:t.Jw.y.getInnerEnd()},t.Jw,t.coordsAxis);!1===s.x?o.setDimensions({y1:n.y,x1:c.x,y2:u.y,x2:d.x}):!1===s.y?o.setDimensions({x1:n.x,y1:c.y,x2:u.x,y2:d.y}):o.setDimensions({x1:n.x,y1:n.y,x2:u.x,y2:u.y});const f=ps({x:e.clientX,y:e.clientY},{x:s.x?i.clientX:e.clientX,y:s.y?i.clientY:e.clientY})>=20,A=gs(u.x,c.x,d.x)&&gs(u.y,c.y,d.y);if(o.setFillStyle(f&&A?t.getZoomingRectangleFillStyle():ae).setStrokeStyle(f&&A?t.getZoomingRectangleStrokeStyle():Tt),a||(is(),a=!0),t.setCursorMode(f?void 0:h),f){let i=s.cursor;if(null!==i&&(i=null!=i?i:exports.MouseStyles.ZoomIn,r=t.engine.setMouseStyle(i,r)),!l){const t=s.start;t&&t({event:e})}}else r=t.engine.restoreMouseStyle(r);l=f},c=o=>{if(o.pointerId!==i.pointerId)return;const a=ps({x:o.clientX,y:o.clientY},{x:s.x?i.clientX:o.clientX,y:s.y?i.clientY:o.clientY})>=20,l=t.translateCoordinate(o,t.coordsAxis),f=q({x:0,y:0},t.Jw,t.coordsAxis),A=q({x:t.Jw.x.getInnerEnd(),y:t.Jw.y.getInnerEnd()},t.Jw,t.coordsAxis),g=gs(l.x,f.x,A.x)&&gs(l.y,f.y,A.y);a&&g&&t.forEachAxis((e=>{var r,h;if(e.isX&&!s.x)return;if(e.isY&&!s.y)return;const n=e.ar.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.rectangleZoom)return;const a=t.translateCoordinate(i,{x:e,y:e}),l=t.translateCoordinate(o,{x:e,y:e}),u=e.oh.getWidth(a),c=e.oh.getWidth(l),d=Math.sign(c-u),f=Math.sign(e.getInterval().end-e.getInterval().start),A=d===f?u:c,g=d===f?c:u;e.li(A,g,null!==(r=s.animationsEnabled)&&void 0!==r?r:void 0,null!==(h=s.stopScroll)&&void 0!==h?h:void 0,"interactionSetInterval")})),a&&(ts("click"),ts("contextmenu")),t.setCursorMode(h),n.dispose(),Nt.removeEventListener("pointermove",u),Nt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",d),r=t.engine.restoreMouseStyle(r),e();const p=a&&g&&s.on;p&&Nt.requestAnimationFrame((()=>p({event:o})))},d=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(h),n.dispose(),Nt.removeEventListener("pointermove",u),Nt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",d),r=t.engine.restoreMouseStyle(r),e())};Nt.addEventListener("pointermove",u),Nt.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",d),ss()})(t,i,u,f()))),n.end();const c=_e(o.pan,"pinch",i,s,e,r),d=_e(o.zoom,"pinch",i,s,e,r);(d||c)&&((t,i,s,e,r)=>{if(!s&&!e)return;const h=o=>{if(o.pointerId===i.pointerId)return;const a=r();let l;t.engine.container.removeEventListener("pointerdown",h),Nt.removeEventListener("pointerup",n);let u=o;const c=t.getCursorMode();t.setCursorMode(void 0);const d=r=>{var h,n,a,c;const d=l,f=u;if(r.pointerId===i.pointerId)l=r;else{if(r.pointerId!==o.pointerId)return;u=r}if(di(r),void 0===l||void 0===d)return;const A={x:(l.clientX-d.clientX+(u.clientX-f.clientX))/2*(null!==(h=null==s?void 0:s.sensitivity)&&void 0!==h?h:1),y:(l.clientY-d.clientY+(u.clientY-f.clientY))/-2*(null!==(n=null==s?void 0:s.sensitivity)&&void 0!==n?n:1)};let g=!1;if(s&&s.x&&(g=!0,t.forEachAxisX((t=>{const i=t.ar.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.RA({},A)}))),s&&s.y&&(g=!0,t.forEachAxisY((t=>{const i=t.ar.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.RA({},A)}))),g){const t=null==s?void 0:s.on;t&&Nt.requestAnimationFrame((()=>t({event:r})))}const p=Es(Ds({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-u.clientX),y:Math.abs(l.clientY-u.clientY)}),{x:null!==(a=null==e?void 0:e.sensitivity)&&void 0!==a?a:1,y:null!==(c=null==e?void 0:e.sensitivity)&&void 0!==c?c:1});let v=!1;if(e&&e.x&&(v=!0,t.forEachAxisX((t=>{var i;const s=t.ar.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.li(t.ai.Qt(t.getInterval().start,-t.oh.getWidth(p)),t.ai.Qt(t.getInterval().end,t.oh.getWidth(p)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),e&&e.y&&(v=!0,t.forEachAxisY((t=>{var i;const s=t.ar.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.li(t.ai.Qt(t.getInterval().start,-t.oh.getWidth(p)),t.ai.Qt(t.getInterval().end,t.oh.getWidth(p)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),v){const t=null==e?void 0:e.on;t&&Nt.requestAnimationFrame((()=>t({event:r})))}},f=s=>{s.pointerId!==i.pointerId&&s.pointerId!==o.pointerId||(di(s),t.setCursorMode(c),Nt.removeEventListener("pointermove",d),Nt.removeEventListener("pointerup",f),a())};Nt.addEventListener("pointermove",d),Nt.addEventListener("pointerup",f),ss()},n=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",h),Nt.removeEventListener("pointerup",n))};t.engine.container.addEventListener("pointerdown",h),Nt.addEventListener("pointerup",n)})(t,i,c,d,f)};Sc(t,"wheel",(i=>{const n=ke(!1!==t.pi.Da.Ea),o=h(),a=_e(o.pan,"wheel",i,s,e,r);a&&n.push((()=>((t,i,s)=>{if(di(i),t.forEachAxisX((t=>{var e;const r=t.ar.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||s.x&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),t.forEachAxisY((t=>{var e;const r=t.ar.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||s.y&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.x||s.y){let e=s.cursor;if(null!==e){e=null!=e?e:!s.x&&s.y?exports.MouseStyles.Vertical:s.x&&!s.y?exports.MouseStyles.Horizontal:exports.MouseStyles.Move;const i=t.engine.setMouseStyle(e);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=s.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))}})(t,i,a)));const l=_e(o.zoom,"wheel",i,s,e,r);l&&n.push((()=>((t,i,s)=>{di(i),t.forEachAxisX((e=>{var r;const h=e.ar.chartInteractions;if(!1===h||"object"==typeof h&&!1===h.zoom)return;if(!s.x)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ai.Et((e.ai.bt()+e.ai.Mt())/2):t.translateCoordinate(i,{x:e,y:e}).x,e.zoom(n,Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&e.setStopped(!0)})),t.forEachAxisY((e=>{var r;const h=e.ar.chartInteractions;if(!1===h||"object"==typeof h&&!1===h.zoom)return;if(!s.y)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ai.Et((e.ai.bt()+e.ai.Mt())/2):t.translateCoordinate(i,{x:e,y:e}).y,e.zoom(n,Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&e.setStopped(!0)}));const e=s.cursor;if(null!==e){let s="function"==typeof e?e(i.deltaY<0?"in":"out"):e;if(null!==s){s=null!=s?s:i.deltaY<0?exports.MouseStyles.ZoomIn:exports.MouseStyles.ZoomOut;const e=t.engine.setMouseStyle(s);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500)}}const r=s.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))})(t,i,l))),n.end()})),Sc(t,"click",(i=>{if(i.defaultPrevented)return;const n=ke(!1!==t.pi.Da.Ea),o=h(),a=_e(o.restoreDefault,void 0,i,s,e,r);a&&a.singleClick&&n.push((()=>{di(i),Mc(t,a,i)}));const l=_e(o.restorePrevious,void 0,i,s,e,r);l&&l.singleClick&&n.push((()=>{di(i);const s=t.getAxes().filter((t=>{const i=t.ar.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(e);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=l.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))})),n.end()})),Sc(t,"contextmenu",(i=>{if(i.defaultPrevented)return;const n=ke(!1!==t.pi.Da.Ea),o=h(),a=_e(o.restoreDefault,"rmb",i,s,e,r);a&&a.singleClick&&n.push((()=>{di(i),Mc(t,a,i)}));const l=_e(o.restorePrevious,"rmb",i,s,e,r);l&&l.singleClick&&n.push((()=>{di(i);const s=t.getAxes().filter((t=>{const i=t.ar.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(e);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=l.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))})),n.end()})),Sc(t,"dblclick",(i=>{if(i.defaultPrevented)return;const n=ke(!1!==t.pi.Da.Ea),o=h(),a=_e(o.restoreDefault,void 0,i,s,e,r);a&&a.doubleClick&&n.push((()=>{di(i),Mc(t,a,i)}));const l=_e(o.restorePrevious,void 0,i,s,e,r);l&&l.doubleClick&&n.push((()=>{di(i);const s=t.getAxes().filter((t=>{const i=t.ar.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(e);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=l.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))})),n.end()}));const l=(i,h)=>{const o=ke(!1!==t.pi.Da.Ea),a=n(i),l=_e(a.pan,"drag",h,s,e,r);l&&o.push((()=>((t,i,s,e)=>{const r=t.chart,h=r.getCursorMode();let n;r.setCursorMode(void 0);let o=s.cursor;null!==o&&(o=null!=o?o:t.isY?exports.MouseStyles.Vertical:exports.MouseStyles.Horizontal,n=r.engine.setMouseStyle(o));let a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{var r;if(e.pointerId!==i.pointerId)return;di(e);const h=e.clientX-l.clientX,n=e.clientY-l.clientY;l=e,!1!==s.stopScroll&&t.setStopped(!0),t.pan((t.isX?-h:n)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),a||(is(),a=!0);const o=s.on;o&&Nt.requestAnimationFrame((()=>o({event:e})))},c=s=>{s.pointerId===i.pointerId&&(di(s),Nt.removeEventListener("pointermove",u),Nt.removeEventListener("pointerup",c),n=t.chart.engine.restoreMouseStyle(n),e(),t.chart.setCursorMode(h))};Nt.addEventListener("pointermove",u),Nt.addEventListener("pointerup",c)})(i,h,l,f())));const u=_e(a.zoom,"drag",h,s,e,r);u&&o.push((()=>((t,i,s,e)=>{const r=t.chart;let h;const n=s.cursor;if(null!==n){let t="function"==typeof n?n("in"):n;null!==t&&(t=null!=t?t:exports.MouseStyles.ZoomIn,h=r.engine.setMouseStyle(t))}const o=r.getCursorMode();r.setCursorMode(void 0);let a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{var o;if(e.pointerId!==i.pointerId)return;di(e);const u={x:e.clientX-l.clientX,y:e.clientY-l.clientY};let c;l=e,c="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:t.ai.Et((t.ai.bt()+t.ai.Mt())/2);const d=.05*t.oh.getWidth({x:-u.x,y:u.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(t.zoom(c,d),!1!==s.stopScroll&&t.setStopped(!0),null!==n){let t="function"==typeof n?n("in"):n;null!==t&&(t=null!=t?t:d<0?exports.MouseStyles.ZoomIn:exports.MouseStyles.ZoomOut,h=r.engine.setMouseStyle(t,h))}a||(is(),a=!0);const f=s.on;f&&Nt.requestAnimationFrame((()=>f({event:e})))},c=t=>{t.pointerId===i.pointerId&&(di(t),Nt.removeEventListener("pointermove",u),Nt.removeEventListener("pointerup",c),h=r.engine.restoreMouseStyle(h),r.setCursorMode(o),e())};Nt.addEventListener("pointermove",u),Nt.addEventListener("pointerup",c)})(i,h,u,f())));const c=_e(a.rectangleZoom,void 0,h,s,e,r);c&&o.push((()=>((t,i,s,e)=>{const r=t.chart,h=r.getCursorMode();let n;r.setCursorMode(void 0);let o=s.cursor;null!==o&&(o=null!=o?o:exports.MouseStyles.ZoomIn,n=r.engine.setMouseStyle(o));const a=t.addBand({onTop:!0}).setPointerEvents(!1).setValueStart(t.oh.getWidth(r.translateCoordinate(i,{x:t,y:t}))).setValueEnd(t.oh.getWidth(r.translateCoordinate(i,{x:t,y:t}))).setVisible(!1).setFillStyle(r.getZoomingRectangleFillStyle()).setStrokeStyle(r.getZoomingRectangleStrokeStyle());let l=!1,u=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;di(e),t.setStopped(!0);const h=r.translateCoordinate(e,{x:t,y:t});a.setValueEnd(t.oh.getWidth(h));const n=ps({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(a.setVisible(n),l||(is(),l=!0),n&&!u){const t=n&&s.start;t&&t({event:e})}u=n},d=o=>{var l,u;if(o.pointerId!==i.pointerId)return;di(o);const f=ps({x:o.clientX,y:o.clientY},{x:t.isX?i.clientX:o.clientX,y:t.isY?i.clientY:o.clientY})>=20;if(f){const e=t.oh.getWidth(r.translateCoordinate(i,{x:t,y:t})),h=t.oh.getWidth(r.translateCoordinate(o,{x:t,y:t})),n=Math.sign(h-e),a=Math.sign(t.getInterval().end-t.getInterval().start),c=n===a?e:h,d=n===a?h:e;t.li(c,d,null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(u=s.stopScroll)&&void 0!==u?u:void 0,"interactionSetInterval")}a.dispose(),Nt.removeEventListener("pointermove",c),Nt.removeEventListener("pointerup",d),n=r.engine.restoreMouseStyle(n),e(),r.setCursorMode(h);const A=f&&s.on;A&&Nt.requestAnimationFrame((()=>A({event:o})))};Nt.addEventListener("pointermove",c),Nt.addEventListener("pointerup",d)})(i,h,c,f()))),o.end()};bc(t,"pointerenter",((t,i)=>{const s=n(t);t.getHighlightOnHover()&&(s.pan||s.rectangleZoom||s.restoreDefault||s.zoom)&&t.setHighlight(!0)})),bc(t,"pointerleave",((t,i)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),bc(t,"wheel",((i,h)=>{const o=ke(!1!==t.pi.Da.Ea),a=n(i),l=_e(a.zoom,"wheel",h,s,e,r);l&&o.push((()=>((t,i,s)=>{var e;let r;di(i),r="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:"centered"===s.mode?t.ai.Et((t.ai.bt()+t.ai.Mt())/2):t.oh.getWidth(t.chart.translateCoordinate(i,{x:t,y:t})),t.zoom(r,Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.setStopped(!0);const h=s.cursor;if(null!==h){let s="function"==typeof h?h(i.deltaY<0?"in":"out"):h;if(null!==s){s=null!=s?s:i.deltaY<0?exports.MouseStyles.ZoomIn:exports.MouseStyles.ZoomOut;const e=t.chart.engine.setMouseStyle(s);Nt.setTimeout((()=>{t.chart.engine.restoreMouseStyle(e)}),500)}}const n=s.on;n&&Nt.requestAnimationFrame((()=>n({event:i})))})(i,h,l)));const u=_e(a.pan,"wheel",h,s,e,r);u&&o.push((()=>((t,i,s)=>{var e;di(i);const r=t.chart;!1!==s.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(i.deltaY)*t.oh.getWidth({x:-1,y:1})*(null!==(e=s.sensitivity)&&void 0!==e?e:1));let h=s.cursor;if(null!==h){h=null!=h?h:t.isY?exports.MouseStyles.Vertical:exports.MouseStyles.Horizontal;const i=r.engine.setMouseStyle(h);Nt.setTimeout((()=>{t.chart.engine.restoreMouseStyle(i)}),500)}const n=s.on;n&&Nt.requestAnimationFrame((()=>n({event:i})))})(i,h,u))),o.end()})),bc(t,"dblclick",((i,h)=>{var o,a;if(h.defaultPrevented)return;const l=n(i),u=_e(l.restoreDefault,void 0,h,s,e,r);if(u&&u.doubleClick){di(h),i.fit(null!==(o=u.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=u.stopScroll)&&void 0!==a?a:void 0);let s=u.cursor;if(null!==s){s=null!=s?s:exports.MouseStyles.ZoomOut;const i=t.engine.setMouseStyle(s);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const e=u.on;e&&Nt.requestAnimationFrame((()=>e({event:h})))}}));const u=i=>{const n=h();let o=!1,a=!1,l=!1;for(const t of Object.keys(n)){const i=n[t];if("object"==typeof i)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=i;if("object"!=typeof t)continue;for(const i of Object.keys(t)){const s=t[i];"object"==typeof s&&("ctrl"in s&&void 0!==s.ctrl&&(o=!0),"shift"in s&&void 0!==s.shift&&(a=!0),"alt"in s&&void 0!==s.alt&&(l=!0))}}else"ctrl"in i&&void 0!==i.ctrl&&(o=!0),"shift"in i&&void 0!==i.shift&&(a=!0),"alt"in i&&void 0!==i.alt&&(l=!0)}e=i.ctrlKey,s=i.shiftKey,r=i.altKey,("Control"===i.key&&o||"Shift"===i.key&&a||"Alt"===i.key&&l)&&i.preventDefault();const u=_e(n.restorePrevious,void 0,i,s,e,r);if(u&&u.code===i.code){di(i);const s=t.getAxes().filter((t=>{const i=t.ar.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=u.on;e&&Nt.requestAnimationFrame((()=>e({event:i})))}const c=_e(n.paginate,void 0,i,s,e,r);c&&((t,i,s)=>{var e,r,h,n;const o=null!==(r=null===(e=s.forward)||void 0===e?void 0:e.code)&&void 0!==r?r:"ArrowLeft",a=null!==(n=null===(h=s.backward)||void 0===h?void 0:h.code)&&void 0!==n?n:"ArrowRight",l=i.code===o?1:i.code===a?-1:0;if(0===l)return;let u=!1;if(t.forEachAxis((t=>{var i;const e=t.ar.chartInteractions;!1===e||"object"==typeof e&&!1===e.paginate||t.isX&&!s.x||t.isY&&!s.y||(u=!0,!1!==s.stopScroll&&t.setStopped(!0),t.pan(-l*(t.gh>t.Ah?1:-1)*.5*t.ai.wt()*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),u){di(i);let e=s.cursor;if(null!==e){e=null!=e?e:!s.x&&s.y?exports.MouseStyles.Vertical:s.x&&!s.y?exports.MouseStyles.Horizontal:exports.MouseStyles.Move;const i=t.engine.setMouseStyle(e);Nt.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=s.on;r&&Nt.requestAnimationFrame((()=>r({event:i})))}})(t,i,c);const d=_e(n.restoreDefault,void 0,i,s,e,r);if(d&&d.code===i.code){di(i),t.getAxes().forEach((t=>{var i,s;const e=t.ar.chartInteractions;!1===e||"object"==typeof e&&!1===e.restoreDefault||t.fit(null!==(i=d.animationsEnabled)&&void 0!==i?i:void 0,null!==(s=d.stopScroll)&&void 0!==s?s:void 0)}));const s=d.on;s&&Nt.requestAnimationFrame((()=>s({event:i})))}},c=t=>{e=t.ctrlKey,s=t.shiftKey,r=t.altKey},d=()=>{e=!1,s=!1,r=!1};Nt.addEventListener("keydown",u),Nt.addEventListener("keyup",c),Nt.addEventListener("blur",d),t.addEventListener("dispose",(()=>{Nt.removeEventListener("keydown",u),Nt.removeEventListener("keyup",c),Nt.removeEventListener("blur",d)}));const f=()=>(A(),g(),p(),()=>{A=Sc(t,"pointermove",o),g=Sc(t,"pointerdown",a),p=bc(t,"pointerdown",l)});let A=Sc(t,"pointermove",o),g=Sc(t,"pointerdown",a),p=bc(t,"pointerdown",l);return{setUserInteractions:t=>{if(void 0===t)i={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)i={};else for(const s of Object.keys(t))!1===t[s]||"object"==typeof t[s]?i[s]=t[s]:i[s]={}},getUserInteractions:h}})(this);const A={...null==h?void 0:h.legend};this.legend.setOptions(A)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.fv}restorePreviousZoomState(t){if(this.wm.length<=1)return this;this.wm.pop();const i=this.wm[this.wm.length-1];return i?(this.c_=Nt.performance.now(),this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.li(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Qm)this.wm.length=0;else for(;this.wm.length>1;)this.wm.unshift();return this}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.jm.solveNearest(t,i,this.fv,this.s_)}addCursor(t=pc){const i=this.Eg(),s=t.Am(i,this.Jw,this.Jw,this.Lg(i),this.bi);return s.nw=!0,this.Ug(s),s}getMinimumSize(){var t;const i={x:0,y:0};i.x+=this.ot.left+this.ot.right+this.Gn.left+this.Gn.right,i.y+=this.ot.top+this.ot.bottom+this.Gn.top+this.Gn.bottom;const s=this.Yr.Nh().bc(),e=y(Ec(this._A||Dc,null!==(t=this.bi.chartXYTitleMargin)&&void 0!==t?t:5),this.Wg);return i.x+=s.x+e.left+e.right,i.y+=s.y+e.top+e.bottom,this.d_&&(i.x+=this.d_.left,i.x+=this.d_.right,i.y+=this.d_.top,i.y+=this.d_.bottom),i.x+=_c.x,i.y+=_c.y,i}getLayout(){const t=this.f_;return this.pi.A_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.f_=void 0})):new Promise((i=>{i(t)}))}addAxisX(t){var i,s;const{opposite:e,type:r}=Fe(t);let h;h="linear"===r.type?this.Bg.d1({dimension:"x",scale1DConstructor:H}):"linear-highPrecision"===r.type?this.Bg.d1({dimension:"x",scale1DConstructor:H}).Ot():this.Bg.d1({dimension:"x",scale1DConstructor:js}).hs(r.base),h.Z(this.Jw.x.kt());const n=e?this.IA:this.LA,o=new zo(this.l_,this.jf,this.Zg,this.Hf,this.Wf,this.pi.vs,h,this.Jw.y,(a=()=>o.gA(),{...Go,...dc(a)}),this,e?100:0,this.Xf,this.n_,this.bi,this.Er,r);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.pi.Bs(),this.D.R("axisadd",{axis:o}),this.Jm(o),o}addAxisY(t){var i,s;const{opposite:e,type:r}=Fe(t);let h;h="linear"===r.type?this.Bg.d1({dimension:"y",scale1DConstructor:H}):"linear-highPrecision"===r.type?this.Bg.d1({dimension:"y",scale1DConstructor:H}).Ot():this.Bg.d1({dimension:"y",scale1DConstructor:js}).hs(r.base),h.Z(this.Jw.y.kt());const n=e?this.PA:this.BA,o=new zo(this.l_,this.jf,this.Zg,this.Hf,this.Wf,this.pi.vs,h,this.Jw.x,(a=()=>o.gA(),{...$o,...fc(a)}),this,e?100:0,this.Xf,this.n_,this.bi,this.Er,r);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.pi.Bs(),this.D.R("axisadd",{axis:o}),this.Jm(o),o}Jm(t){const i=()=>{const i=Nt.performance.now();void 0!==this.c_&&i-this.c_<=1e3||t.getVisible()&&(this.g_=i+300)};Nt.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.wm.forEach((i=>{i.delete(t)}))}))}swapAxes(t,i){const s=[this.LA,this.BA,this.PA,this.IA],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),r=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!r)return this;if(e!==r)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const h=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!h||!n)return this;const o=h.iParallel,a=h.iStack;h.iParallel=n.iParallel,h.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.f_=void 0;const l=[];this.legend.getEntries().forEach((t=>{if(t.component&&t.component instanceof Bu){const i=t.component.axisX,s=t.component.axisY,r=e.find((t=>t.axis===i||t.axis===s));r&&l.push({iStack:r.iStack,entry:t.component})}}));const u=l.sort(((t,i)=>i.iStack-t.iStack)).map((t=>t.entry));return this.Os.forEach((t=>t.Sg(u))),this.pi.Bs(),this}dispose(){return this.jm.G(),this.a_.G(),this.bx.G(),this.jf.G(),this.l_.forEach((t=>t.G())),this.Wf.G(),this.Hf.G(),this.ww().forEach((t=>t.dispose())),Ua(this.Jw),this.LA.slice().forEach((t=>t.axis.dispose())),this.BA.slice().forEach((t=>t.axis.dispose())),this.PA.slice().forEach((t=>t.axis.dispose())),this.IA.slice().forEach((t=>t.axis.dispose())),this.fv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.LA,...this.IA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.BA,...this.PA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):Cc;return Xt(Array.from(i).map((t=>{switch(t){default:case exports.AxisPosition.Top:return this.IA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case exports.AxisPosition.Bottom:return this.LA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case exports.AxisPosition.Left:return this.BA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case exports.AxisPosition.Right:return this.PA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}p_(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.LA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.IA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.BA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.PA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this._A=t,this.Os.forEach((t=>t.zs())),this.pi.Bs(),this}getTitlePosition(){return this._A}ir(t,i=!1){var s;super.ir(t);const e=Nt.performance.now();void 0!==this.g_&&this.g_<=e&&(this.km(),this.g_=void 0);for(const t of this.fv)t.cp();for(const t of this.fv)t.ir();const r=Ni(this.fv.map((t=>t.hl()))),h=new Set(r.map((t=>t.jw)));if(1===h.size){const t=Array.from(h)[0],i="x"===t?[this.LA,this.IA]:[this.BA,this.PA],s="y"===t?[this.LA,this.IA]:[this.BA,this.PA];i.forEach((t=>t.forEach((t=>t.axis.pn())))),s.forEach((t=>t.forEach((t=>t.axis.pn()))))}else this.BA.forEach((t=>t.axis.pn())),this.LA.forEach((t=>t.axis.pn())),this.IA.forEach((t=>t.axis.pn())),this.PA.forEach((t=>t.axis.pn()));let n=!1;this.forEachAxis((t=>{(t.Sn()||t.bn())&&(n=!0)}));const o=!this.Kw&&n,l=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.jm.ir(o,l?this.fv.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.fv,this.s_,{afterCursorPointedAt:t=>{const i=this.pi.Ia();if(t.length>1&&i){const t=this.pi.il(i);this.jm.v_.sm({x:t.engineX,y:t.engineY},this.pi.ai)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const u=(t,i,s,e,r={})=>{const h=zc(t);let n=0;const o=[],a=h.parallels.map((t=>{const h=t.stacks.reduce(((t,i)=>{var s,e;return t+(i.axis.getVisible()?(null!==(s=i.axis.kA)&&void 0!==s?s:0)+(null!==(e=i.axis.CA)&&void 0!==e?e:0):0)}),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.vf?i.axis.vf.pixels:0)),0),l=i-h-a;let u=0;const c=t.stacks.map((s=>{var h,a;const c=s.axis,d=c.getVisible(),f=Math.max(i-u,0),A=Math.min(d?"pixels"in c.vf?c.vf.pixels:c.vf.relative/t.sumRelativeSize*l:0,f),g=t.stacks.length,p={...r,availableSpace:i,stack:s,axisLength:A,axisLengthOffset:u,axisThicknessOffset:n,stackAxisCount:g},v=e(p,o);return o.push({...p,...v}),d&&(u+=A+(null!==(h=c.kA)&&void 0!==h?h:0)+(null!==(a=c.CA)&&void 0!==a?a:0)),{...v,stack:s,axis:c}})),d=c.reduce(((t,i)=>i.axis.getVisible()?Math.max(t,i.yA):t),0),f=c.reduce(((t,i)=>Math.max(t,i.pA)),0);return c.forEach((t=>{t.pA=f})),n+=d*s,{...t,stacks:c}}));return{parallels:a,thicknessTotal:Math.abs(n)}},c=this.getTitleFillStyle()!==ae&&this.getTitle().length>0,d=c?this.Yr.Nh().bc():{x:0,y:0},f=y(Ec(this._A,null!==(s=this.bi.chartXYTitleMargin)&&void 0!==s?s:5),this.Wg),g=c?Rc(this._A,d,f):Xi,p=this.Os.reduce(((t,i)=>{const s=i.Nh(g,this.Gn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0}),v=this.Jw.x.getCellSize()-(this.Gn.left+this.Gn.right+g.left+g.right)-p.left-p.right,m=this.Jw.y.getCellSize()-(this.Gn.top+this.Gn.bottom+g.bottom+g.top)-p.top-p.bottom,x=new Map,S=(t,i)=>{const s=!!i.find((t=>!0===t.updatedTicks)),e={physicalAxisSize:t.axisLength,xA:t.axisLength,y_:t.axisLengthOffset,SA:t.axisThicknessOffset,anyPreviousAxisUpdated:s,TA:t.stackAxisCount};return t.stack.axis.Nh(e)},b=u(this.BA,m,-1,S),M=u(this.PA,m,1,S),w=u(this.LA,v,-1,S),_=u(this.IA,v,1,S),k=[this.Gn.left+g.left+b.thicknessTotal+p.left,this.Gn.right+g.right+M.thicknessTotal+p.right],C=[this.Gn.bottom+w.thicknessTotal+g.bottom+p.bottom,this.Gn.top+g.top+_.thicknessTotal+p.top],T=this.Jw.x.getCellSize()-(k[0]+k[1]),F=this.Jw.y.getCellSize()-(C[0]+C[1]);this.Jw.x.W(0,T),this.Jw.y.W(0,F),this.Jw.x.St(k),this.Jw.y.St(C),super.Yg();const I=[...b.parallels,...w.parallels,...M.parallels,..._.parallels].map((t=>t.stacks)).flat(),L=t=>{var i,s;const e=t.stack.axis,r=I.find((t=>t.axis===e));if(!r)throw new Error("LightningChart JS unexpected runtime error");const h=e.getVisible()?t.margins[0]+t.axisLengthOffset+(null!==(i=e.kA)&&void 0!==i?i:0):0,n=e.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-(null!==(s=e.kA)&&void 0!==s?s:0):0;e.ai.St([h,n]);const o=t.stack.axis.ir(r);return x.set(t.stack.axis,o),r},P=v-(b.thicknessTotal+M.thicknessTotal),B=m-(w.thicknessTotal+_.thicknessTotal);u(this.BA,B,-1,L,{margins:C}),u(this.PA,B,1,L,{margins:C}),u(this.LA,P,-1,L,{margins:k}),u(this.IA,P,1,L,{margins:k}),this.d_={left:b.thicknessTotal,top:_.thicknessTotal,right:M.thicknessTotal,bottom:w.thicknessTotal};const D={chartWidth:this.Jw.x.getCellSize(),chartHeight:this.Jw.y.getCellSize(),viewportWidth:T,viewportHeight:F,margins:{left:k[0],right:k[1],bottom:C[0],top:C[1]},axes:x},E=this.f_;if(i)this.D.R("layoutchange",{...D,userChangedLayout:()=>{}});else if(!E||Math.abs(E.chartWidth-D.chartWidth)>=1||Math.abs(E.chartHeight-D.chartHeight)>=1||Math.abs(E.viewportWidth-D.viewportWidth)>=1||Math.abs(E.viewportHeight-D.viewportHeight)>=1||this.getAxes().find((t=>{var i,s,e,r,h,n,o,a,l,u,c,d;const f=E.axes.get(t),A=D.axes.get(t);if(Math.abs((null!==(i=null==f?void 0:f.width)&&void 0!==i?i:0)-(null!==(s=null==A?void 0:A.width)&&void 0!==s?s:0))>=1||Math.abs((null!==(e=null==f?void 0:f.height)&&void 0!==e?e:0)-(null!==(r=null==A?void 0:A.height)&&void 0!==r?r:0))>=1||Math.abs((null!==(h=null==f?void 0:f.left)&&void 0!==h?h:0)-(null!==(n=null==A?void 0:A.left)&&void 0!==n?n:0))>=1||Math.abs((null!==(o=null==f?void 0:f.right)&&void 0!==o?o:0)-(null!==(a=null==A?void 0:A.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(u=null==A?void 0:A.bottom)&&void 0!==u?u:0))>=1||Math.abs((null!==(c=null==f?void 0:f.top)&&void 0!==c?c:0)-(null!==(d=null==A?void 0:A.top)&&void 0!==d?d:0))>=1)return t}))){let i=!1;const s=()=>{i=!0};if(this.D.R("layoutchange",{...D,userChangedLayout:s}),this.Fg||i)return this.engine.layout(),this.h_({width:this.uiScale.kt().x,height:this.uiScale.kt().y,engineWidth:this.pi.ai.kt().x,engineHeight:this.pi.ai.kt().y}),this.Fg=!0,void this.ir(t,!0)}this.f_=D,this.yv.sr(a(0,0)).Z(a(T,F)),this.mv.sr(a(0,0)).Z(a(T,F));const R=Oc(this._A,d,f,this.uiScale.ni(),this.Gn,k,C,p);this.Yr.sr(R.position).Mn(R.margin).Yl(R.horizontalAlignment).Wl(R.verticalAlignment),this.Os.forEach((t=>t.ir(g,this.Gn)));const O=A(this.Jw.x.bt(),this.Jw.y.bt(),this.Jw.x.wt(),this.Jw.y.wt());this.bx.Tm(O),this.Hf.Tm(O),this.Wf.Tm(O),this.kg&&this.kg();for(const t of this.fv)t.dp()}Zw(t){const i=Ni(this.fv.map((t=>t.hl()))),s=new Set(i.map((t=>t.jw)));if(1===s.size){const e=Array.from(s)[0],r="x"===e?[this.LA,this.IA]:[this.BA,this.PA],h="y"===e?[this.LA,this.IA]:[this.BA,this.PA];r.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&i.axis.fit(s.animate,s.stopAxisAfter)})))),i.forEach((t=>t.Hw())),h.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&(i.axis.getScrollStrategy()&&void 0===i.axis.getDefaultInterval()?i.axis.setStopped(!1):i.axis.fit(s.animate,s.stopAxisAfter))}))))}else t.forEach(((t,i)=>i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}j(){for(let t=0;t<this.LA.length;t+=1)this.LA[t].axis.j();for(let t=0;t<this.IA.length;t+=1)this.IA[t].axis.j();for(let t=0;t<this.BA.length;t+=1)this.BA[t].axis.j();for(let t=0;t<this.PA.length;t+=1)this.PA[t].axis.j();return super.j()}o_(t){if(this.Qw.has(t))return this.Qw.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new mc(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,t);return this.xv(e,t),e}addLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ae).setPointFillStyle(ae)}addPointSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ae).setStrokeStyle(Tt)}addPointLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ae)}addStepSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ae).setCurvePreprocessing({type:"step"})}addSplineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ae).setCurvePreprocessing({type:"spline"})}addAreaSeries(t){return this.addPointLineAreaSeries(t).setPointFillStyle(ae)}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new $u(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,t);return this.xv(e,t),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Nu(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(e,t),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new Yu(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(e,t),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new zu(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(e,t),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:Go,r=new Ru(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,e,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(r,t),r}addTextSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new Wu(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length);return this.xv(e,t),e}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new ec(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,t,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length),this.xv(e,t),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new hc(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,t,this.bi,this.pi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length),this.xv(e,t),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Fc(i,s);const e=new(t&&t.type?t.type:cc.Candlesticks)(this,this.gv,this.bx,i,s,this.o_(i),this.o_(s),this.Eg,this.bi,this.pi.vs);return this.xv(e,t),e}addOnScreenMenu(t,i){return new yc(this.Pg,t,this,i)}setZoomingRectangleFillStyle(t){return this.t_="function"==typeof t?t(this.t_):t,this.pi.Bs(),this}getZoomingRectangleFillStyle(){return this.t_}setZoomingRectangleStrokeStyle(t){return this.i_="function"==typeof t?t(this.i_):t,this.pi.Bs(),this}getZoomingRectangleStrokeStyle(){return this.i_}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Tc),this.forEachAxisX((s=>{s.zoom(s.ai.Et(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ai.Et(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}bg(){const t=[];return this.forEachAxis((i=>i.cA((i=>t.push(i))))),super.bg().concat(t)}ww(){return this.qw}Ye(){return this.Kg(this.bx)}setCursorEnabledDuringAxisAnimation(t){return this.Kw=t,this}getCursorEnabledDuringAxisAnimation(){return this.Kw}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,r=i,h=Uo(r)?r:be(r)?this.eA:void 0;if(h&&xe(s)){const t=q(e,h,this.pi.ai);return this.pi.sl({engineX:t.x,engineY:t.y})}if(h&&be(s))return q(e,h,this.eA);if(h&&Uo(s))return q(e,h,s)}else{const s=t;if(be(i)){const t=this.pi.il(s);return q({x:t.engineX,y:t.engineY},this.pi.ai,this.eA)}if(Uo(i)){const t=i,e=this.pi.il(s);return q({x:e.engineX,y:e.engineY},this.pi.ai,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,i,s){this.D.addEventListener(t,i,s),"layoutchange"===t&&this.f_&&i({...this.f_,userChangedLayout:()=>{}})}removeEventListener(t,i){this.D.removeEventListener(t,i)}setUserInteractions(t){return this.Hm.setUserInteractions(t),this}getUserInteractions(){return this.Hm.getUserInteractions()}}exports.ChartXYTitlePositionOptions=void 0,(Pc=exports.ChartXYTitlePositionOptions||(exports.ChartXYTitlePositionOptions={})).CenterTop="center-top",Pc.RightTop="right-top",Pc.LeftTop="left-top",Pc.CenterBottom="center-bottom",Pc.RightBottom="right-bottom",Pc.LeftBottom="left-bottom",Pc.SeriesCenterTop="series-center-top",Pc.SeriesRightTop="series-right-top",Pc.SeriesLeftTop="series-left-top",Pc.SeriesCenterBottom="series-center-bottom",Pc.SeriesRightBottom="series-right-bottom",Pc.SeriesLeftBottom="series-left-bottom";const Dc=exports.ChartXYTitlePositionOptions.CenterTop,Ec=(t,i)=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:i};case"left-top":return{left:20,right:0,top:0,bottom:i};case"right-top":return{left:0,right:20,top:0,bottom:i};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:i,bottom:0};case"series-left-top":return{left:i,right:0,top:i,bottom:0};case"series-right-top":return{left:0,right:i,top:i,bottom:0};case"series-left-bottom":return{left:i,right:0,top:0,bottom:i};case"series-right-bottom":return{left:0,right:i,top:0,bottom:i}}return $i(0,`Unexpected ChartXY title position selection ${t}`)},Rc=(t,i,s)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:i.y+s.top+s.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:i.y+s.top+s.bottom,right:0,left:0,top:0};default:return Xi}},Oc=(t,i,s,e,r,h,n,o)=>{const a=(s.left-s.right)*e.x,l=(s.bottom-s.top)*e.y,u={top:0,left:o.left+r.left,right:o.right+r.right,bottom:0};switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-(r.top+s.top)*e.y},margin:u};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:a,y:100-(r.top-s.top)*e.y},margin:u};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+a,y:100-(r.top-s.top)*e.y},margin:u};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+a,y:(r.bottom+s.bottom)*e.y},margin:u};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:a,y:(r.bottom+s.bottom)*e.y},margin:u};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+a,y:(r.bottom+s.bottom)*e.y},margin:u};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-n[1]*e.y+l},margin:u};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:h[0]*e.x+a,y:100-n[1]*e.y+l},margin:Xi};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-h[1]*e.x+a,y:100-n[1]*e.y+l},margin:Xi};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:n[0]*e.y+l},margin:u};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:h[0]*e.x+a,y:n[0]*e.y+l},margin:Xi};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-h[1]*e.x+a,y:n[0]*e.y+l},margin:Xi}}return $i(0,`Unexpected ChartXY title position selection ${t}`)},zc=t=>{const i=[];t.forEach(((t,s)=>{const e=i.find((i=>i.iParallel===t.iParallel));e?(e.stacks.push({...t}),e.stacks.sort(((t,i)=>t.iStack-i.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t}]})}));const s=i.map((t=>{const i=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.vf?i.axis.vf.relative:0)),0);return{...t,sumRelativeSize:i}}));return s.sort(((t,i)=>t.iParallel-i.iParallel)),{parallels:s}},Vc=(t,i,s)=>{var e;const r=Array.from(new Set(s.map((t=>t.series.ws())))),h=1===r.length&&void 0!==r[0]?r[0]:void 0,n="ProgressiveY"===h||"RegressiveY"===h?{progressiveDimension:i.axisY.getTitle()||void 0,progressiveAxis:i.axisY,valueDimension:i.axisX.getTitle()||void 0,hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:i.axisX.getTitle()||void 0,progressiveAxis:i.axisX,valueDimension:i.axisY.getTitle()||void 0,hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x};return it(i)?eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Te(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Te(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Te(i.lut?he(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):h?[[{text:Te(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...s.map((t=>t.multiHit?eA(t,[[{component:t.series,componentColor:rA(t)},""],[...n.valueDimension?[`${n.valueDimension}1`,""]:[],{text:Te(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[...n.valueDimension?[`${n.valueDimension}2`,""]:[],{text:Te(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):eA(t,[[{component:t.series,componentColor:rA(t)},"",{text:Te(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((i=>eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n.progressiveDimension?[`${n.progressiveDimension}`,""]:[],{text:Te(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[...n.valueDimension?[`${n.valueDimension}`,""]:[],{text:Te(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]))).flat()};class Nc{constructor(t,i,s,e,r,h,n){var o;this.coordsRelative="relative",this.coordsClient="client",this.m_=[],this.x_=new Map,this.fv=new Map,this.S_=!0,this.b_=new Set,this.M_=()=>{this.w_.pi.Bs()},this.__=(t,i,s)=>{0!==this.fv.size&&void 0!==[...this.fv.values()].find((({series:t})=>!0===t.getVisible()))||this.k_.li(i,s,!1,!1,"zoomBandChartOther"),this.w_.pi.Bs()},this.C_=!0,this.D=new yt,i.pi.La(jh.Fo),this.Pg=t,this.ug=(null==h?void 0:h.orientation)||"x",this.T_=void 0!==(null==h?void 0:h.useSharedValueAxis)&&h.useSharedValueAxis,this.F_=e,this.so="x"===this.ug?Go:$o;const a={...h,defaultAxisX:this.so.getWidth({x:null==h?void 0:h.defaultAxis,y:void 0}),defaultAxisY:this.so.getHeight({x:null==h?void 0:h.defaultAxis,y:void 0}),legend:null!==(o=null==h?void 0:h.legend)&&void 0!==o?o:{addEntriesAutomatically:!1}};this.w_=new Bc(t,i,s,jt,r,a,n).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.w_.engine;const l=this.w_.getDefaultAxisX().setPointerEvents(!1),u=this.w_.getDefaultAxisY().setPointerEvents(!1);this.k_=this.so.getWidth({x:l,y:u}).setScrollStrategy(gh.fitting()).setAnimationScroll(!1).setStrokeStyle(Tt).setTickStrategy(ph.Empty),(null==h?void 0:h.useSharedValueAxis)?this.I_=this.so.getHeight({x:l,y:u}):this.so.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new de({color:this.getTheme().isDark?b(0,0,0,180):b(255,255,255,180)});this.L_=[this.w_.jf.tr(this.k_.iA).qe(c).Ke(Tt),this.w_.jf.tr(this.k_.iA).qe(c).Ke(Tt)];const d=this.w_.jf.bA(this.k_.iA).cr(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.P_={collection:d,members:new Array(5).fill(0).map((t=>d.Ho()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?Vt({resourcesBaseUrl:this.Pg.me,styleFactory:f.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):f.zoomBandChartKnobFillStyle||ae;this.B_=[this.w_.jf.tr(this.w_.eA).qe(A).Ke(Tt),this.w_.jf.tr(this.w_.eA).qe(A).Ke(Tt)],this.D_=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.E_()}get chart(){return this.w_}setUserInteractions(t){return this.ar=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return zt({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.ar)}add(t){this.b_.has(t.chart)||(this.b_.add(t.chart),t.chart.addEventListener("layoutchange",this.M_));const i=this.m_.map((t=>t.axis)),s="x"===this.ug?t.axisX:t.axisY;if(!i.includes(s)){const t=t=>{this.__(s,t.start,t.end)};s.addEventListener("intervalchange",t),this.m_.push({axis:s,deattach:()=>{s.removeEventListener("intervalchange",t)}}),this.k_.Bh(s.Ph(),s.getTickStrategy()),this.R_&&this.R_.remove(),this.R_=tt(...this.m_.map((t=>t.axis)))}const e=this.so.getHeight({x:t.axisX,y:t.axisY});let r;if(this.T_)r=this.I_;else{const t=this.x_.get(e);t?r=t:(r=this.so.getHeight({x:this.w_.addAxisX.bind(this.w_),y:this.w_.addAxisY.bind(this.w_)})({type:e.uh.type}),this.O_(r)),this.x_.set(e,r)}const h=this.so.getWidth({x:this.k_,y:r}),n=this.so.getHeight({x:this.k_,y:r});let o;const a=[];if(t instanceof mc)o=this.w_.addPointLineAreaSeries({...t.Da,axisX:h,axisY:n,xAxis:h,yAxis:n}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),o.setDataSet(t.Yw(),t.getDataMapping());else if(t instanceof ac){const i=this.w_.addPointLineAreaSeries({axisX:h,axisY:n,xAxis:h,yAxis:n});((t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.appendJSON(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.appendJSON(e)}},e=t.fM();s(e);const r=t=>{s(t.data)},h=()=>{i.clear()};t.addEventListener("dataadd",r),t.addEventListener("dataclear",h),a.push((()=>{t.removeEventListener("dataadd",r),t.removeEventListener("dataclear",h)}))})(t,i),o=i}else if(t instanceof oc){const i=this.w_.addAreaRangeSeries({axisX:h,axisY:n,xAxis:h,yAxis:n}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.fM()),s=t=>i.add(t.data);t.addEventListener("dataadd",s),a.push((()=>t.removeEventListener("dataadd",s))),o=i;const e=t=>i.clear();t.addEventListener("dataclear",e),a.push((()=>{t.removeEventListener("dataclear",e)}))}else{if(!(t instanceof sc))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.w_.addHeatmapGridSeries({...t.fb,axisX:h,axisY:n,xAxis:h,yAxis:n}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle()).setContours(t.getContours())};s(),o=i,t.mb(o);const e=t=>i.invalidateIntensityValues(t.value);t.addEventListener("stylechange",s),a.push((()=>{t.removeEventListener("invalidateintensity",e),t.removeEventListener("stylechange",s)}));const r=()=>{i.clear()};t.addEventListener("dataclear",r),a.push((()=>{t.removeEventListener("dataclear",r)}))}}o.setPointerEvents(!1);const l=t=>{o.setVisible(t.isVisible)};t.addEventListener("visiblechange",l),a.push((()=>{t.removeEventListener("visiblechange",l)}));const u=t=>{o.setHighlight(t.highlight)};a.push((()=>{t.addEventListener("highlightchange",u),t.removeEventListener("highlightchange",u)}));const c=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",c),a.push((()=>{t.removeEventListener("dispose",c)})),this.fv.set(t,{series:o,clearReferences:()=>a.forEach((t=>t()))}),o}disposeSeries(t){const i=this.fv.get(t);if(i){const{clearReferences:s}=i;s(),this.fv.delete(t),i.series.dispose();const e=this.so.getHeight({x:t.axisX,y:t.axisY}),r=this.x_.get(e);r&&0===r.gA().length&&(this.x_.delete(e),r.dispose())}const s="x"===this.ug?t.axisX:t.axisY;if(!Array.from(this.fv.keys()).find((t=>s===("x"===this.ug?t.axisX:t.axisY)))){const t=this.m_.findIndex((t=>t.axis===s));t>=0&&(this.m_[t].deattach(),this.m_.splice(t,1))}const e=Array.from(this.fv.keys()).find((t=>t.chart==t.chart));return e||(t.chart.removeEventListener("layoutchange",this.M_),this.b_.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.L_.forEach((i=>i.qe(t))),this.w_.pi.Bs(),this}getDefocusOverlayFillStyle(){return this.L_[0].Mh()}setSplitterStrokeStyle(t){return this.P_.collection.cr(t),this.w_.pi.Bs(),this}getSplitterStrokeStyle(){return this.P_.collection.do()}setKnobFillStyle(t){return this.B_.forEach((i=>i.qe(t))),this.w_.pi.Bs(),this}getKnobFillStyle(){return this.B_[0].Mh()}setKnobStrokeStyle(t){return this.B_.forEach((i=>i.Ke(t))),this.w_.pi.Bs(),this}getKnobStrokeStyle(){return this.B_[0].Ja()}setKnobSize(t){return this.D_=t,this.w_.pi.Bs(),this}getKnobSize(){return this.D_}getDefaultAxisX(){return this.w_.getDefaultAxisX()}getDefaultAxisY(){return this.w_.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}O_(t){t.setTickStrategy(ph.Empty).setPointerEvents(!1).setStrokeStyle(Tt)}setStopAxisOnInteraction(t){return this.S_=t,this}getStopAxisOnInteraction(){return this.S_}E_(){let t;const i=(t,i,s,e)=>{var r,h;const n="x"===this.ug?null===(r=Array.from(this.fv.keys())[0])||void 0===r?void 0:r.axisX:null===(h=Array.from(this.fv.keys())[0])||void 0===h?void 0:h.axisY;if(!n)return;const o=n.getInterval(),a=this.k_.getInterval(),l=Math.abs(this.k_.ai.Dt(t)-this.k_.ai.Dt(i));s.preventTooSmall&&l<10||Math.sign(i-t)!==Math.sign(o.end-o.start)||Math.min(t,i)<Math.min(a.start,a.end)||Math.max(t,i)>Math.max(a.start,a.end)&&Math.max(o.start,o.end)<Math.max(t,i)||n.li(t,i,s.animated,this.S_,e)};this.B_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob)&&(t=this.engine.setMouseStyle(this.so.getWidth({x:exports.MouseStyles.Horizontal,y:exports.MouseStyles.Vertical}),t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("pointerdown",(t=>{var s,r,h;if(!(null===(s=this.getUserInteractions().zoom)||void 0===s?void 0:s.dragKnob))return;const n="x"===this.ug?null===(r=Array.from(this.fv.keys())[0])||void 0===r?void 0:r.axisX:null===(h=Array.from(this.fv.keys())[0])||void 0===h?void 0:h.axisY;if(!n)return;di(t);const o=s=>{if(s.pointerId!==t.pointerId)return;di(s);const r=this.so.getWidth(this.w_.translateCoordinate(s,this.w_.coordsAxis)),h=n.getInterval(),o=0===e?r:h.start,a=1===e?r:h.end;i(o,a,{animated:!1,preventTooSmall:!0},"zoomBandChartOther")},a=i=>{i.pointerId===t.pointerId&&(di(i),ts("click"),Nt.removeEventListener("pointermove",o),Nt.removeEventListener("pointerup",a))};Nt.addEventListener("pointermove",o),Nt.addEventListener("pointerup",a)}))})),this.w_.seriesBackground.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.drag)&&(t=this.engine.setMouseStyle(exports.MouseStyles.Move,t))})),this.w_.seriesBackground.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,r,h;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag))return;const n="x"===this.ug?null===(r=Array.from(this.fv.keys())[0])||void 0===r?void 0:r.axisX:null===(h=Array.from(this.fv.keys())[0])||void 0===h?void 0:h.axisY;if(!n)return;const o=n.getInterval(),a=this.k_.ai.Qt(o.start,this.so.getWidth(t)),l=this.k_.ai.Qt(o.end,this.so.getWidth(t));i(a,l,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),di(s)};this.w_.seriesBackground.addEventListener("pointerdown",(t=>{var i,e;if(!("x"===this.ug?null===(i=Array.from(this.fv.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this.fv.keys())[0])||void 0===e?void 0:e.axisY))return;di(t);let r=t;const h=i=>{if(i.pointerId!==t.pointerId)return;const e={x:i.clientX-r.clientX,y:r.clientY-i.clientY};r=i,s(e,i)},n=i=>{i.pointerId===t.pointerId&&(di(i),is(),ts("click"),Nt.removeEventListener("pointermove",h),Nt.removeEventListener("pointerup",n))};Nt.addEventListener("pointermove",h),Nt.addEventListener("pointerup",n)})),this.w_.seriesBackground.addEventListener("wheel",(t=>{var s,e,r,h;const n=this.getUserInteractions();if(!(null===(s=n.zoom)||void 0===s?void 0:s.wheel))return;const o="x"===this.ug?null===(e=Array.from(this.fv.keys())[0])||void 0===e?void 0:e.axisX:null===(r=Array.from(this.fv.keys())[0])||void 0===r?void 0:r.axisY;if(!o)return;const a=o.getInterval(),l=this.k_.getInterval(),u=this.so.getWidth(this.w_.translateCoordinate(t,this.w_.coordsAxis)),c=this.k_.ai.Dt(a.start),d=this.k_.ai.Dt(a.end),f=this.k_.ai.Dt(u),A=Wt((f-c)/(d-c),0,1),g=.2*Math.abs(d-c)*(null!==(h=n.zoom.wheel.sensitivity)&&void 0!==h?h:1),p=A*g*-Math.sign(t.deltaY),v=(1-A)*g*Math.sign(t.deltaY),y=Wt(this.k_.ai.Qt(a.start,p),l.start,l.end),m=Wt(this.k_.ai.Qt(a.end,v),l.start,l.end);i(y,m,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),di(t)})),this.L_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click)&&(t=this.engine.setMouseStyle(exports.MouseStyles.Point,t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("click",(t=>{var s,e,r;if(t.defaultPrevented)return;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.click))return;const h="x"===this.ug?null===(e=Array.from(this.fv.keys())[0])||void 0===e?void 0:e.axisX:null===(r=Array.from(this.fv.keys())[0])||void 0===r?void 0:r.axisY;if(!h)return;const n=this.so.getWidth(this.w_.translateCoordinate(t,this.w_.coordsAxis)),o=h.getInterval(),a=this.k_.getInterval(),l=Wt(n-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),u=l+(o.end-o.start);i(l,u,{animated:!0,preventTooSmall:!1},"zoomBandChartClick"),di(t)}))}))}getSizePixels(){return this.w_.getSizePixels()}Mn(t){this.w_.Mn(t)}getMinimumSize(){return this.w_.getMinimumSize()}j(){return this.w_.j()}H(){return this.w_.H()}ir(t){var i,s,e,r;const h=Vi(Array.from(this.fv.keys()).map((t=>t.chart))),n="x"===this.ug?null===(i=Array.from(this.fv.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.fv.keys())[0])||void 0===s?void 0:s.axisY,o=(()=>{var t;const i=null===(t=this.m_.find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis;return!!i&&Math.sign(i.getInterval().end-i.getInterval().start)})(),a=Math.sign(this.k_.getInterval().end-this.k_.getInterval().start);if(a!==o&&0!==a&&0!==o&&this.k_.li(this.k_.getInterval().end,this.k_.getInterval().start,!1,this.k_.getStopped(),"zoomBandChartOther"),this.fv.forEach(((t,i)=>{const s=t.series;i instanceof mc&&s instanceof mc&&s.setDataSet(i.getDataSet(),i.getDataMapping())})),this.C_)if("x"===this.ug){const t=h.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||0!==t.Qf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.DA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=h.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||100!==t.Qf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.DA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=h.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),r=h.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.w_.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.w_.setPadding({left:s+(0===h.length?10:0),right:r+i+(0===h.length?10:0)})}else{const t=h.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||0!==t.Qf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.DA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=h.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||100!==t.Qf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.DA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=h.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=h.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.w_.forEachAxisX((t=>t.setThickness(0))),null===(r=this.getDefaultAxisX())||void 0===r||r.setThickness(t),this.w_.setPadding({bottom:s+(0===h.length?10:0),top:e+i+(0===h.length?10:0)})}this.w_.ir(t);const l=this.k_.getInterval().start,u=this.k_.getInterval().end,c=Wt(n?n.getInterval().start:l,l,u),d=Wt(n?n.getInterval().end:u,l,u),f=this.so.getHeight(this.w_.Jw.getInnerIntervalPixels());this.L_[0].sr(this.so.toPoint(l,0)).Z(this.so.toPoint(c-l,f)),this.L_[1].sr(this.so.toPoint(d,0)).Z(this.so.toPoint(u-d,f)),this.P_.members[0].wA(this.so.toPoint(l,f),this.so.toPoint(c,f)),this.P_.members[1].wA(this.so.toPoint(c,f),this.so.toPoint(c,0)),this.P_.members[2].wA(this.so.toPoint(c,0),this.so.toPoint(d,0)),this.P_.members[3].wA(this.so.toPoint(d,0),this.so.toPoint(d,f)),this.P_.members[4].wA(this.so.toPoint(d,f),this.so.toPoint(u,f));const A=q(this.so.toPoint(c,f/2),this.k_.iA,this.w_.eA),g=q(this.so.toPoint(d,f/2),this.k_.iA,this.w_.eA),p=this.D_;this.B_[0].sr({x:A.x-p.x/2,y:A.y-p.y/2}).Z({x:p.x,y:p.y}).Th(this.so.getWidth({x:0,y:90})),this.B_[1].sr({x:g.x-p.x/2,y:g.y-p.y/2}).Z({x:p.x,y:p.y}).Th(this.so.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.w_.setSeriesBackgroundFillStyle(t),this.w_.pi.Bs(),this}getSeriesBackgroundFillStyle(){return this.w_.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.w_.setSeriesBackgroundStrokeStyle(t),this.w_.pi.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.w_.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.w_.setSeriesBackgroundEffect(t),this.w_.pi.Bs(),this}getSeriesBackgroundEffect(){return this.w_.getSeriesBackgroundEffect()}getTheme(){return this.w_.getTheme()}setTitle(t){return this.w_.setTitle(t),this}getTitle(){return this.w_.getTitle()}setTitleFillStyle(t){return this.w_.setTitleFillStyle(t),this}getTitleFillStyle(){return this.w_.getTitleFillStyle()}setTitleFont(t){return this.w_.setTitleFont(t),this}getTitleFont(){return this.w_.getTitleFont()}setTitleMargin(t){return this.w_.setTitleMargin(t),this}getTitleMargin(){return this.w_.getTitleMargin()}setPadding(t){return void 0===t?this.C_=!0:(this.C_=!1,this.w_.setPadding(t),this.w_.forEachAxis((t=>t.setThickness(void 0)))),this.w_.pi.Bs(),this}getPadding(){return this.w_.getPadding()}setBackgroundFillStyle(t){return this.w_.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.w_.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.w_.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.w_.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Ia(t,i,s,this.w_.eA,this.w_.pi)}addUIElement(t,i){return this.w_.addUIElement(t,i)}saveToFile(t,i,s){return this.w_.saveToFile(t,i,s),this}dispose(){return this.w_.dispose(),this.x_.clear(),this.fv.clear(),this.F_(this),this}isDisposed(){return this.w_.isDisposed()}getLayout(){return this.w_.getLayout()}addEventListener(t,i,s){this.w_.addEventListener(t,i,s)}removeEventListener(t,i){this.w_.removeEventListener(t,i)}}class Gc extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,n),this.Rs="Point Line Series",this.lS=[],this.uS=!1,this.cS=!1,this.z_=3,this._l=0,this.V_=exports.PointShape.Circle,this.D=new yt,this.Ze=Ei(this.bi.polarPointLineSeriesFillStyle,h),this.hc=Ei(this.bi.polarPointLineSeriesStrokeStyle,h),this.AS=t.Np(e,void 0,[Ja.UserSeries]).cr(this.hc).Ii(this.getHighlight()),this._s(this.AS),this.N_=t.zd(e).Od(ae).cr(Tt).Rd(this.Ze).Vd(this.V_).Hd(this.z_).Ii(this.getHighlight()),this._s(this.N_)}solveNearest(t,i){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=this.AS.gS(e);if(!r)return;const h=ku(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...h}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.lS.length&&this.chart.pi.La(jh.Ro),this.lS=_u(t),this.uS=!0,this.iS=wu(this.lS),this.Ws.Bs(),this}getData(){return this.lS}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.AS.cr(i),this.Ws.Bs(),this}getStrokeStyle(){return this.hc}setPointFillStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;return this.N_.Rd(i),this.Ws.Bs(),this}getPointFillStyle(){return this.Ze}setPointSize(t){return this.z_=t,this.N_.Hd(t),this.Ws.Bs(),this}getPointSize(){return this.z_}setPointShape(t){return this.V_=t,this.N_.Vd(this.V_),this}getPointShape(){return this.V_}setPointRotation(t){return this._l=t,this.N_.Gd(t),this.Ws.Bs(),this}getPointRotation(){return this._l}er(){return{fill:this.Ze,stroke:this.hc}}setConnectDataAutomaticallyEnabled(t){return this.cS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.cS}xp(){return this.rp&&this.lS.length>0&&this.getVisible()}rr(t,i){t.Ii(i),this.Ws.Bs()}ir(){if(this.uS||this.scale.ge()){const t=Mu(this.lS,this.scale),i=Ss(t);this.cS?(t.push({...t[0]}),this.AS.Lu(!0)):this.AS.Lu(!1),this.AS.Vi().bu(t).Ti(i),this.N_.Ed((new $n).appendJSON(t),{x:"x",y:"y"}).Ti(i),this.uS=!1,this.AS.Nh(),this.N_.Nh()}}js(){return this.Es||this.V_}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class $c extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,n),this.Rs="Point Series",this.lS=[],this.uS=!1,this.z_=3,this._l=0,this.D=new yt,this.Ze=Ei(this.bi.polarPointSeriesFillStyle,h),this.Je=Ei(this.bi.polarPointSeriesStrokeStyle,h),this.Dd=new $n({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null,storage:Uint32Array}}}),this.Cc=t.zd(e).cr(Tt).Od(ae).Rd(this.Ze).Yd(this.Je).Vd(exports.PointShape.Circle).Hd(this.z_).Ii(this.getHighlight()).Ed(this.Dd,{x:"x",y:"y",color:"color"}),this._s(this.Cc)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Mu([s],this.scale)[0],r=this.Dd.yd({x:"x",y:"y",color:"color"},e,sA(i),this.scale,this.chart.eA);if(!r)return;const h=ku(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...h}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.lS.length&&this.chart.pi.La(jh.Ro),this.lS=_u(t),this.uS=!0,this.iS=wu(this.lS),this.Ws.Bs(),this}getData(){return this.lS}setPointAlignment(t){return this.Cc.YA(t),this.chart.pi.Bs(),this}getPointAlignment(){return this.Cc.Gw()}setPointFillStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;return this.Cc.Rd(i),this.Ws.Bs(),this}getPointFillStyle(){return this.Ze}setPointStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.Cc.Yd(this.Je),this.Ws.Bs(),this}getPointStrokeStyle(){return this.Je}setPointSize(t){return this.z_=t,this.Cc.Hd(t),this.Ws.Bs(),this}getPointSize(){return this.z_}setPointShape(t){return this.Cc.Vd(t),this.chart.pi.Bs(),this}getPointShape(){return this.Cc.Nd()}setPointRotation(t){return this._l=t,this.Cc.Gd(t),this.Ws.Bs(),this}getPointRotation(){return this._l}xp(){return this.rp&&this.lS.length>0&&this.getVisible()}rr(t,i){t.Ii(i),this.Ws.Bs()}ir(){if(this.uS||this.scale.ge()){const t=Mu(this.lS,this.scale),i=Ss(t);this.Dd.clear().appendJSON(t),this.Cc.Ti(i),this.uS=!1,this.Cc.Nh()}}er(){return{fill:this.Ze}}js(){return this.Es||this.getPointShape()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Uc extends bu{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,h),this.Rs="Heatmap Series",this.G_=!0,this.gp=!1,this.D=new yt;const o=this.chart.getSeries().length;this.Ze=Ei(this.bi.polarHeatmapSeriesFillStyle||this.bi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Da=u,this.U_=t.Y_(e,[],u).qe(this.Ze).Ii(this.getHighlight()),this._s(this.U_);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.iS={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.pi.il(t),e={x:s.engineX,y:s.engineY},r=q(e,this.chart.pi.ai,this.scale),h=ku(r,this.scale),n=sA(i)?this.U_.yb(h):this.U_.yd(h);if(!n)return;const o=Mu([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:ye(this.Ze)?this.Ze.lut:void 0}}Qi(t,i,s){return Qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:ye(this.Ze)?this.Ze.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.gp&&this.chart.pi.La(jh.Ro),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Da.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Da.dataOrder?t.length:t[0].length},s="annuli"===this.Da.dataOrder?this.Da.annuli:this.Da.sectors,e="annuli"===this.Da.dataOrder?this.Da.sectors:this.Da.annuli;if(i.x>s||i.y>e){if(!0===this.chart.Pg.Ea){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);if(0===(t=r).length||0===t[0].length)return this}this.U_.Ay({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Da.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Da.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Da.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,r="annuli"===this.Da.dataOrder?t.iSector:t.iAnnulus,h=r+i.secondary-1,n="annuli"===this.Da.dataOrder?this.Da.annuli-1:this.Da.sectors-1,o="annuli"===this.Da.dataOrder?this.Da.sectors-1:this.Da.annuli-1;if(s<0||r<0){if(!0===this.chart.Pg.Ea){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Nt.console.warn(i)}return this}if(e>n||h>o){if(!0===this.chart.Pg.Ea){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${r}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Nt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(h-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.U_.Ay({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.Ws.Bs(),this.gp=!0,this}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.U_.qe(this.Ze),this.Ws.Bs(),this}getFillStyle(){return this.Ze}clear(){return this.U_.Vi(),this.Ws.Bs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.U_.ly(t),this.Ws.Bs(),this}getIntensityInterpolation(){return this.U_.uy()}Ys(){return Pi(this.Ze,this.U_._i())}xp(){return this.rp&&this.getVisible()}rr(t,i){t.Ii(i),this.Ws.Bs()}ir(){}er(){return{fill:this.Ze}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Yc extends pu{constructor(t,i,s,e,r,h,n,o){var a;super(t,Hc,i,s,e,r,h,n,o),this.j_=90,this.H_=12,this.W_=jc,this.zp=this.zx._d(this.Nx).setPointerEvents(!1),this.Wx=t=>{if(0===this.getTitle().length||le(this.getTitleFillStyle()))return;let i=180*(t.M-this.Nx.Ae())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;return!(i>=0&&i<=20||i>=340&&i<=360)&&void 0},this.Rh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.j_),this.X_=null!==(a=this.bi.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.Z_="function"==typeof t?t(this.Z_):t,this.J_(),this.zx.Bs(),this}getTickStyle(){return this.Z_}setTickFormattingFunction(t){return this.W_=t,this.J_(),this.zx.Bs(),this}getTickFormattingFunction(){return this.W_}setClockwise(t){this.Nx.ce(t);const i=this.j_*Math.PI/180;return t?this.Nx.fe(i+Math.PI/2):this.Nx.fe(i-Math.PI/2),this.zx.Bs(),this}getClockwise(){return!this.Nx.de()}setNorth(t){for(;t<0;)t+=360;t%=360,this.j_=t;const i=t*Math.PI/180;return this.getClockwise()?this.Nx.fe(i+Math.PI/2):this.Nx.fe(i-Math.PI/2),this.zx.Bs(),this}getNorth(){return 180*this.Nx.Ae()/Math.PI}setDivision(t){return this.H_=t,this.J_(),this.zx.Bs(),this}getDivision(){return this.H_}getMarginAfterTicks(){return this.X_}setMarginAfterTicks(t){return this.X_=t,this.chart.pi.Bs(),this}gA(){return[]}Qh(t,i,s){return{ticksInfo:i,yA:this.ln(((t,i)=>{const s=i.kn.Fr,e=.5*this.Gx.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.zh.Nh().bc().y);return Math.max(t,e)}),0)+this.X_,updatedTicks:s}}vn(t,i){return i}xn(t,i,s){return{start:t,end:i}}Ux(t,i){const s=t.de()?1:-1,e=t.Ae(),r=t.ue()?t.le().end-t.le().start:t.le().start-t.le().end;return{x:Math.cos((i-e)*s)*r,y:Math.sin((i-e)*s)*r}}Yx(t,i){return t.dr(i)}Xx(t,i,s,e){const r=this.Z_,h=t.de()?1:-1,n=t.Ae(),o=(e.M-n)*h,a=Math.cos(o),l=Math.sin(o),u=t.ue()?t.le().end-t.le().start:t.le().start-t.le().end,c={x:a*u,y:l*u};i.gr({x:0,y:0}).Ar(c);const d={x:c.x+a*r.tickLength*t.ni().x,y:c.y+l*r.tickLength*t.ni().y};s.gr(c).Ar(d),i.cr(r.gridStrokeStyle),s.cr(r.tickStyle)}$x(t,i,s){const e=t.de()?1:-1;let r,h=(i-t.Ae())*e;for(;h<0;)h+=2*Math.PI;for(;h>=2*Math.PI;)h-=2*Math.PI;r=h>0&&h<=Math.PI?-h+Math.PI/2:-h-Math.PI/2;const n=Math.cos(h),o=Math.sin(h),a=s.tickLength+s.tickPadding;return{alignment:{x:0,y:0},padding:{x:n*a*t.ni().x,y:o*a*t.ni().y},rotation:180*r/Math.PI,offset:{x:0,y:0}}}jx(t,i,s){const e=t.ue()?t.le().end-t.le().start:t.le().start-t.le().end;this.zp.Qu(0).Ar(360).sc(0).Ku(e+.5*i.getThickness()*t.ni().x).rc(360).qe(ae).Ke(i)}Hx(t,i,s){const e=t.Ae(),r=this.$x(t,0+e,this.Z_),h=t.ue()?t.le().end-t.le().start:t.le().start-t.le().end;i.Zl(r.alignment).Th(r.rotation).$l(r.offset.x,r.offset.y).sr(Bs({x:h,y:0},r.padding))}J_(){this.Bh({Mr:[],wr:[{zh:"Radial ticks",MA:0,Fr:this.Z_,mr:this.W_,Fn:(t,i,s,e)=>{const r=[],h=2*Math.PI/this.H_;for(let t=0;t<2*Math.PI;t+=h)r.push(t);return r},ih:{hn:()=>{},eh:()=>!1,an:"hide-label"},In:void 0}],_r:jc,kr:void 0,Cr:void 0},"Numeric")}}const jc=(t,i,s)=>(180*t/Math.PI).toFixed(0),Hc={dn:()=>{},fn:()=>{},gn:()=>{},Ex:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,W:(t,i)=>{},et:(i,s,e,r,h)=>t.x.et(i,s,e,r,h)}),Rx:t=>t.radial},Wc=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Xc=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class Zc extends De{constructor(t,i,s,e,r,h){super(i,s,r,h),this.Rs="Sector",this.Q_=0,this.K_=1*Math.PI/2,this.q_=void 0,this.tk=void 0,this.D=new yt,this.Ws=t,this.Nx=e,this.fS=this.Ws.Tc(this.Nx).Ii(this.getHighlight()),this._s(this.fS),this.Ze=r.polarSectorFillStyle,this.Je=r.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.Q_=t,this.Ws.Bs(),this}getAngleStart(){return this.Q_}setAngleEnd(t){return this.K_=t,this.Ws.Bs(),this}getAngleEnd(){return this.K_}setAmplitudeStart(t){return this.q_=t,this.Ws.Bs(),this}getAmplitudeStart(){return this.q_}setAmplitudeEnd(t){return this.tk=t,this.Ws.Bs(),this}getAmplitudeEnd(){return this.tk}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Ws.Bs(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.Ws.Bs(),this}getStrokeStyle(){return this.Je}ir(){const t=this.Nx.le(),i=void 0!==this.q_?Wt(this.q_,t.start,t.end):t.start,s=void 0!==this.tk?Wt(this.tk,t.start,t.end):t.end,e=[],r=Math.min(this.Q_,this.K_),h=Math.max(this.Q_,this.K_);for(let t=r;t<=h;t+=1)e.push({angle:t,amplitude:i});for(let t=h;t>=r;t-=1)e.push({angle:t,amplitude:s});const n=Mu(e,this.Nx);this.fS.au(n).qe(this.Ze).Ke(this.Je)}rr(t,i){t.Ii(i),this.Ws.Bs()}er(){return{fill:this.Ze,stroke:this.Je}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Jc extends fl{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("polarChart bg",0),e,i.pi.bi.polarChartBackgroundFillStyle,i.pi.bi.polarChartBackgroundStrokeStyle,i.pi.bi.polarChartTitleFont,i.pi.bi.polarChartTitleFillStyle,i.pi.bi.polarChartTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.coordsClient="client",this.Rf=[],this.ik=t=>{this.Nx.Z(t.engineWidth,t.engineHeight)},this.Nf=Si(this.Rf),this.sk=t=>{this.Rf.push(t)},this.ek=()=>this.fv,this.D=new yt,this.pi.La(jh.Co),this.a_=i.Rm("polarChart series bg",0),this.rk=i.Om("polarChart axis gridlines",0),this.hk=i.Om("polarChart series",1),this.nk=i.Om("polarChart axis lines",2),this.ak=i.Om("polarChart axis ticks",3),this.Nx=s.d2({scaleXYConstructor:mr}),this.addEventListener("resize",this.ik),this.Yr.tn("Polar Chart"),this.yv=this.a_._d(this.Nx).qe(this.bi.polarChartSeriesBackgroundFillStyle).Ke(Tt).Qu(0).Ar(360).sc(0),this.mv=this.a_._d(this.Nx).qe(ae).Ke(this.bi.polarChartSeriesBackgroundStrokeStyle).Qu(0).Ar(360).sc(0),super.vv(this.yv,this.mv),this.jg(r,this.eA),this.lk=new yu(this,this.Nx,this.bi,!1!==(null==h?void 0:h.animationsEnabled),this.rk,this.nk,this.ak,this.vs,this.ek),this.uk=new Yc(this,this.Nx,this.bi,!1!==(null==h?void 0:h.animationsEnabled),this.rk,this.nk,this.ak,this.vs),this.coordsAxis={axisAmplitude:this.lk,axisRadial:this.uk};const a=i.Ym(),l=Zt(h?h.cursorBuilder:void 0,Wl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),this,"show-nearest",Kc,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled));const u={backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(u)}getSeries(){return this.fv}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.jm.solveNearest(t,i,this.fv,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=Wl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.eA,r=s;if(xe(r)){const t=q(i,e,this.pi.ai);return this.pi.sl({engineX:t.x,engineY:t.y})}if(be(r))return i;if(Wc(r)){const t=q(i,e,this.Nx);return ku(t,this.Nx)}}else{const s=t,e=i;if(Se(s)){if(Wc(e)){const t=this.pi.il(s),i=q({x:t.engineX,y:t.engineY},this.pi.ai,this.Nx);return ku(i,this.Nx)}if(xe(e))return s;if(be(e)){const t=this.pi.il(s);return q({x:t.engineX,y:t.engineY},this.pi.ai,this.eA)}}else if(Xc(s)){if(Wc(e))return s;const t=Mu([s],this.Nx)[0];if(xe(e)){const i=q(t,this.Nx,this.pi.ai),s={engineX:i.x,engineY:i.y};return this.pi.sl(s)}if(be(e))return q(t,this.Nx,this.eA)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new Iu(this.hk,this,this.gv,this.Nx,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addPointSeries(t){const i=new $c(this.hk,this,this.gv,this.Nx,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addPointLineSeries(t){const i=new Gc(this.hk,this,this.gv,this.Nx,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addAreaSeries(t){const i=new Fu(this.hk,this,this.gv,this.Nx,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addPolygonSeries(t){const i=new Cu(this.hk,this,this.gv,this.Nx,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,this.pi.vs);return this.xv(i,t),i}addHeatmapSeries(t){const i=new Uc(this.hk,this,this.gv,this.Nx,this.bi,this.pi.vs,t);return this.xv(i,t),i}addSector(t){const i=new Zc(this.hk,this,this.Nf,this.Nx,this.bi,this.pi.vs);return this.sk(i),this.Os.forEach((s=>{s.xg()&&null!==t&&s.bu(i,t)})),i}getAmplitudeAxis(){return this.lk}get amplitudeAxis(){return this.lk}get axisAmplitude(){return this.lk}getRadialAxis(){return this.uk}get radialAxis(){return this.uk}get axisRadial(){return this.uk}ir(t){super.ir(t);const i=Ha.tp(this.Yr,this.Wg),s=this.Os.reduce(((t,s)=>{const e=s.Nh(i,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,s);for(const t of this.fv)t.cp();this.lk.pn(),this.uk.pn();for(const t of this.fv)t.ir();const e=this.Nx.getInnerIntervalPixels().x/2,r=this.lk.Nh({physicalAxisSize:e}),h=this.uk.Nh({physicalAxisSize:2*Math.PI*e});this.lk.ir(r),this.uk.ir(h);const n=[this.Gn.left+h.yA+s.left,this.Gn.right+h.yA+s.right],o=[this.Gn.bottom+h.yA+s.bottom,this.Gn.top+h.yA+i+s.top];this.Nx.qt(n).ti(o);const a=this.Nx.le().start,l=this.Nx.le().end,u=this.Nx.ue()?(h.yA||0)*this.Nx.x.getPixelSize()+l-a:(h.yA||0)*this.Nx.x.getPixelSize()+a-l;this.yv.Ku(u).rc(360),this.mv.Ku(u).rc(360);for(const t of this.Rf)t.ir();this.jm.ir(!1,this.fv,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.fv)t.dp();return super.Yg(),this.Os.forEach((t=>t.ir(i,this.Gn))),this.ck(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.lk.setAnimationsEnabled(t),this.uk.setAnimationsEnabled(t),this}getMinimumSize(){return a(Qc,Qc)}ck(){}forEachAxis(t){return t(this.lk),t(this.uk),this}dispose(){return this.Rf.slice().forEach((t=>t.dispose())),this.jm.G(),this.a_.G(),this.rk.G(),this.hk.G(),this.nk.G(),this.ak.G(),super.dispose()}bg(){return[...this.fv,...this.Rf]}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Qc=300,Kc=(t,i,s)=>{var e;return et(i)?eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Te(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Te(i.lut?he(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):eA(i,[[{component:i.series,componentColor:rA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Te(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class qc extends De{constructor(t,i,s,e){super(t,i,s,e),this.Rs="Slice",this.M=0,Nt.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.pi.Bs()}))}))}}class td extends qc{}class id extends td{constructor(t,i,s,e,r,h,n,o){super(e,h,n,o),this.Rs="Slice",this.M=0,this.dk=!1,this.fk=ae,this.Ak=ae,this.gk=this.M,this.pk=bt((()=>this.chart.pi.Bs())),this.vk=()=>{this.yk=void 0},this.D=new yt,this.index=t,this.chart=e,this.scale=r,this.As=h,this.fS=i.Tc(r,_n.Simple).Ii(this.getHighlight()),this._s(this.fS),this.zh=s._n(r).Ii(this.getHighlight()),this._s(this.zh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.mk(this.gk,t,(()=>this.chart.Os.forEach((t=>t.zs())))):this.gk=t,this.M=t,this.chart.Os.forEach((t=>t.zs())),this.chart.pi.Bs(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.gk)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.mk(this.gk,0,(()=>super.setVisible(!1)))):(this.gk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.mk(this.gk,this.M)):(this.gk=this.M,super.setVisible(!0)),this}mk(t,i,s){this.yk=this.pk(300,xt.ease)([[t,i]],(([t])=>{this.gk=t,this.chart.pi.Bs()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.fk=t,this.Ak=s,this.fS.qe(this.fk).Ke(i),this.zh.qe(this.Ak).Ch(e).qh(r)}getAnimatedValue(){return this.gk}rr(t,i){return t.Ii(i),this.chart.pi.Bs(),this}er(){return{fill:this.fk,stroke:this.fS.Ja()}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var sd;exports.SliceLabelIndices=void 0,(sd=exports.SliceLabelIndices||(exports.SliceLabelIndices={}))[sd.LabelsInsideSlices=0]="LabelsInsideSlices",sd[sd.LabelsOnSides=1]="LabelsOnSides";const ed={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>Math.abs(t.getAnimatedValue())-Math.abs(i.getAnimatedValue()),SortByValueDescending:(t,i)=>Math.abs(i.getAnimatedValue())-Math.abs(t.getAnimatedValue()),None:()=>0},rd={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};var hd;exports.FunnelSliceModes=void 0,(hd=exports.FunnelSliceModes||(exports.FunnelSliceModes={}))[hd.VariableHeight=0]="VariableHeight",hd[hd.VariableWidth=1]="VariableWidth";const nd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},od=(t,i,s,e,r,h=0,n=exports.FunnelSliceModes.VariableHeight,o,a)=>{i=nd(i,e.x),s=nd(s,e.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let d={x:o-i/2+a.left,y:e.y+r.bottom+a.bottom},f={x:o+i/2+a.left,y:e.y+r.bottom+a.bottom},A={x:0,y:r.bottom},g={x:0,y:r.bottom},p=0,v=0;if(h)for(let i=0;i<t.length;i+=1){const s=t[i],o=10;v+=Math.abs(s.getAnimatedValue());const a=n===exports.FunnelSliceModes.VariableWidth?(e.y-h*l)/l:e.y+r.bottom-v/u*e.y;if(n===exports.FunnelSliceModes.VariableWidth){h=a-h<o?Math.max(20,a-o):h;break}0!==p&&p-a-h<o&&(h=Math.max(0,p-a-o)),p=a}const y=(i-s)/2/e.y;for(let p=0;p<l;p+=1){const v=t[p];c+=Math.abs(v.getAnimatedValue());const m=n===exports.FunnelSliceModes.VariableWidth?(e.y-h*l)/l:e.y+r.bottom-c/u*e.y;let x=0;p>0&&(d={x:A.x+y*h,y:A.y-h},f={x:g.x-y*h,y:g.y-h}),x=(i+c/u*(s-i))/2,A={x:o-x+a.left,y:n===exports.FunnelSliceModes.VariableWidth?d.y-m:m+a.bottom},g={x:o+x+a.left,y:n===exports.FunnelSliceModes.VariableWidth?f.y-m:m+a.bottom},f.x>=d.x&&g.x>A.x&&v.fS.au([A,d,f,g])}};class ad extends ja{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("funnelChart bg",0),e,i.pi.bi.funnelChartBackgroundFillStyle,i.pi.bi.funnelChartBackgroundStrokeStyle,i.pi.bi.funnelChartTitleFont,i.pi.bi.funnelChartTitleFillStyle,i.pi.bi.funnelChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.xk=[],this.Sk=ed.None,this.bk=!0,this.Mk=this.bi.funnelChartSliceLabelShadow,this.wk=0,this._k=20,this.kk=5,this.Ck=exports.FunnelSliceModes.VariableHeight,this.Tk=!0,this.Fk=t=>{const i=this.xk.indexOf(t);i>=0&&(this.xk.splice(i,1),this.Ik())},this.D=new yt,this.pi.La(jh.wo),this.Lk=this.bi.effectsText,this.Pk=i.Om("funnelChart bottom",0),this.Bk=i.Om("funnelChart top",1),this.Yr.tn("Funnel Chart"),this.Dk=this.bi.funnelChartSliceFillStylePalette,this.Ek=this.bi.funnelChartSliceStrokeStyle,this.Rk=this.bi.funnelChartSliceLabelFont,this.Ok=this.bi.funnelChartSliceLabelFillStyle;const a=i.Ym(),l=Zt(n?n.cursorBuilder:void 0,jl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),void 0,"show-pointed",ld,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.jg(r,this.eA);const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=jl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}addSlice(t,i){const s=new id(this.wk,this.Pk,this.Bk,this,this.eA,this.Fk,this.bi,this.pi.vs);return this.wk+=1,s.setName(t),s.setValue(i),s.vs.xs.Ps(this.Lk),s.vs.Ss.Ps(this.Tk),this.xk.push(s),this.pi.Bs(),s.setHighlightOnHover(this.bk),this.Os.forEach((t=>{t.xg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.xk}setNeckWidth(t){return this._k=Wt(t,1,99),this.pi.Bs(),this}getNeckWidth(){return this._k}setSliceGap(t){return this.kk=Math.min(Math.max(t,0),20),this.pi.Bs(),this}setSliceMode(t){return this.Ck=t,this.pi.Bs(),this}getFunnelSliceMode(){return this.Ck}setLUT(t){return this.Sf=t,this.pi.Bs(),this}setSliceFillStyle(t){return this.Dk=t,this.pi.Bs(),this}getSliceFillStyle(){return this.Dk}setSliceStrokeStyle(t){return this.Ek="function"==typeof t?t(this.Ek):t,this.pi.Bs(),this}getSliceStrokeStyle(){return this.Ek}setSliceEffect(t){return this.Tk=t,this.xk.forEach((i=>i.vs.Ss.Ps(t))),this.pi.Bs(),this}getSliceEffect(){return this.Tk}setSliceSorter(t){return this.Sk=t,this.xk=this.xk.sort(this.Sk),this.pi.Bs(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){return this.Ok="function"==typeof t?t(this.Ok):t,this.pi.Bs(),this}getLabelFillStyle(){return this.Ok}setLabelShadow(t){return this.Mk=t,this.pi.Bs(),this}getLabelShadow(){return this.Mk}setLabelFont(t){return this.Rk="function"==typeof t?t(this.Rk):t,this.pi.Bs(),this}getLabelFont(){return this.Rk}setLabelEffect(t){return this.Lk=t,this.xk.forEach((i=>i.vs.xs.Ps(t))),this.pi.Bs(),this}getLabelEffect(){return this.Lk}setLabelFormatter(t){return this.zk=t,this.pi.Bs(),this}getLabelFormatter(){return this.zk}setSliceHighlightOnHover(t){return this.bk=t,this.xk.forEach((i=>i.setHighlightOnHover(t))),this}ir(t){super.ir(t),super.Yg(),this.xk=this.xk.sort(this.Sk);for(let t=0,{length:i}=this.xk;t<i;t+=1)this.Vk(this.xk[t],t);const i=this.xk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=Ha.tp(this.Yr,this.Wg),e=this.Os.reduce(((t,i)=>{const e=i.Nh(s,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,e);const r=a(this.eA.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.eA.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+s)),h=a(r.x-e.left-e.right,r.y-e.top-e.bottom),n=a(this.Gn.left+(r.x+e.left-e.right)/2,this.Gn.bottom+(r.y+e.bottom-e.top)/2);let o=0;for(let t=0;t<i.length;t+=1)o+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/o:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.zh.tn(this.zk(s,l[t])).Nh()}l.push(o),this.jm.ir(!1,this.xk,((t,s,e)=>{const r=l[i.indexOf(t)]||0,h=this.pi.il(s);return{cursorPosition:{pointMarker:{x:h.engineX,y:h.engineY},pointMarkerScale:this.pi.ai,resultTable:{x:h.engineX,y:h.engineY},resultTableScale:this.pi.ai},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}})),this.Os.forEach((t=>t.ir(s,this.Gn))),this.Nk(i,l,n,h,e)}Vk(t,i){t.setStyle(this.Sf?new de({color:this.Sf.getColors(t.getAnimatedValue(),void 0)}):this.Dk(i,t),this.Ek,this.Ok,this.Rk,this.Mk)}Ik(){this.xk=this.xk.sort(this.Sk),this.pi.Bs()}bg(){return this.xk}dispose(){return this.xk.slice().forEach((t=>t.dispose())),this.jm.G(),this.Pk.G(),this.Bk.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const ld=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],ud=(t,i,s)=>{const e=t.lu();if(0===e.length)return{x:0,y:0};let r;const h=(e[1].y-e[0].y)/2+e[0].y;return r=i===exports.FunnelLabelSide.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:r,y:h}},cd=t=>{const i=t.lu();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class dd extends ad{constructor(){super(...arguments),this.zk=rd.NamePlusValue,this.Gk=0,this.$k=10,this.Uk=30,this.Yk=10,this.jk=exports.FunnelLabelSide.Left,this.Hk=[],this.Wk=this.bi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Wk=t;for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].cr(this.Wk);return this.pi.Bs(),this}getLabelConnectorStyle(){return this.Wk}setLabelConnectorGapBeforeLabel(t){return this.$k=t,this.pi.Bs(),this}getLabelConnectorGapBeforeLabel(){return this.$k}setLabelConnectorGapBeforeSlice(t){return this.Gk=t,this.pi.Bs(),this}getLabelConnectorGapBeforeSlice(){return this.Gk}setLabelConnectorLengthAfterSlice(t){return this.Uk=t,this.pi.Bs(),this}getLabelConnectorLengthAfterSlice(){return this.Uk}setLabelConnectorMinLengthBeforeSlice(t){return this.Yk=t,this.pi.Bs(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Yk}setLabelSide(t){return this.jk=t,this.pi.Bs(),this}getLabelSide(){return this.jk}Nk(t,i,s,e,r){let h=0,n=0;for(let i=0;i<t.length;i+=1){const s=t[i].zh.setVisible(!0).Nh().bc();h=Math.max(h,s.x),n+=s.y}const o=.4*e.x,a=e.x-o-(this.Gk+this.Uk+this.Yk+this.$k);let l=!0;a<50?l=!1:h>a&&(t.forEach((t=>{const i=t.zh.rn(),s=t.zh.bc().x/i.length,e=Math.floor(a/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.zh.tn(s).Nh()}})),n=0,h=t.reduce(((t,i)=>{const s=i.zh.bc();return n+=s.y,Math.max(t,s.x)}),0));const u=this.jk===exports.FunnelLabelSide.Left?this.Gn.left+r.left:this.Gn.left+e.x,c=this.jk===exports.FunnelLabelSide.Left?-1:1,d=e.y-n;d<0&&(l=!1);const f=l?h+this.$k+this.Yk+this.Uk+this.Gk:0,A=e.x-f,g=this.jk===exports.FunnelLabelSide.Left?this.Gn.left+f:this.Gn.left,p=this.jk===exports.FunnelLabelSide.Left?g+A:this.Gn.left+A,v=(g+p)/2;od(t,100,this._k,{x:A,y:e.y},this.Gn,this.kk,this.Ck,v,r);const y=t.filter((t=>l&&0!==t.fS.lu().length?(t.zh.setVisible(!0),!0):(t.zh.setVisible(!1),!1))),m=d/(y.length+1);let x=this.Gn.bottom+e.y-(this.Ck==exports.FunnelSliceModes.VariableHeight?m:0)+r.bottom;this.Ck==exports.FunnelSliceModes.VariableWidth&&(x-=n/t.length/2);const S=this.jk===exports.FunnelLabelSide.Left?g:p,b=this.jk===exports.FunnelLabelSide.Left?v-.5*this._k/100*A:v+.5*this._k/100*A,M=this.Gn.bottom+e.y+r.bottom,w=this.Gn.bottom+r.bottom;for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].setVisible(!1);for(let t=0;t<y.length;t+=1){const i=y[t],s=i.fS,e=i.zh,r=e.bc(),h=ud(s,this.jk,this.Gk);if(this.Ck==exports.FunnelSliceModes.VariableHeight){i.zh.sr({x:u,y:x}).Zl({x:c,y:1});const t=x-.5*r.y,s={x:this.jk===exports.FunnelLabelSide.Left?Math.min(Ne(S,b,(t-M)/(w-M))-this.Uk,h.x):Math.max(Ne(S,b,(t-M)/(w-M))+this.Uk,h.x),y:t},n={x:this.jk===exports.FunnelLabelSide.Left?e.Vl().x+r.x+this.$k:e.Vl().x-r.x-this.$k,y:t};this.Xk([h,s,n]),x-=r.y+m}else{const t=this.jk===exports.FunnelLabelSide.Left?u+r.x+this.$k:u-r.x-this.$k;i.zh.sr({x:u,y:h.y}).Zl({x:c,y:0}),this.Xk([h,{x:t,y:h.y}])}}}getMinimumSize(){return a(500,300)}Xk(t){if(t){let i;for(let t=0;t<this.Hk.length;t+=1)if(!this.Hk[t].getVisible()){i=this.Hk[t].setVisible(!0);break}void 0===i&&(i=this.Bk.Np(this.eA,void 0,[Ja.InternalUI]).cr(this.Wk),this.Hk.push(i)),i.Vi().bu(t)}}}class fd extends ad{constructor(){super(...arguments),this.zk=rd.Name}Nk(t,i,s,e,r){const h=this.Gn.left+e.x/2;od(t,100,this._k,e,this.Gn,this.kk,this.Ck,h,r);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.fS,r=s.zh,h=cd(e);h&&r.sr(h).Yl(0).Wl(0)}}getMinimumSize(){return a(200,200)}}const Ad={LabelsOnSides:dd,LabelsInsideSlices:fd};var gd,pd;exports.FunnelLabelSide=void 0,(gd=exports.FunnelLabelSide||(exports.FunnelLabelSide={}))[gd.Right=0]="Right",gd[gd.Left=1]="Left";class vd extends qc{}class yd extends vd{constructor(t,i,s,e,r,h,n,o){super(e,h,n,o),this.dk=!1,this.Zk=ae,this.Ak=ae,this.gk=this.M,this.Jk=this.dk?1:0,this.Qk=this.getVisible(),this.pk=bt((()=>this.chart.pi.Bs())),this.Kk=bt((()=>this.chart.pi.Bs())),this.vk=()=>{this.yk=void 0},this.qk=()=>{this.tC=void 0},this.D=new yt,this.index=t,this.chart=e,this.scale=r,this.As=h,this.iC=i._d(r).Ii(this.getHighlight()),this._s(this.iC),this.zh=s._n(r).Ii(this.getHighlight()),this._s(this.zh,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,i)=>{di(i),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.Qk&&this.mk(this.gk,t,(()=>this.chart.Os.forEach((t=>t.zs())))):this.gk=t,this.M=t,this.chart.Os.forEach((t=>t.zs())),this.chart.pi.Bs(),this}getValue(){return this.M}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.tC&&this.tC.finish(),this.tC=this.Kk(300,xt.ease)([[this.Jk,t?1:0]],(([t])=>{this.Jk=t,this.chart.pi.Bs()})),this.tC.addEventListener("everyAnimationEnd",this.qk),this.dk=!this.dk):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Jk=this.dk?0:1,this.dk=!this.dk):(this.Jk=0,this.dk=!this.dk),this.chart.pi.Bs(),this}getExploded(){return this.dk}setVisible(t){return this.Qk=t,!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.gk)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.mk(this.gk,0,(()=>super.setVisible(!1)))):(this.gk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.mk(this.gk,this.M)):(this.gk=this.M,super.setVisible(!0)),this}mk(t,i,s){this.yk=this.pk(300,xt.ease)([[t,i]],(([t])=>{this.gk=t,this.chart.pi.Bs()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.Zk=t,this.Ak=s,this.iC.qe(this.Zk).Ke(i),this.zh.qe(this.Ak).Ch(e).qh(r)}getAnimatedValue(){return this.gk}getAnimatedExplosion(){return this.Jk}er(){return{fill:this.Zk,stroke:this.iC.Ja()}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class md extends qc{}class xd extends md{constructor(t,i,s,e,r,h,n,o){super(e,h,n,o),this.Rs="Slice",this.M=0,this.dk=!1,this.fk=ae,this.Ak=ae,this.gk=this.M,this.pk=bt((()=>this.chart.pi.Bs())),this.vk=()=>{this.yk=void 0},this.D=new yt,this.index=t,this.chart=e,this.scale=r,this.As=h,this.fS=i.Tc(r,_n.Simple).Ii(this.getHighlight()),this._s(this.fS),this.zh=s._n(r).Ii(this.getHighlight()),this._s(this.zh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.mk(this.gk,t,(()=>this.chart.Os.forEach((t=>t.zs())))):this.gk=t,this.M=t,this.chart.Os.forEach((t=>t.zs())),this.chart.pi.Bs(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.gk)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.mk(this.gk,0,(()=>super.setVisible(!1)))):(this.gk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.mk(this.gk,this.M)):(this.gk=this.M,super.setVisible(!0)),this}mk(t,i,s){this.yk=this.pk(300,xt.ease)([[t,i]],(([t])=>{this.gk=t,this.chart.pi.Bs()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.fk=t,this.Ak=s,this.fS.qe(this.fk).Ke(i),this.zh.qe(this.Ak).Ch(e).qh(r)}getAnimatedValue(){return this.gk}er(){return{fill:this.fk,stroke:this.fS.Ja()}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}exports.PyramidSliceModes=void 0,(pd=exports.PyramidSliceModes||(exports.PyramidSliceModes={}))[pd.VariableHeight=0]="VariableHeight",pd[pd.VariableWidth=1]="VariableWidth";const Sd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},bd=(t,i,s,e,r,h=0,n=exports.PyramidSliceModes.VariableHeight,o,a=Xi)=>{i=Sd(i,e.x),s=Sd(s,e.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let d={x:o-i/2+a.left,y:e.y+r.bottom+a.bottom},f={x:o+i/2+a.left,y:e.y+r.bottom+a.bottom},A={x:0,y:r.bottom},g={x:0,y:r.bottom},p=0,v=0;if(h)for(let i=0;i<t.length;i+=1){const s=10;v+=Math.abs(t[i].getAnimatedValue());const o=n===exports.PyramidSliceModes.VariableWidth?(e.y-h*l)/l:e.y+r.bottom-v/u*e.y;if(n===exports.PyramidSliceModes.VariableWidth){h=o-h<s?Math.max(20,o-s):h;break}0!==p&&p-o-h<s&&(h=Math.max(0,p-o-s)),p=o}const y=(i-s)/2/e.y;for(let p=0;p<l;p+=1){const v=t[p];c+=Math.abs(v.getAnimatedValue());const m=n===exports.PyramidSliceModes.VariableWidth?(e.y-h*l)/l:e.y+r.bottom-c/u*e.y;let x=0;p>0&&(d={x:A.x+y*h,y:A.y-h},f={x:g.x-y*h,y:g.y-h}),x=(i+c/u*(s-i))/2,A={x:o-x+a.left,y:n===exports.PyramidSliceModes.VariableWidth?d.y-m:m+a.bottom},g={x:o+x+a.left,y:n===exports.PyramidSliceModes.VariableWidth?f.y-m:m+a.bottom},f.x>=d.x&&g.x>=A.x&&v.fS.au([A,d,f,g])}};class Md extends ja{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("pyramidChart bg",0),e,i.pi.bi.pyramidChartBackgroundFillStyle,i.pi.bi.pyramidChartBackgroundStrokeStyle,i.pi.bi.pyramidChartTitleFont,i.pi.bi.pyramidChartTitleFillStyle,i.pi.bi.pyramidChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.xk=[],this.Sk=ed.None,this.Dk=this.bi.pyramidChartSliceFillStylePalette,this.Ek=this.bi.pyramidChartSliceStrokeStyle,this.bk=!0,this.Rk=this.bi.pyramidChartSliceLabelFont,this.Ok=this.bi.pyramidChartSliceLabelFillStyle,this.Mk=this.bi.pyramidChartSliceLabelShadow,this.wk=0,this._k=100,this.kk=5,this.Ck=exports.PyramidSliceModes.VariableHeight,this.Tk=!0,this.Fk=t=>{const i=this.xk.indexOf(t);i>=0&&(this.xk.splice(i,1),this.Ik())},this.D=new yt,this.pi.La(jh.wo),this.Lk=this.bi.effectsText,this.Pk=i.Om("pyramidChart bottom",0),this.Bk=i.Om("pyramidChart top",1),this.Yr.tn("Pyramid Chart");const a=i.Ym(),l=Zt(n?n.cursorBuilder:void 0,jl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),void 0,"show-pointed",wd,(()=>0)),this.jg(r,this.eA),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=jl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}addSlice(t,i){const s=new xd(this.wk,this.Pk,this.Bk,this,this.eA,this.Fk,this.bi,this.pi.vs);return this.wk+=1,s.setName(t),s.setValue(i),s.vs.xs.Ps(this.Lk),s.vs.Ss.Ps(this.Tk),this.xk.push(s),this.pi.Bs(),this.Os.forEach((t=>{t.xg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.xk}setNeckWidth(t){return this._k=Wt(t,1,100),this.pi.Bs(),this}getNeckWidth(){return this._k}setSliceGap(t){return this.kk=Math.min(Math.max(t,0),20),this.pi.Bs(),this}setSliceMode(t){return this.Ck=t,this.pi.Bs(),this}getPyramidSliceMode(){return this.Ck}setLUT(t){return this.Sf=t,this.pi.Bs(),this}setSliceFillStyle(t){return this.Dk=t,this.pi.Bs(),this}getSliceFillStyle(){return this.Dk}setSliceStrokeStyle(t){return this.Ek="function"==typeof t?t(this.Ek):t,this.pi.Bs(),this}getSliceStrokeStyle(){return this.Ek}setSliceEffect(t){return this.Tk=t,this.xk.forEach((i=>i.vs.Ss.Ps(t))),this.pi.Bs(),this}getSliceEffect(){return this.Tk}setSliceSorter(t){return this.Sk=t,this.xk=this.xk.sort(this.Sk),this.pi.Bs(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){return this.Ok="function"==typeof t?t(this.Ok):t,this.pi.Bs(),this}getLabelFillStyle(){return this.Ok}setLabelShadow(t){return this.Mk=t,this.pi.Bs(),this}getLabelShadow(){return this.Mk}setLabelFont(t){return this.Rk="function"==typeof t?t(this.Rk):t,this.pi.Bs(),this}getLabelFont(){return this.Rk}setLabelEffect(t){return this.Lk=t,this.xk.forEach((i=>i.vs.xs.Ps(t))),this.pi.Bs(),this}getLabelEffect(){return this.Lk}setLabelFormatter(t){return this.zk=t,this.pi.Bs(),this}getLabelFormatter(){return this.zk}setSliceHighlightOnHover(t){return this.bk=t,this.xk.forEach((i=>i.setHighlightOnHover(t))),this}ir(t){super.ir(t),super.Yg(),this.xk=this.xk.sort(this.Sk);for(let t=0,{length:i}=this.xk;t<i;t+=1)this.Vk(this.xk[t],t);const i=this.xk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=Ha.tp(this.Yr,this.Wg),e=this.Os.reduce(((t,i)=>{const e=i.Nh(s,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,e);const r=a(this.eA.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.eA.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+s)),h=a(r.x-e.left-e.right,r.y-e.top-e.bottom),n=a(this.Gn.left+(r.x+e.left-e.right)/2,this.Gn.bottom+(r.y+e.bottom-e.top)/2);let o=0;for(let t=0;t<i.length;t+=1)o+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/o:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.zh.tn(this.zk(s,l[t])).Nh()}l.push(o),this.jm.ir(!1,this.xk,((t,s,e)=>{const r=l[i.indexOf(t)]||0,h=this.pi.il(s);return{cursorPosition:{pointMarker:{x:h.engineX,y:h.engineY},pointMarkerScale:this.pi.ai,resultTable:{x:h.engineX,y:h.engineY},resultTableScale:this.pi.ai},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}})),this.Os.forEach((t=>t.ir(s,this.Gn))),this.Nk(i,l,n,h,e)}Vk(t,i){t.setStyle(this.Sf?new de({color:this.Sf.getColors(t.getAnimatedValue(),void 0)}):this.Dk(i,t),this.Ek,this.Ok,this.Rk,this.Mk)}Ik(){this.xk=this.xk.sort(this.Sk),this.pi.Bs()}bg(){return this.xk}dispose(){return this.xk.slice().forEach((t=>t.dispose())),this.jm.G(),this.Pk.G(),this.Bk.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const wd=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],_d=(t,i,s)=>{const e=t.lu();if(0===e.length)return{x:0,y:0};let r;const h=(e[1].y-e[0].y)/2+e[0].y;return r=i===exports.PyramidLabelSide.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:r,y:h}},kd=t=>{const i=t.lu();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Cd extends Md{constructor(){super(...arguments),this.zk=rd.NamePlusValue,this.Gk=0,this.$k=10,this.Uk=30,this.Yk=10,this.jk=exports.PyramidLabelSide.Left,this.sC=exports.SliceLabelIndices.LabelsOnSides,this.Hk=[],this.Wk=this.bi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Wk=t;for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].cr(this.Wk);return this.pi.Bs(),this}getLabelConnectorStyle(){return this.Wk}setLabelConnectorGapBeforeLabel(t){return this.$k=t,this.pi.Bs(),this}getLabelConnectorGapBeforeLabel(){return this.$k}setLabelConnectorGapBeforeSlice(t){return this.Gk=t,this.pi.Bs(),this}getLabelConnectorGapBeforeSlice(){return this.Gk}setLabelConnectorLengthAfterSlice(t){return this.Uk=t,this.pi.Bs(),this}getLabelConnectorLengthAfterSlice(){return this.Uk}setLabelConnectorMinLengthBeforeSlice(t){return this.Yk=t,this.pi.Bs(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Yk}setLabelSide(t){return this.jk=t,this.pi.Bs(),this}getLabelSide(){return this.jk}Nk(t,i,s,e,r){let h=0,n=0;for(let i=0;i<t.length;i+=1){const s=t[i].zh.bc();h=Math.max(h,s.x),n+=s.y}const o=.4*e.x,a=e.x-o-(this.Gk+this.Uk+this.Yk+this.$k);let l=!0;a<50?l=!1:h>a&&(t.forEach((t=>{const i=t.zh.rn(),s=t.zh.bc().x/i.length,e=Math.floor(a/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.zh.tn(s).Nh()}})),n=0,h=t.reduce(((t,i)=>{const s=i.zh.bc();return n+=s.y,Math.max(t,s.x)}),0));const u=this.jk===exports.PyramidLabelSide.Left?this.Gn.left+r.left:this.Gn.left+e.x,c=this.jk===exports.PyramidLabelSide.Left?-1:1,d=e.y-n;d<0&&(l=!1);const f=l?h+this.$k+this.Yk+this.Uk+this.Gk:0,A=e.x-f,g=this.jk===exports.PyramidLabelSide.Left?this.Gn.left+f:this.Gn.left,p=this.jk===exports.PyramidLabelSide.Left?g+A:this.Gn.left+A,v=(g+p)/2;bd(t,.001,this._k,{x:A,y:e.y},this.Gn,this.kk,this.Ck,v,r);const y=t.filter((t=>l&&0!==t.fS.lu().length?(t.zh.setVisible(!0),!0):(t.zh.setVisible(!1),!1))),m=d/(y.length+1);let x=this.Gn.bottom+e.y-(this.Ck==exports.PyramidSliceModes.VariableHeight?m:0)+r.bottom;this.Ck==exports.PyramidSliceModes.VariableWidth&&(x-=n/t.length/2);const S=v,b=this.jk===exports.PyramidLabelSide.Left?g:p,M=this.Gn.bottom+e.y+r.bottom,w=this.Gn.bottom+r.bottom;for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].setVisible(!1);for(let t=0;t<y.length;t+=1){const i=y[t],s=i.fS,e=i.zh,r=e.bc(),h=_d(s,this.jk,this.Gk);if(this.Ck==exports.PyramidSliceModes.VariableHeight){i.zh.sr({x:u,y:x}).Zl({x:c,y:1});const t=x-.5*r.y,s={x:this.jk===exports.PyramidLabelSide.Left?Math.min(Ne(S,b,(t-M)/(w-M))-this.Uk,h.x):Math.max(Ne(S,b,(t-M)/(w-M))+this.Uk,h.x),y:t},n={x:this.jk===exports.PyramidLabelSide.Left?e.Vl().x+r.x+this.$k:e.Vl().x-r.x-this.$k,y:t};this.Xk([h,s,n]),x-=r.y+m}else{const t=this.jk===exports.PyramidLabelSide.Left?u+r.x+this.$k:u-r.x-this.$k;i.zh.sr({x:u,y:h.y}).Zl({x:c,y:0}),this.Xk([h,{x:t,y:h.y}])}}}getMinimumSize(){return a(500,300)}Xk(t){let i;for(let t=0;t<this.Hk.length;t+=1)if(!this.Hk[t].getVisible()){i=this.Hk[t].setVisible(!0);break}void 0===i&&(i=this.Bk.Np(this.eA,void 0,[Ja.InternalUI]).cr(this.Wk),this.Hk.push(i)),i.Vi().bu(t)}}class Td extends Md{constructor(){super(...arguments),this.zk=rd.Name,this.sC=exports.SliceLabelIndices.LabelsInsideSlices}Nk(t,i,s,e,r){const h=this.Gn.left+e.x/2;bd(t,.001,this._k,e,this.Gn,this.kk,this.Ck,h,r);for(let i=0;i<t.length;i+=1){const s=t[i].fS,e=t[i].zh,r=kd(s);r&&e.sr(r).Yl(0).Wl(0)}}getMinimumSize(){return a(200,200)}}const Fd={LabelsOnSides:Cd,LabelsInsideSlices:Td};var Id,Ld;exports.PyramidLabelSide=void 0,(Id=exports.PyramidLabelSide||(exports.PyramidLabelSide={}))[Id.Right=0]="Right",Id[Id.Left=1]="Left",exports.SpiderWebMode=void 0,(Ld=exports.SpiderWebMode||(exports.SpiderWebMode={}))[Ld.Normal=0]="Normal",Ld[Ld.Circle=1]="Circle";class Pd{constructor(t,i,s,e,r,h,n,o,a){this.Rr=!1,this.eC=gh.fitting({start:!1}),this.rC=t=>this.axisScale.Xt(t,Ks.Numeric),this.formatValue=t=>this.rC(t,{start:this.axisScale.$,end:this.axisScale.U}),this.hC=t,this.Cn=i,this.scale=s,this.chart=e,this.tag=r,this.axisScale=Q.d1({scale1DConstructor:H,dimension:"x"}).W(0,1),this.nC=h,this.eC=o,a&&(this.rC=a),n&&this.setInterval(n),this.oC=this.hC.dr(this.scale).setPointerEvents(!1),this.aC=this.Cn._n(this.scale).tn(this.tag).setPointerEvents(!1),this.lC=this.hC.Np(this.scale,void 0,[Ja.InternalUI]).cr(this.chart.getNibStyle()),this.nC.ks([this.aC])}Nk(t,i,s,e,r,h,n){const o=i.length,l=i[s>0?s-1:o-1],u=i[s],c=i[s<o-1?s+1:0],d=this.chart.getNibLength();this.oC.gr(t).Ar(u).cr(this.chart.getAxisStyle()),this.lC.Vi().bu(h===exports.SpiderWebMode.Normal?[ms(u,l,Wt(.5*d/Ls(Ds(l,u)),0,1)),u,ms(u,c,Wt(.5*d/Ls(Ds(c,u)),0,1))]:((t,i,s,e,r=2)=>{const h=e/s,n=[];for(let o=-e/2;o<=e/2;o+=r){const r=h*(o/e)+i,l=a(t.x+Math.cos(r)*s,t.y+Math.sin(r)*s);n.push(l)}return n})(t,e,r,d)),n?this.aC.setVisible(!0).sr(Bs(u,a(n.paddingX,n.paddingY))).Yl(n.alignmentX).Wl(n.alignmentY):this.aC.setVisible(!1)}pn(t){if(this.eC&&!this.Rr){const i=this.eC.apply({axis:this,curStart:this.axisScale.getInnerStart(),curEnd:this.axisScale.getInnerEnd(),seriesDataRange:t});i&&this.axisScale.W(i.start,i.end)}}getLabelSize(){return this.aC.Ch(this.chart.getAxisLabelFont()).qe(this.chart.getAxisLabelStyle()).Nh().kt()}dispose(){this.oC&&this.oC.dispose(),this.aC&&this.aC.dispose(),this.lC&&this.lC.dispose()}getTag(){return this.tag}setInterval(t){const{start:i,end:s,stopAxisAfter:e}=t;return void 0!==e&&(this.Rr=e),this.axisScale.W(null!=i?i:this.axisScale.getInnerStart(),null!=s?s:this.axisScale.getInnerEnd()),this.chart.pi.Bs(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.rC=t,this.chart.pi.Bs(),this}setScrollStrategy(t){return this.eC=Th(t),this.chart.pi.Bs(),this}getScrollStrategy(){return this.eC}}const Bd=(t,i,s,e,r,h)=>(t.alignmentX=(r+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=r%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(r)*h,t.paddingY=Math.sin(r)*h,t),Dd=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let i=!1;const s=t.chart.getAxes();if(s.length>1){const t=s[0].getInterval();i=s.some((i=>{const s=i.getInterval();return s.start!==t.start||s.end!==t.end}))}return i?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};class Ed extends Su{constructor(t,i,s,e,r,h,n,o,a,l,u,c){super(t,a,l,c),this.Rs="Spider Series",this.uC=new Map,this.cC=new Map,this.ds=exports.HighlightModes.onHover,this.z_=8,this._l=0,this.dC=(()=>{const t=bt((()=>{}));let i;return(s,e,r,h)=>{const n=null==h?void 0:h.onStart,o=null==h?void 0:h.onCompleted,a=(null==h?void 0:h.easing)||xt.ease,l=(null==h?void 0:h.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,r(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,r(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{r(t)})),i=u;u.addEventListener("end",(()=>{i=void 0})),n&&u.addEventListener("start",n),o&&u.addEventListener("end",o)}})(),this.fC={},this.AC={},this.Qk=this.getVisible(),this.gC=1,this.pC=((t,i)=>{const s=bt((()=>{}));let e,r,h=1;return(n,o,a)=>{if(n===r)return;r=n;const l=(null==a?void 0:a.easing)||xt.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&h&&(e=s(u,l)([[h,0]],(([i])=>{h=i,t(h)})),e.addEventListener("end",(()=>{e=void 0,i(!1)})),h=0,i(!1)):o?(i(!0),e=s(u,l)([[h,1]],(([i])=>{h=i,t(h)})),e.addEventListener("end",(()=>{e=void 0}))):(h=1,i(!0))}})((t=>{this.gC=t,this.Ws.pi.Bs()}),(t=>{super.setVisible(t)})),this.vC=!1,this.D=new yt,this.chart=t,this.Ws=i,this.V_=e,this.yC=r,this.zm=h,this.mC=n,this.xC=o,this.scale=s,this.SC=Ei(l.spiderSeriesFillStyle,u),this.bC=Ei(l.spiderSeriesStrokeStyle,u),this.MC=Ei(l.spiderSeriesPointFillStyle,u)}wC(){return this.vC}Qi(t,i,s){const e=this.xC(i);if(void 0!==e&&this.uC.has(e.tag)){const t=this.uC.get(e.tag),i=this.mC(e.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:e.tag,value:t}}}xp(){return this.rp&&this.uC.size>0&&this.getVisible()}addPoints(...t){const i=0===this.uC.size;i||this.chart.pi.La(jh.Ro),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.yC(s)}if(this.chart.getAnimationsEnabled()&&void 0!==this.fC){let s;t.forEach((t=>this.cC.set(t.axis,t.value))),this.dC(0,1,(t=>{this.cC.forEach(((i,e)=>{const r=(null==s?void 0:s.get(e))||0;this.uC.set(e,r+t*(i-r)),this.Ws.pi.Bs()}))}),{easing:this.fC.easing,durationMs:this.fC.durationMs,onStart:()=>{this.vC=i,s=new Map(this.uC)},onCompleted:()=>{this.vC=!1}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.uC.set(s,t[i].value),this.cC.set(s,t[i].value)}return this.Ws.Bs(),this}getValue(t,i=!1){if(this.chart.getAxis(t))return i?this.uC.get(t):this.cC.get(t)}setAnimationAddPoints(t,i){return this.fC=t?{easing:t,durationMs:i}:void 0,this.Ws.Bs(),this}setVisibleStateChangedAnimation(t,i){return this.AC=t?{easing:t,durationMs:i}:void 0,this.Ws.Bs(),this}setFillStyle(t){return this.SC="function"==typeof t?t(this.SC):t,this.fS&&(this.fS.qe(this.SC),this.Ws.Bs()),this}getFillStyle(){return this.SC}setStrokeStyle(t){return this.bC="function"==typeof t?t(this.bC):t,this.fS&&(this.fS.Ke(this.bC),this.Ws.Bs()),this}getStrokeStyle(){return this.bC}setPointFillStyle(t){return this.MC="function"==typeof t?t(this.MC):t,this.N_&&(this.N_.Rd(this.MC),this.Ws.Bs()),this}getPointFillStyle(){return this.MC}setPointSize(t){return this.z_=t,this.N_&&this.N_.Hd(t),this}getPointSize(){return this.z_}getPointShape(){return this.V_}setPointRotation(t){return this._l=t,this.N_&&this.N_.Gd(t),this.Ws.Bs(),this}getPointRotation(){return this._l}ir(){if(super.ir(),!this.ci){const t=new Array(this.zm.length);for(let i=0;i<this.zm.length;i+=1){const s=this.zm[i].getInterval().start,e=this.uC.get(this.zm[i].tag);t[i]=void 0!==e?this.mC(this.zm[i].tag,s+this.gC*(e-s)):this.mC(this.zm[i].tag,s)}Mi(t),t.length>=3&&(this.fS||(this.fS=this.Ws.Tc(this.scale,_n.Simple).Ke(this.bC).qe(this.SC).Ii(this.getHighlight()),this._s(this.fS)),this.fS.au(t),this.N_||(this.N_=this.Ws.zd(this.scale).Od(ae).cr(Tt).Hd(this.z_).Vd(this.V_).Gd(this._l).Rd(this.MC).Ii(this.getHighlight()),this._s(this.N_)),this.N_.Ed(new $n({schema:{x:{pattern:null},y:{pattern:null}}}).appendJSON(t),{x:"x",y:"y"}))}}er(){return{fill:this.SC,stroke:this.bC}}js(){return this.Es||this.V_}rr(t,i){return t.Ii(i),this.Ws.Bs(),this}setVisible(t){var i,s;return this.Qk=t,this.pC(t,this.chart.getAnimationsEnabled()&&void 0!==this.AC,{easing:null===(i=this.AC)||void 0===i?void 0:i.easing,durationMs:null===(s=this.AC)||void 0===s?void 0:s.durationMs}),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Rd=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Od=t=>t.aC.mc(),zd=t=>t.mc(),Vd=(t,i,s,e)=>t.sc(0).sr(s).Qu(90).Ar(-270).rc(i===exports.SpiderWebMode.Circle?void 0:e.length),Nd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Gd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},$d=()=>{Gd.alignmentX=0,Gd.alignmentY=0,Gd.paddingX=0,Gd.paddingY=0};class Ud extends fl{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("spiderChart bg",0),e,i.pi.bi.spiderChartBackgroundFillStyle,i.pi.bi.spiderChartBackgroundStrokeStyle,i.pi.bi.spiderChartTitleFont,i.pi.bi.spiderChartTitleFillStyle,i.pi.bi.spiderChartTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.zm=[],this._C=[],this.kC=[],this.eC=gh.fitting({start:!1}),this.CC=!0,this.TC=Dd,this.FC=Bd,this.IC=exports.SpiderWebMode.Normal,this.LC=4,this.PC=this.bi.spiderChartWebStyle,this.BC=this.bi.spiderChartScaleLabelFillStyle,this.DC=this.bi.spiderChartScaleLabelShadow,this.EC=this.bi.spiderChartScaleLabelFont,this.RC=5,this.OC=this.bi.spiderChartAxisLabelFillStyle,this.zC=this.bi.spiderChartAxisLabelFont,this.VC=5,this.NC=this.bi.spiderChartAxisStrokeStyle,this.GC=this.bi.spiderChartAxisNibStrokeStyle,this.$C=10,this.UC=p(),this.hasAxis=t=>this.zm.reduce(((i,s)=>i||s.tag===t),!1),this.YC=()=>{const t=this.zm.map(Od).concat(this.kC.map(zd));return ds(t)},this.jC=()=>this.HC._d(this.eA).setPointerEvents(!1),this.WC=t=>t.dispose(),this.XC=()=>this.jf._n(this.eA).setPointerEvents(!1),this.ZC=t=>t.dispose(),this.JC=t=>{this.CC&&!this.hasAxis(t)&&this.addAxis(t)},this.mC=(t,i)=>{for(const s of this.zm)if(s.tag===t){const t=Math.max(Math.min((i-s.axisScale.getInnerStart())/(s.axisScale.getInnerEnd()-s.axisScale.getInnerStart()),1),0);return ms(s.oC.Yt(),s.oC.$t(),t)}},this.xC=t=>{if(0===this.zm.length)return;const i=Ds(this.translateCoordinate(t,this.coordsRelative),this.zm[0].oC.Yt()),s=Math.atan2(i.y,i.x);let e,r=rs;for(const t of this.zm){const i=Ds(t.oC.$t(),t.oC.Yt()),h=Math.atan2(i.y,i.x),n=Math.abs(s-h);n<r&&(e=t,r=n)}return e},this.D=new yt,this.pi.La(jh.ko),this.a_=i.Rm("spiderChart series bg",0),this.HC=i.Om("spiderChart web shapes",0),this.QC=i.Om("spiderChart axis bg",1),this.bx=i.Om("spiderChart plotting",2),this.jf=i.Om("spiderChart fg",3),this.nC=this.vs.aA().Ps(this.bi.effectsText),this.Yr.tn("Spider Chart"),this.yv=this.a_._d(this.eA).qe(this.bi.spiderChartSeriesBackgroundFillStyle).Ke(Tt).Qu(90).Ar(-270).sc(0),this.mv=this.a_._d(this.eA).qe(ae).Ke(this.bi.spiderChartSeriesBackgroundStrokeStyle).Qu(90).Ar(-270).sc(0),super.vv(this.yv,this.mv);const a=i.Ym(),l=Zt(h?h.cursorBuilder:void 0,Ul);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),this,"show-pointed",Yd,(()=>0)),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.jg(r,this.eA);const u={backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(u)}getSeries(){return this.fv}getAxes(){return this.zm}getAxis(t){const i=this.zm.find((i=>i.getTag()===t));if(!i)throw new Error(`Axis with tag "${t}" was not found.`);return i}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Ul){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}addAxis(t){const i=this.zm.find((i=>i.tag===t));if(i)return i;const s=new Pd(this.QC,this.jf,this.eA,this,t,this.nC,this.KC,this.eC,this.scaleLabelFormatter);return this.zm.push(s),this.nC.ks(this.zm.map((t=>t.aC))),this.pi.Bs(),s}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:exports.PointShape.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.fv.length,e=new Ed(this,this.bx,this.eA,i,this.JC,this.zm,this.mC,this.xC,this.gv,this.bi,s,this.pi.vs);return this.xv(e,t),e}getSeriesCount(){return this.fv.length}setWebMode(t){return this.IC=t,this.pi.Bs(),this}getWebMode(){return this.IC}setWebCount(t){return this.LC=t,this.pi.Bs(),this}getWebCount(){return this.LC}setWebStyle(t){return this.PC="function"==typeof t?t(this.PC):t,this.pi.Bs(),this}getWebStyle(){return this.PC}setScaleLabelStyle(t){return this.BC="function"==typeof t?t(this.BC):t,this.pi.Bs(),this}getScaleLabelStyle(){return this.BC}setScaleLabelShadow(t){return this.DC=t,this.pi.Bs(),this}getScaleLabelShadow(){return this.DC}setScaleLabelFont(t){return this.EC="function"==typeof t?t(this.EC):t,this.pi.Bs(),this}getScaleLabelFont(){return this.EC}setScaleLabelPadding(t){return this.RC=t,this.pi.Bs(),this}getScaleLabelPadding(){return this.RC}setScaleLabelStrategy(t){return this.TC=t,this.pi.Bs(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.zm.forEach((i=>{i.setScaleLabelFormatter(t)})),this.pi.Bs(),this}setAxisLabelStyle(t){return this.OC="function"==typeof t?t(this.OC):t,this.pi.Bs(),this}getAxisLabelStyle(){return this.OC}setAxisLabelFont(t){return this.zC="function"==typeof t?t(this.zC):t,this.pi.Bs(),this}getAxisLabelFont(){return this.zC}setAxisLabelEffect(t){return this.nC.Ps(t),this.pi.Bs(),this}getAxisLabelEffect(){return this.nC.Ds()}setAxisLabelPadding(t){return this.VC=t,this.pi.Bs(),this}getAxisLabelPadding(){return this.VC}setAxisLabelStrategy(t){return this.FC=t,this.pi.Bs(),this}setAxisStyle(t){return this.NC="function"==typeof t?t(this.NC):t,this.pi.Bs(),this}getAxisStyle(){return this.NC}setNibStyle(t){return this.GC="function"==typeof t?t(this.GC):t,this.pi.Bs(),this}getNibStyle(){return this.GC}setNibLength(t){return this.$C=t,this.pi.Bs(),this}getNibLength(){return this.$C}setAutoAxis(t){return this.CC=t,this}getAutoAxis(){return this.CC}setScrollStrategy(t){return this.eC=Th(t),this.zm.forEach((i=>i.setScrollStrategy(t))),this.pi.Bs(),this}setAxisInterval(t){return this.KC=t,this.zm.forEach((i=>i.setInterval(t))),this}ir(t){super.ir(t);const i=this.zm.length,s=Ha.tp(this.Yr,this.Wg),e=this.Os.reduce(((t,i)=>{const e=i.Nh(s,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,e);const r=a(this.eA.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.eA.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+s)),h=a(r.x-e.left-e.right,r.y-e.top-e.bottom),n=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.FC){const t=Math.min(h.x,h.y)/2;for(let s=0;s<i;s+=1){const e=Rd(s,i),r=Math.cos(e),h=Math.sin(e),o=this.zm[s].getLabelSize();$d();const l=this.FC(Gd,s,i,this.zm[s].tag,e,this.VC),u=a(r*t+l.paddingX,h*t+l.paddingY);r>0?n.right=Math.max(n.right,u.x+.5*(1-l.alignmentX)*o.x-t):n.left=Math.max(n.left,-u.x+.5*(l.alignmentX+1)*o.x-t),h>0?n.top=Math.max(n.top,u.y+.5*(1-l.alignmentY)*o.y-t):n.bottom=Math.max(n.bottom,-u.y+.5*(l.alignmentY+1)*o.y-t)}}this.zm.forEach((t=>{const i=!this.getSeries().some((t=>t.wC()))&&this.getSeriesCount()>1,s=this.qC(t.tag,i);s&&t.pn(s)}));const o=a(this.eA.x.getInnerStart()+this.Gn.left+e.left+h.x/2,this.eA.y.getInnerStart()+this.Gn.bottom+e.bottom+h.y/2),l=Math.min(h.x/2-(n.left+n.right)/2,h.y/2-(n.bottom+n.top)/2);this.UC=p(this.ot.left+this.Gn.left+n.left,this.ot.top+this.Gn.top+s+n.top,this.ot.right+this.Gn.right+n.right,this.ot.bottom+this.Gn.bottom+n.bottom),this.Nk(o,l);for(const t of this.fv)t.cp();for(const t of this.fv)t.ir();this.jm.ir(!1,this.fv,void 0),super.Yg(),this.Os.forEach((t=>t.ir(s,this.Gn)));for(const t of this.fv)t.dp()}dispose(){return this.a_.G(),this.HC.G(),this.QC.G(),this.bx.G(),this.jf.G(),this.jm.G(),super.dispose()}getMinimumSize(){return a(this.UC.left+this.UC.right+100,this.UC.bottom+this.UC.top+100)}Nk(t,i){const s=this.zm.length,e=[];for(let r=0;r<s;r+=1){const h=Rd(r,s),n=a(t.x+Math.cos(h)*i,t.y+Math.sin(h)*i);e.push(n)}Vd(this.yv,this.IC,t,e),Vd(this.mv,this.IC,t,e),this.yv.Ku(i),this.mv.Ku(i),((t,i,s,e,r,h,n,o)=>{const a=t.length,l=h.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];Vd(o,s,e,h);const u=r*((l+1)/i);o.Ku(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this._C,this.LC,this.IC,t,i,e,this.jC,this.WC);for(const t of this._C)t.qe(ae).Ke(this.PC);for(let r=0;r<s;r+=1){const h=this.zm[r],n=Rd(r,s);$d();const o=void 0!==this.FC?this.FC(Gd,r,s,this.zm[r].tag,n,this.VC):void 0;h.Nk(t,e,r,n,i,this.IC,o)}((t,i,s,e,r,h,n,o,l)=>{const u=r.length,c=t.length;let d=0;void 0!==i&&r.forEach(((r,l)=>{var f,A,g,p;const v=r.tag,y=Rd(l,u);for(let m=0;m<s;m+=1){Nd.alignmentX=0,Nd.alignmentY=0,Nd.paddingX=0,Nd.paddingY=0;const x=i({...Nd,chart:r.chart,axis:r,axisIndex:l,axisCount:u,axisTag:v,axisAngle:y,webIndex:m,webCount:s,labelPadding:e});if(void 0!==x){d>=c&&t.push(o());const i=t[d];d+=1;const e=(s-m)/s,u=r.formatValue(r.axisScale.getInnerStart()+e*(r.axisScale.getInnerEnd()-r.axisScale.getInnerStart())),v=ms(h,n[l],e);i.sr(Bs(v,a(null!==(f=x.paddingX)&&void 0!==f?f:0,null!==(A=x.paddingY)&&void 0!==A?A:0))).Yl(null!==(g=x.alignmentX)&&void 0!==g?g:0).Wl(null!==(p=x.alignmentY)&&void 0!==p?p:0).tn(u)}}}));for(let i=d;i<c;i+=1)l(t[i]);t.length=d})(this.kC,this.TC,this.LC,this.RC,this.zm,t,e,this.XC,this.ZC);for(const t of this.kC)t.qe(this.BC).Ch(this.EC).qh(this.DC)}qC(t,i){let s,e;const r=this.getAxis(t);for(const t of this.fv){const h=t.getValue(r.tag,i);void 0!==h&&(s=void 0===s?h:Math.min(s,h),e=void 0===e?h:Math.max(e,h))}if(void 0!==s&&void 0!==e)return f(s,e)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Yd=(t,i,s)=>eA(i,[[{component:i.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[i.axis],[{text:t.getAxis(i.axis).formatValue(i.value),font:{weight:"bold"}}]]),jd={Rr:!1,Or:0,zr:!1,Nr:0,Vr:!1,Gr:0,$r:0,Rh:gh.fitting({})},Hd=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Wd=(t,i,s,e,r,h,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,r];"spark-line"===a&&ef(t,i,u,h,n,o),"spark-bar"===a&&rf({...t,winLoss:!1},i,u,h,n,o),"spark-win-loss"===a&&rf({...t,winLoss:!0},i,u,h,n,o),"spark-area"===a&&hf(t,i,u,h,n,o),"spark-pie"===a&&nf(t,i,u,h,n,o)},Xd=(t,i,s,e)=>({x:Jd(t.x,i.x,s.x,e),y:Qd(t.y,i.y,s.y,e)}),Zd=(t,i,s,e)=>({position:Jd(t.position,i.x,s.x,e),high:Qd(t.high,i.y,s.y,e),low:Qd(t.low,i.y,s.y,e)}),Jd=(t,i,s,e)=>{const r=Wt(t,i,i+s);return e[0].x+e[1].x*(r-i)/s},Qd=(t,i,s,e)=>{const r=Wt(t,i,i+s);return e[0].y+e[1].y*(r-i)/s},Kd=(t,i,s,e,r,h,n,o)=>{for(const a of t)"point"===a.type&&qd(a,i,s,r,h,n,o),"axis-band"===a.type&&tf(a,s,r,h,n,o),"constant-line"===a.type&&sf(a,s,e,r,h,n,o)},qd=(t,i,s,e,r,h,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Xd(o,s,e,r),((t,i)=>{const s=i[0],e=i[1],r=t.x,h=t.y;return s.x<=r&&r<=s.x+e.x&&s.y<=h&&h<=s.y+e.y})(d,r)))&&h.pointSet.add().Vd(void 0!==l?l:exports.PointShape.Circle).Gd(c||0).Hd(u||5).Rd(a||n.sparkPointChartFillStyle).Ed((new $n).appendSample(d),{x:"x",y:"y"})},tf=(t,i,s,e,r,h)=>{const{axis:n,start:o,end:l,fillStyle:u,strokeStyle:c}=t;let d=a(hs,rs),f=a(hs,rs);"x"===n&&(d=Xd({x:o,y:hs},i,s,e),f=Xd({x:l,y:rs},i,s,e)),"y"===n&&(d=Xd({x:hs,y:o},i,s,e),f=Xd({x:rs,y:l},i,s,e));const A=e[0],g=e[1],p=Wt(d.x,A.x,A.x+g.x),v=Wt(d.y,A.y,A.y+g.y),y=Wt(f.x,A.x,A.x+g.x),m=Wt(f.y,A.y,A.y+g.y);r.rect.add().tu(p).iu(v).Z(a(y-p,m-v)).qe(u||h.sparkChartBandFillStyle).Ke(c||h.sparkChartBandStrokeStyle).Ke(Tt)},sf=(t,i,s,e,r,h,n)=>{const{axis:o,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,p=[];if("y"===o&&d<=c&&c<=f){const t=Xd(a(A,c),{x:A,y:d},e,r),i=Xd(a(g,c),{x:A,y:d},e,r);p.push([t,i])}if("x"===o&&A<=c&&c<=g){const t=Xd(a(c,d),{x:A,y:d},e,r),i=Xd(a(c,f),{x:A,y:d},e,r);p.push([t,i])}p.length>0&&h.line.add().cr(u||n.sparkChartConstantLineStrokeStyle).gr(p[0][0]).Ar(p[0][1])},ef=(t,i,s,e,r,h)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&r.Ea&&Nt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=rs,c=hs,d=rs,f=hs;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>Xd(t,{x:u,y:d},A,s)));i.lineSet.add().Ii(h).cr(n||e.sparkLineChartStrokeStyle).Vi().bu(g),a&&Kd(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},rf=(t,i,s,e,r,h)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,p=f/d*1;let v=rs,y=hs;if(A)v=-1,y=1;else for(const t of n)v=Math.min(v,t),y=Math.max(y,t);const m={x:0,y:A?-1:Math.min(0,v)},x={x:1*n.length+(n.length-1)*p,y:A?2:Math.max(y,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*p,y:A?t>=g?1:0:t},r=Xd({x:1*i+i*p,y:A?t>=g?0:-1:0},m,x,s),h=Xd(e,m,x,s);return{value:t,position:r,width:h.x-r.x,height:h.y-r.y}})).forEach((t=>{var s;i.rect.add().Ii(h).sr(t.position).eu(t.height).su(t.width).qe((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Ke(a||e.sparkBarChartStrokeStyle)}))},hf=(t,i,s,e,r,h)=>{const{data:n,fillStyle:o,strokeStyle:a,markers:l}=t,c=n.length;c>1e4&&r.Ea&&Nt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=rs,f=hs,A=rs,g=hs;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const p={x:f-d,y:g-A},v=[],y=[];for(const t of n){const i=u(t.x,t.y,A);v.push(Zd(i,{x:d,y:A},p,s)),y.push(Xd(t,{x:d,y:A},p,s))}i.junction.add().Ii(h).Vi().bu(v).qe(o||e.sparkAreaChartFillStyle),i.lineSet.add().Ii(h).Vi().bu(y).cr(a||e.sparkAreaChartStrokeStyle),l&&Kd(l,y,{x:d,y:A},{x:f,y:g},p,s,i,e)},nf=(t,i,s,e,r,h)=>{const{data:n,strokeStyle:o}=t,l=n.map((t=>"number"==typeof t?t:t.value)),u=n.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=Xd(a(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const r=t/c*360;i.arc.add().Ii(h).sr(d).Ku(A).sc(0).Qu(g).Ar(g+r).qe(u[s]||Ei(e.sparkPieChartFillStyle,s)).Ke(o||e.sparkPieChartStrokeStyle),g+=r}))},of={XY:pc,Spider:Ul,BarChart:Yl,Map:Xl,Polar:Wl,D3:Dl},af={Column:go,Row:po},lf=(t,i)=>{const s=(t=>{const i=b(0,0,0),s=b(255,255,255),e=new de({color:t.uiStrokeColorContrastHigh}),r=new de({color:t.uiStrokeColorContrastMedium}),h=new de({color:t.uiStrokeColorContrastLow}),n=new L({family:t.fontFamily,weight:"normal",style:"normal"}),o=t.isDark?b(0,0,0,255):void 0,a=n.setSize(18*t.fontScaler),l=n.setSize(16*t.fontScaler),u=n.setSize(14*t.fontScaler),c=n.setSize(10*t.fontScaler),d=n.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),f=n.setSize(13*t.fontScaler),A=new ar({thickness:2,fillStyle:h}),g=new de({color:t.dataHighlightOverlayColor}),p=new ar({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),v=t.dataColorPalette.map((t=>new de({color:t.stroke}))),y=t=>v[t%v.length],m=v.map((t=>new ar({thickness:2,fillStyle:t}))),x=t=>m[t%m.length],S=t.dataColorPalette.map((t=>new de({color:t.border}))).map((t=>new ar({thickness:2,fillStyle:t}))),w=t=>S[t%S.length],_=t.dataColorPalette.map((t=>{const i=t.area;return new N({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),k=t=>_[t%_.length],C=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new N({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),T=t=>C[t%C.length],F=t.dataColorPalette.map((t=>{const i=t.area;return new N({angle:180,stops:[{color:nt(i,b(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:nt(i,b(0,0,0,i.getA()),.3),offset:1}]})})),I=t=>F[t%F.length],P=t.dataColorPaletteInverted.map((t=>new de({color:t.border}))).map((t=>new ar({thickness:2,fillStyle:t}))),B=t=>P[t%P.length],D=new de({color:t.dataColorPositive}),E=new de({color:t.dataColorNegative}),R=new ar({thickness:1,fillStyle:new de({color:t.dataStrokeColorContrastHigh.setA(50)})}),O=new ar({thickness:2,fillStyle:t.axisLineFillStyle}),z=new de({color:b(0,0,0,1)}),V=new ar({thickness:1,fillStyle:t.axisGridMajorFillStyle}),G=new ar({thickness:1,fillStyle:t.axisTickMajorFillStyle}),$=u,U=t.axisLabelMajorFillStyle,Y=new ar({thickness:1,fillStyle:t.axisGridMinorFillStyle}),j=new ar({thickness:1,fillStyle:t.axisTickMinorFillStyle}),H=c,W=U,X=Wo,Z=new jo({gridStrokeStyle:V,tickStyle:G,tickLength:7,tickPadding:5,labelFont:$,labelFillStyle:U,labelShadow:o}),J=new jo({gridStrokeStyle:Y,tickStyle:j,tickLength:4,tickPadding:10,labelFont:H,labelFillStyle:W,labelShadow:o}),Q=new ka({extremeTickStyle:X,majorTickStyle:Z,minorTickStyle:J.setLabelFillStyle(ae)}),K=new ya({greatTickStyle:Wo,majorTickStyle:Z,minorTickStyle:J}),q=K,tt=K,it=new ra({majorTickStyle:Z,minorTickStyle:J}),st=new de({color:t.dataHighlightOverlayColor}),et=new ar({thickness:1,fillStyle:r}),rt=new ar({thickness:2,fillStyle:r}),ht=t=>new nr.Triangulated({shape:"sphere",size:10,fillStyle:v[t%v.length]}),ot=v[0],at=t.uiTextFillStyle,lt=t.legendBackgroundFillStyle,ut=new ar({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ct=Ii(t.legendButtonDefaultColor),dt=Ii(t.isDark?b(70,70,70,255):b(170,170,170,255)),ft=new de({color:t.isDark?b(70,70,70,255):b(170,170,170,255)}),At=new ar({thickness:1,fillStyle:e}),gt=new dr({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:ur.DashedEqual,patternScale:3}),pt=new ar({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,yt=new ar({thickness:2,fillStyle:new de({color:t.zoomBandChartSplitterColor})}),mt=new de({color:t.uiBackgroundColor}),xt=new ar({thickness:1,fillStyle:new de({color:t.isDark?s:i})});let St={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:Tt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new ar({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),panelPadding:7,chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:Tt,chartXYTitleFont:a,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:o,chartXYTitleMargin:5,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:A,chartXYZoomingRectangleFillStyle:g,chartXYZoomingRectangleStrokeStyle:p,lineSeriesStrokeStyle:x,pointLineSeriesStrokeStyle:x,pointLineSeriesFillStyle:y,pointSeriesFillStyle:y,pointSeriesStrokeStyle:xt,ellipseSeriesFillStyle:y,ellipseSeriesStrokeStyle:x,polygonSeriesFillStyle:y,polygonSeriesStrokeStyle:x,rectangleSeriesFillStyle:y,rectangleSeriesStrokeStyle:Tt,segmentSeriesStrokeStyle:x,boxSeriesBodyFillStyle:y(0),boxSeriesBodyStrokeStyle:Tt,boxSeriesStrokeStyle:new ar({thickness:1,fillStyle:v[0]}),boxSeriesMedianStrokeStyle:new ar({thickness:1,fillStyle:new de({color:i})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:D,ohlcCandleBodyFillStyleNegative:E,ohlcCandleTailStrokeStylePositive:new ar({thickness:1,fillStyle:new de({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new ar({thickness:1,fillStyle:new de({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new ar({thickness:2,fillStyle:D}),ohlcBarStrokeStyleNegative:new ar({thickness:2,fillStyle:E}),heatmapGridSeriesFillStyle:y,heatmapGridSeriesWireframeStyle:R,heatmapScrollingGridSeriesFillStyle:y,heatmapScrollingGridSeriesWireframeStyle:R,heatmapGridSeriesContourStrokeStyle:new ar({thickness:1,fillStyle:new de({color:b(0,0,0)})}),heatmapGridSeriesContourLabelColor:fe(at)?at.getColor():ot.getColor(),heatmapGridSeriesContourLabelFont:f,heatmapGridSeriesContourLabelShadow:o,areaRangeSeriesFillStyle:k,areaRangeSeriesStrokeStyle:w,areaRangeSeriesFillStyleInverted:T,areaRangeSeriesStrokeStyleInverted:B,areaSeriesBipolarHighFillStyle:k,areaSeriesBipolarHighStrokeStyle:w,areaSeriesBipolarLowFillStyle:T,areaSeriesBipolarLowStrokeStyle:B,areaSeriesPositiveFillStyle:k,areaSeriesPositiveStrokeStyle:w,areaSeriesNegativeFillStyle:T,areaSeriesNegativeStrokeStyle:B,xAxisTitleFont:l,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:O,xAxisOverlayStyle:z,xAxisZoomingBandFillStyle:g,xAxisZoomingBandStrokeStyle:Tt,xAxisNumericTicks:Q,xAxisDateTimeTicks:q,xAxisTimeTicks:it,yAxisTitleFont:l,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:O,yAxisOverlayStyle:z,yAxisZoomingBandFillStyle:g,yAxisZoomingBandStrokeStyle:Tt,yAxisNumericTicks:Q,yAxisDateTimeTicks:tt,yAxisTimeTicks:it,bandFillStyle:st,bandStrokeStyle:et,constantLineStrokeStyle:rt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:Tt,barChartTitleFont:a,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:o,barChartSeriesBackgroundFillStyle:ae,barChartSeriesBackgroundStrokeStyle:Tt,barChartBarFillStyle:y,barChartBarStrokeStyle:new ar({thickness:1,fillStyle:h}),barChartValueAxisTitleFont:l,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:O,barChartValueAxisTicks:Q.setMajorTickStyle((t=>t.setGridStrokeStyle(Tt))).setMinorTickStyle((t=>t.setGridStrokeStyle(Tt))),barChartCategoryAxisTitleFont:l,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:O,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,tickStyle:Q.majorTickStyle.tickStyle,tickLength:0,labelShadow:o},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:Tt,chart3DTitleFont:a,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:o,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:A,chart3DBoundingBoxStrokeStyle:Tt,xAxis3DTitleFont:l,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:O,xAxis3DNumericTicks:Q,xAxis3DDateTimeTicks:K,xAxis3DTimeTicks:it,yAxis3DTitleFont:l,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:O,yAxis3DNumericTicks:Q,yAxis3DDateTimeTicks:K,yAxis3DTimeTicks:it,zAxis3DTitleFont:l,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:O,zAxis3DNumericTicks:Q,zAxis3DDateTimeTicks:K,zAxis3DTimeTicks:it,lineSeries3DStrokeStyle:x,pointLineSeries3DStrokeStyle:x,pointLineSeries3DPointStyle:ht,pointSeries3DPointStyle:ht,pointCloudSeries3DPointStyle:t=>new nr.Pixelated({size:5,fillStyle:v[t%v.length]}),surfaceGridSeries3DFillStyle:y,surfaceGridSeries3DWireframeStyle:R,surfaceGridSeriesContourStrokeStyle:m[0],surfaceScrollingGridSeries3DFillStyle:y,surfaceScrollingGridSeries3DWireframeStyle:R,boxSeries3DFillStyle:y,meshModel3DFillStyle:y(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:Tt,polarChartTitleFont:a,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:o,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:A,polarSectorFillStyle:st,polarSectorStrokeStyle:et,polarAmplitudeAxisTitleFont:l,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:o,polarAmplitudeAxisStrokeStyle:O,polarAmplitudeAxisNumericTicks:Q,polarAmplitudeAxisDateTimeTicks:K,polarAmplitudeAxisTimeTicks:it,polarRadialAxisTitleFont:l,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:O,polarRadialAxisTickStyle:Z.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:x,polarPointLineSeriesFillStyle:y,polarPointLineSeriesStrokeStyle:x,polarPointSeriesFillStyle:y,polarPointSeriesStrokeStyle:xt,polarPolygonSeriesFillStyle:I,polarPolygonSeriesStrokeStyle:w,polarAreaSeriesFillStyle:I,polarAreaSeriesStrokeStyle:w,polarHeatmapSeriesFillStyle:y,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:Tt,mapChartTitleFont:a,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:o,mapChartFillStyle:ot,mapChartStrokeStyle:new ar({thickness:1,fillStyle:new de({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:ae,mapChartOutlierRegionStrokeStyle:new ar({thickness:1,fillStyle:h}),mapChartSeparateRegionFillStyle:lt,mapChartSeparateRegionStrokeStyle:ut,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:Tt,dataGridTitleFont:a,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:o,dataGridTextFont:u,dataGridTextFillStyle:ot,dataGridCellBackgroundFillStyle:new de({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new ar({thickness:.4,fillStyle:new de({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:Tt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ut,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ut,dataGridScrollBarButtonArrowFillStyle:new de({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,dataGridCellPadding:5,sparkLineChartStrokeStyle:x(0),sparkPointChartFillStyle:y(0),sparkBarChartFillStyle:y(0),sparkBarChartStrokeStyle:w(0),sparkAreaChartFillStyle:k(0),sparkAreaChartStrokeStyle:w(0),sparkPieChartFillStyle:y,sparkPieChartStrokeStyle:ut,sparkChartBandFillStyle:st,sparkChartBandStrokeStyle:et,sparkChartConstantLineStrokeStyle:rt,dataGridTextShadow:o,textSeriesShadow:o,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:Tt,spiderChartTitleFont:a,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:o,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:A,spiderChartWebStyle:new ar({thickness:2,fillStyle:h}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:u,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:l,spiderChartAxisStrokeStyle:new ar({thickness:2,fillStyle:r}),spiderChartAxisNibStrokeStyle:new ar({thickness:2,fillStyle:e}),spiderSeriesFillStyle:I,spiderSeriesStrokeStyle:w,spiderSeriesPointFillStyle:y,spiderChartScaleLabelShadow:o,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:Tt,pieChartTitleFont:a,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:o,pieChartSliceFillStylePalette:y,pieChartSliceStrokeStyle:ut,pieChartSliceLabelFont:f,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:At,pieChartSliceLabelShadow:o,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:Tt,funnelChartTitleFont:a,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:o,funnelChartSliceFillStylePalette:y,funnelChartSliceStrokeStyle:ut,funnelChartSliceLabelFont:f,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:At,funnelChartSliceLabelShadow:o,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:Tt,pyramidChartTitleFont:a,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:o,pyramidChartSliceFillStylePalette:y,pyramidChartSliceStrokeStyle:ut,pyramidChartSliceLabelFont:f,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:At,gaugeChartValueLabelFont:f.setSize(60),gaugeChartUnitLabelFont:f.setSize(40),gaugeChartTickFont:f.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:Tt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:s,gaugeChartGlowColor:b(255,255,64),gaugeChartNeedleFillStyle:new de({color:s}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new ar({thickness:2,fillStyle:new de({color:i})}),pyramidChartSliceLabelShadow:o,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:Tt,gaugeChartTitleFont:a,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:o,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:Tt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new ar({thickness:1,fillStyle:new de({color:M("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:o,treeMapChartTitleFont:a,treeMapChartPathLabelFillStyle:at,treeMapChartPathLabelFont:f,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:a,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:f,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:Tt,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:yt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:b(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:Tt,parallelCoordinateChartTitleFont:a,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:o,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:A,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:m[0],parallelCoordinateAxisTitleFont:l,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:Q,parallelCoordinateAxisDateTimeTicks:K,parallelCoordinateAxisTimeTicks:it,parallelCoordinateAxisStrokeStyle:O,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:ut,parallelCoordinateAxisBackgroundFillStyle:new N({angle:90,stops:[{offset:0,color:t.isDark?b(0,0,0,0):b(255,255,255,0)},{offset:1,color:t.isDark?b(0,0,0,255):b(255,255,255,180)}]}),uiButtonFillStyle:ct,uiButtonFillStyleHidden:dt,uiButtonStrokeStyle:t.isDark?Tt:new ar({thickness:1,fillStyle:new de({color:i})}),uiButtonSize:10,uiBackgroundFillStyle:lt,uiBackgroundStrokeStyle:ut,uiTextFillStyle:at,uiTextFillStyleHidden:ft,uiTextFont:f,uiTextPadding:5,legendTitleFillStyle:at,legendTitleFont:d,legendBorderRadius:5,legendPadding:5,legendLUTLabelMargin:7,legendLUTUnitLabelMargin:7,legendLUTCornerRadius:5,legendLUTLengthHorizontal:160,legendLUTThicknessHorizontal:15,legendLUTLengthVertical:140,legendLUTThicknessVertical:25,cursorTickMarkerXBackgroundFillStyle:lt,cursorTickMarkerXBackgroundStrokeStyle:ut,cursorTickMarkerXTextFillStyle:at,cursorTickMarkerXTextFont:f,cursorTickMarkerYBackgroundFillStyle:lt,cursorTickMarkerYBackgroundStrokeStyle:ut,cursorTickMarkerYTextFillStyle:at,cursorTickMarkerYTextFont:f,cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:exports.PointShape.Circle,cursorPointMarkerFillStyle:gt.getFillStyle(),cursorPointMarkerStrokeStyle:Tt,cursorDynamicBehavior:{pointMarkerFill:e=>new de({color:nt(e,t.isDark?i:s,.2,230)}),pointMarkerStroke:e=>new ar({thickness:2,fillStyle:new de({color:nt(e,t.isDark?s:i,t.isDark?.8:.6,204)})}),pointMarkerSize:t=>({x:t+3,y:t+3})},cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new ar({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:at,cursorResultTableTextFont:f,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:gt,cursorGridStrokeStyleY:gt,cursor3DGridStrokeStyleX:pt,cursor3DGridStrokeStyleY:pt,cursor3DGridStrokeStyleZ:pt,cursor3DTickStrokeStyleX:Z.tickStyle,cursor3DTickStrokeStyleY:Z.tickStyle,cursor3DTickStrokeStyleZ:Z.tickStyle,cursor3DTickLabelFillStyleX:at,cursor3DTickLabelFillStyleY:at,cursor3DTickLabelFillStyleZ:at,cursor3DTickLabelFontX:f,cursor3DTickLabelFontY:f,cursor3DTickLabelFontZ:f,cursor3DTickLabelBackgroundFillStyleX:mt,cursor3DTickLabelBackgroundFillStyleY:mt,cursor3DTickLabelBackgroundFillStyleZ:mt,cursor3DTickLabelBackgroundStrokeStyleX:ut,cursor3DTickLabelBackgroundStrokeStyleY:ut,cursor3DTickLabelBackgroundStrokeStyleZ:ut,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(St={...St,...t.overrideThemeProperties}),St})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},uf="Segoe UI, -apple-system, Verdana, Helvetica",cf=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},df=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:nt(i[e%i.length].stroke,b(255,255,255),.5);return new O({stops:[{color:nt(r,b(255,255,255),.5*s).setA(100),offset:0},{color:r.setA(100),offset:.5},{color:nt(r,b(30,30,30),.5*s).setA(100),offset:1}]})},ff=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:nt(i[e%i.length].stroke,b(255,255,255),.2);return new O({stops:[{color:nt(r,b(255,255,255),.2*s),offset:0},{color:r,offset:.5},{color:nt(r,b(0,0,0),.2*s),offset:1}]})},Af=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:nt(i[e%i.length].stroke,b(255,255,255),.2);return new N({angle:90,stops:[{color:nt(r,b(255,255,255),.5*s),offset:0},{color:r,offset:.35},{color:nt(r,b(30,30,30),.5*s),offset:1}]})},gf=(t,i,s)=>(()=>{const s=new Map;return e=>{const r=s.get(e);if(r)return r;const h=(s=>{const e=!0===t?i[s%i.length].stroke:nt(i[s%i.length].stroke,b(255,255,255),.3);return new N({angle:90,stops:[{color:nt(e,b(255,255,255),.5),offset:0},{color:e,offset:.35},{color:nt(e,b(30,30,30),.5),offset:1}]})})(e);return s.set(e,h),h}})(),pf=Ui((()=>{const t=b(255,255,255),i=new de({color:t}),s=!0,e=new yr({spread:1,blur:9,offset:{x:0,y:0},color:b(0,0,0,150)}),r=new O({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:b(50,51,52)},{offset:.5,color:b(14,15,16)},{offset:1,color:b(0,0,0)}]}),h=new de({color:b(45,45,45)}),n=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(120,120,120,100)},{offset:1,color:b(0,0,0,50)}]}),o=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(30,30,30,200)},{offset:1,color:b(0,0,0,255)}]}),a=uf,l=new de({color:b(255,255,220)}),u=new de({color:b(255,255,166)}),c=new de({color:b(255,255,220)}),d=new de({color:b(255,255,200)}),f=d,A=f,g=new N({angle:45,stops:[{offset:0,color:b(230,230,230)},{offset:1,color:b(150,150,150)}]}),p=new de({color:b(220,220,220)}),v=new de({color:b(200,200,200,50)}),y=new de({color:b(200,200,200,150)}),m=new de({color:b(200,200,200,20)}),x=new de({color:b(220,220,220)}),S=new N({angle:0,stops:[{offset:0,color:b(10,10,10,220)},{offset:1,color:b(30,30,30,220)}]}),M=i,w=b(255,255,200),_=new de({color:b(0,0,0,224)}),k=new de({color:b(166,166,166)}),C=new de({color:b(49,53,58)}),T=b(20,20,20),F=b(0,0,0),I=t,L=b(150,150,150),P=b(50,50,50),B=b(50,50,50),D=b(100,100,100),E=b(200,200,200),R=[b(255,255,91,255),b(255,205,91,255),b(255,155,91,255),b(255,196,188,255),b(255,148,184,255),b(219,148,198,255),b(235,196,224,255),b(169,148,198,255),b(148,226,198,255),b(148,255,176,255),b(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=b(176,255,157,255),G=b(255,112,76,255),$={mapChartFillStyle:new N({angle:135,stops:[{color:b(255,255,91,255),offset:0},{color:b(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:df(s,R,.5),pieChartSliceFillStylePalette:ff(s,R,1),funnelChartSliceFillStylePalette:Af(s,R,1),pyramidChartSliceFillStylePalette:Af(s,R,1),rectangleSeriesFillStyle:gf(s,R),gaugeChartBarColor:b(255,255,91,255),gaugeChartGlowColor:b(255,255,91,64)},U=new de({color:b(176,255,157,255)}),Y=new de({color:b(255,146,146,255)}),j=new de({color:b(176,255,157,255)}),H=new de({color:b(230,63,63,255)}),W=new de({color:b(176,255,157,120)}),X=new de({color:b(229,63,63,180)}),Z=new de({color:b(27,37,36,255)}),J=new de({color:b(62,27,27,255)}),Q=[b(255,0,0),b(255,255,0),b(0,255,0)],K=[b(10,10,255),b(10,190,255),b(251,255,0),b(255,38,0)],q=[b(255,255,0),b(255,204,0),b(255,128,0),b(255,0,0)],tt=[b(0,0,0),b(167,4,69,255),b(255,0,0),b(252,252,168,255)],it=new O({stops:[{color:b(61,61,80,100),offset:0},{color:b(44,44,55,30),offset:1}]}),st=new de({color:b(148,148,198,255)}),et=W.getColor().setA(255),rt=b(100,100,100),ht=[b(255,241,149,200),b(255,230,65,200),b(238,211,32,200),b(238,176,32,200),b(255,159,13,200),b(254,120,37,200),b(253,91,56,200),b(253,75,84,200),b(254,95,124,200),b(227,56,160,200),b(226,53,134,200),b(216,90,166,200),b(254,151,206,200),b(237,151,254,200),b(243,177,255,200),b(233,133,252,200),b(210,101,230,200),b(178,61,200,200),b(193,81,156,200),b(217,95,145,200)];return lf({isDark:s,highlightColorOffset:b(60,60,60,60),highlightColorOffsetAxisOverlay:b(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:r,dashboardSplitterFillStyle:h,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:p,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:x,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:k,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:E,dataColorPalette:R,dataColorPaletteInverted:[{area:b(190,50,50,100),border:b(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:G,zoomBandChartDefocusOverlayFillStyle:new de({color:b(0,0,0,180)}),zoomBandChartSplitterColor:b(251,251,90),zoomBandChartKnobFillStyle:t=>new _t({source:cf(t,"zoomBandChart/darkgold-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:b(255,255,255,24),overrideThemeProperties:$,treeMapChartParentColor:b(24,30,33),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new de({color:b(33,33,33)}),treeMapChartLabelHeaderFillStyle:new de({color:b(250,250,250)})},{positiveTextFillStyle:U,negativeTextFillStyle:Y,positiveFillStyle:j,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:X,positiveBackgroundFillStyle:Z,negativeBackgroundFillStyle:J,badGoodColorPalette:Q,coldHotColorPalette:K,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:it,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:rt})})),vf=Ui((()=>{const t=b(255,255,255),i=new de({color:t}),s=!0,e=new yr({spread:0,blur:9,offset:{x:0,y:0},color:b(105,255,236,40)}),r=new de({color:b(2,21,30)}),h=new O({stops:[{color:b(19,40,66,150),offset:0},{color:b(0,0,0,150),offset:1}]}),n=new de({color:b(0,5,8,150)}),o=uf,a=i,l=i,u=i,c=i,d=i,f=d,A=new de({color:b(20,224,250,255)}),g=i,p=new de({color:b(61,94,110,100)}),v=new de({color:b(61,94,110,255)}),y=new de({color:b(61,94,110,40)}),m=i,x=new de({color:b(0,18,23,255)}),S=i,M=t,w=new de({color:b(0,0,0,225)}),_=i,k=new de({color:b(18,66,75)}),C=b(0,38,48,220),T=b(0,0,0),F=t,I=b(150,150,150),L=b(19,78,93),P=b(50,50,50),B=b(0,36,48),D=b(200,200,200),E=[b(45,253,253,255),b(44,172,247,255),b(46,100,248,255),b(96,84,199,255),b(184,104,245,255),b(98,160,218,255),b(43,238,245,255),b(38,140,206,255),b(112,96,224,255),b(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=b(3,217,194,255),V=b(230,63,63,255),G={mapChartFillStyle:new N({angle:135,stops:[{color:b(118,248,231,255),offset:0},{color:b(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:df(s,E,1),pieChartSliceFillStylePalette:ff(s,E,1),funnelChartSliceFillStylePalette:Af(s,E,1),pyramidChartSliceFillStylePalette:Af(s,E,1),rectangleSeriesFillStyle:gf(s,E),gaugeChartBarColor:b(3,217,194,255),gaugeChartGlowColor:b(3,217,194,120)},$=new de({color:b(45,253,253,255)}),U=new de({color:b(255,146,146,255)}),Y=new de({color:b(45,253,253,255)}),j=new de({color:b(230,63,63,255)}),H=new de({color:b(1,190,164,120)}),W=new de({color:b(229,63,63,180)}),X=new de({color:b(1,53,57,255)}),Z=new de({color:b(62,27,27,255)}),J=[b(1,104,119,255),b(0,165,144,255),b(0,246,214,255)],Q=[b(0,87,95,255),b(0,125,124,255),b(1,209,182,255),b(0,255,221,255),b(218,112,112,255),b(172,47,47,255)],K=[b(126,255,253,255),b(50,233,230,255),b(0,196,193,255),b(62,138,178,255),b(139,88,191,255),b(162,55,143,255)],q=[b(13,31,52,255),b(101,50,118,255),b(1,142,172,255),b(2,196,170,255),b(0,255,221,255)],tt=new O({stops:[{color:b(122,103,254,70),offset:0},{color:b(178,168,255,10),offset:1}]}),it=new de({color:b(122,103,254,255)}),st=H.getColor().setA(255),et=b(15,83,83),rt=[b(139,252,252,150),b(60,239,239,150),b(2,201,201,150),b(26,159,159,150),b(15,146,187,150),b(65,168,200,150),b(67,146,207,150),b(64,108,209,150),b(189,64,233,150),b(219,84,238,150),b(192,55,212,150),b(212,98,229,150),b(248,110,211,150),b(251,154,225,150),b(251,154,184,150),b(233,105,144,150),b(255,133,170,150),b(249,110,135,150),b(245,72,101,150),b(210,57,84,150)];return lf({isDark:s,highlightColorOffset:b(60,60,60,60),highlightColorOffsetAxisOverlay:b(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new _t({source:cf(t,"themes/turquoiseHexagon.jpg"),fitMode:exports.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:p,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:b(170,60,210,100),border:b(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new de({color:b(0,0,0,180)}),zoomBandChartSplitterColor:b(43,244,244),zoomBandChartKnobFillStyle:t=>new _t({source:cf(t,"zoomBandChart/turquoise-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:b(255,255,255,24),overrideThemeProperties:G,treeMapChartParentColor:b(0,35,41),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new de({color:b(33,33,33)}),treeMapChartLabelHeaderFillStyle:new de({color:b(250,250,250)})},{positiveTextFillStyle:$,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:j,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:Z,badGoodColorPalette:J,coldHotColorPalette:Q,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:st,unfocusedDataColor:et})})),yf=Ui((()=>{const t=!1,i=new yr({spread:0,blur:6,offset:{x:2,y:-2},color:b(0,0,0,30)}),s=new O({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:b(255,255,255)},{offset:1,color:b(255,255,255)}]}),e=new de({color:b(219,227,233,255)}),r=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(255,255,255,200)},{offset:1,color:b(240,244,246,200)}]}),h=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(255,255,255,255)},{offset:1,color:b(255,255,255,255)}]}),n=uf,o=new de({color:b(33,43,49)}),a=new de({color:b(33,43,49)}),l=new de({color:b(33,43,49)}),u=new de({color:b(33,43,49)}),c=u,d=c,f=new N({angle:45,stops:[{offset:0,color:b(225,225,225)},{offset:1,color:b(225,225,225)}]}),A=new de({color:b(150,150,150,255)}),g=new de({color:b(150,150,150,170)}),p=new de({color:b(150,150,150,150)}),v=new de({color:b(150,150,150,100)}),y=new de({color:b(60,70,80)}),m=new N({angle:0,stops:[{offset:0,color:b(255,255,255,240)},{offset:1,color:b(255,255,255,240)}]}),x=new de({color:b(168,186,199)}),S=b(150,150,150),M=new de({color:b(255,255,255,230)}),w=new de({color:b(168,186,199)}),_=new de({color:b(228,235,243)}),k=b(255,255,255,255),C=b(168,168,199,255),T=b(168,186,199,255),F=b(168,186,199,255),I=b(168,186,199,255),L=b(168,186,199,255),P=b(100,100,100),B=b(200,200,200),D=[b(28,181,140,255),b(255,132,0,255),b(240,39,39,255),b(86,121,251,255),b(2,181,213,255),b(13,212,158,255),b(22,167,3,255),b(234,103,232,255),b(62,183,179,255),b(140,93,3,255),b(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=b(150,150,150,80),R=b(46,182,120,255),z=b(255,66,66,255),V=new ar({thickness:2,fillStyle:new de({color:b(168,186,199,255)})}),G={mapChartFillStyle:new N({angle:-45,stops:[{color:b(2,181,213,255),offset:0},{color:b(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:df(t,D,.8),pieChartSliceFillStylePalette:ff(t,D,.8),funnelChartSliceFillStylePalette:Af(t,D,.5),pyramidChartSliceFillStylePalette:Af(t,D,.5),rectangleSeriesFillStyle:gf(t,D),gaugeChartBarColor:b(46,182,120,255),gaugeChartGlowColor:b(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new de({color:b(0,88,64,255)})},$=new de({color:b(4,146,108,255)}),U=new de({color:b(240,39,39,255)}),Y=new de({color:b(28,181,140,255)}),j=new de({color:b(230,88,88,255)}),H=new de({color:b(28,181,140,180)}),W=new de({color:b(230,88,88,180)}),X=new de({color:b(229,243,228)}),Z=new de({color:b(232,225,216)}),J=[b(193,48,48,255),b(240,234,60,255),b(45,191,55,255)],Q=[b(10,19,255,255),b(15,191,250,255),b(249,255,2,255),b(253,133,0,255),b(255,24,0,255)],K=[b(50,99,213),b(8,179,77),b(255,246,0),b(255,126,0),b(189,36,30)],q=[b(16,64,176),b(8,179,77),b(255,246,0),b(255,126,0),b(168,6,0)],tt=new de({color:b(185,198,207,255)}),it=new O({stops:[{color:b(151,190,220,10),offset:0},{color:b(151,190,220,50),offset:1}]}),st=H.getColor().setA(255),et=b(150,150,150),rt=[b(255,243,136,125),b(254,237,99,125),b(255,216,109,125),b(255,172,100,125),b(255,133,101,125),b(255,113,142,125),b(230,103,129,125),b(242,126,219,125),b(255,155,235,125),b(255,181,240,125),b(203,143,255,125),b(208,154,255,125),b(171,188,255,125),b(197,209,255,125),b(171,187,255,125),b(84,167,239,125),b(38,196,214,125),b(38,214,196,125),b(69,225,141,125),b(36,191,88,125)];return lf({isDark:t,highlightColorOffset:b(-60,-60,-60,60),highlightColorOffsetAxisOverlay:b(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:h,fontFamily:n,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:p,axisGridMinorFillStyle:v,cursorGridFillStyle:y,legendBackgroundFillStyle:m,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:S,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:_,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:B,dataColorPalette:D,dataColorPaletteInverted:[{area:b(190,50,50,100),border:b(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new de({color:b(255,255,255,180)}),zoomBandChartSplitterColor:b(80,93,101),zoomBandChartKnobFillStyle:t=>new _t({source:cf(t,"zoomBandChart/light-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:b(0,0,0,24),overrideThemeProperties:G,treeMapChartParentColor:b(217,217,217),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new de({color:b(0,0,0)}),treeMapChartLabelHeaderFillStyle:new de({color:b(33,33,33)})},{positiveTextFillStyle:$,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:j,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:Z,badGoodColorPalette:J,coldHotColorPalette:Q,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:it,bollingerBorderFillStyle:tt,highlightPointColor:b(0,0,0),highlightDataGridColor:st,unfocusedDataColor:et})})),mf=Ui((()=>{const t=!1,i=new O({position:{x:.8,y:.8},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.ellipse,stops:[{offset:0,color:b(255,255,255)},{offset:1,color:b(255,255,255)}]}),s=new de({color:b(214,236,216,255)}),e=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(233,244,231,70)},{offset:1,color:b(233,244,231,200)}]}),r=new O({position:{x:.5,y:.5},extent:exports.GradientExtent.farthestCorner,shape:exports.GradientShape.circle,stops:[{offset:0,color:b(255,255,255,255)},{offset:1,color:b(255,255,255,255)}]}),h=uf,n=new de({color:b(1,61,53)}),o=new de({color:b(1,61,53)}),a=new de({color:b(1,61,53)}),l=new de({color:b(1,61,53)}),u=l,c=u,d=new N({angle:45,stops:[{offset:0,color:b(225,225,225)},{offset:1,color:b(225,225,225)}]}),f=new de({color:b(188,211,186,255)}),A=new de({color:b(188,211,186,150)}),g=new de({color:b(188,211,186,50)}),p=new de({color:b(188,211,186,50)}),v=new de({color:b(104,148,111,255)}),y=new N({angle:0,stops:[{offset:0,color:b(255,255,255,240)},{offset:1,color:b(255,255,255,240)}]}),m=new de({color:b(104,148,111)}),x=b(150,150,150),S=new de({color:b(255,255,255,230)}),M=new de({color:b(104,148,111)}),w=new de({color:b(226,236,224)}),_=b(255,255,255,255),k=b(179,201,183,255),C=b(188,211,186,255),T=b(188,211,186,255),F=b(188,211,186,255),I=b(188,211,186,255),L=b(100,100,100),P=b(200,200,200),B=[b(138,195,142,255),b(193,161,114,255),b(178,99,99,255),b(142,156,210,255),b(154,209,219,255),b(164,212,199,255),b(104,156,97,255),b(196,147,195,255),b(92,190,187,255),b(126,100,51,255),b(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=b(150,150,150,80),E=b(46,182,84,255),R=b(232,96,96,255),z=new ar({thickness:2,fillStyle:new de({color:b(188,211,186,255)})}),V={mapChartFillStyle:new N({angle:-45,stops:[{color:b(118,160,121,255),offset:0},{color:b(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:df(t,B,.8),pieChartSliceFillStylePalette:ff(t,B,.8),pyramidChartSliceFillStylePalette:Af(t,B,.5),funnelChartSliceFillStylePalette:Af(t,B,.5),rectangleSeriesFillStyle:gf(t,B),gaugeChartBarColor:b(46,182,84,255),gaugeChartGlowColor:b(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new de({color:b(77,66,21,255)})},G=new de({color:b(93,151,97,255)}),$=new de({color:b(178,99,99,255)}),U=new de({color:b(138,195,142,255)}),Y=new de({color:b(178,99,99,255)}),j=new de({color:b(138,195,142,180)}),H=new de({color:b(178,99,99,180)}),W=new de({color:b(224,240,237)}),X=new de({color:b(251,227,227)}),Z=[b(178,99,99,255),b(215,224,111,255),b(80,186,88,255)],J=[b(62,64,142,255),b(66,131,77,255),b(250,250,135,255),b(202,161,78,255),b(179,53,53,255)],Q=[b(64,86,138),b(123,192,205),b(255,252,149),b(220,155,92),b(184,78,74)],K=[b(64,86,138),b(123,192,205),b(255,252,149),b(220,155,92),b(132,60,57)],q=new de({color:b(185,198,207,255)}),tt=new O({stops:[{color:b(151,190,220,10),offset:0},{color:b(151,190,220,50),offset:1}]}),it=j.getColor().setA(255),st=b(150,150,150),et=[b(242,239,210,150),b(243,238,183,150),b(210,222,136,150),b(204,217,148,150),b(157,190,124,150),b(143,178,72,150),b(198,147,88,150),b(216,148,71,150),b(229,142,103,150),b(225,174,152,150),b(219,149,203,150),b(216,188,209,150),b(109,198,189,150),b(172,206,202,150),b(164,223,217,150),b(174,215,233,150),b(203,225,235,150),b(220,227,243,150),b(207,213,227,150),b(171,182,209,150)];return lf({isDark:t,highlightColorOffset:b(-60,-60,-60,60),highlightColorOffsetAxisOverlay:b(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:r,fontFamily:h,fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:y,legendBackgroundBorderFillStyle:m,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:S,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:_,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:P,dataColorPalette:B,dataColorPaletteInverted:[{area:b(210,70,70,100),border:b(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:E,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new de({color:b(255,255,255,180)}),zoomBandChartSplitterColor:b(68,106,64),zoomBandChartKnobFillStyle:t=>new _t({source:cf(t,"zoomBandChart/lightnature-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:b(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:b(239,247,238),treeMapChartNodeColors:et,treeMapChartLabelFillStyle:new de({color:b(0,0,0)}),treeMapChartLabelHeaderFillStyle:new de({color:b(33,33,33)})},{positiveTextFillStyle:G,negativeTextFillStyle:$,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:j,negativeAreaFillStyle:H,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:X,badGoodColorPalette:Z,coldHotColorPalette:J,intensityColorPalette:Q,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:q,highlightPointColor:b(0,0,0),highlightDataGridColor:it,unfocusedDataColor:st})})),xf=Ui((()=>{const t=b(255,255,255),i=new de({color:t}),s=!0,e=new yr({spread:1,blur:9,offset:{x:0,y:0},color:b(255,255,255,30)}),r=new de({color:b(6,15,36)}),h=new O({stops:[{color:b(46,13,87,50),offset:0},{color:b(0,0,0,150),offset:1}]}),n=new de({color:b(0,5,8,150)}),o=uf,a=i,l=i,u=i,c=i,d=i,f=d,A=new N({angle:45,stops:[{offset:0,color:b(241,133,255,255)},{offset:1,color:b(115,207,238,255)}]}),g=i,p=new de({color:b(61,94,110,100)}),v=new de({color:b(61,94,110,255)}),y=new de({color:b(61,94,110,40)}),m=i,x=new de({color:b(0,18,23,255)}),S=i,M=b(115,207,238,255),w=new de({color:b(0,0,0,224)}),_=i,k=new de({color:b(68,31,78)}),C=b(0,38,48,255),T=b(0,0,0),F=t,I=b(150,150,150),L=b(19,57,93),P=b(50,50,50),B=b(0,17,48),D=b(200,200,200),E=[b(20,211,237,255),b(98,147,252,255),b(164,73,250,255),b(129,117,253,255),b(95,134,252,255),b(22,133,212,255),b(35,200,242,255),b(104,121,233,255),b(137,69,232,255),b(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=b(3,217,194,255),V=b(243,21,110,255),G={mapChartFillStyle:new N({angle:135,stops:[{color:b(118,248,231,255),offset:0},{color:b(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:df(s,E,.5),pieChartSliceFillStylePalette:ff(s,E,2),funnelChartSliceFillStylePalette:Af(s,E,1),pyramidChartSliceFillStylePalette:Af(s,E,1),rectangleSeriesFillStyle:gf(s,E),gaugeChartBarColor:b(3,217,194,255),gaugeChartGlowColor:b(3,217,194,150)},$=new de({color:b(20,211,237,255)}),U=new de({color:b(253,145,178,255)}),Y=new de({color:b(20,211,237,255)}),j=new de({color:b(239,68,121,255)}),H=new de({color:b(20,211,237,120)}),W=new de({color:b(239,68,121,180)}),X=new de({color:b(1,53,57,255)}),Z=new de({color:b(94,19,42,255)}),J=[b(174,51,132,255),b(204,107,218,255),b(189,215,253,255)],Q=[b(0,63,95,255),b(0,149,255,255),b(0,225,255,255),b(255,154,254,255),b(204,98,170,255),b(139,39,84,255)],K=[b(197,241,255,255),b(70,210,255,255),b(0,164,217,255),b(90,99,222,255),b(138,75,192,255),b(151,27,162,255)],q=[b(13,31,52,255),b(129,54,130,255),b(131,108,176,255),b(7,162,213,255),b(26,247,255,255)],tt=new O({stops:[{color:b(219,42,235,60),offset:0},{color:b(237,73,252,10),offset:1}]}),it=new de({color:b(237,73,252,255)}),st=H.getColor().setA(255),et=b(8,70,100),rt=[b(149,230,255,150),b(93,213,243,150),b(20,189,223,150),b(5,151,181,150),b(2,138,198,150),b(2,113,198,150),b(97,148,236,150),b(93,111,230,150),b(151,120,223,150),b(128,87,227,150),b(153,52,230,150),b(179,92,245,150),b(248,110,211,150),b(255,155,228,150),b(251,88,207,150),b(255,0,162,150),b(214,73,177,150),b(209,71,159,150),b(238,101,169,150),b(210,57,134,150)];return lf({isDark:s,highlightColorOffset:b(60,60,60,60),highlightColorOffsetAxisOverlay:b(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new _t({source:cf(t,"themes/cyberSpace.jpg"),fitMode:exports.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:p,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:b(41,130,255,100),border:b(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new de({color:b(0,0,0,180)}),zoomBandChartSplitterColor:b(219,119,255),zoomBandChartKnobFillStyle:t=>new _t({source:cf(t,"zoomBandChart/cyberspace-selector.png"),fitMode:exports.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:b(255,255,255,24),overrideThemeProperties:G,treeMapChartParentColor:b(30,30,59),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new de({color:b(33,33,33)}),treeMapChartLabelHeaderFillStyle:new de({color:b(250,250,250)})},{positiveTextFillStyle:$,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:j,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:Z,badGoodColorPalette:J,coldHotColorPalette:Q,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:st,unfocusedDataColor:et})})),Sf={};Object.defineProperty(Sf,"darkGold",{get:pf,enumerable:!0}),Object.defineProperty(Sf,"turquoiseHexagon",{get:vf,enumerable:!0}),Object.defineProperty(Sf,"light",{get:yf,enumerable:!0}),Object.defineProperty(Sf,"lightNature",{get:mf,enumerable:!0}),Object.defineProperty(Sf,"cyberSpace",{get:xf,enumerable:!0});const bf=Sf,Mf=bf.darkGold;class wf extends ja{constructor(t,i,s,e,r,h){var n,o,a,l;let u;super(t,i,s,i.Hg("dataGrid bg",0),e,i.pi.bi.dataGridBackgroundFillStyle,i.pi.bi.dataGridBackgroundStrokeStyle,i.pi.bi.dataGridTitleFont,i.pi.bi.dataGridTitleFillStyle,i.pi.bi.dataGridTitleShadow,h),this.tT=[],this.iT=[],this.sT=[],this.eT=new Map,this.rT=!0,this.hT=!0,this.nT=!0,this.oT=!0,this.aT=!0,this.lT=!0,this.uT=!0,this.cT=!0,this.dT=!0,this.fT=!0,this.AT=!0,this.gT=!0,this.pT=!0,this.vT=!0,this.yT=!0,this.mT=!0,this.xT=new Set,this.ST=new Set,this.bT=!0,this.MT=!0,this.wT=(t,i)=>{t.borders=void 0===i?Tf:{...t.borders,...i},this._T(t),this.gT=!0,this.pi.Bs()},this._T=t=>{t.borders&&(!1===t.borders.top&&this.kT(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.CT,bottom:!1}})),!1===t.borders.bottom&&this.kT(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.CT,top:!1}})),!1===t.borders.left&&this.kT(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.CT,right:!1}})),!1===t.borders.right&&this.kT(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.CT,left:!1}})),!0===t.borders.top&&this.kT(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.CT,bottom:!0}})),!0===t.borders.bottom&&this.kT(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.CT,top:!0}})),!0===t.borders.left&&this.kT(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.CT,right:!0}})),!0===t.borders.right&&this.kT(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.CT,left:!0}})))},this.TT={x:0,y:0},this.cells=new yt,this.D=new yt,this.pi.La(jh.yo),this.Yr.tn("Data Grid"),this.FT=s.d2({scaleXYConstructor:Z}),this.FT.x.Jf=jd,this.IT=s.d2({scaleXYConstructor:Z}),this.LT={x:0,y:0},this.PT=this.bi.dataGridTextFont,this.BT=this.bi.dataGridTextFillStyle,this.CT={top:!0,bottom:!0,left:!0,right:!0},this.DT=this.bi.dataGridCellBackgroundFillStyle,this.ET=this.bi.dataGridBorderStrokeStyle,this.RT="left-center",this.OT={left:null!==(n=this.bi.dataGridCellPadding)&&void 0!==n?n:5,right:null!==(o=this.bi.dataGridCellPadding)&&void 0!==o?o:5,bottom:null!==(a=this.bi.dataGridCellPadding)&&void 0!==a?a:5,top:null!==(l=this.bi.dataGridCellPadding)&&void 0!==l?l:5},this.zT=i.Rm("dataGrid grid bg",0),this.VT=i.Rm("dataGrid cell bg",1),this.NT=i.Om("dataGrid cell content",0),this.GT=i.Om("dataGrid scrollbar bg",1),this.$T=i.Om("dataGrid scrollbar fg",2),this.UT=this.zT.Tc(this.IT).qe(this.bi.dataGridBackgroundFillStyle).Ke(Tt).setPointerEvents(!1),this.YT=this.NT.bA(this.FT).setPointerEvents(!1),this.jT=new La((()=>{const t=this.VT.tr(this.FT).setPointerEvents(!0);return this.cells.zi(t,{getExtraData:()=>this.eT.get(t),continueIfNotPrevented:(t,i,s)=>{const e=_e(this.getUserInteractions().scroll,"wheel",i,i.shiftKey,i.ctrlKey,i.altKey);if(e&&"wheel"===t&&i instanceof WheelEvent){di(i),this.HT({x:!0===e.x?Math.sign(i.deltaY):0,y:!0===e.y?Math.sign(i.deltaY):0});const t=e.on;t&&t({event:i})}}}),t})),this.WT=new La((()=>this.NT.tr(this.FT).setPointerEvents(!1))),this.XT=new La((()=>this.NT._n(this.FT,!1).setPointerEvents(!1))),this.ZT=new La((()=>this.NT.Np(this.FT,{},[Ja.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.JT=new La((()=>this.NT.dr(this.FT).setPointerEvents(!1))),this.QT=new La((()=>this.NT.zd(this.FT).Od(ae).cr(Tt).setPointerEvents(!1))),this.KT=new La((()=>this.NT.tr(this.FT).setPointerEvents(!1))),this.qT=new La((()=>this.NT.qb(this.FT).setPointerEvents(!1))),this.tF=new La((()=>this.NT._d(this.FT).setPointerEvents(!1))),this.iF={background:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarBackgroundFillStyle).Ke(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.$T.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarFillStyle).Ke(this.bi.dataGridScrollBarStrokeStyle),button1:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarButtonFillStyle).Ke(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarButtonFillStyle).Ke(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.$T.zd(this.IT).setPointerEvents(!1).cr(Tt).Rd(this.bi.dataGridScrollBarButtonArrowFillStyle).Vd(exports.PointShape.Triangle),buttonIcon2:this.$T.zd(this.IT).setPointerEvents(!1).cr(Tt).Rd(this.bi.dataGridScrollBarButtonArrowFillStyle).Vd(exports.PointShape.Triangle)},this.sF={background:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarBackgroundFillStyle).Ke(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.$T.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarFillStyle).Ke(this.bi.dataGridScrollBarStrokeStyle),button1:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarButtonFillStyle).Ke(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.GT.tr(this.IT).setPointerEvents(!0).qe(this.bi.dataGridScrollBarButtonFillStyle).Ke(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.$T.zd(this.IT).setPointerEvents(!1).cr(Tt).Rd(this.bi.dataGridScrollBarButtonArrowFillStyle).Vd(exports.PointShape.Triangle),buttonIcon2:this.$T.zd(this.IT).setPointerEvents(!1).cr(Tt).Rd(this.bi.dataGridScrollBarButtonArrowFillStyle).Vd(exports.PointShape.Triangle)},this.iF.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Vertical,u)})),this.iF.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.scrollbar.addEventListener("pointerdown",(t=>{di(t);let i=t;const s=t=>{const s=t.clientY-i.clientY;i=t,this.eF({x:0,y:-s})},e=i=>{i.pointerId===t.pointerId&&(Nt.removeEventListener("pointermove",s),Nt.removeEventListener("pointerup",e))};Nt.addEventListener("pointermove",s),Nt.addEventListener("pointerup",e)})),this.iF.scrollbar.addEventListener("wheel",(t=>{di(t),this.HT({x:0,y:Math.sign(t.deltaY)})})),this.iF.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Vertical,u)})),this.iF.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.background.addEventListener("click",(t=>{di(t);const i=this.pi.il(t),s=q({x:i.engineX,y:i.engineY},this.pi.ai,this.IT);this.HT({x:0,y:s.y>this.iF.scrollbar.Vl().y?-1:1})})),this.iF.background.addEventListener("wheel",(t=>{di(t),this.HT({x:0,y:Math.sign(t.deltaY)})})),this.iF.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Point,u)})),this.iF.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.button1.addEventListener("click",(t=>{di(t),this.HT({x:0,y:1})})),this.iF.button2.addEventListener("click",(t=>{di(t),this.HT({x:0,y:-1})})),this.iF.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Point,u)})),this.iF.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.sF.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Horizontal,u)})),this.sF.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.sF.scrollbar.addEventListener("pointerdown",(t=>{di(t);let i=t;const s=t=>{const s=t.clientX-i.clientX;i=t,this.eF({x:s,y:0})},e=i=>{i.pointerId===t.pointerId&&(Nt.removeEventListener("pointermove",s),Nt.removeEventListener("pointerup",e))};Nt.addEventListener("pointermove",s),Nt.addEventListener("pointerup",e)})),this.sF.scrollbar.addEventListener("wheel",(t=>{di(t),this.HT({x:Math.sign(t.deltaY),y:0})})),this.sF.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Horizontal,u)})),this.sF.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.sF.background.addEventListener("click",(t=>{di(t);const i=this.pi.il(t),s=q({x:i.engineX,y:i.engineY},this.pi.ai,this.IT);this.HT({x:s.x<this.sF.scrollbar.Vl().x?-1:1,y:0})})),this.sF.background.addEventListener("wheel",(t=>{di(t),this.HT({x:Math.sign(t.deltaY),y:0})})),this.sF.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Point,u)})),this.sF.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.sF.button1.addEventListener("click",(t=>{di(t),this.HT({x:-1,y:0})})),this.sF.button2.addEventListener("click",(t=>{di(t),this.HT({x:1,y:0})})),this.sF.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(exports.MouseStyles.Point,u)})),this.sF.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.jg(r,this.uiScale),this.addEventListener("resize",(()=>{this.rT=!0,this.pi.Bs(),this.FT.Z(this.eA.kt()),this.IT.Z(this.eA.kt())})),this.rF=this.vs.aA([this.UT])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}bg(){return[]}dispose(){return super.dispose(),this.zT.G(),this.VT.G(),this.NT.G(),this.GT.G(),this.$T.G(),Ua(this.FT),Ua(this.IT),this.XT.UA(),this.jT.UA(),this.WT.UA(),this.ZT.UA(),this.JT.UA(),this.QT.UA(),this.KT.UA(),this.qT.UA(),this.tF.UA(),this}j(){return super.j(),this.FT.j(),this.IT.j(),this}H(){return super.H(),this.FT.H(),this.IT.H(),this}setBackgroundEffect(t){return this.rF.Ps(t),this.pi.Bs(),this}getBackgroundEffect(){return this.rF.Ds()}setUserInteractions(t){return this.ar=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return zt({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.ar)}setGridBackgroundFillStyle(t){return this.UT.qe(t),this.pi.Bs(),this}getGridBackgroundFillStyle(){return this.UT.Mh()}setCellContent(t,i,s,e,r){if("number"==typeof s&&void 0!==e&&void 0!==r){const h=s,n=e,o=r;let a=[];for(let s=t;s<t+h;s+=1)for(let t=i;t<i+n;t+=1){const i=this.kT(s,t);i&&a.push(i)}a=Vi(a);let l={highlight:0};for(const t of a){const i=this.tT.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.tT.splice(i,1))}const u={...l,column:t,row:i,columnSpan:h,rowSpan:n,content:o};this.tT.push(u),this.oT=!0,"string"==typeof u.content||"number"==typeof u.content?this.hT=!0:this.nT=!0,this.pi.Bs()}else this.hF(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.hF(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.hF(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.hF(e,s,i)}return this}setColumnWidth(t,i){let s=this.iT.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.iT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.iT.splice(this.iT.indexOf(s),1):(s.min=i,s.max=i),this.lT=!0,this.pi.Bs(),this}setRowHeight(t,i){let s=this.sT.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.sT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.sT.splice(this.sT.indexOf(s),1):(s.min=i,s.max=i),this.lT=!0,this.pi.Bs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=v(i,i,i,i)),this.nF(t,(t=>this.oF(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=v(i,i,i,i)),this.aF(t,(t=>this.oF(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=v(s,s,s,s)),this.kT(t,i,(t=>this.oF(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=v(t,t,t,t)),this.OT={...this.OT,...t},this.lF((t=>this.oF(t,this.OT))),this}setCellBorders(t,i,s){return this.kT(t,i,(t=>this.wT(t,s))),this}setRowBorders(t,i){return this.aF(t,(t=>this.wT(t,i))),this}setColumnBorders(t,i){return this.nF(t,(t=>this.wT(t,i))),this}setCellsBorders(t){return this.CT=void 0===t?Tf:t,this.lF((t=>this.wT(t,this.CT))),this}setCellsBorderStrokeStyle(t){return this.ET="function"==typeof t?t(this.ET):t,this.vT=!0,this.pi.Bs(),this}setColumnTextFillStyle(t,i){return this.nF(t,(t=>this.uF(t,i))),this}setRowTextFillStyle(t,i){return this.aF(t,(t=>this.uF(t,i))),this}setCellTextFillStyle(t,i,s){return this.kT(t,i,(t=>this.uF(t,s))),this}setCellsTextFillStyle(t){return this.BT="function"==typeof t?t(this.BT):t,this.lF((t=>this.uF(t,this.BT))),this}setColumnTextFont(t,i){return this.nF(t,(t=>this.cF(t,i))),this}setRowTextFont(t,i){return this.aF(t,(t=>this.cF(t,i))),this}setCellTextFont(t,i,s){return this.kT(t,i,(t=>this.cF(t,s))),this}setCellsTextFont(t){return this.PT="function"==typeof t?t(this.PT):t,this.lF((t=>this.cF(t,this.PT))),this}setColumnContentAlignment(t,i){return this.nF(t,(t=>this.dF(t,i))),this}setRowContentAlignment(t,i){return this.aF(t,(t=>this.dF(t,i))),this}setCellContentAlignment(t,i,s){return this.kT(t,i,(t=>this.dF(t,s))),this}setCellsContentAlignment(t){return this.RT=t,this.lF((t=>this.dF(t,this.RT))),this}setCellBackgroundFillStyle(t,i,s){return this.kT(t,i,(t=>this.fF(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.nF(t,(t=>this.fF(t,i))),this}setRowBackgroundFillStyle(t,i){return this.aF(t,(t=>this.fF(t,i))),this}setCellsBackgroundFillStyle(t){return this.DT="function"==typeof t?t(this.DT):t,this.lF((t=>this.fF(t,this.DT))),this}setCellHighlight(t,i,s){return this.kT(t,i,(t=>{t.highlight=Gi(s)})),this.pT=!0,this.pi.Bs(),this}setColumnHighlight(t,i){const s=Gi(i);return this.nF(t,(t=>{t.highlight=s})),this.pT=!0,this.pi.Bs(),this}setRowHighlight(t,i){const s=Gi(i);return this.aF(t,(t=>{t.highlight=s})),this.pT=!0,this.pi.Bs(),this}removeCell(t,i){return this.kT(t,i,(t=>this.tT.splice(this.tT.indexOf(t),1))),this.aT=!0,this.pi.Bs(),this}removeRow(t){return this.aF(t,(t=>this.tT.splice(this.tT.indexOf(t),1))),this.tT.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.aT=!0,this.pi.Bs(),this}removeColumn(t){return this.nF(t,(t=>this.tT.splice(this.tT.indexOf(t),1))),this.tT.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.aT=!0,this.pi.Bs(),this}removeCells(){return this.tT.splice(0),this.aT=!0,this.pi.Bs(),this}getColumnMax(){return 0===this.tT.length?0:this.tT.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.tT.length?0:this.tT.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}ir(t){var i;super.ir(t),Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn),super.Yg();const s=Math.round(this.ET.ji()),e=s/2;let r=this.hT||this.nT||this.oT||this.aT||this.lT||this.uT||this.AT||this.gT||this.vT||this.mT;if(r){this.tT.forEach((t=>{this.ST.add(t.column)})),this.tT.forEach((t=>{this.xT.add(t.row)}));const t=this.XT.VA(),i=this.AF(e,t);t.finishPlot();const h=this.gF(this.ST.size,i),n=this.pF(this.xT.size,i),o=h.reduce(fs,0)+s,a=n.reduce(fs,0)+s,l=new Array(h.length+1).fill(0).map(((t,i)=>h.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.vF){const t=this.vF.columnWidths.every(((t,i)=>t===h[i])),i=this.vF.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(r=!1)}this.vF={columnWidths:h,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:i}}const h=r||this.nT||this.oT||this.aT||this.cT||this.dT||this.fT||this.gT||this.pT||this.vT||this.rT||this.mT;if((h||this.yT)&&this.vF){const t=this.eA.getInnerIntervalPixels(),r=Ha.tp(this.Yr,this.Wg),n=[this.Gn.left+e,this.Gn.right+e],o=[this.Gn.bottom+e,this.Gn.top+r+e],a={x:t.x-n[0]-n[1],y:t.y-o[0]-o[1]},l=[this.Gn.left,this.Gn.right],u=[this.Gn.bottom,this.Gn.top+r],c={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-u[0]-u[1])},d={x:Math.ceil(e),y:Math.floor(c.y-e)};this.IT.qt(n).ti(o).ii(0,a.x).si(0,a.y);const f=null!==(i=this.bi.dataGridScrollBarThickness)&&void 0!==i?i:20,A={x:Math.min(a.x,this.vF.dataGridWidth+f)-f,y:Math.min(a.y,this.vF.dataGridHeight+f)-f};0===this.TT.x&&0===this.TT.y||(this.LT.y+=this.vF.dataGridHeight*this.TT.y/A.y,this.LT.x+=this.vF.dataGridWidth*this.TT.x/A.x,this.TT.x=0,this.TT.y=0),this.LT.y=Wt(this.LT.y,a.y-this.vF.dataGridHeight-f,0),this.LT.x=Wt(this.LT.x,0,this.vF.dataGridWidth-a.x+f);const g=this.LT;this.FT.qt(l).ti(u).ii(g.x,c.x+g.x).si(g.y,c.y+g.y);const p={x:this.FT.x.bt(),y:this.FT.y.bt()+f,width:this.FT.x.wt()+s-f,height:this.FT.y.wt()+s-f};this.NT.Tm(p),this.VT.Tm(p);const v=this.vF,y=[{x:this.FT.x.getInnerStart(),y:this.FT.y.getInnerStart()},{x:this.FT.x.getInnerEnd(),y:this.FT.y.getInnerStart()},{x:this.FT.x.getInnerEnd(),y:this.FT.y.getInnerEnd()},{x:this.FT.x.getInnerStart(),y:this.FT.y.getInnerEnd()}];v.cellsContentSizes.forEach((t=>{var i;const s={x:d.x+v.columnWidthsCumulative[t.cell.column],y:d.y-v.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+v.columnWidths[t.cell.column],y:s.y+v.rowHeights[t.cell.row]},r=us([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],y);null===(i=t.text)||void 0===i||i.setVisible(r)})),h&&this.yF(d,this.vF,s);const m=a.y-f<this.vF.dataGridHeight;this.iF.background.setVisible(m).sr({x:A.x,y:f}).Z({x:f,y:A.y}),this.iF.scrollbar.setVisible(m).sr({x:A.x,y:f+A.y-f+-(A.y-2*f)*(-this.LT.y/this.vF.dataGridHeight)}).Z({x:f,y:-(A.y-2*f)*(A.y/this.vF.dataGridHeight)}),this.iF.button1.setVisible(m).sr({x:A.x,y:f}).Z({x:f,y:f}),this.iF.buttonIcon1.setVisible(m).Hd(.5*f).Gd(0).Ed((new $n).appendSample({x:A.x+f/2,y:1.5*f}),{x:"x",y:"y"}),this.iF.button2.setVisible(m).sr({x:A.x,y:A.y}).Z({x:f,y:f}),this.iF.buttonIcon2.setVisible(m).Hd(.5*f).Gd(180).Ed((new $n).appendSample({x:A.x+f/2,y:A.y+f/2}),{x:"x",y:"y"});const x=a.x-f<this.vF.dataGridWidth,S=Math.max(a.y-this.vF.dataGridHeight-f,0);this.sF.background.setVisible(x).sr({x:0,y:S}).Z({x:A.x,y:f}),this.sF.scrollbar.setVisible(x).sr({x:f+(A.x-2*f)*(this.LT.x/this.vF.dataGridWidth),y:S}).Z({x:(A.x-2*f)*(A.x/this.vF.dataGridWidth),y:f}),this.sF.button1.setVisible(x).sr({x:0,y:S}).Z({x:f,y:f}),this.sF.buttonIcon1.setVisible(x).Hd(.5*f).Gd(90).Ed((new $n).appendSample({x:f/2,y:S+f/2}),{x:"x",y:"y"}),this.sF.button2.setVisible(x).sr({x:A.x-f,y:S}).Z({x:f,y:f}),this.sF.buttonIcon2.setVisible(x).Hd(.5*f).Gd(270).Ed((new $n).appendSample({x:A.x-f/2,y:S+f/2}),{x:"x",y:"y"}),this.UT.au([d,{x:d.x+A.x+(m?f:0),y:d.y},{x:d.x+A.x+(m?f:0),y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y-(x?f:0)},{x:d.x,y:d.y-A.y-(x?f:0)}])}this.rT=!1,this.hT=!1,this.nT=!1,this.oT=!1,this.aT=!1,this.lT=!1,this.uT=!1,this.cT=!1,this.dT=!1,this.fT=!1,this.AT=!1,this.gT=!1,this.pT=!1,this.vT=!1,this.yT=!1,this.mT=!1}AF(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.tT){const{content:r}=t,h={...this.OT,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof r||"number"==typeof r){const s=String(r);n=i.add(),l=n.tn(s).Ch(t.textFont||this.PT).Nh().bc()}if(Hd(r)&&(o=r,l={x:200,y:50}),pr(r)){const t=this.pi.mF(r);t.xF()?(a=r,l=a.kt()):t.SF((()=>{this.mT=!0,this.pi.Bs()}))}if(n||o||a){h.top=Math.round(h.top),h.left=Math.round(h.left),h.right=Math.round(h.right),h.bottom=Math.round(h.bottom);const i={x:Math.round(l.x+h.left+h.right+e.left+e.right),y:Math.round(l.y+h.top+h.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:h,cellMargin:e})}}return s}yF(t,i,s){const{cellsContentSizes:e,columnWidths:r,columnWidthsCumulative:h,rowHeights:n,rowHeightsCumulative:o}=i;this.YT.cr(this.ET),this.eT.clear();const a={cellBackground:this.jT.VA(),cellIconRect:this.WT.VA(),lineSet:this.ZT.VA(),line:this.JT.VA(),pointSet:this.QT.VA(),rect:this.KT.VA(),junction:this.qT.VA(),arc:this.tF.VA()},l=[];for(const i of e){const{cell:e,text:u,sparkChart:c,icon:d,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},p={x:t.x+h[e.column],y:t.y-o[e.row+e.rowSpan]},v={x:p.x+A.left,y:p.y+A.bottom},y={x:v.x+f.left,y:v.y+f.bottom},m={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+r[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+n[e.row+s]),0)},x={x:m.x-A.left-A.right,y:m.y-A.top-A.bottom},S={x:x.x-f.left-f.right,y:x.y-f.top-f.bottom};if(u){const t=Cf(y,S,e.contentAlignment||this.RT);u.sr(t[0]).Zl({x:t[1],y:t[2]}).qe(this.bF(e.textFillStyle||this.BT,e.content,this.BT)).Ii(e.highlight).qh(this.bi.dataGridTextShadow)}const b=this.bF(e.backgroundFillStyle||this.DT,e.content);if(b!==ae){const t=a.cellBackground.add();t.sr(p).Z(m).qe(b).Ke(Tt).Ii(e.highlight),this.eT.set(t,g)}const M=e.borders||this.CT;if(M&&kf(p,m,M,s,l),c){const t=y,i=S;Wd(c,a,this.FT,t,i,this.bi,this.Pg,e.highlight)}if(d){const t=d.kt(),i=Cf(y,S,e.contentAlignment||this.RT);a.cellIconRect.add().sr({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).Z(t).qe(new _t({source:d.Js,fitMode:exports.ImageFitMode.Stretch})).Ke(Tt).Ii(e.highlight)}}this.YT.Vi();for(const t of l)this.YT.Ho().wA(t[0],t[1]);a.cellBackground.finishPlot(),a.cellIconRect.finishPlot(),a.lineSet.finishPlot(),a.line.finishPlot(),a.pointSet.finishPlot(),a.rect.finishPlot(),a.junction.finishPlot(),a.arc.finishPlot()}gF(t,i){const s=new Array(t).fill(0);for(const t of this.ST.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),r=this.iT.find((i=>i.column===t)),h=r?Wt(e,void 0!==r.min?r.min:hs,void 0!==r.max?r.max:rs):e;s[t]=h}return s}pF(t,i){const s=new Array(t).fill(0);for(const t of this.xT.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),r=this.sT.find((i=>i.row===t)),h=r?Wt(e,void 0!==r.min?r.min:hs,void 0!==r.max?r.max:rs):e;s[t]=h}return s}bF(t,i,s){if(ye(t)){try{const s=Number(i);return new de({color:t.getPalette().getColors(s,void 0)})}catch(t){}return s||ae}return t}uF(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.BT):i,this.fT=!0,this.pi.Bs()}cF(t,i){t.textFont="function"==typeof i?i(t.textFont||this.PT):i,this.AT=!0,this.pi.Bs()}fF(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.DT):i,this.dT=!0,this.pi.Bs()}dF(t,i){t.contentAlignment=i,this.cT=!0,this.pi.Bs()}oF(t,i){t.padding={...t.padding,...i},this.uT=!0,this.pi.Bs()}hF(t,i,s){let e=this.kT(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.tT.push(e),this.oT=!0),"string"==typeof e.content||"number"==typeof e.content?this.hT=!0:this.nT=!0,this.pi.Bs()}lF(t){this.tT.forEach((i=>t(i)))}kT(t,i,s){const e=this.tT.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}nF(t,i){const s=this.tT.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}aF(t,i){const s=this.tT.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}HT(t){var i,s,e,r,h,n;if(this.vF){if(0!==t.y){const r=null!==(s=null===(i=this.vF.rowHeightsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>-this.LT.y+(t.y>0?1:0)>=i.value)))||void 0===i?void 0:i.index)&&void 0!==s?s:0,h=null!==(e=this.vF.rowHeightsCumulative[r+t.y])&&void 0!==e?e:0;this.LT.y=-h,this.yT=!0,this.pi.Bs()}if(0!==t.x){const i=null!==(h=null===(r=this.vF.columnWidthsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>this.LT.x+(t.x>0?1:0)>=i.value)))||void 0===r?void 0:r.index)&&void 0!==h?h:0,s=null!==(n=this.vF.columnWidthsCumulative[i+t.x])&&void 0!==n?n:0;this.LT.x=s,this.yT=!0,this.pi.Bs()}}}eF(t){this.vF&&(this.TT.x+=t.x,this.TT.y+=t.y,this.yT=!0,this.pi.Bs())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var _f;exports.DataGridCellContentAlignmentOptions=void 0,(_f=exports.DataGridCellContentAlignmentOptions||(exports.DataGridCellContentAlignmentOptions={})).Center="center",_f.RightCenter="right-center",_f.LeftCenter="left-center",_f.RightTop="right-top",_f.LeftTop="left-top",_f.RightBottom="right-bottom",_f.LeftBottom="left-bottom",_f.CenterTop="center-top",_f.CenterBottom="center-bottom";const kf=(t,i,s,e,r)=>{const h={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&r.push([n,a]),s.bottom&&r.push([h,o]),s.left&&r.push([h,n]),s.right&&r.push([o,a])},Cf=(t,i,s)=>{const e=t.x,r=t.x+i.x,h=t.x+i.x/2,n=t.y+i.y,o=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[a(e,l),-1,0];case"right-center":return[a(r,l),1,0];case"center":return[a(h,l),0,0];case"left-bottom":return[a(e,o),-1,-1];case"right-bottom":return[a(r,o),1,-1];case"center-bottom":return[a(h,o),0,-1];case"left-top":return[a(e,n),-1,1];case"right-top":return[a(r,n),1,1];case"center-top":return[a(h,n),0,1]}return $i(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Tf={top:!1,bottom:!1,left:!1,right:!1};class Ff extends Lh{constructor(t,i,s,e,r,h){super(t,{fn(){},dn(){},gn(){}},e,i,s,{numeric:i.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.D=new yt,this.chart=t,this.vs=h,this.Ws=r,this.Jr=r._n(t.MF).Ch(this.bi.barChartCategoryAxisTitleFont||this.bi.xAxisTitleFont).qe(this.bi.barChartCategoryAxisTitleFillStyle||this.bi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getWidth({x:0,y:-90})),this.Ih=this.vs.aA([this.Jr]).Ps(i.effectsText),this.wF=r.dr(t.MF).cr(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.fA=t,this.AA=t):"object"==typeof t&&(this.fA=t.min,this.AA=t.max),this.chart.pi.Bs(),this}getThickness(){return{min:this.fA,max:this.AA}}setStrokeStyle(t){return this.wF.cr(t),this.chart.pi.Bs(),this}getStrokeStyle(){return this.wF.do()}ir(t){const i=this.getInterval(),s=this.chart.valueAxis.getInterval();this.wF.gr(this.chart.Xs.toPoint(i.start,s.start)).Ar(this.chart.Xs.toPoint(i.end,s.start)).setVisible(this.di),this.Jr.sr(this.chart.Xs.toPoint(.5*(i.start+i.end),this.chart.valueAxis.ai.Qt(s.start,-t.pA))).Zl(this.chart.Xs.toPoint(0,1)).setVisible(this.di),t.ticksInfo.forEach(((t,i)=>{i.zh.sr(t.labelPosition).Zl(t.labelAlignment).Th(t.labelRotation).$l(t.labelOffset.x,t.labelOffset.y)}))}Yh(t){return{}}Xh(t,i,s,e){return{keyValue:t,tickLevel:i,labelText:s,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}sn(t,i){return new Ph(i,t,this.Ws,this.chart.MF)}Qh(t,i,s){const e=t.pA,r=this.chart.Xs.getHeight(this.Jr.Nh().bc());return{vA:r,yf:Wt(this.wF.do().ji()/2+e+r,void 0!==this.fA?this.fA:0,void 0!==this.AA?this.AA:rs),ticksInfo:i,updatedTicks:s}}Kr(){return this.chart.uiScale}vn(t,i){return i}xn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class If extends Lh{constructor(t,i,s,e,r,h,n){super(t,{fn:()=>{var i;if(t._F){if("positive"===t.kF||"bipolar"===t.kF){if("after-bar"===(null===(i=t.CF)||void 0===i?void 0:i.position)){const i=this.ai.wt();return this.ai.Qt(t._F.max,Math.min(this.chart.Xs.getHeight(this.chart.TF())+t.CF.labelMargin,.3*i))}return t._F.max}return t.FF?Wt(-1,-1e-6,t._F.max):0}},dn:()=>{var i;if(t._F){if("negative"===t.kF||"bipolar"===t.kF){if("after-bar"===(null===(i=t.CF)||void 0===i?void 0:i.position)){const i=this.ai.wt();return this.ai.Qt(t._F.min,-Math.min(this.chart.Xs.getHeight(this.chart.TF())+t.CF.labelMargin,.3*i))}return t._F.min}return t.FF?Wt(1,1e-6,t._F.min):0}},gn:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.D=new yt,this.chart=t,this.vs=h,this.Ws=r,this.Jr=r._n(t.MF).Ch(this.bi.barChartValueAxisTitleFont||this.bi.yAxisTitleFont).qe(this.bi.barChartValueAxisTitleFillStyle||this.bi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getHeight({x:0,y:-90})),this.Ih=this.vs.aA([this.Jr]).Ps(i.effectsText),this.wF=r.dr(t.MF).cr(i.barChartValueAxisStrokeStyle||this.bi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.fA=t,this.AA=t):"object"==typeof t&&(this.fA=t.min,this.AA=t.max),this.chart.pi.Bs(),this}getThickness(){return{min:this.fA,max:this.AA}}setStrokeStyle(t){return this.wF.cr(t),this.chart.pi.Bs(),this}getStrokeStyle(){return this.wF.do()}setTickStrategy(t,i){return super.fh(t,i)}ir(t){const i=this.getInterval();this.wF.gr(this.chart.Xs.toPoint(-.5,this.Ah)).Ar(this.chart.Xs.toPoint(-.5,this.gh)).setVisible(this.di);const s="logarithmic"===this.uh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Xs.toPoint(this.chart.categoryAxis.ai.Qt(-.5,t.pA*this.chart.Xs.IF),s),r=this.chart.Xs.toPoint(this.chart.Xs.LF,0);this.Jr.sr(e).Zl(r).setVisible(this.di),t.ticksInfo.forEach(((i,s)=>{s.zh.sr(i.labelPosition).Zl(i.labelAlignment).Th(i.labelRotation).$l(i.labelOffset.x,i.labelOffset.y);const e=s.kn.Fr;e.tickStyle!==Tt&&0!==e.tickLength&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.tickStyle}),e.gridStrokeStyle!==Tt&&e.gridStrokeLength>0&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionGridlineEnd]},{lineStyle:e.gridStrokeStyle})}))}Yh(t){return{}}Xh(t,i,s,e,r){const h=i.Fr,n=this.chart.Xs.toPoint(-.5,t),o=this.chart.MF.Qt(n,this.chart.Xs.toPoint(h.getTickLength()*this.chart.Xs.IF,0)),a=this.chart.MF.Qt(n,this.chart.Xs.toPoint(h.gridStrokeLength*e.oppositeAxisSize*-this.chart.Xs.IF,0));return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.chart.MF.Qt(o,this.chart.Xs.toPoint(h.getTickPadding()*this.chart.Xs.IF,0)),labelAlignment:this.chart.Xs.toPoint(this.chart.Xs.LF,h.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:i.Fr.labelRotation,positionTicklineStart:n,positionTicklineEnd:o,positionGridlineEnd:a}}sn(t,i){return new Ph(i,t,this.Ws,this.chart.MF)}Qh(t,i,s){let e=0;for(const t of this.Pr.values())for(const i of t.values()){const t=i.kn.Fr,s=this.chart.Xs.getWidth(i.zh.Nh().bc()),r=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,r)}const r=e+this.wF.do().ji()/2,h=this.chart.Xs.getWidth(this.Jr.Nh().bc());return{pA:r,vA:h,yf:Wt(r+h,void 0!==this.fA?this.fA:0,void 0!==this.AA?this.AA:rs),ticksInfo:i,updatedTicks:s}}Kr(){return this.chart.MF}vn(t,i){return"linear"===this.uh.type?Ie(t,i,this.ai):Le(t,i,this.ai)}xn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class Lf extends Su{constructor(t,i,s,e,r,h,n){super(t,i,s,e),this.xi=Zi(),this.M=0,this.PF=!1,this.D=new yt,this.chart=t,this.chart=t,this.category=r,this.subCategory=h,this.Rs=r,this.Ze=Ei(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Je=Ei(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.addEventListener("visiblechange",(()=>this.chart.BF())),this.addEventListener("dispose",(()=>{this.chart.BF(),this.chart.DF.delete(this.category),this.chart.EF.delete(this)}))}Qi(t,i,s){const e=this.chart.pi.il(i);return{cursorPosition:{pointMarker:{x:e.engineX,y:e.engineY},pointMarkerScale:this.chart.pi.ai,resultTable:{x:e.engineX,y:e.engineY},resultTableScale:this.chart.pi.ai},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.PF=!0,this.M=t,this.chart.BF(),this.chart.pi.Bs(),this.chart.DF.delete(this.category),this.chart.EF.delete(this),this}getValue(){return this.M}get value(){return this.M}setFillStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.chart.BF(),this}getFillStyle(){return this.Ze}setStrokeStyle(t){return this.Je="function"==typeof t?t(this.Je):t,this.chart.BF(),this}getStrokeStyle(){return this.Je}xp(){return this.rp}setEffect(t){return this.chart.setBarsEffect(t),this}er(){return{fill:this.Ze,lutValue:this.value}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Pf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class Bf extends fl{constructor(t,i,s,e,r,h,n){var o,a;let l;super(t,i,s,i.Hg("barChart bg",0),e,i.pi.bi.barChartBackgroundFillStyle||i.pi.bi.chartXYBackgroundFillStyle,i.pi.bi.barChartBackgroundStrokeStyle||i.pi.bi.chartXYBackgroundStrokeStyle,i.pi.bi.barChartTitleFont||i.pi.bi.chartXYTitleFont,i.pi.bi.barChartTitleFillStyle||i.pi.bi.chartXYTitleFillStyle,i.pi.bi.barChartTitleShadow||i.pi.bi.chartXYTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.coordsBars="barChart",this.RF=Df.Descending,this.OF=this.bi.barChartCategoryLabels,this.CF=this.bi.barChartValueLabelsAfterBars,this.zF=!0,this.rb=Wi(),this.DF=new Map,this.EF=new Map,this.kF="positive",this.VF="columns",this.NF=!0,this.GF=new Map,this.$F={speed:1},this.yk={speed:1},this.UF=.08,this.YF=[],this.jF=new Map,this.HF=!1,this.WF={left:2,right:2,top:2,bottom:2},this.XF=[],this.xa=t=>{this.MF.Z(t.engineWidth,t.engineHeight),this.HF=!0},this.D=new yt,this.pi.La(jh.Mo),this.ZF=this.bi.barChartCornerRadius,this.Xs="horizontal"===(null==n?void 0:n.type)?Rf:Ef,this.Yr.tn("Bar Chart"),this.JF=i.Om("barChart plotting 1",0),this.QF=i.Om("barChart plotting 2",1),this.FF="logarithmic"===(null===(a=null==n?void 0:n.valueAxis)||void 0===a?void 0:a.type),this.FF?"horizontal"===this.Xs.KF?(l=s.d1({scale1DConstructor:H,dimension:"y"}),this.MF=(new J).Kt(s.d1({scale1DConstructor:js,dimension:"x"}),l)):(l=s.d1({scale1DConstructor:H,dimension:"x"}),this.MF=(new J).Kt(l,s.d1({scale1DConstructor:js,dimension:"y"}))):(this.MF=s.d2({scaleXYConstructor:Z}),l=this.Xs.getWidth(this.MF)),this.qF=this.vs.aA(),this.nb=new qa((()=>this.rb.Ji(this.JF.md(this.MF).nl(0))),((t,i,s)=>(t.qe(s.fillStyle).Ke(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.Ho();return s.Md(i.x1,i.y1,i.x2,i.y2).bd(i.rounding),this.rb.Ki(s,i.bar),i.bar.Ts([s]),s})))),(()=>{this.rb.Vi()}),(t=>{this.qF.ks(t)})),this.yv=this.Ig.tr(this.MF).qe(this.bi.barChartSeriesBackgroundFillStyle||ae).Ke(Tt),this.mv=this.Ig.tr(this.MF).qe(ae).Ke(this.bi.barChartSeriesBackgroundStrokeStyle||Tt).setPointerEvents(!1),super.vv(this.yv,this.mv),this.categoryAxis=new Ff(this,this.bi,!1!==(null==n?void 0:n.animationsEnabled),l,this.QF,this.vs),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const u=Fe(null==n?void 0:n.valueAxis);this.valueAxis=new If(this,this.bi,!1!==(null==n?void 0:n.animationsEnabled),this.Xs.getHeight(this.MF),this.QF,this.vs,u.type),this.tI=new La((()=>this.QF._n(this.MF).wn(Xi).Mn(Xi).nl(1))),this.iI=new qa((()=>this.Ig.bA(this.MF).setPointerEvents(!1)),((t,i,s)=>(t.cr(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.Ho()).wA(i[0],i[1]))))));const c=i.Ym(),d=Zt(n?n.cursorBuilder:void 0,Yl);this.jm=oA(this,c,d.Am(c,this.uiScale,this.uiScale,jt,this.bi),this,"show-pointed",Of,(()=>0)),this.addEventListener("resize",this.xa),this.jg(r,this.MF),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),void 0!==(null==n?void 0:n.legend)&&this.legend.setOptions(n.legend)}getSeries(){return this.fv}setCornerRadius(t){return this.ZF=t,this.zF=!0,this.pi.Bs(),this}getCornerRadius(){return this.ZF}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Yl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}setBarsMargin(t){return this.UF=Wt(t,0,.49),this.zF=!0,this.pi.Bs(),this}getBarsMargin(){return this.UF}setBarsEffect(t){return this.qF.Ps(t),this.pi.Bs(),this}getBarsEffect(){return this.qF.Ds()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.sI("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:r}=i;r.forEach(((i,r)=>{const h=t[r];s.push({category:h,subCategory:e,value:i})}))})),this.sI("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:r}=i;r.forEach(((i,r)=>{const h=t[r];s.push({category:h,subCategory:e,value:i})}))})),this.sI("groups",s),this}sI(t,i){this.fv.length>0&&this.pi.La(jh.Ro),this.VF=t,this.XF=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.eI(i);const s=Vi(i.map((t=>t.category))),e=s.length,r=Vi(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((i=>{let e=this.fv.find((t=>t.category===i.category&&t.subCategory===i.subCategory));if(!e){const h=s.indexOf(i.category),n=void 0!==i.subCategory&&r.includes(i.subCategory)?r.indexOf(i.subCategory):void 0;e=new Lf(this,this.gv,this.bi,this.pi.vs,i.category,i.subCategory,Zt(n,h)),this.xv(e,"groups"===t||"stacks"===t?{legend:null}:void 0),this.GF.set(e,{category:h,valueStart:this.FF?1e-6:0,valueEnd:void 0!==i.value?i.value:0})}void 0!==i.value&&e.setValue(i.value)})),this.fv.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.GF.delete(t))})),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:Math.max(e,1)-.5},y:{start:Math.max(e,1)-.5,end:-.5}})),this._F=0===this.fv.length?void 0:"stacks"!==t?this.fv.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:rs,max:hs}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this._F&&(this.kF=this._F.min>=0?"positive":this._F.max<=0?"negative":"bipolar",("bipolar"===this.kF||"negative"===this.kF)&&this.FF))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.rI&&this.rI(),"groups"===t||"stacks"===t){const t=r.map((t=>(t=>{let i=!1;const s=new Array;return t.forEach((e=>{const r=s=>{i||(i=!0,t.forEach((t=>e!==t?t.setHighlight(s.highlight):void 0)),i=!1)};e.addEventListener("highlightchange",r),s.push((()=>e.removeEventListener("highlightchange",r)))})),t.forEach((i=>{const e=()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)};i.addEventListener("dispose",e),s.push((()=>i.removeEventListener("dispose",e)))})),()=>{s.forEach((t=>t()))}})(this.fv.filter((i=>i.subCategory===t)))));this.rI=()=>t.forEach((t=>t()))}const h=new Set(r);for(const t of this.jF.keys())h.has(t)||(this.Os.forEach((i=>{if(i.xg()){const s=i.getEntries(),e=this.jF.get(t),r=s.find((t=>t.component===e));e&&r&&i.remove(e)}})),this.jF.delete(t));this.Os.forEach((t=>{t.xg()&&t.add(this)})),this.eI(this.fv),this.DF.clear(),this.EF.clear(),this.zF=!0,this.pi.Bs()}setCategoryLabels(t){const i="function"==typeof t?this.OF?t(this.OF):this.OF:t;return this.OF=i?{...this.bi.barChartCategoryLabels,...i}:void 0,this.DF.clear(),this.pi.Bs(),this.HF=!0,this}getCategoryLabels(){return this.OF}setValueLabels(t){var i;const s="function"==typeof t?this.CF?t(this.CF):this.CF:t,e=(null==s?void 0:s.position)||(null===(i=this.CF)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.CF={...this.bi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.CF={...this.bi.barChartValueLabelsInsideBars,...s}):this.CF=void 0,this.EF.clear(),this.pi.Bs(),this.HF=!0,this}getValueLabels(){return this.CF}setLabelFittingEnabled(t){return this.NF=t,this.pi.Bs(),this}getLabelFittingEnabled(){return this.NF}setLabelFittingMargins(t){return this.WF="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:Xi,this.HF=!0,this.pi.Bs(),this}getLabelFittingMargins(){return this.WF}getBar(t,i){if(("groups"===this.VF||"stacks"===this.VF)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.fv.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.fv}setSorting(t){this.RF=t;const i=this.fv.slice();return this.fv.length=0,this.fv.push(...Ni(this.XF.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.eI(this.fv),this.pi.Bs(),this.zF=!0,this}getSorting(){return this.RF}setAnimationCategoryPosition(t,i=1){return this.$F=t?{speed:i}:void 0,this.pi.Bs(),this}setAnimationValues(t,i=1){return this.yk=t?{speed:i}:void 0,this.pi.Bs(),this}translateCoordinate(t,i,s){if(s&&Me(t)&&be(i))return super.translateCoordinate(t,i,s);const e=i;let r;if(Se(t))r=this.pi.il(t);else if(Me(t)){const i=q(t,this.eA,this.pi.ai);r={engineX:i.x,engineY:i.y}}else{if(!Pf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=q(this.Xs.toPoint(t.iCategory,t.value),this.MF,this.pi.ai);r={engineX:i.x,engineY:i.y}}}if(xe(e))return this.pi.sl(r);if("barChart"===e){const t=q({x:r.engineX,y:r.engineY},this.pi.ai,this.MF);return{iCategory:this.Xs.getWidth(t),value:this.Xs.getHeight(t)}}if(be(e))return q({x:r.engineX,y:r.engineY},this.pi.ai,this.eA);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}bg(){if("columns"===this.VF)return this.fv;const t=Vi(Ni(this.fv.map((t=>t.subCategory))));return Ni(t.map((t=>{if(this.jF.has(t))return this.jF.get(t);const i=this.fv.filter((i=>i.subCategory===t)),s=i[0];if(!s)return;const e={Ys:()=>{},getVisible:()=>s.getVisible(),setVisible:t=>{i.forEach((i=>i.setVisible(t)))},getName:()=>t,er:()=>s.er()};return this.jF.set(t,e),e})))}ir(t){var i,s,e;super.ir(t);const r=this.tI.VA(),h=this.iI.VA(),n=this.fv.filter((t=>t.getVisible()&&t.PF)),o=Vi(n.map((t=>t.category))),a=Vi(Ni(n.map((t=>t.subCategory)))),l=5e-4*t*((null===(i=this.$F)||void 0===i?void 0:i.speed)||0),u=.003*t*((null===(s=this.$F)||void 0===s?void 0:s.speed)||0),c=this.valueAxis.ai,d=c instanceof H?(t,i)=>{var s;return Ie(t,i,c,(null===(s=this.yk)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return Le(t,i,c,(null===(s=this.yk)||void 0===s?void 0:s.speed)||0)};let f;const A=null!==(e="positive"===this.kF&&this._F?Math.min(this._F.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this._F.max-this._F.min):"negative"===this.kF&&this._F?Math.max(this._F.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this._F.max-this._F.min):void 0)&&void 0!==e?e:0;"columns"===this.VF?f=n.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.FF?1e-6:A,valueEnd:t.value}}))):"groups"===this.VF?f=n.map((t=>{const i=o.indexOf(t.category),s=a.indexOf(t.subCategory),e=1/(a.length+2*(a.length+1)*this.UF),r=this.UF*e;return{bar:t,position:{category:i+(s-(a.length-1)/2)*(e+r),valueStart:this.FF?1e-6:A,valueEnd:t.value}}})):(f=[],o.forEach((t=>{const i=n.filter((i=>i.category===t));let s=this.FF?1e-6:0;i.forEach((i=>{f.push({bar:i,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+i.value}}),s+=i.value}))}))),f.forEach((t=>{const{bar:i,position:s}=t;let e,r,h=this.GF.get(i);void 0===h&&(h=s);const n=s.valueStart;if(this.$F&&h.category!==s.category){const t=Math.sign(s.category-h.category);e=h.category+l*t+u*(s.category-h.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.yk&&h.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-h.valueEnd);r=d(h.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-r)&&(r=s.valueEnd)}else r=s.valueEnd;this.GF.set(i,{category:e,valueStart:n,valueEnd:r}),e===s.category&&r===s.valueEnd||this.pi.Bs(!0),e===h.category&&r===h.valueEnd||(this.zF=!0)}));const g=[...this.fv];(this.YF.length!==g.length||this.YF.some(((t,i)=>t!==g[i])))&&(this.Os.forEach((t=>t.Sg(this.fv))),this.YF=g);const p=Ha.tp(this.Yr,this.Wg),v=this.Os.reduce(((t,i)=>{const s=i.Nh(p,this.Gn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,v);const y=n.length>0;this.categoryAxis.pn(),this.valueAxis.pn();const{labelMarginBeforeCategoryAxisPixels:m,labels:x}=y?this.hI(o,a,n,r,h):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},S=this.categoryAxis.Nh({physicalAxisSize:this.categoryAxis.ai.wt(),pA:m}),b=this.valueAxis.Nh({plotLines:h,physicalAxisSize:this.valueAxis.ai.wt(),oppositeAxisSize:this.Xs.getWidth(this.MF).wt()});this.MF.ti([this.ot.bottom+this.Gn.bottom+v.bottom+("vertical"===this.Xs.KF?S.yf:0),this.ot.top+this.Gn.top+p+v.top+("horizontal"===this.Xs.KF?b.yf:0)]),this.MF.qt([this.ot.left+this.Gn.left+v.left+this.Xs.getHeight({x:S.yf,y:b.yf}),this.ot.right+this.Gn.right+v.right]),this.JF.Tm({x:this.MF.x.bt(),y:this.MF.y.bt(),width:this.MF.x.wt(),height:this.MF.y.wt()}),this.kg&&this.kg();const M={x:Math.min(this.MF.x.getInnerStart(),this.MF.x.getInnerEnd()),y:Math.min(this.MF.y.getInnerStart(),this.MF.y.getInnerEnd())},w=Math.max(this.MF.x.getInnerStart(),this.MF.x.getInnerEnd()),_=Math.max(this.MF.y.getInnerStart(),this.MF.y.getInnerEnd()),k={x:w-M.x,y:_-M.y};if(this.yv.sr(M),this.yv.Z(k),this.mv.sr(M),this.mv.Z(k),this.categoryAxis.ir(S),this.valueAxis.ir(b),super.Yg(),this.jm.ir(!1,this.fv,void 0),(this.zF||this.HF)&&this.NF){const t=x.map((t=>{const i=t.setVisible(!0).Nh().mc();if(0!==this.WF.bottom||0!==this.WF.left||0!==this.WF.right||0!==this.WF.top){const s=Math.sign(this.MF.x.U-this.MF.x.$),e=Math.sign(this.MF.y.U-this.MF.y.$),r=e>0?i.min.y:i.max.y,h=e>0?i.max.y:i.min.y,n=s>0?i.min.x:i.max.x,o=s>0?i.max.x:i.min.x,a=t.ai.Qt({x:n,y:r},{x:-this.WF.left,y:-this.WF.bottom}),l=t.ai.Qt({x:o,y:h},{x:this.WF.right,y:this.WF.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return i}));for(let i=0;i<x.length;i+=1){if(!x[i].getVisible())continue;const s=t[i];let e;do{e=x.findIndex(((e,r)=>r!==i&&x[r].getVisible()&&ls(s,t[r]))),e>=0&&x[e].setVisible(!1)}while(e>=0)}}if(this.zF){const t=this.nb.VA(),i="groups"===this.VF?1/(a.length+2*(a.length+1)*this.UF):1-2*this.UF;n.forEach((s=>{const e=this.GF.get(s);if(void 0===e)return;const r=e.category-.5*i,h=e.category+.5*i,n=this.Xs.toPoint(r,e.valueStart),o=this.Xs.toPoint(h,e.valueEnd);let l;this.ZF&&(l={extent:this.ZF,c_x1_y2:"vertical"===this.Xs.KF,c_x2_y2:"vertical"===this.Xs.KF||"horizontal"===this.Xs.KF,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Xs.KF},"stacks"===this.VF&&s.subCategory&&a.indexOf(s.subCategory)!==a.length-1&&(l=void 0)),t.add({xi:s.xi,bar:s,x1:n.x,y1:n.y,x2:o.x,y2:o.y,rounding:l},{fillStyle:s.Ze,strokeStyle:s.Je})})),t.finishPlot()}r.finishPlot(),h.finishPlot(),this.zF=!1,this.HF=!1,this.Os.forEach((t=>t.ir(p,this.Gn)))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.QF.G(),this.JF.G(),this.jm.G(),super.dispose()}eI(t){const i=this.RF;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}hI(t,i,s,e,r){let h=0;const n=this.OF,o=this.CF,a=this.valueAxis.getInterval(),l=[];if(n&&n.labelFillStyle!==ae){const i=n.tickLength+n.labelMargin,o=this.Xs.toPoint(n.labelAlignment,1),u={af:t.map(((t,e)=>{const r=s.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=n.formatter(t,r);if(!h)return;const l=e;return void 0!==l?{text:h,position:this.Xs.toPoint(l,this.valueAxis.ai.Qt(a.start,-i)),alignment:o,rotation:n.labelRotation,sizePixels:this.nI(t,r)}:void 0})),qn:n.labelFont,ai:this.MF};u.af.forEach((t=>{t&&l.push(e.add().tn(t.text).sr(t.position).Zl(t.alignment).Th(t.rotation).qe(n.labelFillStyle).Ch(n.labelFont).qh(n.labelShadow))})),n.tickStyle!==Tt&&0!==n.tickLength&&u.af.forEach((t=>{if(!t)return;const i=this.Xs.getWidth(t.position);r.add({positions:[this.Xs.toPoint(i,this.valueAxis.ai.getInnerStart()),this.Xs.toPoint(i,this.valueAxis.ai.Qt(a.start,-n.tickLength))]},{lineStyle:n.tickStyle})})),h=u.af.reduce(((t,i)=>i?Math.max(t,this.Xs.getHeight(i.sizePixels)):t),0)+n.tickLength+n.labelMargin}if(o&&o.labelFillStyle!==ae){const r={af:[],qn:o.labelFont,ai:this.MF};"stacks"===this.VF&&o.displayStackedSum&&r.af.push(...t.map(((t,e)=>{const r=s.reduce(((i,s)=>i+(s.category===t?s.value:0)),0),h=o.formatter({chart:this,bar:void 0,category:t,value:r,subCategory:void 0});if(!h)return;const n=s.filter((i=>i.category===t)).sort(((t,s)=>{var e,r;return i.indexOf(null!==(e=t.subCategory)&&void 0!==e?e:"")-i.indexOf(null!==(r=s.subCategory)&&void 0!==r?r:"")})),a=n[n.length-1],l=this.GF.get(a);return void 0!==l?{text:h,position:this.Xs.toPoint(l.category,this.valueAxis.ai.Qt(l.valueEnd,o.labelMargin*Math.sign(l.valueEnd))),alignment:this.Xs.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:o.labelRotation,sizePixels:this.pi.th.Tr(h,o.labelFont,o.labelRotation)}:void 0}))),"after-bar"!==o.position||"stacks"===this.VF&&!o.displayStackedIndividuals?"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||r.af.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.GF.get(t);if(void 0===e)return;const r="bipolar"===this.kF?Math.sign(e.valueEnd):"negative"===this.kF?-1:1,h=this.Xs.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*r:"inside-bar-centered"===o.position?0:-1*r);return{text:s,position:this.Xs.toPoint(e.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.ai.Qt(e.valueEnd,-o.labelMargin*r):"inside-bar-centered"===o.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ai.Qt(e.valueStart,o.labelMargin*r)),alignment:h,rotation:o.labelRotation,sizePixels:this.oI(t)}}))):r.af.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.GF.get(t);return void 0!==e?{text:s,position:this.Xs.toPoint(e.category,this.valueAxis.ai.Qt(e.valueEnd,o.labelMargin*Math.sign(e.valueEnd))),alignment:this.Xs.toPoint(o.labelAlignment,-1*Math.sign(e.valueEnd)),rotation:o.labelRotation,sizePixels:this.oI(t)}:void 0}))),r&&r.af.forEach((t=>{t&&l.push(e.add().tn(t.text).sr(t.position).Zl(t.alignment).Th(t.rotation).qe(o.labelFillStyle).Ch(o.labelFont).qh(o.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:h,labels:l}}nI(t,i){if(!this.OF||this.OF.labelFillStyle===ae)return{x:0,y:0};const s=this.DF.get(t);if(s)return s;const e=this.OF.formatter(t,i),r=this.pi.th.Tr(e,this.OF.labelFont,this.OF.labelRotation);return r.isEstimate?this.pi.Bs(!0):this.DF.set(t,r),r}oI(t){if(!this.CF||this.CF.labelFillStyle===ae)return{x:0,y:0};const i=this.EF.get(t);if(i)return i;const s=this.pi.th.Tr(this.CF.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.CF.labelFont,this.CF.labelRotation);return s.isEstimate?this.pi.Bs(!0):this.EF.set(t,s),s}TF(){return this.fv.reduce(((t,i)=>{const s=this.oI(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}BF(){this.zF=!0,this.pi.Bs()}j(){return super.j(),this.MF.j(),this}H(){return super.H(),this.MF.H(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Df={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Ef={...Go,KF:"vertical",IF:-1,LF:1},Rf={...$o,KF:"horizontal",IF:1,LF:-1},Of=(t,i,s)=>{const e=[[{component:i.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],r=t.valueAxis.getTitle();return r&&e.push([r]),i.subCategory?e.push([i.subCategory,"",{text:Te(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:Te(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},zf=(t,i)=>Math.abs(t)+Math.abs(i);function Vf(t,i){const s=t.reduce(zf,0),e=(r=t,Math.max(...r.map((t=>t))));var r;const h=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*h))}const Nf=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},Gf=({data:t,dimensions:i})=>{const{x:s,y:e,width:r,height:h}=i,n=t.map((t=>t.value)).reduce(zf,0),o=t.map((t=>t.animatedValue)).reduce(zf,0),a=t.map((t=>t.animatedValue*h*r/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:r,height:h,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else Uf(c,Nf(d).value,t,d);return d.children},$f=(t,i,s,e,r)=>{const h=t.reduce(zf,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/h,{x:o,y:a,children:l}=r,u=e[l.length],c={...u,x:o,y:a,width:s?h:n,height:s?n:h,userNode:{...u.userNode,value:u.value}};s?r.y-=n:r.x+=n,l.push(c)})),s?(r.x+=h,r.y+=i,r.width-=h):(r.x-=i,r.y-=h,r.height-=h)},Uf=(t,i,s,e)=>{const r=[{children:t,width:i,row:[]}];for(;r.length>0;){const t=r.pop();if(!t)continue;const{children:i,width:h,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=Vf(a,h),l=Vf(t,h);if(!(0===a.length||n>l)){$f(a,h,Nf(e).vertical,s,e),r.push({children:i.slice(o),width:Nf(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&$f(a,h,Nf(e).vertical,s,e)}};class Yf extends ja{constructor(t,i,s,e,r,h,n){var o;if(super(t,i,s,i.Hg("treeMapChart bg",0),e,i.pi.bi.treeMapChartBackgroundFillStyle||i.pi.bi.chartXYSeriesBackgroundFillStyle,i.pi.bi.treeMapChartBackgroundStrokeStyle||i.pi.bi.chartXYBackgroundStrokeStyle,i.pi.bi.treeMapChartTitleFont||i.pi.bi.chartXYTitleFont,i.pi.bi.treeMapChartTitleFillStyle||i.pi.bi.chartXYTitleFillStyle,i.pi.bi.treeMapChartTitleShadow||i.pi.bi.chartXYTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.aI=new Map,this.lI=[],this.uI={},this.cI=g([]),this.yk={speed:1},this.dI=rs,this.fI="Go Back",this.AI=[],this.gI=this.bi.treeMapChartPathLabelFillStyle||this.bi.uiTextFillStyle,this.pI=this.bi.treeMapChartPathLabelFont||this.bi.uiTextFont,this.vI=this.bi.treeMapChartLabelHeaderFillStyle||this.bi.uiTextFillStyle,this.yI=this.bi.treeMapChartLabelHeaderFont||this.bi.uiTextFont,this.mI=this.bi.treeMapChartLabelFillStyle||this.bi.uiTextFillStyle,this.xI=this.bi.treeMapChartLabelFont||this.bi.uiTextFont,this.gx=!0,this.tg=!1,this.SI=this.bi.treeMapChartParentColor||T,this.bI=this.bi.treeMapChartNodeStrokeStyle||this.bi.uiBackgroundStrokeStyle,this.MI=Xi,this.eb=this.bi.treeMapChartCornerRadius,this.yx=()=>{this.pi.Bs(),this.tg=!0},this.wI=(t,i)=>{var s;const{collectionMember:e}=i,r=this._I(e);r&&(this.Dx=this.kI(r,t),this.gx&&this.pi.Ms.Vs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(exports.MouseStyles.Point),this.pi.Bs())},this.CI=(t,i)=>{const{collectionMember:s}=i;this._I(s)&&(this.Dx=void 0,this.gx&&this.pi.Ms.Vs(s,!1),this.engine.setMouseStyle(exports.MouseStyles.Default),this.pi.Bs())},this.TI=(t,i)=>{var s;const{collectionMember:e}=i,r=this._I(e);r&&(this.Dx=this.kI(r,t),this.gx&&this.pi.Ms.Vs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(exports.MouseStyles.Point),this.pi.Bs())},this.FI=(t,i)=>{var s;if(t.defaultPrevented)return;const{collectionMember:e}=i,r=this._I(e);if(r){if(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click){const i=(null==r?void 0:r.children.length)?r:r.parentID?this.uI[r.parentID]:void 0;i&&(this.cI.C([i]),this.Dx=void 0,this.D.R("viewchange",{nodes:this.cI.T().map((t=>t.userNode))}),this.tg=!0),t&&di(t)}this.pi.Bs()}},this.II=t=>{const i=this.uI[this.AI[t].id]?[this.uI[this.AI[t].id]]:this.lI;this.cI.C(i),this.D.R("viewchange",{nodes:i.map((t=>t.userNode))}),this.tg=!0,this.pi.Bs()},this.nodes=new yt,this.D=new yt,this.bi.treeMapChartNodeColors)this.LI=this.bi.treeMapChartNodeColors;else{const t=this.bi.pointSeriesFillStyle,i=t=>fe(t)?t.getColor():T;this.LI="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.pi.La(jh.Vo),this.Pk=i.Rm("TreeMapChart plotting",0),this.Bk=i.Rm("TreeMap UI plotting",1),this.addEventListener("resize",this.yx),this.Yr.tn("TreeMap Chart");const a=i.Ym(),l=Zt(h?h.cursorBuilder:void 0,Hl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),void 0,"show-pointed",jf,(()=>0)),this.BI=this.vs.aA(),this.jg(r,this.uiScale),this.ff=this.Pk.md(this.eA).qe(new Ae).Ke(this.bI),this.DI=this.pi.Ms.jo(this,{animationEnabled:!1!==(null==h?void 0:h.animationsEnabled)}),this.EI=new La((()=>this.Bk._n(this.eA).setPointerEvents(!1))),this.RI=new La((()=>this.Bk._n(this.uiScale))),this.ff.setPointerEvents(!0),this.nodes.Ni(this.ff,(t=>{const i=this._I(t);if(i)return i.userNode})),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.ff.addEventListener("pointerenter",this.wI),this.ff.addEventListener("pointerleave",this.CI),this.ff.addEventListener("click",this.FI),this.ff.addEventListener("pointermove",this.TI),void 0!==(null==h?void 0:h.legend)&&this.legend.setOptions(h.legend)}setCornerRadius(t){return this.eb=t,this.tg=!0,this.pi.Bs(),this}getCornerRadius(){return this.eb}setData(t){t=Array.isArray(t)?t.slice():[t];const{OI:i}=(()=>{let t=0;return{OI:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),r=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:h,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:h.name,value:Number(h.value)||0,animatedValue:Number(h.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:h};n?n.children.push(o):r.push(o),null===(s=h.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const h=t=>{t.children.forEach(h),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};r.forEach(h);const n=1===i.length?r[0].children:r;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),r}}})(),s=i(t);return s.forEach((t=>{const i=this.uI[t.id];i&&this.zI(t,i)})),this.Dx=void 0,this.cI.C(s),this.lI=s,this.uI=this.VI(s),this.tg=!0,this.pi.Bs(),this}setAnimationValues(t,i=1){return this.yk=t?{speed:i}:void 0,this.pi.Bs(),this}setInitPathButtonText(t){return this.fI=t,this.tg=!0,this.pi.Bs(),this}setDisplayedLevelsCount(t){return this.dI=t,this.tg=!0,this.pi.Bs(),this}setDrillDownNode(t){var i,s;if(this.Dx=void 0,void 0===t)this.cI.C(this.lI);else{const e=[...this.lI];for(;e.length>0;){const r=e.pop();if(r){if(void 0!==r.value&&r.userNode===t||r.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.uI[r.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=r.children.length?r:r.parentID?this.uI[r.parentID]:this.lI[0];this.cI.C([t]);break}if(r.children)for(let t=r.children.length-1;t>=0;t-=1)e.push(r.children[t])}}}return this.D.R("viewchange",{nodes:this.cI.T().map((t=>t.userNode))}),this.tg=!0,this.pi.Bs(),this}setNodeColoring(t){return t instanceof Array?(this.ff.qe(new Ae),this.LI=t):(this.ff.qe(t),this.Os.forEach((t=>{t.xg()&&t.add(this)}))),this.Os.forEach((t=>t.zs())),this.tg=!0,this.pi.Bs(),this}setParentNodeColor(t){return this.SI=t,this.tg=!0,this.pi.Bs(),this}setPathLabelFillStyle(t){return this.gI="function"==typeof t?t(this.gI):t,this.tg=!0,this.pi.Bs(),this}getPathLabelFillStyle(){return this.gI}setPathLabelFont(t){return P(t)?this.pI=t:this.pI=t(this.pI),this.tg=!0,this.pi.Bs(),this}getPathLabelFont(){return this.pI}setHeaderFont(t){return P(t)?this.yI=t:this.yI=t(this.yI),this.tg=!0,this.pi.Bs(),this}getHeaderFont(){return this.yI}setHeaderFillStyle(t){return this.vI="function"==typeof t?t(this.vI):t,this.tg=!0,this.pi.Bs(),this}getHeaderFillStyle(){return this.vI}setLabelFont(t){return P(t)?this.xI=t:this.xI=t(this.xI),this.tg=!0,this.pi.Bs(),this}getLabelFont(){return this.xI}setLabelFillStyle(t){return this.mI="function"==typeof t?t(this.mI):t,this.tg=!0,this.pi.Bs(),this}getLabelFillStyle(){return this.mI}setNodeBorderStyle(t){return this.ff.Ke(t),this.tg=!0,this.pi.Bs(),this}getNodeBorderStyle(){return this.ff.Ja()}setNodeEffect(t){return this.BI.Ps(t),this.pi.Bs(),this}getNodeEffect(){return this.BI.Ds()}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Hl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}setAnimationHighlight(t){return this.DI.Xo(t),this}getAnimationHighlight(){return this.DI.Zo()}setHighlightOnHover(t){return this.gx=t,this}getHighlightOnHover(){return this.gx}kI(t,i){const s=this.pi.il(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.pi.ai,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.pi.ai},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}bg(){return[this]}ir(t){super.ir(t),super.Yg();const i=Ha.tp(this.Yr,this.Wg),s=this.Os.reduce(((t,s)=>{const e=s.Nh(i,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});if(s.bottom===this.MI.bottom&&s.right===this.MI.right&&s.top===this.MI.top&&s.left===this.MI.left||(this.tg=!0,this.MI=s),Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,s),this.tg&&this.cI.T().length){this.ff.Vi(),this.aI.clear(),this.DI.Wo(),this.Er&&this.NI(t);const e=Gf({data:this.cI.T(),dimensions:{x:0+this.Gn.left+s.left,y:this.eA.y.getInnerEnd()-i-this.Gn.top-s.top,width:this.eA.x.getInnerEnd()-this.Gn.right-this.Gn.left-s.right-s.left,height:this.eA.y.getInnerEnd()-i-this.Gn.top-this.Gn.bottom-s.top-s.bottom}}),r=this.EI.VA();this.GI(e,r),r.finishPlot(),this.$I(),this.lI!==this.cI.T()&&this.lI.length>1&&this.AI.unshift({name:this.fI,id:0});let h=0;const n=this.RI.VA(),o=this.pI;this.AI.forEach(((t,i)=>{const s=n.add(),e=this.pi.th.Tr(t.name,o,0);let r;s.tn(`← ${t.name}`).Ch(o).sr({x:0,y:100}).Zl({x:-1,y:1}).Mn({left:this.Gn.left+h,top:this.Gn.top,right:0,bottom:0}).qe(this.gI),s.addEventListener("click",(()=>this.II(i))),s.addEventListener("pointerenter",(()=>{r=this.engine.setMouseStyle(exports.MouseStyles.Point,r)})),s.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(r)})),h+=e.x+25})),n.finishPlot(),this.cI.T().every((t=>t.value===t.animatedValue))?this.tg=!1:this.pi.Bs(!0)}return this.jm.ir(!1,[],void 0,{explicitTarget:this.Dx}),this.Os.forEach((t=>t.ir(i,this.Gn))),this}dispose(){return this.Bk.G(),this.Pk.G(),this.jm.G(),this.ff.dispose(),this.aI.clear(),this.EI.UA(),this.RI.UA(),super.dispose()}j(){return super.j(),this}H(){return super.H(),this}Ys(){return Pi(this.ff.Mh(),this.ff._i())}GI(t,i,s=!1,e=0){const r=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e}))),h=this.eb?{extent:this.eb,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;r.length>0;){const t=r.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:n}=t,{x:o,y:a,height:l,width:u,children:c,animatedValue:d,name:f,nodeIndex:A}=s,g=this.LI,p=0===e&&1===this.cI.T().length?this.SI:g[A%g.length],v=this.ff.Ho().Md(o,a,o+u,a-l).UI(p.setA(p.getA()*((null!=n?n:255)/255))).Bx(d).bd(h);this.aI.set(v,s),this.DI.Ho(v,(t=>v.Ii(t)));const y=o+5,m=a+25+5,x=Math.max(l-25-5,0),S=Math.max(u-5-5,0);if(c&&c.length&&e<this.dI&&S>15&&x>15){const t=Gf({data:c,dimensions:{x:S>0?y:o,y:x>0?a-25:m,width:S,height:x}});for(let i=0;i<t.length;i+=1){const h=(255-(c.length>7?50:150))/(c.length-1),o=1===s.id&&1===this.lI.length||this.lI===this.cI.T()?255:n?n/(e+1):255-i*h;r.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const b=0===e&&1===this.cI.T().length?this.vI:this.mI,M=0===e?this.yI:this.xI,w=this.YI(f,u-25,M),_=this.pi.th.Tr(w,M,0),k=i.add();u-25>_.x&&l>25?k.tn(w).sr({x:o+5,y:a-2.5}).Zl({x:-1,y:1}).qe(b).Ch(M):k.tn("")}}VI(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}_I(t){if(!this.tg&&t)return this.aI.get(t)}$I(){this.AI=[];const t=this.cI.T()[0].id;let i=this.uI[t].parentID;for(;i;)this.AI.push({name:this.uI[i].name,id:i}),i=this.uI[i].parentID;return this.AI.reverse()}YI(t,i,s){let e=this.pi.th.Tr(t,s,0).x;if(e<=i)return t;const r=t.split(" ");let h=t;for(;r.length>1&&e>i;)r.pop(),h=`${r.join(" ")}...`,e=this.pi.th.Tr(h,s,0).x;if(e>i)for(h=`${r[0]}...`,e=this.pi.th.Tr(h,s,0).x;h.length>3&&e>i;)h=`${h.substring(0,h.length-4)}...`,e=this.pi.th.Tr(h,s,0).x;return h.length<=3&&e>i?"":h}NI(t){var i;const s=[...this.lI];for(;s.length>0;){const e=s.pop();if(!e)continue;const r=e.value-e.animatedValue;if(Math.abs(r)<.0015*e.value||void 0===this.yk)e.animatedValue=e.value;else{const s=r/255*((null===(i=this.yk)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(r>0&&e.animatedValue>e.value||r<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}zI(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.Er?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const r=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const h=r.get(t.id);s.push({current:t,previous:h||e})}))}}setUserInteractions(t){return this.ar=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return zt({drillDown:{click:!0}},this.ar)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const jf=(t,i,s)=>[[{text:i.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class Hf extends ja{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("gaugeChart bg",0),e,i.pi.bi.gaugeChartBackgroundFillStyle,i.pi.bi.gaugeChartBackgroundStrokeStyle,i.pi.bi.gaugeChartTitleFont,i.pi.bi.gaugeChartTitleFillStyle,i.pi.bi.gaugeChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.Gu=this.bi.gaugeChartStartAngle,this.$u=this.bi.gaugeChartEndAngle,this.jI={start:0,end:100},this.M=0,this.HI=[],this.WI=this.bi.gaugeChartBarThickness,this.XI=this.bi.gaugeChartValueIndicatorThickness,this.ZI=this.bi.gaugeChartNeedleLength,this.JI=this.bi.gaugeChartNeedleThickness,this.QI=this.bi.gaugeChartNeedleFillStyle,this.KI=this.bi.gaugeChartNeedleStrokeStyle,this.Sd=this.bi.gaugeChartRoundedEdges,this.qI=!0,this.tL=!0,this.iL=!0,this.sL=[],this.eL=[],this.rL=!0,this.hL=!0,this.gk=this.M,this.nL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.oL=this.bi.gaugeChartBarGradient,this.aL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.lL=this.bi.gaugeChartTickFont,this.uL=this.bi.gaugeChartValueLabelFont,this.cL=this.bi.gaugeChartValueLabelFillStyle,this.dL=this.bi.gaugeChartUnitLabelFont,this.fL=this.bi.gaugeChartUnitLabelFillStyle,this.AL=this.bi.gaugeChartTickFillStyle,this.gL=this.bi.gaugeChartBarColor,this.pL=this.bi.gaugeChartGlowColor,this.vL=this.bi.gaugeChartGlowColor.getA(),this.yL=1,this.mL=1,this.xL=this.bi.gaugeChartNeedleAlignment,this.SL=!1,this.bL=this.bi.gaugeChartGapBetweenBarAndValueIndicators,this.ML=this.bi.gaugeChartBarStrokeStyle,this.MI=Xi,this.wL=!1,this.D=new yt,this.pi.La(jh._o),this.Yr.tn("Gauge Chart"),this.jg(r,this.eA),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this._L=this.gL,this.kL=this.pL,this.CL=b(0,0,0,0),this.TL=this.vs.aA(),this.FL=this.vs.aA().Ps(this.bi.effectsText),this.IL=this.Ig.Tc(this.eA).Ke(this.ML).setPointerEvents(!1),this.LL=this.Ig._d(this.eA).Qu(0).Ar(360).sc(0).Ke(Tt).setPointerEvents(!1),this.PL=this.Zg.dr(this.eA).cr(this.bi.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.BL=this.Zg.dr(this.eA).cr(new ar({thickness:this.JI,fillStyle:this.QI})).setPointerEvents(!1),this.DL=this.Zg._n(this.eA).Ch(this.uL).qe(this.cL).setPointerEvents(!1),this.Af=this.Zg._n(this.eA).Ch(this.dL).qe(this.fL).tn("").setPointerEvents(!1),this.EL=this.Ig._n(this.eA).Ch(this.lL).qe(this.AL).setPointerEvents(!1),this.RL=this.Ig._n(this.eA).Ch(this.lL).qe(this.AL).setPointerEvents(!1),this.TL.ks([this.IL]),this.FL.ks([this.DL,this.Af,this.EL,this.RL]),this.OL(),this.addEventListener("resize",(()=>{this.SL=!0}));const a={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(a)}OL(){this.BL.cr((t=>t.setThickness(this.JI))),this.PL.cr((t=>t.setThickness(2*this.KI.getThickness()+this.JI)))}setAnimationsEnabled(t){return this.Er=t,this.hL=t,this.rL=t,this}setInterval(t,i){return this.jI={start:t,end:i},this.SL=!0,this.pi.Bs(),this}getInterval(){return this.jI}setTickFillStyle(t){return this.AL="function"==typeof t?t(this.AL):t,this.eL.forEach((i=>{i.start.qe(t),i.end.qe(t)})),this.EL.qe(t),this.RL.qe(t),this.SL=!0,this.pi.Bs(),this}getTickFillStyle(){return this.AL}setTickFont(t){return this.lL="function"==typeof t?t(this.lL):t,this.eL.forEach((i=>{i.start.Ch(t),i.end.Ch(t)})),this.EL.Ch(t),this.RL.Ch(t),this.SL=!0,this.pi.Bs(),this}getTickFont(){return this.lL}setTickFormatter(t){return this.nL=t,this.SL=!0,this.pi.Bs(),this}getTickFormatter(){return this.nL}setValueLabelFillStyle(t){return this.cL="function"==typeof t?t(this.cL):t,this.DL.qe(t),this.SL=!0,this.pi.Bs(),this}getValueLabelFillStyle(){return this.DL.Mh()}setValueLabelFont(t){return this.uL="function"==typeof t?t(this.uL):t,this.DL.Ch(t),this.SL=!0,this.pi.Bs(),this}getValueLabelFont(){return this.DL.kh()}setValueFormatter(t){return this.aL="string"==typeof t?i=>t:t,this.SL=!0,this.pi.Bs(),this}getValueLabel(){return this.DL.rn()||this.aL}setUnitLabelFillStyle(t){return this.fL="function"==typeof t?t(this.fL):t,this.Af.qe(t),this.SL=!0,this.pi.Bs(),this}getUnitLabelFillStyle(){return this.Af.Mh()}setUnitLabelFont(t){return this.dL="function"==typeof t?t(this.dL):t,this.Af.Ch(t),this.SL=!0,this.pi.Bs(),this}getUnitLabelFont(){return this.Af.kh()}setUnitLabel(t){return this.Af.tn(t),this.SL=!0,this.pi.Bs(),this}getUnitLabel(){return this.Af.rn()}setNeedleFillStyle(t){return this.QI="function"==typeof t?t(this.QI):t,this.BL.cr((i=>i.setFillStyle(t))),this.SL=!0,this.pi.Bs(),this}getNeedleFillStyle(){return this.BL.do().getFillStyle()}setNeedleThickness(t){return this.JI=t,this.OL(),this.SL=!0,this.pi.Bs(),this}getNeedleThickness(){return this.JI}setNeedleStrokeStyle(t){return this.KI="function"==typeof t?t(this.KI):t,this.PL.cr(t),this.OL(),this.SL=!0,this.pi.Bs(),this}getNeedleStrokeStyle(){return this.PL.do()}setNeedleLength(t){return this.ZI=t,this.SL=!0,this.pi.Bs(),this}getNeedleLength(){return this.ZI}setBarColor(t){return this.gL=t,this.SL=!0,this.pi.Bs(),this}getBarColor(){return this._L}setBarGradient(t){return this.oL=t,this.SL=!0,this.pi.Bs(),this}getBarGradient(){return this.oL}setBarStrokeStyle(t){return this.ML="function"==typeof t?t(this.ML):t,this.IL.Ke(t),this.SL=!0,this.pi.Bs(),this}getBarStrokeStyle(){return this.IL.Ja()}setBarThickness(t){return this.WI=t,this.SL=!0,this.pi.Bs(),this}getBarThickness(){return this.WI}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.Gu=t,this.$u=i,this.SL=!0,this.pi.Bs(),this}getAngleInterval(){return{start:this.Gu,end:this.$u}}setValue(t){return this.wL&&this.pi.La(jh.Ro),this.wL=!0,this.M=t,this.rL||(this.gk=this.M),this.SL=!0,this.pi.Bs(),this}getValue(){return this.M}setValueAnimation(t,i=1){return this.rL=t,this.yL=Math.max(0,i),this.SL=!0,this.pi.Bs(),this}setColorAnimation(t,i=1){return this.hL=t,this.mL=Math.max(0,i),this.SL=!0,this.pi.Bs(),this}setRoundedEdges(t){return this.Sd=t,this.SL=!0,this.pi.Bs(),this}getRoundedEdges(){return this.Sd}setValueIndicators(t){return this.HI=t,this.sL.forEach((t=>{t.dispose()})),this.sL.length=0,this.eL.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.eL.length=0,this.HI.forEach((t=>{const i=new de({color:t.color}),s=this.Ig.Tc(this.eA).Ke(Tt).qe(i).setPointerEvents(!1);this.sL.push(s);const e=this.Ig._n(this.eA).Ch(this.lL).qe(this.AL).setPointerEvents(!1),r=this.Ig._n(this.eA).Ch(this.lL).qe(this.AL).setPointerEvents(!1);this.eL.push({start:e,end:r})})),this.TL.ks([this.IL,...this.sL]),this.FL.ks([this.DL,this.Af,this.EL,this.RL,...this.eL.map((t=>[t.start,t.end])).flat()]),this.SL=!0,this.pi.Bs(),this}getValueIndicators(){return this.HI}setValueIndicatorThickness(t){return this.XI=t,this.SL=!0,this.pi.Bs(),this}getValueIndicatorThickness(){return this.XI}setAutomaticBarColoring(t){return this.iL=!!t,this.SL=!0,this.pi.Bs(),this}getAutomaticBarColoring(){return this.iL}setGlowColor(t){return void 0===t?(this.qI=!1,this.kL=void 0):"object"==typeof t&&"auto"in t?(this.tL=t.auto,t.auto&&(this.kL=void 0),void 0!==t.alpha&&(this.vL=t.alpha),this.qI=!0):(this.kL=t,this.vL=t.getA(),this.tL=!1,this.qI=!0),this.SL=!0,this.pi.Bs(),this}getAutomaticGlowColoring(){return this.tL}setNeedleAlignment(t){return this.xL=t,this.SL=!0,this.pi.Bs(),this}getNeedleAlignment(){return this.xL}setGapBetweenBarAndValueIndicators(t){return this.bL=t,this.SL=!0,this.pi.Bs(),this}getGapBetweenBarAndValueIndicators(){return this.bL}setBarEffect(t){return this.TL.Ps(t),this.pi.Bs(),this}getBarEffect(){return this.TL.Ds()}setLabelEffect(t){return this.FL.Ps(t),this.pi.Bs(),this}getLabelEffect(){return this.FL.Ds()}ir(t){var i;if(super.ir(t),super.Yg(),this.gk!==this.M){if(this.rL){const i=5e-4*t,s=.003*t,e=Math.sign(this.M-this.gk);this.gk=this.gk+i*e+s*this.yL*(this.M-this.gk),e!==Math.sign(this.M-this.gk)?this.gk=this.M:this.pi.Bs(!0)}else this.gk=this.M;this.SL=!0}let s=this.HI.find((t=>this.gk>=t.start&&this.gk<=t.end));if(s||(this.gk<this.jI.start?s=this.HI.find((t=>t.start===this.jI.start)):this.gk>this.jI.end&&(s=this.HI.find((t=>t.end===this.jI.end)))),this._L=this.iL&&s?s.color:this.gL,this.hL){if(this.CL!==this._L){const i=this.CL.getR(),s=this.CL.getG(),e=this.CL.getB(),r=this._L.getR(),h=this._L.getG(),n=this._L.getB(),o=Math.sign(r-i),a=Math.sign(h-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.CL=b(i+u*o+c*this.mL*(r-i),s+u*a+c*this.mL*(h-s),e+u*l+c*this.mL*(n-e));const d=Math.abs(r-this.CL.getR()),f=Math.abs(h-this.CL.getG()),A=Math.abs(n-this.CL.getB());d<1&&f<1&&A<1?this.CL=this._L:this.pi.Bs(!0),this.SL=!0}}else this.CL=this._L;const e=Ha.tp(this.Yr,this.Wg),r=this.Os.reduce(((t,i)=>{const s=i.Nh(e,this.Gn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(r.right===this.MI.right&&r.bottom===this.MI.bottom&&r.top===this.MI.top&&r.left===this.MI.left||(this.SL=!0,this.MI=r),this.SL){let t=rs,h=hs,n=rs,o=hs;if(new Array(100).fill(0).forEach(((i,s,e)=>{const r=this.Gu+s/e.length*(this.$u-this.Gu),a=Math.sin(r*Math.PI/180),l=Math.cos(r*Math.PI/180);a<t&&(t=a),a>h&&(h=a),l<n&&(n=l),l>o&&(o=l)})),this.oL?this.IL.qe(new O({stops:[{offset:0,color:M("#000000")},{offset:1,color:this.CL}],position:{x:.5,y:.5}})):this.IL.qe(new de({color:this.CL})),this.qI){const t=this.tL&&s?this.CL:null!==(i=this.kL)&&void 0!==i?i:this.pL;this.LL.qe(new O({stops:[{offset:0,color:t.setA(this.vL)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:exports.GradientExtent.farthestSide}))}else this.LL.qe(ae);const a=this.nL(this.jI.start),l=this.nL(this.jI.end);let u=0,c=0;const d=this.pi.th.Tr(a,this.EL.kh(),this.EL.Fh()),f=this.pi.th.Tr(l,this.RL.kh(),this.RL.Fh());d.x>u&&(u=d.x),d.y>c&&(c=d.y),f.x>u&&(u=f.x),f.y>c&&(c=f.y),this.eL.forEach(((t,i)=>{if(i>=this.HI.length)return;const s=this.HI[i],e=this.nL(s.start),r=this.nL(s.end),h=this.pi.th.Tr(e,t.start.kh(),t.start.Fh()),n=this.pi.th.Tr(r,t.end.kh(),t.end.Fh());h.x>u&&(u=h.x),h.y>c&&(c=h.y),n.x>u&&(u=n.x),n.y>c&&(c=n.y)}));const A=this.HI.length>0?this.XI:0,g=this.eA.getInnerIntervalPixels();Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,r);const p={x:g.x-(this.Gn.left+this.Gn.right),y:g.y-(this.Gn.bottom+this.Gn.top)-e},v={x:p.x-r.left-r.right,y:p.y-r.top-r.bottom},y={x:this.Gn.left+(p.x+r.left-r.right)/2,y:this.Gn.bottom+(p.y+r.bottom-r.top)/2},m=A+2*this.bL+this.WI/2,x=u+m,S=c+m,b=S+e,w=v.y-(b+S),_=v.x-(x+x),k=Math.max(0,w<_?w:_),C=.5*k,T=.5*C,F=(t+h)*T,I=(n+o)*T,L={x:y.x-I,y:y.y-F},P=k>0;if(this.IL.setVisible(P),this.sL.forEach((t=>t.setVisible(P))),this.BL.setVisible(P),this.PL.setVisible(P),this.LL.setVisible(P),this.Af.setVisible(P),this.DL.setVisible(P),this.EL.setVisible(P),this.RL.setVisible(P),this.eL.forEach((t=>{t.start.setVisible(P),t.end.setVisible(P)})),!P)return;const B={x:y.x-.5*I,y:y.y-.5*F};this.LL.sr(y).Ku(.5*Math.min(v.x,g.y)),this.DL.sr(B).tn(this.aL(this.gk));let D=this.DL.bc(),E=this.Af.bc();0===D.y&&(D=this.pi.th.Tr(this.DL.rn(),this.DL.kh(),this.DL.Fh())),0===E.y&&(E=this.pi.th.Tr(this.Af.rn(),this.Af.kh(),this.Af.Fh())),this.Af.sr({x:B.x,y:B.y-D.y-E.y/4});const R=Zf(this.jI,this.Gu,this.$u,this.gk,L,C+this.xL*(this.ZI/2+this.WI/2)),z=R.angle*(Math.PI/180),V=.5*this.ZI,N=Math.cos(z),G=Math.sin(z);this.BL.gr({x:R.x+V*N,y:R.y+V*G}).Ar({x:R.x-V*N,y:R.y-V*G}),this.PL.gr({x:R.x+V*N,y:R.y+V*G}).Ar({x:R.x-V*N,y:R.y-V*G});const $=Wf(L,C,this.Gu,this.$u,this.WI,this.Sd,!1,!1);this.IL.au($).Ti({min:{x:L.x-C,y:L.y-C},max:{x:L.x+C,y:L.y+C}});const U=L.y+C,Y=L.y-C,j=L.x+C,H=L.x-C,[W,X]=this.jI.start<this.jI.end?[this.jI.start,this.jI.end]:[this.jI.end,this.jI.start],Z=C+.5*this.WI+A/2+this.bL,J=Z+A/2;this.HI.forEach(((t,i)=>{var s,e;const r=t.start>=W&&t.end<=X;this.sL[i].setVisible(r),this.eL[i].start.setVisible(r),this.eL[i].end.setVisible(r);const h=Zf(this.jI,this.Gu,this.$u,t.start,L,J),n=Zf(this.jI,this.Gu,this.$u,t.end,L,J),o=Wf(L,Z,h.angle,n.angle,this.XI,this.Sd,!(0===i),!(i===this.HI.length-1));this.sL[i].au(o);const a=this.jI.start===t.start||this.jI.end===t.start,l=this.jI.start===t.end||this.jI.end===t.end||this.HI.some((i=>i.start===t.end&&i!==t));this.eL[i].start.sr({x:h.x,y:h.y}).Zl({x:Math.min(1,Math.max(-1,2*(h.x-j)/(H-j)-1)),y:Math.min(1,Math.max(-1,2*(h.y-U)/(Y-U)-1))}).tn(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.nL(t.start)),this.eL[i].end.sr({x:n.x,y:n.y}).Zl({x:Math.min(1,Math.max(-1,2*(n.x-j)/(H-j)-1)),y:Math.min(1,Math.max(-1,2*(n.y-U)/(Y-U)-1))}).tn(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.nL(t.end))}));const Q=this.HI.some((t=>t.start<t.end?this.jI.start>=t.start&&this.jI.start<=t.end:this.jI.start<=t.start&&this.jI.start>=t.end)),K=Zf(this.jI,this.Gu,this.$u,this.jI.start,L,Q?J:Z-this.bL);this.EL.sr({x:K.x,y:K.y}).Zl({x:Math.min(1,Math.max(-1,2*(K.x-j)/(H-j)-1)),y:Math.min(1,Math.max(-1,2*(K.y-U)/(Y-U)-1))}).tn(a);const q=this.HI.some((t=>t.start<t.end?this.jI.end>=t.start&&this.jI.end<=t.end:this.jI.end<=t.start&&this.jI.end>=t.end)),tt=Zf(this.jI,this.Gu,this.$u,this.jI.end,L,q?J:Z-this.bL);this.RL.sr({x:tt.x,y:tt.y}).Zl({x:Math.min(1,Math.max(-1,2*(tt.x-j)/(H-j)-1)),y:Math.min(1,Math.max(-1,2*(tt.y-U)/(Y-U)-1))}).tn(l),this.SL=!1}this.Os.forEach((t=>t.ir(e,this.Gn)))}getMinimumSize(){return{x:150,y:150}}bg(){return[]}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Wf=(t,i,s,e,r,h=!0,n=!0,o=!0)=>{const a=[],l=.5*r,u=s>e,c=Math.sign(s-e),d=-1*c;if(h){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=Xf(t,i+l,s,e,u);if(a.push(...f),h){const r={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let h;h=s>e?Xf(r,l,e+180,e+360,u):Xf(r,l,e-180,e-360,u),a.push(...h)}const A=Xf(t,i-l,e,s,!u);if(a.push(...A),h){const r={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let h;h=s>e?Xf(r,l,s-180,s-360,u):Xf(r,l,s+180,s+360,u),a.push(...h)}return a},Xf=(t,i,s,e,r)=>{s<e&&([s,e]=[e,s]);const h=[],n=r?-2:2,o=r?t=>t>e:t=>t<s;for(let a=r?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),r=t.y+i*Math.sin(s);h.push({x:e,y:r})}const a=(r?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return h.push({x:l,y:u}),h},Zf=(t,i,s,e,r,h)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:r.x+h*Math.cos(c),y:r.y+h*Math.sin(c),angle:Math.round(u)}};class Jf extends Qa{constructor(t,i,s,e,r,h,n,o,a,l,u){super(t,i,s,e,r,h,n,o,a,l),this.zL=u}setLabelAlignment(t){return this.zL=t,this.Bs(),this}getLabelAlignment(){return this.zL}}class Qf extends Lh{constructor(t,i,s,e,r,h,n){let o;super(t,{fn:()=>t.VL?t.VL[this.key].max:void 0,dn:()=>t.VL?t.VL[this.key].min:void 0,gn:()=>{}},h,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.NL=[],this.Bf=[],this.GL=8,this.ci=!1,this.D=new yt,this.chart=t,this.key=e,this.userID=r,this.vs=this.chart.pi.vs.ys(this,{}),this.Ws=n,this.$L=n.tr(t.UL).qe(this.bi.parallelCoordinateAxisBackgroundFillStyle||ae).Ke(Tt).setPointerEvents(!1),this.Jr=n._n(t.UL).Ch(this.bi.parallelCoordinateAxisTitleFont||this.bi.yAxisTitleFont).qe(this.bi.parallelCoordinateAxisTitleFillStyle||this.bi.yAxisTitleFillStyle).setPointerEvents(!1).Mn(Xi).wn(Xi),this.Ih=this.vs.aA([this.Jr]).Ps(i.effectsText),this.wF=n.dr(t.UL).cr(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(i=>{t.YL(this,i.start,i.end)})),this.wF.addEventListener("pointerenter",(()=>{var t,i;(null===(i=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===i?void 0:i.doubleClickAxis)&&(o=this.chart.engine.setMouseStyle(exports.MouseStyles.Point))})),this.wF.addEventListener("pointerleave",(()=>{o=this.chart.engine.restoreMouseStyle(o)})),this.wF.addEventListener("dblclick",(t=>{var i,s;t.defaultPrevented||(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(this.addRangeSelector(),di(t))})),this.setTitle(e)}setBackgroundFillStyle(t){return this.$L.qe(t),this.Ws.Bs(),this}getBackgroundFillStyle(){return this.$L.Mh()}setStrokeStyle(t){const i="function"==typeof t?t(this.wF.do()):t,s=i.getFillStyle();return ye(s)?(this.jL=s.lut,this.chart.HL=!0):this.jL=void 0,this.wF.cr(i),this.chart.pi.Bs(),this}getStrokeStyle(){return this.wF.do()}setTickStrategy(t,i){return super.fh(t,i)}getTickStrategy(){return this.Lr}addRangeSelector(){const t=this.Gh(),i=this.Ws.tr(this.chart.UL).qe(this.bi.parallelCoordinateAxisRangeSelectorFillStyle||this.bi.dataGridScrollBarFillStyle).Ke(this.bi.parallelCoordinateAxisRangeSelectorStrokeStyle||this.bi.dataGridScrollBarStrokeStyle);let s;const e=t=>{var i,e;(null===(e=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===e?void 0:e.drag)&&(s=this.chart.engine.setMouseStyle(exports.MouseStyles.Vertical,s))},r=t=>{s=this.chart.engine.restoreMouseStyle(s)};i.addEventListener("pointermove",e),i.addEventListener("pointerleave",r),i.addEventListener("pointerdown",(t=>{var n,o;if(!(null===(o=null===(n=this.chart.getUserInteractions().rangeSelectors)||void 0===n?void 0:n.move)||void 0===o?void 0:o.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const u=this.chart.pi.il(t),c=q({x:u.engineX,y:u.engineY},this.chart.pi.ai,this.chart.UL),d=this.chart.UL.y.Qt(i.Xi(),10),f=this.chart.UL.y.Qt(i.Zi(),-10);l=c.y<=d?"scaleMin":c.y>=f?"scaleMax":"move",di(t);let A=t;const g=t=>{if(void 0===this.WL)return;const i=.05*Math.abs(this.gh-this.Ah),s=(t.clientX,A.clientX,t.clientY-A.clientY);if(A=t,"move"===l){const t=h.max-h.min,i=this.chart.XL(h.max,this.WL,this).y,e=this.chart.UL.y.Qt(i,-s),r=this.chart.ZL(e,this.WL,this);h.max=Wt(r,Math.max(this.Ah,this.gh),Math.min(this.Ah,this.gh)+t),h.min=h.max-t}else if("scaleMax"===l){const t=this.chart.XL(h.max,this.WL,this).y,e=this.chart.UL.y.Qt(t,-s),r=this.chart.ZL(e,this.WL,this);h.max=Wt(r,h.min+i,Math.max(this.Ah,this.gh))}else if("scaleMin"===l){const t=this.chart.XL(h.min,this.WL,this).y,e=this.chart.UL.y.Qt(t,-s),r=this.chart.ZL(e,this.WL,this);h.min=Wt(r,h.max-i,Math.min(this.Ah,this.gh))}this.chart.JL(),di(t)},p=h=>{h.pointerId===t.pointerId&&(this.chart.setCursorMode(a),i.addEventListener("pointermove",e),i.addEventListener("pointerleave",r),Nt.removeEventListener("pointermove",g),Nt.removeEventListener("pointerup",p),s=this.chart.engine.restoreMouseStyle(s))};i.removeEventListener("pointermove",e),i.removeEventListener("pointerleave",r),Nt.addEventListener("pointermove",g),Nt.addEventListener("pointerup",p)})),i.addEventListener("dblclick",(t=>{var i,s;if(!(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.dispose)||void 0===s?void 0:s.doubleClick))return;const e=this.NL.indexOf(h);e>=0&&this.NL.splice(e,1),h.shape.dispose(),this.chart.JL(),di(t)}));const h={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i};this.NL.push(h),this.chart.JL();const n={setInterval:(t,i)=>(h.min=Math.min(t,i),h.max=Math.max(t,i),this.chart.JL(),n),setPointerEvents:t=>(i.setPointerEvents(t),n),dispose:()=>{const t=this.NL.indexOf(h);return t>=0&&(this.NL.splice(t,1),this.chart.JL()),n}};return n}addCustomTick(){const t=new Jf((()=>this.chart.pi.Bs()),(()=>{const i=this.Bf.indexOf(t);i>=0&&this.Bf.splice(i,1)}),(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickLength,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickPadding,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelRotation,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Bf.push(t),this.chart.pi.Bs(),t}getCustomTicks(){return[...this.Bf]}ir(t){this.WL=t.parallelAxisIndex;const i=Math.min(this.Ah,this.gh),s=Math.max(this.Ah,this.gh);for(const[i,s]of this.Pr)for(const[,e]of s){const s=t.ticksInfo.get(e);s&&(t.plotAxisLines.add({positions:[s.positionTicklineStart,s.positionTicklineEnd]},{lineStyle:i.Fr.tickStyle}),e.zh.sr(s.labelPosition).Zl(s.labelAlignment).Th(s.labelRotation).$l(s.labelOffset.x,s.labelOffset.y))}this.Bf.forEach((e=>{if(!e.di||e.M<i||e.M>s)return;const r=this.QL(t.parallelAxisIndex,t.halfAxisThickness,e.M,e.Mp,e._p,e.zL);t.plotAxisLines.add({positions:[r.positionTicklineStart,r.positionTicklineEnd]},{lineStyle:e.bp}),t.plotAxisText.add().sr(r.labelPosition).Zl(r.labelAlignment).qe(e.kp).Ch(e.Cp).tn(e.co(e.M)).Th(e.cf).setPointerEvents(e.ui)})),this.wF.gr({x:t.parallelAxisIndex,y:0}).Ar({x:t.parallelAxisIndex,y:1}),this.Jr.sr({x:t.parallelAxisIndex,y:this.chart.UL.y.Qt(0,-(t.halfAxisThickness+this.GL))}).Th(this.getTitleRotation()).Zl({x:0,y:1});const e=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.UL.x.Qt(t.parallelAxisIndex,-1.2*t.pA);this.$L.sr({x:e,y:0}).Z({x:t.parallelAxisIndex-e,y:1});const r=this.chart.UL.ni();this.NL.forEach((i=>{const s=this.chart.XL(i.min,t.parallelAxisIndex,this),e=this.chart.XL(i.max,t.parallelAxisIndex,this),h={x:t.parallelAxisIndex-10*r.x*.5,y:s.y},n=t.parallelAxisIndex+10*r.x*.5,o=e.y;i.shape.sr(h).Z({x:n-h.x,y:o-h.y})}))}G(){this.$L.dispose(),this.Jr.dispose(),this.wF.dispose(),this.NL.forEach((t=>t.shape.dispose())),this.NL.length=0,this.Lh(),this.Jh(),this.ci=!0,this.D.R("dispose",{})}isDisposed(){return this.ci}QL(t,i,s,e,r,h){const n=this.chart.UL.Qt({x:t,y:(s-this.Ah)/(this.gh-this.Ah)},{x:0-i,y:0}),o=this.chart.UL.Qt(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,labelPosition:this.chart.UL.Qt(o,{x:-r,y:0}),labelAlignment:{x:1,y:h}}}Yh(t){const i=this.wF.do();return{halfAxisThickness:lr(i)?i.getThickness()/2:0}}Xh(t,i,s,e,r){const h=i.Fr,n=this.getInterval();return{...this.QL(e.parallelAxisIndex,r.halfAxisThickness,t,h.getTickLength(),h.getTickPadding(),2*(t-n.start)/(n.end-n.start)-1),keyValue:t,tickLevel:i,labelText:s,labelRotation:h.labelRotation,labelOffset:{x:0,y:0}}}sn(t,i){return new Ph(i,t,this.Ws,this.chart.UL)}Qh(t,i,s){const e=this.Jr&&this.Jr.rn().length>0&&this.getTitleFillStyle()!==ae?this.Jr.Nh().bc():{x:0,y:0};let r=0;this.Pr.forEach(((t,i)=>{const s=i.Fr.tickLength+i.Fr.tickPadding;t.forEach((t=>{if(!t.zh.getVisible())return void(r=Math.max(r,s));const i=s+t.zh.Nh().bc().x;r=Math.max(r,i)}))}));const h=this.Bf.reduce(((t,i)=>Math.max(t,i.di?this.chart.pi.th.Tr(i.co(i.M),i.Cp,i.cf).x+i.Mp+i._p:0)),0);r=Math.max(r,h);const n=e.y+this.GL;r=Math.max(r,e.x/2);const o=r;return{pA:r,KL:n,qL:e.x,yf:o,ticksInfo:i,updatedTicks:s}}Kr(){return this.chart.UL}vn(t,i){return Ie(t,i,this.ai)}xn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class Kf extends Su{constructor(t,i,s,e,r){super(t,i,s,e),this.Rs="Parallel Coordinate Series",this.tP=!1,this.D=new yt,this.chart=t;const h=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.iP=Ei(this.bi.parallelCoordinateChartSeriesColor,h)||(()=>{const t=Ei(this.bi.lineSeriesStrokeStyle,h).getFillStyle();return(fe(t)?t.getColor():void 0)||b(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this.chart.sP()})),this.addEventListener("dispose",(t=>{this.chart.sP()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.eP;return this.eP=this.chart.rP(t),i&&this.chart.hP(),this}getData(){return this.eP}setColor(t){const i="function"==typeof t?t(this.iP):t;return i===this.iP||(this.iP=i,this.chart.pi.Bs(),this.chart.nP(this)),this}getColor(){return this.iP}xp(){return this.getAutoScrollingEnabled()}cp(){}ir(){}dp(){}er(){return{fill:new de({color:this.iP})}}ap(){return super.ap()&&!this.tP}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class qf extends fl{constructor(t,i,s,e,r,h,n){var o,a,l;super(t,i,s,i.Hg("parallelAxisChart bg",0),e,i.pi.bi.parallelCoordinateChartBackgroundFillStyle||i.pi.bi.chartXYBackgroundFillStyle,i.pi.bi.parallelCoordinateChartBackgroundStrokeStyle||i.pi.bi.chartXYBackgroundStrokeStyle,i.pi.bi.parallelCoordinateChartTitleFont||i.pi.bi.chartXYTitleFont,i.pi.bi.parallelCoordinateChartTitleFillStyle||i.pi.bi.chartXYTitleFillStyle,i.pi.bi.parallelCoordinateChartTitleShadow||i.pi.bi.chartXYTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.axes=[],this.oP=!0,this.aP=Wi(),this.lP=new Map,this.uP=this.bi.parallelCoordinateChartSeriesColorUnselected||b(255,255,255,30),this.cP=g({resolution:32}),this.HL=!1,this.dP=!1,this.fP=!0,this.AP=!1,this.gP=!1,this.pP=!1,this.vP=!1,this.xa=t=>{this.UL.Z(t.engineWidth,t.engineHeight)},this.D=new yt,this.hk=i.Om("parallelAxisChart series",0),this.yP=i.Om("parallelAxisChart labels",1),this.Yr.tn("Parallel Coordinate Chart"),this.pi.La(jh.No),this.UL=this.Bg.d2({scaleXYConstructor:Z}).si(0,1),this.jg(r,this.UL),this.yv=this.Ig.tr(this.UL).sr({x:0,y:0}).Z({x:0,y:1}).qe(this.bi.parallelCoordinateChartSeriesBackgroundFillStyle||this.bi.chartXYSeriesBackgroundFillStyle).Ke(Tt).setPointerEvents(!0),this.mv=this.Ig.tr(this.UL).sr({x:0,y:0}).Z({x:0,y:1}).qe(ae).Ke(this.bi.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.bi.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.vv(this.yv,this.mv),this.setSeriesBackgroundEffect(!1),this.mP=new ar({thickness:null!==(a=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new Ae}),this.xP=new ar({thickness:null!==(l=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==l?l:2,fillStyle:new de({color:this.bi.parallelCoordinateChartSeriesColorUnselected})}),this.SP=this.aP.Ji(this.hk.bA(this.UL)).cr(this.mP),this.SP.dc=5e4,this.bP=this.hk.bA(this.UL).cr(this.bi.parallelCoordinateChartPointedSeriesLineStyle||Ei(this.bi.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.MP=new La((()=>this.yP._n(this.UL))),this.wP=new qa((()=>this.yP.bA(this.UL).setPointerEvents(!1)),((t,i,s)=>(t.Vi().cr(s.lineStyle),i.map((({positions:i})=>t.Ho().wA(i[0],i[1]))))));const u=i.Ym(),c=Zt(n?n.cursorBuilder:void 0,Zl);this.jm=oA(this,u,c.Am(u,this.uiScale,this.uiScale,jt,this.bi),this,"show-nearest",tA,(()=>0)),this.addEventListener("resize",this.xa),void 0!==(null==n?void 0:n.legend)&&this.legend.setOptions(n.legend)}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=Zl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}setUnselectedSeriesColor(t){return this.uP="function"==typeof t?t(this.uP):t,this.xP=new ar({thickness:this.getSeriesStrokeThickness(),fillStyle:new de({color:this.uP})}),this.pi.Bs(),this}getUnselectedSeriesColor(){return this.uP}setPointedSeriesStrokeStyle(t){return this.bP.cr(t),this.pi.Bs(),this}getPointedSeriesStrokeStyle(){return this.bP.do()}setSpline(t,i){return t?this.cP.C({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.cP.C(void 0),this.pi.Bs(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this._P(),s=new Qf(this,this.bi,!this.Er,t.key,t.id,i,this.yP),e=()=>{this.fP=!0};s.addEventListener("visiblechange",e),s.addEventListener("dispose",(()=>s.removeEventListener("visiblechange",e))),this.axes.push(s)})),e.forEach((t=>{t.G();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this.fP=!0,this.VL=void 0,this.pi.Bs(),this}getAxis(t){const i=this.kP(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.kP(t)}addSeries(t){var i,s;const e=new Kf(this,this.gv,this.bi,this.pi.vs,t);return super.xv(e,{...t,legend:{...null==t?void 0:t.legend,show:null!==(s=null===(i=null==t?void 0:t.legend)||void 0===i?void 0:i.show)&&void 0!==s&&s}}),this.gP=!0,this.VL=void 0,this.pi.Bs(),e}setSeriesStrokeThickness(t){return this.mP=this.mP.setThickness(t),this.xP=this.xP.setThickness(t),this.SP.cr(this.mP),this.pi.Bs(),this}getSeriesStrokeThickness(){return this.mP.getThickness()}setLUT(t){return this.Sf=t,this.Sf&&0===this.Sf.lut.units.length&&(this.Sf.lut=this.Sf.lut.setUnits(this.Sf.axis.getTitle())),this.Os.forEach((t=>{t.xg()&&t.add(this)})),this.vP=!0,this.Os.forEach((t=>t.zs())),this.pi.Bs(),this}ir(t){super.ir(t);const i=this.axes.filter((t=>t.getVisible()));this.UL.ii(0,i.length-1),this.yv.Z({x:i.length-1,y:1}),this.mv.Z({x:i.length-1,y:1});const s=void 0===this.VL;if(!this.VL){const t={};i.forEach((i=>{t[i.key]={min:rs,max:hs}})),this.fv.forEach((i=>{i.eP&&Object.entries(i.eP).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.VL=t}if(this.pP||this.AP||this.gP){const t=i.map(((t,i)=>t.NL));this.fv.forEach((s=>{const e=s.eP;if(!e)return;let r=!1;for(let s=0;s<i.length;s+=1){const h=i[s],n=t[s],o=void 0!==n.find((t=>gs(e[h.key],t.min,t.max)));if(n.length>0&&!o){r=!0;break}}s.tP=r}));const s=this.fv.filter((t=>!t.tP));this.D.R("seriesselect",{selectedSeries:s})}for(const t of this.fv)t.cp();for(const t of this.fv)t.ir();super.Yg();const e=this.pi.Us(this.yv)||void 0!==this.fv.find((t=>t.getPointed()))?this.CP():void 0;this.jm.ir(!1,this.fv,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.pi.Ia();if(t.length>1&&i){const t=this.pi.il(i);this.jm.v_.sm({x:t.engineX,y:t.engineY},this.pi.ai)}}});const r=Ha.tp(this.Yr,this.Wg),h=this.Os.reduce(((t,i)=>{const s=i.Nh(r,this.Gn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,h),i.length>=2){const t=this.MP.VA(),e=this.wP.VA(),n=i.map(((i,s)=>(i.pn(),i.Nh({plotAxisLines:e,plotAxisText:t,physicalAxisSize:this.UL.y.wt(),parallelAxisIndex:s}))));this.UL.qt([this.ot.left+this.Gn.left+n[0].yf+h.left,this.ot.right+this.Gn.right+n[n.length-1].qL/2+h.right]),this.UL.ti([this.ot.bottom+this.Gn.bottom+n.reduce(((t,i)=>Math.max(t,i.KL)),0)+h.bottom,this.ot.top+this.Gn.top+r+h.top]),n.forEach(((t,s)=>i[s].ir(t))),t.finishPlot(),e.finishPlot(),(s||this.HL)&&i.forEach(((t,i)=>{if(!t.jL)return;const s=t.jL.steps.map((s=>({...s,value:this.XL(s.value,i,t).y}))),e=t.jL.setSteps(s);t.wF.cr((t=>t.setFillStyle(new ve({lookUpProperty:"y",lut:e}))))}));const o=this.fP||this.AP||this.oP||this.cP.u;o&&(this.SP.Vi(),this.aP.Vi(),this.lP.clear(),this.fv.forEach((t=>{const s=t.eP;if(!t.getVisible()||!s)return;const e=this.TP(t,s,i,this.SP,this.aP);this.lP.set(t,e),t.Ts(e)}))),(o||this.pP||this.vP||this.AP)&&this.FP(this.fv),!o&&this.gP&&this.fv.forEach((t=>{if(t.fs.length>0)return;const s=t.eP;if(!t.getVisible()||!s)return;const e=this.TP(t,s,i,this.SP,this.aP);this.lP.set(t,e),t.Ts(e),this.FP([t])})),this.fv.find((t=>t.eP&&Object.keys(t.eP).length>0))&&(this.dP=!0)}const n=1===(null==e?void 0:e.length)?e[0]:void 0;(n!==this.IP||this.AP)&&(this.bP.Vi(),n&&n.series.eP?(this.TP(n.series,n.series.eP,i,this.bP,void 0),this.SP.cr(this.xP)):this.SP.cr(this.mP));const o=A(this.UL.x.bt(),this.UL.y.bt(),this.UL.x.wt(),this.UL.y.wt());this.hk.Tm(o),this.Os.forEach((t=>t.ir(r,this.Gn)));for(const t of this.fv)t.dp();this.oP=!1,this.pP=!1,this.fP=!1,this.AP=!1,this.gP=!1,this.vP=!1,this.cP.u=!1,this.HL=!1,this.IP=n}FP(t){const i=this.Sf&&{lut:this.Sf.lut,key:this.Sf.axis.key};t.forEach((t=>{const s=t.eP,e=this.lP.get(t);if(!s||!e)return;let r;if(t.tP)r=this.uP;else if(i){const t=s[i.key],e=this.VL&&this.VL[i.key];r=i.lut.getColors(t,e)}else r=t.iP;e.forEach((t=>t.UI(r)))}))}sP(){this.AP=!0,this.pi.Bs()}hP(){this.dP&&this.pi.La(jh.Ro),this.AP=!0,this.pi.Bs()}kP(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}_P(){return Q.d1({scale1DConstructor:H,dimension:"x"}).W(0,1)}rP(t){if(this.VL=void 0,this.pi.Bs(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const r=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!r)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[r]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}YL(t,i,s){this.oP=!0,this.pi.Bs()}XL(t,i,s){return{x:i,y:(t-s.ai.$)/(s.ai.U-s.ai.$)}}ZL(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}nP(t){this.vP=!0,this.pi.Bs()}JL(){this.pP=!0,this.pi.Bs()}getSeries(){return this.fv}bg(){return[this]}Ys(){return this.Sf?{lut:this.Sf.lut}:void 0}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.G())),this.jm.G(),this.hk.G(),this.yP.G(),this}TP(t,i,s,e,r){const h=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],u=this.XL(l,o,a),c=this.cP.T();if(c){if(void 0!==n){const i=c.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,c=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(u.x-n.x),y:n.y+s*(u.y-n.y)},o={x:n.x+l*(u.x-n.x),y:n.y+c*(u.y-n.y)},d=e.Ho();r&&r.Ki(d,t),h.push(d),d.wA(i,o)}s=c}}}else if(void 0!==n){const i=e.Ho();r&&r.Ki(i,t),h.push(i),i.wA(n,u)}n=u}return h}CP(){const t=this.getCursorMode(),i=this.pi.Ia();if(t&&i){const s=this.pi.il(i),e=q({x:s.engineX,y:s.engineY},this.pi.ai,this.UL),r=Math.round(e.x),h=this.axes.filter((t=>t.getVisible()))[r];if(!h)return;const n=h.key,o=Ni(this.fv.map((t=>{if(!t.eP||!t.ap())return;const i=t.eP[n],s=this.XL(i,r,h);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.UL,resultTable:s,resultTableScale:this.UL},value:i,series:t,axis:h}})));return"show-nearest"===t?[o.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Nt.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}setUserInteractions(t){return this.ar=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return zt({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.ar)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const tA=(t,i,s)=>{if(s.length>1)return[[{text:s[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Ni(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return eA(t,[[t.series,"",Te(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],r=[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const h=s[i.key];if(void 0===h)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};r.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(h),font:n}])})),r};class iA extends Ya{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,e,r,h),this.legend=new Ga(Pa,this,this.Og,this.eA),this.legend.setOptions({position:exports.LegendPosition.LeftTop,autoHideThreshold:1,...n}),null===(o=this.Os)||void 0===o||o.push(this.legend)}add(t){return t instanceof TA?(t.getCells().forEach((t=>{t.panel instanceof ja&&this.add(t.panel)})),this.pi.Bs(),this):(this.legend.add(t),this.pi.Bs(),this)}getMinimumSize(){return super.getMinimumSize()}}const sA=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,eA=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},rA=t=>{var i,s;const e="series"in t?t.series:"slice"in t?t.slice:"bar"in t?t.bar:void 0,r=e&&Oa(e)&&e.Ys(),h="x"in t&&t.x,n="y"in t&&t.y,o="z"in t&&t.z,a="color"in t&&t.color,l=null!==(s=null!==(i="lookupValue"in t?t.lookupValue:void 0)&&void 0!==i?i:"intensity"in t?t.intensity:void 0)&&void 0!==s?s:"value"in t?t.value:void 0;if(void 0!==l&&r&&"value"===r.lookUpProperty)return r.lut.getColors(l,r.valueRange);if(void 0!==h&&!1!==h&&r&&"x"===r.lookUpProperty)return r.lut.getColors(h,hA(e)?{min:e.getXMin(),max:e.getXMax()}:void 0);if(void 0!==n&&!1!==n&&r&&"y"===r.lookUpProperty)return r.lut.getColors(n,hA(e)?{min:e.getYMin(),max:e.getYMax()}:void 0);if(void 0!==o&&!1!==o&&r&&"z"===r.lookUpProperty)return r.lut.getColors(o,nA(e)?{min:e.getZMin(),max:e.getZMax()}:void 0);if(a)return"number"==typeof a?_(a):a;if(e){const t=e.er(),i=Li(e.chart.getTheme(),!0,t);if(fe(i))return i.getColor()}},hA=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),nA=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),oA=(t,i,s,e,r,h,n)=>{let o,a,l,u=r,c=t.getTheme().cursorDynamicBehavior,d=h,f=null,A=!0;e&&(A=!1,e.seriesBackground.addEventListener("pointerenter",(()=>{var i;A=!0,t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(i=p[3])&&void 0!==i?i:{}))?g():t.pi.Bs())})),e.seriesBackground.addEventListener("pointerleave",(()=>{var i;A=!1,t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(i=p[3])&&void 0!==i?i:{}))?g():t.pi.Bs())})),e.seriesBackground.addEventListener("pointermove",(()=>{var i;A=!0,t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(i=p[3])&&void 0!==i?i:{}))?g():t.pi.Bs())})),e.addEventListener("seriesadd",(i=>{const s=i.series;s.addEventListener("pointerenter",((i,e)=>{var r;s.ap()&&(a||t.pi.Bs(),o=e||void 0),t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(r=p[3])&&void 0!==r?r:{}))?g():t.pi.Bs())})),s.addEventListener("pointermove",((i,e)=>{var r;s.ap()&&(a||t.pi.Bs(),o=e||void 0),t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(r=p[3])&&void 0!==r?r:{}))?g():t.pi.Bs())})),s.addEventListener("pointerleave",(i=>{var e;s.ap()&&(a||t.pi.Bs(),o=void 0),t.getCursorMode()&&(a&&p&&!("explicitTarget"in(null!==(e=p[3])&&void 0!==e?e:{}))?g():t.pi.Bs())}))})));const g=()=>{if(l&&(Nt.cancelAnimationFrame(l),l=void 0),!p)return;const t=p;l=Nt.requestAnimationFrame((()=>v.ir(...t)))};let p;const v={setCursor:i=>(i(s),t),getCursor:()=>s,setCursorMode:i=>(u=i,t.pi.Bs(),t),getCursorMode:()=>u,setCustomCursor:t=>{a=t},tx:i=>{c=i,t.pi.Bs()},setCursorFormatting:i=>(d=i,t.pi.Bs(),t),getCursorFormatting:()=>d,G:()=>{s.dispose(),i.G()},ir:(i,e,r,h)=>{l&&(Nt.cancelAnimationFrame(l),l=void 0),p=[i,e,r,h];const g=t.pi.Ia();let v=[];if((null==h?void 0:h.explicitTarget)&&u)v=Array.isArray(h.explicitTarget)?h.explicitTarget:[h.explicitTarget];else if(!i&&u){const t=e.find((t=>t.getPointed())),i=g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Is?t.Is(g):void 0;if(o=i||o,o&&"show-all"!==u&&"show-all-interpolated"!==u)v=[o];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((A||void 0!==t)&&g&&r){for(const t of e){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const i=r(t,g,u);i&&v.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(v.sort(((t,i)=>n(t,g)-n(i,g))),v.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&r){const i=r(t,g,u);i&&(v=[i])}}v=Ni(v.map((t=>Ki(t))));const y=(null==h?void 0:h.overrideCursorPositions)||((t,i)=>i),m=v[0],x=v.length>0?v:void 0;if(m!==f&&g&&(a&&a({hit:m,hits:x,mouseLocation:g}),t.D.R("cursortargetchange",{hit:m,hits:x,mouseLocation:g}),f=m),a)s.getVisible()&&(s.setVisible(!1),s.Nh().ir());else{let i=!1;if(v&&v.length>0){const e=d(t,v[0],v);s.setVisible(!0).setPosition(...y(v,v.map((t=>{const i=t.cursorPosition;if(c){const s=rA(t);void 0!==s&&(i.pointMarkerFillStyle=c.pointMarkerFill&&c.pointMarkerFill(s),i.pointMarkerStrokeStyle=c.pointMarkerStroke&&c.pointMarkerStroke(s));const e=(t=>{if(ht(t))return void 0!==t.size?t.size:t.series instanceof mc?t.series.getPointSize():void 0})(t);if(void 0!==e&&(i.pointMarkerSize=c.pointMarkerSize&&c.pointMarkerSize(e)),!1!==c.matchPointMarkerShape){const s=(t=>{const i=ht(t)&&t.series instanceof mc?t.series.getPointShape():void 0;return void 0===i||pr(i)?void 0:i})(t);void 0!==s&&(i.pointMarkerShape=s)}}return i})))).setResultTable((t=>t.setContent(e))),i=!0}else s.getVisible()&&(s.setVisible(!1).setPosition().setResultTable((t=>t.setContent([]))),i=!0);(null==h?void 0:h.afterCursorPointedAt)&&h.afterCursorPointedAt(v),i&&(s.Nh(),s.ir())}},solveNearest:(i,s,e,r)=>{const h=i||t.pi.Ia();if(!h)return[];let o=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=r(t,h,s);i&&o.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(o.sort(((t,i)=>n(t,h)-n(i,h))),o.length=1)}return o=Ni(o.map((t=>Ki(t)))),o},v_:s};return v},aA=(t,i,s)=>Bs(i,Ps($s(.5*(t.ju()+t.$t())*Math.PI/180),s)),lA=(t,i,s,e,r,h)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.iC.sr(s);else{const t=Bs(s,Ps($s(.5*(o+u)*Math.PI/180),h*c));l.iC.sr(t)}l.iC.Qu(o).Ar(u).qu(e).tc(e).sc(r),o=u}};class uA extends ja{constructor(t,i,s,e,r,h,n){var o;super(t,i,s,i.Hg("pieChart bg",0),e,i.pi.bi.pieChartBackgroundFillStyle,i.pi.bi.pieChartBackgroundStrokeStyle,i.pi.bi.pieChartTitleFont,i.pi.bi.pieChartTitleFillStyle,i.pi.bi.pieChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.xk=[],this.Sk=ed.SortByName,this.zu=0,this.Dk=this.bi.pieChartSliceFillStylePalette,this.Ek=this.bi.pieChartSliceStrokeStyle,this.bk=!0,this.Rk=this.bi.pieChartSliceLabelFont,this.Ok=this.bi.pieChartSliceLabelFillStyle,this.Mk=this.bi.pieChartSliceLabelShadow,this.wk=0,this.LP=!1,this.PP=20,this.Tk=!0,this.Lk=!0,this.Fk=t=>{const i=this.xk.indexOf(t);i>=0&&(this.xk.splice(i,1),this.Ik())},this.D=new yt,this.pi.La(jh.wo),this.Pk=i.Om("pieChart bottom",0),this.Bk=i.Om("pieChart top",1),this.Yr.tn("Pie Chart"),this.jg(r,this.eA),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let i=0;i<t.length;i+=1)t[i].setExploded(!1)})()}));const a=i.Ym(),l=Zt(n?n.cursorBuilder:void 0,jl);this.jm=oA(this,a,l.Am(a,this.uiScale,this.uiScale,jt,this.bi),void 0,"show-pointed",cA,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.jm.setCursor(t),this}getCursor(){return this.jm.getCursor()}setCursorMode(t){return this.jm.setCursorMode(t),this}getCursorMode(){return this.jm.getCursorMode()}setCustomCursor(t){return this.jm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.jm.tx(t),this}setCursorFormatting(t){return this.jm.setCursorFormatting(t),this}getCursorFormatting(){return this.jm.getCursorFormatting()}addCursor(t=jl){const i=this.Eg(),s=t.Am(i,this.uiScale,this.uiScale,this.Lg(i),this.bi);return this.Ug(s),s}addSlice(t,i){const s=new yd(this.wk,this.Pk,this.Bk,this,this.eA,this.Fk,this.bi,this.pi.vs);this.wk+=1,s.setName(t);const e=this.Er;return this.Er=!1,s.setValue(i),this.Er=e,s.setEffect(this.Tk),this.Vk(s),this.xk.push(s),this.Ik(),s.setHighlightOnHover(this.bk),this.Os.forEach((t=>{t.xg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.xk}setMultipleSliceExplosion(t){return this.LP=t,this}getMultipleSliceExplosion(){return this.LP}setInnerRadius(t){return this.zu=t,this.pi.Bs(),this}getInnerRadius(){return this.zu}setSliceExplosionOffset(t){return this.PP=t,this.pi.Bs(),this}getSliceExplosionOffset(){return this.PP}setLUT(t){return this.Sf=t,this.pi.Bs(),this}setSliceFillStyle(t){this.Dk=t;for(let t=0;t<this.xk.length;t+=1)this.Vk(this.xk[t]);return this.pi.Bs(),this}getSliceFillStyle(){return this.Dk}setSliceStrokeStyle(t){this.Ek="function"==typeof t?t(this.Ek):t;for(let t=0;t<this.xk.length;t+=1)this.Vk(this.xk[t]);return this.pi.Bs(),this}getSliceStrokeStyle(){return this.Ek}setSliceEffect(t){return this.Tk=t,this.xk.forEach((i=>i.vs.Ss.Ps(t))),this.pi.Bs(),this}getSliceEffect(){return this.Tk}setSliceSorter(t){return this.Sk=t,this.xk=this.xk.sort(this.Sk),this.pi.Bs(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){this.Ok="function"==typeof t?t(this.Ok):t;for(let t=0;t<this.xk.length;t+=1)this.Vk(this.xk[t]);return this.pi.Bs(),this}getLabelFillStyle(){return this.Ok}setLabelShadow(t){return this.Mk=t,this.pi.Bs(),this}getLabelShadow(){return this.Mk}setLabelFont(t){this.Rk="function"==typeof t?t(this.Rk):t;for(let t=0;t<this.xk.length;t+=1)this.Vk(this.xk[t]);return this.pi.Bs(),this}getLabelFont(){return this.Rk}setLabelEffect(t){return this.Lk=t,this.xk.forEach((i=>i.vs.xs.Ps(t))),this.pi.Bs(),this}getLabelEffect(){return this.Lk}setLabelFormatter(t){return this.zk=t,this.pi.Bs(),this}getLabelFormatter(){return this.zk}setSliceHighlightOnHover(t){return this.bk=t,this.xk.forEach((i=>i.setHighlightOnHover(t))),this}ir(t){super.ir(t),super.Yg();const i=Ha.tp(this.Yr,this.Wg),s=this.Os.reduce(((t,s)=>{const e=s.Nh(i,this.Gn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ha.ip(this.Yr,this.Wg,this.uiScale.ni(),this.Gn,s);const e=a(this.eA.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.eA.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+i)),r=a(e.x-s.left-s.right,e.y-s.top-s.bottom),h=a(this.Gn.left+(e.x+s.left-s.right)/2,this.Gn.bottom+(e.y+s.bottom-s.top)/2);if(this.Sf){const t=this.Sf;this.xk.forEach((i=>{this.Vk(i,new de({color:t.getColors(i.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.xk.length;t+=1){const i=Math.abs(this.xk[t].getAnimatedValue())>0;this.xk[t].iC.setVisible(i),this.xk[t].zh.setVisible(i)}this.xk=this.xk.sort(this.Sk);const n=this.xk.filter((t=>Math.abs(t.getAnimatedValue())>0));let o=0;for(let t=0;t<n.length;t+=1)o+=Math.abs(n[t].getAnimatedValue());const l=[];for(let t=0;t<n.length;t+=1)l.push((u=Math.abs(n[t].getAnimatedValue()))>0?u/o:0);var u;for(let t=0;t<n.length;t+=1){const i=n[t];i.zh.tn(this.zk(i,l[t])).Nh()}this.jm.ir(!1,this.xk,((t,i,s)=>{const e=l[n.indexOf(t)]||0,r=this.pi.il(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.pi.ai,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.pi.ai},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Os.forEach((t=>t.ir(i,this.Gn))),this.Nk(n,l,h,r)}Vk(t,i=this.Dk(t.index,t)){t.setStyle(i,this.Ek,this.Ok,this.Rk,this.Mk)}Ik(){this.xk=this.xk.sort(this.Sk),this.pi.Bs()}bg(){return this.xk}dispose(){return super.dispose(),this.xk.slice().forEach((t=>t.dispose())),this.jm.G(),this.Bk.G(),this.Pk.G(),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const cA=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class dA extends uA{constructor(t,i,s,e,r,h,n){super(t,i,s,e,r,h,n),this.zk=rd.NamePlusValue,this.Hk=[],this.BP=40,this.DP=5,this.EP=10,this.Wk=this.bi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Wk=t;for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].cr(this.Wk);return this.pi.Bs(),this}getLabelConnectorStyle(){return this.Wk}setLabelSliceOffset(t){return this.BP=t,this.pi.Bs(),this}getLabelSliceOffset(){return this.BP}setLabelConnectorGapStart(t){return this.DP=t,this.pi.Bs(),this}getLabelConnectorGapStart(){return this.DP}setLabelConnectorEndLength(t){return this.EP=t,this.pi.Bs(),this}getLabelConnectorEndLength(){return this.EP}Nk(t,i,s,e){const r=this.Rk.getSize(),h=this.BP,n=this.EP,o=this.DP,l=Math.min(this.PP,h-o);let u=0;if(1===t.length)u=t[0].zh.bc().x;else for(let i=0;i<t.length;i+=1)u=Math.max(u,t[i].zh.bc().x);const c=Math.max(.5*(Math.min(e.x-2*u-2*n,e.y-2*r)-2*h),0);if(c<50){const h=Math.max(.5*Math.min(e.x,e.y-2*r),0);lA(t,i,s,h,this.zu,l),t.forEach((t=>t.zh.setVisible(!1))),this.Hk.forEach((t=>t.setVisible(!1)))}else{lA(t,i,s,c,this.zu,l);let e=90;const r=t.map(((t,r)=>{const o=360*i[r],a=e-o,l=$s(Ns(.5*(e+a))),u=l.x>=0?-1:1,d=Bs(Bs(s,Ps(l,c+h)),{x:u*-n,y:0});e=a;const f={x:u,y:0};t.zh.sr(d).Zl(f),t.zh.Nh();const A=t.zh.mc();return{position:d,alignment:f,shape:t.zh,boundaries:A,sliceAngleVec:l,slice:t}})),u=[];for(let t=0;t<r.length;t+=1){const i=r[t],s=u[u.length-1];s&&!1!==ds([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(u.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.Hk.length;t+=1)this.Hk[t].setVisible(!1);u.forEach(((t,i)=>{const e=t.slice.iC,r=aA(e,s,c+o+l*t.slice.getAnimatedExplosion()),h=((t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),r=i.x+(t-i.y)/e;return a(r,t)})(t.position.y,r,s),n=t.position;this.Xk([r,h,n])}))}}getMinimumSize(){return a(500,300)}Xk(t){let i;for(let t=0;t<this.Hk.length;t+=1)if(!this.Hk[t].getVisible()){i=this.Hk[t].setVisible(!0);break}void 0===i&&(i=this.Bk.Np(this.eA,void 0,[Ja.InternalUI]).cr(this.Wk).setPointerEvents(!1),this.Hk.push(i)),i.Vi().bu(t)}}class fA extends uA{constructor(){super(...arguments),this.zk=rd.Name,this.RP=.5}Nk(t,i,s,e){const r=this.PP,h=Math.max(0,.5*Math.min(e.x,e.y)-r);lA(t,i,s,h,this.zu,r);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.iC,o=e.zh,a=this.zu/100,l=((1-a)*this.RP+a)*h+e.getAnimatedExplosion()*r,u=aA(n,s,l);o.sr(u).Yl(0).Wl(0)}}getMinimumSize(){return a(200,200)}setLabelPosition(t){return this.RP=t,this.pi.Bs(),this}getLabelPosition(){return this.RP}}const AA={LabelsOnSides:dA,LabelsInsideSlices:fA},gA=100001,pA=200002,vA=300002,yA=400001,mA=510001,xA=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),r=Math.floor(99998/i),h=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=mA+i*o;let l=0;return{OP:()=>{const i=t.zP("dashboard ui",a+l);return l+=1,i},VP:()=>t.zP("dashboard legend",51e4),NP:i=>{const a=1+i*s,l=gA+i*e,u=pA+i*r,c=vA+i*h,d=yA+i*n,f=mA+i*o;let A=0;return{pi:t,Hg:(i,s)=>{const e=a+s;return t.zP(i,e)},Rm:(i,s)=>{const e=l+s;return t.zP(i,e)},u_:(i,s)=>{const e=u+s;return t.zP(i,e)},Om:(i,s)=>{const e=c+s;return t.zP(i,e)},Em:(i,s,e)=>{const r=c+s;return t.GP(i,r,e)},Jg:(i,s)=>{const e=d+s;return t.zP(i,e)},Rg:i=>{const s=f+A,e=t.zP(i,s);return A+=1,e},zg:()=>t.zP("panel legend",500002+i),Ym:()=>t.zP("panel cursor",600001+i)}}}};class SA extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,SA.prototype)}}class bA extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Nt.alert(e),Object.setPrototypeOf(this,bA.prototype)}}class MA extends bA{constructor(t){super(t),Object.setPrototypeOf(this,MA.prototype)}}class wA{constructor(t){this.D=new yt,this.M=t}C(t){return this.M=t,this.D.R("change",{value:t}),this}T(){return this.M}O(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}const _A=(t,i)=>i?t.x:t.y,kA=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),CA=(t,i,s,e,r,h)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(_A(r,h)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>kA(t,o,h,i))).reduce(((t,i)=>Math.max(t,_A(i.panel.getMinimumSize()||{x:0,y:0},h))),20),n=a[i-1];if(1===o&&c>_A(r,h)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/_A(r,h)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class TA{constructor(t,i,s,e,r,h){this.coordsRelative="relative",this.coordsClient="client",this.ci=!1,this.tT=new Array,this.$P=[],this.UP=void 0,this.YP=!0,this.jP=!0,this.HP=!0,this.Cg=!1,this.WP=!0,this.XP=()=>{this.WP=!0,this.pi.Bs()},this.ZP=[],this.JP=t=>{for(let i=0;i<this.tT.length;i+=1)if(this.tT[i].panel===t){this.tT.splice(i,1),this.YP=!0,this.pi.Bs();break}},this.QP=t=>{const i=this.$P.indexOf(t);i>=0&&this.$P.splice(i,1)},this.KP=(t,i,s,e,r)=>{if(this.qP(i,s,e,r)){const h={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:r};return this.tT.push(h),this.tB(h),this.YP=!0,t}throw new SA("Out of dashboard range.")},this.D=new yt,this.iB=i.numberOfRows,this.sB=i.numberOfColumns,this.Pg=t,this.eB=i,this.rB=e;const n=this.sB*this.iB;this.hB={x:new wA(new Array(this.sB).fill(1)),y:new wA(new Array(this.iB).fill(1))},this.bi=s.bi,this.nB=this.bi.dashboardSplitterStyle,this.Er=!1!==(null==i?void 0:i.animationsEnabled),this.oB=xA(s,n),this.aB=s.zP("dashboard splitters",500001),this.lB=()=>this.oB.OP(),this.Og=this.oB.VP(),this.vs=s.vs.ys(this,{uB:{}}),this.vs.uB.Ps(this.bi.effectsDashboardSplitters);const o=s.kt();this.uiScale=Q.d2({scaleXYConstructor:Z}).ii(0,100).si(0,100).Z(o),this.eA=Q.d2({scaleXYConstructor:Z}).ii(0,this.uiScale.x.getCellSize()).si(0,this.uiScale.y.getCellSize()).Z(o),this.cB=s.dB.bind(s),this.fB=s.AB.bind(s),this.gB=s.pB.bind(s),this.vB=s.yB.bind(s),this.ja=s.ja.bind(s),this.Wa=s.Wa.bind(s),this.engine=s.Dg,this.pi=s.Mc,s.O("resize",this.XP),s.Bs();const a=t=>{this.Cg=t.isInView,this.D.R("inviewchange",{isInView:this.Cg})};s.O("inviewchanged",a),this.$g=()=>{s.N("inviewchanged",a)},this.mB(),this.setAnimationsEnabled(this.Er),this.createChartXY=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Bc(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Ud(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Jc(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=FA(t,this.eB,this.Er),s=i&&i.type?i.type:dA;return this.KP(new s(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Hf(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=FA(t,this.eB,this.Er),s=i&&i.type?i.type:dd;return this.KP(new s(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=FA(t,this.eB,this.Er),s=t&&t.type?t.type:Cd;return this.KP(new s(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Ya(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendPanel=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new iA(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,t.legend),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new Nc(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=FA(t,this.eB,this.Er);return this.KP(new fu(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=FA(t,this.eB,this.Er),s=new zl(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i);return this.KP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=FA(t,this.eB,this.Er),s=new wf(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this);return this.KP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=FA(t,this.eB,this.Er),s=new Bf(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i);return this.KP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=FA(t,this.eB,this.Er),s=new qf(this.Pg,this.oB.NP(this.xB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.JP,h,this,i);return this.KP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}xB(t,i){return t+i*this.sB}SB(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.sB:this.iB,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).hi({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.sB,y:this.iB},i),d3:()=>new $({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.sB,y:this.iB},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.cB(t[0]),this.fB(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.gB(t[0]),this.vB(t[1]),this}getWidth(){return this.ja()}getHeight(){return this.Wa()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.aB.Bs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.aB.Bs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.bi}setSplitterStyle(t){const i=this.nB;return this.nB="function"==typeof t?t(this.nB):t,this.bB(i),this}getSplitterStyle(){return this.nB}setSplitterEffect(t){return this.vs.uB.Ps(t),this.pi.Bs(),this}getSplitterEffect(){return this.vs.uB.Ds()}setAnimationHighlight(t){return this.HP=t,this.ZP.forEach((i=>this.pi.Ms.Ns(i.line,t))),this}getAnimationHighlight(){return this.HP}bB(t){for(const t of this.ZP)t.line.cr(this.nB);this.mB()}setColumnWidth(t,i){const s=this.hB.x.T();return t>=0&&t<s.length&&(s[t]=i,this.hB.x.C(s)),this.XP(),this}getColumnWidth(t){const i=this.hB.x.T();if(t>=i.length)throw new SA("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.hB.y.T();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.hB.y.C(s)),this.XP(),this}getRowHeight(t){const i=this.hB.y.T();if(t>=i.length)throw new SA("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.eA.getInnerIntervalPixels()}MB(t,i,s){if(s&&Math.abs(t.x)>0)this.wB(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this._B(i,t.y)}for(const t of this.tT)t.panel.H();this.XP()}_B(t,i){const s=CA(this.tT,this.hB.y.T(),t,i,this.eA.kt(),!1);this.hB.y.C(s),this.XP()}wB(t,i){const s=CA(this.tT,this.hB.x.T(),t,i,this.eA.kt(),!0);this.hB.x.C(s),this.XP()}kB(){this.ZP.forEach((t=>t.line.dispose())),this.ZP.length=0;for(let t=1;t<=this.sB-1;t+=1)for(let i=0;i<=this.iB-1;i+=1)if(void 0!==this.tT.find((s=>gs(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=this.aB.dr(this.eA).cr(this.nB);s.addEventListener("pointerenter",(i=>{this.ZP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.pi.Ms.Vs(i.line,1),this.aB.CB(i.line))})),this.UP=this.engine.setMouseStyle(exports.MouseStyles.ResizeColumn,this.UP),this.pi.Bs()})),s.addEventListener("pointerleave",(i=>{this.ZP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.pi.Ms.Vs(i.line,0)})),this.UP=this.engine.restoreMouseStyle(this.UP),this.pi.Bs()})),s.addEventListener("pointerdown",(i=>{di(i);let s=i;const e=i=>{di(i),this.UP=this.engine.setMouseStyle(exports.MouseStyles.ResizeColumn,this.UP),this.ZP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.pi.Ms.Vs(i.line,1),this.aB.CB(i.line))}));const e={x:i.clientX-s.clientX,y:i.clientY-s.clientY};s=i,this.MB(e,t,!0)},r=s=>{s.pointerId===i.pointerId&&(this.ZP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.pi.Ms.Vs(i.line,0)})),this.UP=this.engine.restoreMouseStyle(this.UP),Nt.removeEventListener("pointermove",e),Nt.removeEventListener("pointerup",r))};Nt.addEventListener("pointermove",e),Nt.addEventListener("pointerup",r)})),this.pi.Ms.bs(s,(t=>s.Ii(t)),{animationEnabled:this.HP}),this.ZP.push({row:i,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.iB-1;t+=1)for(let i=0;i<=this.sB-1;i+=1)if(void 0!==this.tT.find((s=>gs(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=this.aB.dr(this.eA).cr(this.nB);s.addEventListener("pointerenter",(i=>{this.ZP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.pi.Ms.Vs(i.line,1),this.aB.CB(i.line))})),this.UP=this.engine.setMouseStyle(exports.MouseStyles.ResizeRow,this.UP),this.pi.Bs()})),s.addEventListener("pointerleave",(i=>{this.ZP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.pi.Ms.Vs(i.line,0)})),this.UP=this.engine.restoreMouseStyle(this.UP),this.pi.Bs()})),s.addEventListener("pointerdown",(i=>{di(i);let s=i;const e=i=>{di(i),this.UP=this.engine.setMouseStyle(exports.MouseStyles.ResizeRow,this.UP),this.ZP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.pi.Ms.Vs(i.line,1),this.aB.CB(i.line))}));const e={x:i.clientX-s.clientX,y:-(i.clientY-s.clientY)};s=i,this.MB(e,t,!1)},r=s=>{s.pointerId===i.pointerId&&(this.ZP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.pi.Ms.Vs(i.line,0)})),this.UP=this.engine.restoreMouseStyle(this.UP),Nt.removeEventListener("pointermove",e),Nt.removeEventListener("pointerup",r))};Nt.addEventListener("pointermove",e),Nt.addEventListener("pointerup",r)})),this.pi.Ms.bs(s,(t=>s.Ii(t)),{animationEnabled:this.HP}),this.ZP.push({row:t,column:i,line:s,alignment:"horizontal"})}this.vs.uB.ks(this.ZP.map((t=>t.line)))}TB(){const t=this.eA.kt(),i=this.hB.x.T(),s=i.reduce(((t,i)=>t+i)),e=this.hB.y.T(),r=e.reduce(((t,i)=>t+i));this.ZP.forEach((h=>{if("vertical"===h.alignment){const n=a(t.x*i.slice(0,h.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,h.row).reduce(((t,i)=>t+i),0)/r),o=a(n.x,t.y*e.slice(0,h.row+1).reduce(((t,i)=>t+i),0)/r);h.line.gr(n).Ar(o)}else{const n=a(t.x*i.slice(0,h.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,h.row).reduce(((t,i)=>t+i),0)/r),o=a(t.x*i.slice(0,h.column+1).reduce(((t,i)=>t+i),0)/s,n.y);h.line.gr(n).Ar(o)}}))}setAnimationsEnabled(t){return this.Er=t,this.getCells().filter((t=>t.panel instanceof ja)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.Er),this}getAnimationsEnabled(){return this.Er}getCells(){return this.tT.slice()}dispose(){return this.ci||(this.$g&&this.$g(),this.tT.slice().forEach((t=>t.panel.dispose())),this.$P.slice().forEach((t=>t.dispose())),this.ci=!0,this.rB(),this.D.R("dispose",{})),this}isDisposed(){return this.ci}getIsInView(){return this.Cg}saveToFile(t,i,s,e){return Ca(this.engine,t,i,s,e),this}wc(t){if(this.WP){const t=this.pi.ai.kt(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.eA.Z(i,s);const e=this.uiScale.getInnerIntervalPixels();this.eA.ii(0,e.x).si(0,e.y),this.D.R("resize",{width:e.x,height:e.y,engineWidth:i,engineHeight:s}),this.jP=!0}this.YP&&(this.kB(),this.YP=!1,this.jP=!0),this.jP&&(this.TB(),this.jP=!1);for(const i of this.tT)i.panel.ir(t);return this.$P.forEach((t=>t.Nh())),this.$P.forEach((t=>t.ir())),this.WP=!1,this}j(){for(const t of this.tT)t.panel.j();return this.eA.x.j(),this.eA.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}H(){for(const t of this.tT)t.panel.H();return this.eA.x.H(),this.eA.y.H(),this.uiScale.x.H(),this.uiScale.y.H(),this}translateCoordinate(t,i,s){return Ia(t,i,s,this.eA,this.pi)}addUIElement(t=bo,i=this.uiScale){i=Fa(i,this.eA);const s=Ta(t,this.lB(),this.uiScale,i,this.QP,this.bi);return this.$P.push(s),s}qP(t,i,s,e){return i>=0&&t>=0&&i+e<=this.iB&&t+s<=this.sB}tB(t){const i=this.nB,s=i===Tt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.iB-1?s:0,right:t.columnIndex<this.sB-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Mn(e)}mB(){this.uiScale.x.St([0,0]),this.uiScale.y.St([0,0]),this.eA.x.St([0,0]),this.eA.y.St([0,0]);for(const t of this.tT)this.tB(t);this.pi.Bs()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const FA=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var r,h;return e.rowIndex=(r=e.rowIndex,h=e.rowSpan,i.numberOfRows-(r+h)),e},IA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,r=0,h=0;const n=[],o=t=>{const i=new Nt.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new _t({source:i,fitMode:exports.ImageFitMode.Stretch});null===(s=t.xd)||void 0===s||s.qe(e),r=i.width,h=i.height,u(t)}))}};o(i);const a=t=>{o(t.logoDataURI)};let l;if(t.Pa.addEventListener("logochange",a),new Nt.Image instanceof Nt.HTMLImageElement){const t=new Nt.Image;t.src=i,l=new _t({source:t,fitMode:exports.ImageFitMode.Stretch})}else if(Nt.lcjs_setup){const t=new Nt.Image;t.src=i;const s=Nt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new _t({source:s,fitMode:exports.ImageFitMode.Stretch})}else l=new de({color:M("#f00")});const u=t=>{if(t.xd){const i=t.ai.Qt({x:t.ai.x.getInnerEnd(),y:t.ai.y.getInnerStart()},{x:-(3+r),y:3}),s=t.ai.Qt({x:t.ai.x.getInnerEnd(),y:t.ai.y.getInnerStart()},{x:-3,y:3+h}),e={x:s.x-i.x,y:s.y-i.y};t.xd.sr(i).Z(e)}e&&e.Bs()};return e=t.zP("logo",Number.MAX_SAFE_INTEGER),i=>{const r={ai:i};return(i=>{const r=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?PA:LA;if(i.xd&&i.xd.dispose(),e){let s;i.xd=e.tr(i.ai).qe(l).setPointerEvents(!0).Ke(Tt),i.xd.addEventListener("pointerenter",(()=>{s=t.Rn(exports.MouseStyles.Point)})),i.xd.addEventListener("pointerleave",(()=>{s=t.On(s)})),i.xd.addEventListener("click",r),u(i)}})(r),n.push(r),{Nh:()=>u(r),G:()=>(i=>{i.xd&&(i.xd.dispose(),i.xd=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.Pa.removeEventListener("logochange",a)})(r)}}},LA=()=>Nt.open("https://lightningchart.com/lightningchart-js/"),PA=()=>Nt.open("https://lightningchart.com/python-charts/");class BA{constructor(){this.FB=this.IB.bind(this),Nt.addEventListener("scroll",this.FB,{passive:!0})}G(){this.FB&&Nt.removeEventListener("scroll",this.FB),this.FB=void 0}}class DA{constructor(t,i){this.Cl=t,this.Y=i,this.LB=!0,this.PB=null,this.BB=null}}class EA{constructor(t){this.DB=!1,this.EB=1,this.RB=t,this.OB={Cl:a(0,0),Y:a(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),LB:!0,PB:null,BB:null},this.zB=a(64,64),this.VB=new Uint8ClampedArray(this.zB.x*this.zB.y*this.EB)}NB(t,i){if(!t.LB)return null;if(t.PB&&t.BB){const s=this.NB(t.PB,i);return null!==s?s:this.NB(t.BB,i)}const s=l(t.Y.x,t.Y.y);if(t.Cl.x+t.Y.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.zB.x-t.Cl.x-1),t.Cl.y+t.Y.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.zB.y-t.Cl.y-1),t.Y.x===i.x&&t.Y.y===i.y)return t.LB=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,r;const h=s.x-i.x,n=s.y-i.y;let o=h<n;return 0===h&&0===n&&(o=!(t.Y.x>t.Y.y)),o?(e=new DA(Bs(t.Cl,{x:0,y:1}),a(t.Y.x,i.y)),r=new DA(Bs(t.Cl,{x:0,y:i.y+1}),a(t.Y.x,t.Y.y-1-i.y))):(e=new DA(Bs(t.Cl,{x:1,y:0}),a(i.x,t.Y.y)),r=new DA(Bs(t.Cl,{x:i.x+1,y:0}),a(t.Y.x-1-i.x,t.Y.y))),t.PB=e,t.BB=r,this.NB(t.PB,i)}GB(t,i){const s={$B:!1,Cl:null};let e=this.NB(this.OB,i);if(null===e)for(;null===e&&this.zB.x<this.RB&&this.zB.y<this.RB;){if(!this.UB(a(2*this.zB.x,2*this.zB.y)))return this.DB=!0,null;s.$B=!0,e=this.NB(this.OB,i)}if(null===e)return this.DB=!0,null;for(let s=0;s<i.y;s+=1)for(let r=0;r<i.x;r+=1){const h=e.Cl.y+s,n=e.Cl.x+r;this.VB[h*this.EB*this.zB.x+n*this.EB+0]=t[s*this.EB*i.x+r*this.EB+0]}return s.Cl=e.Cl,s}UB(t){if(t.x>this.RB||t.y>this.RB)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.EB);for(let s=0;s<this.zB.y;s+=1)for(let e=0;e<this.zB.x;e+=1)i[s*t.x*this.EB+e*this.EB+0]=this.VB[s*this.zB.x*this.EB+e*this.EB+0];return this.zB=t,this.VB=i,!0}}class RA{constructor(t){this.YB=new Map,this.RB=t,this.YB.set(this.YB.size,new EA(this.RB))}jB(t){return this.YB.get(t)}GB(t,i){let s=-1;const e=Array.from(this.YB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.DB){s=t;break}}-1===s&&(s=this.YB.size,this.YB.set(this.YB.size,new EA(this.RB)));const r=this.YB.get(s);if(!r)return null;let h=r.GB(t,i);if(!h&&r.DB){const e=this.YB.size,r=new EA(this.RB);this.YB.set(e,r),s=e,h=r.GB(t,i)}return h?{HB:s,...h}:null}}var OA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(OA||(OA={}));const zA=Bi("font-texture");class VA{constructor(t){this.WB=new Map,this.XB=new Map,this.xi=zA(),this.ZB=t,this.JB=new RA(this.ZB.QB||4096)}_c(){return this.XB.forEach((t=>{this.ZB.KB(t)})),this.XB.clear(),this}qB(t,i){const s=this.WB.get(i);if(s)return s.get(t)}tD(t,i,s){let e=this.WB.get(i);if(e||(e=new Map,this.WB.set(i,e)),e.has(t.glyph))return OA.Success;const r=this.JB.GB(s,t.size);if(!r||!r.Cl)return OA.Fail;r.$B&&this.iD();const h=this.JB.jB(r.HB);if(!h)return OA.Fail;let n=this.XB.get(r.HB);if(!n){const t=this.ZB.gl.createTexture();if(!t)throw new bA("Failed to create texture for font!");n=t,this.XB.set(r.HB,t)}const o=r.Cl,a=h.zB.x,l=h.zB.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,p=(o.x+t.size.x)/a,v=o.y/l,y=[A,g,p,g,A,v,A,v,p,g,p,v],m=[u,c,d,c,u,f,u,f,d,c,d,f],x={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:m,texCoords:y,packerId:r.HB,texture:n};e.set(t.glyph,x);const S=this.ZB.gl;return S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),S.bindTexture(S.TEXTURE_2D,n),S.texImage2D(S.TEXTURE_2D,0,S.LUMINANCE,h.zB.x,h.zB.y,0,S.LUMINANCE,S.UNSIGNED_BYTE,this.ZB.sD?h.VB:new Uint8Array(h.VB)),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.bindTexture(S.TEXTURE_2D,null),r.$B?OA.Resize:OA.Success}iD(){this.WB.forEach((t=>{t.forEach(((i,s)=>{const e=this.JB.jB(i.packerId);if(!e)return;const r=i.origin,h=e.zB.x,n=e.zB.y,o=r.x/h,a=(r.y+i.size.y)/n,l=(r.x+i.size.x)/h,u=r.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const NA=t=>(i,s)=>s%2?i:i+t;class GA{constructor(t){this.eD=new Map,this.rD=Bi("font"),this.hD=new Map,this.nD=new Set,this.ZB=t}_c(t=!1){return(t||0===this.nD.size)&&(this.eD.forEach(((t,i)=>{t._c(),this.eD.delete(i)})),this.nD.clear()),this}Kc(t){this.nD.add(t)}oD(t){this.nD.delete(t)}aD(t,i,s,e){const r=Nt.devicePixelRatio,h=`${e?"dark":"light"} - ${en(i,r).id}`,n=this.hD.get(h),o=this.eD.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*r,A=Math.round(1*i.size*r);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.qB(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const p=Sr(u/r,(l-a+1)/r,s);return{x:p.x,y:p.y,isEstimate:g}}lD(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let r=this.hD.get(e);r||(r=this.rD(),this.eD.set(r,new VA(this.ZB)),this.hD.set(e,r));const h=this.eD.get(r);if(!h)throw new bA("Failed to get font texture!");let n=0,o=0,l=0;const u=t.split(""),c=new Map;let d=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],r=Math.ceil(d);let a=h.qB(e,A);if(!a){const r=this.ZB.uD(e,i.properties,i.dpr,s);if(!r)continue;const l=h.tD(r[1],A,r[0]);if(l===OA.Resize){this.nD.forEach((t=>{t.ml.u=!0})),t=-1,d=0,o=0,n=0,c.clear(),this.ZB.pi.Bs(!0);continue}if(l===OA.Fail)throw new bA("Failed to create glyph");if(a=h.qB(e,A),!a)throw new bA("Failed to get glyph after creation")}if(""!==e.trim()){let t=c.get(a.texture);t||(t={vertices:[],texCoords:[]},c.set(a.texture,t)),t.vertices.push(...a.vertices.map(NA(r))),t.texCoords.push(...a.texCoords),o=Math.max(o,a.baseline),n=Math.min(n,a.baseline-(a.size.y-1))}d+=a.advanceX}l=d;const g=f(a(0,n),a(l,o)),p=[];return c.forEach(((t,i)=>{p.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[p,g]}}const $A={roundUnsigned:{cD:"roundUnsigned",dD:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{cD:"linearStep",dD:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},dither:{cD:"dither",dD:"\nconst mat4x4 bayerMatrix4x4 = mat4x4(\n    0.0,  8.0,  2.0, 10.0,\n    12.0, 4.0,  14.0, 6.0,\n    3.0,  11.0, 1.0, 9.0,\n    15.0, 7.0,  13.0, 5.0\n) / 16.0;\n\nvec4 dither(vec2 pos, vec4 c0, vec4 c1, float s0, float s1, float mixVal)\n{\n    float step = linearStep(s0, s1, mixVal);\n    int x = int(pos.x) % 4;\n    int y = int(pos.y) % 4;\n    float threshold = bayerMatrix4x4[y][x];\n    vec4 color = mix(c0, c1, step * 0.95 + threshold * 0.05);\n    return color;\n}"},decodeUbyteRGBAEncodedFloat:{cD:"decodeUbyteRGBAEncodedFloat",dD:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{cD:"texelFetchWithFallback",dD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{cD:"texelFetchWithFallback",dD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{cD:"texelFetchUnsignedWithFallback",dD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{cD:"texelFetchUnsignedWithFallback",dD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{cD:"modulus",dD:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{cD:"computeScreenSpaceWireframe",dD:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},UA="posAxis",YA="posWorld",jA="normal",HA="colorFragment",WA="antiAliasFactor",XA="mousePickingIdOffset",ZA="uRatioPxClip",JA="uRatioNwuWu",QA="uColorTexture",KA="uSizePixels",qA="uOffsetAlignment",tg="uMaskTexture",ig="aNormal",sg="Rot";class eg{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>rg(t)));for(const s of i)t=s(t);return`${Vi(this.modifiers.filter((t=>ng(t)))).map((t=>t.dD)).join("\n")}\n${t}`}}const rg=t=>"function"==typeof t,hg={cD:"ratioPxClip",dD:`uniform vec2 ${ZA};`},ng=t=>t&&"object"==typeof t&&"cD"in t,og=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},ag=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),lg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},ug=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),r=new RegExp(`(.*${t}.*)`),h=s.replace(r,`${e}\n$1`);return i.forEach((i=>{if(!h.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${h}\n)`)})),h},cg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const r=e.join("\n"),h=s.lastIndexOf(t),n=s.substring(h),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,h+o)}\n${r}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},dg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},fg=(t,i)=>s=>{let e,r;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=og(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=og(t)(s),r=i.split(" ")[2].replace(";","")}else r=i;return dg(`\t${r} = ${e};`)(s)},Ag=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},gg=(t,i)=>{const s=i.steps,e=s.length-1,r=[og("uniform vec4 uFallbackColor")],h=[],n=[];for(let t=0;t<i.steps.length;t+=1)h.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return r.push(og(...h,...n),i.percentageValues&&og("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?r.push(cg(`${HA} =`,"vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${Lt}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),`${HA} = colorLookup`)):r.push(cg(`${HA} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${Lt}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,`${HA} = colorLookup`)),r},pg=[og(`uniform sampler2D ${tg}`),og("varying vec2 vMaskTextureCoord"),cg(`${WA} =`,`vec4 maskTextureSample = texture2D(${tg}, vMaskTextureCoord)`,`${WA} = maskTextureSample.r`)],vg=[og(`uniform sampler2D ${tg}`),og("varying vec2 vMaskTextureCoord"),cg(`${WA} =`,`vec4 maskTextureSample = texture2D(${tg}, vMaskTextureCoord)`,`${WA} = maskTextureSample.a`)],yg=[og("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),cg(`${HA} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${HA}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${HA} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${HA}.a)`)],mg=(t,...i)=>{var s,e;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const r=i[0];return{vertexShaderModifiers:[og("varying vec4 d"),dg(`d = vec4(${i[0]}.x, ${i[0]}.y, ${null!==(s=i[1])&&void 0!==s?s:r}.x, ${null!==(e=i[1])&&void 0!==e?e:r}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[og("varying vec4 d"),dg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class xg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const Sg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const r=Object.keys(e).sort();for(const s of r){const r=e[s];"object"==typeof r&&r.__proto__===Object.prototype||Array.isArray(r)?t.push({prefix:s,obj:r}):i+=`${s}=${String(r)},`}}}return i},bg=t=>void 0!==t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.AD})),Mg=t=>void 0!==t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.gD})),wg=(t,i,...s)=>{const e=[],r=i?"vec3":"vec2",{axisWorldTranslation:h,scaling:n,translation:o,flipXY:a,flipXZ:l,offsets:u,splitPosAttribute:c,normalSource:d}=t,f=[];"attribute"===d&&e.push(og(`attribute vec3 ${ig}`),lg(`vec3 ${jA} = ${ig}`)),"linear-highPrecision"!==h?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?f.push(`${r} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${r} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):s.forEach((i=>{!0!==t.splitPosAttribute?f.push(`${r} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`,`${r} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`):f.push(`${r} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`,`${r} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`)}));const A=(t=>{if(t)for(const s of t){const t=(null==(i=s)?void 0:i.rotation)&&i.rotation.dataType;if(void 0!==t&&!1!==t)return t}var i})(u);if("attribute-deg"===A&&e.push(og("attribute float aRotDeg"),og("uniform float uBaseRotDeg")),"attribute"===A&&e.push(og("attribute vec2 aRot")),"uniform"===A&&e.push(og("uniform vec2 uRot")),null==u||u.forEach((t=>{if(t&&t.rotation){const i=t.rotation.dataType,s="uniform"===i?"u":"a";if("attribute-deg"===i){const i=t.directionVar,s=`c${sg}`;e.push(lg(`vec2 ${t.directionVar}Rot = vec2(${i}.x * ${s}.y + ${i}.y * ${s}.x, ${i}.y * ${s}.y - ${i}.x * ${s}.x)`))}else{const i=`${s}${sg}`,r=t.directionVar;e.push(lg(`vec2 ${t.directionVar}Rot = vec2(${r}.x * ${i}.y + ${r}.y * ${i}.x, ${r}.y * ${i}.y - ${r}.x * ${i}.x)`))}}})),null==u?void 0:u.find((t=>(null==t?void 0:t.rotation)&&"attribute-deg"===t.rotation.dataType))){const t=`c${sg}`;e.push(lg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`))}if(u&&u.forEach((t=>{t&&!0!==t.skipAddDefinition&&e.push(og(`attribute ${r} ${t.directionVar}`))})),!0===a){if("linear-highPrecision"===h)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===l){if("linear-highPrecision"===h)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===h)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",r=i?"vec3":"vec2";e.push(og(`${n.dataType} ${r} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===h)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",r=i?"vec3":"vec2";e.push(og(`${o.dataType} ${r} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(null==u||u.forEach((t=>{if(t&&"axis"===t.sizeUnit){if("linear-highPrecision"===h)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const n=("attribute"===t.dataType?"a":"u")+"OffsetAxis",o=!0===t.symmetric?"float":r;e.push(og(`${t.dataType} ${o} ${n}`));const a=t.halved?" * 0.5":"",l=t.rotation?`${t.directionVar}Rot`:t.directionVar,u="offsetGeometry";f.push(`${r} ${u} = ${n} * ${l}${a} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${r} ${jA} = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}})),void 0===h||"linear"===h)e.push(og(`uniform ${r} uDisp`,`uniform ${r} uScale`)),s.forEach((t=>{f.push(`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===h)e.push(og(`uniform ${r} uDisp`,`uniform ${r} uScale`,`uniform ${r} uScaleStart_highpart`,`uniform ${r} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${r} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${r} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===h)e.push(og("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===h)e.push(og("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===h[0]){e.push(og(`uniform ${r} uScaleStart`,`uniform ${r} uScaleStartLog`,`uniform ${r} uScaleInterval`,`uniform ${r} uScaleIntervalLog`,`uniform ${r} uViewportStart`,`uniform ${r} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=h[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Ws(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(og(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),r=h[1][t];if(void 0===r)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const h=r.base,n="e"===h;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${h}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${r} ${i.variableNameWorldCoord} = uViewportStart + ${r}(${n.join(", ")}) * uViewportSize`)}))}return null==u||u.forEach((t=>{if(t&&"px"===t.sizeUnit){e.push(hg);let i="vec2(0.0, 0.0)";if(t.useAlignment&&(e.push(og(`uniform vec2 ${qA}`)),i=qA),s.find((t=>t.overrideOffsetPixels)))s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${ZA}`)}));else{const h=`${t.directionVar}Amount`,n=!0===t.symmetric?"float":r;e.push(og(`${t.dataType} ${n} ${h}`));const o=t.halved?" * 0.5":"";let a;if(!1!==t.useGeometry){const s=t.rotation?`${t.directionVar}Rot`:t.directionVar;a=`(${s} + ${i}) * ${h}${o} * ${ZA}`}else a=`${h}${o} * ${ZA}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${a}`)}))}}if(t&&"scale"===t.sizeUnit){e.push(hg),e.push(og(`uniform vec2 ${KA}`));let i="vec2(0.0, 0.0)";t.useAlignment&&(e.push(og(`uniform vec2 ${qA}`)),i=qA);const r=("uniform"===t.dataType?"u":"a")+"OffsetScale";e.push(og(`${t.dataType} float ${r}`));const h=`(${t.rotation?`${t.directionVar}Rot`:t.directionVar} + ${i}) * ${r} * ${KA} * ${ZA}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(t&&"wu"===t.sizeUnit){const h=("attribute"===t.dataType?"a":"u")+"OffsetWU",n=!0===t.symmetric?"float":r;e.push(og(`${t.dataType} ${n} ${h}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${r} ${l} = ${h} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${r} ${jA} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(t&&"nwu"===t.sizeUnit){e.push(og(`uniform float ${JA}`));const h=("attribute"===t.dataType?"a":"u")+"OffsetNWU",n=!0===t.symmetric?"float":r;e.push(og(`${t.dataType} ${n} ${h}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${r} ${l} = ${h} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${r} ${jA} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${JA}`)}))}})),t.snapToNearestPixel&&(e.push(og("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(ug("gl_Position =",...f)),e},_g=(t,i,s,e)=>{const r=[],h=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===h)r.push(cg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===h)r.push(cg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===h)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===h)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==h[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),r=h[1][i];if(void 0===r)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const h=r.base,n="e"===h?"1.0":`cLog${h}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),r.push(cg(s,...t))}}return r},kg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.pD})))(t)?[ag("attribute vec4 aColor"),ag("vColor = aColor"),og("attribute vec4 aColorA"),og("attribute vec4 aColorB"),dg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Cg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.vD})))(t)?[ag("attribute float aLookupValue"),ag("vLookupValue = aLookupValue"),og("attribute float aLookupValueA"),og("attribute float aLookupValueB"),dg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Tg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",fD:{AD:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Sg(t)}`,idFragment:void 0,vertexShaderModifiers:[og(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),dg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,r=t&&t.overrideOpacity;return{idFeature:"Color",fD:{gD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,vD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,pD:"attribute"===t.dataType||void 0},apply:(h,n)=>{let o,a=`Color:${Sg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(og("uniform vec4 uColor"),cg(`${HA} =`,`${HA} = uColor`),...s?pg:[],...e?vg:[]);else if("attribute"===i)o="colorAttribute",l.push(fg("attribute vec4 aColor","varying vec4 vColor")),c.push(og("varying vec4 vColor"),cg(`${HA} =`,`${HA} = vColor`),...s?pg:[],...e?vg:[]);else if("texture"===i)o="colorTexCoord",l.push(fg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(og("varying vec2 vTextureCoord"),og(`uniform sampler2D ${QA}`),og("uniform vec4 uColor"),cg(`${HA} =`,`${HA} = texture2D(${QA}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${HA} = uColor;\n                    }`),...s?pg:[],...e?vg:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(og("attribute vec2 aTextureCoord"),og("varying vec2 vTextureCoord"),dg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(og("varying vec2 vTextureCoord"),og(`uniform sampler2D ${QA}`),lg(`vec4 ${HA} = texture2D(${QA}, vTextureCoord)`,`gl_FragColor = ${HA};`));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(fg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===exports.ImageFitMode.Tile?c.push(og(`uniform sampler2D ${QA}`),og("varying vec2 vTextureCoord"),cg(`${HA} =`,`${HA} = texture2D(${QA}, vTextureCoord);`)):c.push(og(`uniform sampler2D ${QA}`),og("varying vec2 vTextureCoord"),og("uniform vec4 uColor"),cg(`${HA} =`,`${HA} = texture2D(${QA}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${HA} = uColor;\n                            }`));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(fg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${UA}.${t}`;o=`lookup:${t}`,l.push(fg(i,"varying float vLookupValue"))}c.push(og("varying float vLookupValue"),...gg("vLookupValue",i[2]),...s?pg:[],...e?vg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],r=t.getColorStops();if(z(t)){const i="webgl2"===n&&!!((d=t)&&"object"==typeof d&&"type"in d&&"fillstyle"===d.type&&"fillType"in d&&"radial-gradient"===d.fillType&&!0===d.ditheringEnabled);a=`rgradient${r.length},${e},${s},${i}`,c.push(og("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),og(...Xt(r.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),$A.linearStep,i?$A.dither:void 0,cg(`${HA} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)",i?"vec4 color = dither(gl_FragCoord.xy, color_0, color_1, stop_0, stop_1, mixVal)":"vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...r.map(((t,s)=>s<2?"":i?`color = dither(gl_FragCoord.xy, color, color_${s}, stop_${s-1}, stop_${s}, mixVal);`:`color = mix(color, color_${s}, linearStep(stop_${s-1}, stop_${s}, mixVal));`)),`${HA} = color`),...s?pg:[],...e?vg:[])}else G(t)&&(a=`lgradient${r.length},${e},${s}`,c.push(og("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),og(...Xt(r.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),$A.linearStep,cg(`${HA} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...r.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),`${HA} = color`),...s?pg:[],...e?vg:[]))}var d;if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(fg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return r&&c.push(og("uniform float uOpacity"),cg(`${HA} =`,`${HA}.a *= uOpacity`)),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let r=s;const h=`ColorShaded3D:${Sg(t)}`;return{idFeature:"ColorShaded3D",fD:{gD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,vD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&fg(jA,"varying vec3 vNormal"),fg(YA,"varying vec3 vPosWorld")),"uniform"===i)a.push(og("uniform vec4 uColorDiffuse"),cg(`${HA} =`,`${HA} = uColorDiffuse`));else if("attribute"===i)r+=",per-vertex-color",o.push(fg("attribute vec4 aColor","varying vec4 vColor")),a.push(og("varying vec4 vColor"),cg(`${HA} =`,`${HA} = vColor`));else if(Array.isArray(i)){const t=i[1];if("value"===t)r+=",lookup:value",o.push(fg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${UA}.${t}`;r+=`,lookup:${t}`,o.push(fg(i,"varying float vLookupValue"))}a.push(og("varying float vLookupValue"),...gg("vLookupValue",i[2]))}return e&&(r+=",wireframe",o.push(fg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(og("varying vec3 vTriangleBary"),og("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),$A.computeScreenSpaceWireframe,cg(`${HA} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${HA} = mix(${HA}, uWireframeColor, edge)`))),"phong"===s&&a.push(...yg),{idVertex:r,idFragment:h,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=mg(t.axisWorldTranslation,"posAxis_hprecision"),e=[],r=bg(i),h=t.coordType?t.coordType:r?"vec3":"vec2";return t.isInstanceRectangleRendering?e.push(og("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),lg("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(og(`attribute ${h} aPos`)):e.push(og("attribute float aPosX"),og("attribute float aPosY"),r&&og("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(og("attribute float aPos_highpartX"),og("attribute float aPos_lowpartX"),og("attribute float aPos_highpartY"),og("attribute float aPos_lowpartY")):e.push(og(`attribute ${h} aPos_highpart`),og(`attribute ${h} aPos_lowpart`)),e.push(...wg(t,r,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:UA,variableNameWorldCoord:YA})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${Sg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(og("attribute vec3 aGeoPos"),og("uniform mat4 uModelRotation"),og("uniform mat4 uModelRotationNormals"),og("uniform vec3 uLocationAxis"),og("uniform vec3 uModelAlignment"),og("uniform vec3 uModelScale"),og("uniform vec3 uModelSize"),...wg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),ug("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&cg(`vec3 ${jA} =`,` ${jA} = (uModelRotationNormals * vec4(${jA}, 1.0)).xyz;`),...Mg(i)?_g({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,YA,UA):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${Sg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=mg(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision"),s=t.offsets&&t.offsets[0];return{idFeature:"LineInstanced2D",apply:e=>({idVertex:`LineInstanced2D:${Sg(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[og("uniform float uThicknessPixels"),hg,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[og("attribute vec2 aLocationA"),og("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[og("attribute vec2 aLocationA_highpart"),og("attribute vec2 aLocationB_highpart"),og("attribute vec2 aLocationA_lowpart"),og("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[og("attribute float aLocationAX"),og("attribute float aLocationAY"),og("attribute float aLocationBX"),og("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[og("attribute float aLocationA_highpartX"),og("attribute float aLocationA_highpartY"),og("attribute float aLocationB_highpartX"),og("attribute float aLocationB_highpartY"),og("attribute float aLocationA_lowpartX"),og("attribute float aLocationA_lowpartY"),og("attribute float aLocationB_lowpartX"),og("attribute float aLocationB_lowpartY")]:[],og("attribute vec2 aSegmentPosition"),og("attribute float aSegmentSide"),s&&og(`attribute vec2 ${s.directionVar}A`,`attribute vec2 ${s.directionVar}B`),...wg({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:s?`${s.directionVar}A`:void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:s?`${s.directionVar}B`:void 0}),t.ensureMinimumSegmentLength&&og("uniform vec2 uMinSegmentPixelVector"),cg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${YA} = offset + thicknessDirection * uThicknessPixels * ${ZA}`),...Cg(e),...kg(e),...Mg(e)?_g({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,YA,UA):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=mg(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${Sg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[og("attribute vec2 aLocationA"),og("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[og("attribute vec2 aLocationA_highpart"),og("attribute vec2 aLocationB_highpart"),og("attribute vec2 aLocationA_lowpart"),og("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[og("attribute float aLocationAX"),og("attribute float aLocationAY"),og("attribute float aLocationBX"),og("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[og("attribute float aLocationA_highpartX"),og("attribute float aLocationA_highpartY"),og("attribute float aLocationB_highpartX"),og("attribute float aLocationB_highpartY"),og("attribute float aLocationA_lowpartX"),og("attribute float aLocationA_lowpartY"),og("attribute float aLocationB_lowpartX"),og("attribute float aLocationB_lowpartY")]:[],og("attribute float aCurveOrBaseline"),og("attribute float aSegmentSide"),...wg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),cg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${YA} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...Cg(i),...kg(i),...Mg(i)?_g(t,!1,YA,UA):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${Sg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[og("uniform float uOffsetWU"),og("attribute vec3 aLocationA"),og("attribute vec3 aLocationB"),og("attribute float aSegmentPosition"),og("attribute float aPerpendHorizontal"),og("attribute float aPerpendVertical"),...wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},bg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),cg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${jA} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${YA} = worldA + aSegmentPosition * directionBasis + ${jA} * uOffsetWU * 0.5`),...Mg(i)?_g({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,YA,UA):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[og("attribute vec3 aEdge"),og("uniform float uEdgeRoundness"),cg(`${YA} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${YA} = ${YA} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian,r=t.aggregation;return{idFeature:"ColorGrid2D",apply:(h,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Sg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[og("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues",r&&"uniform vec2 uAggregationWindowSize"),"ubyte"===s&&$A.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?lg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):lg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",...r?[`float intensityP = ${"max"===r?"-":""}340282346638528859811704183484516925440.0`,`for (float dy = -uAggregationWindowSize.y; dy <= uAggregationWindowSize.y; dy++) {\n                                            for (float dx = -uAggregationWindowSize.x; dx <= uAggregationWindowSize.x; dx++) {\n                                                vec2 offset = vec2(dx, dy) / uTileDimensions;\n                                                vec2 coord = ${i?"offset":"vec2(offset.y, offset.x)"} + ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"};\n                                                vec4 sample0 = texture2D(uTileIntensityValues, coord);\n                                                float intensity0 = ${"float"===s?"sample0.x;":`decodeUbyteRGBAEncodedFloat(sample0, ${e};`}\n                                                intensityP = ${"max"===r?"max":"min"}(intensityP, intensity0);\n                                            }\n                                        }`]:[`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)]),...gg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,r=t.heightmapTextureType,h=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(og("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&$A.roundUnsigned,$A.modulus,$A.texelFetchWithFallback[o],"ubyte"===r&&$A.decodeUbyteRGBAEncodedFloat,lg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${h})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${h})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${h})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${h})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(og("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),lg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Sg(t)}`,idFragment:`DrawToNormalTexture:${Sg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,r=t.shadingStyle,h=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",fD:{yD:!0},apply:(u,c)=>{const d=[],f=[];return d.push(og("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),$A.modulus,$A.texelFetchWithFallback[c],"ubyte"===o&&$A.decodeUbyteRGBAEncodedFloat,lg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:UA,variableNameWorldCoord:YA})),"phong"===r&&d.push(fg(YA,"varying vec3 vPosWorld"),..."uint"===n?[$A.texelFetchUnsignedWithFallback[c],dg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[dg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],dg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),og("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(og("varying vec3 vTriangleBary")),"uniform"===i?f.push(og("uniform vec4 uColorDiffuse"),cg(`${HA} =`,`${HA} = uColorDiffuse`)):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(fg(`${UA}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(og("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&$A.decodeUbyteRGBAEncodedFloat,"bilinear"===s?lg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):lg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...gg("intensityP",i[2]))):(d.push(fg(`${UA}.${i[1]}`,"varying float vLookupValue")),f.push(og("varying float vLookupValue"),...gg("vLookupValue",i[2])))),"phong"===r&&f.push(...yg),h&&(d.push(og("attribute vec3 aTriangleBary"),fg("aTriangleBary","varying vec3 vTriangleBary")),f.push(og("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),$A.computeScreenSpaceWireframe,cg(`${HA} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?`if (edge > 0.0) {\n                                    ${HA} = vec4(mix(${HA}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${HA}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${HA} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${Sg(t)}`,idFragment:`SurfaceGrid:${Sg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${Sg(t)}`,idFragment:`DebugSurfaceGridNormals:${Sg(t)}`,vertexShaderModifiers:[og("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),$A.roundUnsigned,$A.modulus,$A.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&$A.decodeUbyteRGBAEncodedFloat,lg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[$A.texelFetchUnsignedWithFallback[s]]:[],...wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:UA,variableNameWorldCoord:YA}),cg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[dg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[og("uniform vec3 uCameraLoc"),cg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[og("attribute float aSegmentInside"),og("varying float vSegmentInside"),og("varying float vSegmentSide"),cg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Ag("#extension GL_OES_standard_derivatives : enable"),og("uniform float uAALimit"),og("varying float vSegmentInside"),og("varying float vSegmentSide"),cg(`${WA} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${WA} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,r=t.firstPass,h=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);h.push(r?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${Sg(t)}`,idFragment:`Glow1D:${Sg(t)}`,vertexShaderModifiers:[fg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[og("uniform sampler2D uTexture"),og("varying vec2 vTextureCoord"),og("uniform vec2 uTextureSize"),r&&og("uniform vec2 uOffsetPx"),!r&&og("uniform sampler2D uTextureFirstGlowPass"),!r&&og("uniform vec4 uGlowColor"),cg(`${WA} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...r?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${WA} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${WA} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...r?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...h.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${HA} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...h.map(((t,i)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${HA} = pixelGlowColor`])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),r=!i&&!s&&!e;return{idFeature:"MousePicking",fD:{yD:r,mD:s},apply:(h,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${Sg(t)}`,idFragment:`MousePicking:${Sg(t)}`,vertexShaderModifiers:[...r?[og(`${o} varying ${a} vPickingIdOffset`),dg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[og(`${o} varying ${a} vPickingIdOffset`),dg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[og("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),dg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[og("uniform int uFirstId"),...i?[]:[og(`${o} varying ${a} vPickingIdOffset`),lg(`int ${XA} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],cg(`${HA} =`,`int remainder = ${XA} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${HA} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${WA})`,`if (${WA} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[fg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[og("attribute vec2 aLengthSoFar"),og("varying float vLengthSoFar"),og("uniform vec2 uStippleCount"),dg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[og("uniform sampler2D uStippleTexture"),og("uniform float uStippleScale"),og("varying float vLengthSoFar"),"webgl1"===i&&og("uniform float uStippleTextureWidthLimiter"),cg(`${WA} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${WA} *= stippleAA;\n                    if (${WA} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[og("attribute vec2 aLengthSoFarA"),og("attribute vec2 aLengthSoFarB"),og("varying float vLengthSoFar"),og("uniform vec2 uStippleCount"),dg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[og("uniform sampler2D uStippleTexture"),og("uniform float uStippleScale"),og("varying float vLengthSoFar"),"webgl1"===i&&og("uniform float uStippleTextureWidthLimiter"),cg(`${WA} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${WA} *= stippleAA;\n                    if (${WA} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,r="interpolation"in t?t:void 0,h=r?r.flipXY:void 0,n="bilinear"===(null==r?void 0:r.interpolation),o=null==r?void 0:r.intensityTextureType,a=null==r?void 0:r.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Sg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[og("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",r&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),$A.texelFetchWithFallback[s],"ubyte"===o&&$A.decodeUbyteRGBAEncodedFloat,lg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),r&&cg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",h&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",h&&"cellStart = ivec2(cellStart.y, cellStart.x)",h&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&cg(`${HA} =`,`${HA} = uColor`),r&&cg("cellEnd","vec2 tileDimensions = "+(h?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...r?gg("intensityP",r.lut):[]]}}})},Fg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Ig={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${HA} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${WA} = 1.0;\n    vec4 fragColorEnd = ${HA};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${WA});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class Lg{constructor(t,i,s,e,r){if(this.id=t,this.shader=s,this.gl=e,this.info=r,!i||!s)throw new MA(`Could not find ${this.xD()} ${this.SD()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}xD(){return this.id.toString()}SD(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Pg extends Lg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Bg extends Lg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Dg{constructor(t,i,s,e){this.bD=new Map,this.MD=new Map,this.wD=s,this._D=s.createProgram(),this.kD=`${t.xD()} vertex`,this.CD=`${i.xD()} fragment`,s.attachShader(this._D,t.shader),s.attachShader(this._D,i.shader),s.bindAttribLocation(this._D,0,"aPos"),s.linkProgram(this._D),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}TD(t){return Ri(0,(()=>Oi()))}FD(t){const i=this.ID(t);if(void 0===i)throw this.TD(`Could not get ${t} uniform from ${this.kD} and ${this.CD} shaders.`);return i}ID(t){const i=this.bD.get(t);if(i)return i;const s=this.wD.getUniformLocation(this._D,t);return s?(this.bD.set(t,s),s):void 0}LD(t){const i=this.PD(t);if(void 0===i)throw this.TD(`Could not get ${t} attribute from ${this.kD} and ${this.CD} shaders.`);return i}PD(t){const i=this.MD.get(t);if(i||0===i)return i;const s=this.wD.getAttribLocation(this._D,t);return s>=0?(this.MD.set(t,s),s):void 0}G(){this.wD.deleteProgram(this._D)}}const Eg=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Rg=t=>{let i;try{i=Nt.getComputedStyle(t)}catch(t){return null}return i};
/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function Og(t){const i=Rg(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=Rg(Gg(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!Eg.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function zg(t){let i=t.length;for(;i--;)if(Og(t[i]))return t[i];return null}function Vg(t){var i;return t&&Number((null===(i=Rg(t))||void 0===i?void 0:i.zIndex)||0)||0}function Ng(t){const i=[];for(;t;)i.push(t),t=Gg(t);return i}function Gg(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}const $g=t=>t&&"resize"in t;class Ug extends BA{constructor(t){if(super(),this.BD=new Map,this.DD=new Map,this.ED=new Map,this.RD=!0,this.OD=null,this.zD=null,this.VD=null,this.ND=null,this.GD=0,this.$D=0,this.UD=0,this.YD=!1,this.jD=!0,this.ci=!1,this.HD=Bi(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.Y={x:100,y:100},this.WD=()=>{this.XD&&clearTimeout(this.XD),this.XD=setTimeout((()=>this.ia()),12)},this.ZD=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.BD.get(s);if(t){const e=t.JD();t.QD(i),i?this.DD.set(s,t):this.DD.delete(s),e!==i&&t.Bs()}}},this.KD=(t,i,s,e,r)=>{const h=r[0],n=this.gl;if(n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.zD._D),n.clear(n.COLOR_BUFFER_BIT),h.zn.getBoundingClientRect()){const t=h.qD();n.viewport(0,0,t.x,t.y),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,h.tE),n.uniform1i(this.GD,0),n.uniformMatrix4fv(this.$D,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.VD),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.UD,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),h.iE&&(h.iE.clearRect(0,0,h.iE.canvas.width,h.iE.canvas.height),h.iE.drawImage(this.sE,0,this.sE.height-t.y,t.x,t.y,0,0,h.iE.canvas.width,h.iE.canvas.height))}},this.eE=(t,i,s,e,r)=>{const h=this.gl;h.bindFramebuffer(null==h?void 0:h.FRAMEBUFFER,null),h.useProgram(this.zD._D),h.clear(h.COLOR_BUFFER_BIT),r.forEach((s=>{const r=s.zn.getBoundingClientRect();if(r){const s=r.right-r.left,n=r.bottom-r.top,o=r.left,a=e-r.bottom;h.viewport(o*this.rE-t*this.rE,a*this.rE+i*this.rE,s*this.rE,n*this.rE)}h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,s.tE),h.uniform1i(this.GD,0),h.uniformMatrix4fv(this.$D,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h.bindBuffer(h.ARRAY_BUFFER,this.VD),h.enableVertexAttribArray(0),h.vertexAttribPointer(this.UD,2,h.FLOAT,!1,0,0),h.drawArrays(h.TRIANGLES,0,6)})),h.bindFramebuffer(h.FRAMEBUFFER,null)},this.hE=(t,i,s,e,r)=>{const h=r[0],n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT);const o=h.qD();n.bindFramebuffer(n.READ_FRAMEBUFFER,h.nE[1]),n.blitFramebuffer(0,0,o.x,o.y,0,this.sE.height-o.y,o.x,this.sE.height,n.COLOR_BUFFER_BIT,n.LINEAR),h.iE&&(h.iE.clearRect(0,0,h.iE.canvas.width,h.iE.canvas.height),h.iE.drawImage(this.sE,0,0)),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.oE=(t,i,s,e,r)=>{const h=this.gl2.ctx;h.bindFramebuffer(h.DRAW_FRAMEBUFFER,null),h.clear(h.COLOR_BUFFER_BIT),r.forEach((s=>{const r=s.zn.getBoundingClientRect();if(r){const n=r.right-r.left,o=r.bottom-r.top,a=r.left,l=e-r.bottom,u=s.qD();h.bindFramebuffer(h.READ_FRAMEBUFFER,s.nE[1]),h.blitFramebuffer(0,0,u.x,u.y,a*this.rE-t*this.rE,l*this.rE+i*this.rE,(a-t+n)*this.rE,(l+i+o)*this.rE,h.COLOR_BUFFER_BIT,h.LINEAR)}})),h.bindFramebuffer(h.FRAMEBUFFER,null)},this.XD=void 0,this.Da=t,!Nt.requestAnimationFrame||!Nt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.aE)i=!0===t.aE?Nt.devicePixelRatio||1:t.aE||1;else{const t=Nt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=Nt.devicePixelRatio||1)}this.rE=i,t.Ea=!0===t.Ea,this.jD=!1!==t.lE,this.uE=!1!==t.cE,this.dE=t.dE||!1;let s=!1;if(t.sE)if("string"==typeof t.sE){const i=Nt.document.getElementById(t.sE);if(!i)throw new Error(`Canvas "${t.sE}" doesn't exist.`);this.sE=i,s=!0}else this.sE=t.sE,s=!0;else this.sE=Nt.document.createElement("canvas");const e={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.fE&&t.fE){const i=this.sE.getContext("webgl",{...e,antialias:!!t.lE})||this.sE.getContext("experimental-webgl",{...e,antialias:!!t.lE});this.gl=i,this.AE=!1}else{const t=this.sE.getContext("webgl2",e);this.gl2={ctx:t},this.gl=t,this.AE=!0}if(!this.gl)throw new bA("No WebGL context available."+((null==t?void 0:t.fE)?`\nSelected explicit target: WebGL ${t.fE}`:""));const r=[];if(this.gE={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.gE).forEach((t=>{null===this.gE[t]&&r.push(t)})),this.AE)this.pE=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.RD=!1),Object.keys(t).forEach((i=>{null===t[i]&&r.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.pE=!!i.OES_texture_float,this.gl1={ctx:this.gl,gE:t,optional:i}}const h=r;if(h.length>0&&!1!==t.Ea){const t=Nt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=Nt.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Nt.document.body.appendChild(t),t.appendChild(i),Nt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",h.join(", "))}if(this.vE=this.dE?this.yE(this.AE?this.hE.bind(this):this.KD.bind(this)).bind(this):this.mE(this.AE?this.oE.bind(this):this.eE.bind(this)).bind(this),Nt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.sE&&this.xE()};this.Va=new Nt.ResizeObserver(t.bind(this)),this.Va.observe(this.sE)}if(this.SE=((t,i)=>{const s=t,e=new Map,r=new Map,h=new Map,n={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const r=[],h=[],n={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&h.push(...i),t=t.replace(/#extension.*/g,"")}else if(r.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&r.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return h&&r.push(...h),r.push("precision highp float;"),r.push("precision highp int;"),{source:t=`${r.join("\n")}\n${t}`,info:n}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,A,g,p,v;try{const i=Nt.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),r=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),h=`vert: ${e} frag: ${r}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new xg(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,h,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new xg(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,h,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!!t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.yD}))&&("webgl1"===i?l.push(og("attribute float aInstanceID"),lg("int iInstance = int(aInstanceID)")):l.push(lg("int iInstance = gl_InstanceID"))),!!t.find((t=>{var i;return null===(i=t.fD)||void 0===i?void 0:i.mD}))&&("webgl1"===i?l.push(og("attribute float aVertexID"),lg("int iVertex = int(aVertexID)")):l.push(lg("int iVertex = gl_VertexID"))),!n)throw new xg("No vertex shader template defined",h);if(!u)throw new xg("Fragment shader not defined",h);return{id:h,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:r,template:u,modifiers:c},hints:d}})(l,a);const y=h.get(u.id);if(c="new",y)return c="existing",A=y.vertexShaderSrc,g=y.fragmentShaderSrc,y;const m=u.vertexShader.id;let x=e.get(m);if(x)A=x.src,d="existing";else{d="new";const t=new eg(u.vertexShader.modifiers).build(Fg[u.vertexShader.template]),{source:i,info:r}=o(t,"vertex");A=i,p=r,x=new Pg(m,i,s,r),e.set(m,x),n.vertexShaders+=1}const S=u.fragmentShader;let b;const M=S.id;if(b=r.get(M),b)g=b.src,f="existing";else{f="new";const t=Ig[S.template],i=new eg([...S.modifiers]).build(t),{source:e,info:h}=o(i,"fragment",u.hints);g=e,v=h,b=new Bg(M,e,s,h),r.set(M,b),n.fragmentShaders+=1}const w=new Dg(x,b,s,u);return h.set(u.id,w),n.programs+=1,n.totalMs+=Nt.performance.now()-i,w}catch(t){throw Ri(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Nt.alert(t),new Error(t)}))}}})(this.gl,!this.AE),this.uD=(()=>{const t=Nt.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new bA("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,e,r,h)=>{const n=`${e.style} ${e.weight} ${e.size*r}px ${e.family}`;i.font=n,i.textBaseline="alphabetic",i.textAlign="left";const o=i.measureText(s);if(0===o.width)return;const l=void 0!==o.actualBoundingBoxLeft&&void 0!==o.actualBoundingBoxRight?Math.ceil(o.actualBoundingBoxLeft+o.actualBoundingBoxRight):Math.ceil(o.width),u=o.width,c=Math.round(e.size*r),d=void 0!==o.actualBoundingBoxLeft?o.actualBoundingBoxLeft:0;t.width=l>0?l:u,t.height=2*c,i.font=n,i.textBaseline="alphabetic",i.textAlign="left",h?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let A=0,g=0;const p=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<p;i+=1)if(0!==f.data[t*p*4+4*i+3]){A=t;break}if(0!==A)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<p;i+=1)if(0!==f.data[t*p*4+4*i+3]){g=t;break}if(0!==g)break}const v=i.canvas.height/2-A,y=g-A+1,m=p,x=new Uint8ClampedArray(m*y*1);for(let t=0;t<y;t+=1)for(let i=0;i<m;i+=1)x[1*t*m+1*i+0]=f.data[(t+A)*m*4+4*i+3];return[x,{advance:u,offsetX:d,baseline:v,glyph:s,size:a(m,y)}]}})(),t.bE||(this.dE?this.sE.style.display="none":(this.sE.style.position="absolute",this.sE.style.top="0",this.sE.style.left="0",this.sE.style.right="0",this.sE.style.bottom="0",this.sE.style.width="100%",this.sE.style.height="100%",this.sE.style.boxSizing="content-box",this.sE.style.display="block",this.sE.style.pointerEvents="none")),this.sE.classList.add("lcjs-canvas"),t.ME&&this.sE.setAttribute("data-lcjs-id",t.ME),s||Nt.document.body.appendChild(this.sE),Nt.IntersectionObserver&&(this.wE=new Nt.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.ZD(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),Nt.addEventListener("resize",this.WD,{passive:!0}),!this.AE){if(this.zD=this.SE(Tg["2DCompose"],Tg.Color({dataType:"texture-coord-calc-gpu"}),Tg.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.zD._D)throw new bA("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this.zD._D,"uColorTexture");if(!i)throw new bA("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this.zD._D,"uMatrix");if(!s)throw new bA("Unable to setup composition shader! Failed to find uMatrix");this.GD=i,this.$D=s,this.UD=t.getAttribLocation(this.zD._D,"aPos"),this.VD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.VD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.ND=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ND),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}yE(t){return i=>{this.OD=null;const s=this.gl.canvas,e=Array.from(this.DD.values());this.YD=!1,e.forEach((e=>{const r=e.qD();(this.Y.x<r.x||this.Y.y<r.y)&&(this.Y.x=Math.max(this.Y.x,r.x),this.Y.y=Math.max(this.Y.y,r.y),s instanceof HTMLCanvasElement&&(s.width=this.Y.x,s.height=this.Y.y)),e.oa&&e._E(i),t(0,0,0,0,[e])})),this.YD&&this.xE()}}mE(t){return i=>{this.OD=null,"style"in this.gl.canvas&&!this.Da.kE&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.sE.clientHeight,r=this.sE.clientWidth;let h=0,n=0;if(s instanceof HTMLCanvasElement){s.width===r*this.rE&&s.height===e*this.rE||(s.width=r*this.rE,s.height=e*this.rE);const t=s.getBoundingClientRect();h=t.x,n=t.y}const o=Array.from(this.DD.values());this.YD=!1,o.sort(((t,i)=>t.CE()-i.CE())).forEach((t=>{t.oa&&t._E(i)})),t(h,n,r,e,o),this.YD&&this.xE()}}xE(t){return $g(this.gl)||(!this.YD&&t&&(this.YD=!0),this.OD||this.ci||(this.OD=Nt.requestAnimationFrame(this.vE))),this}TE(t){const i=this.HD();return t.zn.setAttribute("data-lcjs-engine-id",i),this.BD.set(i,t),t.FE(this.BD.size-1),t.QD(!0),this.DD.set(i,t),this.wE&&this.wE.observe(t.zn),this.XD&&clearTimeout(this.XD),this.XD=setTimeout((()=>this.ia()),0),this}IE(t){const i=t.zn.getAttribute("data-lcjs-engine-id");return i?(this.BD.delete(i),this.DD.delete(i),this.wE&&this.wE.unobserve(t.zn),t.zn.removeAttribute("data-lcjs-engine-id"),this):this}ia(){if(this.wE){const t=this.wE.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.ZD(s)}}return!this.dE&&this.uE&&Array.from(this.BD.values()).sort(((t,i)=>function(t,i){if(t===i)return 0;const s={a:Ng(t),b:Ng(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const r=Vg(zg(s.a)),h=Vg(zg(s.b));if(r===h&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let r=t.length;for(;r--;){const s=t[r];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(r-h)}(t.zn,i.zn))).forEach(((t,i)=>t.FE(i))),this.xE(!0),this}IB(){return this.xE(),this}LE(){this.ci||this.BD.forEach((t=>t.Dg.layout()))}G(){var t;if(this.ci)return;this.ci=!0,super.G(),this.OD&&(Nt.cancelAnimationFrame(this.OD),this.OD=null),this.YD=!1,this.Va&&(this.Va.disconnect(),this.Va=void 0),this.wE&&(this.wE.disconnect(),this.wE=void 0),Nt.removeEventListener("resize",this.WD),this.WD=void 0,this.BD.forEach((t=>{t.G()})),this.BD.clear(),Array.from(this.ED.values()).forEach((t=>{t._c(!0)})),this.ED.clear();const i=this.gl;i.deleteBuffer(this.VD),i.deleteBuffer(this.ND),this.sE&&!this.Da.sE?(this.sE.width=1,this.sE.height=1,null===(t=this.sE.parentElement)||void 0===t||t.removeChild(this.sE),this.sE=void 0):this.sE=void 0,this.SE=void 0,this.uD=void 0,this.vE=()=>{},this.gE.WEBGL_lose_context&&this.gE.WEBGL_lose_context.loseContext()}}const Yg=(t,i,s,e)=>r=>{const h={theme:Mf,...s,...r},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new TA(n.Da,r,n,n.G.bind(n),h,o);return n.Ka((t=>a.wc(t))).Qa((()=>a.j())).Bs(),a},jg=(t,i)=>{t.Ka((t=>{i.ir(t)})).Qa((()=>i.j())).Bs()},Hg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Ya(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,null==r?void 0:r.legend);return jg(n,a),a},Wg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Bc(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r);return jg(n,a),a},Xg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Ud(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r);return jg(n,a),a},Zg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Jc(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r);return jg(n,a),a},Jg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:dA)(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},Qg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Hf(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},Kg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:dd)(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},qg=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:Cd)(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},tp=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new fu(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r,void 0);return jg(n,a),a},ip=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new zl(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},sp=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new wf(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0);return jg(n,a),a},ep=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Bf(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},rp=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Nc(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r);return jg(n,a),a},hp=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i||e?IA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Yf(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,r);return jg(n,a),a},np=(t,i,s,e)=>r=>{const h={...s,...r,theme:(null==r?void 0:r.theme)||Mf},n=t(h),o=i?IA(n,e):void 0,a=new qf(n.Da,xA(n,1).NP(0),Q,n.G.bind(n),o,void 0,r);return jg(n,a),a},op={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>op.multiply(t,op.translation(i,s,e)),xRotate:(t,i)=>op.multiply(t,op.xRotation(i)),yRotate:(t,i)=>op.multiply(t,op.yRotation(i)),zRotate:(t,i)=>op.multiply(t,op.zRotation(i)),rotateXYZ(t,i){let s=op.xRotate(t,i.x);return s=op.yRotate(s,i.y),s=op.zRotate(s,i.z),s},scale:(t,i,s,e)=>op.multiply(t,op.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],r=i[2],h=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],A=i[12],g=i[13],p=i[14],v=i[15],y=t[0],m=t[1],x=t[2],S=t[3],b=t[4],M=t[5],w=t[6],_=t[7],k=t[8],C=t[9],T=t[10],F=t[11],I=t[12],L=t[13],P=t[14],B=t[15],D=[];return D[0]=s*y+e*b+r*k+h*I,D[1]=s*m+e*M+r*C+h*L,D[2]=s*x+e*w+r*T+h*P,D[3]=s*S+e*_+r*F+h*B,D[4]=n*y+o*b+a*k+l*I,D[5]=n*m+o*M+a*C+l*L,D[6]=n*x+o*w+a*T+l*P,D[7]=n*S+o*_+a*F+l*B,D[8]=u*y+c*b+d*k+f*I,D[9]=u*m+c*M+d*C+f*L,D[10]=u*x+c*w+d*T+f*P,D[11]=u*S+c*_+d*F+f*B,D[12]=A*y+g*b+p*k+v*I,D[13]=A*m+g*M+p*C+v*L,D[14]=A*x+g*w+p*T+v*P,D[15]=A*S+g*_+p*F+v*B,D},inverse(t){const i=[],s=t[0],e=t[1],r=t[2],h=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],A=t[12],g=t[13],p=t[14],v=t[15],y=d*v,m=p*f,x=a*v,S=p*l,b=a*f,M=d*l,w=r*v,_=p*h,k=r*f,C=d*h,T=r*l,F=a*h,I=u*g,L=A*c,P=n*g,B=A*o,D=n*c,E=u*o,R=s*g,O=A*e,z=s*c,V=u*e,N=s*o,G=n*e,$=y*o+S*c+b*g-(m*o+x*c+M*g),U=m*e+w*c+C*g-(y*e+_*c+k*g),Y=x*e+_*o+T*g-(S*e+w*o+F*g),j=M*e+k*o+F*c-(b*e+C*o+T*c),H=1/(s*$+n*U+u*Y+A*j);return i[0]=H*$,i[1]=H*U,i[2]=H*Y,i[3]=H*j,i[4]=H*(m*n+x*u+M*A-(y*n+S*u+b*A)),i[5]=H*(y*s+_*u+k*A-(m*s+w*u+C*A)),i[6]=H*(S*s+w*n+F*A-(x*s+_*n+T*A)),i[7]=H*(b*s+C*n+T*u-(M*s+k*n+F*u)),i[8]=H*(I*l+B*f+D*v-(L*l+P*f+E*v)),i[9]=H*(L*h+R*f+V*v-(I*h+O*f+z*v)),i[10]=H*(P*h+O*l+N*v-(B*h+R*l+G*v)),i[11]=H*(E*h+z*l+G*f-(D*h+V*l+N*f)),i[12]=H*(P*d+E*p+L*a-(D*p+I*a+B*d)),i[13]=H*(z*p+I*r+O*d-(R*d+V*p+L*r)),i[14]=H*(R*a+G*p+B*r-(N*p+P*r+O*a)),i[15]=H*(N*d+D*r+V*a-(z*a+G*d+E*r)),i},projectionPerspective(t,i,s,e){const r=1/Math.tan(t*Math.PI/180/2),h=1/(s-e);return[r/i,0,0,0,0,r,0,0,0,0,(s+e)*h,-1,0,0,s*e*h*2,0]},projectionOrthographic:(t,i,s,e,r,h)=>[2/(i-t),0,0,0,0,2/(e-s),0,0,0,0,2/(r-h),0,(t+i)/(t-i),(s+e)/(s-e),(r+h)/(r-h),1],quaternionToRotationMatrix(t){const i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]),s=[t[0]/i,t[1]/i,t[2]/i,t[3]/i],e=s[0]+s[0],r=s[1]+s[1],h=s[2]+s[2],n=s[0]*e,o=s[0]*r,a=s[0]*h,l=s[1]*r,u=s[1]*h,c=s[2]*h,d=s[3]*e,f=s[3]*r,A=s[3]*h;return[1-(l+c),o-A,a+f,0,o+A,1-(n+c),u-d,0,a-f,u+d,1-(n+l),0,0,0,0,1]}};function ap(t,i,s,e,r,h){let n=i.x.Dt(t.max.x),o=i.x.Dt(t.min.x),a=i.y.Dt(t.max.y),l=i.y.Dt(t.min.y),u=n-o,c=a-l;if(u<1){const t=(o+n)/2;o=t-.5,n=t+.5,u=1}if(c<1){const t=(l+a)/2;l=t-.5,a=t+.5,c=1}const d=u/c,f=u*s.x,A=c*s.y,g=u-f,p=c-A,v=f>g?[g,f]:[f,g],y=A>p?[p,A]:[A,p];let m,x,S=1,b=1;switch(e){default:case exports.GradientExtent.closestSide:if(m=v[0]/u,x=y[0]/c,r===exports.GradientShape.circle){const t=Math.min(m*d,x);S=t,b=t}else S=m*d,b=x;break;case exports.GradientExtent.farthestSide:if(m=v[1]/u,x=y[1]/c,r===exports.GradientShape.circle){const t=Math.max(m*d,x);S=t,b=t}else S=m*d,b=x;break;case exports.GradientExtent.closestCorner:if(x=y[0]/c,r===exports.GradientShape.circle){m=v[0]/u*d;const t=Math.sqrt(m*m+x*x);S=t,b=t}else{m=v[0]/u;const t=Math.sqrt(m*m+x*x);S=t*d,b=t}break;case exports.GradientExtent.farthestCorner:if(x=y[1]/c,r===exports.GradientShape.circle){m=v[1]/u*d;const t=Math.sqrt(m*m+x*x);S=t,b=t}else{m=v[1]/u;const t=Math.sqrt(m*m+x*x);S=t*d,b=t}}return{bounds:[o*h,l*h,u*h,c*h],center:[s.x*d,s.y],distance:[Math.max(S,1e-4),Math.max(b,1e-4)],aspectRatio:d}}function lp(t,i,s,e){const r=i.x.Dt(t.max.x),h=i.x.Dt(t.min.x),n=i.y.Dt(t.max.y),o=i.y.Dt(t.min.y),l=r-h,u=n-o,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=a(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=a(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[h*e,o*e,l*e,u*e],startPoint:[d.x*e,d.y*e],endPoint:[f.x*e,f.y*e]}}class up{constructor(t){this.ZB=t}}class cp{constructor(){this.PE=new Array,this.BE=t=>(this.PE.push(t),t),this.DE=this.BE(new Map),this.EE=this.BE(new Map),this.RE=this.BE(new Map),this.OE=this.BE(new Map),this.zE=this.BE(new Map),this.VE=this.BE(new Map),this.NE=this.BE(new Map),this.GE=this.BE(new Map)}$E(){this.PE.forEach((t=>{t.forEach((t=>t.$E())),t.clear()}))}}const dp=(t,i,s=void 0)=>()=>{t.UE=i,s&&s()},fp=(t,i,s,e,r)=>{const h=Math.min(s/t,e/i),n=t*h,o=i*h,a=s/n,l=e/o,u=n/s,c=o/e;let d=0,f=1,A=0,g=1;switch(r){case exports.ImageFitMode.Fill:l<a?(d=0,f=1,A=.5+-u/2,g=.5+u/2):(A=0,g=1,d=.5+-c/2,f=.5+c/2);break;case exports.ImageFitMode.Fit:l<a?(A=0,g=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,A=.5+-l/2,g=.5+l/2);break;case exports.ImageFitMode.Center:{const r=s/t,h=e/i;d=.5+-r/2,f=.5+r/2,A=.5+-h/2,g=.5+h/2}break;case exports.ImageFitMode.Tile:d=0,f=s/t,A=0,g=e/i;break;case exports.ImageFitMode.Stretch:default:d=0,f=1,A=0,g=1}return new Float32Array([d,g,f,g,f,A,d,A])};class Ap{constructor(t,i){if(this.YE=0,this.jE=0,this.HE=!1,this.UE=!1,this.WE=!1,this.XE=!1,this.ZE=!1,this.JE=new Set,this.QE=new Set,this.Js=i,this.wD=t,this.KE=null,this.HE=i instanceof Nt.HTMLVideoElement,this.Js instanceof Nt.HTMLImageElement)this.Js.addEventListener("load",(()=>{this.XE=!0,this.qE()})),this.Js.addEventListener("error",(()=>{this.ZE=!0})),this.Js.complete&&(this.XE=!0,this.qE());else if(this.Js instanceof Nt.HTMLVideoElement){const t=this;this.Js.addEventListener("canplay",(function(){t.jE=this.videoHeight,t.YE=this.videoWidth,t.XE=!0,t.qE()}),!0),this.Js.addEventListener("play",dp(this,!0,(()=>this.qE()))),this.Js.addEventListener("playing",dp(this,!0,(()=>this.qE()))),this.Js.addEventListener("pause",dp(this,!1)),this.Js.addEventListener("ended",dp(this,!1)),this.Js.readyState>=1&&(this.YE=this.Js.videoWidth,this.jE=this.Js.videoHeight,this.UE=!this.Js.paused,this.XE=!0,this.qE())}else this.XE=!0,this.qE()}Kc(t){0===this.QE.size&&this.XE&&this.qE(),this.QE.add(t)}oD(t){this.QE.delete(t),0===this.QE.size&&this.unbindResources()}tR(t){this.JE.add(t),this.WE&&(t(),this.iR(t))}iR(t){this.JE.delete(t)}qE(){if(this.ZE||this.WE||!this.XE)return;const t=this.wD.gl;if(!this.KE&&this.Js&&t){this.KE=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.KE),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,r=t.UNSIGNED_BYTE,h=this.Js,n=this.YE>0?this.YE:h.width,o=this.jE>0?this.jE:h.height;t.texImage2D(t.TEXTURE_2D,i,s,e,r,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.YE=n,this.jE=o,t.bindTexture(t.TEXTURE_2D,null)}this.WE=!0,this.JE&&this.JE.forEach((t=>{t(),this.iR(t)}))}Nh(){const t=this.wD.gl;if(!this.ZE&&this.WE&&this.KE){const i=0,s=t.RGBA,e=t.RGBA,r=t.UNSIGNED_BYTE,h=this.Js;h&&(t.bindTexture(t.TEXTURE_2D,this.KE),t.texImage2D(t.TEXTURE_2D,i,s,e,r,h))}}sR(){return this.KE}unbindResources(){return this.WE&&(this.KE&&(this.wD.KB(this.KE),this.KE=null),this.WE=!1),this}}class gp extends gt{constructor(t,i,s){super(t.pi,i,s),this.hp=!0,this.sp=g(Xe),this.Ws=t,this.ai=t.ai}eR(){var t;return this.sp.u&&this.sp.T().type!==(null===(t=this.rR)||void 0===t?void 0:t.type)}up(t){return this.hp=t,this}}const pp=(t,i,s,e)=>{const r=t.hR(),h=Math.round(Math.min(s.spread,10)*r),n=Math.round(Math.min(s.blur,10)*r),o=Math.round(s.offset.x*r),a=Math.round(s.offset.y*r),l=t.nR(),u=t.oR(),c=t.aR(),d=t.lR(),f=t.uR();t.cR("disabled"),t.up(!1),t.dR(!1);const A=t.pi.sa.AE,g=i.fR(),p=h+n/2,v=((t,i,s,e)=>{const r=t.gl,h=t.hR(),n=t.AR();t.gR(r.FRAMEBUFFER,e.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,e.depthBuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.clearDepth(1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.pR(0,0,o.x,o.y);const a=[],l=t.pi.sa.AE;return i.forEach((i=>{let e;if(i instanceof cn){e=i.us||i.Ws.qg();let t=!1;if(!e){const s=i.Ws.vR(i);s&&s.max.x-s.min.x>0&&s.max.y-s.min.y>0&&(e={x:s.min.x,y:s.min.y,width:s.max.x-s.min.x,height:s.max.y-s.min.y},t=!0)}e&&(e.width>0&&e.height>0?(t&&(e.x-=s.left/h,e.y-=s.top/h,e.width+=(s.left+s.right)/h,e.height+=(s.top+s.bottom)/h),a.push({x:e.x,y:e.y,width:e.width,height:e.height})):e=void 0)}else i instanceof gp&&(e=i.Ws.Cm());if(e){const i=e.x+(l?0:s.left),r=e.y+(l?0:s.bottom),n=Math.max(e.width-(l?0:s.left+s.right),0),o=Math.max(e.height-(l?0:s.bottom+s.top),0);t.yR(i*h,r*h,n*h,o*h)}else t.dR(!1);i.wc(2,0)})),t.gR(r.FRAMEBUFFER,n),r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),t.dR(!1),a})(t,e,{left:p+(o<0?-o:0),top:p+(a>0?a:0),right:p+(o>0?o:0),bottom:p+(a<0?-a:0)},g),y=g,m=h+n+5,x=((t,i,s,e)=>{const r=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,r=t[s];do{const t=i.findIndex((t=>ls(r,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),r=Ms(r,e))}while(e);i.push(r)}return i})(i.map((t=>{const i=t instanceof cn||t instanceof gp?t.Ws.vR(t):ns;if(zi(i))return ns;const r={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return r.max.x<=r.min.x||r.max.y<=r.min.y?ns:r})).filter((t=>!zi(t)))),h=6*r.length,n=new Float32Array(4*h);let o=0;return r.forEach((t=>{const i=Rs(t.min,e),s=Rs(t.max,e),r=i,h=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=r.x,n[o+3]=r.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=h.x,n[o+7]=r.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=h.x,n[o+11]=h.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=h.x,n[o+15]=h.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=r.x,n[o+19]=h.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=r.x,n[o+23]=r.y,o+=24})),{vertexBuffer:t.mR(n),vertexCount:h}})(t,e,{left:m+(o<0?-o:0),top:m+(a>0?a:0),right:m+(o>0?o:0),bottom:m+(a<0?-a:0)},i.xR()),S=i.fR(y),b=t.SE(Tg["2D"],Tg.Glow1D({spreadPx:h,blurPx:n,firstPass:!0}),Tg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,r,h)=>{const n=t.gl,o=t.AR();t.gR(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearDepth(1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.pR(0,0,s.sizeDpr.x,s.sizeDpr.y),t.SR(e,((o,a,l,u)=>(t.Kc(e),h&&h(o),t._R(o("uIsHighlighted"),0).UI(o("uHighlightColorOffset"),C)._R(o("uRenderEffectMask"),0).wR(o("uTexture"),i.texture,0).MR(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).MR(o("uScale"),s.uniforms.kR()).MR(o("uDisp"),s.uniforms.CR()).MR(o("uScaling"),[s.size.x,s.size.y]).MR(o("uTranslationAxis"),[0,0]).bR(r.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Nk(n.TRIANGLES,r.vertexCount,0),!0))),t.gR(n.FRAMEBUFFER,o),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,y,S,b,x,((i,s,e,r)=>(t.MR(i("uOffsetPx"),[o+1,a+1]),!0))),t.dR(u),t.TR(f),A&&(((t,i)=>{if(void 0===i||i.length<1)return;const s=t.gl,e=6*i.length*2,r=[e];let h=0;for(let t=0;t<i.length;t+=1){const s=i[t];r[h+0]=s.x,r[h+1]=s.y,r[h+2]=s.x+s.width,r[h+3]=s.y,r[h+4]=s.x,r[h+5]=s.y+s.height,r[h+6]=s.x+s.width,r[h+7]=s.y,r[h+8]=s.x+s.width,r[h+9]=s.y+s.height,r[h+10]=s.x,r[h+11]=s.y+s.height,h+=12}const n=t.mR(r,!0),o={x:t.pi.kt().x,y:t.pi.kt().y},a=Q.d2({scaleXYConstructor:Z}).Z(o).ii(0,o.x).si(0,o.y),l=new xp;l.FR(a);const u=t.SE(Tg["2D"],Tg.VertexLocation({scaling:{dataType:"uniform"},translation:void 0,axisWorldTranslation:"linear",normalSource:void 0}),Tg.Color({dataType:"uniform"}));t.IR(!0),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,1,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),t.Kc(u).PR(u.LD("aPos"),n).MR(u.FD("uDisp"),l.CR()).MR(u.FD("uScaling"),[1,1]).MR(u.FD("uScale"),l.kR()).LR(u.FD("uColor"),[1,1,1,1]).Nk(s.TRIANGLES,e/2),t.BR(n),s.colorMask(!0,!0,!0,!0)})(t,v),t.gl.stencilFunc(t.gl.EQUAL,1,255),t.gl.stencilOp(t.gl.KEEP,t.gl.KEEP,t.gl.KEEP),t.IR(!0));const M=t.SE(Tg["2D"],Tg.Glow1D({spreadPx:h,blurPx:n,firstPass:!1}),Tg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,r)=>{const h=t.gl,n={x:t.pi.kt().x,y:t.pi.kt().y};t.pR(0,0,n.x*t.hR(),n.y*t.hR());const o=Q.d2({scaleXYConstructor:Z}).Z(n).ii(0,n.x).si(0,n.y),a=new xp;a.FR(o),t.SR(s,((o,l,u,c)=>(t.Kc(s),r&&r(o),t._R(o("uIsHighlighted"),0).UI(o("uHighlightColorOffset"),C)._R(o("uRenderEffectMask"),0).wR(o("uTexture"),i.texture,0).MR(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).MR(o("uScale"),a.kR()).MR(o("uDisp"),a.CR()).MR(o("uScaling"),[n.x,n.y]).MR(o("uTranslationAxis"),[0,0]).bR(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Nk(h.TRIANGLES,e.vertexCount,0),!0)))})(t,g,M,x,((i,e,r,h)=>(t.wR(i("uTextureFirstGlowPass"),S.texture,1).UI(i("uGlowColor"),s.color),!0))),t.pR(l.x,l.y,l.width,l.height),t.cR(c),t.up(d),t.BR(x.vertexBuffer),A&&t.IR(!1)};class vp{constructor(t){this.DR=[],this.ZB=t}ER(t,i){pp(this.ZB,this,i,t)}xR(){const t=this.ZB.pi.kt();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}fR(...t){const i=this.DR,s=this.xR(),e={x:Math.ceil(s.x*this.ZB.hR()),y:Math.ceil(s.y*this.ZB.hR())},r=this.ZB.gl,h=i.find((i=>!t.includes(i)));if(h)return h.sizeDpr.x===e.x&&h.sizeDpr.y===e.y||(h.size=s,h.sizeDpr=e,r.bindTexture(r.TEXTURE_2D,h.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.x,e.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,h.depthBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.x,e.y),r.bindTexture(r.TEXTURE_2D,null),r.bindRenderbuffer(r.RENDERBUFFER,null),h.scale.Z(s).ii(0,s.x).si(0,s.y),h.uniforms.FR(h.scale)),h;const n=r.createTexture(),o=this.ZB.RR(),a=this.ZB.OR();r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.x,e.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.ZB.AR();this.ZB.gR(r.FRAMEBUFFER,o),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0),r.bindRenderbuffer(r.RENDERBUFFER,a),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.x,e.y),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,a),r.bindTexture(r.TEXTURE_2D,null),this.ZB.gR(r.FRAMEBUFFER,l),r.bindRenderbuffer(r.RENDERBUFFER,null);const u=Q.d2({scaleXYConstructor:Z}).Z(s).ii(0,s.x).si(0,s.y),c=new xp;c.FR(u);const d={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}G(){[this.DR].forEach((t=>{t.forEach((t=>{this.ZB.zR(t.depthBuffer),this.ZB.VR(t.frameBuffer),this.ZB.KB(t.texture)})),t.length=0}))}}class yp{constructor(t,i,s,e,r=!0){this.NR=new cp,this.GR=new Map,this.$R=new Map,this.UR=[],this.aE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(Nt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.hp=!1,this.YR=!1,this.MR=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.jR=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.LR=(t,[i,s,e,r])=>(void 0===t||this.gl.uniform4f(t,i,s,e,r),this),this.HR=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.WR=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.XR=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.UI=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this._R=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.ZR=(t,i)=>(this.gl.uniform1i(t,i),this),this.wR=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new bA("Could not bind a texture.")},this.JR=t=>(((t,i)=>{i===exports.ImageFitMode.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.mR=(t,i=!1,s,e=Float32Array)=>{const r=t.length,h=this.QR(r,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new bA("Could not create vertex buffer")},this.KR=(t,i,s,e=Float32Array)=>{const r=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,t*e.BYTES_PER_ELEMENT,this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new bA("Could not create vertex buffer")},this.qR=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.tO=(t,i,s,e,r)=>{if(e&&t&&(t.usedSize=0),!t){const t=i.length+s,e=new r(t);return e.set(i),{buffer:this.KR(t,e,void 0,r),dataCache:e,preallocSize:t,usedSize:i.length}}if(t.usedSize+i.length>t.preallocSize){const e=t.usedSize+i.length+s,h=new r(e);return h.set(t.dataCache),h.set(i,t.usedSize),{buffer:this.KR(e,h,t.buffer,r),dataCache:h,preallocSize:e,usedSize:t.usedSize+i.length}}return t.dataCache.set(i,t.usedSize),this.qR(t.buffer,t.usedSize,i,r),t.usedSize+=i.length,t},this.iO=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.sO=(t,i)=>{const s=t.length,e=this.QR(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new bA("Could not create index buffer")},this.eO=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new bA("Could not create float buffer")},this.PR=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.rO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.bR=(t,i,...s)=>{var e;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const r=s.length;let h=0;for(let t=0;t<r;t+=1)h+=s[t].size;for(let t=0;t<r;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let n=0;for(let t=0;t<r;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT+(null!==(e=i.extraOffset)&&void 0!==e?e:0)),n+=i.size}if(void 0!==i)for(let t=0;t<r;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.hO(e,i)}return this},this.nO=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.oO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.aO=(t,i,s,e=0)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,e),this.gl.enableVertexAttribArray(t),void 0!==s&&this.hO(t,s)),this),this.lO=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.uO=null,this.Nk=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.cO=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.dO=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.gE.ANGLE_instanced_arrays)return Nt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.gE.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.fO=(t,i,s,e,r=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,r,s,e),this.gl1)){if(!this.gl1.gE.ANGLE_instanced_arrays)return Nt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.gE.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,r,s,e)}return this},this.hO=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.gE.ANGLE_instanced_arrays)return Nt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.gE.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.AO=(t,i,s,e=0)=>{const r=this.gl.TEXTURE0+e;this.gl.activeTexture(r);const h=this.AR();this.gR(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const n=this.oR();n&&this.dR(!1),t(),n&&this.dR(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gR(this.gl.FRAMEBUFFER,h)},this.Vi=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.gO=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.Kc=t=>(this.gl.useProgram(t._D),this),this.pO=!1,this.vO=[],this.pi=t,this.Pg=i,this.pi=t,this.gl=s.ctx,this.yO=s.antialias,this.mO=!!this.pi.sa.RD&&s.lineAntialias,this.pE=this.pi.sa.pE,this.xO=new Map,this.gl1=this.pi.sa.gl1,this.gl2=this.pi.sa.gl2,r&&(this.TR(!0),this.SO()),this.gE=this.pi.sa.gE,this.QB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.sD=this.bO(),this.SE=this.pi.sa.SE,this.MO=new bp(this),this.uD=this.pi.sa.uD,this.wO=new vp(this),this.ED=this.pi.sa.ED,this._O=this.mR([0,0,1,0,1,1,0,1]),this.kO=this.mR([0,0,1,0,0,1,0,1,1,0,1,1])}cR(t){return t!==this.CO&&(this.CO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}aR(){return this.CO||"disabled"}up(t){return t!==this.hp&&(this.hp=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}IR(t){return t!==this.YR&&(this.YR=t,t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST)),this}lR(){return this.hp}TO(t){return this.aE=t,this}hR(){return this.aE}QR(t,i){let s;if(i){const e=this.xO.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.BR(i)}return s||(s=this.gl.createBuffer(),this.xO.set(s,{size:t})),s}ub(t,i=this.gl.RGBA,s=!1,e,r,h=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new bA("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),t&&null===r?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):r&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,r.x,r.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}KB(t){this.gl.deleteTexture(t)}RR(){const t=this.gl.createFramebuffer();if(!t)throw new bA("Couldn't reserve Framebuffer.");return t}gR(t,i){this.uO=i,this.gl.bindFramebuffer(t,i)}AR(){return this.uO}VR(t){this.gl.deleteFramebuffer(t)}OR(){const t=this.gl.createRenderbuffer();if(!t)throw new bA("Couldn't reserve Render buffer.");return t}zR(t){this.gl.deleteRenderbuffer(t)}FO(){const t=this.gl;switch(t.checkFramebufferStatus(t.FRAMEBUFFER)){default:case t.FRAMEBUFFER_COMPLETE:Nt.console.log("FRAMEBUFFER_COMPLETE");break;case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:Nt.console.log("FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:Nt.console.log("FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:Nt.console.log("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_UNSUPPORTED:Nt.console.log("FRAMEBUFFER_UNSUPPORTED")}}pR(t,i,s,e){return this.gl.viewport(t,i,s,e),this.IO&&t===this.IO.x&&i===this.IO.y&&s===this.IO.width&&e===this.IO.height||(this.IO={x:t,y:i,width:s,height:e}),this}nR(){return this.IO||{x:0,y:0,width:0,height:0}}yR(t,i,s,e){return this.dR(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}dR(t){return t===this.LO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.LO=t),this}TR(t){return t!==this.pO&&(this.pO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}uR(){return this.pO}SO(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}oR(){return void 0!==this.LO&&this.LO}SR(t,i){const s=new Mp(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}BR(t){t&&(this.gl.deleteBuffer(t),this.xO.delete(t))}PO(t,i,s){this.MR(t.uniform("uCenter"),i.center).MR(t.uniform("uDistance"),i.distance).LR(t.uniform("uBounds"),i.bounds)._R(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.UI(t.uniform(`color_${i}`),e[i].color)._R(t.uniform(`stop_${i}`),e[i].offset);return this}BO(t,i,s){this.MR(t.uniform("uStartPoint"),i.startPoint).MR(t.uniform("uEndPoint"),i.endPoint).LR(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.UI(t.uniform(`color_${i}`),e[i].color)._R(t.uniform(`stop_${i}`),e[i].offset);return this}kh(t){const i=this.ED.get(t);if(!i){const i=new GA(this);return this.ED.set(t,i),i}return i}DO(t){const i=this.GR.get(t);if(!i){const i=new Ap(this,t);return this.EO(t,i),i}return i}EO(t,i){this.GR.set(t,i)}bO(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.Pg.Ea&&Nt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}RO(t,i,s,e){if(s)this.bR(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.PR(s,i),void 0!==e&&this.hO(s,e)}return this}OO(){this.gE.WEBGL_lose_context&&this.gE.WEBGL_lose_context.loseContext()}zO(t){if(this.VO&&this.VO.bufferIdsCount>=t)return this.VO.buffer;this.VO&&(this.BR(this.VO.buffer),this.VO=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.mR(s);return this.VO={buffer:e,bufferIdsCount:i},e}NO(){return this.gl2?void 0:"attribute"}GO(t,i){if("attribute"===this.NO()){const s=this.zO(i);this.bR(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}$O(){return this.gl2?void 0:"attribute"}UO(t,i){if("attribute"===this.$O()){const s=this.zO(i);this.bR(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}YO(t,i,s,e,r,h,n,o,a){const l=t.createBuffer();return this.vO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,r,h,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),mp(t,(()=>this.pi.ci),t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.vO.splice(this.vO.indexOf(l),1)}))}jO(t,i,s,e,r,h,n,o){const a=this.gl,l=this.AR();this.gR(a.FRAMEBUFFER,t),a.readPixels(i,s,e,r,h,n,o),this.gR(this.gl.FRAMEBUFFER,l)}HO(t){const i=this.$R.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new bA("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let r=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(r);r=255===r?0:255}const h=e.length;if(!this.gl2&&(s=e.length)&s-1){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={WO:i,XO:h,ZO:e.length};return this.$R.set(t,n),n}var s;return i}JO(t,i,s){const{uniform:e}=t;this.UI(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this._R(e(`uLUTValue${t}`),i.steps[t].value),this.UI(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return Ri(0,(()=>{})),this;this._R(e("uMinValue"),s.min),this._R(e("uMaxValue"),s.max)}return this}QO(t,i,s,e,r,h){const n=s&&s.getSource()||e&&e.Js,o=s?s.getFitMode():exports.ImageFitMode.Stretch,a=t=>{t.texCoordsBuffer=this.mR(h(t.texture.YE,t.texture.jE,o),!1,t.texCoordsBuffer)};if(n){let e=i;if((!i||n!==i.source)&&n){i&&(i.texture.oD(t),this.BR(i.texCoordsBuffer));const r=this.DO(n);r.Kc(t);const h=s?s.getSourceMissingColor():th.color;e={texture:r,source:n,texCoordsBuffer:this.mR([]),sourceMissingTexture:this.ub(new Uint8Array([h.getR(),h.getG(),h.getB(),h.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&n&&(a(e),this.pi.Bs())}},r.tR(e.textureReadyCallback),a(e)}return e&&e.texture.WE&&e.texture.HE&&e.texture.UE&&(e.texture.Nh(),this.pi.Bs()),r&&e&&e.texture.WE&&a(e),e}i&&this.KO(t,i)}KO(t,i){i&&(i.texture.oD(t),i.texture.iR(i.textureReadyCallback),this.KB(i.sourceMissingTexture),this.BR(i.texCoordsBuffer))}qO(t,i,s,e){var r,h,n,o;const{uniform:a,uniformOptional:l,attribute:u}=t,c=s.ai,d=this.hR();if(this.UI(a("uHighlightColorOffset"),1===i||2===i?T:s.Si)._R(a("uRenderEffectMask"),2===i?1:0).MR(l("uRatioPxClip"),[2/this.pi.kt().x,2/this.pi.kt().y])._R(l("uDevicePixelRatio"),d),void 0===e.highlightBuffer)this._R(a("uIsHighlighted"),1===i||2===i?0:s.gi);else{if(!e.highlightBuffer)throw new Error("Highlight buffer not supplied for attribute highlighting");this.bR(e.highlightBuffer,null!==(r=e.highlightAttribDivisor)&&void 0!==r?r:void 0,{location:u("aIsHighlighted"),size:1})}c instanceof Z||c instanceof mr?this.MR(a("uScale"),e.uniforms.kR()).MR(a("uDisp"),e.uniforms.CR()).MR(l("uScaleStart_highpart"),e.uniforms.tz()).MR(l("uScaleStart_lowpart"),e.uniforms.iz()):c instanceof J&&this.MR(l("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).MR(l("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).MR(l("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).MR(l("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).MR(a("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).MR(a("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const f=!0===e.coordsHighPrecision;if(e.coordsX)if(f){const t=u("aPos_highpartX"),i=u("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.aO(u("aPosX"),e.coordsX);if(e.coordsY)if(f){const t=u("aPos_highpartY"),i=u("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.aO(u("aPosY"),e.coordsY);if(1===i){if(this.ZR(a("uFirstId"),e.idFirst),void 0!==e.mousePickingOffsetBuffer){if(!e.mousePickingOffsetBuffer)throw new Error("No mouse picking offset buffer for attribute mouse picking");this.aO(u("aPickingIdOffset"),e.mousePickingOffsetBuffer,null!==(h=e.mousePickingOffsetAttribDivisor)&&void 0!==h?h:void 0)}}else{if(e.fillStyleSolid&&this.UI(a("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=u("aLookupValue");this.aO(t,e.lookupValueBuffer,e.lookupValueAttribDivisor,null!==(n=e.lookupValueBufferByteOffset)&&void 0!==n?n:0)}this.JO(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.BO(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.PO(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=u("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,null!==(o=e.colorBufferByteOffset)&&void 0!==o?o:0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.hO(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.sR();this.UI(l("uColor"),e.fillStyleImage.getSurroundingColor()).wR(a(QA),t||e.texturedFillGLInfo.sourceMissingTexture,0).bR(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:u("aTextureCoord"),size:2}).JR(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.sR();this.wR(a(tg),t||e.maskTexture.sourceMissingTexture,0).bR(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:u("aMaskTextureCoord"),size:2})}}return void 0!==e.useInstanceID&&this.UO(t,e.useInstanceID),void 0!==e.useVertexID&&this.GO(t,e.useVertexID),!0}sz(t,i,s){if(t)return lp(s||i.Fi(),i.ai,t.getAngle(!0),this.hR())}ez(t,i,s){if(t)return ap(s||i.Fi(),i.ai,t.getPosition(),t.getExtent(),t.getShape(),this.hR())}}const mp=async(t,i,s,e,r,h,n,o)=>{const a=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s,e)=>{const r=void 0!==e.flags?e.flags:0,h=void 0!==e.retryTimeout?e.retryTimeout:10;return new Promise(((e,n)=>{const o=()=>{if(s())return e(void 0);const a=t.clientWaitSync(i,r,0);return a===t.WAIT_FAILED?n(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):a!==t.TIMEOUT_EXPIRED?e(void 0):void Nt.setTimeout(o,h)};Nt.setTimeout(o,0)}))})(t,a,i,{retryTimeout:10}).then((()=>{if(!i())return t.deleteSync(a),t.bindBuffer(s,e),t.getBufferSubData(s,r,h,n,o),t.bindBuffer(s,null),h})).catch((t=>{throw t}))};class xp{FR(t){if(t instanceof Z||t instanceof mr){const i=t.Ht();this.rz=i.x.scaling,this.hz=-i.x.displacement,this.nz=i.y.scaling,this.oz=-i.y.displacement;const s=Math.fround(i.x.highPrecisionOffset),e=Math.fround(i.y.highPrecisionOffset);this.az=s,this.lz=i.x.highPrecisionOffset-s,this.uz=e,this.cz=i.y.highPrecisionOffset-e}else t instanceof J&&(this.MixedScaleXY=t.Ht());return this}CR(){return[this.hz,this.oz]}kR(){return[this.rz,this.nz]}tz(){return[this.az,this.uz]}iz(){return[this.lz,this.cz]}}class Sp{constructor(){this.rz=0,this.nz=0,this.dz=0,this.hz=0,this.oz=0,this.fz=0}Az(t){return this.rz=t.tt(),this.hz=t.getInnerStart()+.5*this.rz*t.it(),this}gz(t){return this.nz=t.tt(),this.oz=t.getInnerStart()+.5*this.nz*t.it(),this}pz(t){return this.dz=t.tt(),this.fz=t.getInnerStart()+.5*this.dz*t.it(),this}kR(){return[this.rz,this.nz,this.dz]}CR(){return[this.hz,this.oz,this.fz]}vz(t,i,s,e,r){const h=a(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),n=op.multiply(e,[h.x,h.y,r,1]);return c(n[0],n[1],n[2])}}class bp{constructor(t){this.ZB=t}wc(t,i,s,e,r,h=0){const n=this.ZB,o=void 0===e;if(!(e=e||n.RR()))throw new bA("Could not bind a framebuffer.");const a=n.nR(),l=n.uR();n.TR(!1),n.AO((()=>{n.pR(0,0,s.x,s.y),t()}),e,i,h),o&&n.VR(e),this.ZB.gO(r),this.ZB.pR(a.x,a.y,a.width,a.height),n.TR(l)}}class Mp{constructor(t,i){this.yz=[],this.mz=[],this.uniform=t=>{const i=this.shader.FD(t);return this.mz.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.ID(t);return this.mz.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.LD(t);return this.yz.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.yz)this.glUtils.nO(t.location),this.glUtils.hO(t.location,0)}}class wp extends cn{constructor(t,i,s,e,r){super(t,i,s,e),this.xz=new Map,this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.wz=r,this.bz=i}_c(){return this}wc(t,i){if(!this.wz||0!==t||0===this.xz.size)return{};let s=Array.from(this.xz.values()).map((t=>t._z.filter((t=>t.kz)).map((t=>t.gs)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(this.pi.xc&&(s=s.filter((t=>!(t instanceof xn)))),0===s.length)return{};const e=this.wz;return this.ZB.wO.ER(s,e),{}}kc(t,i,s,e,r){return{}}Nh(){return this}Wi(){return 0}Hi(){return 0}Zi(){return 0}Xi(){return 0}uu(){return 0}cu(){return 0}ys(t,i){const s={_z:[]},e=(t,i)=>{const e={gs:t||[],kz:void 0===i||i};s._z.push(e);const r={ks:t=>(e.gs=t,r),Ps:t=>(e.kz=t,r),Ds:()=>e.kz};return r},r={};Object.keys(i).forEach((t=>{const s=i[t],h=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(h,n);r[t]=o}));const h={aA:e,...r};this.xz.set(t,s);const n=()=>{this.xz.delete(t),t.removeEventListener("dispose",n)};return Nt.requestAnimationFrame((()=>{t.addEventListener("dispose",n)})),h}}function _p(t,i,s,e,r,h=Math.floor(Math.sqrt(e>r?25*e:25*r))){const n=Array(h+2),o=Math.PI;let l=0,u=0;const c=i*o/180,d=(s*o/180-c)/h;for(n[l]=a(t.x,t.y),l+=1;l<=h+1;)n[l]=a(t.x+e*Math.cos(c+u*d),t.y+r*Math.sin(c+u*d)),l+=1,u+=1;return[n,h]}const kp=(t,i,s)=>((t,i,s)=>{const e=[];let r=0;const h=Ps(i,s/2);let n,o,l,u,c=t[t.length-1],d=0;for(let s=0;s<t.length;s+=1){n=t[s],o=s===t.length-1?t[0]:t[s+1],s>0&&(c=t[s-1]),Gt(n,c)&&(c=Bs(n,Fs(Ps(Ds(o,n),-1)))),Gt(n,o)&&(o=Bs(n,Fs(Ps(Ds(c,n),-1))));const f=Rs(c,i),A=Rs(n,i),g=Rs(o,i),p=Fs(Ds(A,f)),v=Fs(Ds(g,A)),y=Bs(p,v),m=a(-y.y,y.x),x=a(-p.y,p.x),S=1/zs(m,x),b=Ls(m),M=Fs(Ds(p,v)),w=Math.sign(zs(m,M))||1,_=Es(m,Ps(h,S)),k=Es(m,Ps(h,-S));if(b<1||S===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},l={x:0,y:0};const u=a(-v.y,v.x),f=Math.sign(zs(p,m))||w,A=Es(x,Ps(h,f)),g=Es(u,Ps(h,f));1===w?(t=A,i=k,s=g,l=k):(t=_,i=A,s=_,l=g);const y=4*ps(c,n),b=4*ps(n,o);(S>y||S>b)&&(1===w?(t=A,i=g,s=g,l=A):(t=g,i=A,s=A,l=g));const M=Bs(n,t),C=Bs(n,i),T=Bs(n,s),F=Bs(n,l);e[r]=M,r+=1,e[r]=C,r+=1,e[r]=T,r+=1,e[r]=F,r+=1,d=4}else{const t=Bs(n,_),i=Bs(n,k);e[r]=t,r+=1,e[r]=i,r+=1,d=2}u=l,l=t[s]}return e[r]=e[0],r+=1,e[r]=e[1],r+=1,[e,d,[u,l]]})(t,i,s)[0];class Cp extends wn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.bD=new xp,this.Cz=ns,this.Tz=ns,this.Fz=br({arcStyleSolid:()=>fe(this.Ze)&&this.Ze,arcStyleRadialGradient:()=>z(this.Ze)&&this.Ze,arcStyleLinearGradient:()=>G(this.Ze)&&this.Ze}),this.Sz=t,this.bz=i,this.ZB=t.Mz()}Iz(t,i){let s=0,e=Array(0),r=0;if(void 0!==i){const r=t.length,h=Array(r+i.length);let n=0,o=0;for(;n<r;)h[o]=t[n],h[o+1]=i[n],o+=2,n+=1;e=h,s=this.ZB.gl.TRIANGLE_STRIP}else e=t,s=this.ZB.gl.TRIANGLE_FAN;const h=Ai(e,this.ai.zt());return r=e.length,[e,this.ZB.mR(h),r,s]}Lz(t,i,s,e){let r=Array(0);if(void 0===i)r=t;else{let s=0,e=0;const h=t.length;for(s=0,e=h,r=Array(h+i.length-2),i.reverse();s<h;)r[s]=t[s],r[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[Ai(r,this.ai.zt()),r.length];const h=kp(r,e,s);return[Ai(h,this.ai.zt()),h.length]}Nh(){const t=this.cl(),i=this.ui.T();if(this.dl()){const s=Math.abs(this.Ut.T()-this.Eu.T());this.bD.FR(this.ai);const e=this.ai.ei()||t,r=this.ai.ni(),h=this.Ru.T(),n=this.Ou.T(),[o,l]=_p(this.Ln.T(),this.Eu.T(),this.Ut.T(),this.Ru.T(),this.Ou.T(),this.Vu.T()),u=this.zu.T(),c=u>0?_p(this.Ln.T(),this.Eu.T(),this.Ut.T(),this.Ru.T()*u/100,this.Ou.T()*u/100,l)[0]:[this.Ln.T()],d=o.length-1;if(2===d){const t=(o[d-1].x+o[1].x)/2,i=(o[d-1].y+o[1].y)/2;this.Nu=a(t,i)}else{const t=Math.floor(d/2);this.Nu=a(o[t].x,o[t].y)}this.Gu=o[1];const A=o.length-1;this.$u=o[A],this.zu.T()&&(o.shift(),c.shift());let g=!1;(this.Ln.u||this.Eu.u||this.Ut.u||this.Ru.u||this.Ou.u||this.zu.u||this.Vu.u||e)&&(this.Tz=f(a(this.Vl().x-h,this.Vl().y-n),a(this.Vl().x+h,this.Vl().y+n)),g=!0,this.Ln.u=!1,this.Eu.u=!1,this.Ut.u=!1,this.Ru.u=!1,this.Ou.u=!1,this.zu.u=!1,this.Vu.u=!1);const p=this.ll();(g||p)&&this.Ze!==ae&&(this.zu.T()?(this.Pz&&this.ZB.BR(this.Pz),[this.Bz,this.Pz,this.Dz,this.Ez]=this.Iz(o,c)):(this.Pz&&this.ZB.BR(this.Pz),[this.Bz,this.Pz,this.Dz,this.Ez]=this.Iz(o,void 0)),z(this.Ze)?this.Rz=ap(this.Tz,this.ai,this.Ze.getPosition(),this.Ze.getExtent(),this.Ze.getShape(),this.ZB.hR()):G(this.Ze)?this.Oz=lp(this.Tz,this.ai,this.Ze.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0));const v=this.Fz.arcStyleSolid(p),y=this.Fz.arcStyleLinearGradient(p),m=this.Fz.arcStyleRadialGradient(p),x=v||y||m;p&&(this.zz=x?this.ZB.SE(Tg["2D"],Tg.Color({dataType:z(this.Ze)||G(this.Ze)?["gradient",this.Ze]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.fl(this.Ze));const S=this.Je;if(lr(S)&&(g||this.vl(S.getThickness())||e)){this.zu.T()?360===s?(o.pop(),c.pop(),[this.Vz,this.Nz]=this.Lz(o,void 0,S.getThickness(),r),this.Gz&&this.Vz?this.ZB.iO(this.Gz,this.Vz,!0):!this.Gz&&this.Vz?this.Gz=this.ZB.mR(this.Vz,!0):this.Gz&&!this.Vz&&(this.ZB.BR(this.Gz),this.Gz=void 0),[this.$z,this.Uz]=this.Lz(c,void 0,S.getThickness(),r),this.Yz&&this.$z?this.ZB.iO(this.Yz,this.$z,!0):!this.Yz&&this.$z?this.Yz=this.ZB.mR(this.$z,!0):this.Yz&&!this.$z&&(this.ZB.BR(this.Yz),this.Yz=void 0)):([this.Vz,this.Nz]=this.Lz(o,c,S.getThickness(),r),this.Gz&&this.Vz?this.ZB.iO(this.Gz,this.Vz,!0):!this.Gz&&this.Vz?this.Gz=this.ZB.mR(this.Vz,!0):this.Gz&&!this.Vz&&(this.ZB.BR(this.Gz),this.Gz=void 0),this.$z&&(this.Yz&&this.ZB.BR(this.Yz),this.Yz=void 0,this.Uz=0)):(360===s&&(o.shift(),o.pop()),[this.Vz,this.Nz]=this.Lz(o,void 0,S.getThickness(),r),this.Gz&&this.Vz?this.ZB.iO(this.Gz,this.Vz,!0):!this.Gz&&this.Vz?this.Gz=this.ZB.mR(this.Vz,!0):this.Gz&&!this.Vz&&(this.ZB.BR(this.Gz),this.Gz=void 0));const t=S.getFillStyle();z(t)?this.jz=ap(this.Tz,this.ai,t.getPosition(),t.getExtent(),t.getShape(),this.ZB.hR()):G(t)?this.Wz=lp(this.Tz,this.ai,t.getAngle(!0),this.ZB.hR()):(this.jz=void 0,this.Wz=void 0),this.Xz=t===ae?void 0:this.ZB.SE(Tg["2D"],Tg.Color({dataType:z(t)||G(t)?["gradient",t]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})),this.yl(S)}if(g){let t=1,i=1;lr(S)&&(t=S.getThickness()*r.x,i=S.getThickness()*r.y),this.Cz=f(a(this.Tz.min.x-t,this.Tz.min.y-i),a(this.Tz.max.x+t,this.Tz.max.y+i))}this.Zz=i&&x?this.Zz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.Jz=i&&this.Je!==Tt?this.Jz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0}return this}wc(t,i){if(this.dl()){const s=1===t?this.Zz:this.zz,e=this.Ze,r=this.Pz;s&&r&&this.ZB.Kc(s).SR(s,((s,h,n,o)=>{if(this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(o("uScaleStart_highpart"),this.bD.tz()).MR(o("uScaleStart_lowpart"),this.bD.iz()).RO(n,r,this.ai.zt(),void 0)._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),1===t)this.ZB.ZR(s("uFirstId"),i).UO(n,1);else if(fe(e))this.ZB.UI(s("uColor"),e.getColor());else if(z(e)){if(!this.Rz)return!1;this.ZB.PO(n,this.Rz,e)}else if(G(e)){if(!this.Oz)return!1;this.ZB.BO(n,this.Oz,e)}return this.ZB.Nk(this.Ez,this.Dz),!0}));const h=this.Je;lr(h)&&(void 0!==this.Gz&&this.Qz(t,this.Gz,this.Nz,h,i),void 0!==this.Yz&&this.Qz(t,this.Yz,this.Uz,h,i))}return{idCount:1}}kc(t,i,s,e,r){return{}}Qz(t,i,s,e,r){const h=1===t?this.Jz:this.Xz,n=e.getFillStyle();h&&this.ZB.Kc(h).SR(h,((h,o,a,l)=>{if(this.ZB.MR(h("uScale"),this.bD.kR()).MR(h("uDisp"),this.bD.CR()).RO(a,i,this.ai.zt(),void 0)._R(h("uIsHighlighted"),1===t||2===t?0:this.gi).UI(h("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(h("uRenderEffectMask"),2===t?1:0),1===t)this.ZB.ZR(h("uFirstId"),r).UO(a,1);else if(fe(n))this.ZB.UI(h("uColor"),n.getColor());else if(z(n)){if(!this.jz)return!1;this.ZB.PO(a,this.jz,n)}else if(G(n)){if(!this.Wz)return!1;this.ZB.BO(a,this.Wz,n)}const u=e.getThickness(),c=-1===u||1===u;return this.ZB.Nk(c?this.ZB.gl.LINE_LOOP:this.ZB.gl.TRIANGLE_STRIP,s),!0}))}_c(){return this.Kz&&(this.ZB.BR(this.Kz),this.Kz=void 0),this.qz&&(this.ZB.BR(this.qz),this.qz=void 0),this.Pz&&(this.ZB.BR(this.Pz),this.Pz=void 0),this.Gz&&(this.ZB.BR(this.Gz),this.Gz=void 0),this.Yz&&(this.ZB.BR(this.Yz),this.Yz=void 0),this.zz=void 0,this.Xz=void 0,this.Zz=void 0,this.Jz=void 0,this}Wi(){return this.Tz.max.x}Hi(){return this.Tz.min.x}Zi(){return this.Tz.max.y}Xi(){return this.Tz.min.y}uu(){return Yi(this.Je)}cu(){return Yi(this.Je)}}class Tp{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}tV(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}iV(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}sV(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}eV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.iV(),this}rV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.sV(),this}hV(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.rV(i);return this}nV(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const Fp=((t=0)=>(new Tp).tV(t))(),Ip=(t,i,s,e,r,h,n,o,a,l)=>(void 0===o&&void 0===n||Fp.iV(),h.push(t,i),r.push(Fp.first,Fp.second,Fp.third),o=void 0,n=void 0,r.push(Fp.third,Fp.fourth,Fp.second),a=Fp.third,Fp.sV(),l&&h.push(s,e),[n,o,a]),Lp=(t,i,s,e,r,h,n,o,a,l,u)=>{void 0===a&&void 0===o||Fp.iV(),n.push(t,i),r.push(Fp.first,Fp.second,Fp.third);const c=Us(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),h.push(Fp.third,Fp.fourth,Fp.fifth),l=Fp.fourth),Fp.sV(),u&&n.push(s,e),[o,a,l]},Pp=(t,i,s,e,r,h,n,o,a,l)=>(void 0===n&&void 0===h||Fp.iV(),r.push(t,i),e.push(Fp.first,Fp.second,Fp.third),h=s,n=void 0,o=Fp.third,l?r.push(s):a=!0,[h,n,o,a]),Bp=(t,i,s,e,r,h,n,o,a,l,u)=>(0!==h.length?(void 0===o&&void 0===n||Fp.iV(),Fp.iV()):a>0&&(Fp.iV(),u>0&&(u-=1)),h.push(t),r.push(Fp.first,Fp.second,Fp.third),a=Fp.second,n=t,o=void 0,l&&h.push(s,e),[n,o,a,u]),Dp=(t,i=0)=>{Fp.tV(i);const[s,e]=t,r=s.length,h=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],A=s[c],g=e[c],p=!1,v=u>0?A.y!==g.y?2:1:0;if(r>1)for(;c<r-1;){A=d,g=f,c+=1,d=s[c],f=e[c];const t=c===r-1;A.y>g.y?d.y>f.y?[a,l,u]=Ip(A,g,d,f,h,o,a,l,u,t):d.y<f.y?[a,l,u]=Lp(A,g,d,f,h,n,o,a,l,u,t):[a,l,u,p]=Pp(A,g,d,h,o,a,l,u,p,t):A.y<g.y?d.y<f.y?[a,l,u]=Ip(A,g,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=Lp(A,g,d,f,n,h,o,a,l,u,t):[a,l,u,p]=Pp(A,g,d,n,o,a,l,u,p,t):d.y===f.y?(a=A,p&&(o.push(A),p=!1,Fp.iV()),0===o.length&&u>0&&v>0&&(v-=1)):d.y>f.y?[a,l,u,v]=Bp(A,0,d,f,h,o,a,l,u,t,v):[a,l,u,v]=Bp(A,0,d,f,n,o,a,l,u,t,v)}return[o,new Uint16Array(h),new Uint16Array(n),u,v]};class Ep extends Mn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.bD=new xp,this.oV=0,this.hu=Array(),this.aV=0,this.lV=new Uint16Array(0),this.uV=new Uint16Array(0),this.Fz=br({hightFillSolid:()=>fe(this.Ze)&&this.Ze,hightFillRadialGradient:()=>z(this.Ze)&&this.Ze,hightFillLinearGradient:()=>G(this.Ze)&&this.Ze,hightFillPaletted:()=>ye(this.Ze)&&this.Ze,lowFillSolid:()=>fe(this.yu)&&this.yu,lowFillRadialGradient:()=>z(this.yu)&&this.yu,lowFillLinearGradient:()=>G(this.yu)&&this.yu,lowFillPaletted:()=>ye(this.yu)&&this.yu}),this.Sz=t,this.bz=i,this.ZB=t.Mz()}Nh(){const t=this.cl(),i=this.ui.T(),s=this.mu;if(this.dl()){this.bD.FR(this.ai);const e=s;if(e&&(this.oV=0,this.lV=new Uint16Array(0),this.uV=new Uint16Array(0),this.hu.length=0,this.aV=0,this.Au>1)){const[t,i,s,e]=Dp([this.du,this.fu]);this.oV=e,this.lV=i,this.uV=s,this.hu=t,this.aV=t.length}if(this.vu&&this.pu[0].length>1){const[t,i]=this.pu,s=t.length,[e,r,h,n,o]=Dp([t,i],this.oV);this.oV=n;const a=e.length;for(let t=o;t<a;t+=1)this.hu[this.aV]=e[t],this.aV+=1;this.lV=Ys(this.lV,r),this.uV=Ys(this.uV,h);for(let e=o>0||this.Au>0?1:o;e<s;e+=1)this.du[this.Au]=t[e],this.fu[this.Au]=i[e],this.Au+=1;this.gu=!0,this.vu=!1,this.pu=[]}const r=this.Ze,h=this.ul!==r,n=this.Fz.hightFillSolid(h),o=this.Fz.hightFillRadialGradient(h),a=this.Fz.hightFillLinearGradient(h),l=this.Fz.hightFillPaletted(h),u=n||o||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,c=this.yu,d=this.Bu!==c,f=this.Fz.lowFillSolid(d),A=this.Fz.lowFillRadialGradient(d),g=this.Fz.lowFillLinearGradient(d),p=this.Fz.lowFillPaletted(d),v=f||A||g||p&&["x","y"].includes(p.getLookUpProperty())&&p;if((h||t)&&(this.cV=u?this.ZB.SE(Tg["2D"],Tg.Color({dataType:a?["gradient",a]:o?["gradient",o]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),o?this.Rz=ap(this.Ai||this.nu,this.ai,o.getPosition(),o.getExtent(),o.getShape(),this.ZB.hR()):a?this.Oz=lp(this.Ai||this.nu,this.ai,a.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),(d||t)&&(this.dV=v?this.ZB.SE(Tg["2D"],Tg.Color({dataType:g?["gradient",g]:A?["gradient",A]:p?["lookup",p.getLookUpProperty(),p.lut]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),A?this.fV=ap(this.Ai||this.nu,this.ai,A.getPosition(),A.getExtent(),A.getShape(),this.ZB.hR()):g?this.AV=lp(this.Ai||this.nu,this.ai,g.getAngle(!0),this.ZB.hR()):(this.fV=void 0,this.AV=void 0),(t||this.gu||e)&&this.gu||e){const t=this.hu,i=Ai(t,this.ai.zt());this.gV=this.ZB.mR(i,!1,this.gV),u&&(this.pV=this.ZB.sO(this.lV,this.pV),this.vV=this.lV.length),v&&(this.yV=this.ZB.sO(this.uV,this.yV),this.mV=this.uV.length),this.gu=!1}this.Zz=i&&(v||u)?this.Zz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.fl(this.Ze),this.Du(this.yu),this.mu=!1}return this}wc(t,i){const s=this.Ze,e=this.yu,r=1===t?this.Zz:this.dV;if(r&&this.gV&&this.yV){const s=this.gV,h=this.yV;this.ZB.Kc(r).SR(r,((r,n,o,a)=>{if(this.ZB.RO(o,s,this.ai.zt(),void 0).lO(h)._R(r("uIsHighlighted"),1===t||2===t?0:this.gi).UI(r("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(r("uRenderEffectMask"),2===t?1:0),this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(r("uScale"),this.bD.kR()).MR(r("uDisp"),this.bD.CR()).MR(a("uScaleStart_highpart"),this.bD.tz()).MR(a("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(a("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(a("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(a("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(a("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(r("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(r("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.ZB.ZR(r("uFirstId"),i).UO(o,1);else if(fe(e))this.ZB.UI(r("uColor"),e.getColor());else if(z(e)){if(!this.fV)return!1;this.ZB.PO(o,this.fV,e)}else if(G(e)){if(!this.AV)return!1;this.ZB.BO(o,this.AV,e)}else if(ye(e)){const t=Mr(e,this,void 0);if(!t&&e.lut.percentageValues)return!1;this.ZB.JO(o,e.lut,t)}return this.ZB.cO(this.mV),!0}))}const h=1===t?this.Zz:this.cV;if(h&&this.gV&&this.pV){const e=this.gV,r=this.pV;this.ZB.Kc(h).SR(h,((h,n,o,a)=>{if(this.ZB.RO(o,e,this.ai.zt(),void 0).lO(r)._R(h("uIsHighlighted"),1===t||2===t?0:this.gi).UI(h("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(h("uRenderEffectMask"),2===t?1:0),this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(h("uScale"),this.bD.kR()).MR(h("uDisp"),this.bD.CR()).MR(a("uScaleStart_highpart"),this.bD.tz()).MR(a("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(a("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(a("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(a("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(a("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(h("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(h("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.ZB.ZR(h("uFirstId"),i).UO(o,1);else if(fe(s))this.ZB.UI(h("uColor"),s.getColor());else if(z(s)){if(!this.Rz)return!1;this.ZB.PO(o,this.Rz,s)}else if(G(s)){if(!this.Oz)return!1;this.ZB.BO(o,this.Oz,s)}else if(ye(s)){const t=Mr(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.ZB.JO(o,s.lut,t)}return this.ZB.cO(this.vV),!0}))}return{idCount:1}}kc(t,i,s,e,r){return{}}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return 0}cu(){return 0}gS(t){this.Tu()>0&&this.Nh();const[i,s]=this.Mu(),e=i.length>2&&i[1].x<i[0].x,r=at(i,t,ot.NearestX,this.xu,this.Su,this.ai,this.pi.ai,this.nu,"x",e);if(void 0===r)return;const h=[i[r],s[r]];return Number.isNaN(h[0].y)||Number.isNaN(h[1].y)?void 0:h}Eb(t){this.Tu()>0&&this.Nh();const[i,s]=this.Mu(),e=i.length;if(0===e)return;const r=this.xu?1:0,h=e-(this.Su?2:1),n=i.length>2&&i[1].x<i[0].x,o=ft(i,q(t,this.pi.ai,this.ai),"x",n,r,h);if(!o)return;const a=[ms(i[o.a],i[o.b],o.lerpAmount),ms(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.yV&&(this.ZB.BR(this.yV),this.yV=void 0),this.pV&&(this.ZB.BR(this.pV),this.pV=void 0),this.gV&&(this.ZB.BR(this.gV),this.gV=void 0),this}_c(){return this.dispose(),this}}class Rp extends up{constructor(t,i){super(t),this.xV=i;const{vertices:s,indices:e,indicesCount:r,drawMode:h}=this.SV();this.bV=t.mR(s),this.MV=t.sO(e),this.wV=r,this._V=h}Kc(t,i){return this.ZB.bR(this.bV,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.ZB.lO(this.MV),this}Nk(t,i){return this.ZB.fO(void 0!==i?i:this._V,this.wV,0,t,this.ZB.gl.UNSIGNED_BYTE),this}SV(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.xV;e+=1){const r=s-e*Math.PI/this.xV;t.push(.5*Math.cos(r),.5*Math.sin(r),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.xV;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.ZB.gl.TRIANGLES}}$E(){this.ZB.BR(this.bV),this.ZB.BR(this.MV)}}const Op=(t,i,s=!0)=>((t,i)=>{let s=t.NR.OE.get(i);return s||(s=new Rp(t,i),t.NR.OE.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),zp={kV:(t,i,s,e,r,h,n=1)=>{const{attribute:o}=e,a=i.gl;if(a.bindBuffer(a.ARRAY_BUFFER,s),t){const t=o("aLocationA_highpart"),s=o("aLocationA_lowpart"),e=o("aLocationB_highpart"),l=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),i.hO(t,n),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,n),a.enableVertexAttribArray(s),a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+r)*Float32Array.BYTES_PER_ELEMENT),i.hO(e,n),a.enableVertexAttribArray(e),a.vertexAttribPointer(l,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+r+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(l,n),a.enableVertexAttribArray(l)}else{const t=o("aLocationA"),s=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),i.hO(t,n),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+r)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,n),a.enableVertexAttribArray(s)}},CV:(t,i,s,e,r,h,n,o)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,s),a.vertexAttribPointer(e,h,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),t.hO(e,1),a.enableVertexAttribArray(e),a.vertexAttribPointer(r,h,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),t.hO(r,1),a.enableVertexAttribArray(r)},TV:(t,i,s,e,r,h)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),i.hO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(h+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(h+r)*Float32Array.BYTES_PER_ELEMENT),i.hO(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(h+r+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),i.hO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(h+r)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,1),o.enableVertexAttribArray(s)}},FV:(t,i,s,e,r,h,n,o,a,l)=>{const u=t.gl;u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(e,h,a,o,2*h*l,n*l),t.hO(e,1),u.enableVertexAttribArray(e),u.vertexAttribPointer(r,h,a,o,2*h*l,(n+h)*l),t.hO(r,1),u.enableVertexAttribArray(r)},wc:(t,i,s,e,r,h,n)=>{const o=t.Mz(),{uniform:a,uniformOptional:l}=s,u=1/t.Da.Ra,c=(r?Math.max(h,u):Math.max(h,0))+1;o._R(a("uThicknessPixels"),c)._R(l("uAALimit"),1-(c-1)/c).MR(a("uRatioPxClip"),[2/t.kt().x,2/t.kt().y]),i.Kc(s,e).Nk(n)}},Vp={kV:(t,i,s,e,r,h)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},CV:(t,i,s,e,r,h)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,r,n.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},TV:(t,i,s,e,r,h)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart"),i=n("aPos_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t),o.vertexAttribPointer(i,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(h+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},IV:(t,i)=>{const s=t.Mz();s.Nk(s.gl.LINE_STRIP,i,0)},LV:(t,i)=>{const s=t.Mz();s.Nk(s.gl.LINES,2*i,0)}},Np=(t,i,s,e,r,h,n,o,a,l,u=n,c=0)=>{const d=t.gl;if(s){const s=i.attribute(`${r}A_highpart${h}`),f=i.attribute(`${r}A_lowpart${h}`),A=i.attribute(`${r}B_highpart${h}`),g=i.attribute(`${r}B_lowpart${h}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,n,a,o,2*u*l,2*c*l),d.vertexAttribPointer(f,n,a,o,2*u*l,(u+2*c)*l),t.hO(s,1),t.hO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.vertexAttribPointer(A,n,a,o,2*u*l,(2*u+2*c)*l),d.vertexAttribPointer(g,n,a,o,2*u*l,(3*u+2*c)*l),t.hO(A,1),t.hO(g,1),d.enableVertexAttribArray(A),d.enableVertexAttribArray(g),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const s=i.attribute(`${r}A${h}`),f=i.attribute(`${r}B${h}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,n,a,o,u*l,(0+c)*l),d.vertexAttribPointer(f,n,a,o,u*l,(u+c)*l),t.hO(s,1),t.hO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.bindBuffer(d.ARRAY_BUFFER,null)}};class Gp extends Pn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.bD=new xp,this.nu=ns,this.Fz=br({lineStyleSolid:()=>lr(this.hc)&&this.hc,lineStyleDashed:()=>fr(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return fe(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return G(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return z(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return ye(t)&&t}}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.PV=this.ZB.mO}Nh(){const t=this.Al(),i=this.hc,s=this.Fz.lineStyleSolid(t),e=this.Fz.lineStyleDashed(t),r=s||e,h=this.Fz.strokeFillSolid(t),n=this.Fz.strokeFillLinearGradient(t),o=this.Fz.strokeFillRadialGradient(t),l=this.Fz.strokeFillPaletted(t),u=h||n||o||l&&["x","y"].includes(l.getLookUpProperty())&&l,c=this.Yt(),d=this.$t(),A=this.ui.T(),g=this.ui.u,p=i.ji();if(e&&this.ai instanceof J)return Nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.bD.FR(this.ai),this.uc&&(this.BV=this.ZB.mR(Ai([c,d],this.ai.zt()),!1,this.BV),this.nu=f(a(c.x,c.y),a(d.x,d.y))),t||g){const t=this.dl()&&r&&u&&p>0,i=n?["gradient",n]:o?["gradient",o]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform";this.DV=t?{type:"triangulated",shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),this.PV?Tg.AliasedEdge:void 0,e&&Tg.StippleTextureInstanced),mousePickingShader:A?this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),e&&Tg.StippleTextureInstanced):void 0,geometry:Op(this.ZB,p),thickness:p,lineStyleSolid:s,lineStyleDashed:e,fillStyleSolid:h,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:l}:void 0}if(o?this.jz=ap(fn(this.nu,{x:this.uu(),y:this.cu()},this.ai),this.ai,o.getPosition(),o.getExtent(),o.getShape(),this.ZB.hR()):n?this.Wz=lp(fn(this.nu,{x:this.uu(),y:this.cu()},this.ai),this.ai,n.getAngle(!0),this.ZB.hR()):(this.jz=void 0,this.Wz=void 0),e){if(t||this.uc){const t=[0,0,Math.abs(d.x-c.x),Math.abs(d.y-c.y)];this.EV=this.ZB.mR(t,!1,this.EV)}this.RV=this.ZB.HO(e.getPattern())}else this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.RV=void 0;return this.lc(i),this.uc=!1,this.ui.u=!1,this}wc(t,i){var s,e;const r=this.BV;if(!r)return{};const h=this.DV;if(!h)return{};const{fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l,lineStyleDashed:u,thickness:c}=h,d=1===t?null===(s=this.DV)||void 0===s?void 0:s.mousePickingShader:null===(e=this.DV)||void 0===e?void 0:e.shader;return d?(this.ZB.Kc(d).SR(d,((s,e,d,f)=>{if(this.ZB._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(f("uScaleStart_highpart"),this.bD.tz()).MR(f("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(f("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(f("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(f("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(f("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.ZB.ZR(s("uFirstId"),i).UO(d,1);else if(n)this.ZB.UI(s("uColor"),n.getColor());else if(a){if(!this.jz)return!1;this.ZB.PO(d,this.jz,a)}else if(o){if(!this.Wz)return!1;this.ZB.BO(d,this.Wz,o)}else if(l){const t=Mr(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.ZB.JO(d,l.lut,t)}if(u){if(!this.EV||!this.RV)return!1;zp.CV(this.ZB,d,this.EV,e("aLengthSoFarA"),e("aLengthSoFarB"),2,2,0),this.ZB.MR(s("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(f("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(s("uStippleScale"),u.getPatternScale()).wR(s("uStippleTexture"),this.RV.WO,1)}return zp.kV(this.ai.zt(),this.ZB,r,d,this.ai.zt()?4:2,0),zp.wc(this.Sz,h.geometry,d,this.PV&&1!==t,1===t,c,1),!0})),{idCount:1}):{}}kc(t,i,s,e,r){return{}}dispose(){return super.dispose(),this.DV=void 0,this.BV&&(this.ZB.BR(this.BV),this.BV=void 0),this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.RV=void 0,this}_c(){return this}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return Yi(this.hc)}cu(){return Yi(this.hc)}}class $p extends Bn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.OV=[],this.zV=!1,this.VV=!1,this.NV=!1,this.GV=!1,this.$V=!1,this.bD=new xp,this.nu=ns,this.Fz=br({lineStyleSolid:()=>lr(this.hc)&&this.hc,lineStyleDashed:()=>fr(this.hc)&&this.hc,lineFillSolid:()=>{const t=this.hc.getFillStyle();return fe(t)&&t},lineFillRadialGradient:()=>{const t=this.hc.getFillStyle();return z(t)&&t},lineFillLinearGradient:()=>{const t=this.hc.getFillStyle();return G(t)&&t},lineIndividualPointFill:()=>{const t=this.hc.getFillStyle();return ge(t)&&t}}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.PV=this.ZB.mO,this.UV=t.Da.za}Ho(){const t={Fs:i=>this.YV(t,i),Ii:i=>this.jV(t,i),wA:(i,s)=>this.HV(t,i,s),UI:i=>this.WV(t,i),jt:{x:0,y:0},Ut:{x:0,y:0},gi:0,iP:void 0,XV:this.OV.length,HA:!0,ZV:!0};return this.VV=!0,this.OV.push(t),t}Vi(){return this.OV.length=0,this.zV=!0,this.pi.Ci(this),this}JV(){return this.OV.length}T(t){const i=this.OV[t];return[i.jt,i.Ut]}Bp(){return this.OV}Zd(t){const i=this.OV.indexOf(t);i>=0&&(this.OV.splice(i,1),t.ZV||(this.zV=!0),this.pi.Ci(this))}YV(t,i){if(i&&!t.HA)t.XV=this.OV.length,this.OV.push(t);else if(!i){const i=this.OV.indexOf(t);this.OV.splice(i,1)}return t.HA=i,t.ZV||(this.GV=!0),t}jV(t,i){return t.gi=i,t.ZV||(this.NV=!0),t}HV(t,i,s){return t.jt=i,t.Ut=s,t.ZV||(this.zV=!0),t}WV(t,i){return t.iP=i,t.ZV||(this.$V=!0),t}Nh(){const t=this.ui.T(),i=this.ui.u,s=this.Al(),e=this.hc,r=this.OV,h=this.NV,n=this.zV,o=this.GV,a=this.$V,l=this.VV,u=this.Fz.lineStyleSolid(s),c=this.Fz.lineStyleDashed(s),d=u||c,f=this.Fz.lineFillSolid(s),A=this.Fz.lineIndividualPointFill(s),g=this.Fz.lineFillRadialGradient(s),p=this.Fz.lineFillLinearGradient(s),v=f||A||p||g,y=e.ji(),m=c?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(c&&this.ai instanceof J)return Nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.bD.FR(this.ai);const x=this.dc,S=n||o,b=!S&&l;if(S||b){const t=S?r:r.filter((t=>t.ZV)),i=[],s=t.length;let e=rs,h=rs,n=hs,o=hs;for(let r=0;r<s;r+=1){const s=t[r];i.push(s.jt),i.push(s.Ut),e=Math.min(e,s.jt.x,s.Ut.x),h=Math.min(h,s.jt.y,s.Ut.y),n=Math.max(n,s.jt.x,s.Ut.x),o=Math.max(o,s.jt.y,s.Ut.y)}this.BV=this.ZB.tO(this.BV,Ai(i,this.ai.zt()),x*(this.ai.zt()?8:4),S,Float32Array),this.nu=b?Ms(this.nu,{min:{x:e,y:h},max:{x:n,y:o}}):{min:{x:e,y:h},max:{x:n,y:o}}}if(s||i){const i=f?"uniform":A?"attribute":p?["gradient",p]:g?["gradient",g]:void 0,s=d&&v&&y>0&&i;this.DV=s?"triangulated"===m?{type:"triangulated",shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,snapToNearestPixel:this.UV,ensureMinimumSegmentLength:void 0!==this.cc}),this.PV?Tg.AliasedEdge:void 0,c&&Tg.StippleTextureInstanced,Tg.AttributeHighlight),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,snapToNearestPixel:this.UV,ensureMinimumSegmentLength:void 0!==this.cc}),c&&Tg.StippleTextureInstanced,Tg.AttributeHighlight)}:void 0,geometry:Op(this.ZB,y,!1),thickness:y,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:A,fillStyleLinearGradient:p,fillStyleRadialGradient:g}:{type:"primitive",shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,snapToNearestPixel:this.UV}),Tg.AttributeHighlight),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,snapToNearestPixel:this.UV}),Tg.AttributeHighlight)}:void 0,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:A,fillStyleLinearGradient:p,fillStyleRadialGradient:g}:void 0}if(c){if(s||S||b){const t=S||s?r:r.filter((t=>t.ZV)),i=new Float32Array(4*t.length);let e=0;for(let s=0;s<t.length;s+=1){const r=t[s].jt,h=t[s].Ut;i[e]=0,i[e+1]=0,i[e+2]=Math.abs(h.x-r.x),i[e+3]=Math.abs(h.y-r.y),e+=4}this.EV=this.ZB.tO(this.EV,i,4*x,S||s,Float32Array)}this.RV=this.ZB.HO(c.getPattern())}else this.EV&&(this.ZB.BR(this.EV.buffer),this.EV=void 0),this.RV=void 0;if(h||S||b){const t="triangulated"===m?1:2,i=S||h?r:r.filter((t=>t.ZV)),s=new Float32Array(i.length*t);let e=0;i.forEach((i=>{for(let r=0;r<t;r+=1)s[e+r]=i.gi;e+=t})),this.QV=this.ZB.tO(this.QV,s,x*t,S||h,Float32Array)}if((a||S||b||s)&&A){const t=S||a||s?r:r.filter((t=>t.ZV)),i=new Uint32Array(2*t.length);let e=0;t.forEach((t=>{const s=(t.iP||A.color).toUint32();for(let t=e;t<e+2;t+=1)i[t]=s;e+=2})),this.KV=this.ZB.tO(this.KV,i,2*x,S||a,Uint32Array)}if(t){if(S||b||i){const t="triangulated"===m?1:2,s=S||i?r:r.filter((t=>t.ZV)),e=new Float32Array(s.length*t);let h=0;s.forEach((i=>{for(let s=0;s<t;s+=1)e[h+s]=i.XV||0;h+=t})),this.qV=this.ZB.tO(this.qV,e,x*t,S,Float32Array)}}else this.qV&&(this.ZB.BR(this.qV.buffer),this.qV=void 0);g?this.Rz=ap(this.Ai||this.nu,this.ai,g.getPosition(),g.getExtent(),g.getShape(),this.ZB.hR()):p?this.Oz=lp(this.Ai||this.nu,this.ai,p.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),this.lc(e),this.NV=!1,this.GV=!1,this.zV=!1,this.$V=!1,this.ui.u=!1,this.VV=!1;for(const t of r)t.ZV=!1;return this}wc(t,i){var s;const e=this.BV,r=this.QV,h=this.qV;if(!e||!r)return{};const n=this.DV;if(!n)return{};const{type:o,fillStyleSolid:a,fillStyleIndividual:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,lineStyleDashed:d}=n,f=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;return f?(this.ZB.Kc(f).SR(f,((s,f,A,g)=>{if(this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(g("uScaleStart_highpart"),this.bD.tz()).MR(g("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(g("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(g("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(g("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(g("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.UV&&this.ZB.MR(g("uViewportSizePx"),[this.pi.kt().x*this.ZB.hR(),this.pi.kt().y*this.ZB.hR()]),void 0!==this.cc&&this.ZB.MR(s("uMinSegmentPixelVector"),[this.cc.x,this.cc.y]),this.ZB.UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.ZB.ZR(s("uFirstId"),i),!h)return!1;"triangulated"===o?this.ZB.bR(h.buffer,1,{location:f("aPickingIdOffset"),size:1}):this.ZB.aO(f("aPickingIdOffset"),h.buffer)}else if(a)this.ZB.UI(s("uColor"),a.getColor());else if(l){if(!this.KV)return!1;if("triangulated"===o)zp.FV(this.ZB,A,this.KV.buffer,f("aColorA"),f("aColorB"),4,0,!0,this.ZB.gl.UNSIGNED_BYTE,1);else{const t=f("aColor");this.ZB.gl.bindBuffer(this.ZB.gl.ARRAY_BUFFER,this.KV.buffer),this.ZB.gl.vertexAttribPointer(t,4,this.ZB.gl.UNSIGNED_BYTE,!0,0,0),this.ZB.gl.enableVertexAttribArray(t)}}else if(c){if(!this.Rz)return!1;this.ZB.PO(A,this.Rz,c)}else if(u){if(!this.Oz)return!1;this.ZB.BO(A,this.Oz,u)}if(d){if(!this.EV||!this.RV)return!1;zp.FV(this.ZB,A,this.EV.buffer,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0,!1,this.ZB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),this.ZB.MR(s("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(g("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(s("uStippleScale"),d.getPatternScale()).wR(s("uStippleTexture"),this.RV.WO,0)}if("triangulated"===o){const{geometry:i,thickness:s}=n;zp.TV(this.ai.zt(),this.ZB,e.buffer,A,this.ai.zt()?4:2,0),this.ZB.bR(r.buffer,1,{location:f("aIsHighlighted"),size:1}),zp.wc(this.Sz,i,A,this.PV&&1!==t,1===t,s,this.OV.length)}else Vp.TV(this.ai.zt(),this.ZB,e.buffer,A,this.ai.zt()?4:2,0),this.ZB.aO(f("aIsHighlighted"),r.buffer),Vp.LV(this.Sz,this.OV.length);return!0})),{idCount:this.OV.length}):{}}dispose(){return super.dispose(),this.DV=void 0,this.BV&&(this.ZB.BR(this.BV.buffer),this.BV=void 0),this.EV&&(this.ZB.BR(this.EV.buffer),this.EV=void 0),this.QV&&(this.ZB.BR(this.QV.buffer),this.QV=void 0),this.qV&&(this.ZB.BR(this.qV.buffer),this.qV=void 0),this.KV&&(this.ZB.BR(this.KV.buffer),this.KV=void 0),this.RV=void 0,this}kc(t,i,s,e,r){return{collectionMember:this.OV.find((s=>i+s.XV===t))}}_c(){return this}Ii(t){super.Ii(t);for(const i of this.OV)i.Ii(t);return this}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return Yi(this.hc)}cu(){return Yi(this.hc)}}class Up{constructor(t,i){this.tN=!1,this.iN=!1,this.ai=t,this.sN=i,this.sN.wi("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.tN="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.tN="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.iN=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.tN?t[0].x:t[0].y,end:"x"===this.tN?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.tN?"x"===this.tN?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),e=Math.min(t[i-1].x,t[0].x);let r=t[0].y,h=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>r&&(r=i.y),i.y<h&&(h=i.y)}return f(a(e,h),a(s,r))}return ns}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),e=Math.min(t[i-1].y,t[0].y);let r=t[0].x,h=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>r&&(r=i.x),i.x<h&&(h=i.x)}return f(a(h,e),a(r,s))}return ns}(t):Ss(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const Yp=Math.min(1,1.5);class jp extends Up{constructor(t,i,s){super(t,i),this.eN=!1,this.rN={enabled:!1,totalDataPointsAtTime:0},this.hN=[],this.Bs=s,this.nN=t instanceof Z?{type:"linear",scale:t}:t instanceof J?{type:"mixed",scale:t}:{type:"unknown"},this.sN.wi("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.eN=!0)}))}oN(t,i=!1){if(this.eN||!this.tN||"linear"!==this.nN.type)return!1;!1===i&&this.aN&&(clearTimeout(this.aN),this.aN=void 0);const s="x"===this.tN?this.nN.scale.x.Jf:this.nN.scale.y.Jf;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const r=t[0],h=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.tN?r.x:r.y,"x"===this.tN?h.x:h.y,e),o=this.nN.scale,a=Math.abs("x"===this.tN?o.ni().x:o.ni().y),l=a/n,u=Math.floor(l*Yp),c=u*n,d=Nt.performance.now(),f=!(d-s.$r<500)&&(s.Rr?d-s.Gr<1e3:d-s.Or<2e3||s.Vr),A=e>2*this.rN.totalDataPointsAtTime;if(f&&!A)return this.aN=setTimeout((()=>this.lN(t)),1e3),!1;const g=u>=10,p=this.rN.enabled?this.rN.columnWidthAxis/a<1.5:void 0,v=this.rN.enabled&&u>this.rN.dataPointsPerColumn?u/this.rN.dataPointsPerColumn>=2:void 0;let y;!0===this.rN.enabled?p?v&&(y={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):y=g?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:g&&(y={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const m=!1===i;return y?(m&&(this.rN=y),!0):(m&&(this.rN={...this.rN,totalDataPointsAtTime:e}),!1)}uN(){this.cN=void 0,this.hN.length=0,this.aN&&(clearTimeout(this.aN),this.aN=void 0)}dN(t){if(0===t.length)return t;if(this.eN||!this.tN||"linear"!==this.nN.type||!this.rN.enabled)return t;let i;i=this.hN.length>0?Ti(this.hN,t,{canReturnB:!0}):t;const s=i.length,e=[];let r,h,n=void 0===this.cN,o=-1,a=-1,l=0,u=0;if("x"!==this.tN||this.iN)if("x"===this.tN&&this.iN){const t=this.rN.columnWidthAxis;let c=this.cN?this.cN.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!r||s.y>r.y)&&(r=s,o=f),(!h||s.y<h.y)&&(h=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(r,h):e.push(h,r)),n=!1,c=s.x,d=c-t,r=s,o=f,h=s,a=f,l=f,u=f)}}else if("y"!==this.tN||this.iN){if("y"===this.tN&&this.iN){const t=this.rN.columnWidthAxis;let c=this.cN?this.cN.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!r||s.x>r.x)&&(r=s,o=f),(!h||s.x<h.x)&&(h=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(r,h):e.push(h,r)),n=!1,c=s.y,d=c-t,r=s,o=f,h=s,a=f,l=f,u=f)}}}else{const t=this.rN.columnWidthAxis;let c=this.cN?this.cN.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!r||s.x>r.x)&&(r=s,o=f),(!h||s.x<h.x)&&(h=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(r,h):e.push(h,r)),n=!1,c=s.y,d=c+t,r=s,o=f,h=s,a=f,l=f,u=f)}}else{const t=this.rN.columnWidthAxis;let c=this.cN?this.cN.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!r||s.y>r.y)&&(r=s,o=f),(!h||s.y<h.y)&&(h=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(r,h):e.push(h,r)),n=!1,c=s.x,d=c+t,r=s,o=f,h=s,a=f,l=f,u=f)}}if(r||h){const t=i.slice(l,u+1);this.hN=t}else this.hN.length=0;const c=e.length;return c>0&&(this.cN=e[c-1]),e}fN(t){var i,s;if(this.tN&&"linear"===this.nN.type){const e="x"===this.tN?this.nN.scale.x.Jf:this.nN.scale.y.Jf;if(!e)throw new Error("CP helper has no information about Axis state.");if((null===(i=e.Rh)||void 0===i?void 0:i.id)===fh||(null===(s=e.Rh)||void 0===s?void 0:s.id)===Ah){const i=Math.abs("x"===this.tN?this.nN.scale.x.getInnerInterval():this.nN.scale.y.getInnerInterval());if(this.rN.enabled)return 2*i/this.rN.columnWidthAxis;const s=t.length,e=t[0],r=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.tN?e.x:e.y,"x"===this.tN?r.x:r.y,s)}}}AN(t,i,s){if(!this.tN)return i;const e=s.length;let r=dt(s,t.min,this.tN,this.iN,0,e-1);void 0===r&&(r=this.iN?e-1:0);let h=dt(s,t.max,this.tN,this.iN,0,e-1);return void 0===h&&(h=this.iN?0:e-1),1+Math.abs(h-r)}gN(){this.aN&&(clearTimeout(this.aN),this.aN=void 0)}lN(t){this.oN(t,!0)&&this.Bs()}}class Hp extends Up{renderVisibleOnly(t,i,s=!1){const e=this.ai.x.getInnerStart(),r=this.ai.x.getInnerEnd(),h=Math.min(e,r),n=Math.max(e,r),o=this.ai.y.getInnerStart(),a=this.ai.y.getInnerEnd(),l=Math.min(o,a),u=Math.max(o,a);t.forEach(((t,e)=>{t.existingCoordinatesCount<=1||!1===s&&(t.boundaries.max.x<h||t.boundaries.min.x>n||t.boundaries.max.y<l||t.boundaries.min.y>u)||i(t)}))}}class Wp{constructor(t,i,s){this.pN=i,this.vN=s,this.yN=t,this.mN=[]}xN(t,i,s,e){const r=t.length;if(0===r)return;let h=t,n=r,o=this.yN[this.yN.length-1];do{const t=this.yN.length;let r;o||(o=this.SN(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.vN&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.yN[t-1].lastDataPoint;i?(h.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)r=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,h.slice(0,r),r,a);else{const t=Math.ceil(i)+a;r=Math.min(t,n);const e={...s(t,h.slice(0,r),r,a),isDropped:!1};this.yN.push(e)}r>0&&(n>r?(h=h.slice(r),n=h.length):(h=[],n=0))}while(n>0);this.bN()}MN(t){const i=t,s=this.yN.indexOf(i);s>=0&&this.yN.splice(s,1),i.droppedTimestamp=Nt.performance.now(),this.mN.push(i)}wN(){this.yN.slice().forEach((t=>this.MN(t)))}_N(){this.yN.forEach((t=>this.pN(t))),this.mN.forEach((t=>this.pN(t))),this.yN.length=0,this.mN.length=0}SN(t,i){const s=2*t/3,e=4*t/3,r=this.mN.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(r>=0){const t=this.mN[r];return this.mN.splice(r,1),this.yN.push(t),t}}bN(){if(this.mN.length>5){const t=Nt.performance.now();for(let i=0;i<this.mN.length-5;i+=1){const s=this.mN[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.pN(s),this.mN.splice(i,1),i-=1)}}}}class Xp extends Up{kN(t,i){if(!i||"object"!=typeof i)return 0;const s=this.ai.x.getInnerStart(),e=this.ai.x.getInnerEnd(),r=Math.min(s,e),h=Math.max(s,e),n=this.ai.y.getInnerStart(),o=this.ai.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.CN(t,i.maxDataPointCount,r,h,a,l);if("minDataPointCount"in i)return this.TN(t,i.minDataPointCount,r,h,a,l);if("progressiveDataCleaningThreshold"in i)return this.FN(t,i.progressiveDataCleaningThreshold,r,h,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}CN(t,i,s,e,r,h){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}FN(t,i,s,e,r,h){if(void 0===i||!this.tN)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.iN?"x"===this.tN?a.boundaries.min.x>e:a.boundaries.min.y>h:"x"===this.tN?a.boundaries.max.x<s:a.boundaries.max.y<r;if(!((this.iN?"x"===this.tN?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.tN?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}TN(t,i,s,e,r,h){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.tN){if(this.iN?"x"===this.tN?l.boundaries.min.x>e:l.boundaries.min.y>h:"x"===this.tN?l.boundaries.max.x<s:l.boundaries.max.y<r){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<r||l.boundaries.min.y>h?n+=1:n=0;o+=l.existingDataPointsCount}return n}IN(t,i){const s=t.reduce(((t,i)=>Ms(t,i.boundaries)),ns);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.tN||this.iN?"x"===this.tN&&this.iN?s.max.x=Math.min(s.max.x,t):"y"!==this.tN||this.iN?"y"===this.tN&&this.iN&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class Zp extends Dn{constructor(t,i,s,e,r,h){super(t,i,s,e,r),this.bD=new xp,this._b=[],this.LN=new Hp(this.ai,this),this.PN=new jp(this.ai,this,(()=>this.pi.Bs())),this.DN=new Wp(this._b,(t=>{t.coordsBuffer&&this.ZB.BR(t.coordsBuffer),t.EV&&this.ZB.BR(t.EV)}),!0),this.EN=new Xp(this.ai,this),this.RN=0,this.ON=0,this.zN=!1,this.Fz=br({lineStyleSolid:()=>lr(this.hc)&&this.hc,lineStyleDashed:()=>fr(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return fe(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return G(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return z(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return ye(t)&&t}}),this.bz=i,this.Da=h,this.DV={type:"none"},this.ZB=t.Mz(),this.Sz=t,this.PV=this.ZB.mO;const n=this.ai.zt(),o=!0===(null==h?void 0:h.individualLookupValuesEnabled);let a,l,u,c=0;n||(a=c,c+=2),n&&(l=c,c+=4),o&&(u=c,c+=1);const d=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,r=0;e<i;e+=1){const i=t[e];s[r+0]=i.x,s[r+1]=i.y,s[r+2]=void 0!==i.value?i.value:0,r+=3}return s}const s=t.length,e=new Float32Array(5*s);let r=0;for(let i=0;i<s;i+=1){const s=t[i],h=Math.fround(s.x),n=Math.fround(s.y);e[r+0]=h,e[r+1]=n,e[r+2]=s.x-h,e[r+3]=s.y-n,e[r+4]=void 0!==s.value?s.value:0,r+=5}return e})(i,t):(i,s)=>Ai(i,t,Float32Array))(n,o);this.VN={individualLookupValuesEnabled:o,attributesPerVertex:c,attributeOffsetCoordinateLowPrecision:a,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:u,prepareRenderData:(t,i)=>d(t,this.hc.getFillStyle())}}NN(t,i,s){const e=new Float32Array(2*i);let r=0,h=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.RN+=Math.abs(h.x-i.x),this.ON+=Math.abs(h.y-i.y),e[r]=this.RN,e[r+1]=this.ON,r+=2,h=i}return e}Nh(){const t=this.mu,i=this.hc,s=this.Al(),e=this.pu,r=e.length,h=r>0,n=this.ui.T(),o=this.ui.u,a=this.Fz.lineStyleSolid(s),l=this.Fz.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.Fz.strokeFillSolid(s),f=this.Fz.strokeFillLinearGradient(s),A=this.Fz.strokeFillRadialGradient(s),g=this.Fz.strokeFillPaletted(s),p=d||f||A||g,v=this.VN.individualLookupValuesEnabled;if(l&&this.ai instanceof J)return Nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;h&&(this.fc=Ti(this.fc,e,{canReturnB:!0}),this.Ac+=r);let y=this.gc.u;const m=this.EN.kN(this._b,this.gc.T());if(m>0){let t=0;for(let i=0;i<m;i+=1){const i=this._b[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=ns,i.lastDataPoint=void 0,this.DN.MN(i)}this.fc=this.fc.slice(t),this.Ac=this.fc.length,y=!0}let x=e,S=!1;(this.PN.oN(this.fc)||t)&&(S=!0),l&&!this.zN?(S=!0,this.zN=!0,this.DN._N()):!l&&this.zN&&(this._b.forEach((t=>{t.EV&&(this.ZB.BR(t.EV),t.EV=void 0)})),this.zN=!1),S&&(this.PN.uN(),this._b.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=ns,t.lastDataPoint=void 0})),this.DN.wN(),x=this.fc,this.RN=0,this.ON=0);const b=this.PN.dN(x),M=b.length;if(M>0){let t=this.PN.fN(this.fc)||(this.wi("ApplicationType",(t=>"InternalUI"===t.type))?this.Ac:1e5);M/t>10&&(t=M/10),this.DN.xN(b,t,((t,i,s,e)=>{const r=this.LN.calculateUserDataPointsBoundaries(i),h=this.PN.AN(r,s,this.fc)-e;return this.GN=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:h,existingCoordinatesCount:s,jointPointsCount:e,boundaries:r,coordsBuffer:this.ZB.KR(t*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s)),lastDataPoint:i[s-1],EV:this.zN?this.ZB.KR(2*t,this.NN(i,s,this.GN)):void 0}}),((t,i,s,e)=>{const r=Ms(t.boundaries,this.LN.calculateUserDataPointsBoundaries(i)),h=this.PN.AN(r,t.existingCoordinatesCount+s,this.fc)-(t.jointPointsCount+e);this.ZB.qR(t.coordsBuffer,t.existingCoordinatesCount*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s)),this.zN&&t.EV&&this.ZB.qR(t.EV,2*t.existingCoordinatesCount,this.NN(i,s,this.GN)),this.GN=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=h,t.existingCoordinatesCount+=s,t.boundaries=r}))}if(y&&(this.nu=this.EN.IN(this._b,this.gc.T())),this.bD.FR(this.ai),A?this.jz=ap(this.Ai||this.nu,this.ai,A.getPosition(),A.getExtent(),A.getShape(),this.ZB.hR()):f?this.Wz=lp(this.Ai||this.nu,this.ai,f.getAngle(!0),this.ZB.hR()):(this.jz=void 0,this.Wz=void 0),s||o){if(g&&"value"===g.getLookUpProperty()&&!v){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Nt.alert(t),new Error(t)}if(p&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:A?["gradient",A]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";this.DV="primitive"===t?{type:t,shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}),l&&Tg.StippleTexture),mousePickingShader:n?this.ZB.SE(Tg["2D"],Tg.MousePicking({useVertexId:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}),l&&Tg.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:"triangulated"===t?{type:t,shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),this.PV?Tg.AliasedEdge:void 0,l&&Tg.StippleTextureInstanced),mousePickingShader:n?this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),l&&Tg.StippleTextureInstanced):void 0,geometry:Op(this.ZB,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:{type:"none"}}else this.DV={type:"none"}}return this.RV=l?this.ZB.HO(l.getPattern()):void 0,this.lc(i),this.mu=!1,this.pu=[],this.ui.u=!1,this}wc(t,i){const s=this.ZB.gl,e=this.DV;if(!e||"none"===e.type)return{};const r=1===t?e.mousePickingShader:e.shader;if(!r)return{};const{lineStyleDashed:h,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l}=e;return this.ZB.Kc(r).SR(r,((r,u,c,d)=>{let f=!1;if(this.ZB._R(r("uIsHighlighted"),1===t||2===t?0:this.gi).UI(r("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(r("uRenderEffectMask"),2===t?1:0),this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(r("uScale"),this.bD.kR()).MR(r("uDisp"),this.bD.CR()).MR(d("uScaleStart_highpart"),this.bD.tz()).MR(d("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(d("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(d("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(d("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(d("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(r("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(r("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t);else if(n)this.ZB.UI(r("uColor"),n.getColor());else if(a){if(!this.jz)return!1;this.ZB.PO(c,this.jz,a)}else if(o){if(!this.Wz)return!1;this.ZB.BO(c,this.Wz,o)}else if(l){const t=Mr(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.ZB.JO(c,l.lut,t)}const A=qi(i);return this.LN.renderVisibleOnly(this._b,(i=>{const{coordsBuffer:n}=i;if(!n)return;if(1===t){const[t,s]=A.ss(i.existingDataPointsCount);this.ZB.ZR(r("uFirstId"),t),"triangulated"===e.type?this.ZB.UO(c,s):this.ZB.GO(c,s)}s.bindBuffer(s.ARRAY_BUFFER,n);const o="triangulated"===e.type?zp.kV:Vp.kV;if(this.ai.zt()||void 0===this.VN.attributeOffsetCoordinateLowPrecision?this.ai.zt()&&void 0!==this.VN.attributeOffsetCoordinateHighPrecision&&o(!0,this.ZB,n,c,this.VN.attributesPerVertex,this.VN.attributeOffsetCoordinateHighPrecision):o(!1,this.ZB,n,c,this.VN.attributesPerVertex,this.VN.attributeOffsetCoordinateLowPrecision),h){if(!i.EV||!this.RV)return;"triangulated"===e.type?zp.CV(this.ZB,c,i.EV,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0):Vp.CV(this.ZB,c,i.EV,u("aLengthSoFar"),2,0),this.ZB.MR(r("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(d("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(r("uStippleScale"),h.getPatternScale()).wR(r("uStippleTexture"),this.RV.WO,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.VN.attributeOffsetLookUpValue&&1!==t)if("triangulated"===e.type){const t=u("aLookupValueA");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(t,1),s.enableVertexAttribArray(t);const i=u("aLookupValueB");s.vertexAttribPointer(i,1,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.VN.attributeOffsetLookUpValue+this.VN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(i,1),s.enableVertexAttribArray(i)}else{const t=u("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),s.enableVertexAttribArray(t)}if("triangulated"===e.type){const{thickness:s}=e;zp.wc(this.Sz,e.geometry,c,this.PV&&1!==t,1===t,s,i.existingCoordinatesCount-1)}else Vp.IV(this.Sz,i.existingCoordinatesCount);f=!0}),void 0===this.us),s.bindBuffer(s.ARRAY_BUFFER,null),f})),{idCount:this.Ac}}kc(t,i,s,e,r){return{}}bu(t,i){return Array.isArray(t)||(t=[t]),this.pu=Ti(this.pu,t,{canReturnB:!0}),this.nu=Ms(this.nu,i||i||this.LN.calculateUserDataPointsBoundaries(t)),this}Vi(){return super.Vi(),this.RN=0,this.ON=0,this.GN=void 0,this}dispose(){return super.dispose(),this.DN._N(),this.PN.gN(),this.DV={type:"none"},this.RV=void 0,this}_c(){return this}gS(t){this.Tu()>0&&this.Nh();const i=this.Mu(),s=at(i,t,this.Mi(),this.xu,this.Su,this.ai,this.engine.ai,this.nu,this.LN.tN,this.LN.iN);return void 0!==s?i[s]:void 0}Eb(t){this.Tu()>0&&this.Nh();const i=this.Mu(),s=i.length;if(0===s)return;const e=this.xu?1:0,r=s-(this.Su?2:1),h=this.Mi();if(h===ot.Nearest){let e,r,h=rs;for(let n=0;n<s;n+=1){const s=q(i[n],this.ai,this.pi.ai);if(void 0!==r){const i=As(r,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<h&&(h=n,e=i)}r=s}return void 0!==e?q(e,this.pi.ai,this.ai):void 0}if("x"===this.LN.tN&&h===ot.NearestX||"y"===this.LN.tN&&h===ot.NearestY){const s=ft(i,q(t,this.pi.ai,this.ai),this.LN.tN,this.LN.iN,e,r);return s?ms(i[s.a],i[s.b],s.lerpAmount):void 0}return this.gS(t)}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return Yi(this.hc)}cu(){return Yi(this.hc)}}class Jp extends mn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.DV={fill:void 0,border:void 0},this.bD=new xp,this.nu=ns,this.$N=!1,this.UN=!1,this.YN=!1,this.jN=!1,this.HN=!1,this.Wd=[],this.Fz=br({polygonStyleSolid:()=>fe(this.Ze)&&this.Ze,polygonStyleImage:()=>kt(this.Ze)&&this.Ze,polygonStyleRadialGradient:()=>z(this.Ze)&&this.Ze,polygonStyleLinearGradient:()=>G(this.Ze)&&this.Ze,polygonStylePaletted:()=>ye(this.Ze)&&this.Ze,polygonStyleIndividual:()=>ge(this.Ze)&&this.Ze,lineStyleSolid:()=>lr(this.Je)&&this.Je,lineStyleDashed:()=>fr(this.Je)&&this.Je,lineStyleFilled:()=>{const t=this.Je&&this.Je.getFillStyle();return fe(t)&&t}}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.PV=this.ZB.mO}Ho(){const t={Fs:i=>this.YV(t,i),Ii:i=>this.jV(t,i),au:i=>this.WN(t,i),Bx:i=>this.XN(t,i),UI:i=>this.WV(t,i),hu:[],M:void 0,ZN:void 0,gi:0,HA:!0,JN:this.Wd.length};return this.Wd.push(t),t}Vi(){return this.Wd.length=0,this.$N=!0,this.pi.Ci(this),this}Bp(){return this.Wd}Zd(t){const i=this.Wd.indexOf(t);i>=0&&(this.Wd.splice(i,1),this.HN=!0,this.pi.Ci(this,t))}YV(t,i){return t.HA=i,this.HN=!0,t.HA||this.pi.Ci(this,t),t}jV(t,i){return t.gi=i,this.jN=!0,t}WN(t,i){return t.hu=i,this.$N=!0,t}XN(t,i){return t.M=i,this.UN=!0,t}WV(t,i){return t.ZN=null==i?void 0:i.toUint32(),this.YN=!0,t}Nh(){const t=this.ui.T(),i=this.ui.u,s=this.ll(),e=this.jN,r=this.$N,n=this.UN,o=this.YN,a=this.HN,l=this.Je,u=this.Al(),c=this.Wd.filter((t=>t.HA&&t.hu.length>0));if(this.bD.FR(this.ai),(r||a)&&(this.nu=Ms(...c.map((t=>Ss(t.hu))))),r||a){const t=c.map((t=>[...t.hu,t.hu[0],{x:Number.NaN,y:Number.NaN}])).flat(),i=Ai(t,!1,Float64Array),s=this.ai.zt()?Ai(t,!0):i;this.BV=this.ZB.mR(s,!1,this.BV);let e=[];c.reduce(((t,s)=>{const r=t,n=2*(s.hu.length+1),o=new Float64Array(i.buffer,r,n),a=h.default(o,void 0,2),l=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let t=0;t<a.length;t+=1)a[t]+=l;return e=Ti(e,a,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT}),0);const r=new Uint32Array(e);this.QN=this.ZB.sO(r,this.QN),this.KN=r.length,this.qN=i.length/2-1}const d=this.Fz.polygonStyleSolid(s),f=this.Fz.polygonStylePaletted(s),A=this.Fz.polygonStyleIndividual(s),g=this.Fz.polygonStyleRadialGradient(s),p=this.Fz.polygonStyleLinearGradient(s),v=this.Fz.polygonStyleImage(s),y=d||f||p||g||v||A,m=this.Fz.lineStyleSolid(u),x=this.Fz.lineStyleDashed(s),S=m||x,b=this.Fz.lineStyleFilled(u),M=b,w=S&&Math.max(S.getThickness(),0);if((s||u||i)&&(this.DV.fill=y?{shader:this.ZB.SE(Tg["2D"],d&&Tg.Color({dataType:"uniform"}),p&&Tg.Color({dataType:["gradient",p]}),g&&Tg.Color({dataType:["gradient",g]}),f&&Tg.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&Tg.Color({dataType:"attribute"}),v&&Tg.Color({dataType:["image",v]}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}),Tg.AttributeHighlight),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}),Tg.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:v,fillStyleIndividual:A}:void 0,this.DV.border=S&&M&&"number"==typeof w&&0!==w?{shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:"uniform"}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),this.PV?Tg.AliasedEdge:void 0,x&&Tg.StippleTextureInstanced,Tg.AttributeHighlight),geometry:Op(this.ZB,w),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0}),x&&Tg.StippleTextureInstanced,Tg.AttributeHighlight)}:void 0,fillStyleSolid:b,lineStyleDashed:x,thickness:w}:void 0),e||r){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.hu.length+2;for(let r=s;r<s+e;r+=1)i[r]=t.gi;s+=e})),this.tG=this.ZB.mR(i,!0,this.tG)}if(t){if(r){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.hu.length+2;for(let r=s;r<s+e;r+=1)i[r]=t.JN;s+=e})),this.iG=this.ZB.mR(i,!1,this.iG)}}else this.iG&&(this.ZB.BR(this.iG),this.iG=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;const e={min:rs,max:hs};c.forEach((t=>{const r=void 0!==t.M?t.M:It,h=t.hu.length+2;for(let t=s;t<s+h;t+=1)i[t]=r;s+=h,void 0!==t.M&&(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))})),this.sG=e,this.eG=this.ZB.mR(i,!1,this.eG)}if(o||r&&A){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Uint32Array(t);let s=0;const e=A?A.getFallbackColor().toUint32():C.toUint32();c.forEach((t=>{const r=void 0!==t.ZN?t.ZN:e,h=t.hu.length+2;for(let t=s;t<s+h;t+=1)i[t]=r;s+=h})),this.rG=this.ZB.mR(i,!1,this.rG,Uint32Array)}if(g?this.Rz=ap(this.Ai||this.nu,this.ai,g.getPosition(),g.getExtent(),g.getShape(),this.ZB.hR()):p?this.Oz=lp(this.Ai||this.nu,this.ai,p.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),x){if(r){const t=c.reduce(((t,i)=>t+i.hu.length),2*c.length),i=new Float32Array(2*t);let s=0;c.forEach((t=>{let e=t.hu[0],r=0,h=0;for(const n of t.hu)r+=Math.abs(n.x-e.x),h+=Math.abs(n.y-e.y),i[s]=r,i[s+1]=h,s+=2,e=n;i[s+0]=r+Math.abs(t.hu[0].x-e.x),i[s+1]=h+Math.abs(t.hu[0].y-e.y),i[s+2]=Number.NaN,i[s+3]=Number.NaN,s+=4})),this.EV=this.ZB.mR(i,!1,this.EV)}this.RV=this.ZB.HO(x.getPattern())}else this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.RV=void 0;return this.hG=this.ZB.QO(this,this.hG,v,void 0,r||a||this.ai.ei(),((t,i,s)=>this.nG(t,i,s,c))),this.jN=!1,this.HN=!1,this.$N=!1,this.UN=!1,this.YN=!1,this.ui.u=!1,this.fl(this.Ze),this.yl(l),this}_i(){return this.sG}wc(t,i){var s,e;const{fill:r,border:h}=this.DV,n=this.BV,o=this.tG,a=this.iG;if(!n||!o)return{};if(r){const{fillStyleSolid:e,fillStyleLinearGradient:h,fillStyleRadialGradient:l,fillStylePaletted:u,fillStyleImage:c,fillStyleIndividual:d}=r,f=this.QN,A=this.KN,g=1===t?null===(s=r.mousePicking)||void 0===s?void 0:s.shader:r.shader;g&&n&&f&&void 0!==A&&this.ZB.Kc(g).SR(g,((s,r,g,p)=>{if(this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(p("uScaleStart_highpart"),this.bD.tz()).MR(p("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(p("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(p("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(p("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(p("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.ZB.RO(g,n,this.ai.zt(),void 0).lO(f).aO(r("aIsHighlighted"),o).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.ZB.ZR(s("uFirstId"),i),!a)return!1;this.ZB.aO(r("aPickingIdOffset"),a)}else if(e)this.ZB.UI(s("uColor"),e.getColor());else if(l){if(!this.Rz)return!1;this.ZB.PO(g,this.Rz,l)}else if(h){if(!this.Oz)return!1;this.ZB.BO(g,this.Oz,h)}else if(u){const t=Mr(u,this,this.sG);if(!t&&u.lut.percentageValues)return!1;if(this.ZB.JO(g,u.lut,t),"value"===u.getLookUpProperty()){if(!this.eG)return!1;this.ZB.aO(r("aLookupValue"),this.eG)}}else if(c){if(!this.hG)return!1;this.ZB.UI(p("uColor"),c.getSurroundingColor()).wR(s(QA),this.hG.texture.sR()||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).JR(c.fitMode)}else if(d){if(!this.rG)return!1;const t=r("aColor");this.ZB.gl.bindBuffer(this.ZB.gl.ARRAY_BUFFER,this.rG),this.ZB.gl.vertexAttribPointer(t,4,this.ZB.gl.UNSIGNED_BYTE,!0,0,0),this.ZB.gl.enableVertexAttribArray(t)}return this.ZB.cO(A,void 0,void 0,this.ZB.gl.UNSIGNED_INT),!0}))}if(h){const{geometry:s,fillStyleSolid:r,thickness:l,lineStyleDashed:u}=h,c=this.qN,d=1===t?null===(e=h.mousePicking)||void 0===e?void 0:e.shader:h.shader;d&&n&&c&&this.ZB.Kc(d).SR(d,((e,h,d,f)=>{if(this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(e("uScale"),this.bD.kR()).MR(e("uDisp"),this.bD.CR()).MR(f("uScaleStart_highpart"),this.bD.tz()).MR(f("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(f("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(f("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(f("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(f("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(e("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(e("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.ZB.bR(o,1,{location:h("aIsHighlighted"),size:1}).UI(e("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(e("uRenderEffectMask"),2===t?1:0),1===t){if(this.ZB.ZR(e("uFirstId"),i),!a)return!1;this.ZB.aO(h("aPickingIdOffset"),a,1)}else r&&this.ZB.UI(e("uColor"),r.getColor());if(u){if(!this.RV||!this.EV)return!1;zp.CV(this.ZB,d,this.EV,h("aLengthSoFarA"),h("aLengthSoFarB"),2,2,0),this.ZB.MR(e("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(f("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(e("uStippleScale"),u.getPatternScale()).wR(e("uStippleTexture"),this.RV.WO,1)}return zp.kV(this.ai.zt(),this.ZB,n,d,this.ai.zt()?4:2,0),zp.wc(this.Sz,s,d,this.PV&&1!==t,1===t,l,c),!0}))}return{idCount:this.Wd.length}}nG(t,i,s,e){const r=q({x:this.nu.min.x,y:this.nu.min.y},this.ai,this.pi.ai),h=q({x:this.nu.max.x,y:this.nu.max.y},this.ai,this.pi.ai),n={x:Math.abs(r.x-h.x),y:Math.abs(r.y-h.y)},o=fp(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.hu.length+2),0),f=new Float32Array(2*d),A=this.nu.max.x-this.nu.min.x,g=this.nu.max.y-this.nu.min.y,p=l-u,v=c-a;let y=0;for(const t of e){for(const i of t.hu){const t=u+p*((i.x-this.nu.min.x)/A),s=a+v*((i.y-this.nu.min.y)/g);f[y]=t,f[y+1]=s,y+=2}const i=u+p*((t.hu[0].x-this.nu.min.x)/A),s=a+v*((t.hu[0].y-this.nu.min.y)/g);f[y]=i,f[y+1]=s,y+=2,f[y]=Number.NaN,f[y+1]=Number.NaN,y+=2}return f}kc(t,i,s,e,r){return{collectionMember:this.Wd.find((s=>i+s.JN===t))}}_c(){return this.QN&&(this.ZB.BR(this.QN),this.QN=void 0),this.BV&&(this.ZB.BR(this.BV),this.BV=void 0),this.tG&&(this.ZB.BR(this.tG),this.tG=void 0),this.iG&&(this.ZB.BR(this.iG),this.iG=void 0),this.eG&&(this.ZB.BR(this.eG),this.eG=void 0),this.rG&&(this.ZB.BR(this.rG),this.rG=void 0),this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.DV={fill:void 0,border:void 0},this.hG=this.ZB.KO(this,this.hG),this}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return Yi(this.Je)}cu(){return Yi(this.Je)}}class Qp extends Sn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.bD=new xp,this.oG=ns,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStyleRadialGradient:()=>z(this.Ze)&&this.Ze,fillStyleLinearGradient:()=>G(this.Ze)&&this.Ze,fillStyleImage:()=>kt(this.Ze)&&this.Ze,strokeStyleSolid:()=>lr(this.Je)&&this.Je,strokeFillSolid:()=>{const t=this.Je.getFillStyle();return fe(t)&&t},strokeFillLinearGradient:()=>{const t=this.Je.getFillStyle();return G(t)&&t},strokeFillRadialGradient:()=>{const t=this.Je.getFillStyle();return z(t)&&t}}),this.nG=(t,i,s)=>{const e=q(this.Vl(),this.ai,this.pi.ai),r=Ds(q(Bs(this.Vl(),this.kt()),this.ai,this.pi.ai),e);return fp(t,i,r.x,r.y,s)},this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i}Nh(){super.Nh();const t=this.ui.T(),i=this.ll(),s=this.Ln.u||this.Y.u||this._l.u||this.Cl.u,e=this.Je,r=this.Al(),h=e.getThickness(),n=this._l.T();this.bD.FR(this.ai);const o=this.ai.ei();if(s){const t=this.Y.T();this.hu=function(t,i,s,e,r){const h=((t,i,s)=>[t,a(t.x+i,t.y),a(t.x+i,t.y+s),a(t.x,t.y+s)])(t,i,s);if(0!==e||e%360!=0){const t=e*Math.PI/180;h[0]=Cs(h[0],r,t),h[1]=Cs(h[1],r,t),h[2]=Cs(h[2],r,t),h[3]=Cs(h[3],r,t)}return h}(this.Ln.T(),t.x,t.y,n,this.Cl.T());const i=Ai(this.hu,this.ai.zt());this.Pz=this.ZB.mR(i,!1,this.Pz),this.Dz=this.hu.length,this.oG=Ss(this.hu)}const l=this.Fz.fillStyleSolid(i),u=this.Fz.fillStyleRadialGradient(i),c=this.Fz.fillStyleLinearGradient(i),d=this.Fz.fillStyleImage(i),f=l||u||c||d;i&&(this.zz=f?this.ZB.SE(Tg["2D"],l&&Tg.Color({dataType:"uniform"}),c&&Tg.Color({dataType:["gradient",c]}),u&&Tg.Color({dataType:["gradient",u]}),d&&Tg.Color({dataType:["image",d]}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),u?this.Rz=ap(this.Ai||this.oG,this.ai,u.getPosition(),u.getExtent(),u.getShape(),this.ZB.hR()):c?this.Oz=lp(this.Ai||this.oG,this.ai,c.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),this.hG=this.ZB.QO(this,this.hG,d,void 0,o||s,this.nG);const A=this.Fz.strokeStyleSolid(r),g=this.Fz.strokeFillSolid(r),p=this.Fz.strokeFillLinearGradient(r),v=this.Fz.strokeFillRadialGradient(r),y=A,m=g||p||v;if(y&&(s||r||o&&1!==h)){if(1===h||-1===h)[this.Vz,this.aG]=[this.hu,void 0];else{const t=this.ai;[this.Vz,this.aG]=t instanceof J?((t,i,s)=>{const e=t[0],r=t[1],h=t[2],n=t[3],o=i/2;return[[s.oi(e,r,o,-o),s.oi(r,e,-o,-o),s.oi(n,h,-o,-o),s.oi(h,n,o,-o),s.oi(e,r,-o,o),s.oi(r,e,o,o),s.oi(n,h,o,o),s.oi(h,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.hu,h,t):((t,i,s)=>{const e=t[0],r=t[1],h=t[2],n=t[3],o=a(i.x*s*.5,i.y*s*.5),l=Fs(Ts(r,e)),u=Fs(Ts(n,e)),c=Os(l),d=Os(u);return[[Bs(e,Bs(Ps(c,o.x),Ps(d,o.y))),Bs(r,Bs(Ps(l,o.x),Ps(d,o.y))),Bs(n,Bs(Ps(c,o.x),Ps(u,o.y))),Bs(h,Bs(Ps(l,o.x),Ps(u,o.y))),Bs(e,Bs(Ps(l,o.x),Ps(u,o.y))),Bs(r,Bs(Ps(c,o.x),Ps(u,o.y))),Bs(n,Bs(Ps(l,o.x),Ps(d,o.y))),Bs(h,Bs(Ps(c,o.x),Ps(d,o.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.hu,t.ni(),h)}this.Gz=this.ZB.mR(Ai(this.Vz,this.ai.zt()),!1,this.Gz),this.aG?(this.MV=this.ZB.sO(new Uint16Array(this.aG),this.MV),this.Nz=this.aG.length):(this.MV&&this.ZB.BR(this.MV),this.MV=void 0,this.Nz=this.Vz.length)}return r&&(this.Xz=y&&m?this.ZB.SE(Tg["2D"],Tg.Color({dataType:v?["gradient",v]:p?["gradient",p]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),v?this.jz=ap(this.oG,this.ai,v.getPosition(),v.getExtent(),v.getShape(),this.ZB.hR()):p?this.Wz=lp(this.oG,this.ai,p.getAngle(!0),this.ZB.hR()):(this.jz=void 0,this.Wz=void 0),this.Zz=t&&f?this.Zz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.Jz=t&&this.Je!==Tt?this.Jz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.fl(this.Ze),this.yl(e),this.Ln.u=!1,this._l.u=!1,this.Y.u=!1,this.Cl.u=!1,this}wc(t,i){const s=1===t?this.Zz:this.zz,e=this.Pz,r=this.Dz,h=this.Fz.fillStyleSolid(!1),n=this.Fz.fillStyleRadialGradient(!1),o=this.Fz.fillStyleLinearGradient(!1),a=this.Fz.fillStyleImage(!1);s&&e&&r&&this.Ze!==ae&&(this.ZB.Kc(s),this.ZB.SR(s,((s,l,u,c)=>{if(this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(c("uScaleStart_highpart"),this.bD.tz()).MR(c("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(c("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(c("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(c("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(c("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.ZB.ZR(s("uFirstId"),i).UO(u,1);else if(h)this.ZB.UI(s("uColor"),h.getColor());else if(n){if(!this.Rz)return!1;this.ZB.PO(u,this.Rz,n)}else if(o){if(!this.Oz)return!1;this.ZB.BO(u,this.Oz,o)}else if(a){if(!this.hG)return!1;const t=this.hG&&this.hG.texture.sR();this.ZB.UI(c("uColor"),a.getSurroundingColor()).wR(s(QA),t||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).JR(a.fitMode)}return this.ZB._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0).RO(u,e,this.ai.zt(),void 0).Nk(this.ZB.gl.TRIANGLE_FAN,r),!0})));const l=1===t?this.Jz:this.Xz,u=this.Fz.strokeStyleSolid(!1),c=this.Fz.strokeFillSolid(!1),d=this.Fz.strokeFillLinearGradient(!1),f=this.Fz.strokeFillRadialGradient(!1),A=this.Gz;return l&&A&&u&&(this.ZB.Kc(l),this.ZB.SR(l,((s,e,r,h)=>{if(this.ai instanceof Z||this.ai instanceof mr?this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(h("uScaleStart_highpart"),this.bD.tz()).MR(h("uScaleStart_lowpart"),this.bD.iz()):this.ai instanceof J&&this.ZB.MR(h("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).MR(h("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).MR(h("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).MR(h("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).MR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).MR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.ZB.ZR(s("uFirstId"),i).UO(r,1);else if(c)this.ZB.UI(s("uColor"),c.getColor());else if(f){if(!this.jz)return!1;this.ZB.PO(r,this.jz,f)}else if(d){if(!this.Wz)return!1;this.ZB.BO(r,this.Wz,d)}return this.ZB._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0).RO(r,A,this.ai.zt(),void 0),this.MV?this.ZB.lO(this.MV).cO(this.Nz):this.ZB.Nk(this.ZB.gl.LINE_LOOP,this.Nz),!0}))),{idCount:1}}kc(t,i,s,e,r){return{}}_c(){return this.MV&&(this.ZB.BR(this.MV),this.MV=void 0),this.Pz&&(this.ZB.BR(this.Pz),this.Pz=void 0),this.Gz&&(this.ZB.BR(this.Gz),this.Gz=void 0),this.hG=this.ZB.KO(this,this.hG),this.zz=void 0,this.Xz=void 0,this.Zz=void 0,this.Jz=void 0,this}Wi(){return Math.max(this.Ln.T().x,this.Ln.T().x+this.Y.T().x)}Hi(){return Math.min(this.Ln.T().x,this.Ln.T().x+this.Y.T().x)}Zi(){return Math.max(this.Ln.T().y,this.Ln.T().y+this.Y.T().y)}Xi(){return Math.min(this.Ln.T().y,this.Ln.T().y+this.Y.T().y)}uu(){return Yi(this.Je)}cu(){return Yi(this.Je)}}class Kp extends bn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.bD=new xp,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStylePaletted:()=>ye(this.Ze)&&this.Ze,fillStyleRadialGradient:()=>z(this.Ze)&&this.Ze,fillStyleLinearGradient:()=>G(this.Ze)&&this.Ze,fillStyleImage:()=>kt(this.Ze)&&this.Ze,strokeLineStyleSolid:()=>lr(this.Je)&&this.Je,strokeLineSolidFill:()=>{const t=this.Je.getFillStyle();return fe(t)&&t},strokeLinearGradientFill:()=>{const t=this.Je.getFillStyle();return G(t)&&t},strokeRadialGradientFill:()=>{const t=this.Je.getFillStyle();return z(t)&&t}}),this.nG=(t,i,s)=>{const e=q({x:this.nu.min.x,y:this.nu.min.y},this.ai,this.pi.ai),r=q({x:this.nu.max.x,y:this.nu.max.y},this.ai,this.pi.ai),h={x:Math.abs(e.x-r.x),y:Math.abs(e.y-r.y)},n=fp(t,i,h.x,h.y,s),o=n[1],a=n[4],l=n[6],u=n[7],c=new Float32Array(2*this.hu.length),d=this.nu.max.x-this.nu.min.x,f=this.nu.max.y-this.nu.min.y,A=a-l,g=u-o;let p=0;for(const t of this.hu){const i=l+A*((t.x-this.nu.min.x)/d),s=o+g*((t.y-this.nu.min.y)/f);c[p]=i,c[p+1]=s,p+=2}return c},this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i}yd(t){let i,s=Number.MAX_VALUE;for(const e of this.hu){const r=ps(q(e,this.ai,this.pi.ai),t);r<s&&(s=r,i=e)}return i}Nh(){const t=this.ui.T(),i=this.ll(),s=this.ou,e=this.hu.length>=3,r=this.Je,n=this.Al(),o=r.getThickness(),a=this.vl(o);this.bD.FR(this.ai),this.ne=this.ai.ni();const l=this.ai.ei();if(s&&(this.nu=Ss(this.hu)),s&&e){const t=Ai(this.hu,this.ai.zt());this.Pz=this.ZB.mR(t,!1,this.Pz),this.lG=new Uint16Array(h.default(t)),this.uG=this.ZB.sO(this.lG,this.uG),this.Dz=this.lG.length}const u=this.Fz.fillStyleSolid(i),c=this.Fz.fillStylePaletted(i),d=this.Fz.fillStyleRadialGradient(i),f=this.Fz.fillStyleLinearGradient(i),A=this.Fz.fillStyleImage(i),g=u||c&&"value"!==c.getLookUpProperty()&&c||f||d||A;if(i&&(this.zz=g?this.ZB.SE(Tg["2D"],u&&Tg.Color({dataType:"uniform"}),f&&Tg.Color({dataType:["gradient",f]}),d&&Tg.Color({dataType:["gradient",d]}),c&&Tg.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),A&&Tg.Color({dataType:["image",A]}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),d?this.Rz=ap(this.Ai||this.nu,this.ai,d.getPosition(),d.getExtent(),d.getShape(),this.ZB.hR()):f?this.Oz=lp(this.Ai||this.nu,this.ai,f.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),this.hG=this.ZB.QO(this,this.hG,A,void 0,l||s,this.nG),(s||a||l&&1!==o)&&e){const t=1===o||-1===o?this.hu:kp(this.hu,this.ne,o);this.Vz=Ai(t,this.ai.zt()),this.Gz=this.ZB.mR(this.Vz,!0,this.Gz),this.Nz=t.length}const p=this.Fz.strokeLineStyleSolid(n),v=this.Fz.strokeLineSolidFill(n),y=this.Fz.strokeLinearGradientFill(n),m=this.Fz.strokeRadialGradientFill(n),x=p,S=v||y||m;return n&&(this.Xz=x&&S?this.ZB.SE(Tg["2D"],Tg.Color({dataType:m?["gradient",m]:y?["gradient",y]:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0),m?this.jz=ap(this.Ai||this.nu,this.ai,m.getPosition(),m.getExtent(),m.getShape(),this.ZB.hR()):y?this.Wz=lp(this.Ai||this.nu,this.ai,y.getAngle(!0),this.ZB.hR()):(this.jz=void 0,this.Wz=void 0),this.Zz=t&&g?this.Zz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.Jz=t&&this.Je!==Tt?this.Zz||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})):void 0,this.ou=!1,this.fl(this.Ze),this.yl(r),this}wc(t,i){const s=1===t?this.Zz:this.zz,e=this.Pz,r=this.Dz,h=this.Fz.fillStyleSolid(!1),n=this.Fz.fillStyleRadialGradient(!1),o=this.Fz.fillStyleLinearGradient(!1),a=this.Fz.fillStylePaletted(!1),l=this.Fz.fillStyleImage(!1);s&&e&&r&&this.ZB.Kc(s).SR(s,((s,r,u,c)=>{if(this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).MR(c("uScaleStart_highpart"),this.bD.tz()).MR(c("uScaleStart_lowpart"),this.bD.iz()).RO(u,e,this.ai.zt(),void 0).lO(this.uG)._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),1===t)this.ZB.ZR(s("uFirstId"),i).UO(u,1);else if(h)this.ZB.UI(s("uColor"),h.getColor());else if(n){if(!this.Rz)return!1;this.ZB.PO(u,this.Rz,n)}else if(o){if(!this.Oz)return!1;this.ZB.BO(u,this.Oz,o)}else if(a){const t=Mr(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.ZB.JO(u,a.lut,t)}else if(l){if(!this.hG)return!1;this.ZB.UI(c("uColor"),l.getSurroundingColor()).wR(s(QA),this.hG.texture.sR()||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).JR(l.fitMode)}return this.ZB.cO(this.Dz),!0}));const u=1===t?this.Jz:this.Xz,c=this.Je,d=this.Gz,f=this.Nz;return u&&d&&f&&this.ZB.Kc(u).SR(u,((s,e,r,h)=>{this.ZB._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0).MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()).RO(r,d,this.ai.zt(),void 0);const n=c.getFillStyle();if(1===t)this.ZB.ZR(s("uFirstId"),i).UO(r,1);else if(fe(n))this.ZB.UI(s("uColor"),n.getColor());else if(z(n)){if(!this.jz)return!1;this.ZB.PO(r,this.jz,n)}else if(G(n)){if(!this.Wz)return!1;this.ZB.BO(r,this.Wz,n)}const o=c.getThickness(),a=-1===o||1===o;return this.ZB.Nk(a?this.ZB.gl.LINE_LOOP:this.ZB.gl.TRIANGLE_STRIP,this.Nz),!0})),{idCount:1}}kc(t,i,s,e,r){return{}}_c(){return this.uG&&(this.ZB.BR(this.uG),this.uG=void 0),this.Pz&&(this.ZB.BR(this.Pz),this.Pz=void 0),this.Gz&&(this.ZB.BR(this.Gz),this.Gz=void 0),this.zz=void 0,this.Xz=void 0,this.Zz=void 0,this.Jz=void 0,this.hG=this.ZB.KO(this,this.hG),this}}class qp extends up{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.SV();this.bV=t.mR(i),this.wV=e,this._V=s}Kc(t){return this.ZB.bR(this.bV,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Nk(t,i,s){return this.ZB.dO(void 0!==i?i:this._V,s||0,this.wV,t),this}SV(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.ZB.gl.TRIANGLES,drawSize:6}}$E(){this.ZB.BR(this.bV)}}const tv=t=>{let i=t.NR.zE.get(void 0);return i||(i=new qp(t),t.NR.zE.set(void 0,i),i)};class iv extends up{constructor(t,i,s,e,r){super(t),this._V=s,this.cG=i.length,this.VB=t.mR(Ai(i,!1)),this.dG=e,r&&(this.fG={...r,VB:t.mR(r.yM,!1),cG:r.yM.length/4})}AG(t){return t>1}Nk(t,i,s,e,r,h){return"object"==typeof r?i?this.ZB.aO(t.attribute("aOffsetScale"),i,1,s*Float32Array.BYTES_PER_ELEMENT).MR(t.uniform(KA),[r.width,r.height]):this.ZB._R(t.uniform("uOffsetScale"),r.scale).MR(t.uniform(KA),[r.width,r.height]):h?i?this.ZB.aO(t.attribute(`${iv.gG}Amount`),i,1,s*Float32Array.BYTES_PER_ELEMENT):this.ZB._R(t.uniform(`${iv.gG}Amount`),r):this.ZB._R(t.uniform("uPointSize"),r),h?this.ZB.bR(this.VB,0,{location:t.attribute(iv.gG),size:2}).dO(this._V,0,this.cG,e):this.ZB.Nk(this.ZB.gl.POINTS,e),this}pG(t,i,s,e,r,h){return!(!this.fG||!r||(i?this.ZB.aO(t.attribute(`${iv.gG}Amount`),i,1):this.ZB._R(t.uniform(`${iv.gG}Amount`),e),this.ZB._R(t.uniform(`${iv.vG}Amount`),h).bR(this.fG.VB,0,{location:t.attribute(iv.gG),size:2},{location:t.attribute(iv.vG),size:2}).dO(this.fG._V,0,this.fG.cG,s),0))}$E(){var t;this.ZB.BR(this.VB),this.ZB.BR(null===(t=this.fG)||void 0===t?void 0:t.VB)}}iv.gG="aFillOffset",iv.vG="aBorderOffset";const sv=(t,i=0)=>{const s=[a(-.5,-.5),a(.5,-.5),a(.5,.5),a(-.5,.5)];return new iv(t,s,t.gl.TRIANGLE_FAN,i,{yM:[-.5,-.5,0,0,-.5,-.5,-1,-1,.5,-.5,0,0,.5,-.5,1,-1,.5,.5,0,0,.5,.5,1,1,-.5,.5,0,0,-.5,.5,-1,1,-.5,-.5,0,0,-.5,-.5,-1,-1],_V:t.gl.TRIANGLE_STRIP})},ev=(t,i=0)=>{const s=.05,e=[a(-.5,-.05),a(.5,-.05),a(.5,s),a(.5,s),a(-.5,s),a(-.5,-.05),a(-.05,-.5),a(s,-.5),a(s,-.05),a(s,-.05),a(-.05,-.05),a(-.05,-.5),a(-.05,.5),a(s,.5),a(s,s),a(s,s),a(-.05,s),a(-.05,.5)];return new iv(t,e,t.gl.TRIANGLES,i,{yM:[-.05,.5,0,0,-.05,.5,-1,1,s,.5,0,0,s,.5,1,1,s,s,0,0,s,s,1,1,.5,s,0,0,.5,s,1,1,.5,-.05,0,0,.5,-.05,1,-1,s,-.05,0,0,s,-.05,1,-1,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,-.05,0,0,-.05,-.05,-1,-1,-.5,-.05,0,0,-.5,-.05,-1,-1,-.5,s,0,0,-.5,s,-1,1,-.05,s,0,0,-.05,s,-1,1,-.05,.5,0,0,-.05,.5,-1,1],_V:t.gl.TRIANGLE_STRIP})},rv=(t,i,s)=>{if(pr(t))return rv(exports.PointShape.Square,i,s);let e=i.NR.DE.get(t);if(t===exports.PointShape.Circle||t===exports.PointShape.HollowCircle){const r=s<=3?4:s<=5?8:s<=10?16:24;return t===exports.PointShape.Circle?(e=i.NR.EE.get(r)||((t,i,s=0)=>{const e=2*Math.PI/i,r=[],h=[];r.push({x:0,y:0});for(let t=0;t<=i;t+=1){const i=t*e,s=Math.cos(i),n=Math.sin(i),o=.5*s,a=.5*n;r.push({x:o,y:a}),h.push(o,a,0,0,o,a,s,n)}return new iv(t,r,t.gl.TRIANGLE_FAN,s,{yM:h,_V:t.gl.TRIANGLE_STRIP})})(i,r),i.NR.EE.set(r,e),e):(e=i.NR.RE.get(r)||((t,i,s=0)=>{const e=[],r=2*Math.PI/i;for(let t=0;t<=i;t+=1){const i=t*r,s=Math.cos(i),h=Math.sin(i);e.push({x:.5*s,y:.5*h}),e.push({x:.3*s,y:.3*h})}return new iv(t,e,t.gl.TRIANGLE_STRIP,s,void 0)})(i,r),i.NR.RE.set(r,e),e)}if(!e){switch(t){case exports.PointShape.Triangle:e=((t,i=0)=>{const s=[{x:-.5773502691892515,y:.3333333333333333},{x:0,y:-.6666666666666666},{x:.5773502691892515,y:.3333333333333333}];return new iv(t,s,t.gl.TRIANGLES,i,{yM:[s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y,s[1].x,s[1].y,0,0,s[1].x,s[1].y,2*s[1].x,2*s[1].y,s[2].x,s[2].y,0,0,s[2].x,s[2].y,2*s[2].x,2*s[2].y,s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y],_V:t.gl.TRIANGLE_STRIP})})(i);break;case exports.PointShape.Square:e=sv(i);break;case exports.PointShape.Plus:e=ev(i);break;case exports.PointShape.Cross:e=ev(i,45);break;case exports.PointShape.Diamond:e=sv(i,45);break;case exports.PointShape.Arrow:e=((t,i=0)=>{const s=.05,e=[a(-.05,-.5),a(s,-.5),a(s,.45),a(s,.45),a(-.05,.45),a(-.05,-.5),a(-.5,0),a(-.4,0),a(0,.4),a(0,.4),a(0,.5),a(-.5,0),a(.5,0),a(.4,0),a(0,.4),a(0,.4),a(0,.5),a(.5,0)];return new iv(t,e,t.gl.TRIANGLES,i,{yM:[-.5,0,0,0,-.5,0,-2,-1,0,.5,0,0,0,.5,0,1,.5,0,0,0,.5,0,2,-1,.4,0,0,0,.4,0,0,-1,s,.355,0,0,s,.355,1,-2,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,.355,0,0,-.05,.355,-1,-2,-.4,0,0,0,-.4,0,0,-1,-.5,0,0,0,-.5,0,-2,-1],_V:t.gl.TRIANGLE_STRIP})})(i);break;case exports.PointShape.Star:e=((t,i=0)=>new iv(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i,{yM:[0,.5,0,0,0,.5,0,1,.1,.1,0,0,.1,.1,1,1,.5,.1,0,0,.5,.1,2,1,.2,-.1,0,0,.2,-.1,1,-1,.3,-.5,0,0,.3,-.5,1,-2,0,-.25,0,0,0,-.25,0,-1,-.3,-.5,0,0,-.3,-.5,-1,-2,-.2,-.1,0,0,-.2,-.1,-1,-1,-.5,.1,0,0,-.5,.1,-2,1,-.1,.1,0,0,-.1,.1,-1,1,0,.5,0,0,0,.5,0,1],_V:t.gl.TRIANGLE_STRIP}))(i);break;case exports.PointShape.Minus:e=((t,i=0)=>{const s=.05,e=[a(-.5,-.05),a(.5,-.05),a(.5,s),a(.5,s),a(-.5,s),a(-.5,-.05)];return new iv(t,e,t.gl.TRIANGLES,i,{yM:[-.5,-.05,0,0,-.5,-.05,-1,-1,.5,-.05,0,0,.5,-.05,1,-1,.5,s,0,0,.5,s,1,1,-.5,s,0,0,-.5,s,-1,1,-.5,-.05,0,0,-.5,-.05,-1,-1],_V:t.gl.TRIANGLE_STRIP})})(i);break;default:return $i(0,"LightningChart JS unidentified point shape")}i.NR.DE.set(t,e)}return e};class hv extends Ln{constructor(t,i,s,e){super(t,i,s,e,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.yG=ln.fillStyle,this.mG=g("bottom"),this.xG=ln.fillStyle,this.SG=Tt,this.bG=g(exports.PointShape.Circle),this.MG=g(5),this.wG=g(0),this._G=g(void 0),this.Dw=!0,this.kG={x:0,y:0}}Xw(t){this.mG.T()!==t&&this.mG.C(t)}Od(t){return this.yG=An(this.yG,t),this}Vw(){return this.yG}CG(){return gn(this.TG,this.yG)}FG(){return gn(this.IG,this.xG)}LG(){return this.SG!==this.PG}Rd(t){return this.xG=An(this.xG,t),kt(this.xG)&&(this.Vd(exports.PointShape.Square),this.Hd(1)),this}Ud(){return this.xG}Yd(t){return this.SG="function"==typeof t?t(this.SG):t,this}jd(){return this.SG}Vd(t){return this.bG.C(t),pr(this.bG.T())&&this.Hd(1),this}Nd(){return this.bG.T()}Hd(t){return this.MG.C(t),this}Nw(){return this.MG.T()}Gd(t){return this.wG.C(t),this}$d(){return this.wG.T()}YA(t){return this.kG=t,this}Gw(){return this.kG}Bw(t){return this._G.C(t),this}$w(){return this._G.T()}}class nv extends Up{constructor(t,i){super(t,i),this.eN=!1,this.rN={BG:!1,DG:0},this.nN=t instanceof Z?{type:"linear",scale:t}:{type:"unknown"},this.sN.wi("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.eN=!0)}))}EG(t,i,s){const e=null==t?void 0:t.Kc(i),r=null==e?void 0:e.sd,h=null==e?void 0:e.ed,n=null==t?void 0:t.Pc,o=null==t?void 0:t.Lc,a=null==t?void 0:t.Qc(i);if(!t||this.eN||!a||"linear"!==this.nN.type||!r||!h||void 0===n||void 0===o||!s){const t=this.rN.BG;return this.rN={BG:!1,DG:null!=n?n:0},{cpStateChanged:t,cpActive:!1}}const l=ze(a),u=t.gd(i),c=t.Ad(i),d=u?u[l]:void 0,f=c?c[l]:void 0;if(n<2||void 0===d||void 0===f||f===d){const t=this.rN.BG;return this.rN={BG:!1,DG:null!=n?n:0},{cpStateChanged:t,cpActive:!1}}const A=this.calculateAvgStepBetweenDataPoints(f,d,n),g=this.nN.scale,p=Math.abs(g.ni()[l]),v=p/A,y=Math.floor(.8*v),m=y*A,x=y>=4,S=this.rN.BG?this.rN.OG/p<1.5:void 0,b=this.rN.BG&&y>this.rN.zG?y/this.rN.zG>=2:void 0;let M;return!0===this.rN.BG?S?b&&(M={BG:!0,OG:m,zG:y,DG:n}):M=x?{BG:!0,OG:m,zG:y,DG:n}:{BG:!1,DG:n}:x&&(M={BG:!0,OG:m,zG:y,DG:n}),this.rN=M||{...this.rN,DG:n},!!M&&this.uN(),{cpStateChanged:!!M,cpActive:this.rN.BG}}VG(t,i){var s,e,r;const h=null==t?void 0:t.Kc(i),n=h.dataPattern,o=h.sd,a=h.ed,l=t.Bc,u=t.Pc,c=t.Lc,d=t.Vc;if(this.eN||!this.rN.BG||!o||!a||void 0===n)return;const f=ze(n),A=Ve(n),g="x"===f?o:a,p="x"===f?a:o,v=g.length,y="x"===f?this.ai.x:this.ai.y,m=this.rN.OG,x=Math.min(y.getInnerStart(),y.getInnerEnd()),S=Math.max(y.getInnerStart(),y.getInnerEnd()),b=Yn(x,S,g,l,u,c,Ve(n)?"progressive":"regressive",1);if(!b)return;const M=g[b.iFirstSampleDataArray];if(this.NG){if(this.NG.GG<b.iFirstSample){const t=Math.min(Math.floor((M-this.NG.Cl)/m),this.NG.$G);if(t>0)if(this.NG.$G-=t,this.NG.$G>0){this.NG.UG.splice(0,2*t),this.NG.YG.splice(0,2*t),this.NG.jG&&this.NG.jG.splice(0,2*t),this.NG.HG&&this.NG.HG.splice(0,2*t),this.NG.Cl+=t*m;const i=jn(this.NG.Cl,Math.max(l-1-v+1,0),l-1,A,(t=>g[Un(t,l,v)])),s=Un(i,l,v);this.NG.GG=g[s]>=this.NG.Cl?i:i+1}else this.NG=void 0}if(void 0!==(null===(s=this.NG)||void 0===s?void 0:s.WG)&&this.NG.WG>b.iLastSample){const t=g[b.iLastSampleDataArray],i=Math.min(Math.floor((this.NG.Cl+this.NG.$G*m-t)/m),this.NG.$G);if(i>0)if(this.NG.$G-=i,this.NG.$G>0){for(let t=0;t<2*i;t+=1)this.NG.UG.pop(),this.NG.YG.pop(),this.NG.jG&&this.NG.jG.pop(),this.NG.HG&&this.NG.HG.pop();const t=jn(this.NG.Cl+this.NG.$G*m,Math.max(l-1-v+1,0),l-1,A,(t=>g[Un(t,l,v)])),s=Un(t,l,v);this.NG.WG=g[s]<=this.NG.Cl+this.NG.$G*m?t:t-1}else this.NG=void 0}}const w=this.NG||{Cl:M,$G:0,UG:[],YG:[],jG:h.rd?[]:void 0,HG:h.od?[]:void 0,XG:h.nd?[]:void 0,ZG:h.hd?[]:void 0,GG:b.iFirstSample,WG:void 0},_=(t,i,s,e)=>{let r=Math.min(t,t+s*m),h=Math.max(t,t+s*m);const n=[];if(s<0&&r<x||s>0&&h>S)return n;let o=e,a=hs,u=hs,c=-1,f=rs,A=rs,y=-1,M=0;for(;o<=b.iLastSample&&o>=b.iFirstSample;){const e=o%v,b=g[e],_=p[e];if(d&&Number.isNaN(b))o+=i;else if(r<=b&&b<=h)M+=1,d&&Number.isNaN(_)||(_>u&&(a=b,u=_,c=o),_<A&&(f=b,A=_,y=o)),o+=i;else{if(M>0)a=a===hs?Number.NaN:a,u=u===hs?Number.NaN:u,f=f===rs?Number.NaN:f,A=A===rs?Number.NaN:A,c<y?(n.push({iFirst:c,iSecond:y}),i>0?(w.UG.push(a),w.YG.push(u),w.UG.push(f),w.YG.push(A)):(w.UG.unshift(f),w.YG.unshift(A),w.UG.unshift(a),w.YG.unshift(u))):(n.push({iFirst:y,iSecond:c}),i>0?(w.UG.push(f),w.YG.push(A),w.UG.push(a),w.YG.push(u)):(w.UG.unshift(a),w.YG.unshift(u),w.UG.unshift(f),w.YG.unshift(A)));else{const t=i>0?w.WG:w.GG;if(void 0===t)n.push({iFirst:0,iSecond:0}),i>0?(w.UG.push(Number.NaN),w.YG.push(Number.NaN),w.UG.push(Number.NaN),w.YG.push(Number.NaN)):(w.UG.unshift(Number.NaN),w.YG.unshift(Number.NaN),w.UG.unshift(Number.NaN),w.YG.unshift(Number.NaN));else{const s=Un(t,l,v),e=g[s],o=p[s],a=Wt((e+b)/2,r,h),u=Wt((a+b)/2,r,h),c=o+(a-e)/(b-e)*(_-o),d=o+(u-e)/(b-e)*(_-o);n.push({iFirst:t,iSecond:t}),i>0?(w.UG.push(a),w.YG.push(c),w.UG.push(u),w.YG.push(d)):(w.UG.unshift(u),w.YG.unshift(d),w.UG.unshift(a),w.YG.unshift(c))}}if(w.$G+=1,i>0?w.WG=o-1:(w.GG=o+1,w.Cl=s>0?h:r),r=Math.min(t+n.length*s*m,t+(n.length+1)*s*m),h=Math.max(t+n.length*s*m,t+(n.length+1)*s*m),M=0,a=hs,u=hs,c=-1,f=rs,A=rs,y=-1,s<0&&r<x||s>0&&h>S)break}}return n},k=_(w.Cl+(Ve(n)?1:-1)*w.$G*m,1,1*(Ve(n)?1:-1),void 0!==(null===(e=this.NG)||void 0===e?void 0:e.WG)?this.NG.WG+1:b.iFirstSample),C=_(w.Cl,-1,-1*(Ve(n)?1:-1),void 0!==(null===(r=this.NG)||void 0===r?void 0:r.GG)?this.NG.GG-1:b.iFirstSample);if(0===C.length&&0===k.length)return;const T=h.rd&&w.jG?[h.rd,w.jG]:void 0,F=h.od&&w.HG?[h.od,w.HG]:void 0,I=h.nd&&w.XG?[h.nd,w.XG]:void 0,L=h.hd&&w.ZG?[h.hd,w.ZG]:void 0;if(T||F||I||L){for(const t of k){const i=Un(t.iFirst,l,v),s=Un(t.iSecond,l,v);T&&T[1].push(T[0][i],T[0][s]),F&&F[1].push(F[0][i],F[0][s]),I&&I[1].push(I[0][i],I[0][s]),L&&L[1].push(L[0][i],L[0][s])}for(const t of C){const i=Un(t.iFirst,l,v),s=Un(t.iSecond,l,v);T&&T[1].unshift(T[0][s],T[0][i]),F&&F[1].unshift(F[0][s],F[0][i]),I&&I[1].unshift(I[0][s],I[0][i]),L&&L[1].unshift(L[0][s],L[0][i])}}return this.NG=w.$G>0?w:void 0,{JG:"x"===f?w.UG:w.YG,QG:"y"===f?w.UG:w.YG,iP:w.jG,KG:w.HG,Y:w.XG,_l:w.ZG}}uN(){this.NG=void 0}gN(){}}class ov extends hv{constructor(t,i,s,e){super(t,i,s,e),this.bD=new xp,this.PN=new nv(this.ai,this),this.Fz=br({lineStyleSolid:()=>lr(this.hc)&&this.hc,lineStyleDashed:()=>fr(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return fe(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return G(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return z(t)&&t},strokeFillIndividual:()=>{const t=this.hc.getFillStyle();return ge(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return ye(t)&&t},areaFillSolid:()=>fe(this.yG)&&this.yG,areaFillLinearGradient:()=>G(this.yG)&&this.yG,areaFillRadialGradient:()=>z(this.yG)&&this.yG,areaFillIndividual:()=>ge(this.yG)&&this.yG,areaFillPaletted:()=>ye(this.yG)&&this.yG,markerFillSolid:()=>fe(this.xG)&&this.xG,markerFillLinearGradient:()=>G(this.xG)&&this.xG,markerFillRadialGradient:()=>z(this.xG)&&this.xG,markerFillPaletted:()=>ye(this.xG)&&this.xG,markerFillIndividual:()=>ge(this.xG)&&this.xG,markerFillImage:()=>kt(this.xG)&&this.xG,markerShapeIcon:()=>{const t=this.bG.T();return pr(t)&&t},markerStrokeFillSolid:()=>{const t=this.SG.getFillStyle();return fe(t)&&t}}),this.Dd=g(void 0),this.qG=[],this.mu=!1,this.t$=[],this.i$=void 0,this.nG=(t,i,s)=>{var e;const r=null===(e=this.s$)||void 0===e?void 0:e.shapeIcon;let h=t,n=i;return r&&(h=r.kt().x,n=r.kt().y),fp(t,i,h*this.MG.T(),n*this.MG.T(),s)},this.e$=av(),this.bz=i,this.DV={type:"none"},this.ZB=t.Mz(),this.Sz=t,this.PV=this.ZB.mO}Ed(t,i){var s;return this.PN.uN(),this.r$=void 0,this.i$=void 0,t&&i?(this.Dd.C(Ji(t,this.Dd.T(),(()=>({change:t=>{this.qG.push({min:t.iDataStart,max:t.iDataEnd}),this.r$&&this.t$.length>1e3&&Date.now()-this.r$.h$>5e3&&(this.r$=void 0,this.t$.length=0),this.r$&&this.t$.push({min:t.iDataStart,max:t.iDataEnd})},clear:()=>{this.mu=!0,this.r$=void 0,this.i$=void 0,this.PN.uN()},loop:()=>{this.r$=void 0,this.t$.length=0}})))),this.Rw=i,this):(null===(s=this.Dd.T())||void 0===s||s.qi(),this.Dd.C(void 0),this.Rw=void 0,this)}hl(){var t;const i=null===(t=this.Dd.T())||void 0===t?void 0:t.ts,s=null==i?void 0:i.Qc(this.Rw);return s&&{jw:ze(s),Hw:()=>this.Qp()}}Qp(){var t,i,s,e,r,h,n,o,l,u,c,d,f,A,g,p,v,y,m,x,S,b,M,w,_,k,C,T,F,I,L,P,B;const D=null===(t=this.Dd.T())||void 0===t?void 0:t.ts,E=this.Dd.u,R=this.Rw,O=null==D?void 0:D.Kc(R),z=null==O?void 0:O.sd,V=null==O?void 0:O.ed;if(!(D&&z&&V&&R))return;const N=O.dataPattern,G=N&&this.ai[ze(N)],$=O.od,U=O.rd,Y=O.nd,j=O.hd,H=D.Bc,W=D.Pc,X=D.Lc,Z=E||this.Al()||this.CG()||this.FG()||this.LG()||this.mG.u,J=this.Fz.lineStyleSolid(Z),Q=this.Fz.lineStyleDashed(Z),K=J||Q,q=K&&K.getThickness(),tt=this.Fz.strokeFillSolid(Z),it=this.Fz.strokeFillLinearGradient(Z),st=this.Fz.strokeFillRadialGradient(Z),et=this.Fz.strokeFillIndividual(Z),rt=this.Fz.strokeFillPaletted(Z),ht=tt||it||st||et||rt,nt=this.Fz.areaFillSolid(Z),ot=this.Fz.areaFillLinearGradient(Z),at=this.Fz.areaFillRadialGradient(Z),lt=this.Fz.areaFillIndividual(Z),ut=this.Fz.areaFillPaletted(Z),ct=nt||ot||at||lt||ut,dt=this.Fz.markerFillSolid(Z),ft=this.Fz.markerFillLinearGradient(Z),At=this.Fz.markerFillRadialGradient(Z),gt=this.Fz.markerFillPaletted(Z),pt=this.Fz.markerFillIndividual(Z),vt=this.Fz.markerFillImage(Z),yt=dt||ft||At||gt||pt||vt,mt=this.Fz.markerStrokeFillSolid(Z),xt=this.bG.T(),St=this.bG.u,bt=this.Fz.markerShapeIcon(St),Mt=this.MG.T(),wt=this.MG.u,_t=this._G.u,kt=this.qG.length>0||_t,Ct=this.mu||E,Tt=Ct?[D.dd()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.qG),Ft=!!Q,It=this.ui.T(),Lt=this.ui.u;E&&Object.entries(R).forEach((([t,i])=>{if(D.Uc&&!D.Uc[i])throw new Error(`LightningChart JS data supply error - key ${i} does not exist in data set. Mapped to '${t}'`)})),(E||Z)&&((rt&&"value"===rt.lookUpProperty||ut&&"value"===ut.lookUpProperty||gt&&"value"===gt.lookUpProperty)&&void 0===R.lookupValue&&Nt.console.warn('LightningChart JS warning - using PalettedFill with lookUpProperty=value, but there is no data mapping for "lookupValue"'),(et||lt||pt)&&void 0===R.color&&Nt.console.warn('LightningChart JS warning - using IndividualPointFill, but there is no data mapping for "color"'));const Pt=this.Dw&&(!!K||!!ct),{cpStateChanged:Bt,cpActive:Dt}=this.PN.EG(D,R,Pt);if(N&&Dt&&G&&(Bt||Ct||kt||G.rt||Z)){const t=this.PN.VG(D,R);if(t){const a=!(Bt||Ct||Z||E);this.n$=lv(this.ZB,[t.JG,t.QG],t.iP,t.KG,t.Y,t._l,Ft,this.n$,a,N,1e3,this.ai.zt(),(t=>fi(t,this.ai.zt())),D.Vc),this.o$={min:rs,max:hs};const u="x"===ze(N)?t.QG:t.JG,c=u.length;for(let t=0;t<c;t+=1){const i=u[t];D.Vc&&Number.isNaN(i)||(this.o$.min=Math.min(this.o$.min,i),this.o$.max=Math.max(this.o$.max,i))}(null===(i=this.a$)||void 0===i?void 0:i.bufferX)!==this.n$.bufferX&&(this.ZB.BR(null===(s=this.a$)||void 0===s?void 0:s.bufferX),this.ZB.BR(null===(e=this.a$)||void 0===e?void 0:e.bufferY),this.ZB.BR(null===(r=this.a$)||void 0===r?void 0:r.bufferColors),this.ZB.BR(null===(h=this.a$)||void 0===h?void 0:h.bufferLengthSoFar),this.ZB.BR(null===(n=this.a$)||void 0===n?void 0:n.bufferRotations),this.ZB.BR(null===(o=this.a$)||void 0===o?void 0:o.bufferLookupValues),this.ZB.BR(null===(l=this.a$)||void 0===l?void 0:l.bufferSizes)),this.a$=void 0}}if(N&&G&&!Dt){if(Bt||Ct||kt||G.rt||_t||Z){const t=Math.min(G.getInnerStart(),G.getInnerEnd()),i=Math.max(G.getInnerStart(),G.getInnerEnd()),s="x"===ze(N)?z:V,e="x"===ze(N)?V:z,r=Yn(t,i,s,H,W,X,Ve(N)?"progressive":"regressive",1);if(!this.l$||(null==r?void 0:r.iFirstSample)!==this.l$.iFirstSample||r.iLastSample!==this.l$.iLastSample||Ct){const t=this.e$(O,this.l$,r,Ct||Bt,s,e,D.Vc);this.o$=t.visibleBoundaries,this.u$=t.avgPointGap}if(this.l$=r,void 0===r)this.ZB.BR(null===(u=this.n$)||void 0===u?void 0:u.bufferX),this.ZB.BR(null===(c=this.n$)||void 0===c?void 0:c.bufferY),this.ZB.BR(null===(d=this.n$)||void 0===d?void 0:d.bufferColors),this.ZB.BR(null===(f=this.n$)||void 0===f?void 0:f.bufferLengthSoFar),this.ZB.BR(null===(A=this.n$)||void 0===A?void 0:A.bufferRotations),this.ZB.BR(null===(g=this.n$)||void 0===g?void 0:g.bufferLookupValues),this.ZB.BR(null===(p=this.n$)||void 0===p?void 0:p.bufferSizes),this.n$=void 0,this.ZB.BR(null===(v=this.a$)||void 0===v?void 0:v.bufferX),this.ZB.BR(null===(y=this.a$)||void 0===y?void 0:y.bufferY),this.ZB.BR(null===(m=this.a$)||void 0===m?void 0:m.bufferColors),this.ZB.BR(null===(x=this.a$)||void 0===x?void 0:x.bufferLengthSoFar),this.ZB.BR(null===(S=this.a$)||void 0===S?void 0:S.bufferRotations),this.ZB.BR(null===(b=this.a$)||void 0===b?void 0:b.bufferLookupValues),this.ZB.BR(null===(M=this.a$)||void 0===M?void 0:M.bufferSizes),this.a$=void 0,this.c$=r;else if(Bt||Ct||!this.c$||r.iFirstSample<this.c$.iFirstSample||r.iLastSample>this.c$.iLastSample||Z){const t=Nn({srcLoopArray:z,dataRanges:r.dataRanges,NewArray:O.qc}),i=Nn({srcLoopArray:V,dataRanges:r.dataRanges,NewArray:O.td}),s=U?Nn({srcLoopArray:U,dataRanges:r.dataRanges,NewArray:Uint32Array}):void 0,e=$?Nn({srcLoopArray:$,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,h=Y?Nn({srcLoopArray:Y,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,n=j?Nn({srcLoopArray:j,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,o=!(Bt||Ct||Z||E),l=Pt||this.wi("ApplicationType",(t=>"InternalUI"===t.type))?1e3:Math.min(null!==(w=D.getMaxSampleCount())&&void 0!==w?w:1e6,1e6);this.a$=lv(this.ZB,[t,i],s,e,h,n,Ft,this.a$,o,N,l,this.ai.zt(),(t=>fi(t,this.ai.zt())),D.Vc);let u=t,c=i,d=s,f=e;const A=this._G.T();if(A){const r="spline"===A.type?((t,i,s)=>{const e=ze(s),r="x"===e?t.xValues:t.yValues,h="x"===e?t.yValues:t.xValues,{lookupValues:n,colors:o}=t;if(r.length<=2)return{xValues:Array.from(t.xValues),yValues:Array.from(t.yValues),lookupValues:n?Array.from(n):void 0,colors:o?Array.from(o):void 0};const l=((t,i)=>{const s=1e-5,e=t.length-1,r=Array(e);if(e>1){let h=a(0,0),n=a(0,0),o=a(0,0),l=Fs(Ds({x:t.elementAt(1),y:i.elementAt(1)},{x:t.elementAt(0),y:i.elementAt(0)}));const u=3;let c=0,d=0;for(let f=0;f<e;f+=1){const A=t.elementAt(f),g=t.elementAt(f+1),p=i.elementAt(f),v=i.elementAt(f+1),y=Array(4);y[0]={x:A,y:p},y[1]={x:A,y:p},y[3]={x:g,y:v},y[2]={x:g,y:v},o=l,h=n,Number.isNaN(h.y)&&(h=a(0,0));const m=f+2<i.length?i.elementAt(f+2):Number.NaN;if(f+1<e&&!Number.isNaN(m)){const i=t.elementAt(f+2);l=i===g&&m===v?a(0,0):Fs(Ds({x:i,y:m},{x:g,y:v})),n=Fs(Bs(o,l))}else n=a(0,0);if(v===p)c=0,d=0;else{const t=g-A;c=Math.abs(h.x)>s?Math.abs(t/(u*h.x)):1,d=Math.abs(n.x)>s?Math.abs(t/(u*n.x)):1}y[1]=Bs(Ps(h,c),y[1]),y[2]=Ds(y[2],Ps(n,d)),r[f]=y}}return r.length>0?r:[]})(r,h),u=l.length,c=[],d=[],f=[],A=[];for(let t=0;t<u;t+=1){const s=l[t];for(let t=0;t<i;t+=1){const e=t/(i-1),r=e*e,h=r*e,n=1-e,o=n*n,a=o*n;c.push(a*s[0].x+3*e*o*s[1].x+3*r*n*s[2].x+h*s[3].x),d.push(a*s[0].y+3*e*o*s[1].y+3*r*n*s[2].y+h*s[3].y)}}if(n)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=n.elementAt(s);A[t]=e}if(o)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=o.elementAt(s);f[t]=e}return{xValues:"x"===e?c:d,yValues:"x"===e?d:c,lookupValues:n?A:void 0,colors:o?f:void 0}})({xValues:t,yValues:i,lookupValues:e,colors:s},A.resolution||20,N):"step"===A.type?((t,i,s)=>{const{lookupValues:e,colors:r}=t,h=ze(s),n="x"===h?t.xValues:t.yValues,o="x"===h?t.yValues:t.xValues,a=[],l=[],u=[],c=[],d=n.length,f="before"===i?0:"after"===i?1:.5;if(d>0){let t=0,i=n.elementAt(0),s=o.elementAt(0);a[t]=i,l[t]=s,t+=1;for(let e=1;e<d;e+=1){const r=n.elementAt(e),h=o.elementAt(e);if(f<=0)a[t]=i,l[t]=h,t+=1;else{const e=i*(1-f)+r*f;a[t]=e,l[t]=s,t+=1,a[t]=e,l[t]=h,t+=1}a[t]=r,l[t]=h,t+=1,i=r,s=h}}if(e)if("before"===i){c[0]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[2*t-1]=i,c[2*t]=i}}else if("middle"===i||"after"===i){c[0]=e.elementAt(0),c[1]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[3*t-1]=i,c[3*t]=i,c[3*t+1]=i}}if(r)if("before"===i){u[0]=r.elementAt(0);for(let t=1;t<d;t+=1){const i=r.elementAt(t);u[2*t-1]=i,u[2*t]=i}}else if("middle"===i||"after"===i){u[0]=r.elementAt(0),u[1]=r.elementAt(0);for(let t=1;t<d;t+=1){const i=r.elementAt(t);u[3*t-1]=i,u[3*t]=i,u[3*t+1]=i}}return{xValues:"x"===h?a:l,yValues:"x"===h?l:a,lookupValues:e?c:void 0,colors:r?u:void 0}})({xValues:t,yValues:i,lookupValues:e,colors:s},null!==(_=A.step)&&void 0!==_?_:"middle",N):void 0;u=r?r.xValues:u,c=r?r.yValues:c,d=(null==r?void 0:r.colors)?r.colors:d,f=(null==r?void 0:r.lookupValues)?r.lookupValues:f}this.n$=u===t&&c===i?this.a$:lv(this.ZB,[u,c],d,f,void 0,void 0,Ft,(null===(k=this.n$)||void 0===k?void 0:k.bufferX)===this.a$.bufferX?void 0:this.n$,!(!o||_t||A),N,1e3,this.ai.zt(),(t=>fi(t,this.ai.zt())),D.Vc),this.c$=r}}}else this.l$=void 0;if(!N&&(Ct||kt||Z)){if(!this.n$||this.n$.bufferSize<D.Pc||Ft){const t=void 0!==D.Wc?D.Wc:D.Pc;let i,s=0,e=0;if(Ft){const r=uv(z,V,z[0],V[0],0,0,D.Vc);i=this.ZB.KR(2*t,r[0],null===(C=this.n$)||void 0===C?void 0:C.bufferLengthSoFar,Float32Array),s=r[1],e=r[2]}this.n$={bufferX:this.ZB.KR(t*(this.ai.zt()?2:1),fi(z,this.ai.zt()),null===(T=this.n$)||void 0===T?void 0:T.bufferX),bufferY:this.ZB.KR(t*(this.ai.zt()?2:1),fi(V,this.ai.zt()),null===(F=this.n$)||void 0===F?void 0:F.bufferY),bufferColors:U?this.ZB.KR(t,U,null===(I=this.n$)||void 0===I?void 0:I.bufferColors,Uint32Array):void 0,bufferLookupValues:$?this.ZB.KR(t,$,null===(L=this.n$)||void 0===L?void 0:L.bufferLookupValues,Float32Array):void 0,bufferSizes:Y?this.ZB.KR(t,Y,null===(P=this.n$)||void 0===P?void 0:P.bufferSizes,Float32Array):void 0,bufferRotations:j?this.ZB.KR(t,j,null===(B=this.n$)||void 0===B?void 0:B.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:D.Pc}}else{const t=this.n$.bufferX,i=this.n$.bufferY;Tt.forEach((s=>{var e,r,h,n;const o=z.subarray(s.min,s.max+1),a=V.subarray(s.min,s.max+1);if(this.ZB.qR(t,s.min*(this.ai.zt()?2:1),fi(o,this.ai.zt())),this.ZB.qR(i,s.min*(this.ai.zt()?2:1),fi(a,this.ai.zt())),U&&(null===(e=this.n$)||void 0===e?void 0:e.bufferColors)){const t=U.subarray(s.min,s.max+1);this.ZB.qR(this.n$.bufferColors,s.min,t,Uint32Array)}if($&&(null===(r=this.n$)||void 0===r?void 0:r.bufferLookupValues)){const t=$.subarray(s.min,s.max+1);this.ZB.qR(this.n$.bufferLookupValues,s.min,t,Float32Array)}if(j&&(null===(h=this.n$)||void 0===h?void 0:h.bufferRotations)){const t=j.subarray(s.min,s.max+1);this.ZB.qR(this.n$.bufferRotations,s.min,t,Float32Array)}if(Y&&(null===(n=this.n$)||void 0===n?void 0:n.bufferSizes)){const t=Y.subarray(s.min,s.max+1);this.ZB.qR(this.n$.bufferSizes,s.min,t,Float32Array)}})),this.n$.valueCount=D.Pc}this.a$=this.n$}if(Z||wt||St||Lt){if(ht&&K&&!1!==q){const t=-1===q?"primitive":"triangulated",i=rt?["lookup",rt.lookUpProperty,rt.lut]:et?"attribute":it?["gradient",it]:st?["gradient",st]:"uniform";this.DV="primitive"===t?{type:t,shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0}),Q&&Tg.StippleTexture),lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:rt,mousePickingShader:It&&this.ZB.SE(Tg["2D"],Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0}),Q&&Tg.StippleTexture,Tg.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:i}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0}),this.PV?Tg.AliasedEdge:void 0,Q&&Tg.StippleTextureInstanced),geometry:Op(this.ZB,q),thickness:q,lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:rt,mousePickingShader:It&&this.ZB.SE(Tg["2D"],Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0}),Q&&Tg.StippleTextureInstanced,Tg.MousePicking())}:{type:"none"}}else this.DV={type:"none"};if(this.d$=ct?{shader:this.ZB.SE(Tg["2D"],ut&&Tg.Color({dataType:["lookup",ut.lookUpProperty,ut.lut]}),lt&&Tg.Color({dataType:"attribute"}),nt&&Tg.Color({dataType:"uniform"}),ot&&Tg.Color({dataType:["gradient",ot]}),at&&Tg.Color({dataType:["gradient",at]}),Tg.Area2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0,fill:this.mG.T()})),geometry:tv(this.ZB),fillStyleSolid:nt,fillStyleLinearGradient:ot,fillStyleRadialGradient:at,fillStyleIndividual:lt,fillStylePaletted:ut,mousePickingShader:It&&this.ZB.SE(Tg["2D"],Tg.Area2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0,fill:this.mG.T()}),Tg.MousePicking())}:void 0,yt){const t=!(!vt&&!bt),i=Mt>1||t,s=Y?"attribute":"uniform",e=!i&&Tg.PointSize("uniform"),r=Tg.VertexLocation({offsets:[i&&!t?{directionVar:iv.gG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:iv.gG,dataType:s,sizeUnit:"scale",rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:void 0],axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0});this.s$={shader:this.ZB.SE(Tg["2D"],e,r,dt&&Tg.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!bt}),ft&&Tg.Color({dataType:["gradient",ft],overrideOpacity:!0,maskTexture:!!bt}),At&&Tg.Color({dataType:["gradient",At],overrideOpacity:!0,maskTexture:!!bt}),gt&&Tg.Color({dataType:["lookup",gt.getLookUpProperty(),gt.getPalette()],overrideOpacity:!0,maskTexture:!!bt}),pt&&Tg.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!bt}),vt&&Tg.Color({dataType:["image",vt],overrideOpacity:!0,maskTexture:!!bt})),geometry:rv(xt,this.ZB,"uniform"===s?Mt:25),fillStyleSolid:dt,fillStyleLinearGradient:ft,fillStyleRadialGradient:At,fillStylePaletted:gt,fillStyleIndividual:pt,fillStyleImage:vt,mousePickingShader:It&&this.ZB.SE(Tg["2D"],e,r,Tg.MousePicking({useVertexId:!i})),shapeIcon:bt,pointSizeAsScale:t,instancedRendering:i,borders:mt&&!t&&{shader:this.ZB.SE(Tg["2D"],e,Tg.VertexLocation({offsets:[i&&!t?{directionVar:iv.gG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:iv.gG,dataType:s,sizeUnit:"scale",rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:void 0,{directionVar:iv.vG,dataType:"uniform",sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"}}],axisWorldTranslation:xr(this.ai),normalSource:void 0,splitPosAttribute:!0}),Tg.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!bt})),fillStyleSolid:mt}}}else this.s$=void 0}if((void 0===this.i$||kt)&&$&&(wr(rt)||wr(ut)||wr(gt))){const t=this.i$?Tt:[D.dd()];let i=this.i$?this.i$.max:hs,s=this.i$?this.i$.min:rs;const e=$;t.forEach((t=>{for(let r=t.min;r<=t.max;r+=1){const t=e[r];s=t<s?t:s,i=t>i?t:i}})),this.i$={min:s,max:i}}this.hG=this.ZB.QO(this,this.hG,vt,bt,wt,this.nG),this.RV=Q?this.ZB.HO(Q.getPattern()):void 0,this.lc(this.hc),this.TG=this.yG,this.IG=this.xG,this.PG=this.SG,this.bG.u=!1,this.MG.u=!1,this.qG.length=0,this.mu=!1,this._G.u=!1,this.Dd.u=!1,this.ui.u=!1,this.mG.u=!1}Nh(){this.Qp();const t=this.Fz.strokeFillLinearGradient(!1),i=this.Fz.strokeFillRadialGradient(!1),s=this.Fz.areaFillLinearGradient(!1),e=this.Fz.areaFillRadialGradient(!1),r=this.Fz.markerFillLinearGradient(!1),h=this.Fz.markerFillRadialGradient(!1);if(this.bD.FR(this.ai),s||e){let t;const i=this.mG.T();t=fn("bottom"===i||"top"===i?{min:{x:this.Hi(!1),y:Math.min(this.ai.y.getInnerStart(),this.ai.y.getInnerEnd(),this.Xi(!1),this.Zi(!1))},max:{x:this.Wi(!1),y:Math.max(this.ai.y.getInnerStart(),this.ai.y.getInnerEnd(),this.Xi(!1),this.Zi(!1))}}:{min:{x:Math.min(this.ai.x.getInnerStart(),this.ai.x.getInnerEnd(),this.Hi(!1),this.Wi(!1)),y:this.Xi(!1)},max:{x:Math.max(this.ai.x.getInnerStart(),this.ai.x.getInnerEnd(),this.Hi(!1),this.Wi(!1)),y:this.Zi(!1)}},{x:this.uu()/2,y:this.cu()/2},this.ai),this.f$=this.ZB.sz(s,this,t),this.A$=this.ZB.ez(e,this,t)}if(t||i||r||h){const s=fn({min:{x:this.Hi(!1),y:this.Xi(!1)},max:{x:this.Wi(!1),y:this.Zi(!1)}},{x:this.uu()/2,y:this.cu()/2},this.ai);this.g$=this.ZB.sz(t,this,s),this.p$=this.ZB.ez(i,this,s),this.v$=this.ZB.sz(r,this,s),this.y$=this.ZB.ez(h,this,s)}return this}wc(t,i){var s,e,r,h,n,o,a,l,u,c,d,f,A,g,p,v,y,m,x;const S=this.ZB.gl,b=null===(s=this.n$)||void 0===s?void 0:s.bufferX,M=null===(e=this.n$)||void 0===e?void 0:e.bufferY,w=null===(r=this.n$)||void 0===r?void 0:r.bufferColors,_=null===(h=this.n$)||void 0===h?void 0:h.bufferLookupValues,k=null===(n=this.n$)||void 0===n?void 0:n.valueCount,C=null===(o=this.a$)||void 0===o?void 0:o.valueCount,T=null===(a=this.Dd.T())||void 0===a?void 0:a.ts,F=null==T?void 0:T.Qc(this.Rw),I=Math.max((null===(l=this.n$)||void 0===l?void 0:l.valueCount)||0,(null===(u=this.a$)||void 0===u?void 0:u.valueCount)||0);if(!b||!M||!T)return{};const L=(i,s,e)=>{if(Np(this.ZB,i,this.ai.zt(),b,"aLocation","X",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),Np(this.ZB,i,this.ai.zt(),M,"aLocation","Y",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),s&&1!==t){if(!w)return!1;Np(this.ZB,i,!1,w,"aColor","",4,!0,S.UNSIGNED_BYTE,1,void 0)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!_)return!1;Np(this.ZB,i,!1,_,"aLookupValue","",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}return!0},P=1===t?null===(c=this.d$)||void 0===c?void 0:c.mousePickingShader:null===(d=this.d$)||void 0===d?void 0:d.shader;if(this.d$&&P&&void 0!==k&&k>0&&F&&2!==t){const s=this.d$;this.ZB.Kc(P).SR(P,((e,r,h,n)=>!!this.ZB.qO(h,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:1===t?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStylePaletted:s.fillStylePaletted,linearGradientInfo:this.f$,radialGradientInfo:this.A$,lookupValueRange:s.fillStylePaletted?Mr(s.fillStylePaletted,this,this.i$):void 0,lookupValueBuffer:null})&&!!L(h,s.fillStyleIndividual,s.fillStylePaletted)&&(null==s||s.geometry.Kc(h).Nk(k-1),!0)))}const B="none"===this.DV.type?void 0:1===t?this.DV.mousePickingShader:this.DV.shader;if("none"!==this.DV.type&&B&&void 0!==k&&k>0){const s=this.DV;this.ZB.Kc(B).SR(B,((e,r,h,n)=>{var o,a;if(!this.n$)return!1;if(!this.ZB.qO(h,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:1===t&&"triangulated"===s.type?I:void 0,useVertexID:1===t&&"primitive"===s.type?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStylePaletted:s.fillStylePaletted,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStyleIndividual:s.fillStyleIndividual,linearGradientInfo:this.g$,radialGradientInfo:this.p$,lookupValueRange:s.fillStylePaletted?Mr(s.fillStylePaletted,this,this.i$):void 0,lookupValueBuffer:"primitive"===s.type?_:null,colorBuffer:"primitive"===s.type?w:null,coordsX:"primitive"===s.type?b:void 0,coordsY:"primitive"===s.type?M:void 0,coordsHighPrecision:this.ai.zt()}))return!1;if(s.lineStyleDashed){if(!this.RV)return!1;this.ZB.MR(e("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(n("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(e("uStippleScale"),s.lineStyleDashed.getPatternScale()).wR(e("uStippleTexture"),this.RV.WO,1)}if("primitive"===s.type){if(s.lineStyleDashed){if(!(null===(o=this.n$)||void 0===o?void 0:o.bufferLengthSoFar))return!1;this.ZB.PR(r("aLengthSoFar"),this.n$.bufferLengthSoFar)}Vp.IV(this.Sz,k)}else{if(!L(h,s.fillStyleIndividual,s.fillStylePaletted))return!1;if(s.lineStyleDashed){if(!(null===(a=this.n$)||void 0===a?void 0:a.bufferLengthSoFar))return!1;Np(this.ZB,h,!1,this.n$.bufferLengthSoFar,"aLengthSoFar","",2,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}zp.wc(this.Sz,s.geometry,h,this.PV&&1!==t,1===t,s.thickness,this.n$.valueCount-1)}return!0}))}const D=null===(f=this.a$)||void 0===f?void 0:f.bufferX,E=null===(A=this.a$)||void 0===A?void 0:A.bufferY,R=null===(g=this.a$)||void 0===g?void 0:g.bufferColors,O=null===(p=this.a$)||void 0===p?void 0:p.bufferLookupValues,z=null===(v=this.a$)||void 0===v?void 0:v.bufferSizes,V=null===(y=this.a$)||void 0===y?void 0:y.bufferRotations,N=1===t?null===(m=this.s$)||void 0===m?void 0:m.mousePickingShader:null===(x=this.s$)||void 0===x?void 0:x.shader,G=this.s$;let $=1;if(F&&(P||B)&&void 0!==this.u$&&!Number.isNaN(this.u$)){const t="x"===ze(F)?this.ai.x:this.ai.y,i=this.u$,s=t.getInnerInterval()/i,e=this.MG.T(),r=t.wt()/e/1,h=2*r;$=s<=r?1:Math.max(1-(s-r)/(h-r),0)}if(N&&G&&D&&E&&$>0&&void 0!==C&&C>0){const s=G,e=s.instancedRendering?1:0;if(G.borders&&0===t){const r=G.borders;this.ZB.Kc(r.shader).SR(r.shader,((h,n,o,a)=>{if(!this.ZB.qO(o,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:r.fillStyleSolid}))return!1;if(this.ai.zt()?this.ZB.bR(D,e,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).bR(E,e,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.ZB.aO(n("aPosX"),D,e).aO(n("aPosY"),E,e),this.ZB._R(h("uOpacity"),$),s.instancedRendering)if(V)this.ZB.aO(n("aRotDeg"),V,e)._R(h("uBaseRotDeg"),s.geometry.dG);else{const t=Ns(this.wG.T()+s.geometry.dG),i=Math.sin(t),e=Math.cos(t);this.ZB.MR(h("uRot"),[i,e])}return this.ZB.MR(a("uOffsetAlignment"),[-this.kG.x/2,-this.kG.y/2]),s.geometry.pG(o,z,C,this.MG.T(),s.instancedRendering,this.SG.getThickness())}))}this.ZB.Kc(N).SR(N,((r,h,n,o)=>{if(!this.a$)return!1;if(!this.ZB.qO(n,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:s.instancedRendering&&1===t?I:void 0,useVertexID:s.instancedRendering||1!==t?void 0:I,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,linearGradientInfo:this.v$,radialGradientInfo:this.y$,fillStylePaletted:s.fillStylePaletted,fillStyleIndividual:s.fillStyleIndividual,lookupValueRange:s.fillStylePaletted?Mr(s.fillStylePaletted,this,this.i$):void 0,lookupValueBuffer:O,lookupValueAttribDivisor:e,colorBuffer:R,colorAttribDivisor:e,fillStyleImage:s.fillStyleImage,texturedFillGLInfo:this.hG,texCoordAttribDivisor:0,maskTexture:s.shapeIcon&&this.hG,maskTextureCoordsAttribDivisor:0}))return!1;if(this.ai.zt()?this.ZB.bR(D,e,{location:h("aPos_highpartX"),size:1},{location:h("aPos_lowpartX"),size:1}).bR(E,e,{location:h("aPos_highpartY"),size:1},{location:h("aPos_lowpartY"),size:1}):this.ZB.aO(h("aPosX"),D,e).aO(h("aPosY"),E,e),1!==t&&this.ZB._R(r("uOpacity"),$),s.instancedRendering)if(V)this.ZB.aO(h("aRotDeg"),V,e)._R(r("uBaseRotDeg"),s.geometry.dG);else{const t=Ns(this.wG.T()+s.geometry.dG),i=Math.sin(t),e=Math.cos(t);this.ZB.MR(r("uRot"),[i,e])}return this.ZB.MR(o("uOffsetAlignment"),[-this.kG.x/2,-this.kG.y/2]),s.geometry.Nk(n,z,0,this.a$.valueCount,s.pointSizeAsScale&&this.hG?{scale:this.MG.T(),width:s.shapeIcon?s.shapeIcon.kt().x:this.hG.texture.YE,height:s.shapeIcon?s.shapeIcon.kt().y:this.hG.texture.jE}:this.MG.T(),s.instancedRendering),!0}))}return{idCount:I}}_i(){return this.i$}kc(t,i,s,e,r){var h;const n=null===(h=this.Dd.T())||void 0===h?void 0:h.ts;if(null==n?void 0:n.Qc(this.Rw))return{};const o=t-i;return{info:{dataPoint:null==n?void 0:n.vd(this.Rw,o)}}}dispose(){var t,i,s,e,r,h,n,o,a,l,u,c,d;return super.dispose(),this.ZB.BR(null===(t=this.n$)||void 0===t?void 0:t.bufferX),this.ZB.BR(null===(i=this.n$)||void 0===i?void 0:i.bufferY),this.ZB.BR(null===(s=this.n$)||void 0===s?void 0:s.bufferColors),this.ZB.BR(null===(e=this.n$)||void 0===e?void 0:e.bufferLookupValues),this.ZB.BR(null===(r=this.n$)||void 0===r?void 0:r.bufferRotations),this.ZB.BR(null===(h=this.n$)||void 0===h?void 0:h.bufferSizes),this.ZB.BR(null===(n=this.a$)||void 0===n?void 0:n.bufferX),this.ZB.BR(null===(o=this.a$)||void 0===o?void 0:o.bufferY),this.ZB.BR(null===(a=this.a$)||void 0===a?void 0:a.bufferColors),this.ZB.BR(null===(l=this.a$)||void 0===l?void 0:l.bufferLookupValues),this.ZB.BR(null===(u=this.a$)||void 0===u?void 0:u.bufferRotations),this.ZB.BR(null===(c=this.a$)||void 0===c?void 0:c.bufferSizes),this.DV={type:"none"},this.d$=void 0,this.s$=void 0,this.PN.uN(),null===(d=this.Dd.T())||void 0===d||d.qi(),this.n$=void 0,this.a$=void 0,this.g$=void 0,this.p$=void 0,this.f$=void 0,this.A$=void 0,this.v$=void 0,this.y$=void 0,this.ZB.KO(this,this.hG),this}_c(){return this.dispose(),this}m$(t){if(!this.Rw)return this.r$||ns;if(!this.r$){const i=t.ld(this.Rw);if(0===i.xValues.length)return ns;this.r$={min:{x:rs,y:rs},max:{x:hs,y:hs},h$:Date.now()};const s=i.xValues.length;for(let t=0;t<s;t+=1){const s=i.xValues[t],e=i.yValues[t];this.r$.min.x=s<this.r$.min.x?s:this.r$.min.x,this.r$.min.y=e<this.r$.min.y?e:this.r$.min.y,this.r$.max.x=s>this.r$.max.x?s:this.r$.max.x,this.r$.max.y=e>this.r$.max.y?e:this.r$.max.y}return this.t$.length=0,this.r$}const i=t.Kc(this.Rw),s=i.sd,e=i.ed;if(this.t$.length>0&&s&&e){for(const t of this.t$){for(let i=t.min;i<=t.max;i+=1){const t=s[i],r=e[i];this.r$.min.x=t<this.r$.min.x?t:this.r$.min.x,this.r$.min.y=r<this.r$.min.y?r:this.r$.min.y,this.r$.max.x=t>this.r$.max.x?t:this.r$.max.x,this.r$.max.y=r>this.r$.max.y?r:this.r$.max.y}this.t$.length=0}return this.r$}return this.r$}Wi(t=!0){var i,s,e,r,h;const n=null===(i=this.Dd.T())||void 0===i?void 0:i.ts;if(!n)return 0;const o=n.Qc(this.Rw);return"ProgressiveX"===o?(null===(s=n.gd(this.Rw))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=n.Ad(this.Rw))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(r=this.o$)||void 0===r?void 0:r.max)||0:"RegressiveY"===o&&t?(null===(h=this.o$)||void 0===h?void 0:h.max)||0:this.m$(n).max.x}Hi(t=!0){var i,s,e,r,h;const n=null===(i=this.Dd.T())||void 0===i?void 0:i.ts;if(!n)return 0;const o=n.Qc(this.Rw);return"ProgressiveX"===o?(null===(s=n.Ad(this.Rw))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=n.gd(this.Rw))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(r=this.o$)||void 0===r?void 0:r.min)||0:"RegressiveY"===o&&t?(null===(h=this.o$)||void 0===h?void 0:h.min)||0:this.m$(n).min.x}Zi(t=!0){var i,s,e,r,h;const n=null===(i=this.Dd.T())||void 0===i?void 0:i.ts;if(!n)return 0;const o=n.Qc(this.Rw);return"ProgressiveX"===o&&t?Zt(null===(s=this.o$)||void 0===s?void 0:s.max,0):"RegressiveX"===o&&t?Zt(null===(e=this.o$)||void 0===e?void 0:e.max,0):"ProgressiveY"===o?Zt(null===(r=n.gd(this.Rw))||void 0===r?void 0:r.y,0):"RegressiveY"===o?Zt(null===(h=n.Ad(this.Rw))||void 0===h?void 0:h.y,0):this.m$(n).max.y}Xi(t=!0){var i,s,e,r,h;const n=null===(i=this.Dd.T())||void 0===i?void 0:i.ts;if(!n)return 0;const o=n.Qc(this.Rw);return"ProgressiveX"===o&&t?Zt(null===(s=this.o$)||void 0===s?void 0:s.min,0):"RegressiveX"===o&&t?Zt(null===(e=this.o$)||void 0===e?void 0:e.min,0):"ProgressiveY"===o?Zt(null===(r=n.Ad(this.Rw))||void 0===r?void 0:r.y,0):"RegressiveY"===o?Zt(null===(h=n.gd(this.Rw))||void 0===h?void 0:h.y,0):this.m$(n).min.y}uu(){var t,i;let s=this.MG.T();this.hG&&(s=Math.max(this.hG.texture.YE,this.hG.texture.jE)*this.MG.T());const e=Boolean(null===(t=this.Rw)||void 0===t?void 0:t.size),r=Math.max(Yi(this.hc),e?25:s),h=null===(i=this.Dd.T())||void 0===i?void 0:i.ts.Qc(this.Rw);return!h||"ProgressiveX"!==h&&"RegressiveX"!==h?r:0}cu(){var t,i;let s=this.MG.T();this.hG&&(s=Math.max(this.hG.texture.YE,this.hG.texture.jE)*this.MG.T());const e=Boolean(null===(t=this.Rw)||void 0===t?void 0:t.size),r=Math.max(Yi(this.hc),e?25:s),h=null===(i=this.Dd.T())||void 0===i?void 0:i.ts.Qc(this.Rw);return!h||"ProgressiveY"!==h&&"RegressiveY"!==h?r:0}}const av=()=>{const t=1e3,i=(t,i,s,e,r)=>{const h={min:rs,max:hs};let n,o=0,a=0;for(let l=e;l<=r;l+=1){const e=l%t.length,r=t[e],u=i[e];s&&Number.isNaN(u)?n=void 0:(h.min=Math.min(h.min,u),h.max=Math.max(h.max,u),void 0!==n&&(o+=1,a+=Math.abs(r-n)),n=r)}return{visibleBoundaries:h,avgPointGap:a/o,sampleMin:e,sampleMax:r,finitePointPairCount:o}};let s;return(e,r,h,n,o,a,l)=>{if(!h)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};if(h.iLastSample-h.iFirstSample+1<2e3)return i(o,a,l,h.iFirstSample,h.iLastSample);n&&(s=void 0),s||(s={iFirst:h.iFirstSample,chunks:[]});let u=s.iFirst,c=s.iFirst+s.chunks.length*t-1;for(;;){const e=c+1,r=c+t;if(!(h.iLastSample>=r))break;{const t=i(o,a,l,e,r);s.chunks.push(t),c=r}}for(;;){const e=u-1,r=u-t;if(!(h.iFirstSample<=r))break;{const t=i(o,a,l,r,e);s.chunks.unshift(t),s.iFirst=r,u=r}}for(let i=0;i<s.chunks.length&&s.chunks[i].sampleMin<h.iFirstSample;i++)s.chunks.splice(i,1),s.iFirst+=t,i--;for(let t=s.chunks.length-1;t>=0&&s.chunks[t].sampleMax>h.iLastSample;t--)s.chunks.splice(t,1);if(0===s.chunks.length)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};const d={min:rs,max:hs},f=[];for(const t of s.chunks)d.min=Math.min(t.visibleBoundaries.min,d.min),d.max=Math.max(t.visibleBoundaries.max,d.max),f.push(t.avgPointGap);const A=i(o,a,l,h.iFirstSample,s.iFirst-1),g=i(o,a,l,s.chunks[s.chunks.length-1].sampleMax+1,h.iLastSample);return A.finitePointPairCount>0&&(d.min=Math.min(A.visibleBoundaries.min,d.min),d.max=Math.max(A.visibleBoundaries.max,d.max),f.push(A.avgPointGap)),g.finitePointPairCount>0&&(d.min=Math.min(g.visibleBoundaries.min,d.min),d.max=Math.max(g.visibleBoundaries.max,d.max),f.push(g.avgPointGap)),{visibleBoundaries:d,avgPointGap:f.reduce(((t,i)=>t+i/f.length),0)}}},lv=(t,i,s,e,r,h,n,o,a,l,u,c,d,f)=>{const A=ze(l),g=Ve(l),p=Array.isArray(i[0])?Nn(i[0]):i[0],v=Array.isArray(i[1])?Nn(i[1]):i[1],y=s&&Array.isArray(s)?Nn(s):s,m=e&&Array.isArray(e)?Nn(e):e,x=r&&Array.isArray(r)?Nn(r):r,S=h&&Array.isArray(h)?Nn(h):h,b=p.length,M=p.elementAt(0),w=p.elementAt(b-1),_=v.elementAt(0),k=v.elementAt(b-1),C=c?2:1;if(o&&a&&void 0!==o.firstX&&void 0!==o.lastX&&void 0!==o.firstY&&void 0!==o.lastY&&("ProgressiveX"===l&&M>=o.firstX||"RegressiveX"===l&&M<=o.firstX||"ProgressiveY"===l&&_>=o.firstY||"RegressiveY"===l&&_<=o.firstY)){const i="x"===A?p:v,s="x"===A?o.lastX:o.lastY,e=jn(s,0,b-1,g,(t=>i.elementAt(t)));if(i.elementAt(e)===s){const i=o.bufferSize-o.valueCount,s=e+1,r=b-s;if(0===r)return o;if(i>=r){const i=p.toArray(s,s+r-1),e=v.toArray(s,s+r-1);if(t.qR(o.bufferX,o.valueCount*C,d(i),Float32Array),t.qR(o.bufferY,o.valueCount*C,d(e),Float32Array),y&&o.bufferColors){const i=y.toArray(s,s+r-1);t.qR(o.bufferColors,o.valueCount,i,Uint32Array)}if(m&&o.bufferLookupValues){const i=m.toArray(s,s+r-1);t.qR(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(x&&o.bufferSizes){const i=x.toArray(s,s+r-1);t.qR(o.bufferSizes,o.valueCount,i,Float32Array)}if(S&&o.bufferRotations){const i=S.toArray(s,s+r-1);t.qR(o.bufferRotations,o.valueCount,i,Float32Array)}if(n&&o.bufferLengthSoFar){const[s,r,h]=uv(i,e,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY,f);t.qR(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=r,o.lengthSoFarY=h}return o.valueCount+=r,o.lastX=w,o.lastY=k,o}}}const T=p.toArray(0,b-1),F=v.toArray(0,b-1),I=b+u,L=t.KR(I*C,d(T),null==o?void 0:o.bufferX,Float32Array),P=t.KR(I*C,d(F),null==o?void 0:o.bufferY,Float32Array),B=y?t.KR(I,y.toArray(0,b-1),null==o?void 0:o.bufferColors,Uint32Array):void 0,D=m?t.KR(I,m.toArray(0,b-1),null==o?void 0:o.bufferLookupValues,Float32Array):void 0,E=x?t.KR(I,x.toArray(0,b-1),null==o?void 0:o.bufferSizes,Float32Array):void 0,R=S?t.KR(I,S.toArray(0,b-1),null==o?void 0:o.bufferRotations,Float32Array):void 0;let O,z=0,V=0;if(n){const i=uv(T,F,T[0],F[0],0,0,f);O=t.KR(2*I,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),z=i[1],V=i[2]}return{bufferX:L,bufferY:P,bufferColors:B,bufferLookupValues:D,bufferSizes:E,bufferRotations:R,bufferSize:I,bufferLengthSoFar:O,valueCount:b,firstX:M,lastX:w,firstY:_,lastY:k,lengthSoFarX:z,lengthSoFarY:V}},uv=(t,i,s,e,r,h,n)=>{const o=t.length,a=new Float32Array(2*o);if(0===o)return[a,0,0];let l=0,u=s,c=e,d=r,f=h;if(n)for(let s=0;s<o;s+=1){const e=t[s],r=i[s];Number.isNaN(e)||Number.isNaN(r)||Number.isNaN(u)||Number.isNaN(c)?(d=0,f=0,a[l]=0,a[l+1]=0,l+=2):(d+=Math.abs(u-e),f+=Math.abs(c-r),a[l]=d,a[l+1]=f,l+=2),u=e,c=r}else for(let s=0;s<o;s+=1){const e=t[s],r=i[s];d+=Math.abs(u-e),f+=Math.abs(c-r),a[l]=d,a[l+1]=f,l+=2,u=e,c=r}return[a,d,f]},cv={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>cv.multiply(t,cv.translation(i,s)),rotate:(t,i)=>cv.multiply(t,cv.rotation(i)),scale:(t,i,s)=>cv.multiply(t,cv.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],r=t[2],h=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],A=i[3],g=i[4],p=i[5],v=i[6],y=i[7],m=i[8];return[c*s+d*h+f*a,c*e+d*n+f*l,c*r+d*o+f*u,A*s+g*h+p*a,A*e+g*n+p*l,A*r+g*o+p*u,v*s+y*h+m*a,v*e+y*n+m*l,v*r+y*o+m*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class dv extends xn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.x$=[],this.bD=new xp,this.S$=[a(0,0),a(0,0),a(0,0),a(0,0)],this.b$=f(a(0,0),a(0,0)),this.M$=f(a(0,0),a(0,0)),this.w$=a(0,0),this._$=a(0,0),this.k$=a(0,0),this.C$=0,this.T$=0,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStyleRadialGradient:()=>z(this.Ze)&&this.Ze,fillStyleLinearGradient:()=>G(this.Ze)&&this.Ze}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i,this.UV=t.Da.za}Nh(){const t=this.dl(),i=this.cl(),s=this.ui.T();if(t){const t=this.ll(),e=this.Fz.fillStyleSolid(t),r=this.Fz.fillStyleRadialGradient(t),h=this.Fz.fillStyleLinearGradient(t),n=e||r||h,o=this.ZB,l=this.ZB.hR(),u=l!==this.T$;if(this.T$=l,this.bD.FR(this.ai),this.kl.u||u){this.F$&&this.F$.oD(this),this.font.C(en(this.kl.T(),l));const t=this.font.T();this.F$=this.ZB.kh(t.properties.family),this.F$.Kc(this)}const c=this.font.u||this.ml.u;if(c&&this.F$){const t=this.font.T();[this.I$,this.M$]=this.F$.lD(this.ml.T(),t,this.Sz.bi.isDark),this.x$.forEach((t=>{t.texCoordBuff&&o.BR(t.texCoordBuff),t.vertexBuff&&o.BR(t.vertexBuff)})),this.x$=this.I$.map((t=>({texCoordBuff:o.mR(t.texCoords,!1),texture:t.texture,info:t}))),this.kl.u=!1,this.font.u=!1,this.ml.u=!1}const d=this.ai.ei()||i,f=this.Ln.u||this.Ml.u||this.bl.u||this.wl.u||this.Gn.u||this.ot.u||c||d,A=this.Gn.T(),g=Ps(a(this.Ml.T()+1,this.bl.T()+1),.5);if(f&&this.I$&&(this.w$=a(-(A.left*l+this.M$.max.x-this.M$.min.x+A.right*l)*g.x,-(A.bottom*l+this.M$.max.y-this.M$.min.y+A.top*l)*g.y)),(f||d||this._l.u||this.ll())&&this.Ze!==ae){if(this.I$){const t=Bs(this.Ln.T(),this.wl.T()),i=q(t,this.ai,this.pi.ai),s=Ps(i,l);this.k$=s;const e=Ns(this._l.T());this.C$=e,c&&this.x$.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=o.mR(i.vertices,!0,t.vertexBuff))}));const r=this.ot.T(),h=[Bs(Cs(a((this.M$.min.x+(-r.left-A.left)*l+this.w$.x)/l,(this.M$.max.y+(r.top+A.top)*l+this.w$.y)/l),this.Cl,e),i),Bs(Cs(a((this.M$.max.x+(r.right+A.right)*l+this.w$.x)/l,(this.M$.max.y+(r.top+A.top)*l+this.w$.y)/l),this.Cl,e),i),Bs(Cs(a((this.M$.max.x+(r.right+A.right)*l+this.w$.x)/l,(this.M$.min.y+(-r.bottom-A.bottom)*l+this.w$.y)/l),this.Cl,e),i),Bs(Cs(a((this.M$.min.x+(-r.left-A.left)*l+this.w$.x)/l,(this.M$.min.y+(-r.bottom-A.bottom)*l+this.w$.y)/l),this.Cl,e),i)];this.S$=[q(h[0],this.pi.ai,this.ai),q(h[1],this.pi.ai,this.ai),q(h[2],this.pi.ai,this.ai),q(h[3],this.pi.ai,this.ai)];const n=Ss(h);this._$=a(-(n.max.x-n.min.x)*l*g.x-n.min.x*l+this.k$.x,-(n.max.y-n.min.y)*l*g.y-n.min.y*l+this.k$.y),this.Tr=Ds(n.max,n.min),this._$={x:this._$.x/l,y:this._$.y/l};const u=Ss(this.S$),d=this.ai.Qt(u.min,this._$),f=this.ai.Qt(u.max,this._$);this.b$=Ss([d,f]),this._$={x:this._$.x*l,y:this._$.y*l}}r?this.Rz=ap(this.b$,this.ai,r.getPosition(),r.getExtent(),r.getShape(),this.ZB.hR()):h?this.Oz=lp(this.b$,this.ai,h.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0)}this.ll()&&(this._D=n?this.ZB.SE(Tg["2D"],Tg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.UV}),Tg.Color({dataType:r?["gradient",r]:h?["gradient",h]:"uniform",maskTextureText:!0})):void 0),this.L$=!this.Nl||this.Ze===ae||e&&0===e.getColor().getA()?void 0:this.L$||this.ZB.SE(Tg["2D"],Tg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.UV}),Tg.Color({dataType:"uniform",maskTextureText:!0})),this.P$=s&&n?this.P$||this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.UV})):void 0,this.Ln.u=!1,this.Ml.u=!1,this.bl.u=!1,this.wl.u=!1,this._l.u=!1,this.fl(this.Ze)}return this.Tl=t,this}wc(t,i){if(this.xl){const t=Math.min(this.S$[0].x,this.S$[1].x),i=Math.max(this.S$[0].x,this.S$[1].x),s=Math.min(this.S$[0].y,this.S$[2].y),e=Math.max(this.S$[0].y,this.S$[2].y);this.Ws.qg();const r=Math.min(this.ai.x.$,this.ai.x.U),h=Math.max(this.ai.x.$,this.ai.x.U),n=Math.min(this.ai.y.$,this.ai.y.U),o=Math.max(this.ai.y.$,this.ai.y.U);if(!(t<=h&&r<=i&&s<=o&&n<=e))return{idCount:1}}if(this.dl()){const s=0===t?this.L$:void 0,e=this.Nl,r=1===t?this.P$:this._D;if(!r||0===this.x$.length)return{};const h=this.Fz.fillStyleSolid(!1),n=this.Fz.fillStyleRadialGradient(!1),o=this.Fz.fillStyleLinearGradient(!1),a=this.pi.qD(),l=a.x,u=a.y;let c=cv.projection(l,u,-1);const d=cv.translation(this.w$.x,this.w$.y),f=cv.translation(this._$.x,this._$.y);c=cv.translate(c,this.k$.x,this.k$.y),c=cv.multiply(c,f),c=cv.rotate(c,this.C$),c=cv.multiply(c,d),1===t&&(c=cv.scale(c,this.M$.max.x,this.M$.max.y)),s&&e&&(c=cv.translate(c,this.Sl.x,this.Sl.y),this.ZB.Kc(s).SR(s,((t,i,s,r)=>(this.ZB.WR(t("uMatrix"),c)._R(t("uIsHighlighted"),0).UI(t("uHighlightColorOffset"),T)._R(t("uRenderEffectMask"),0).UI(t("uColor"),e),this.UV&&this.ZB.MR(r("uViewportSizePx"),[a.x*this.ZB.hR(),a.y*this.ZB.hR()]),this.x$.forEach((s=>{this.ZB.PR(i("aPos"),s.vertexBuff).PR(i("aMaskTextureCoord"),s.texCoordBuff).wR(t("uMaskTexture"),s.texture,0).Nk(this.ZB.gl.TRIANGLES,s.vertexBuffLen)})),!0))),c=cv.translate(c,-this.Sl.x,-this.Sl.y)),this.ZB.Kc(r).SR(r,((s,e,r,l)=>{if(this.ZB.WR(s("uMatrix"),c)._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),this.UV&&this.ZB.MR(l("uViewportSizePx"),[a.x*this.ZB.hR(),a.y*this.ZB.hR()]),1===t)this.ZB.ZR(s("uFirstId"),i).UO(r,1);else if(h)this.ZB.UI(s("uColor"),h.getColor());else if(n&&this.Rz){this.ZB.MR(s("uCenter"),this.Rz.center).MR(s("uDistance"),this.Rz.distance).LR(s("uBounds"),this.Rz.bounds)._R(s("uAspect"),this.Rz.aspectRatio);const t=n.getColorStops();for(let i=0;i<t.length;i+=1)this.ZB.UI(s(`color_${i}`),t[i].color)._R(s(`stop_${i}`),t[i].offset)}else if(o&&this.Oz){this.ZB.MR(s("uStartPoint"),this.Oz.startPoint).MR(s("uEndPoint"),this.Oz.endPoint).LR(s("uBounds"),this.Oz.bounds);const t=o.getColorStops();for(let i=0;i<t.length;i+=1)this.ZB.UI(s(`color_${i}`),t[i].color)._R(s(`stop_${i}`),t[i].offset)}return 1===t&&this.ZB.PR(e("aPos"),this.ZB.kO).Nk(this.ZB.gl.TRIANGLES,6),1!==t&&this.x$.forEach((t=>{this.ZB.PR(e("aPos"),t.vertexBuff).PR(e("aMaskTextureCoord"),t.texCoordBuff).wR(s("uMaskTexture"),t.texture,0).Nk(this.ZB.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return{idCount:1}}kc(t,i,s,e,r){return{}}mc(){return this.dl()?Ss(this.S$):ns}bc(){return this.dl()&&this.Tr?this.Tr:a(0,0)}kt(){if(this.dl()&&this.b$){const t=this.b$;return a(t.max.x-t.min.x,t.max.y-t.min.y)}return a(0,0)}_c(){return this.x$.forEach((t=>{t.texCoordBuff&&this.ZB.BR(t.texCoordBuff),t.vertexBuff&&this.ZB.BR(t.vertexBuff)})),this.x$=[],this.F$&&this.F$.oD(this),this._D=void 0,this.L$=void 0,this.P$=void 0,this}Wi(){return this.b$.max.x}Hi(){return this.b$.min.x}Zi(){return this.b$.max.y}Xi(){return this.b$.min.y}uu(){return 0}cu(){return 0}}class fv{constructor(t){this.JV=0,this.B$=null,this.D$=t}E$(){return this.D$}R$(t,i,s,e){for(var r,h,n,o,a,l,u,c,d,f,A=this.B$,g=null,p=null,v=!1,y=!1;A&&(null===g&&(this.O$(t,i,null===(r=A.head)||void 0===r?void 0:r.px,null===(h=A.head)||void 0===h?void 0:h.py)?(g=A,v=!0):this.O$(t,i,null===(n=A.tail)||void 0===n?void 0:n.px,null===(o=A.tail)||void 0===o?void 0:o.py)&&(g=A)),null===p&&(this.O$(s,e,null===(a=A.head)||void 0===a?void 0:a.px,null===(l=A.head)||void 0===l?void 0:l.py)?(p=A,y=!0):this.O$(s,e,null===(u=A.tail)||void 0===u?void 0:u.px,null===(c=A.tail)||void 0===c?void 0:c.py)&&(p=A)),null==p||null==g);)A=A.next;switch((null!=g?1:0)|(null!=p?2:0)){case 0:var m={px:t,py:i,prev:null},x={px:s,py:e,next:null};m.next=x,x.prev=m,g={head:m,tail:x,next:this.B$,prev:null,closed:!1},this.B$&&(this.B$.prev=g),this.B$=g,++this.JV;break;case 1:var S={px:s,py:e};v?(S.next=g.head,S.prev=null,g.head.prev=S,g.head=S):(S.next=null,S.prev=g.tail,g.tail.next=S,g.tail=S);break;case 2:S={px:t,py:i},y?(S.next=p.head,S.prev=null,p.head.prev=S,p.head=S):(S.next=null,S.prev=p.tail,p.tail.next=S,p.tail=S);break;case 3:if(g===p){S={px:null===(d=g.tail)||void 0===d?void 0:d.px,py:null===(f=g.tail)||void 0===f?void 0:f.py,next:g.head,prev:null},g.head.prev=S,g.head=S,g.closed=!0;break}switch((v?1:0)|(y?2:0)){case 0:this.z$(g);case 1:p.tail.next=g.head,g.head.prev=p.tail,p.tail=g.tail,this.V$(g);break;case 3:this.z$(g);case 2:g.tail.next=p.head,p.head.prev=g.tail,g.tail=p.tail,this.V$(p)}}}V$(t){t.prev?t.prev.next=t.next:this.B$=t.next,t.next&&(t.next.prev=t.prev),--this.JV}N$(t,i,s=1e-10){return Math.abs(t-i)<Math.min(Math.abs(t),Math.abs(i))*s}O$(t,i,s,e){return!!(t&&i&&s&&e)&&this.N$(t,s)&&this.N$(i,e)}z$(t){for(var i=t.head;i;){var s=i.next;i.next=i.prev,i.prev=s,i=s}s=t.head,t.head=t.tail,t.tail=s}}class Av{constructor(t){this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5),this.contours={},t&&(this.G$=t)}$$(t,i,s,e){const r=i.length-1,h=s.length-1;var n=this.h,o=this.sh,a=this.xh,l=this.yh;const u=e.length;this.contours={};for(var c,d,f,A,g,p=function(t,i){return(n[i]*a[t]-n[t]*a[i])/(n[i]-n[t])},v=function(t,i){return(n[i]*l[t]-n[t]*l[i])/(n[i]-n[t])},y=0,m=0,x=0,S=0,b=[0,1,1,0],M=[0,0,1,1],w=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],_=h-1;_>=0;_--)for(var k=0;k<r;k++){let r=t(k,_),h=t(k+1,_),L=t(k,_+1),P=t(k+1,_+1);var C=Math.min(L,r),T=Math.min(P,h);if(A=Math.min(C,T),C=Math.max(L,r),T=Math.max(P,h),!((g=Math.max(C,T))<e[0]&&A>e[u-1]))for(var F=0;F<u;F++)if(e[F]>=A&&e[F]<=g){for(var I=4;I>=0;I--)I>0?(n[I]=t(k+b[I-1],_+M[I-1])-e[F],a[I]=i[k+b[I-1]],l[I]=s[_+M[I-1]]):(n[0]=.25*(n[1]+n[2]+n[3]+n[4]),a[0]=.5*(i[k]+i[k+1]),l[0]=.5*(s[_]+s[_+1])),n[I]>1e-10?o[I]=2:n[I]<-1e-10?o[I]=0:o[I]=1;for(I=1;I<=4;I++)if(d=4!=I?I+1:1,0!=(f=w[o[c=I]][o[0]][o[d]])){switch(f){case 1:y=a[c],x=l[c],m=a[0],S=l[0];break;case 2:y=a[0],x=l[0],m=a[d],S=l[d];break;case 3:y=a[d],x=l[d],m=a[c],S=l[c];break;case 4:y=a[c],x=l[c],m=p(0,d),S=v(0,d);break;case 5:y=a[0],x=l[0],m=p(d,c),S=v(d,c);break;case 6:y=a[d],x=l[d],m=p(c,0),S=v(c,0);break;case 7:y=p(c,0),x=v(c,0),m=p(0,d),S=v(0,d);break;case 8:y=p(0,d),x=v(0,d),m=p(d,c),S=v(d,c);break;case 9:y=p(d,c),x=v(d,c),m=p(c,0),S=v(c,0)}this.G$(y,x,m,S,e[F],F)}}}}G$(t,i,s,e,r,h){let n=this.contours[h];n||(n=this.contours[h]=new fv(r)),n.R$(t,i,s,e)}get U$(){var t=[],i=this.contours;for(var s in i)for(var e=i[s].B$,r=i[s].D$;e;){var h=e.head,n=[];for(n.ax=[],n.ay=[],n.level=r,n.k=s;h&&h.px&&h.py;)n.ax.push(h.px),n.ay.push(h.py),h=h.next;t.push(n),e=e.next}return t.sort(((t,i)=>t.length-i.length)),t}}class gv extends yn{constructor(t,i,s,e,r,h){super(t,i,s,e,r),this.Y$=g("bilinear"),this.j$=g(void 0),this.H$=!0,this.jt={x:0,y:0},this.W$={x:1,y:1},this.Kv=ln.lineStyle,this.X$=g(void 0),this.engine=t;const n="columns"===h.dataOrder?h.columns:h.rows,o="columns"===h.dataOrder?h.rows:h.columns;this.Da={...h,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.Z$=new Av}ly(t){return this.Y$.C(t),this}uy(){return this.Y$.T()}xb(t){return this.j$.C(t),this}Sb(){return this.j$.T()}sy(t,i){return this.H$=this.jt!=t||this.W$!=i,this.jt=t,this.W$=i,this}ey(){return{start:this.jt,step:this.W$,end:{x:this.jt.x+this.W$.x*this.Da.columns,y:this.jt.y+this.W$.y*this.Da.rows}}}qv(t){return this.Kv="function"==typeof t?t(this.Kv):t,this}oy(){return this.Kv}hy(t){return this.X$.C(t),this}ny(){return this.X$.T()}}class pv extends gv{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.bD=new xp,this.DV={},this.J$=[],this.Q$=!1,this.mu=!1,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStylePaletted:()=>ye(this.Ze)&&this.Ze,wireframeStyleLine:()=>lr(this.Kv)&&this.Kv,wireframeStyleFill:()=>{const t=this.Kv&&this.Kv.getFillStyle();return fe(t)&&t}}),this.K$=void 0,this.q$=Xu,this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i;const n=Math.min(this.ZB.QB,void 0!==h.Ab?h.Ab:2048),o={x:Math.min(n,this.Da.primaryDimensionVectorsCount),y:Math.min(n,this.Da.secondaryDimensionVectorsCount)},a=((t,i,s)=>{const e=[],r=s(t.primaryDimensionVectorsCount,i.x),h=s(t.secondaryDimensionVectorsCount,i.y);let n;return r.forEach((t=>h.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};e.push(s)})))),n=[],e.forEach((t=>{let i=n.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},n.push(i)),i.tiles.push(t)})),{gridTiles:e,gridTileSizes:n}})(this.Da,o,this.q$),l=a.gridTiles.map((t=>({...t,intensityData:void 0,hasIntensityData:!1}))),u=a.gridTileSizes.map((t=>({...t,tiles:l.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.tU={gridTiles:l,gridTileSizes:u},this.sy(this.jt,this.W$),this.iU=[],this.sU=new La((()=>{const t=new ov(this.Sz,this.bz,this.ai,jt);return t.Od(ae).Rd(ae),t})),this.eU=[],this.rU=new La((()=>{const t=new dv(this.Sz,this.bz,this.ai,jt,[]);return t.Zl({x:0,y:0}),t}))}hU(){return this.ZB.pi.sa.AE}_i(){return this.nU}oU(t){return t.intensityData||(t.intensityData=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary)),t.intensityData}aU(t,i){return 0<=t&&t<i?t:t<0?t%i+i:t%i}lU(t,i){const s=q(t,this.ai,this.bz.pi.ai),e=q(i,this.ai,this.bz.pi.ai);let r=180*Math.atan2(s.y-e.y,e.x-s.x)/Math.PI;return(r<-90||90<r)&&(r+=180),r}uU(t,i,s,e){const r=Us(t,i,s,e);if(r){let h=Math.min(t.x,i.x,s.x,e.x),n=Math.max(t.x,i.x,s.x,e.x),o=Math.min(t.y,i.y,s.y,e.y),a=Math.max(t.y,i.y,s.y,e.y);if(r.x<=h||n<=r.x||r.y<=o||a<=r.y)return}return r}cU(t,i,s,e){if(i.length<5)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};void 0===this.K$&&(this.K$=new dv(this.Sz,this.bz,this.ai,this.yi,[]));const r=t.labelFont;let h=this.K$.tn(e).Th(0).Ch(r).Nh().kt().x;Number.isNaN(h)&&(this.K$.dispose(),this.K$=new dv(this.Sz,this.bz,this.ai,this.yi,[]),h=this.K$.tn(e).Th(0).Ch(r).Nh().kt().x);const n=this.K$,o=this.ai.x.$,a=this.ai.x.U,l=this.ai.y.$,u=this.ai.y.U,c={x:o,y:l},d={x:a,y:u},f=[{x:c.x,y:c.y},{x:c.x,y:d.y}],A=[{x:c.x,y:d.y},{x:d.x,y:d.y}],g=[{x:d.x,y:c.y},{x:d.x,y:d.y}],p=[{x:c.x,y:c.y},{x:d.x,y:c.y}];let v={x:i[0],y:s[0]},y={x:i[1],y:s[1]},m=[];const x=c.x,S=d.x,b=c.y,M=d.y,w=(t,i,s,e)=>{const r=ks(t,c,d),h=ks(i,c,d);if(r&&h)return e?(s.push(t),s.push(i),!1):(s.push(i),!1);{if(!r&&!h&&(t.x<x&&i.x<x||t.y<b&&i.y<b||S<t.x&&S<i.x||M<t.y&&M<i.y))return!(0<s.length&&0==isNaN(s[s.length-1].x)&&(s.push({x:NaN,y:NaN}),0));const n=this.uU(f[0],f[1],t,i),o=this.uU(A[0],A[1],t,i),a=this.uU(g[0],g[1],t,i),l=this.uU(p[0],p[1],t,i),u=[];if(n&&u.push(n),o&&u.push(o),a&&u.push(a),l&&u.push(l),1==u.length){if(r)e&&s.push(t),s.push(i),s.push({x:NaN,y:NaN});else if(h)return s.push(t),s.push(i),!1}else 2==u.length&&(0<s.length&&0==isNaN(s[s.length-1].x)&&s.push({x:NaN,y:NaN}),s.push(u[0]),s.push(u[1]),s.push({x:NaN,y:NaN}));return!0}};let _=w(v,y,m,!0);const k=4*this.ai.x.getPixelSize()/2;for(let t=2;t<i.length;t++)y={x:i[t],y:s[t]},k<=Math.abs(y.x-v.x)+Math.abs(y.y-v.y)&&(_=w(v,y,m,_),v=y);const C=m.length;if(C<2)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};v={x:i[i.length-1],y:s[s.length-1]},ks(v,c,d)&&v.x==m[0].x&&v.y==m[0].y&&m.push(m[0]);let T=[];const F=[];let I=0;for(let t=I+1;t<2*C;t++){let i=this.aU(t,C);if(C<t&&h<this.vf(m[i],m[0]))break;let s=this.aU(I,C);if(isNaN(m[s].x)){0<T.length&&(F.push(T),T=[]),++I,t=I;continue}const e=isNaN(m[i].x);let r=0;if(e){0<T.length&&(F.push(T),T=[]),++t,I=t;continue}const n=0;if(m[i].x<c.x+n||d.x-n<m[i].x||m[i].y<c.y+n||d.y-n<m[i].y)++t,I=t;else if(r=this.vf(m[i],m[s]),h<r){const e=m[s],r=m[i];let h=Number.MIN_VALUE;const n=0;for(let i=I+1;i<t-1;i++){const t=this.aU(i,C);if(isNaN(m[t].x))break;if(h!=Number.MIN_VALUE&&(m[t].x<c.x+n||d.x-n<m[t].x||m[t].y<c.y+n||d.y-n<m[t].y))continue;const s=ys({x:m[t].x,y:m[t].y},e,r);h<s&&(h=s)}if(h!=Number.MIN_VALUE&&(T.push({x:h,y:s,z:i}),C<=t&&0<=s))break;++I,t=I}else e&&(++I,t=I)}y={x:0,y:0};let L=-1;const P=[],B=[];F.length<1&&0<T.length&&F.push(T);for(let t=0;t<F.length;t++){T=F[t],T.sort(((t,i)=>t.x-i.x)),L=T[0].y;let e=0,h=T[0].z;this.eU.forEach(((t,o)=>{const a=n.sr({x:t.position.x,y:t.position.y}).Th(t.angle).Ch(t.font).Nh().mc();if(isNaN(a.min.x))return;let l=L,u=h;if(m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){let t=this.lU(m[l],m[u]),h=n.sr({x:i[L],y:s[L]}).Th(t).Ch(r).Nh().mc();for(;ls(a,h)&&e<T.length-1;)if(l=T[++e].y,u=T[e].z,m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){const i=(m[l].x+m[u].x)/2,s=(m[l].y+m[u].y)/2;t=this.lU(m[l],m[u]),h=n.sr({x:i,y:s}).Th(t).Ch(r).Nh().mc()}}})),T.length<=e&&(e=0);let o=T[e].y,a=T[e].z,l=0;l=o<a?a-o:C-o+a,3<l&&(l-=2),L=o;let u=Number.NaN,c=Number.NaN;if(m[0].x==m[m.length-1].x&&m[0].y===m[m.length-1].y){L=o;let t=this.aU(o-1,m.length),i=this.aU(o+l,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else if(o<4){L=3,o=L,a=this.aU(o+l+1,m.length);let t=this.aU(o,m.length),i=this.aU(a,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else{for(L=o-1;L<m.length&&isNaN(m[L].x);)++L;if(L==m.length)for(;L<m.length&&isNaN(m[L].x);)++L;let t=this.aU(L,m.length),i=this.aU(L+l+1,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}0<=L&&(v=m[o],y=m[a],P.push({x:u,y:c}),B.push(this.lU(v,y)))}return 0<=P.length?{labelPos:P,labelAngle:B}:{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]}}vf(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}dU(t,i){if(!this.tU)return this;if(!t)return this.fU(!0),this.AU(!0),this;if(!i)return(this.ai.x.Lt||this.ai.x.rt||this.ai.y.Lt||this.ai.y.rt)&&this.gU(t),this;if(!this.tU.gridTiles)return this;if(!this.pU)return this;const s=this.pU.boundaries.min.x,e=this.pU.boundaries.min.y,r=this.pU.boundaries.max.x,h=this.pU.boundaries.max.y;if(null==s||null==e||null==r||null==h)return this;const n=this.Da.columns,o=this.Da.rows,a=(r-s)/n,l=(h-e)/o,u=new Array(n).fill(0,0,n).map(((t,i)=>s+i*a+a/2)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l+l/2));let d=[];t.levels.forEach((t=>{d.push(t.value)}));const f=(t,i)=>"rows"==this.Da.dataOrder?i:t,A=(t,i)=>"rows"==this.Da.dataOrder?t:i;return this.Z$.$$(((t,i)=>this.vU(f(t,i),A(t,i))),u,c,d),this.yU(t),this.gU(t),this}yU(t){this.fU();let i=new Map;return t.levels.forEach((t=>{i.set(t.value,t.strokeStyle)})),this.Z$.U$.forEach((t=>{let s=t.level;const e=i.get(s),r=this.iU.find((t=>t.lineStyle===e));if(r)r.points.appendSample({xValues:NaN,yValues:NaN}),r.points.appendSamples({xValues:t.ax,yValues:t.ay});else{const i=new $n({warnings:!1,schema:{xValues:{pattern:null},yValues:{pattern:null}}});i.appendSamples({xValues:t.ax,yValues:t.ay});const s={lineStyle:e,points:i};this.iU.push(s)}})),this}gU(t){this.AU();const i=ye(this.Ze)?this.Ze.lut:void 0;return this.Z$.U$.forEach((s=>{var e,r,h;let n=[],o=[];const a=s.k,l=t.levels[a],u=null!==(r=null!==(e=l.label)&&void 0!==e?e:null==i?void 0:i.getFormatter()(l.value,{min:i.min,max:i.max}))&&void 0!==r?r:l.value.toString();if(t.showLabels&&(({labelPos:n,labelAngle:o}=this.cU(t.levels[a],s.ax,s.ay,u)),0<n.length))for(let i=0;i<n.length;i++)this.eU.push({text:u,position:n[i],angle:o[i],font:l.labelFont,fill:l.labelFillStyle,shadow:null!==(h=t.shadows)&&void 0!==h?h:void 0})})),this}Nh(){const t=this.J$,i=this.Ze,s=this.ll(),e=this.Kv,r=e!==this.mU,h=this.Fz.wireframeStyleLine(r),n=this.Fz.wireframeStyleFill(r),o=h&&n&&!this.ai.zt(),a=this.Fz.fillStylePaletted(s),l=this.Fz.fillStyleSolid(s),u=this.Y$.u,c=this.j$.u,d=this.Y$.T(),f=this.mu,A=this.ui.T();this.xU=this.xU||this.SU();const g=this.xU,p=Ju(t,g,f?"intensity":void 0,(t=>t.sizeHeatmapDataVectors)),v=this.X$.T(),y=v!==this.bU;this.dU(v,y||p.size>0||this.H$),this.bU=this.X$.T(),this.H$=!1,p.size>0&&(ic(this.ZB,p,(t=>this.oU(t.tileData)),(t=>t.intensityDataTexture)),this.Q$=!0),this.bD.FR(this.ai);const m=this.DV;if((s||u||c)&&(m.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.ZB.SE(Tg["2D"],Tg.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===d&&"bilinear",flipXY:"rows"===this.Da.dataOrder,intensityTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut,aggregation:this.j$.T()}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}))}:l?{renderMode:"solid",fillStyleSolid:l,shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:"uniform"}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}))}:void 0),r&&(m.wireframe=o&&h&&n?-1===h.getThickness()?{renderMode:"primitive",shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:"uniform"}),Tg.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Da.dataOrder,axisWorldTranslation:xr(this.ai),normalSource:void 0})),fillStyleSolid:n}:{renderMode:"triangulated",shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:"uniform"}),Tg.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Da.dataOrder,axisWorldTranslation:xr(this.ai),normalSource:void 0})),geometry:Op(this.ZB,1),solidLine:h,fillStyleSolid:n}:void 0,m.wireframe?this.MU=this.MU||this.wU():this.MU&&(this.ZB.BR(this.MU.wireframeCoordinatesBuffer),this.MU=void 0)),m.mousePicking=A?this.DV.mousePicking||{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking(),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}))}:void 0,this.DV=m,void 0===this.nU&&a&&"value"===a.lookUpProperty&&a.lut.percentageValues){let t=rs,i=hs;this.xU.gridTiles.forEach((s=>{const e=this.oU(s.tileData);for(let s=0;s<e.length;s+=1){const r=e[s];r<t&&(t=r),r>i&&(i=r)}})),this.nU={min:t,max:i}}return this.mu=!1,this.J$.length=0,this.fl(i),this.mU=e,this.Y$.u=!1,this.j$.u=!1,this}SU(){const t=this.tU.gridTiles.map((t=>{const i=tc(this.ZB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.tU.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.ZB.mR(new Float32Array(16)),e=this.ZB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}wU(){const t=this.Da.primaryDimensionVectorsCount+1+this.Da.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.Da.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.Da.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.Da.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.Da.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.ZB.mR(i),wireframeSegmentsLength:t}}sy(t,i){super.sy(t,i);const s=this.Da,e=f({x:Math.min(this.jt.x,this.jt.x+s.columns*this.W$.x),y:Math.min(this.jt.y,this.jt.y+s.rows*this.W$.y)},{x:Math.max(this.jt.x,this.jt.x+s.columns*this.W$.x),y:Math.max(this.jt.y,this.jt.y+s.rows*this.W$.y)}),r=new Map;return this.tU.gridTiles.forEach((t=>{const i="columns"===this.Da.dataOrder?{x:this.jt.x+this.W$.x*t.iFirstVector.primary,y:this.jt.y+this.W$.y*t.iFirstVector.secondary}:{x:this.jt.x+this.W$.x*t.iFirstVector.secondary,y:this.jt.y+this.W$.y*t.iFirstVector.primary},s="columns"===this.Da.dataOrder?{x:this.W$.x*t.sizeHeatmapDataVectors.primary,y:this.W$.y*t.sizeHeatmapDataVectors.secondary}:{x:this.W$.x*t.sizeHeatmapDataVectors.secondary,y:this.W$.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.Da.dataOrder?{x:this.jt.x+this.W$.x*t.iFirstUniqueVector.primary,y:this.jt.y+this.W$.y*t.iFirstUniqueVector.secondary}:{x:this.jt.x+this.W$.x*t.iFirstUniqueVector.secondary,y:this.jt.y+this.W$.y*t.iFirstUniqueVector.primary},h="columns"===this.Da.dataOrder?{x:this.W$.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.W$.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.W$.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.W$.y*t.sizeUniqueHeatmapDataVectors.primary};r.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:h})})),this.pU={boundaries:e,tilesInfo:r},this}wc(t,i){var s,e;const r=this.xU,h=this.pU;if(this.j$.T()&&"bilinear"===this.Y$.T())return Nt.console.warn("LightningChart JS error | heatmap has both bilinear interpolation and aggregation enabled at same time. Disable one of them"),{idCount:0};const n=1===t?null===(s=this.DV.mousePicking)||void 0===s?void 0:s.shader:null===(e=this.DV.tile)||void 0===e?void 0:e.shader;if(this.DV.tile&&n&&r&&h){const s=n,e=this.DV.tile,o={x:(h.boundaries.max.x-h.boundaries.min.x)*Math.sign(this.W$.x),y:(h.boundaries.max.y-h.boundaries.min.y)*Math.sign(this.W$.y)},a={x:o.x/this.Da.columns,y:o.y/this.Da.rows},l=this.ai.ni(),u={x:a.x/l.x,y:a.y/l.y};this.ZB.Kc(s).SR(s,((s,n,o,a)=>{let l=!1;if(!this.ZB.qO(o,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:"solid"===e.renderMode&&e.fillStyleSolid}))return!1;if("solid"===e.renderMode||1===t){const t=Ai([{x:this.jt.x,y:this.jt.y},{x:this.jt.x+this.W$.x*this.Da.columns,y:this.jt.y},{x:this.jt.x,y:this.jt.y+this.W$.y*this.Da.rows},{x:this.jt.x+this.W$.x*this.Da.columns,y:this.jt.y+this.W$.y*this.Da.rows}],this.ai.zt());this.ZB.qR(r.rectangleLocationsBuffer,0,t),this.ZB.RO(o,r.rectangleLocationsBuffer,this.ai.zt(),void 0).Nk(this.ZB.gl.TRIANGLE_STRIP,4),l=!0}else if("paletted"===e.renderMode){if(this.ZB.JO(o,e.fillStylePaletted.lut,this.nU),this.j$.T()){const t=u.x<1?Math.max(Math.ceil(.5/u.x),1):0,i=u.y<1?Math.max(Math.ceil(.5/u.y),1):0;this.ZB.MR(s("uAggregationWindowSize"),[t,i])}c=t=>{this.ZB.MR(s("uTileDimensions"),["columns"===this.Da.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Da.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const e=h.tilesInfo.get(t.tileData);if(!e)return;let n;const a=this.ZB.hR();if("bilinear"===this.Y$.T()){const t=(this.ai.x.Dt(e.startLocationAxis.x)+u.x/2)*a,i=(this.ai.y.Dt(e.startLocationAxis.y)+u.y/2)*a;n=[t,i,(this.ai.x.Dt(e.startLocationAxis.x+e.sizeAxis.x)-u.x/2)*a-t,(this.ai.y.Dt(e.startLocationAxis.y+e.sizeAxis.y)-u.y/2)*a-i]}else{const t=this.ai.x.Dt(e.startLocationAxis.x)*a,i=this.ai.y.Dt(e.startLocationAxis.y)*a;n=[t,i,this.ai.x.Dt(e.startLocationAxis.x+e.sizeAxis.x)*a-t,this.ai.y.Dt(e.startLocationAxis.y+e.sizeAxis.y)*a-i]}const c=Ai([{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y}],this.ai.zt());this.ZB.qR(r.rectangleLocationsBuffer,0,c),this.ZB.LR(s("uTileBounds"),n).wR(s("uTileIntensityValues"),t.intensityDataTexture,1).RO(o,r.rectangleLocationsBuffer,this.ai.zt(),void 0).Nk(this.ZB.gl.TRIANGLE_STRIP,4),l=!0},r.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))}))}var c,d;return 1===t&&this.ZB.UO(o,1),l}))}const o=this.MU,a=this.DV.wireframe,l=1===t||null==a?void 0:a.shader;if(o&&a&&l&&"primitive"===a.renderMode){const{fillStyleSolid:i}=a;this.ZB.Kc(l).SR(l,((s,e,r)=>((this.ai instanceof Z||this.ai instanceof mr)&&this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR()),this.ZB._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0).UI(s("uColor"),i.getColor()).bR(o.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).MR(s("uScaling"),[this.W$.x,this.W$.y]).MR(s("uTranslationAxis"),[this.jt.x,this.jt.y]).Nk(this.ZB.gl.LINES,2*o.wireframeSegmentsLength),!0)))}else if(o&&a&&l&&"triangulated"===a.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=a;this.ZB.Kc(l).SR(l,((r,h,n)=>((this.ai instanceof Z||this.ai instanceof mr)&&this.ZB.MR(r("uScale"),this.bD.kR()).MR(r("uDisp"),this.bD.CR()),this.ZB._R(r("uIsHighlighted"),1===t||2===t?0:this.gi).UI(r("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(r("uRenderEffectMask"),2===t?1:0).UI(r("uColor"),e.getColor())._R(r("uThicknessPixels"),s.getThickness()).MR(r("uRatioPxClip"),[2/this.pi.kt().x,2/this.pi.kt().y]).bR(o.wireframeCoordinatesBuffer,1,{location:h("aLocationA"),size:2},{location:h("aLocationB"),size:2}).MR(r("uScaling"),[this.W$.x,this.W$.y]).MR(r("uTranslationAxis"),[this.jt.x,this.jt.y]),i.Kc(n,!1).Nk(o.wireframeSegmentsLength),!0)))}if(0===t){const i=this.hU()&&this.eU,s=this.ZB,e=this.ai.x.Yt(),r=this.ai.x.$t(),h=this.ai.y.Yt(),n=this.ai.y.$t(),o=(t,i,s)=>{const o=i.position;return e<o.x&&o.x<r&&h<o.y&&o.y<n&&(s.add().sr(o).qh(i.shadow).tn(i.text).Th(i.angle).Ch(i.font).qe(i.fill).Nh().wc(t,0),!0)},a=this.rU.VA();i&&(((t,i)=>{if(void 0===i)return;const s=t.gl;t.IR(!0),s.clearStencil(1),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),i(),s.colorMask(!0,!0,!0,!0)})(s,(()=>{this.eU.forEach((t=>{o(1,t,a)}))})),s.gl.stencilFunc(s.gl.EQUAL,1,255),s.gl.stencilOp(s.gl.KEEP,s.gl.KEEP,s.gl.KEEP),s.IR(!0));const l=this.sU.VA();if(l){const i=l.add();this.iU.forEach((s=>{i.Ed(s.points,{x:"xValues",y:"yValues"}),i.cr(s.lineStyle),i.Nh(),i.wc(t,0)}))}l.finishPlot(),i&&s.IR(!1),this.eU&&this.eU.forEach((i=>{o(t,i,a)})),a.finishPlot()}return{idCount:1}}kc(t,i,s,e,r){return{}}Ay(t){return 0===t.lengthPrimary||0===t.lengthSecondary||(this.J$.push(t),qu(this.tU.gridTiles,t,(t=>(t.hasIntensityData=!0,this.oU(t))),((t,i)=>{t.hasIntensityData=!0,t.intensityData=i})),this.nU=void 0),this}Vi(){return this.Q$&&(this.tU.gridTiles.forEach((t=>{t.intensityData&&t.intensityData.fill(0),t.hasIntensityData=!1})),this.mu=!0,this.Q$=!1,this.nU=void 0),this}fU(t=!1){return t&&this.sU.UA(),this.iU.length=0,this}AU(t=!1){return t&&(this.rU.UA(),this.K$&&(this.K$.dispose(),this.K$=void 0)),this.eU.length=0,this}dispose(){super.dispose();const t=this.xU;t&&(t.gridTiles.forEach((t=>{this.ZB.KB(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((()=>{})),t.gridTileSizes.length=0,this.ZB.BR(t.rectangleLocationsBuffer)),this.xU=void 0;const i=this.MU;return i&&this.ZB.BR(i.wireframeCoordinatesBuffer),this.MU=void 0,this.fU(!0),this.AU(!0),this.DV={},this}_c(){return this.dispose(),this}yd(t){const i=t,s="columns"===this.Da.dataOrder?i.x:i.y,e="columns"===this.Da.dataOrder?i.y:i.x,r="columns"===this.Da.dataOrder?this.jt.x:this.jt.y,h="columns"===this.Da.dataOrder?this.jt.y:this.jt.x;let n=(s-r)/("columns"===this.Da.dataOrder?this.W$.x:this.W$.y),o=(e-h)/("columns"===this.Da.dataOrder?this.W$.y:this.W$.x);n=Math.floor(Wt(n,0,this.Da.primaryDimensionVectorsCount-1)),o=Math.floor(Wt(o,0,this.Da.secondaryDimensionVectorsCount-1));const a=this.vU(n,o),l="columns"===this.Da.dataOrder?{x:this.jt.x+(n+.5)*this.W$.x,y:this.jt.y+(o+.5)*this.W$.y}:{x:this.jt.x+(o+.5)*this.W$.x,y:this.jt.y+(n+.5)*this.W$.y},u="columns"===this.Da.dataOrder?n:o,c="columns"===this.Da.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}yb(t){const i=this.pU;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.Da.dataOrder?s.x:s.y,r="columns"===this.Da.dataOrder?s.y:s.x,h="columns"===this.Da.dataOrder?this.jt.x:this.jt.y,n="columns"===this.Da.dataOrder?this.jt.y:this.jt.x,o="columns"===this.Da.dataOrder?this.W$.x:this.W$.y,a="columns"===this.Da.dataOrder?this.W$.y:this.W$.x,l=Wt((e-h)/o-.5,0,this.Da.primaryDimensionVectorsCount-1),u=Wt((r-n)/a-.5,0,this.Da.secondaryDimensionVectorsCount-1),c=Wt(Math.ceil(l)-1,0,this.Da.primaryDimensionVectorsCount-1),d=Wt(Math.ceil(u)-1,0,this.Da.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.vU(c,d)},A={point:{x:c,y:d+1},value:this.vU(c,d+1)},g={point:{x:c+1,y:d},value:this.vU(c+1,d)},p={point:{x:c+1,y:d+1},value:this.vU(c+1,d+1)},v=Ge({x:l,y:u},f,A,g,p);if(void 0===v)return;const y=Wt(Math.floor(l+.5),0,this.Da.primaryDimensionVectorsCount-1),m=Wt(Math.floor(u+.5),0,this.Da.secondaryDimensionVectorsCount-1),x="columns"===this.Da.dataOrder?y:m,S="columns"===this.Da.dataOrder?m:y,b=t;return{x:b.x,y:b.y,column:x,row:S,cellValue:v}}vU(t,i){for(let s=0;s<this.tU.gridTiles.length;s+=1){const e=this.tU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){if(!e.intensityData)return 0;const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,h=s*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData[h]}}return 0}Wi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.boundaries.max.x)||0}Hi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.boundaries.min.x)||0}Zi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.boundaries.max.y)||0}Xi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.boundaries.min.y)||0}uu(){return 0}cu(){return 0}mb(){const t=[];return this.tU.gridTiles.forEach((i=>{if(!i.hasIntensityData||!i.intensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,r=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];r[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class vv extends yn{constructor(t,i,s,e,r,h){super(t,i,s,e,r),this.jt={x:0,y:0},this.W$={x:1,y:1},this.j$=g(void 0),this.Kv=ln.lineStyle,this.gc=g(void 0),this.Y$=g("bilinear"),this.engine=t,this.Da=h}sy(t,i){return this.jt=t,this.W$=i,this}ey(){return{start:this.jt,step:this.W$}}xb(t){return this.j$.C(t),this}Sb(){return this.j$.T()}qv(t){return this.Kv="function"==typeof t?t(this.Kv):t,this}oy(){return this.Kv}wb(t){return this.gc.C(t),this}_U(){return this.gc.T()}ly(t){return this.Y$.C(t),this}uy(){return this.Y$.T()}}class yv extends vv{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.kU=0,this._b=[],this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i,this.nu="columns"===h.scrollDimension?f({x:this.jt.x,y:this.jt.y},{x:this.jt.x,y:this.jt.y+h.resolution*this.W$.y}):f({x:this.jt.x,y:this.jt.y},{x:this.jt.x+h.resolution*this.W$.x,y:this.jt.y}),this.CU={dataPerSegment:2048}}Nh(){this.EN||(this.mi.push({type:"DataPattern",args:{pattern:"columns"===this.Da.scrollDimension?this.W$.x>0?"ProgressiveX":"RegressiveX":this.W$.y>0?"ProgressiveY":"RegressiveY"}}),this.EN=new Xp(this.ai,this));const t=this.EN.kN(this._b,this.gc.T());if(t>0){for(let i=0;i<t;i+=1)this._b[0].shape.dispose()._c(),this._b.shift();"columns"===this.Da.scrollDimension?this.nu.min.x=this._b.length>0?this._b[0].boundaries.min.x:rs:this.nu.min.y=this._b.length>0?this._b[0].boundaries.min.y:rs}this._b.forEach((t=>t.shape.xb(this.j$.T()).Nh()));const i=this._b.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Zt(null===(s=i.shape.nU)||void 0===s?void 0:s.min,rs)),t.max=Math.max(t.max,Zt(null===(e=i.shape.nU)||void 0===e?void 0:e.max,hs)),t}),{min:rs,max:hs});return this._b.forEach((t=>{t.shape.nU=i})),this.gc.u=!1,this}wc(t,i){let s=0;return this._b.forEach((e=>{const{idCount:r}=e.shape.wc(t,i+s);void 0!==r&&(s+=r)})),{idCount:s}}_i(){if(0!==this._b.length)return this._b.reduce(((t,i)=>{const s=i.shape._i();return s?{min:Math.min(s.min,t.min),max:Math.max(s.max,t.max)}:t}),{min:rs,max:hs})}kc(t,i,s,e,r){return{}}xy(t){if(0===t.length)return this;let i=0;const s=this.CU.dataPerSegment,e=t.length;do{let r=this._b[this._b.length-1],h=r?s-(r.existingDataPointsCount+(r.hasJoint?1:0)):0,n=!1;if(!r||0===h){const t={columns:"columns"===this.Da.scrollDimension?s:this.Da.resolution,rows:"rows"===this.Da.scrollDimension?s:this.Da.resolution,heatmapDataType:this.Da.heatmapDataType,dataOrder:this.Da.scrollDimension};let i="columns"===this.Da.scrollDimension?{x:this.jt.x+this.W$.x*this.kU,y:this.jt.y}:{x:this.jt.x,y:this.jt.y+this.W$.y*this.kU};this._b.length>0&&(i="columns"===this.Da.scrollDimension?{x:i.x-1*this.W$.x,y:i.y}:{x:i.x,y:i.y-1*this.W$.y},n=!0);const e=new pv(this.Sz,this.bz,this.ai,jt,[],t).ly(this.Y$.T()).qe(this.Ze).qv(this.Kv).sy(i,this.W$);r={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.kU,hasJoint:!1,boundaries:{min:{x:e.Hi(),y:e.Xi()},max:{x:e.Wi(),y:e.Zi()}}},this._b.push(r),h=s-(n?1:0)}const o=e-i,a=Math.min(h,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:r.existingDataPointsCount+(r.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Da.resolution};n&&(u.values.unshift(this.TU),u.lengthPrimary+=1,r.hasJoint=!0),r.shape.Ay(u),r.existingDataPointsCount+=a,r.existingCoordinatesCount+=a+(n?1:0),this.TU=l[l.length-1],this.kU+=a,i+=a}while(i<e);return this.nu.max="columns"===this.Da.scrollDimension?{...this.nu.max,x:this.jt.x+this.kU*this.W$.x}:{...this.nu.max,y:this.jt.y+this.kU*this.W$.y},this}Ay(t,i){if(i.length<=0)return this;const s=t,e=t+i.length-1,r=i[0].length;if(r<=0)return this;this._b.forEach((t=>{const h=t.dataStartIndex,n=t.dataStartIndex+t.existingDataPointsCount-1;if(e<h||s>n)return;const o=Math.max(s,h),a=Math.min(e,n),l=a-o+1,u=i.slice(o-s,a-s+1),c=s-h+(t.hasJoint?1:0),d={type:"intensity",startSecondary:0,lengthSecondary:r,startPrimary:c,lengthPrimary:l,values:u};t.shape.Ay(d)}));const h=this.kU-1;if(e>h){const t=e-h,s=i.slice(-t);if(s.length<t){const i=this.TU||new Array(r).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.xy(s)}return this}Sy(){return this.kU}Vi(){return this._b.forEach((t=>{t.shape.dispose()._c()})),this._b.length=0,this.nu="columns"===this.Da.scrollDimension?f({x:this.jt.x,y:this.jt.y},{x:this.jt.x,y:this.jt.y+this.Da.resolution*this.W$.y}):f({x:this.jt.x,y:this.jt.y},{x:this.jt.x+this.Da.resolution*this.W$.x,y:this.jt.y}),this.kU=0,this.TU=void 0,this}sy(t,i){return super.sy(t,i),this._b.forEach(((s,e)=>{const r={x:t.x+("columns"===this.Da.scrollDimension?s.dataStartIndex*i.x:0),y:t.y+("rows"===this.Da.scrollDimension?s.dataStartIndex*i.y:0)};s.shape.sy(r,i),s.boundaries={min:{x:s.shape.Hi(),y:s.shape.Xi()},max:{x:s.shape.Wi(),y:s.shape.Zi()}}})),this._b.length>0?this.nu=Ms(...this._b.map((t=>t.boundaries))):this.nu="columns"===this.Da.scrollDimension?f({x:this.jt.x,y:this.jt.y},{x:this.jt.x,y:this.jt.y+this.Da.resolution*this.W$.y}):f({x:this.jt.x,y:this.jt.y},{x:this.jt.x+this.Da.resolution*this.W$.x,y:this.jt.y}),this}qe(t){return super.qe(t),this._b.forEach((t=>t.shape.qe(this.Ze))),this}qv(t){return super.qv(t),this._b.forEach((t=>t.shape.qv(this.Kv))),this}ly(t){return super.ly(t),this._b.forEach((i=>i.shape.ly(t))),this}dispose(){return super.dispose(),this._b.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this._b.forEach((i=>i.shape.setVisible(t))),this}_c(){return this._b.forEach((t=>t.shape._c())),this}yd(t){const i=q(t,this.ai,this.engine.ai),s=this._b.reduce(((s,e)=>{const r=e.shape.yd(t);if(r){const t=vs(q(r,this.ai,this.engine.ai),i);if(void 0===s||t<s.distance)return{result:r,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Da.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Da.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Da.scrollDimension&&t>=this.kU||"rows"===this.Da.scrollDimension&&i>=this.kU)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}yb(t){const i=q(t,this.ai,this.engine.ai),s=this._b.reduce(((s,e)=>{const r=e.shape.yb(t);if(r){const t=vs(q(r,this.ai,this.engine.ai),i);if(void 0===s||t<s.distance)return{result:r,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Da.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Da.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Da.scrollDimension&&t>=this.kU||"rows"===this.Da.scrollDimension&&i>=this.kU)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return 0}cu(){return 0}Ii(t){return super.Ii(t),this._b.forEach((i=>i.shape.Ii(t))),this}}class mv extends yn{constructor(t,i,s,e,r,h){super(t,i,s,e,r),this.Y$=g("bilinear"),this.Kv=ln.lineStyle,this.Da=h}ly(t){return this.Y$.C(t),this}uy(){return this.Y$.T()}qv(t){return this.Kv="function"==typeof t?t(this.Kv):t,this}oy(){return this.Kv}}class xv extends mv{constructor(t,i,s,e,r,h){super(t,i,s,e,r,h),this.bD=new xp,this.DV={},this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStylePaletted:()=>ye(this.Ze)&&this.Ze}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.bz=i,this.gb=new pv(this.Sz,t.FU,t.ai,jt,[],{columns:h.sectors,rows:h.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===h.dataOrder?"rows":"columns",Ab:this.ZB.QB}).qv(Tt);const n=2*Math.PI/360,o=new Float32Array(724);let a=0;o[a+0]=0,o[a+1]=0,a+=2;for(let t=0;t<=360;t+=1){const i=t*n,s=Math.cos(i),e=Math.sin(i);o[a+0]=s,o[a+1]=e,a+=2}this.IU={vertexBuffer:this.ZB.mR(o),drawMode:this.ZB.gl.TRIANGLE_FAN,drawLength:362}}Nh(){const t=this.ll(),i=this.Ze,s=this.Fz.fillStyleSolid(t),e=this.Fz.fillStylePaletted(t),r=s||e,h=this.Y$.T(),n=this.Y$.u,o=this.ui.T(),a=this.ui.u;return this.bD.FR(this.ai),this.gb.Nh(),this.gb.xU?((t||n)&&(this.DV.fill=r?{shader:this.ZB.SE(Tg["2D"],Tg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xr(this.ai),normalSource:void 0}),e&&Tg.PolarHeatmap({interpolation:"bilinear"===h&&"bilinear",intensityTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Da.dataOrder,lut:e.lut}),s&&Tg.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.DV.mousePicking=o?{shader:this.ZB.SE(Tg["2D"],Tg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:xr(this.ai),normalSource:void 0}),Tg.MousePicking())}:void 0),this.fl(i),this.Y$.u=!1,this.ui.u=!1,this):this}wc(t,i){var s;const{vertexBuffer:e,drawLength:r,drawMode:h}=this.IU,n=this.gb.xU;if(!this.DV.fill||!n)return{};const{fillStylePaletted:o,fillStyleSolid:a}=this.DV.fill,l=1===t?null===(s=this.DV.mousePicking)||void 0===s?void 0:s.shader:this.DV.fill.shader;if(!l)return{};const u=this.ai.le(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.Da.amplitudeStart,this.Da.amplitudeStart+(this.Da.annuli-1)*this.Da.amplitudeStep),A=Math.max(this.Da.amplitudeStart,this.Da.amplitudeStart+(this.Da.annuli-1)*this.Da.amplitudeStep);let g;return g=u.end>u.start?Math.min(A,d)-u.start:Math.max(f,c)-u.start,this.ZB.Kc(l).SR(l,((s,l,u,c)=>{if(this.ZB.MR(s("uScale"),this.bD.kR()).MR(s("uDisp"),this.bD.CR())._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0).MR(c("uViewportSize"),[this.Sz.kt().x*this.ZB.hR()/(1===t?this.pi.Da.Ra:1),this.Sz.kt().y*this.ZB.hR()/(1===t?this.pi.Da.Ra:1)]).MR(s("uScaling"),[g,g]).MR(s("uTranslationAxis"),[0,0]).bR(e,void 0,{location:l("aPos"),size:2})._R(c("uAngleOffset"),this.ai.Ae()%(2*Math.PI))._R(c("uAngleDirection"),this.ai.de()?1:-1)._R(c("uSectors"),this.Da.sectors)._R(c("uAnnuli"),this.Da.annuli),1===t)this.ZB.ZR(s("uFirstId"),i).UO(u,1);else{if(o){const t=this.gb.nU;this.ZB._R(s("uAmplitudeStart"),this.Da.amplitudeStart)._R(s("uAmplitudeStep"),this.Da.amplitudeStep)._R(s("uAmplitudeAxisStart"),this.ai.le().start)._R(s("uAmplitudeAxisEnd"),this.ai.le().end).JO(u,o.lut,t).wR(s("uTileIntensityValues"),n.gridTiles[0].intensityDataTexture,0)}a&&this.ZB.UI(s("uColor"),a.getColor())}return this.ZB.Nk(h,r),!0})),{idCount:1}}_i(){return this.gb._i()}kc(t,i,s,e,r){return{}}Ay(t){return this.gb.Ay(t),this}Vi(){return this.gb.Vi(),this}dispose(){return super.dispose(),this.gb.dispose(),this.DV={},this.ZB.BR(this.IU.vertexBuffer),this}_c(){return this.dispose(),this}qe(t){return super.qe(t),this.gb.qe(this.Ze),this}yd(t){const i=this.Da.amplitudeStart,s=this.Da.amplitudeStart+(this.Da.annuli-1)*this.Da.amplitudeStep,e=Math.min(i,s),r=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>r)&&(t.angle=Wt(t.angle,0,360),t.amplitude=Wt(t.amplitude,r,r));let h=Math.round((t.angle-0)/360*this.Da.sectors);h>=this.Da.sectors&&(h=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.Da.annuli-1));return{iAnnulus:n,iSector:h,cellValue:this.vU(n,h),angle:h*(360/this.Da.sectors),amplitude:i+n*(s-i)/(this.Da.annuli-1)}}yb(t){const i=this.Da.amplitudeStart,s=this.Da.amplitudeStart+(this.Da.annuli-1)*this.Da.amplitudeStep,e=Math.min(i,s),r=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>r)&&(t.angle=Wt(t.angle,0,360),t.amplitude=Wt(t.amplitude,r,r));const h=(t.angle-0)/360*this.Da.sectors,n=(t.amplitude-i)/(s-i)*(this.Da.annuli-1),o=Math.floor(h),a=Math.floor(n),l={point:{x:a,y:o},value:this.vU(a,o)},u={point:{x:a,y:o+1},value:this.vU(a,o+1)},c={point:{x:a+1,y:o},value:this.vU(a+1,o)},d={point:{x:a+1,y:o+1},value:this.vU(a+1,o+1)},f=Ge({x:n,y:h},l,u,c,d);if(void 0!==f)return{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}}vU(t,i){const s="annuli"===this.Da.dataOrder?t:i,e="annuli"===this.Da.dataOrder?i:t;for(let t=0;t<this.gb.tU.gridTiles.length;t+=1){const i=this.gb.tU.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,r=e-i.iFirstVector.secondary,h=t*i.sizeHeatmapDataVectors.secondary+r;return i.intensityData?i.intensityData[h]:0}}return 0}Wi(){return 0}Hi(){return 0}Zi(){return 0}Xi(){return 0}uu(){return 0}cu(){return 0}}class Sv{constructor(t,i,s){this.Ei=new Set,this.LU=t=>(this.Ei.add(t),t),this.PU=t=>(this.Ei.delete(t),t._c(),this),this.pi=t,this.Yn=i,this.BU=s}CB(t){this.Ei.delete(t)&&this.Ei.add(t)}G(){for(const t of this.Ei)t._c().dispose();this.pi.Fa(this.Yn)}Bs(){return this.pi.Bs(),this}Ta(){return this.Yn}}class bv extends Sv{constructor(){super(...arguments),this.DU=g(void 0),this.rl=!1}Tm(t){return this.DU.C(t),this}qg(){return this.DU.T()}}class Mv extends mn{constructor(t,i,s,e,r){super(t,i,s,e,r),this.DV={fill:void 0,border:void 0},this.bD=new xp,this.nu=ns,this.EU=!1,this.RU=!1,this.OU=!1,this.zU=!1,this.Wd=[],this.VU=0,this.Fz=br({rectangleStyleSolid:()=>fe(this.Ze)&&this.Ze,rectangleStyleImage:()=>kt(this.Ze)&&this.Ze,rectangleStyleRadialGradient:()=>z(this.Ze)&&this.Ze,rectangleStyleLinearGradient:()=>G(this.Ze)&&this.Ze,rectangleStylePaletted:()=>ye(this.Ze)&&this.Ze,rectangleStyleIndividual:()=>ge(this.Ze)&&this.Ze,lineStyleSolid:()=>lr(this.Je)&&this.Je,lineStyleDashed:()=>fr(this.Je)&&this.Je,lineStyleFilled:()=>{const t=this.Je&&this.Je.getFillStyle();return fe(t)&&t}}),this.Sz=t,this.bz=i,this.ZB=t.Mz(),this.PV=this.ZB.mO}Ho(){const t={Fs:i=>this.YV(t,i),Ii:i=>this.jV(t,i),Md:(i,s,e,r)=>this.NU(t,i,s,e,r),bd:i=>this.GU(t,i),Bx:i=>this.XN(t,i),UI:i=>this.WV(t,i),$U:0,UU:0,YU:0,jU:0,M:void 0,ZN:void 0,gi:0,HA:!0,JN:this.Wd.length,HU:void 0};return this.Wd.push(t),t}Vi(){return this.Wd.length=0,this.EU=!0,this.pi.Ci(this),this}Bp(){return this.Wd}Zd(t){const i=this.Wd.indexOf(t);i>=0&&(this.Wd.splice(i,1),this.EU=!0,this.pi.Ci(this,t))}YV(t,i){return t.HA=i,this.EU=!0,t.HA||this.pi.Ci(this,t),t}jV(t,i){return t.gi=i,this.zU=!0,t}NU(t,i,s,e,r){return t.$U=i,t.UU=s,t.YU=e,t.jU=r,this.EU=!0,t}GU(t,i){return t.HU=!0===(null==i?void 0:i.c_x1_y1)||!0===(null==i?void 0:i.c_x1_y2)||(null==i?void 0:i.c_x2_y1)||!0===(null==i?void 0:i.c_x2_y2)?i:void 0,this.EU=!0,t}XN(t,i){return t.M=i,this.RU=!0,t}WV(t,i){return t.ZN=null==i?void 0:i.toUint32(),this.OU=!0,t}Nh(){const t=this.ui.T(),i=this.ui.u,s=this.ll(),e=this.zU;let r=this.EU;const h=this.RU,n=this.OU,o=this.Je,a=this.Al(),l=this.Wd.filter((t=>t.HA)),u=void 0!==this.Wd.find((t=>t.HU)),c=this.ai.ei();u&&c&&(r=!0);const d=this.Fz.rectangleStyleSolid(s),f=this.Fz.rectangleStylePaletted(s),A=this.Fz.rectangleStyleIndividual(s),g=this.Fz.rectangleStyleRadialGradient(s),p=this.Fz.rectangleStyleLinearGradient(s),v=this.Fz.rectangleStyleImage(s),y=d||f||p||g||v||A,m=this.Fz.lineStyleSolid(a),x=this.Fz.lineStyleDashed(s),S=m||x,b=this.Fz.lineStyleFilled(a),M=b,w=S&&Math.max(S.getThickness(),0);if(this.bD.FR(this.ai),r&&(this.nu=Ms(...l.map((t=>Ss([{x:t.$U,y:t.UU},{x:t.YU,y:t.jU}]))))),r||a&&x){const t=[],i=[],s=[];let e=0,r=0;const h=[];let n=0;if(u){const o=this.ai instanceof Z?this.ai.ni():{x:1e-4,y:1e-4},a=5;this.VU=4+4*a;const u=Math.sign(this.ai.x.U-this.ai.x.$),c=Math.sign(this.ai.y.U-this.ai.y.$);l.forEach((l=>{var d,f,A,g,p;const v=Math.sign(l.YU-l.$U),y=Math.sign(l.jU-l.UU),m={x:v===u?l.$U:l.YU,y:y===c?l.UU:l.jU},x={x:v===u?l.YU:l.$U,y:y===c?l.jU:l.UU},S=e,b=r,M=Math.abs((x.x-m.x)/o.x),w=Math.abs((x.y-m.y)/o.y),_=l.HU&&!0!==l.HU.skipTooSmallCheck&&Math.min(M,w)<2*l.HU.extent;t[S+0]=(l.$U+l.YU)/2,i[S+0]=(l.UU+l.jU)/2,s[b+0]=0,s[b+1]=0,t[S+1]=Number.NaN,i[S+1]=Number.NaN,s[b+2]=0,s[b+3]=0,e+=2,r+=4;for(let o=0;o<=3;o+=1){const u=0===o||3===o?x.x:m.x,c=0===o||1===o?x.y:m.y,v=u===l.$U&&c===l.UU?null===(d=l.HU)||void 0===d?void 0:d.c_x1_y1:u===l.YU&&c===l.UU?null===(f=l.HU)||void 0===f?void 0:f.c_x2_y1:u===l.$U&&c===l.jU?null===(A=l.HU)||void 0===A?void 0:A.c_x1_y2:null===(g=l.HU)||void 0===g?void 0:g.c_x2_y2,y=null===(p=l.HU)||void 0===p?void 0:p.extent;if(v&&y&&!_){const l=.5*o*Math.PI;for(let d=0;d<a;d+=1){const f=l+d/(a-1)*.5*Math.PI;let A,g;0===o?(A=Math.cos(f)-1,g=-1+Math.sin(f)):1===o?(A=1+Math.cos(f),g=Math.sin(f)-1):2===o?(A=1+Math.cos(f),g=1+Math.sin(f)):(A=-1+Math.cos(f),g=1+Math.sin(f)),t[e+0]=u,i[e+0]=c,s[r+0]=A*y,s[r+1]=g*y,e>1&&(h[n+0]=S,h[n+1]=e-1,h[n+2]=e,n+=3),e+=1,r+=2}}else for(let o=0;o<a;o+=1)t[e+0]=u,i[e+0]=c,s[r+0]=0,s[r+1]=0,h[n+0]=S,h[n+1]=e-1,h[n+2]=e,n+=3,e+=1,r+=2}h[n+0]=S,h[n+1]=S+2,h[n+2]=e-1,n+=3,t[e+0]=t[S+2],i[e+0]=i[S+2],s[r+0]=s[b+4],s[r+1]=s[b+5],t[e+1]=Number.NaN,i[e+1]=Number.NaN,s[r+2]=0,s[r+3]=0,e+=2,r+=4}))}else this.VU=6,l.forEach((o=>{t[e+0]=o.$U,i[e+0]=o.UU,s[r+0]=0,s[r+1]=0,t[e+1]=o.YU,i[e+1]=o.UU,s[r+2]=0,s[r+3]=0,t[e+2]=o.YU,i[e+2]=o.jU,s[r+4]=0,s[r+5]=0,t[e+3]=o.$U,i[e+3]=o.jU,s[r+6]=0,s[r+7]=0,t[e+4]=o.$U,i[e+4]=o.UU,s[r+8]=0,s[r+9]=0,t[e+5]=Number.NaN,i[e+5]=Number.NaN,s[r+10]=0,s[r+11]=0,h[n+0]=e+0,h[n+1]=e+1,h[n+2]=e+3,h[n+3]=e+1,h[n+4]=e+3,h[n+5]=e+2,e+=6,r+=12,n+=6}));if(this.WU=this.ZB.mR(fi(t,this.ai.zt()),void 0,this.WU),this.XU=this.ZB.mR(fi(i,this.ai.zt()),void 0,this.XU),this.ZU=this.ZB.mR(s,void 0,this.ZU),this.JU=this.ZB.sO(new Uint32Array(h),this.JU),this.QU=h.length,this.KU=e-1,x){const s=new Float32Array(2*t.length);let e=0,r=0,h=0,n=t[0],o=i[0];for(let a=0;a<t.length;a+=1){const l=t[a],u=i[a];Number.isNaN(l)||(r+=Math.abs(l-n),h+=Math.abs(u-o),n=l,o=u),s[e]=r,s[e+1]=h,e+=2}this.EV=this.ZB.mR(s,!1,this.EV)}this.qU=[t,i]}if((s||a||i)&&(this.DV.fill=y?{shader:this.ZB.SE(Tg["2D"],d&&Tg.Color({dataType:"uniform"}),p&&Tg.Color({dataType:["gradient",p]}),g&&Tg.Color({dataType:["gradient",g]}),f&&Tg.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&Tg.Color({dataType:"attribute"}),v&&Tg.Color({dataType:["image",v]}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Tg.AttributeHighlight),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Tg.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:v,fillStyleIndividual:A}:void 0,this.DV.border=S&&M&&"number"==typeof w&&0!==w?{shader:this.ZB.SE(Tg["2D"],Tg.Color({dataType:"uniform"}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),this.PV?Tg.AliasedEdge:void 0,x&&Tg.StippleTextureInstanced,Tg.AttributeHighlight),geometry:Op(this.ZB,w),mousePicking:t?{shader:this.ZB.SE(Tg["2D"],Tg.MousePicking({useAttribute:!0}),Tg.LineInstanced2D({axisWorldTranslation:xr(this.ai),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),x&&Tg.StippleTextureInstanced,Tg.AttributeHighlight)}:void 0,fillStyleSolid:b,lineStyleDashed:x,thickness:w}:void 0),e||r){const t=new Float32Array(l.length*this.VU);l.forEach(((i,s)=>{for(let e=0;e<this.VU;e+=1)t[s*this.VU+e]=i.gi})),this.tY=this.ZB.mR(t,!0,this.tY)}if(t){if(r||i){const t=new Float32Array(l.length*this.VU);l.forEach(((i,s)=>{for(let e=0;e<this.VU;e+=1)t[s*this.VU+e]=i.JN})),this.iY=this.ZB.mR(t,!1,this.iY)}}else this.iY&&(this.ZB.BR(this.iY),this.iY=void 0);if(h||r&&f&&"value"===f.getLookUpProperty()){const t=new Float32Array(l.length*this.VU),i={min:rs,max:hs};l.forEach(((s,e)=>{const r=void 0!==s.M?s.M:It;for(let i=0;i<this.VU;i+=1)t[e*this.VU+i]=r;void 0!==s.M&&(i.min=Math.min(i.min,r),i.max=Math.max(i.max,r))})),this.sG=i,this.sY=this.ZB.mR(t,!1,this.sY)}if(n||r&&A){const t=new Uint32Array(l.length*this.VU),i=A?A.getFallbackColor().toUint32():C.toUint32();l.forEach(((s,e)=>{const r=void 0!==s.ZN?s.ZN:i;for(let i=0;i<this.VU;i+=1)t[e*this.VU+i]=r})),this.eY=this.ZB.mR(t,!1,this.eY,Uint32Array)}return g?this.Rz=ap(this.Ai||this.nu,this.ai,g.getPosition(),g.getExtent(),g.getShape(),this.ZB.hR()):p?this.Oz=lp(this.Ai||this.nu,this.ai,p.getAngle(!0),this.ZB.hR()):(this.Rz=void 0,this.Oz=void 0),x?this.RV=this.ZB.HO(x.getPattern()):(this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.RV=void 0),this.hG=this.ZB.QO(this,this.hG,v,void 0,r||this.ai.ei(),((t,i,s)=>this.nG(t,i,s,l))),this.zU=!1,this.EU=!1,this.RU=!1,this.OU=!1,this.ui.u=!1,this.fl(this.Ze),this.yl(o),this}wc(t,i){var s,e;const{fill:r,border:h}=this.DV,n=this.WU,o=this.XU,a=this.ZU,l=this.JU,u=this.QU,c=this.KU,d=this.tY,f=this.iY;if(!(d&&n&&o&&a))return{};if(r&&l&&u){const e=1===t?null===(s=r.mousePicking)||void 0===s?void 0:s.shader:r.shader;e&&this.ZB.Kc(e).SR(e,((s,e,h,c)=>!!this.ZB.qO(h,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:r.fillStyleSolid,fillStyleLinearGradient:r.fillStyleLinearGradient,fillStyleRadialGradient:r.fillStyleRadialGradient,fillStylePaletted:r.fillStylePaletted,fillStyleImage:r.fillStyleImage,fillStyleIndividual:r.fillStyleIndividual,linearGradientInfo:this.Oz,radialGradientInfo:this.Rz,texturedFillGLInfo:this.hG,colorBuffer:this.eY,lookupValueBuffer:this.sY,lookupValueRange:this.sG,highlightBuffer:d,coordsX:n,coordsY:o,coordsHighPrecision:this.ai.zt(),mousePickingOffsetBuffer:f})&&(this.ZB.bR(a,void 0,{location:e("aGeoAmount"),size:2}).lO(l),this.ZB.cO(u,this.ZB.gl.TRIANGLES,void 0,this.ZB.gl.UNSIGNED_INT),!0)))}if(h&&c){const{geometry:s,thickness:r,lineStyleDashed:l}=h,u=1===t?null===(e=h.mousePicking)||void 0===e?void 0:e.shader:h.shader;u&&this.ZB.Kc(u).SR(u,((e,u,A,g)=>{if(!this.ZB.qO(A,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:h.fillStyleSolid,highlightBuffer:d,highlightAttribDivisor:1,mousePickingOffsetBuffer:f,mousePickingOffsetAttribDivisor:1}))return!1;if(l){if(!this.RV||!this.EV)return!1;zp.CV(this.ZB,A,this.EV,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0),this.ZB.MR(e("uStippleCount"),[this.pi.kt().x/this.RV.ZO,this.pi.kt().y/this.RV.ZO])._R(g("uStippleTextureWidthLimiter"),this.RV.XO/this.RV.ZO)._R(e("uStippleScale"),l.getPatternScale()).wR(e("uStippleTexture"),this.RV.WO,1)}return Np(this.ZB,A,this.ai.zt(),n,"aLocation","X",1,!1,this.ZB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Np(this.ZB,A,this.ai.zt(),o,"aLocation","Y",1,!1,this.ZB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Np(this.ZB,A,!1,a,"aGeo","",2,!1,this.ZB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),zp.wc(this.Sz,s,A,this.PV&&1!==t,1===t,r,c),!0}))}return{idCount:this.Wd.length}}nG(t,i,s,e){if(!this.qU)return new Float32Array;const r=q({x:this.nu.min.x,y:this.nu.min.y},this.ai,this.pi.ai),h=q({x:this.nu.max.x,y:this.nu.max.y},this.ai,this.pi.ai),n={x:Math.abs(r.x-h.x),y:Math.abs(r.y-h.y)},o=fp(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=this.nu.max.x-this.nu.min.x,f=this.nu.max.y-this.nu.min.y,A=l-u,g=c-a,p=new Float32Array(2*this.qU[0].length);let v=0;for(let t=0;t<this.qU[0].length;t+=1){const i=this.qU[0][t],s=this.qU[1][t],e=u+A*((i-this.nu.min.x)/d),r=a+g*((s-this.nu.min.y)/f);p[v]=e,p[v+1]=r,v+=2}return p}kc(t,i,s,e,r){return{collectionMember:this.Wd.find((s=>i+s.JN===t))}}_c(){return this.WU=this.ZB.BR(this.WU),this.XU=this.ZB.BR(this.XU),this.ZU=this.ZB.BR(this.ZU),this.tY&&(this.ZB.BR(this.tY),this.tY=void 0),this.iY&&(this.ZB.BR(this.iY),this.iY=void 0),this.sY&&(this.ZB.BR(this.sY),this.sY=void 0),this.eY&&(this.ZB.BR(this.eY),this.eY=void 0),this.EV&&(this.ZB.BR(this.EV),this.EV=void 0),this.JU&&(this.ZB.BR(this.JU),this.JU=void 0),this.DV={fill:void 0,border:void 0},this.hG=this.ZB.KO(this,this.hG),this}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}uu(){return Yi(this.Je)}cu(){return Yi(this.Je)}}class wv extends bv{constructor(t,i,s){super(t,i,s),this.Sz=t,this.gl=t.Mz(),this.rY=this.Ei}vR(t){const i=t instanceof dn&&t;if(!i)return ns;const s=i.Hi(),e=i.Wi(),r=i.Xi(),h=i.Zi();if(s===rs||e===hs||r===rs||h===hs)return ns;const n=i.uu(),o=i.cu(),a=fn({min:{x:s,y:r},max:{x:e,y:h}},{x:n,y:o},i.ai),l={min:q(a.min,i.ai,t.pi.ai),max:q(a.max,i.ai,t.pi.ai)},u=this.DU.T();let c;if(u){if(c={min:{x:Math.min(l.min.x,u.x),y:Math.min(l.min.y,u.y)},max:{x:Math.max(l.max.x,u.x+u.width),y:Math.max(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return ns}else c=l;return c}dr(t){return this.LU(new Gp(this.Sz,this,t,this.PU,[]))}bA(t){return this.LU(new $p(this.Sz,this,t,this.PU,[]))}Np(t,i,s){return this.LU(new Zp(this.Sz,this,t,this.PU,s,i))}zd(t){return this.LU(new ov(this.Sz,this,t,this.PU))}_n(t,i){return this.pi.xc&&!1!==i?this.LU(this.pi.xc._n(this.Sz,this,t,this.PU)):this.LU(new dv(this.Sz,this,t,this.PU,[]))}Tc(t,i=_n.Simple){if(i===_n.Simple)return this.LU(new Kp(this.Sz,this,t,this.PU,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}Yp(t){return this.LU(new Jp(this.Sz,this,t,this.PU,[]))}md(t){return this.LU(new Mv(this.Sz,this,t,this.PU,[]))}tr(t){return this.LU(new Qp(this.Sz,this,t,this.PU,[]))}qb(t){return this.LU(new Ep(this.Sz,this,t,this.PU,[]))}_d(t){return this.LU(new Cp(this.Sz,this,t,this.PU,[]))}Mb(t,i,s){if("intensity"===s.heatmapDataType)return this.LU(new yv(this.Sz,this,t,this.PU,i,s));throw new bA("Unimplemented Heatmap Grid Static type")}pb(t,i,s){return this.LU(new pv(this.Sz,this,t,this.PU,i,s))}Y_(t,i,s){return this.LU(new xv(this.Sz,this,t,this.PU,i,s))}hY(t){return this.LU(new wp(this.Sz,this,this.PU,[],t))}Nh(){if(this.rl){this.rl=!1;const t=Array.from(this.Ei).sort(((t,i)=>t.ol()-i.ol()));this.Ei.clear();for(const i of t)this.Ei.add(i)}for(const t of this.Ei)t.Nh();return this}wc(t,i,s){var e;const r=this.DU.T();let h;if(r){const t=r.x*this.gl.hR()*i,s=r.y*this.gl.hR()*i,e=Math.ceil(t),n=Math.ceil(s);h=[e,n,Math.floor(t+r.width*this.gl.hR()*i)-e,Math.floor(s+r.height*this.gl.hR()*i)-n],this.gl.yR(h[0],h[1],h[2],h[3])}if(1!==t){for(const s of this.Ei)if(s.getVisible()){if(s.us){const t=s.us.x*this.gl.hR()*i,e=s.us.y*this.gl.hR()*i,r=Math.ceil(t),h=Math.ceil(e),n=Math.floor(t+s.us.width*this.gl.hR()*i)-r,o=Math.floor(e+s.us.height*this.gl.hR()*i)-h;this.gl.yR(r,h,n,o)}s.wc(t,0),s.us&&h&&this.gl.yR(h[0],h[1],h[2],h[3])}}else{let r=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const n=Array.from(this.rY.values());for(let e=0;e<n.length;e+=1){const o=n[e];if(o.getPointerEvents()&&o.getVisible()){if(o.us){const t=o.us.x*this.gl.hR()*i,s=o.us.y*this.gl.hR()*i,e=Math.ceil(t),r=Math.ceil(s),h=Math.floor(t+o.us.width*this.gl.hR()*i)-e,n=Math.floor(s+o.us.height*this.gl.hR()*i)-r;this.gl.yR(e,r,h,n)}const{idCount:n}=o.wc(t,r);o.us&&h&&this.gl.yR(h[0],h[1],h[2],h[3]),void 0!==n&&(s.push({entity:o,layer:this,entityIndex:e,idFirst:r,idCount:n,idLast:r+n-1}),r+=n)}}}return this.gl.dR(!1),this}}class _v extends up{constructor(t){super(t)}}class kv extends _v{constructor(t){super(t),this.nY="attribute";const{vertices:i,drawSize:s,drawMode:e}=Cv(t.gl);this.VB=t.mR(i),this.wV=s,this._V=e}Nk(t,i,s,e){return this.ZB.bR(this.VB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).dO(this._V,0,this.wV,i),this}$E(){this.ZB.BR(this.VB)}}const Cv=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class Tv extends _v{constructor(t,i){super(t),this.nY="attribute",this.oY=i;const{vertices:s,indices:e}=Fv();this.VB=t.mR(s),this.MV=t.sO(e),this.wV=e.length,this._V=t.gl.TRIANGLES}Nk(t,i,s,e){return this.ZB.bR(this.VB,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).lO(this.MV)._R(t.uniform("uEdgeRoundness"),this.oY/2).fO(this._V,this.wV,0,i),this}$E(){this.ZB.BR(this.VB),this.ZB.BR(this.MV)}aY(t){return this.oY=t,this}lY(){return this.oY}}const Fv=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let r=0;for(const h of t){const{normal:t,perpendA:n,perpendB:o}=h,a=es.multiply(n,-1),l=es.multiply(o,-1),u=s;i[s]={thicknessDirection:es.addVec(t,n,o),edge:es.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:es.addVec(t,a,o),edge:es.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:es.addVec(t,a,l),edge:es.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:es.addVec(t,n,l),edge:es.addVec(a,o),normal:t},s+=1,e[r+0]=d,e[r+1]=u,e[r+2]=f,e[r+3]=d,e[r+4]=c,e[r+5]=u,r+=6;const A=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of A){e.thicknessDirection=es.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const r=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const h of r)for(let r=0;r<8;r+=1){const n=.5*r/7,o=es.normalize(es.lerp(t,h.direction,n)),a=Math.PI/2-es.angle(o,t),l=es.addVec(es.multiply(es.multiply(h.direction,-1),1-Math.cos(a)),es.multiply(es.multiply(t,-1),1-Math.sin(a)),es.multiply(h.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,h.vertices.push({index:u,vertex:c})}}for(let t=0;t<A.length;t+=1){const i=A[t],s=A[t<A.length-1?t+1:0],h=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<h.length;t+=1){const i=h[t-1],s=n[t-1],o=h[t],a=n[t];e[r+0]=i.index,e[r+1]=s.index,e[r+2]=a.index,e[r+3]=o.index,e[r+4]=i.index,e[r+5]=a.index,r+=6}}}const h=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of h){let r=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,r+=1;for(let e=1;e<8.5;e+=1){const h=15===e?Math.PI:e*n,a=1*Math.cos(h)*t.y,l=Math.sin(h);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const h=15===e?0:e*o,n=l*Math.cos(h)*1*t.x,u=l*Math.sin(h)*1*t.z,c={x:n,y:a,z:u},d=es.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,r+=1}}const h=[];for(let t=1;t<=Math.ceil(3.75);t+=1)h.push(a),15===t?h.push(a+1):h.push(a+t+1),h.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let r=0;14===i?(s=l+t*u,r=l+(t+1)*u):(s=l+t*u+i+1,r=l+(t+1)*u+i+1),h.push(l+t*u+i),h.push(s),h.push(e),h.push(e),h.push(s),h.push(r)}e.push.apply(e,t.flipVertexOrder?h.reverse():h),a+=r}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},Iv=(t,i)=>{let s=t.NR.GE.get(i);return s||(s=void 0!==i&&i>0?new Tv(t,Wt(i,0,1)):new kv(t),t.NR.GE.set(i,s),s)};class Lv extends gp{lp(t){return this.rR=this.sp.T(),this.sp.C(t),this}vy(t){return this.uY=t,this}yy(){return this.uY}}class Pv extends Lv{constructor(t,i,s){super(t,i,s),this.cY=t,this.Sz=t.Sz,this.ZB=this.Sz.Mz()}}const Bv=11;class Dv extends Pv{constructor(t,i,s){super(t,i,s),this.uY="cull-back",this.nu=os,this.dY={},this.fY=[],this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStyleIndividual:()=>ge(this.Ze)&&this.Ze,fillStylePaletted:()=>ye(this.Ze)&&this.Ze}),this.Ze=ln.fillStyle,this.sp.C(Je)}Nh(t){const i=this.fY,s=this.Ze,e=s!==ae,r=this.AY,h=this.ll()||this.gY!==r,n=this.eR(),o=this.ui.T(),a=this.ui.u;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=this.pY||0;let e=t;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.dY[i]||(e+=1)}let r,l=!1,u=!1;if(l=e!==t,u=l,r=!u&&(i.length<100?"chunks":"all"),l){const i=e*Bv,s=new Float32Array(i);this.vY&&s.set(this.vY),this.vY=s,this.yY=i,this.mY=t*Bv}const c=ge(s)?s.getFallbackColor():void 0;for(const t of i){const i=t.id,s=void 0!==i&&this.dY[i],e=[t.xCenter,t.yCenter,t.zCenter,t.xSize,t.ySize,t.zSize,t.color?t.color.r:c?c.r:void 0,t.color?t.color.g:c?c.g:void 0,t.color?t.color.b:c?c.b:void 0,t.color?t.color.a:c?c.a:void 0,t.value];if(s){for(let t=0;t<Bv;t+=1)e[t]=void 0!==e[t]?e[t]:s.buffer[t];s.buffer.set(e)}else{const t=this.mY,s=new Float32Array(this.vY.buffer,t*Float32Array.BYTES_PER_ELEMENT,Bv);s.set(e),void 0!==i&&(this.dY[i]={location:t,buffer:s}),this.mY+=Bv}}if(u&&(this.bV=this.ZB.mR(this.vY,!0)),"all"===r)this.ZB.qR(this.bV,0,this.vY);else if("chunks"===r)for(const t of i){const i=t.id;if(void 0!==i){const t=this.dY[i];this.ZB.qR(this.bV,t.location,t.buffer)}}if(h||n||a){const t=this.Fz.fillStyleSolid(h),i=this.Fz.fillStyleIndividual(h),s=this.Fz.fillStylePaletted(h);t||i||s?(this.xY=Iv(this.ZB,this.SY()),this._D=this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.sp.T().type}),Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:xr(this.ai),normalSource:this.xY.nY}),void 0!==this.AY&&Tg.RoundedEdges3D),this.P$=o?this.ZB.SE(Tg["3D"],Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:xr(this.ai),normalSource:void 0}),Tg.MousePicking(),void 0!==this.AY&&Tg.RoundedEdges3D):void 0):(this.xY=void 0,this._D=void 0,this.P$=void 0)}if(i.length>0){const t=f({x:rs,y:rs,z:rs},{x:hs,y:hs,z:hs});for(let i=0;i<this.mY;i+=Bv){const s=this.vY[i+0],e=this.vY[i+3]/2,r=s-e,h=s+e,n=this.vY[i+1],o=this.vY[i+4]/2,a=n-o,l=n+o,u=this.vY[i+2],c=this.vY[i+5]/2,d=u-c,f=u+c;t.min.x=t.min.x<r?t.min.x:r,t.min.y=t.min.y<a?t.min.y:a,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>h?t.max.x:h,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.nu=t}this.pY=e,this.fY.length=0}return this.fl(s),this.gY=r,this.sp.u=!1,this.ui.u=!1,this}wc(t,i){const s=1===t?this.P$:this._D,e=this.xY,r=this.bV,h=this.Ze,n=this.pY,o=this.sp.T(),a=n||0;return s&&r&&void 0!==n&&this.ZB.SR(s,((l,u,c)=>{let d=!1;const f=u("aPos"),A=u("aOffsetAxis");this.ZB.Kc(s).HR(l("uScale"),this.cY.bD.kR()).HR(l("uDisp"),this.cY.bD.CR()).XR(l("uViewProjectionMatrix"),this.bY)._R(l("uIsHighlighted"),1===t||2===t?0:this.gi).UI(l("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(l("uRenderEffectMask"),2===t?1:0);const g={location:f,size:3},p={location:A,size:3},v={location:void 0,size:4},y={location:void 0,size:1};if(1!==t&&"phong"===o.type&&this.ZB.HR(l("uCameraLoc"),this.MY).HR(l("uLightLoc"),this.wY)._R(l("uAmbientReflection"),o.ambientReflection)._R(l("uSpecularReflection"),o.specularReflection)._R(l("uDiffuseReflection"),o.diffuseReflection)._R(l("uShininess"),o.shininess).UI(l("uLightColor"),o.specularColor).UI(l("uAmbientColor"),o.ambientColor),1===t)this.ZB.ZR(l("uFirstId"),i).UO(c,a);else if(fe(h))this.ZB.UI(l("uColorDiffuse"),h.getColor());else if(ge(h)){const t=u("aColor");v.location=t}else if(ye(h)){const t=Mr(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.ZB.JO(c,h.lut,t),"value"===h.lookUpProperty&&(y.location=u("aLookupValue"))}return r&&(this.ZB.bR(r,1,g,p,v,y),e.Nk(c,n,"phong"===o.type&&1!==t,!1),d=!0),d})),{idCount:a}}kc(t,i,s,e,r){const h=(t-i)*Bv;if(!this.vY)return{};const n=this.vY[h+0],o=this.vY[h+1],a=this.vY[h+2],l=this.vY[h+3],u=this.vY[h+4],c=this.vY[h+5],d=Zt(this.vY[h+6],void 0),f=Zt(this.vY[h+7],void 0),A=Zt(this.vY[h+8],void 0),g=Zt(this.vY[h+9],void 0),p=Zt(this.vY[h+10],void 0);let v;for(const t of Object.keys(this.dY))if(this.dY[t].location===h){v=t;break}return{info:{dataPoint:{x:n,y:o,z:a,xSize:l,ySize:u,zSize:c,r:d,g:f,b:A,a:g,intensity:p,id:v}}}}dispose(){return super.dispose(),this.bV&&(this.ZB.BR(this.bV),this.bV=void 0),this._D=void 0,this}_c(){return this.dispose(),this}mp(t){this.fY=Ti(this.fY,t,{canReturnB:!0})}Vi(){this.bV&&(this.ZB.BR(this.bV),this.bV=void 0),this.vY=void 0,this.yY=0,this.mY=0,this.dY={},this.pY=0,this.fY=[],this.nu=os}qe(t){return this.Ze=An(this.Ze,t),this}Mh(){return this.Ze}pp(t){return this.AY=void 0!==t&&t>0?Wt(t,0,1):void 0,this}SY(){return this.AY}Wi(){return this.nu.max.x}Hi(){return this.nu.min.x}Zi(){return this.nu.max.y}Xi(){return this.nu.min.y}ye(){return this.nu.max.z}ve(){return this.nu.min.z}uu(){return 0}cu(){return 0}fp(){return 0}ll(){return gn(this.ul,this.Ze)}fl(t){this.ul=t}}class Ev extends up{constructor(t,i){super(t),this.nY="custom",this.xV=i;const{vertices:s,drawSize:e}=this.SV();this.bV=t.mR(s),this.wV=e}Kc(t){return this.ZB.bR(this.bV,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Nk(t){return this.ZB.dO(this.ZB.gl.TRIANGLE_STRIP,0,this.wV,t),this}SV(){const t=this.xV,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const r=2*Math.PI*e/t,h=Math.cos(r),n=Math.sin(r);for(const t of[0,1])i[s+0]=t,i[s+1]=h,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}$E(){this.ZB.BR(this.bV)}}const Rv=(t,i=16)=>{let s=t.NR.VE.get(i);return s||(s=new Ev(t,i),t.NR.VE.set(i,s),s)};class Ov extends Pv{constructor(t,i,s){super(t,i,s),this.uY="cull-back",this._Y=os,this.kY=[],this.CY=!1,this.hc=ln.lineStyle,this.sp.C(Xe)}Nh(t){const i=this.CY,s=this.hc,e=this.oc!==s,r=this.eR(),h=i;if(i){const t=gi(this.kY);this.TY=this.ZB.mR(t,!1,this.TY)}if(h&&(this._Y=bs(this.kY)),e||r){const t=8,i=lr(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.DV=void 0,fe(i)&&("primitive"===e?this.DV={type:e,shader:this.ZB.SE(Tg["3D"],Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}),Tg.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.DV={type:e,shader:this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:"uniform",shadingStyle:this.sp.T().type}),Tg.LineInstanced3D({axisWorldTranslation:xr(this.ai)})),geometry:Rv(this.ZB,t),fillStyle:i}))}return this.CY=!1,this.oc=s,this.sp.u=!1,this}wc(t,i){if(1===t)return{};const s=this.ZB.gl,e=this.DV,r=this.TY,h=this.hc,n=this.sp.T();if(e&&r&&lr(h))switch(e.type){case"instanced":{const i=.5*this.Ws.Hp(h.thickness),o=e.fillStyle.getColor(),a=e.shader,l=e.geometry;this.ZB.SR(a,((e,h,u)=>{this.ZB.Kc(a).HR(e("uScale"),this.cY.bD.kR()).HR(e("uDisp"),this.cY.bD.CR()).XR(e("uViewProjectionMatrix"),this.bY).UI(e("uColorDiffuse"),o)._R(e("uOffsetWU"),i)._R(e("uIsHighlighted"),this.gi).UI(e("uHighlightColorOffset"),2===t?T:this.Si)._R(e("uRenderEffectMask"),2===t?1:0),"phong"===n.type&&this.ZB.HR(e("uCameraLoc"),this.MY).HR(e("uLightLoc"),this.wY)._R(e("uAmbientReflection"),n.ambientReflection)._R(e("uSpecularReflection"),n.specularReflection)._R(e("uDiffuseReflection"),n.diffuseReflection)._R(e("uShininess"),n.shininess).UI(e("uLightColor"),n.specularColor).UI(e("uAmbientColor"),n.ambientColor),s.bindBuffer(s.ARRAY_BUFFER,r);const c=h("aLocationA"),d=h("aLocationB");return s.vertexAttribPointer(c,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(c,1),s.enableVertexAttribArray(c),s.vertexAttribPointer(d,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(d,1),s.enableVertexAttribArray(d),l.Kc(u).Nk(this.kY.length/2),!0}));break}case"primitive":{const i=lr(h)?h.getFillStyle():void 0,n=i&&fe(i)?i.getColor():void 0;if(n){const i=e.shader;this.ZB.SR(i,((e,h)=>(this.ZB.Kc(i).HR(e("uScale"),this.cY.bD.kR()).HR(e("uDisp"),this.cY.bD.CR()).XR(e("uViewProjectionMatrix"),this.bY).UI(e("uColor"),n)._R(e("uIsHighlighted"),this.gi).UI(e("uHighlightColorOffset"),2===t?T:this.Si)._R(e("uRenderEffectMask"),2===t?1:0).bR(r,void 0,{location:h("aPos"),size:3}).Nk(s.LINES,this.kY.length),!0)))}break}}return{idCount:this.kY.length}}kc(t,i,s,e,r){return{}}bu(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.kY.push(s),this.kY.push(e)}return this.CY=!0,{Ii(){return this},Fs(){return this}}}Vi(){return this.kY.length=0,this.CY=!0,this}Bp(){return[]}Zd(t){}cr(t){return this.hc="function"==typeof t?t(this.hc):t,this}do(){return this.hc}_c(){return this.TY&&(this.ZB.BR(this.TY),this.TY=void 0),this}Wi(){return this._Y.max.x}Hi(){return this._Y.min.x}Zi(){return this._Y.max.y}Xi(){return this._Y.min.y}ye(){return this._Y.max.z}ve(){return this._Y.min.z}uu(){const t=this.hc;return t===Tt?0:t.getThickness()}cu(){const t=this.hc;return t===Tt?0:t.getThickness()}fp(){const t=this.hc;return t===Tt?0:t.getThickness()}}class zv extends up{constructor(t,i,s){super(t),this.nY="gpu-calculate",this.FY=i,this.IY=s;const{vertices:e,drawSize:r}=this.SV();this.bV=t.mR(e),this.wV=r}Nk(t,i,s,e){return this.ZB.bR(this.bV,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).dO(this.ZB.gl.TRIANGLES,0,this.wV,i),this}SV(){const t=this.IY,i=this.FY,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const r=2*Math.PI/i,h=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*r,u=Math.PI/2-t*h,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),A=Math.sin(u);s[e]=d,s[e+1]=A,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&Ri(0,(()=>{this.ZB.Pg.Ea&&e>s.length&&Nt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}$E(){this.ZB.BR(this.bV)}}const Vv=(t,i)=>{const s=Math.round(i);s<3&&Ri(0,jt);const e=s;let r=t.NR.NE.get(Array.from(t.NR.NE.keys()).find((t=>t.sectors===s&&t.stacks===e)));return r||(r=new zv(t,s,e),t.NR.NE.set({sectors:s,stacks:e},r),r)};class Nv extends Pv{constructor(t,i,s,e){super(t,i,s),this.uY="cull-back",this._b=[],this.DV={},this.DN=new Wp(this._b,(t=>t.vertexBuffer&&this.ZB.BR(t.vertexBuffer)),!0),this.fc=[],this.Ac=0,this.pu=[],this.LY=0,this.nu=os,this.PY=os,this.Fz=br({lineStyleSolid:()=>{const t=this.hc;return lr(t)&&t},lineFillSolid:()=>{const t=this.hc.getFillStyle();return fe(t)&&t},lineFillPaletted:()=>{const t=this.hc.getFillStyle();return ye(t)&&t},jointStyleTriangulatedPoints:()=>sr(this.ov)&&this.ov,jointSizeTriangulated:()=>{const t=this.ov;return sr(t)&&t.getSize()},jointFillSolid:()=>{const t=this.ov.getFillStyle();return fe(t)&&t},jointFillPaletted:()=>{const t=this.ov.getFillStyle();return ye(t)&&t},wireframeLineStyleSolid:()=>{const t=sr(this.ov)&&this.ov.getWireframeStyle();return lr(t)&&t},wireframeFillSolid:()=>{const t=sr(this.ov)&&this.ov.getWireframeStyle(),i=t&&t.getFillStyle();return fe(i)&&i}}),this.nU=g(void 0),this.mu=!1,this.Da=e,this.hc=ln.lineStyle,this.ov=ln.pointStyle3D,this.sp.C(Je);const r=!0===(null==e?void 0:e.individualLookupValuesEnabled);let h,n=0;n+=3,r&&(h=n,n+=1);const o=pi(!1,!1,r,!1);this.VN={attributeOffsetCoordinate:0,individualLookupValuesEnabled:r,attributesPerVertex:n,attributeOffsetLookUpValue:h,prepareRenderData:(t,i)=>o(t,void 0,this.hc.getFillStyle())}}_i(){return this.nU.T()||this.nU._}kc(t,i,s,e,r){return{info:{dataPoint:this.fc[t-i]}}}Nh(t){const i=this.mu,s=this.pu,e=this.LY,r=e>0,h=this.hc,n=h!==this.oc,o=this.ov,a=o!==this.BY,l=this.eR(),u=this.ui.u,c=this.ui.T();this.PY&&(this.nu=ws(this.nu,this.PY),this.PY=void 0),r&&(this.fc=Ti(this.fc,s,{canReturnB:!0}),this.Ac+=e);let d=s,f=e;if(i&&(this._b.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=os})),this.DN.wN(),d=this.fc,f=this.Ac),f>0){const t=1e5,i=Math.floor(this.Sz.DY/(this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.wi("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=Wt(s,t,i);this.DN.xN(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:os,vertexBuffer:this.ZB.KR(t*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s))})),((t,i,s,e)=>{this.ZB.qR(t.vertexBuffer,t.existingCoordinatesCount*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}const A=this.Fz.lineStyleSolid(n),g=this.Fz.lineFillSolid(n),p=this.Fz.lineFillPaletted(n),v=g||p;if(n||a||l||u){const t={},i=this.Fz.jointStyleTriangulatedPoints(a),s=this.Fz.jointSizeTriangulated(a),e=this.Fz.jointFillSolid(a),r=this.Fz.jointFillPaletted(a),n=e||r,o=this.Fz.wireframeLineStyleSolid(a),l=this.Fz.wireframeFillSolid(a),u=this.VN.individualLookupValuesEnabled,d=h.getThickness()<0||1===h.getThickness()&&this.wi("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",f=p?["lookup",p.getLookUpProperty(),p.lut]:"uniform";if(p&&"value"===p.getLookUpProperty()&&!u){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Nt.alert(t),new Error(t)}if("primitive"===d&&v?t.lines={type:"primitive",fillStyleSolid:g,fillStylePaletted:p,shader:this.ZB.SE(Tg["3D"],Tg.Color({dataType:f}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})),mousePicking:c?{shader:this.ZB.SE(Tg["3D"],Tg.MousePicking({useVertexId:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}))}:void 0}:"instanced"===d&&A&&v&&(t.lines={type:"instanced",lineStyleSolid:A,fillStyleSolid:g,fillStylePaletted:p,shader:this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:f,shadingStyle:this.sp.T().type}),Tg.LineInstanced3D({axisWorldTranslation:xr(this.ai)})),geometry:Gv(this.ZB,A.getThickness()),mousePicking:c?{shader:this.ZB.SE(Tg["3D"],Tg.MousePicking(),Tg.LineInstanced3D({axisWorldTranslation:xr(this.ai)}))}:void 0}),t.markers=void 0,n&&i){const h=ki(i.getShape(),{cube:()=>Iv(this.ZB),sphere:()=>$v(this.ZB,i)});t.markers={geometry:h,pointStyle:i,pointSizeNWU:"number"==typeof s&&s,pointSizeAxis:"object"==typeof s&&s,fillStyleSolid:e,fillStylePaletted:r,shader:this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:r?["lookup",r.getLookUpProperty(),r.lut]:"uniform",shadingStyle:this.sp.T().type,wireframe:!1!==l}),Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:xr(this.ai),normalSource:h.nY})),mousePicking:c?{shader:this.ZB.SE(Tg["3D"],Tg.MousePicking(),Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:xr(this.ai),normalSource:void 0}))}:void 0,wireframe:o&&l&&{thickness:o.getThickness(),fillStyleSolid:l}}}this.DV=t}if(void 0===this.nU.T()&&p&&"value"===p.lookUpProperty&&p.lut.percentageValues){let t=hs,i=rs;for(let s=0;s<this.fc.length;s+=1){const e=this.fc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.nU.C({min:i,max:t})}return this.nU._=void 0,this.mu=!1,this.pu=[],this.LY=0,this.oc=h,this.BY=o,this.sp.u=!1,this.ui.u=!1,this}wc(t,i){var s,e;const r=this.ZB.gl,{lines:h,markers:n}=this.DV,o=this.sp.T(),a=this.Ac,l=1===t?null===(s=null==h?void 0:h.mousePicking)||void 0===s?void 0:s.shader:null==h?void 0:h.shader;if(h&&l&&"instanced"===h.type){const s=l,{geometry:e,lineStyleSolid:n,fillStyleSolid:a,fillStylePaletted:u}=h;this.ZB.SR(s,((h,l,c)=>{let d=!1;if(this.ZB.Kc(s).HR(h("uScale"),this.cY.bD.kR()).HR(h("uDisp"),this.cY.bD.CR()).XR(h("uViewProjectionMatrix"),this.bY)._R(h("uOffsetWU"),this.Ws.Hp(n.getThickness()))._R(h("uIsHighlighted"),1===t||2===t?0:this.gi).UI(h("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.ZB.HR(h("uCameraLoc"),this.MY).HR(h("uLightLoc"),this.wY)._R(h("uAmbientReflection"),o.ambientReflection)._R(h("uSpecularReflection"),o.specularReflection)._R(h("uDiffuseReflection"),o.diffuseReflection)._R(h("uShininess"),o.shininess).UI(h("uLightColor"),o.specularColor).UI(h("uAmbientColor"),o.ambientColor),1===t);else if(a)this.ZB.UI(h("uColorDiffuse"),a.getColor());else if(u){const t=Mr(u,this,this.nU.T());if(!t&&u.lut.percentageValues)return!1;this.ZB.JO(c,u.lut,t)}const f=qi(i);return this._b.forEach((i=>{if(1===t){const[t,s]=f.ss(i.existingDataPointsCount);this.ZB.ZR(h("uFirstId"),t).UO(c,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=l("aLocationA"),n=l("aLocationB");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(s,1),r.enableVertexAttribArray(s),r.vertexAttribPointer(n,3,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.VN.attributeOffsetCoordinate+this.VN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(n,1),r.enableVertexAttribArray(n),u&&"value"===u.getLookUpProperty()&&void 0!==this.VN.attributeOffsetLookUpValue&&1!==t){const t=l("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(t,1),r.enableVertexAttribArray(t)}e.Kc(c).Nk(i.existingCoordinatesCount-1),d=!0})),d}))}if(h&&l&&"primitive"===h.type){const s=l,{fillStyleSolid:e,fillStylePaletted:n}=h;this.ZB.SR(s,((h,o,a)=>{let l=!1;if(this.ZB.Kc(s).HR(h("uScale"),this.cY.bD.kR()).HR(h("uDisp"),this.cY.bD.CR()).XR(h("uViewProjectionMatrix"),this.bY)._R(h("uIsHighlighted"),1===t||2===t?0:this.gi).UI(h("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(h("uRenderEffectMask"),2===t?1:0),1===t);else if(e)this.ZB.UI(h("uColor"),e.getColor());else if(n){const t=Mr(n,this,this.nU.T());if(!t&&n.lut.percentageValues)return!1;this.ZB.JO(a,n.lut,t)}const u=qi(i);return this._b.forEach((i=>{if(1===t){const[t,s]=u.ss(i.existingDataPointsCount);this.ZB.ZR(h("uFirstId"),t).GO(a,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=o("aPos");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),r.enableVertexAttribArray(s),n&&"value"===n.getLookUpProperty()&&void 0!==this.VN.attributeOffsetLookUpValue&&1!==t){const t=o("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),r.enableVertexAttribArray(t)}this.ZB.Nk(r.LINE_STRIP,i.existingCoordinatesCount),l=!0})),l}))}const u=1===t?null===(e=null==n?void 0:n.mousePicking)||void 0===e?void 0:e.shader:null==n?void 0:n.shader;if(n&&u){const s=u,{geometry:e,fillStyleSolid:h,fillStylePaletted:a,pointSizeAxis:l,pointSizeNWU:c,wireframe:d}=n;this.ZB.SR(s,((n,u,f,A)=>{let g=!1;if(this.ZB.Kc(s).HR(n("uScale"),this.cY.bD.kR()).HR(n("uDisp"),this.cY.bD.CR()).XR(n("uViewProjectionMatrix"),this.bY)._R(A("uRatioNwuWu"),this.cY.EY())._R(n("uIsHighlighted"),1===t||2===t?0:this.gi).UI(n("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.ZB.HR(n("uCameraLoc"),this.MY).HR(n("uLightLoc"),this.wY)._R(n("uAmbientReflection"),o.ambientReflection)._R(n("uSpecularReflection"),o.specularReflection)._R(n("uDiffuseReflection"),o.diffuseReflection)._R(n("uShininess"),o.shininess).UI(n("uLightColor"),o.specularColor).UI(n("uAmbientColor"),o.ambientColor),1===t);else if(h)this.ZB.UI(n("uColorDiffuse"),h.getColor());else if(a){const t=Mr(a,this,this.nU.T());if(!t&&a.lut.percentageValues)return!1;this.ZB.JO(f,a.lut,t)}d&&1!==t&&this.ZB._R(n("uWireframeThickness"),d.thickness).UI(n("uWireframeColor"),d.fillStyleSolid.getColor()),!1!==l&&this.ZB.HR(n("uOffsetAxis"),[l.x,l.y,l.z]),!1!==c&&this.ZB._R(n("uOffsetNWU"),c);const p=qi(i);return this._b.forEach((i=>{if(1===t){const[t,s]=p.ss(i.existingDataPointsCount);this.ZB.ZR(n("uFirstId"),t).UO(f,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=u("aPos");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(s,1),r.enableVertexAttribArray(s),a&&"value"===a.getLookUpProperty()&&void 0!==this.VN.attributeOffsetLookUpValue&&1!==t){const t=u("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.ZB.hO(t,1),r.enableVertexAttribArray(t)}e.Nk(f,i.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(d)&&1!==t),g=!0})),g}))}return{idCount:a}}bu(t,i){Array.isArray(t)||(t=[t]),this.pu=Ti(this.pu,t,{canReturnB:!0}),this.LY+=t.length;const s=i||bs(t);return this.PY=this.PY?ws(this.PY,s):s,this}cr(t){return this.hc="function"==typeof t?t(this.hc):t,this}do(){return this.hc}Vp(t){return this.ov="function"==typeof t?t(this.ov):t,this}RY(){return this.ov}Wi(){return this.PY?Math.max(this.PY.max.x,this.nu.max.x):this.nu.max.x}Hi(){return this.PY?Math.min(this.PY.min.x,this.nu.min.x):this.nu.min.x}Zi(){return this.PY?Math.max(this.PY.max.y,this.nu.max.y):this.nu.max.y}Xi(){return this.PY?Math.min(this.PY.min.y,this.nu.min.y):this.nu.min.y}ye(){return this.PY?Math.max(this.PY.max.z,this.nu.max.z):this.nu.max.z}ve(){return this.PY?Math.min(this.PY.min.z,this.nu.min.z):this.nu.min.z}uu(){return Yi(this.hc)}cu(){return Yi(this.hc)}fp(){return Yi(this.hc)}Mu(){return this.fc}wu(){return this.pu}Cu(){return this.Ac}Tu(){return this.LY}Vi(){return this.mu=!0,this.fc.length=0,this.Ac=0,this.pu=[],this.LY=0,this.nu=os,this.PY=void 0,this}dispose(){return super.dispose(),this.DN._N(),this.DV={},this}_c(){return this.dispose(),this}}const Gv=(t,i)=>Rv(t,i>50?20:i>20?16:i>10?12:i>5?8:6),$v=(t,i)=>{const s=i.getSize();return Vv(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class Uv extends Pv{constructor(t,i,s){super(t,i,s),this.uY="disabled",this.OY=!1,this.zY=!1,this.VY={x:1,y:1,z:1},this.ky={x:0,y:0,z:0},this._y={x:0,y:0,z:0},this.NY={x:0,y:0,z:0},this.Ty={x:0,y:0,z:0,w:1},this.Fy={x:1,y:1,z:1},this.GY=b(255,255,255),this.$Y=op.projectionOrthographic(-1,1,-1,1,1,-1),this.UY=op.projectionOrthographic(-1,1,-1,1,1,-1),this.YY=!1,this.isEulerRotation=!0,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStyleValuePalette:()=>ye(this.Ze)&&"value"===this.Ze.lookUpProperty&&this.Ze}),this.Ze=ln.fillStyle,this.sp.C(Je)}Nh(t){var i;const s=this.eR(),e=this.ui.T(),r=this.ui.u,h=this.ll();this.Fz.fillStyleSolid(h);const n=this.Fz.fillStyleValuePalette(h),o=this.NY,a=this.Fy;if(this.OY&&this.jY&&(this.bV=this.ZB.mR(this.jY.vertices,void 0,this.bV),this.MV=this.ZB.sO(this.jY.indices,this.MV),this.HY=this.jY.indices.length),"phong"===this.sp.T().type&&(s||this.OY)&&(null===(i=this.jY)||void 0===i?void 0:i.normals)&&(this.WY=this.ZB.mR(this.jY.normals,void 0,this.WY)),!this.ZY&&n&&"value"===n.lookUpProperty&&this.jY&&(this.ZY=new Float32Array(this.jY.vertices.length/3),this.zY=!0),this.ZY&&this.zY&&(this.JY=this.ZB.mR(this.ZY,void 0,this.JY)),s||h||r){if(n&&"value"!==n.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this._D=this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:n?["lookup","value",n.lut]:"uniform",shadingStyle:this.sp.T().type,wireframe:!1}),Tg.Model3D({normalSource:"phong"===this.sp.T().type?"attribute":void 0})),this.P$=e?this.ZB.SE(Tg["3D"],Tg.MousePicking({useVertexId:!0}),Tg.Model3D({normalSource:void 0})):void 0}if(this.YY){const t=op.projectionOrthographic(-1,1,-1,1,1,-1);if(this.isEulerRotation)this.UY=op.rotateXYZ(t,o),this.$Y=op.translate(t,a.x/2,a.y/2,a.z/2),this.$Y=op.rotateXYZ(this.$Y,o),this.$Y=op.translate(this.$Y,-a.x/2,-a.y/2,-a.z/2);else{const i=[-this.Ty.x,-this.Ty.y,-this.Ty.z,this.Ty.w];this.UY=op.quaternionToRotationMatrix(i),this.$Y=op.translate(t,a.x/2,a.y/2,a.z/2),this.$Y=op.multiply(this.$Y,this.UY),this.$Y=op.translate(this.$Y,-a.x/2,-a.y/2,-a.z/2)}this.YY=!1}return this.sp.u=!1,this.fl(this.Ze),this.ui.u=!1,this.OY=!1,this.zY=!1,this}wc(t,i){var s;const e=1===t?this.P$:this._D,r=1===t,h=this.MV,n=this.bV,o=this.WY,a=this.JY,l=this.ky,u=this._y,c=this.VY,d=this.Fy,f=this.$Y,A=this.UY,g=this.Fz.fillStyleValuePalette(!1),p=this.Fz.fillStyleSolid(!1),v=this.sp.T(),y={location:void 0,size:1};let m=this.HY;if(!(e&&n&&h&&this.jY))return{};const x=this.jY?null===(s=this.jY)||void 0===s?void 0:s.parts.length:0;if(x<1)return{};const S=this.jY.vertices.length;return this.ZB.SR(e,((s,b,M,w)=>{var _;this.ZB.Kc(e).HR(s("uScale"),this.cY.bD.kR()).HR(s("uDisp"),this.cY.bD.CR()).XR(s("uViewProjectionMatrix"),this.bY)._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),this.Si)._R(s("uRenderEffectMask"),2===t?1:0).XR(s("uModelRotation"),f).HR(s("uModelScale"),[c.x,c.y,c.z]).HR(s("uLocationAxis"),[l.x,l.y,l.z]).HR(s("uModelAlignment"),[u.x,u.y,u.z]).HR(s("uModelSize"),[d.x,d.y,d.z]).bR(n,0,{location:M.attribute("aGeoPos"),size:3}).lO(h);let k=!1;if(r)this.ZB.ZR(s("uFirstId"),i).GO(M,S);else{if(this.Ze===ae&&S<1)return!1;if(p)this.ZB.UI(s("uColorDiffuse"),p.getColor());else if(g){if(!a)return!1;const t=g.getPalette();y.location=b("aLookupValue"),this.ZB.JO(M,t,void 0).bR(a,void 0,y),k=!0}}"phong"!==v.type||r||(this.ZB.HR(s("uCameraLoc"),this.MY).HR(s("uLightLoc"),this.wY)._R(s("uAmbientReflection"),v.ambientReflection)._R(s("uSpecularReflection"),v.specularReflection)._R(s("uDiffuseReflection"),v.diffuseReflection)._R(s("uShininess"),v.shininess).UI(s("uLightColor"),v.specularColor).UI(s("uAmbientColor"),v.ambientColor).XR(s("uModelRotationNormals"),A),o&&this.ZB.bR(o,void 0,{location:M.attribute("aNormal"),size:3}));let C=!1;for(let t=0;t<x;t+=1){m=0;let i=this.GY,e=0,h=0,n=0,o=!0;this.jY&&this.jY.parts&&this.jY.parts[t].material&&(i=this.jY.parts[t].material.specular,m=this.jY.parts[t].count,h=this.jY.parts[t].count,n=this.jY.parts[t].offset,o=this.jY.parts[t].useIndexBuffer,e=this.jY.parts[t].indexStart,r||p||k||this.ZB.UI(s("uColorDiffuse"),this.jY.parts[t].material.diffuse)),(m>0||h>0)&&("phong"!==v.type||r||(this.ZB.UI(s("uLightColor"),i),A?this.ZB.XR(s("uModelRotationNormals"),A):this.ZB.UI(s("uLightColor"),v.specularColor)),o?this.ZB.cO(m,this.ZB.gl.TRIANGLES,e,(null===(_=this.jY)||void 0===_?void 0:_.indices)instanceof Uint32Array?this.ZB.gl.UNSIGNED_INT:this.ZB.gl.UNSIGNED_SHORT):this.ZB.Nk(this.ZB.gl.TRIANGLES,h,n),C=!0)}return C})),{idCount:S}}QY(t){if(this.KY)return this.KY;const i=this.ky,s=this._y,e=this.VY,r=this.Fy,h=this.NY,n=this.Ty,o=this.cY.ix(i),a=[],l=op.projectionOrthographic(-1,1,-1,1,1,-1);let u;if(this.isEulerRotation)u=op.translate(l,r.x/2,r.y/2,r.z/2),u=op.rotateXYZ(u,h),u=op.translate(u,-r.x/2,-r.y/2,-r.z/2);else{const t=[-n.x,-n.y,-n.z,n.w];u=op.translate(l,r.x/2,r.y/2,r.z/2),u=op.multiply(u,op.quaternionToRotationMatrix(t)),u=op.translate(u,-r.x/2,-r.y/2,-r.z/2)}const c=(s.x+1)*(r.x/2),d=(s.y+1)*(r.y/2),f=(s.z+1)*(r.z/2);for(let i=0;i<t.vertices.length;i+=3){const s=op.multiply(u,[t.vertices[i],t.vertices[i+1],t.vertices[i+2],1]),r={x:o.x+(s[0]-c)*e.x,y:o.y+(s[1]-d)*e.y,z:o.z+(s[2]-f)*e.z};a.push(r)}return this.KY=a,this.KY}Ry(t){const i=this.jY;if(!i)return;const s=this.QY(i),e=t(s);0!==e.length&&(e.length!==s.length&&!0===this.pi.Da.Ea&&Nt.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.ZY=e instanceof Float32Array?e:new Float32Array(e),this.zY=!0)}kc(t,i,s,e,r){return{info:{iVertex:t-i}}}By(t,i){const s=this.jY;if(!s||void 0===(null==t?void 0:t.iVertex))return;if(s.indices.length>0){const e=[];for(let i=0;i<s.indices.length;i+=3){const r=s.indices[i],h=s.indices[i+1],n=s.indices[i+2];r!==t.iVertex&&h!==t.iVertex&&n!==t.iVertex||e.push([r,h,n])}const r=this.QY(s),h=this.pi.hr(i.clientX,i.clientY),n=e.map((t=>t.map((t=>{const i={x:s.vertices[3*t],y:s.vertices[3*t+1],z:s.vertices[3*t+2]},e=r[t],n=this.cY.sx(e),o=this.cY.Xp(n);return{index:t,vertex:i,world:e,axis:n,dist:o?vs(o,h):rs}})))).flat();n.sort(((t,i)=>t.dist-i.dist));const o=n[0];if(!o)return;const a=this.ZY?this.ZY[o.index]:void 0;return{coordModel:o.vertex,coordAxis:o.axis,index:o.index,value:a}}const e=t.iVertex,r=this.ZY?this.ZY[e]:void 0,h={x:s.vertices[3*e],y:s.vertices[3*e+1],z:s.vertices[3*e+2]},n=this.QY(s)[e];return{coordModel:h,coordAxis:this.cY.sx(n),index:e,value:r}}dispose(){return super.dispose(),this.bV&&(this.ZB.BR(this.bV),this.bV=void 0),this.MV&&(this.ZB.BR(this.MV),this.MV=void 0),this.WY&&(this.ZB.BR(this.WY),this.WY=void 0),this.JY&&(this.ZB.BR(this.JY),this.JY=void 0),this._D=void 0,this.P$=void 0,this.jY=void 0,this.ZY=void 0,this}_c(){return this.dispose(),this}Dy(t){return this.jY=t,this.OY=!0,this.Fy=t.modelSize,this}qe(t){return this.Ze=An(this.Ze,t),this}Mh(){return this.Ze}Oy(t){return this.VY=t,this.KY=void 0,this}kR(){return this.VY}zy(t){return this.ky=t,this.KY=void 0,this}Vy(t){return this._y=t,this.KY=void 0,this}Ny(t){return this.NY=t,this.YY=!0,this.isEulerRotation=!0,this.KY=void 0,this}Gy(t){return this.Ty=t,this.YY=!0,this.isEulerRotation=!1,this.KY=void 0,this}$y(t){return this.uY=t,this}Uy(){return this.uY}Wi(){return hs}Hi(){return rs}Zi(){return hs}Xi(){return rs}ye(){return hs}ve(){return rs}uu(){return 0}cu(){return 0}fp(){return 0}ll(){return gn(this.ul,this.Ze)}fl(t){this.ul=t}}class Yv extends Pv{constructor(t,i,s,e){super(t,i,s),this.uY="cull-back",this._b=[],this.DN=new Wp(this._b,(t=>t.vertexBuffer&&this.ZB.BR(t.vertexBuffer)),!1),this.fc=[],this.Ac=0,this.pu=[],this.LY=0,this.nu=os,this.PY=os,this.mu=!1,this.Fz=br({fillStyleSolid:()=>{const t=this.uv.getFillStyle();return fe(t)&&t},fillStyleIndividual:()=>{const t=this.uv.getFillStyle();return ge(t)&&t},fillStylePalette:()=>{const t=this.uv.getFillStyle();return ye(t)&&t},triangulatedPointStyle:()=>{const t=this.uv;return sr(t)&&t},wireframeLineStyleSolid:()=>{const t=sr(this.uv)&&this.uv,i=t&&t.getWireframeStyle();return lr(i)&&i},wireframeFillStyleSolid:()=>{const t=sr(this.uv)&&this.uv,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return fe(s)&&s}}),this.nU=g(void 0),this.Da=e,this.uv=ln.pointStyle3D,this.sp.C(Je);const r=!0===(null==e?void 0:e.individualPointColorEnabled),h=!0===(null==e?void 0:e.individualPointSizeEnabled),n=!0===(null==e?void 0:e.individualLookupValuesEnabled),o=!0===(null==e?void 0:e.individualPointSizeAxisEnabled);let a,l,u,c,d=0;d+=3,r&&(a=d,d+=4),h&&(l=d,d+=1),n&&(u=d,d+=1),o&&(c=d,d+=3);const f=pi(r,h,n,o);this.VN={individualPointColorEnabled:r,individualPointSizeEnabled:h,individualLookupValuesEnabled:n,individualPointSizeAxisEnabled:o,attributesPerVertex:d,attributeOffsetCoordinate:0,attributeOffsetColor:a,attributeOffsetSize:l,attributeOffsetLookUpValue:u,attributeOffsetPointSize3D:c,prepareRenderData:(t,i)=>f(t,this.uv,this.uv.fillStyle)}}_i(){return this.nU.T()||this.nU._}kc(t,i,s,e,r){return{info:{dataPoint:this.fc[t-i]}}}Nh(t){const i=this.mu,s=this.pu,e=this.LY,r=e>0,h=this.uv,n=this.uv!==this.qY,o=this.ui.T(),a=this.ui.u,l=this.eR();this.PY&&(this.nu=ws(this.nu,this.PY),this.PY=void 0),r&&(this.fc=Ti(this.fc,s,{canReturnB:!0}),this.Ac+=e);let u=s,c=e;if(i&&(this._b.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=os})),this.DN.wN(),u=this.fc,c=this.Ac),c>0){const t=Math.floor(this.Sz.DY/(this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Wt(c,1e5,t);this.DN.xN(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:os,vertexBuffer:this.ZB.KR(t*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s))})),((t,i,s)=>{this.ZB.qR(t.vertexBuffer,t.existingCoordinatesCount*this.VN.attributesPerVertex,this.VN.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=h.getFillStyle(),f=this.Fz.fillStyleSolid(n),A=this.Fz.fillStyleIndividual(n),g=this.Fz.fillStylePalette(n),p=d===ae&&ae;if(n||l||a){let t;const i=h.getSize(),s=this.VN.individualPointColorEnabled,e=this.VN.individualPointSizeEnabled,r=this.VN.individualPointSizeAxisEnabled,a=this.VN.individualLookupValuesEnabled;if(A&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Nt.alert(t),new Error(t)}if(g&&"value"===g.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Nt.alert(t),new Error(t)}const l=this.Fz.wireframeLineStyleSolid(n),u=this.Fz.wireframeFillStyleSolid(n);if(f||A||g||u){const s=A?"attribute":g?["lookup",g.getLookUpProperty(),g.lut]:"uniform",n=e&&"number"==typeof i,a=r&&"object"==typeof i,c=n||a?"attribute":"uniform";if(sr(h)){const r=ki(h.getShape(),{cube:()=>Iv(this.ZB),sphere:()=>jv(this.ZB,h,e)});t={type:"instanced",shader:this.ZB.SE(Tg["3D"],Tg.ColorShaded3D({dataType:s,shadingStyle:this.sp.T().type,wireframe:!1!==u}),Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:xr(this.ai),normalSource:r.nY})),pointStyle:h,useIndividualPointSize:n,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,fillStyleEmpty:p,mousePickingShader:o&&this.ZB.SE(Tg["3D"],Tg.MousePicking(),Tg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:xr(this.ai),normalSource:void 0})),geometry:r,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else hr(h)&&"number"==typeof i&&(t={type:"primitive",shader:this.ZB.SE(Tg["3D"],Tg.PointSize(c),Tg.Color({dataType:s}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0})),pointStyle:h,pointSizePixels:i,useIndividualPointSize:n,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,mousePickingShader:o&&this.ZB.SE(Tg["3D"],Tg.PointSize(c),Tg.MousePicking({useVertexId:!0}),Tg.VertexLocation({axisWorldTranslation:xr(this.ai),normalSource:void 0}))})}this.DV=t}if(void 0===this.nU.T()&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=hs,i=rs;for(let s=0;s<this.fc.length;s+=1){const e=this.fc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.nU.C({min:i,max:t})}return this.nU._=void 0,this.mu=!1,this.pu=[],this.LY=0,this.qY=h,this.sp.u=!1,this}wc(t,i){const s=this.ZB.gl,e=this.DV,r=this.Ac;if(!e)return{};const h=1===t?e.mousePickingShader:e.shader;if(!h)return{};const n=this.sp.T(),{fillStyleSolid:o,fillStylePaletted:a,useIndividualPointSize:l}=e,u="instanced"===e.type&&e.useIndividualPointSize3D,c="instanced"===e.type&&e.wireframe;return this.ZB.SR(h,((r,d,f,A)=>{let g=!1;if(this.ZB.Kc(h).HR(r("uScale"),this.cY.bD.kR()).HR(r("uDisp"),this.cY.bD.CR()).XR(r("uViewProjectionMatrix"),this.bY)._R(r("uIsHighlighted"),1===t||2===t?0:this.gi).UI(r("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(r("uRenderEffectMask"),2===t?1:0),"instanced"===e.type){const{pointSizeAxis:t,pointSizeNWU:i}=e;!1!==t&&!1===u&&this.ZB.HR(r("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===l&&this.ZB._R(r("uOffsetNWU"),i)._R(A("uRatioNwuWu"),this.cY.EY())}else if("primitive"===e.type){const{pointSizePixels:t}=e;l||this.ZB._R(r("uPointSize"),t)._R(r("uDevicePixelRatio"),this.ZB.hR())}if(1===t);else if("instanced"===e.type?("phong"===n.type&&this.ZB.HR(r("uCameraLoc"),this.MY).HR(r("uLightLoc"),this.wY)._R(r("uAmbientReflection"),n.ambientReflection)._R(r("uSpecularReflection"),n.specularReflection)._R(r("uDiffuseReflection"),n.diffuseReflection)._R(r("uShininess"),n.shininess).UI(r("uLightColor"),n.specularColor).UI(r("uAmbientColor"),n.ambientColor),c&&this.ZB._R(r("uWireframeThickness"),c.thickness).UI(r("uWireframeColor"),c.fillStyleSolid.getColor()),o&&this.ZB.UI(r("uColorDiffuse"),o.getColor()),e.fillStyleEmpty&&this.ZB.UI(r("uColorDiffuse"),T)):"primitive"===e.type&&o&&this.ZB.UI(r("uColor"),o.getColor()),a){const t=Mr(a,this,this.nU.T());if(!t&&a.lut.percentageValues)return!1;this.ZB.JO(f,a.lut,t)}const p=qi(i);return this._b.forEach((i=>{if(1===t){const[t,s]=p.ss(i.existingDataPointsCount);this.ZB.ZR(r("uFirstId"),t),"instanced"===e.type?this.ZB.UO(f,s):this.ZB.GO(f,s)}s.bindBuffer(s.ARRAY_BUFFER,i.vertexBuffer);const h=d("aPos");if(s.vertexAttribPointer(h,3,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.ZB.hO(h,1),s.enableVertexAttribArray(h),e.fillStyleIndividual&&void 0!==this.VN.attributeOffsetColor&&1!==t){const t=d("aColor");s.vertexAttribPointer(t,4,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.ZB.hO(t,1),s.enableVertexAttribArray(t)}if(l&&void 0!==this.VN.attributeOffsetSize){"instanced"===e.type?this.ZB._R(A("uRatioNwuWu"),this.cY.EY()):"primitive"===e.type&&this.ZB._R(r("uDevicePixelRatio"),this.ZB.hR());const t=d("instanced"===e.type?"aOffsetNWU":"aPointSize");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.ZB.hO(t,1),s.enableVertexAttribArray(t)}if(u&&void 0!==this.VN.attributeOffsetPointSize3D&&"instanced"===e.type){const t=d("aOffsetAxis");s.vertexAttribPointer(t,3,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.ZB.hO(t,1),s.enableVertexAttribArray(t)}if(e.fillStylePaletted&&"value"===e.fillStylePaletted.getLookUpProperty()&&void 0!==this.VN.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.VN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.VN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.ZB.hO(t,1),s.enableVertexAttribArray(t)}"instanced"===e.type?(e.geometry.Nk(f,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(c)&&1!==t),g=!0):"primitive"===e.type&&(this.ZB.Nk(s.POINTS,i.existingCoordinatesCount),g=!0)})),g})),{idCount:r}}bu(t,i){Array.isArray(t)||(t=[t]),this.pu=Ti(this.pu,t,{canReturnB:!0}),this.LY+=t.length;const s=i||bs(t);return this.PY=this.PY?ws(this.PY,s):s,this.nU.C(void 0),this}cv(t){return this.uv="function"==typeof t?t(this.uv):t,this}tj(){return this.uv}Wi(){return this.PY?Math.max(this.PY.max.x,this.nu.max.x):this.nu.max.x}Hi(){return this.PY?Math.min(this.PY.min.x,this.nu.min.x):this.nu.min.x}Zi(){return this.PY?Math.max(this.PY.max.y,this.nu.max.y):this.nu.max.y}Xi(){return this.PY?Math.min(this.PY.min.y,this.nu.min.y):this.nu.min.y}ye(){return this.PY?Math.max(this.PY.max.z,this.nu.max.z):this.nu.max.z}ve(){return this.PY?Math.min(this.PY.min.z,this.nu.min.z):this.nu.min.z}uu(){const t=this.uv,i=t.getSize();return"number"==typeof i?sr(t)?i/2:hr(t)?5:0:0}cu(){return this.uu()}fp(){return this.uu()}Mu(){return this.fc}wu(){return this.pu}Cu(){return this.Ac}Tu(){return this.LY}Vi(){return this.mu=!0,this.fc.length=0,this.Ac=0,this.pu=[],this.LY=0,this.nu=os,this.PY=void 0,this.nU.C(void 0),this}dispose(){return super.dispose(),this.DN._N(),this.DV=void 0,this}_c(){return this.dispose(),this}}const jv=(t,i,s)=>{const e=i.getSize();return Vv(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class Hv extends Pv{constructor(t,i,s,e){super(t,i,s),this.uY="disabled",this.Ze=ln.fillStyle,this.Kv=ln.lineStyle,this.Y$=g("bilinear"),this.ij=new Ke,this.sj=new Qe.Simple,this.ej=[],this.rj=void 0,this.DV={},this.hj=!1,this.Fz=br({fillStyleSolid:()=>fe(this.Ze)&&this.Ze,fillStylePaletted:()=>ye(this.Ze)&&this.Ze,wireframeStyleLine:()=>lr(this.Kv)&&this.Kv,wireframeStyleFill:()=>{const t=this.Kv&&this.Kv.getFillStyle();return fe(t)&&t}}),this.X$=g(void 0),this.jt={x:0,z:0},this.W$={x:1,z:1},this.H$=!1,this.sp.C(Xe);const r="columns"===e.dataOrder?e.columns:e.rows,h="columns"===e.dataOrder?e.rows:e.columns;this.Da={...e,primaryDimensionVectorsCount:r,secondaryDimensionVectorsCount:h},this.nj=new Array(this.Da.primaryDimensionVectorsCount).fill(void 0),this.gb=new pv(this.Sz,t.Sz.FU,t.pi.ai,jt,[],this.Da).qv(Tt),this.gb.q$=Zu;const n=this.gb.tU.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,r=t.iFirstUniqueVector,h=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),n={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:r,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:h,normalmapSize:n}})),o=this.gb.tU.gridTileSizes.map((t=>{const i=n.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),a=n.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,r=s*e;return r>t.cells?{primary:s,secondary:e,cells:r}:t}),{primary:0,secondary:0,cells:0});this.oj={gridTiles:n,gridTileSizes:o,largestGridTileSize:a},this.sy(this.jt,this.W$),this.Z$=new Av,this.sU=[]}hy(t){return this.X$.C(t),this}ny(){return this.X$.T()}kc(t,i,s,e,r){const h=t-i,n=h%(this.Da.secondaryDimensionVectorsCount-1),o=Math.floor(h/(this.Da.secondaryDimensionVectorsCount-1)),a="columns"===this.Da.dataOrder?o:n,l="rows"===this.Da.dataOrder?o:n,u=[{x:this.jt.x+a*this.W$.x,z:this.jt.z+l*this.W$.z,y:this.aj(o,n),intensity:this.lj(o,n),column:"columns"===this.Da.dataOrder?o:n,row:"columns"===this.Da.dataOrder?n:o},{x:this.jt.x+(a+("columns"===this.Da.dataOrder?1:0))*this.W$.x,z:this.jt.z+(l+("rows"===this.Da.dataOrder?1:0))*this.W$.z,y:this.aj(o+1,n),intensity:this.lj(o+1,n),column:"columns"===this.Da.dataOrder?o+1:n,row:"columns"===this.Da.dataOrder?n:o+1},{x:this.jt.x+(a+1)*this.W$.x,z:this.jt.z+(l+1)*this.W$.z,y:this.aj(o+1,n+1),intensity:this.lj(o+1,n+1),column:"columns"===this.Da.dataOrder?o+1:n+1,row:"columns"===this.Da.dataOrder?n+1:o+1},{x:this.jt.x+(a+("columns"===this.Da.dataOrder?0:1))*this.W$.x,z:this.jt.z+(l+("rows"===this.Da.dataOrder?0:1))*this.W$.z,y:this.aj(o,n+1),intensity:this.lj(o,n+1),column:"columns"===this.Da.dataOrder?o:n+1,row:"columns"===this.Da.dataOrder?n+1:o}],c=u.map((t=>this.cY.Xp(t))).map((t=>void 0===t?rs:vs(t,{x:e,y:r}))).map(((t,i)=>({i:i,dist:t})));return c.sort(((t,i)=>t.dist-i.dist)),{info:{dataPoint:{...u[c[0].i]}}}}aj(t,i){for(let s=0;s<this.oj.gridTiles.length;s+=1){const e=this.oj.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,h=s*e.sizeHeatmapDataVectors.secondary+r;return e.heightmapData[h]}}return 0}lj(t,i){if(this.gb.Q$)for(let s=0;s<this.gb.tU.gridTiles.length;s+=1){const e=this.gb.tU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,h=s*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData?e.intensityData[h]:void 0}}}uj(t){this.cj=t,this.rj=void 0}sy(t,i){this.H$=this.H$||this.jt!=t||this.W$!=i,this.jt=t,this.W$=i;const s=this.Da,e={min:{x:Math.min(this.jt.x,this.jt.x+(s.columns-1)*this.W$.x),z:Math.min(this.jt.z,this.jt.z+(s.rows-1)*this.W$.z)},max:{x:Math.max(this.jt.x,this.jt.x+(s.columns-1)*this.W$.x),z:Math.max(this.jt.z,this.jt.z+(s.rows-1)*this.W$.z)}},r=new Map;return this.oj.gridTiles.forEach((t=>{const i="columns"===this.Da.dataOrder?{x:this.W$.x*(t.sizeHeatmapDataVectors.primary-1),z:this.W$.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.W$.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.W$.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.Da.dataOrder?{x:this.jt.x+this.W$.x*t.iFirstVector.primary,z:this.jt.z+this.W$.z*t.iFirstVector.secondary}:{x:this.jt.x+this.W$.x*t.iFirstVector.secondary,z:this.jt.z+this.W$.z*t.iFirstVector.primary};r.set(t,{sizeAxis:i,startLocationAxis:s})})),this.pU={dj:e,tilesInfo:r},this}ey(){return{start:this.jt,step:this.W$,end:{x:this.jt.x+this.W$.x*this.Da.columns,z:this.jt.z+this.W$.z*this.Da.rows}}}dU(t,i){if(!this.oj)return this;if(!t)return this.fj(),this;if(!i)return this.sU.forEach((t=>{t.bY=this.bY,t.Nh(!0)})),this;if(!this.oj.gridTiles)return this;if(!this.pU)return this;const s=this.pU.dj.min.x,e=this.pU.dj.min.z,r=this.pU.dj.max.x,h=this.pU.dj.max.z;if(null==s||null==e||null==r||null==h)return this;const n=this.Da.columns,o=this.Da.rows,a=(r-s)/(n-1),l=(h-e)/(o-1),u=new Array(n).fill(0,0,n).map(((t,i)=>s+i*a)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l));let d=[];const f=[];t.levels.forEach((t=>{d.push(t.value),f.push({level:t.value,width:t.strokeStyle.getThickness(),fill:t.strokeStyle.getFillStyle()})}));const A=(t,i)=>"rows"==this.Da.dataOrder?i:t,g=(t,i)=>"rows"==this.Da.dataOrder?t:i;let p,v;const y=r-s,m=h-e;switch(t.valueSource){case"y":p=(t,i)=>this.aj(A(t,i),g(t,i)),v=(t,i,s,e)=>{i.push({x:t.ax[s],y:e,z:t.ay[s]})};break;case"intensity":p=(t,i)=>this.lj(A(t,i),g(t,i)),v=(t,i,r,h)=>{const u=t.ax[r],c=t.ay[r],d=Math.floor((u-s)/y*(n-1)),f=Math.floor((c-e)/m*(o-1)),p=s+d*a,v=e+f*l,x=Ge({x:u,y:c},{point:{x:p,y:v},value:this.aj(A(d,f),g(d,f))},{point:{x:p,y:v+l},value:this.aj(A(d,f+1),g(d,f+1))},{point:{x:p+a,y:v},value:this.aj(A(d+1,f),g(d+1,f))},{point:{x:p+a,y:v+l},value:this.aj(A(d+1,f+1),g(d+1,f+1))});i.push({x:u,y:x,z:c})}}return this.Z$.$$(p,u,c,d),this.fj(),this.Z$.U$.forEach((i=>{var s,e;const r=[];i.ax.forEach(((t,s)=>{v(i,r,s,i.level)})),i.ax[0]==i.ax[i.ax.length-1]&&i.ay[0]==i.ay[i.ay.length-1]&&v(i,r,i.ax.length-1,i.level);const h=null===(s=t.levels.find((t=>t.value==i.level)))||void 0===s?void 0:s.strokeStyle;if(0<this.sU.length){const t=this.sU.find((t=>t.do()===h));if(t)return t.bu({x:Number.NaN,y:Number.NaN,z:Number.NaN}),void t.bu(r)}const n=h.getThickness(),o=new Nv(this.cY,this.yi,this.mi,void 0);1<n?o.Vp(new ir({shape:"sphere",size:n,fillStyle:null===(e=f.find((t=>t.level==i.level)))||void 0===e?void 0:e.fill})):o.Vp(this.ij),o.cr(h),o.bu(r),o.lp(this.sj),this.sU.push(o)})),this}Nh(t){const i=this.ej,s=gn(this.ul,this.Ze),e=this.Fz.fillStyleSolid(s),r=this.Fz.fillStylePaletted(s),h=this.Kv,n=this.Kv!==this.mU,o=this.Fz.wireframeStyleLine(n),a=this.Fz.wireframeStyleFill(n),l=!1!==a,u=this.Y$.u,c=this.Y$.T(),d=this.sp.T(),f=this.eR(),A=this.ui.T();this.gb.Nh();const g=this.gb.xU;if(!g)return this;this.Aj=this.Aj||this.gj(g);const p=this.Aj;this.pj(p);const v=Ju(i,p,void 0,(t=>t.sizeGeometryDataVectors));if(v.size>0&&(ic(this.ZB,v,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.hj=!0),"phong"===d.type&&(v.size>0||f)){const t=this.ZB.gl,i=this.ZB.SE(Tg["2D"],Tg.DrawToNormalTexture({flipXZ:"rows"===this.Da.dataOrder,vertexIdSource:this.ZB.NO(),normalTextureType:this.ZB.gl2?"uint":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN}));p.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var r;const h=e.normalmapTexture,n=null===(r=this.pU)||void 0===r?void 0:r.tilesInfo.get(e.tileData);if(!h||!n)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.ZB.MO.wc((()=>{this.ZB.SR(i,((r,h,o,l)=>(this.ZB.Kc(i).GO(o,a).MR(r("uTileDimensionsXZ"),["columns"===this.Da.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.Da.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).jR(r("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).MR(r("uTileStartLocationAxisXZ"),[n.startLocationAxis.x,n.startLocationAxis.z]).MR(r("uTileSizeAxisXZ"),[n.sizeAxis.x,n.sizeAxis.z]).wR(r("uHeightmapTexture"),e.heightmapDataTexture,1).Nk(t.POINTS,a),!0)))}),h,o,void 0,this.pi.Ma(),0)}))}))}const y=this.DV;if(s||n||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?y.surface={shader:this.ZB.SE(Tg["3D"],Tg.SurfaceGrid({axisWorldTranslation:xr(this.ai),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Da.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.ZB.gl2?"uint":"ubyte",intensityTextureType:this.ZB.pE?"float":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:r&&"value"===r.getLookUpProperty()?y.surface={shader:this.ZB.SE(Tg["3D"],Tg.SurfaceGrid({axisWorldTranslation:xr(this.ai),fillColor:["lookup","value",r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Da.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.ZB.gl2?"uint":"ubyte",intensityTextureType:this.ZB.pE?"float":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:r},wireframe:t}:r?y.surface={shader:this.ZB.SE(Tg["3D"],Tg.SurfaceGrid({axisWorldTranslation:xr(this.ai),fillColor:["lookup",r.getLookUpProperty(),r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Da.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.ZB.gl2?"uint":"ubyte",intensityTextureType:this.ZB.pE?"float":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:r},wireframe:t}:l&&(y.surface={shader:this.ZB.SE(Tg["3D"],Tg.SurfaceGrid({axisWorldTranslation:xr(this.ai),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Da.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.ZB.gl2?"uint":"ubyte",intensityTextureType:this.ZB.pE?"float":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}y.mousePicking=A?this.DV.mousePicking||{shader:this.ZB.SE(Tg["3D"],Tg.MousePicking(),Tg.SurfaceGrid({axisWorldTranslation:xr(this.ai),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Da.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.ZB.gl2?"uint":"ubyte",intensityTextureType:this.ZB.pE?"float":"ubyte",heightmapTextureType:this.ZB.pE?"float":"ubyte",littleEndian:this.ZB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.DV=y,this.ej.length=0,this.ul=this.Ze,this.mU=h,this.sp.u=!1;const m=this.X$.T(),x=m!==this.bU;return this.dU(m,x||v.size>0||this.H$),this.H$=!1,this.bU=this.X$.T(),this}gj(t){const i=this.oj.gridTiles.map((i=>{const s=tc(this.ZB,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.oj.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.ZB.mR([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),r=this.ZB.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:r}}pj(t){var i;if("phong"===this.sp.T().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let r;const h=null===(i=this.ZB.gl2)||void 0===i?void 0:i.ctx;if(h)r=this.ZB.ub(null,h.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,h.UNSIGNED_INT,h.RGBA32UI);else{const t=this.ZB.gl;r=this.ZB.ub(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=r}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.ZB.KB(t.normalmapTexture),t.normalmapTexture=void 0)}))}wc(t,i){var s,e,r,h;const n=this.ZB.gl,o=this.Aj;if(!o)return{};const a=this.sp.T(),l=this.DV,u=1===t?null===(s=l.mousePicking)||void 0===s?void 0:s.shader:null===(e=l.surface)||void 0===e?void 0:e.shader;if(!u)return{};const c=1!==t?null===(r=l.surface)||void 0===r?void 0:r.wireframe:void 0,d=1!==t?null===(h=l.surface)||void 0===h?void 0:h.fill:void 0;return this.ZB.SR(u,((s,e,r,h)=>{let l=!1;if(this.ZB.Kc(u).UO(r,this.oj.largestGridTileSize.cells).HR(s("uScale"),this.cY.bD.kR()).HR(s("uDisp"),this.cY.bD.CR()).XR(s("uViewProjectionMatrix"),this.bY)._R(s("uIsHighlighted"),1===t||2===t?0:this.gi).UI(s("uHighlightColorOffset"),1===t||2===t?T:this.Si)._R(s("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===a.type&&this.ZB.HR(s("uCameraLoc"),this.MY).HR(s("uLightLoc"),this.wY)._R(s("uAmbientReflection"),a.ambientReflection)._R(s("uSpecularReflection"),a.specularReflection)._R(s("uDiffuseReflection"),a.diffuseReflection)._R(s("uShininess"),a.shininess).UI(s("uLightColor"),a.specularColor).UI(s("uAmbientColor"),a.ambientColor),c)){const{wireframeFillSolid:t,wireframeSolid:i}=c,e=i.getThickness()<0?1:i.getThickness();this.ZB.UI(s("uWireframeColor"),t.getColor())._R(s("uWireframeThickness"),e)}return 1===t||"solid"===(null==d?void 0:d.fillMode)&&this.ZB.UI(s("uColorDiffuse"),d.fillStyleSolid.getColor()),o.gridTileSizes.forEach((h=>{this.ZB.MR(s("uTileDimensionsXZ"),["columns"===this.Da.dataOrder?h.sizeHeatmapData.primary:h.sizeHeatmapData.secondary,"columns"===this.Da.dataOrder?h.sizeHeatmapData.secondary:h.sizeHeatmapData.primary]).jR(s("uTileDimensions"),[h.sizeHeatmapData.primary,h.sizeHeatmapData.secondary]),h.tiles.forEach((a=>{var u;const A=null===(u=this.pU)||void 0===u?void 0:u.tilesInfo.get(a.tileData);if(!A)return;let g=0,p=(a.sizeHeatmapDataVectors.primary-1)*(a.sizeHeatmapDataVectors.secondary-1);if(this.cj){const t=this.cj.fill.iFirstPrimary,i=this.cj.fill.iFirstPrimary+this.cj.fill.amountPrimary-1,s=a.iFirstVector.primary,e=a.iFirstVector.primary+a.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>f(Math.max(t,s),Math.min(i,e)))(t,i,s,e);g=(r.min-a.iFirstVector.primary)*(h.sizeGeometryData.secondary-1),p=(r.max-r.min)*(h.sizeGeometryData.secondary-1)}if(!(g<0||p<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,i=this.gb.nU;this.ZB.JO(r,t.lut,i).wR(s("uTileIntensityValues"),a.intensityDataTexture,2).LR(s("uTileBoundsAxisXZ"),[A.startLocationAxis.x,A.startLocationAxis.z,A.sizeAxis.x,A.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,i="x"===t.getLookUpProperty()?{min:this.Hi(),max:this.Wi()}:"y"===t.getLookUpProperty()?{min:this.Xi(),max:this.Zi()}:"z"===t.getLookUpProperty()?{min:this.ve(),max:this.ye()}:void 0;if(!i&&t.lut.percentageValues)return;this.ZB.JO(r,t.lut,i)}1!==t&&"phong"===this.sp.T().type&&a.normalmapTexture&&this.ZB.wR(s("uNormalmapTexture"),a.normalmapTexture,3),1===t&&this.ZB.ZR(s("uFirstId"),i+g),this.ZB.bR(o.rectangleLocationsBuffer,0,{location:e("aGeoCellOffset"),size:2},{location:c?e("aTriangleBary"):void 0,size:3}).ZR(s("uBaseInstance"),g).MR(s("uTileStartLocationAxisXZ"),[A.startLocationAxis.x,A.startLocationAxis.z]).MR(s("uTileSizeAxisXZ"),[A.sizeAxis.x,A.sizeAxis.z]).wR(s("uHeightmapTexture"),a.heightmapDataTexture,0).dO(o.rectangleLocationsDrawMode,0,o.rectangleLocationsDrawLength,p),l=!0,n.bindBuffer(n.ARRAY_BUFFER,null)}}))})),l})),1!==t&&this.sU.forEach((i=>{i.bY||(i.bY=this.cY.bY),i.MY||(i.MY=[this.cY.MY.x,this.cY.MY.y,this.cY.MY.z]),i.wY||(i.wY=[this.cY.MY.x,this.cY.MY.y,this.cY.MY.z]),i.Nh(!0),i.wc(t,0)})),{idCount:this.Da.columns*this.Da.rows}}_i(){return this.gb._i()}fj(){return this.sU.forEach((t=>t.dispose())),this.sU.length=0,this}dispose(){return super.dispose(),this.gb.dispose(),this.Aj&&(this.Aj.gridTileSizes.forEach((t=>{})),this.Aj.gridTiles.forEach((t=>{this.ZB.KB(t.heightmapDataTexture),t.normalmapTexture&&this.ZB.KB(t.normalmapTexture)})),this.ZB.BR(this.Aj.rectangleLocationsBuffer),this.Aj=void 0),this.fj(),this.DV={},this}_c(){return this.dispose(),this.gb._c(),this}Ay(t){return this.gb.Ay(t),this}gy(t){this.ej.push(t),qu(this.oj.gridTiles,t,(t=>t.heightmapData),((t,i)=>{t.heightmapData=i}));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.nj[i]=void 0;return this.rj=void 0,this}ly(t){return this.Y$.C(t),this}uy(){return this.Y$.T()}qe(t){return this.Ze=An(this.Ze,t),this.gb.qe(this.Ze),this}Mh(){return this.Ze}qv(t){return this.Kv="function"==typeof t?t(this.Kv):t,this}oy(){return this.Kv}Wi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.dj.max.x)||0}Hi(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.dj.min.x)||0}Zi(){const t=this.rj||this.vj();return this.rj=t,t.max}Xi(){const t=this.rj||this.vj();return this.rj=t,t.min}ye(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.dj.max.z)||0}ve(){var t;return(null===(t=this.pU)||void 0===t?void 0:t.dj.min.z)||0}uu(){return 0}cu(){return 0}fp(){return 0}vj(){if(this.rj)return this.rj;const t=this.cj?this.cj.fill.iFirstPrimary:0,i=this.cj?t+this.cj.fill.amountPrimary-1:this.Da.primaryDimensionVectorsCount-1;let s=rs,e=hs;return this.oj.gridTiles.forEach((r=>{for(let h=Math.max(t,r.iFirstUniqueVector.primary);h<=Math.min(i,r.iFirstUniqueVector.primary+r.sizeUniqueHeatmapDataVectors.primary-1);h+=1){const t=(h-r.iFirstUniqueVector.primary)*r.sizeHeatmapDataVectors.secondary;let i=this.nj[h];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:rs,max:hs},this.nj[h]=i;for(let h=0;h<r.sizeHeatmapDataVectors.secondary;h+=1){const n=r.heightmapData[t+h];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.rj={min:s,max:e},this.rj}}class Wv extends Pv{constructor(t,i,s,e){super(t,i,s),this.uY="disabled",this.kU=0,this.TU={},this.yj=new Map,this.jt={x:0,z:0},this.W$={x:1,z:1},this.Da={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.dj={min:{x:this.jt.x,z:this.jt.z},max:{x:"rows"===e.scrollDimension?this.jt.x+(e.columns-1)*this.W$.x:this.jt.x,z:"columns"===e.scrollDimension?this.jt.z+(e.rows-1)*this.W$.z:this.jt.z}};const r=()=>({shape:new Hv(this.cY,jt,this.mi,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this._b=[r(),r()]}Nh(t){this._b.forEach((i=>{i.shape.Nh(t)}));const i=this._b.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Zt(null===(s=i.shape.gb.nU)||void 0===s?void 0:s.min,rs)),t.max=Math.max(t.max,Zt(null===(e=i.shape.gb.nU)||void 0===e?void 0:e.max,hs)),t}),{min:rs,max:hs}),s=this._b.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Zt(null===(s=i.shape.rj)||void 0===s?void 0:s.min,rs)),t.max=Math.max(t.max,Zt(null===(e=i.shape.rj)||void 0===e?void 0:e.max,hs)),t}),{min:rs,max:hs});return this._b.forEach((t=>{t.shape.gb.nU=i,t.shape.rj=s})),this}wc(t,i){let s=0,e=i;return this._b.forEach((i=>{if(!i.hasData)return;i.shape.bY=this.bY,i.shape.MY=this.MY,i.shape.wY=this.wY;const{idCount:r}=i.shape.wc(t,e);void 0!==r&&(1===t&&this.yj.set(i,{idFirst:e,idCount:r}),s+=r,e+=r)})),{idCount:s}}kc(t,i,s,e,r){const h=Array.from(this.yj).find((i=>gs(t,i[1].idFirst,i[1].idFirst+i[1].idCount-1)));return h?h[0].shape.kc(t,h[1].idFirst,h[1].idCount,e,r):{}}sy(t,i){return this.jt=t,this.W$=i,this._b.forEach((t=>{t.shape.sy("columns"===this.Da.scrollDimension?{x:t.shape.ey().start.x,z:this.jt.z}:{x:this.jt.x,z:t.shape.ey().start.z},this.W$)})),"columns"===this.Da.scrollDimension?(this.dj.min.z=t.z,this.dj.max.z=this.jt.z+(this.Da.rows-1)*this.W$.z):(this.dj.min.x=t.x,this.dj.max.x=this.jt.x+(this.Da.columns-1)*this.W$.x),this}ey(){return{start:this.jt,step:this.W$}}Vi(){return this.kU=0,this.TU={},this.dj={min:{x:this.jt.x,z:this.jt.z},max:{x:"rows"===this.Da.scrollDimension?this.jt.x+(this.Da.columns-1)*this.W$.x:this.jt.x,z:"columns"===this.Da.scrollDimension?this.jt.z+(this.Da.rows-1)*this.W$.z:this.jt.z}},this._b.forEach((t=>{t.shape.setVisible(!1),t.shape.hj=!1,t.hasData=!1})),this}xy(t){var i;const s=this._b[0],e=this._b[1],r=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let h=0;if(!r)return this;do{const i=Math.floor(this.kU/this.Da.scrollDimensionSize)%this._b.length,n=this._b[i],o=this.kU%this.Da.scrollDimensionSize,a=this.Da.scrollDimensionSize-o,l=0===o,u=Math.min(a,r),c=o+u,d=o,f=d+1,A=h,g=h+u,p=this.kU>=this.Da.scrollDimensionSize&&c<=this.Da.scrollDimensionSize-1,v=l;l&&(n.shape.sy("columns"===this.Da.scrollDimension?{x:this.jt.x+(this.kU-1)*this.W$.x,z:this.jt.z}:{x:this.jt.x,z:this.jt.z+(this.kU-1)*this.W$.z},this.W$),n.shape.setVisible(!0));const y=p?0:1,m=c+(p?1:0);n.shape.uj({fill:{iFirstPrimary:y,amountPrimary:m},wireframe:{iFirstPrimary:y,amountPrimary:m,connectNext:!1}});const x=n===s?e:s,S=c+1,b=1+this.Da.scrollDimensionSize-S;x.shape.uj({fill:{iFirstPrimary:S,amountPrimary:b},wireframe:{iFirstPrimary:S,amountPrimary:b-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(A,g);let s=!1;v&&this.TU.yValues&&(s=!0,i.splice(0,0,this.TU.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Da.staticDimensionSize,values:i,type:"y"};n.shape.gy(e),n.hasData=!0,M.yValues=Array.from(i[u-1])}if(t.intensityValues){const i=t.intensityValues.slice(A,g);let s=!1;v&&this.TU.intensityValues&&(s=!0,i.splice(0,0,this.TU.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Da.staticDimensionSize,values:i,type:"intensity"};n.shape.Ay(e),n.hasData=!0,M.intensityValues=Array.from(i[u-1])}this.kU+=u,h+=u,this.TU=M}while(h<r);return"columns"===this.Da.scrollDimension?(this.dj.min.x=this.jt.x+Math.max(this.kU-this.Da.scrollDimensionSize,0)*this.W$.x,this.dj.max.x=this.jt.x+(this.kU-1)*this.W$.x):(this.dj.min.z=this.jt.z+Math.max(this.kU-this.Da.scrollDimensionSize,0)*this.W$.z,this.dj.max.z=this.jt.z+(this.kU-1)*this.W$.z),this}Ay(t){var i;const{iSample:s,yValues:e,intensityValues:r}=t,h=e||r;if(!h)return this;const n=s,o=s+h.length-1,a=h[0].length;this._b.forEach(((t,i)=>{const s=Math.floor(this.kU/this.Da.scrollDimensionSize)%this._b.length,h=this.kU%this.Da.scrollDimensionSize;let l,u;if(i===s?0===h?(u=-1,l=-1):(u=this.kU-1,l=u-h+1):(u=this.kU-h-1,l=u-this.Da.scrollDimensionSize+1),o<l||n>u)return;const c=Math.max(n,l),d=Math.min(o,u),f=d-c+1,A=r&&r.slice(c-n,d-n+1),g=e&&e.slice(c-n,d-n+1),p=A&&{type:"intensity",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:A},v=g&&{type:"y",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:g};p&&t.shape.Ay(p),v&&t.shape.gy(v),d===this.kU-1&&(this.TU={yValues:g?Array.from(g[g.length-1]):void 0,intensityValues:A?Array.from(A[A.length-1]):void 0})}));const l=this.kU-1;if(o>l){const t=o-l,s=e&&e.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),h=r&&r.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),n=s?s.length:null!==(i=null==h?void 0:h.length)&&void 0!==i?i:0;if(n<t){const i=this.TU||new Array(a).fill(0);for(let e=n;e<t;e+=1)s&&i.yValues&&s.unshift(i.yValues),h&&i.intensityValues&&h.unshift(i.intensityValues)}this.xy({heightMapValues:s,intensityValues:h,lengthPrimary:n,lengthSecondary:a})}return this}Sy(){return this.kU}ly(t){return this._b.forEach((i=>i.shape.ly(t))),this}uy(){return this._b[0].shape.uy()}qe(t){return this._b.forEach((i=>i.shape.qe(t))),this}Mh(){return this._b[0].shape.Mh()}qv(t){return this._b.forEach((i=>i.shape.qv(t))),this}oy(){return this._b[0].shape.oy()}_c(){return this.dispose(),this._b.forEach((t=>t.shape._c())),this}dispose(){return super.dispose(),this._b.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this._b.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}lp(t){return super.lp(t),this._b.forEach((i=>i.shape.lp(t))),this}Wi(){return this.dj.max.x}Hi(){return this.dj.min.x}Zi(){return Math.max(this._b[0].shape.Zi(),this._b[1].shape.Zi())}Xi(){return Math.min(this._b[0].shape.Xi(),this._b[1].shape.Xi())}ye(){return this.dj.max.z}ve(){return this.dj.min.z}uu(){return 0}cu(){return 0}fp(){return 0}Ii(t){return super.Ii(t),this._b.forEach((i=>i.shape.Ii(t))),this}}class Xv extends Sv{constructor(t,i,s,e){super(t,i,s),this.MY=c(0,0,1),this.mj=c(0,0,-1),this.xj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.sp=new We,this.ai=e}Cm(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.ai,e=i.x/s.x,r=i.y/s.y,h=t.x/s.x,n=t.y/s.y,o=this.pi.kt();return{x:h*o.x,y:n*o.y,width:e*o.x,height:r*o.y}}setCameraLocation(t){return this.MY=t,this}getCameraLocation(){return this.MY}setCameraDirection(t){return this.mj=es.normalize(t),this}getCameraDirection(){return this.mj}setLightLocation(t){return this.wY=t,this}getLightLocation(){return this.wY}Sj(){return c(this.xj[0],this.xj[1],this.xj[2])}bj(){return c(this.xj[4],this.xj[5],this.xj[6])}}class Zv extends Xv{constructor(t,i,s,e){super(t,i,s,e),this.bD=new Sp,this.Mj=!0,this.wj=()=>{this.Mj=!0},this._j="perspective",this.Sz=t,this.gl=t.Mz(),this.rY=this.Ei,this.pi.O("resize",this.wj),e.addEventListener("cellresize",this.wj)}vR(t){const i=t.Hi(),s=t.Xi(),e=t.ve(),r=t.Wi(),h=t.Zi(),n=t.ye();if(i===rs||r===hs||s===rs||h===hs||e===rs||n===hs)return ns;const o=t.uu(),a=t.cu(),l=t.fp(),u=Math.abs(t.Ws.Hp(o)*t.ai.x.tt()),c=Math.abs(t.Ws.Hp(a)*t.ai.y.tt()),d=Math.abs(t.Ws.Hp(l)*t.ai.z.tt()),f=i-u,A=r+u,g=s-c,p=h+c,v=e-d,y=n+d;let m;return[{x:f,y:g,z:v},{x:A,y:g,z:v},{x:f,y:p,z:v},{x:A,y:p,z:v},{x:f,y:g,z:y},{x:A,y:g,z:y},{x:f,y:p,z:y},{x:A,y:p,z:y}].map((i=>t.Ws.Xp(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};m=m?Ms(m,{min:t,max:t}):i})),m||ns}Xp(t){if(this.kj(),this.Cj(),!this.bY)return;const i=this.bD.CR(),s=c(i[0],i[1],i[2]),e=this.bD.kR(),r=c(e[0],e[1],e[2]),h=es.divideVec(es.subtractVec(t,s),r),n=this.bY,o=op.multiply(n,[h.x,h.y,h.z,1]),l=a(o[0]/o[3],o[1]/o[3]),u=this.pi.kt();return{x:.5*(1+l.x)*u.x,y:.5*(1+l.y)*u.y}}ix(t){const i=this.bD.CR(),s=this.bD.kR(),e=es.divideVec(es.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}sx(t){const i=this.bD.CR(),s=this.bD.kR(),e=es.addVec(es.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Hp(t){return t/1e3}EY(){return.001}Nh(){const t=this.MY,i=this.wY,s=this.ai.x.u||this.ai.y.u||this.ai.z.u;if(!i)throw Ri(0,(()=>Oi()));const{viewProjectionMatrix:e}=this.kj();this.Cj();const r=[t.x,t.y,t.z],h=[i.x,i.y,i.z];return this.Ei.forEach((t=>{t.bY=e,t.MY=r,t.wY=h,t.Nh(s)})),this}Km(t){this._j!==t&&(this._j=t,this.Mj=!0)}qm(){return this._j}kj(){if(!this.Mj&&this.bY)return{viewProjectionMatrix:this.bY};const t=this.Cm(),i=t.width/t.height;if("perspective"===this._j)this.Tj=op.projectionPerspective(45,i,.1,100);else{let t,s;const e=.5*es.length(this.MY);i>1?(t=e,s=t/i):(s=e,t=s*i),this.Tj=op.projectionOrthographic(-t,t,-s,s,-400,100)}const s=this.MY;this.xj[12]=s.x,this.xj[13]=s.y,this.xj[14]=s.z;const e=this.mj,r=c(0,1,0),h=es.multiply(e,-1),n=es.normalize(es.cross(r,h)),o=es.normalize(es.cross(h,n));this.xj[0]=n.x,this.xj[1]=n.y,this.xj[2]=n.z,this.xj[4]=o.x,this.xj[5]=o.y,this.xj[6]=o.z,this.xj[8]=h.x,this.xj[9]=h.y,this.xj[10]=h.z,this.Fj=op.inverse(this.xj);const{cellIndex:a,cellSpan:l,cellsAmount:u}=this.ai,d=l.x/u.x,f=l.y/u.y,A=(a.x+l.x/2)/u.x,g=(a.y+l.y/2)/u.y,p=op.multiply(op.translation(Ne(-1,1,A),Ne(-1,1,g),0),op.scaling(d,f,1));return this.bY=op.multiply(p,op.multiply(this.Tj,this.Fj)),this.Ij=op.inverse(this.bY),this.Mj=!1,{viewProjectionMatrix:this.bY}}Cj(){this.bD.Az(this.ai.x),this.bD.gz(this.ai.y),this.bD.pz(this.ai.z)}wc(t,i,s){var e;const r=this.gl.hR(),h=this.Cm(),n={x:h.x*r*i,y:h.y*r*i,width:h.width*r*i,height:h.height*r*i};this.gl.yR(n.x,n.y,n.width,n.height);let o=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const a=Array.from(this.rY.values());for(let i=0;i<a.length;i+=1){const e=a[i];if(e.getVisible())if(this.gl.cR(e.uY),this.gl.up(e.hp),1!==t)e.wc(t,0);else if(1===t&&e.getPointerEvents()){const{idCount:r}=e.wc(t,o);void 0!==r&&(s.push({entity:e,layer:this,entityIndex:i,idFirst:o,idCount:r,idLast:o+r-1}),o+=r)}}return this.gl.cR("disabled"),this.gl.up(!1),this.gl.dR(!1),this}setCameraLocation(t){return this.MY.x===t.x&&this.MY.y===t.y&&this.MY.z===t.z||(this.Mj=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.mj.x===t.x&&this.mj.y===t.y&&this.mj.z===t.z||(this.Mj=!0),super.setCameraDirection(t),this}G(){super.G(),this.pi.N("resize",this.wj),this.ai.removeEventListener("cellresize",this.wj)}dv(t){return this.LU(new Yv(this,this.PU,[],t))}Np(t,i){return this.LU(new Nv(this,this.PU,t,i))}vp(){return this.LU(new Dv(this,this.PU,[]))}Py(){return this.LU(new Uv(this,this.PU,[]))}bA(){return this.LU(new Ov(this,this.PU,[]))}ty(t){return this.LU(new Hv(this,this.PU,[],t))}my(t){return this.LU(new Wv(this,this.PU,[],t))}}class Jv{constructor(t,i){this.Lj=[],this.Pj=[],this.Bj=(t,i)=>{const s=this.Lj.find((i=>i.vc===t));s&&("pointerenter"!==i.type&&"pointermove"!==i.type||this.pi.Ga(s,!0,i.timeStamp),"pointerleave"===i.type&&this.pi.Ga(s,!1,i.timeStamp))},this.pi=t,this.Sc="init"in i?i.init({engine:t.Dg,handleEvent:this.Bj}):i,this.Dj=0,this.Ej=String(Math.round(1e6*Math.random()))}_n(t,i,s,e){const r=new En(t,i,s,e,`${this.Ej}-${this.Dj}`);return this.Lj.push(r),r.addEventListener("dispose",(()=>{var t;const i=this.Lj.indexOf(r);i>=0&&this.Lj.splice(i,1),(null===(t=this.pi.$a)||void 0===t?void 0:t.entity)===r&&this.pi.Ga(void 0,!1,Nt.performance.now())})),this.Dj+=1,r}Ko(){const t=this.Lj.filter((t=>t.getVisible()&&t.rn().length>0&&fe(t.Ze))).map((t=>t.yc())),i=this.Pj;this.Sc.update({textList:t,engine:this.pi.Dg,obstructingOverlays:i}),this.Pj.length=0}G(){const t=this.Lj.filter((t=>t.getVisible()&&t.rn().length>0&&fe(t.Ze))).map((t=>t.yc()));this.Sc.dispose&&this.Sc.dispose({textList:t,engine:this.pi.Dg})}FA(t){this.Pj.push(t)}}class Qv extends un{constructor(t,i,s,e=yp){if(super(t,i,s),this.Y=l(1,1),this.Rj=!1,this.Oj=0,this.zj=!0,this.Vj=0,this.DY=8388608,this.nE=[null,null],this.Nj=null,this.Gj=null,this.$j=0,this.Cg=!1,this.Uj=0,this.Bs=(t=!1)=>(this.ci||this.fa||$g(this.ZB.gl)||(t&&(this.Rj=!0),this.oa=!0,this.Yj||this.sa.xE(t)),this),this.Yj=!1,this._E=t=>{if(this.ci||this.fa)return;const i=t-this.Oj;if(i>=this.Na||-1===this.Na){this.Yj=!0,this.Oj=t,this.Rj=!1;const s=i>50?1e3/60:i;this.aa&&this.aa(s),this.Ms.Nh(i),this._a(),this.ka(),this.oa=!1,-1!==this.Na&&this.Rj&&(this.sa.xE(this.Rj),this.oa=!0),this.la&&this.la(),this.Yj=!1,this.D.R("renderframe",{}),this.oa&&this.Bs(this.Rj)}else this.oa=!0,this.sa.xE()},this.jj=new Map,this.Mz=()=>this.ZB,this.Hj=()=>{var t,i;const s=this.Ia(),e=this.zj,r=Nt.performance.now(),h=null===(t=this.Wj)||void 0===t?void 0:t.Xj.reduce(((t,i)=>t?i.Zj&&t.Zj&&i.Zj>t.Zj?i:t:i),void 0),n=null==h?void 0:h.Zj,o=null===(i=this.va)||void 0===i?void 0:i.timeStamp,a=this.Jj;return e?(this.Bs(!0),!1):void 0===h||(void 0===h||!h.Qj)&&(void 0!==n&&void 0===s?r-n>=1e3:!(void 0!==n&&void 0!==o&&r-o>=2e3&&(void 0===a||r-a>=2e3))||r-n>=1e3)},this.Kj=()=>{var t,i;this.qj=void 0;const s=null===(i=null===(t=this.Wj)||void 0===t?void 0:t.tH)||void 0===i?void 0:i.iH;void 0===s||s>=this.Vj||this.sH()},this.ka=()=>{if(this.ci||this.fa)return this;const t=this.ZB.gl,i=Nt.performance.now();this.ZB.gR(t.FRAMEBUFFER,this.sa.AE?this.nE[0]:null);const s=this.Y,e=s.x>0&&s.y>0,r=this.ZB.hR();if(this.ba.u&&this.ZB.gO(this.ba.T()),this.sa.dE&&this.iE&&(this.iE.canvas.width=s.x*r,this.iE.canvas.height=s.y*r),t.resize&&e&&t.resize(s.x*r,s.y*r),this.ZB.pR(0,0,s.x*r,s.y*r),this.ZB.yR(0,0,s.x*r,s.y*r),this.ZB.Vi(),e)for(const t of this.ra.values())t.wc(0,1,[]);if(this.xc&&this.xc.Ko(),this.Da.Oa&&e&&(this.qj&&(Nt.clearTimeout(this.qj),this.qj=void 0),this.Hj()?(this.sH(),this.ZB.gR(t.FRAMEBUFFER,this.sa.AE?this.nE[0]:null)):this.qj=Nt.setTimeout(this.Kj,500)),this.j(),this.ta(),Array.from(this.ga.values()).forEach((t=>{t.lastEvent.isLcjsArtificialEvent=!0,this.pa("pointermove",t.lastEvent)})),this.sa.AE){const i=this.ZB.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this.nE[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.nE[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.Y.x*r,this.Y.y*r,0,0,this.Y.x*r,this.Y.y*r,t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.tE),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.Y.x*r,this.Y.y*r,0),t.bindTexture(t.TEXTURE_2D,null);return this.ZB.gR(t.FRAMEBUFFER,null),$g(this.ZB.gl)?this.sa.KD(0,0,this.Y.x*r,this.Y.y*r,[this]):this.sa.xE(),this.zj=!1,this.Vj=i,this},this._a=()=>{if("use-window"===this.eH.mode){const t=Nt.devicePixelRatio||1;this.ZB.TO(t)}const t=this.Y;if(0===t.x||0===t.y)return this;this.Za.Z(t);for(const t of this.ra.values())t.Nh();return this.j(),this},this.sa=t,this.sa.dE){this.rH=Nt.document.createElement("canvas"),this.rH.style.width="100%",this.rH.style.height="100%",this.rH.style.display="block",this.rH.style.boxSizing="content-box",this.rH.style.position="absolute";const t=this.rH.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new bA("No Canvas context available.");this.iE=t,this.zn.appendChild(this.rH)}this.sa.TE(this);const r={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let h;if(this.sa.AE&&t.gl2&&(h=new e(this,this.Da,{type:"webgl2",ctx:t.gl2.ctx,antialias:r.antialias,lineAntialias:r.lineAntialias},this.bi.isDark)),h||this.sa.AE||(h=new e(this,this.Da,{type:"webgl1",ctx:t.gl,antialias:r.antialias,lineAntialias:r.lineAntialias},this.bi.isDark)),!h)throw new bA("No WebGL context available");if(this.ZB=h,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.eH={mode:"fixed",value:i.devicePixelRatio},this.ZB.TO(i.devicePixelRatio);else{const t=Nt.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=Nt.devicePixelRatio||1;this.eH=s?{mode:"use-window"}:{mode:"fixed",value:e},this.ZB.TO(e)}const n=i?i.width:void 0,o=i?i.height:void 0;this.Ha=this.hH(n),this.Xa=this.hH(o),this.nH(this.Ha,this.Xa),this.FU=this.zP("engine offscreen",1e6),this.oH=this.zP("engine bg",0);const a="function"==typeof this.bi.lcjsBackgroundFillStyle?Vt({resourcesBaseUrl:this.Da.me,styleFactory:this.bi.lcjsBackgroundFillStyle,apply:t=>this.setBackgroundFillStyle(t)}):this.bi.lcjsBackgroundFillStyle;this.Za=this.oH.tr(this.ai).qe(a).Ke(this.bi.lcjsBackgroundStrokeStyle).setPointerEvents(!1).sr({x:0,y:0});const u=this.zP("engine effects",200001).hY(this.bi.effect);this.vs=u;const c=this.sa.AE,d=this.kt();c&&(this.nE=[h.RR(),h.RR()]);const f=this.ZB.gl;c&&(this.Nj=f.createRenderbuffer(),this.Gj=f.createRenderbuffer()),this.tE=f.createTexture();const A=d.x*this.ZB.hR(),g=d.y*this.ZB.hR();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.Nj);const t=this.ZB.gl2.ctx;this.$j=this.sa.jD&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.$j,t.RGBA8,A,g),f.bindRenderbuffer(f.RENDERBUFFER,this.Gj),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.$j,t.DEPTH24_STENCIL8,A,g)}c&&(this.ZB.gR(f.FRAMEBUFFER,this.nE[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.Nj),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this.Gj)),f.bindTexture(f.TEXTURE_2D,this.tE),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,A,g,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.ZB.gR(f.FRAMEBUFFER,this.nE[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.tE,0)),this.ZB.gR(f.FRAMEBUFFER,null),this.xa(),this.ta(),this.Dg=rn(this),this.Mc={bi:this.bi,Ms:this.Ms,ai:this.ai,Bs:t=>this.Bs(t),A_:()=>this.oa,Ia:()=>this.Ia(),Ls:t=>(this.Jj=Nt.performance.now(),this.Ls({x:t.clientX,y:t.clientY})),mF:t=>this.mF(t),Da:this.Da,La:t=>this.La(t),vs:this.vs,il:t=>this.il(t),sl:t=>this.sl(t),th:{Tr:(t,i,s)=>{const e=this.ZB.kh(i.family).aD(t,i,s,this.bi.isDark);return this.xc?{x:e.x,y:e.y,isEstimate:!1}:e}},$s:()=>this.ga.size>0,Us:(t,i)=>void 0!==Array.from(this.ga.values()).find((s=>!(void 0!==t&&s.entity!==t||void 0!==i&&i!==s.collectionMember)))},i.textRenderer&&(this.xc=new Jv(this,i.textRenderer));const p=()=>{this.G()};Nt.addEventListener("unload",p),this.ua.push((()=>{Nt.removeEventListener("unload",p)}))}get aH(){return this.ra}ea(t,i){let s=this.jj.get(t);if(!s){const i=this.ZB.DO(t),e=new Set,r=t=>{e.add(t)},h=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.jj.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:r,handleInstanceDisposed:h,sharedEngineReference:{xF:()=>i.WE,SF:t=>{i.WE?t():n.push(t)}}},this.jj.set(t,s),i.Kc(this),i.tR((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new gr(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}mF(t){const i=Array.from(this.jj.values()).find((i=>i.instances.has(t)));if(!i)throw Ri(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}Ls(t){var i;if(this.$a&&this.$a.entity.getPointerEvents()){if(this.$a.pointed||!(Nt.performance.now()-this.$a.timestamp>=50))return{entity:this.$a.entity,collectionMember:void 0,info:void 0};this.$a=void 0}const s=null===(i=this.Wj)||void 0===i?void 0:i.tH;if(!s)return;(!this.ma||Nt.performance.now()-this.ma>100)&&this.ta();const e=this.hr(t.x,t.y),r=Math.round(e.x*this.ZB.hR()),h=Math.round(e.y*this.ZB.hR());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.lH(s,r+t[0]/s.uH,h+t[1]/s.uH))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember,info:i.info}:t}),void 0)}lH(t,i,s){const e=Math.round(i*t.uH),r=Math.round(s*t.uH);if(e<0||e>=t.Y.x||r<0||r>=t.Y.y)return;const h=4*(e+r*t.Y.x),n=t.cH[h+0],o=t.cH[h+1],a=t.cH[h+2],l=t.cH[h+3];if(void 0===n||void 0===o||void 0===a||void 0===l)return;if(0===n&&0===o&&0===a&&0===l)return;const u=16777216*n+65536*o+256*a+l,c=t.dH.find((t=>u>=t.idFirst&&u<=t.idLast));if(!c)return;const{collectionMember:d,info:f}=c.entity.kc(u,c.idFirst,c.idCount,i,s);return{entity:c.entity,collectionMember:d,entityIndex:c.entityIndex,layerIndex:c.layer.Ta(),info:f}}Qo(t,i,s,e=1){const r=1!==e,h=this.ZB.gl;let n,o=!this.sa.AE||r||!this.Cg;if(this.xc){const t=this.xc;this.xc=void 0;const i=[],s=[];this.ra.forEach((t=>{t.Ei.forEach((t=>{t.getVisible()&&t instanceof En&&s.push(t)}))})),s.forEach((t=>{const s=t.Ws._n(t.ai);i.push(s),s.sr(t.Vl()).tn(t.rn()).Ch(t.kh()).qe(t.Mh()).Zl(t.Hl()).Mn(t.Jl()).wn(t.Ql()).Th(t.Fh()).qh(t.Gl()).nl(t.ol()).setPointerEvents(!1)})),n={ctr:t,temporaryWebglTextObjects:i},o=!0}const a=this.Y;r&&this.xa({x:a.x*e,y:a.y*e}),o&&(r&&this.aa&&this.aa(0),this._a(),this.ka()),this.sa.AE?(this.ZB.gR(h.FRAMEBUFFER,this.nE[1]),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this.tE,0)):this.ZB.gR(h.FRAMEBUFFER,null);const l=this.qD(),u=l.x,c=l.y,d=new Uint8Array(u*c*4);h.readPixels(0,0,u,c,h.RGBA,h.UNSIGNED_BYTE,d),n&&(n.temporaryWebglTextObjects.forEach((t=>t.dispose())),this.xc=n.ctr,this.ka());const f=new ImageData(new Uint8ClampedArray(d),u,c),A=document.createElement("canvas"),g=A.getContext("2d");if(!g)throw new Error("Failed to create 2D context for saving image.");A.width=u,A.height=c,g.putImageData(f,0,0),g.translate(0,c),g.scale(1,-1),g.drawImage(A,0,0),this.sa.AE&&(this.ZB.gR(h.FRAMEBUFFER,this.nE[0]),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Nj),this.ZB.gR(h.FRAMEBUFFER,this.nE[1]),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this.tE,0)),this.ZB.gR(h.FRAMEBUFFER,null);const p=A.toDataURL(t,i);return r&&this.xa(a),s?p:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=Nt.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new Nt.Blob([e.buffer],{type:i})})(p)}Ko(t,i,s=!1){this.xa(a(Math.round(t),Math.round(i))),this.wa();const e=this.ZB.gl.drawingBufferWidth,r=this.ZB.gl.drawingBufferHeight,h=new Uint8Array(e*r*4);if(this.ZB.gl.readPixels(0,0,e,r,this.ZB.gl.RGBA,this.ZB.gl.UNSIGNED_BYTE,h),!s){const t=r/2|0,i=4*e,s=new Uint8Array(4*e);for(let e=0;e<t;e+=1){const t=e*i,n=(r-e-1)*i;s.set(h.subarray(t,t+i)),h.copyWithin(t,n,n+i),h.set(s,n)}}return this.na={x:0,y:i},h}dB(t){return void 0!==this.Ha?this.Ha[0]=t:this.Ha=[t,void 0],this.zn.style.minWidth=`${this.Ha[0]}px`,this.xa(),this}AB(t){return void 0!==this.Ha?this.Ha[1]=t:this.Ha=[void 0,t],this.zn.style.maxWidth=`${this.Ha[1]}px`,this.xa(),this}pB(t){return void 0!==this.Xa?this.Xa[0]=t:this.Xa=[t,void 0],this.zn.style.minHeight=`${this.Xa[0]}px`,this.xa(),this}yB(t){return void 0!==this.Xa?this.Xa[1]=t:this.Xa=[void 0,t],this.zn.style.maxHeight=`${this.Xa[1]}px`,this.xa(),this}nH(t,i){return this.Ha=t,this.Xa=i,this.zn.style.minWidth=`${this.Ha[0]}px`,this.zn.style.maxWidth=`${this.Ha[1]}px`,this.zn.style.minHeight=`${this.Xa[0]}px`,this.zn.style.maxHeight=`${this.Xa[1]}px`,this.xa(),this}QD(t){return this.Cg!==t&&(this.D.R("inviewchanged",{isInView:t}),this.Cg=t),this}JD(){return this.Cg}FE(t){this.Uj=t}CE(){return this.Uj}zP(t,i=this.tl()){const s=this.qa(i);if(s){if(Ri(0,(()=>{})),!(s instanceof wv))throw new Error("Unexpected Engine Layer error");return s}return this.Ca(new wv(this,i,t))}GP(t,i,s){const e=this.qa(i);if(e){if(Ri(0,(()=>{})),!(e instanceof Zv))throw new Error("Unexpected Engine Layer error");return e}return this.Ca(new Zv(this,i,t,s))}kt(){return this.Y}qD(){const t=this.ZB.hR();return{x:Math.round(this.Y.x*t),y:Math.round(this.Y.y*t)}}hH(t){return t instanceof Array||(t=[t,t]),t}fH(){return this.sa.sE}AH(){return $g(this.ZB.gl)}sH(){var t;const i=this.ZB.gl,s=Nt.performance.now(),e=this.Da.Ra,r={x:Math.ceil(this.Y.x*this.ZB.hR()*e),y:Math.ceil(this.Y.y*this.ZB.hR()*e)};this.Wj||(this.Wj={uH:e,gH:r,Xj:[],tH:void 0});let h=this.Wj.Xj.find((t=>!t.Qj)),n=!1;h||(n=!0,h={Qj:!1,Y:r,WO:i.createTexture(),pH:this.ZB.RR(),Gj:this.ZB.OR(),vH:new Uint8Array,Zj:void 0},this.Wj.Xj.push(h));const o=h;(n||o.Y.x!==r.x||o.Y.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,o.WO),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.ZB.gR(i.FRAMEBUFFER,o.pH),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o.WO,0),i.bindRenderbuffer(i.RENDERBUFFER,o.Gj),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,o.Gj),o.vH=new Uint8Array(r.x*r.y*4),o.Y=r),o.Qj=!0,o.Zj=s,this.ZB.gR(i.FRAMEBUFFER,o.pH),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.ZB.pR(0,0,r.x,r.y);const a=[];for(const t of this.ra.values())t.wc(1,e,a);this.ZB.gR(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.ZB.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.Wj){const t=this.Wj.tH;if(t&&t.iH>s)return;this.Wj.tH={iH:s,uH:e,Y:r,cH:o.vH,dH:a}}};l?this.ZB.YO(l,o.pH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,o.vH).then((()=>{this.ci||(o.Qj=!1,u())})).catch((t=>{this.ci||(o.Qj=!1,Nt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.ZB.jO(o.pH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,o.vH),o.Qj=!1,u())}xa(t){const i=this.ZB.hR();if("use-window"===this.eH.mode){const t=Nt.devicePixelRatio||1;this.ZB.TO(t)}const s=this.Y.x,e=this.Y.y,r=t||{x:this.zn.offsetWidth,y:this.zn.offsetHeight},h=this.ZB.hR();if(0!==r.x&&0!==r.y&&(r.x!==s||r.y!==e||i!==h)){this.Y=r,this.ai.x.W(0,r.x).Z(r.x),this.ai.y.W(0,r.y).Z(r.y);const t=r.x*h,i=r.y*h,s=this.ZB.gl,e=this.sa.AE;if(this.tE&&(s.bindTexture(s.TEXTURE_2D,this.tE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),e){const e=this.ZB.gl2.ctx;this.Nj&&(s.bindRenderbuffer(s.RENDERBUFFER,this.Nj),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.$j,e.RGBA8,t,i)),this.Gj&&(s.bindRenderbuffer(s.RENDERBUFFER,this.Gj),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.$j,e.DEPTH24_STENCIL8,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this.D.R("resize",{engineWidth:this.Y.x,engineHeight:this.Y.y,width:this.Y.x,height:this.Y.y})}}G(){var t;this.ci||(super.G(),this.xc&&this.xc.G(),this.qj&&(Nt.clearTimeout(this.qj),this.qj=void 0),Array.from(this.ZB.ED.entries()).forEach((([t,i])=>{i._c(!1),this.ZB.ED.delete(t)})),Array.from(this.ZB.GR.values()).forEach((t=>{t.unbindResources()})),this.ZB.GR.clear(),this.ZB.NR.$E(),this.ZB.wO.G(),this.ZB.BR(this.ZB._O),this.ZB.BR(this.ZB.kO),this.ZB.xO.forEach(((t,i)=>{this.ZB.gl.deleteBuffer(i)})),this.ZB.xO.clear(),this.ZB.VO&&(this.ZB.BR(this.ZB.VO.buffer),this.ZB.VO=void 0),this.ZB.VR(this.nE[0]),this.ZB.VR(this.nE[1]),this.ZB.zR(this.Nj),this.ZB.KB(this.tE),this.ZB.zR(this.Gj),this.Wj&&(this.Wj.Xj.forEach((t=>{this.ZB.zR(t.Gj),this.ZB.VR(t.pH),this.ZB.KB(t.WO)})),this.Wj=void 0),this.ZB.vO.forEach((t=>this.ZB.BR(t))),this.jj.clear(),this.sa.IE(this),this.rH&&(null===(t=this.rH.parentElement)||void 0===t||t.removeChild(this.rH),this.rH=void 0),this.iE&&(this.iE=void 0),this.ZB.gl=void 0)}}var Kv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qv={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function r(t,i,s){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.qE(t||0,i||10,s||"be"))}var h;"object"==typeof qv?qv.exports=r:i.BN=r,r.BN=r,r.wordSize=26;try{h=(void 0).Buffer}catch(t){}function n(t,i,e){for(var r=0,h=Math.min(t.length,e),n=0,o=i;o<h;o++){var a,l=t.charCodeAt(o)-48;r<<=4,r|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),r}function o(t,i,e,r){for(var h=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;h*=r,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<r,"Invalid character"),h+=n}return h}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,i){return t.cmp(i)>0?t:i},r.min=function(t,i){return t.cmp(i)<0?t:i},r.prototype.qE=function(t,i,e){if("number"==typeof t)return this.yH(t,i,e);if("object"==typeof t)return this.mH(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===i?this.xH(t,r):this.SH(t,i,r),"-"===t[0]&&(this.negative=1),this.bH(),"le"===e&&this.mH(this.toArray(),i,e)},r.prototype.yH=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.mH(this.toArray(),i,e)},r.prototype.mH=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var h,n,o=0;if("be"===e)for(r=t.length-1,h=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[h]|=n<<o&67108863,this.words[h+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,h++);else if("le"===e)for(r=0,h=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[h]|=n<<o&67108863,this.words[h+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,h++);return this.bH()},r.prototype.xH=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,r,h=0;for(s=t.length-6,e=0;s>=i;s-=6)r=n(t,s,s+6),this.words[e]|=r<<h&67108863,this.words[e+1]|=r>>>26-h&4194303,(h+=24)>=26&&(h-=26,e++);s+6!==i&&(r=n(t,i,s+6),this.words[e]|=r<<h&67108863,this.words[e+1]|=r>>>26-h&4194303),this.bH()},r.prototype.SH=function(t,i,s){this.words=[0],this.length=1;for(var e=0,r=1;r<=67108863;r*=i)e++;e--,r=r/i|0;for(var h=t.length-s,n=h%e,a=Math.min(h,h-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this.MH(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.MH(l)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.wH=function(t){a(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._H=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.bH=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.kH()},r.prototype.kH=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var r=0|t.words[0],h=0|i.words[0],n=r*h,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var A=l-f|0;u+=(n=(r=0|t.words[A])*(h=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.bH()}r.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var r=0,h=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|h)).toString(16);e=0!=(h=o>>>24-r&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(r+=2)>=26&&(r-=26,n--)}for(0!==h&&(e=h.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var A=this.clone();for(A.negative=0;!A.isZero();){var g=A.modrn(f).toString(t);e=(A=A.idivn(f)).isZero()?g+e:u[l-g.length]+g+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},h&&(r.prototype.toBuffer=function(t,i){return this.toArrayLike(h,t,i)}),r.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},r.prototype.toArrayLike=function(t,i,e){this.bH();var r=this.byteLength(),h=e||Math.max(1,r);s(r<=h,"byte array longer than desired length"),s(h>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,h);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,r),n},r.prototype.CH=function(t,i){for(var s=0,e=0,r=0,h=0;r<this.length;r++){var n=this.words[r]<<h|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===h?(s<t.length&&(t[s++]=n>>24&255),e=0,h=0):(e=n>>>24,h+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},r.prototype.TH=function(t,i){for(var s=t.length-1,e=0,r=0,h=0;r<this.length;r++){var n=this.words[r]<<h|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===h?(s>=0&&(t[s--]=n>>24&255),e=0,h=0):(e=n>>>24,h+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?r.prototype.FH=function(t){return 32-Math.clz32(t)}:r.prototype.FH=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},r.prototype.IH=function(t){if(0===t)return 26;var i=t,s=0;return 8191&i||(s+=13,i>>>=13),127&i||(s+=7,i>>>=7),15&i||(s+=4,i>>>=4),3&i||(s+=2,i>>>=2),1&i||s++,s},r.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.FH(t);return 26*(this.length-1)+i},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.IH(this.words[i]);if(t+=s,26!==s)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.bH()},r.prototype.ior=function(t){return s(!(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.bH()},r.prototype.iand=function(t){return s(!(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.bH()},r.prototype.ixor=function(t){return s(!(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this._H(i),e>0&&i--;for(var r=0;r<i;r++)this.words[r]=67108863&~this.words[r];return e>0&&(this.words[r]=~this.words[r]&67108863>>26-e),this.bH()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,r=t%26;return this._H(e+1),this.words[e]=i?this.words[e]|1<<r:this.words[e]&~(1<<r),this.bH()},r.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.kH();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.kH();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var r=0,h=0;h<e.length;h++)i=(0|s.words[h])+(0|e.words[h])+r,this.words[h]=67108863&i,r=i>>>26;for(;0!==r&&h<s.length;h++)i=(0|s.words[h])+r,this.words[h]=67108863&i,r=i>>>26;if(this.length=s.length,0!==r)this.words[this.length]=r,this.length++;else if(s!==this)for(;h<s.length;h++)this.words[h]=s.words[h];return this},r.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.kH()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.kH();var s,e,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(s=this,e=t):(s=t,e=this);for(var h=0,n=0;n<e.length;n++)h=(i=(0|s.words[n])-(0|e.words[n])+h)>>26,this.words[n]=67108863&i;for(;0!==h&&n<s.length;n++)h=(i=(0|s.words[n])+h)>>26,this.words[n]=67108863&i;if(0===h&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.bH()},r.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,i,s){var e,r,h,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],A=8191&f,g=f>>>13,p=0|n[2],v=8191&p,y=p>>>13,m=0|n[3],x=8191&m,S=m>>>13,b=0|n[4],M=8191&b,w=b>>>13,_=0|n[5],k=8191&_,C=_>>>13,T=0|n[6],F=8191&T,I=T>>>13,L=0|n[7],P=8191&L,B=L>>>13,D=0|n[8],E=8191&D,R=D>>>13,O=0|n[9],z=8191&O,V=O>>>13,N=0|o[0],G=8191&N,$=N>>>13,U=0|o[1],Y=8191&U,j=U>>>13,H=0|o[2],W=8191&H,X=H>>>13,Z=0|o[3],J=8191&Z,Q=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,rt=0|o[6],ht=8191&rt,nt=rt>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],At=8191&ft,gt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var pt=(l+(e=Math.imul(c,G))|0)+((8191&(r=(r=Math.imul(c,$))+Math.imul(d,G)|0))<<13)|0;l=((h=Math.imul(d,$))+(r>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(A,G),r=(r=Math.imul(A,$))+Math.imul(g,G)|0,h=Math.imul(g,$);var vt=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(r=(r=r+Math.imul(c,j)|0)+Math.imul(d,Y)|0))<<13)|0;l=((h=h+Math.imul(d,j)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(v,G),r=(r=Math.imul(v,$))+Math.imul(y,G)|0,h=Math.imul(y,$),e=e+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,j)|0)+Math.imul(g,Y)|0,h=h+Math.imul(g,j)|0;var yt=(l+(e=e+Math.imul(c,W)|0)|0)+((8191&(r=(r=r+Math.imul(c,X)|0)+Math.imul(d,W)|0))<<13)|0;l=((h=h+Math.imul(d,X)|0)+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(x,G),r=(r=Math.imul(x,$))+Math.imul(S,G)|0,h=Math.imul(S,$),e=e+Math.imul(v,Y)|0,r=(r=r+Math.imul(v,j)|0)+Math.imul(y,Y)|0,h=h+Math.imul(y,j)|0,e=e+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(g,W)|0,h=h+Math.imul(g,X)|0;var mt=(l+(e=e+Math.imul(c,J)|0)|0)+((8191&(r=(r=r+Math.imul(c,Q)|0)+Math.imul(d,J)|0))<<13)|0;l=((h=h+Math.imul(d,Q)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(M,G),r=(r=Math.imul(M,$))+Math.imul(w,G)|0,h=Math.imul(w,$),e=e+Math.imul(x,Y)|0,r=(r=r+Math.imul(x,j)|0)+Math.imul(S,Y)|0,h=h+Math.imul(S,j)|0,e=e+Math.imul(v,W)|0,r=(r=r+Math.imul(v,X)|0)+Math.imul(y,W)|0,h=h+Math.imul(y,X)|0,e=e+Math.imul(A,J)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(g,J)|0,h=h+Math.imul(g,Q)|0;var xt=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((h=h+Math.imul(d,tt)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(k,G),r=(r=Math.imul(k,$))+Math.imul(C,G)|0,h=Math.imul(C,$),e=e+Math.imul(M,Y)|0,r=(r=r+Math.imul(M,j)|0)+Math.imul(w,Y)|0,h=h+Math.imul(w,j)|0,e=e+Math.imul(x,W)|0,r=(r=r+Math.imul(x,X)|0)+Math.imul(S,W)|0,h=h+Math.imul(S,X)|0,e=e+Math.imul(v,J)|0,r=(r=r+Math.imul(v,Q)|0)+Math.imul(y,J)|0,h=h+Math.imul(y,Q)|0,e=e+Math.imul(A,q)|0,r=(r=r+Math.imul(A,tt)|0)+Math.imul(g,q)|0,h=h+Math.imul(g,tt)|0;var St=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(r=(r=r+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((h=h+Math.imul(d,et)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(F,G),r=(r=Math.imul(F,$))+Math.imul(I,G)|0,h=Math.imul(I,$),e=e+Math.imul(k,Y)|0,r=(r=r+Math.imul(k,j)|0)+Math.imul(C,Y)|0,h=h+Math.imul(C,j)|0,e=e+Math.imul(M,W)|0,r=(r=r+Math.imul(M,X)|0)+Math.imul(w,W)|0,h=h+Math.imul(w,X)|0,e=e+Math.imul(x,J)|0,r=(r=r+Math.imul(x,Q)|0)+Math.imul(S,J)|0,h=h+Math.imul(S,Q)|0,e=e+Math.imul(v,q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(y,q)|0,h=h+Math.imul(y,tt)|0,e=e+Math.imul(A,st)|0,r=(r=r+Math.imul(A,et)|0)+Math.imul(g,st)|0,h=h+Math.imul(g,et)|0;var bt=(l+(e=e+Math.imul(c,ht)|0)|0)+((8191&(r=(r=r+Math.imul(c,nt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((h=h+Math.imul(d,nt)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(P,G),r=(r=Math.imul(P,$))+Math.imul(B,G)|0,h=Math.imul(B,$),e=e+Math.imul(F,Y)|0,r=(r=r+Math.imul(F,j)|0)+Math.imul(I,Y)|0,h=h+Math.imul(I,j)|0,e=e+Math.imul(k,W)|0,r=(r=r+Math.imul(k,X)|0)+Math.imul(C,W)|0,h=h+Math.imul(C,X)|0,e=e+Math.imul(M,J)|0,r=(r=r+Math.imul(M,Q)|0)+Math.imul(w,J)|0,h=h+Math.imul(w,Q)|0,e=e+Math.imul(x,q)|0,r=(r=r+Math.imul(x,tt)|0)+Math.imul(S,q)|0,h=h+Math.imul(S,tt)|0,e=e+Math.imul(v,st)|0,r=(r=r+Math.imul(v,et)|0)+Math.imul(y,st)|0,h=h+Math.imul(y,et)|0,e=e+Math.imul(A,ht)|0,r=(r=r+Math.imul(A,nt)|0)+Math.imul(g,ht)|0,h=h+Math.imul(g,nt)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((h=h+Math.imul(d,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(E,G),r=(r=Math.imul(E,$))+Math.imul(R,G)|0,h=Math.imul(R,$),e=e+Math.imul(P,Y)|0,r=(r=r+Math.imul(P,j)|0)+Math.imul(B,Y)|0,h=h+Math.imul(B,j)|0,e=e+Math.imul(F,W)|0,r=(r=r+Math.imul(F,X)|0)+Math.imul(I,W)|0,h=h+Math.imul(I,X)|0,e=e+Math.imul(k,J)|0,r=(r=r+Math.imul(k,Q)|0)+Math.imul(C,J)|0,h=h+Math.imul(C,Q)|0,e=e+Math.imul(M,q)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(w,q)|0,h=h+Math.imul(w,tt)|0,e=e+Math.imul(x,st)|0,r=(r=r+Math.imul(x,et)|0)+Math.imul(S,st)|0,h=h+Math.imul(S,et)|0,e=e+Math.imul(v,ht)|0,r=(r=r+Math.imul(v,nt)|0)+Math.imul(y,ht)|0,h=h+Math.imul(y,nt)|0,e=e+Math.imul(A,at)|0,r=(r=r+Math.imul(A,lt)|0)+Math.imul(g,at)|0,h=h+Math.imul(g,lt)|0;var wt=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((h=h+Math.imul(d,dt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,G),r=(r=Math.imul(z,$))+Math.imul(V,G)|0,h=Math.imul(V,$),e=e+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,j)|0)+Math.imul(R,Y)|0,h=h+Math.imul(R,j)|0,e=e+Math.imul(P,W)|0,r=(r=r+Math.imul(P,X)|0)+Math.imul(B,W)|0,h=h+Math.imul(B,X)|0,e=e+Math.imul(F,J)|0,r=(r=r+Math.imul(F,Q)|0)+Math.imul(I,J)|0,h=h+Math.imul(I,Q)|0,e=e+Math.imul(k,q)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(C,q)|0,h=h+Math.imul(C,tt)|0,e=e+Math.imul(M,st)|0,r=(r=r+Math.imul(M,et)|0)+Math.imul(w,st)|0,h=h+Math.imul(w,et)|0,e=e+Math.imul(x,ht)|0,r=(r=r+Math.imul(x,nt)|0)+Math.imul(S,ht)|0,h=h+Math.imul(S,nt)|0,e=e+Math.imul(v,at)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(y,at)|0,h=h+Math.imul(y,lt)|0,e=e+Math.imul(A,ct)|0,r=(r=r+Math.imul(A,dt)|0)+Math.imul(g,ct)|0,h=h+Math.imul(g,dt)|0;var _t=(l+(e=e+Math.imul(c,At)|0)|0)+((8191&(r=(r=r+Math.imul(c,gt)|0)+Math.imul(d,At)|0))<<13)|0;l=((h=h+Math.imul(d,gt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(z,Y),r=(r=Math.imul(z,j))+Math.imul(V,Y)|0,h=Math.imul(V,j),e=e+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(R,W)|0,h=h+Math.imul(R,X)|0,e=e+Math.imul(P,J)|0,r=(r=r+Math.imul(P,Q)|0)+Math.imul(B,J)|0,h=h+Math.imul(B,Q)|0,e=e+Math.imul(F,q)|0,r=(r=r+Math.imul(F,tt)|0)+Math.imul(I,q)|0,h=h+Math.imul(I,tt)|0,e=e+Math.imul(k,st)|0,r=(r=r+Math.imul(k,et)|0)+Math.imul(C,st)|0,h=h+Math.imul(C,et)|0,e=e+Math.imul(M,ht)|0,r=(r=r+Math.imul(M,nt)|0)+Math.imul(w,ht)|0,h=h+Math.imul(w,nt)|0,e=e+Math.imul(x,at)|0,r=(r=r+Math.imul(x,lt)|0)+Math.imul(S,at)|0,h=h+Math.imul(S,lt)|0,e=e+Math.imul(v,ct)|0,r=(r=r+Math.imul(v,dt)|0)+Math.imul(y,ct)|0,h=h+Math.imul(y,dt)|0;var kt=(l+(e=e+Math.imul(A,At)|0)|0)+((8191&(r=(r=r+Math.imul(A,gt)|0)+Math.imul(g,At)|0))<<13)|0;l=((h=h+Math.imul(g,gt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,W),r=(r=Math.imul(z,X))+Math.imul(V,W)|0,h=Math.imul(V,X),e=e+Math.imul(E,J)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(R,J)|0,h=h+Math.imul(R,Q)|0,e=e+Math.imul(P,q)|0,r=(r=r+Math.imul(P,tt)|0)+Math.imul(B,q)|0,h=h+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,r=(r=r+Math.imul(F,et)|0)+Math.imul(I,st)|0,h=h+Math.imul(I,et)|0,e=e+Math.imul(k,ht)|0,r=(r=r+Math.imul(k,nt)|0)+Math.imul(C,ht)|0,h=h+Math.imul(C,nt)|0,e=e+Math.imul(M,at)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(w,at)|0,h=h+Math.imul(w,lt)|0,e=e+Math.imul(x,ct)|0,r=(r=r+Math.imul(x,dt)|0)+Math.imul(S,ct)|0,h=h+Math.imul(S,dt)|0;var Ct=(l+(e=e+Math.imul(v,At)|0)|0)+((8191&(r=(r=r+Math.imul(v,gt)|0)+Math.imul(y,At)|0))<<13)|0;l=((h=h+Math.imul(y,gt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,J),r=(r=Math.imul(z,Q))+Math.imul(V,J)|0,h=Math.imul(V,Q),e=e+Math.imul(E,q)|0,r=(r=r+Math.imul(E,tt)|0)+Math.imul(R,q)|0,h=h+Math.imul(R,tt)|0,e=e+Math.imul(P,st)|0,r=(r=r+Math.imul(P,et)|0)+Math.imul(B,st)|0,h=h+Math.imul(B,et)|0,e=e+Math.imul(F,ht)|0,r=(r=r+Math.imul(F,nt)|0)+Math.imul(I,ht)|0,h=h+Math.imul(I,nt)|0,e=e+Math.imul(k,at)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(C,at)|0,h=h+Math.imul(C,lt)|0,e=e+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,dt)|0)+Math.imul(w,ct)|0,h=h+Math.imul(w,dt)|0;var Tt=(l+(e=e+Math.imul(x,At)|0)|0)+((8191&(r=(r=r+Math.imul(x,gt)|0)+Math.imul(S,At)|0))<<13)|0;l=((h=h+Math.imul(S,gt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,q),r=(r=Math.imul(z,tt))+Math.imul(V,q)|0,h=Math.imul(V,tt),e=e+Math.imul(E,st)|0,r=(r=r+Math.imul(E,et)|0)+Math.imul(R,st)|0,h=h+Math.imul(R,et)|0,e=e+Math.imul(P,ht)|0,r=(r=r+Math.imul(P,nt)|0)+Math.imul(B,ht)|0,h=h+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,r=(r=r+Math.imul(F,lt)|0)+Math.imul(I,at)|0,h=h+Math.imul(I,lt)|0,e=e+Math.imul(k,ct)|0,r=(r=r+Math.imul(k,dt)|0)+Math.imul(C,ct)|0,h=h+Math.imul(C,dt)|0;var Ft=(l+(e=e+Math.imul(M,At)|0)|0)+((8191&(r=(r=r+Math.imul(M,gt)|0)+Math.imul(w,At)|0))<<13)|0;l=((h=h+Math.imul(w,gt)|0)+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),r=(r=Math.imul(z,et))+Math.imul(V,st)|0,h=Math.imul(V,et),e=e+Math.imul(E,ht)|0,r=(r=r+Math.imul(E,nt)|0)+Math.imul(R,ht)|0,h=h+Math.imul(R,nt)|0,e=e+Math.imul(P,at)|0,r=(r=r+Math.imul(P,lt)|0)+Math.imul(B,at)|0,h=h+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,r=(r=r+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,h=h+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(k,At)|0)|0)+((8191&(r=(r=r+Math.imul(k,gt)|0)+Math.imul(C,At)|0))<<13)|0;l=((h=h+Math.imul(C,gt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,ht),r=(r=Math.imul(z,nt))+Math.imul(V,ht)|0,h=Math.imul(V,nt),e=e+Math.imul(E,at)|0,r=(r=r+Math.imul(E,lt)|0)+Math.imul(R,at)|0,h=h+Math.imul(R,lt)|0,e=e+Math.imul(P,ct)|0,r=(r=r+Math.imul(P,dt)|0)+Math.imul(B,ct)|0,h=h+Math.imul(B,dt)|0;var Lt=(l+(e=e+Math.imul(F,At)|0)|0)+((8191&(r=(r=r+Math.imul(F,gt)|0)+Math.imul(I,At)|0))<<13)|0;l=((h=h+Math.imul(I,gt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,e=Math.imul(z,at),r=(r=Math.imul(z,lt))+Math.imul(V,at)|0,h=Math.imul(V,lt),e=e+Math.imul(E,ct)|0,r=(r=r+Math.imul(E,dt)|0)+Math.imul(R,ct)|0,h=h+Math.imul(R,dt)|0;var Pt=(l+(e=e+Math.imul(P,At)|0)|0)+((8191&(r=(r=r+Math.imul(P,gt)|0)+Math.imul(B,At)|0))<<13)|0;l=((h=h+Math.imul(B,gt)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,ct),r=(r=Math.imul(z,dt))+Math.imul(V,ct)|0,h=Math.imul(V,dt);var Bt=(l+(e=e+Math.imul(E,At)|0)|0)+((8191&(r=(r=r+Math.imul(E,gt)|0)+Math.imul(R,At)|0))<<13)|0;l=((h=h+Math.imul(R,gt)|0)+(r>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Dt=(l+(e=Math.imul(z,At))|0)+((8191&(r=(r=Math.imul(z,gt))+Math.imul(V,At)|0))<<13)|0;return l=((h=Math.imul(V,gt))+(r>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,a[0]=pt,a[1]=vt,a[2]=yt,a[3]=mt,a[4]=xt,a[5]=St,a[6]=bt,a[7]=Mt,a[8]=wt,a[9]=_t,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Lt,a[16]=Pt,a[17]=Bt,a[18]=Dt,0!==l&&(a[19]=l,s.length++),s};function g(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,r=0,h=0;h<s.length-1;h++){var n=r;r=0;for(var o=67108863&e,a=Math.min(h,i.length-1),l=Math.max(0,h-t.length+1);l<=a;l++){var u=h-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),r+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[h]=o,e=n,n=r}return 0!==e?s.words[h]=e:s.length--,s.bH()}function p(t,i,s){return g(t,i,s)}Math.imul||(A=f),r.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?A(this,t,i):s<63?f(this,t,i):s<1024?g(this,t,i):p(this,t,i)},r.prototype.mul=function(t){var i=new r(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},r.prototype.mulf=function(t){var i=new r(null);return i.words=new Array(this.length+t.length),p(this,t,i)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,r=0;r<this.length;r++){var h=(0|this.words[r])*t,n=(67108863&h)+(67108863&e);e>>=26,e+=h/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),i?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,r=s%26;i[s]=t.words[e]>>>r&1}return i}(t);if(0===i.length)return new r(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var h=s.sqr();e<i.length;e++,h=h.sqr())0!==i[e]&&(s=s.mul(h));return s},r.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,r=(t-e)/26,h=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&h,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==r){for(i=this.length-1;i>=0;i--)this.words[i+r]=this.words[i];for(i=0;i<r;i++)this.words[i]=0;this.length+=r}return this.bH()},r.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,i,e){var r;s("number"==typeof t&&t>=0),r=i?(i-i%26)/26:0;var h=t%26,n=Math.min((t-h)/26,this.length),o=67108863^67108863>>>h<<h,a=e;if(r-=n,r=Math.max(0,r),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var c=0|this.words[l];this.words[l]=u<<26-h|c>>>h,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.bH()},r.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,r=1<<i;return!(this.length<=e||!(this.words[e]&r))},r.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var r=67108863^67108863>>>i<<i;this.words[this.length-1]&=r}return this.bH()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.MH(t)},r.prototype.MH=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},r.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.bH()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype.LH=function(t,i,e){var r,h,n=t.length+e;this._H(n);var o=0;for(r=0;r<t.length;r++){h=(0|this.words[r+e])+o;var a=(0|t.words[r])*i;o=((h-=67108863&a)>>26)-(a/67108864|0),this.words[r+e]=67108863&h}for(;r<this.length-e;r++)o=(h=(0|this.words[r+e])+o)>>26,this.words[r+e]=67108863&h;if(0===o)return this.bH();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(h=-(0|this.words[r])+o)>>26,this.words[r]=67108863&h;return this.negative=1,this.bH()},r.prototype.PH=function(t,i){var s=(this.length,t.length),e=this.clone(),h=t,n=0|h.words[h.length-1];0!=(s=26-this.FH(n))&&(h=h.ushln(s),e.iushln(s),n=0|h.words[h.length-1]);var o,a=e.length-h.length;if("mod"!==i){(o=new r(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().LH(h,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[h.length+c])+(0|e.words[h.length+c-1]);for(d=Math.min(d/n|0,67108863),e.LH(h,d,c);0!==e.negative;)d--,e.negative=0,e.LH(h,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.bH(),e.bH(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},r.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(h=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:h,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(h=o.div.neg()),{div:h,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this.PH(t,i);var h,n,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),r=t.andln(1),h=s.cmp(e);return h<0||1===r&&0===h?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},r.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,r=0,h=this.length-1;h>=0;h--)r=(e*r+(0|this.words[h]))%t;return i?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var h=(0|this.words[r])+67108864*e;this.words[r]=h/t|0,e=h%t}return this.bH(),i?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var h=new r(1),n=new r(0),o=new r(0),a=new r(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;!(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(h.isOdd()||n.isOdd())&&(h.iadd(u),n.isub(c)),h.iushrn(1),n.iushrn(1);for(var A=0,g=1;!(e.words[0]&g)&&A<26;++A,g<<=1);if(A>0)for(e.iushrn(A);A-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),h.isub(o),n.isub(a)):(e.isub(i),o.isub(h),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},r.prototype.BH=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var h,n=new r(1),o=new r(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;!(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;!(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(h=0===i.cmpn(1)?n:o).cmpn(0)<0&&h.iadd(t),h},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var r=i.cmp(s);if(r<0){var h=i;i=s,s=h}else if(0===r||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,r=1<<i;if(this.length<=e)return this._H(e+1),this.words[e]|=r,this;for(var h=r,n=e;0!==h&&n<this.length;n++){var o=0|this.words[n];h=(o+=h)>>>26,o&=67108863,this.words[n]=o}return 0!==h&&(this.words[n]=h,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.bH(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var r=0|this.words[0];i=r===t?0:r<t?-1:1}return 0!==this.negative?0|-i:i},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],r=0|t.words[s];if(e!==r){e<r?i=-1:e>r&&(i=1);break}}return i},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new M(t)},r.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).DH(t)},r.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype.DH=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.DH(t)},r.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.EH(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.EH(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.RH(this),this.red.sqr(this)},r.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.RH(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.RH(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.RH(this),this.red.invm(this)},r.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.RH(this),this.red.neg(this)},r.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.RH(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function y(t,i){this.name=t,this.p=new r(i,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this.OH()}function m(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=r.zH(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.BH(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype.OH=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.bH(),s},y.prototype.split=function(t,i){t.iushrn(this.n,0,i)},y.prototype.imulK=function(t){return t.imul(this.k)},e(m,y),m.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),r=0;r<e;r++)i.words[r]=t.words[r];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var h=t.words[9];for(i.words[i.length++]=h&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(n&s)<<4|h>>>22,h=n}h>>>=22,t.words[r-10]=h,0===h&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(x,y),e(S,y),e(b,y),b.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,r=67108863&e;e>>>=26,t.words[s]=r,i=e}return 0!==i&&(t.words[t.length++]=i),t},r.zH=function(t){if(v[t])return v[t];var i;if("k256"===t)i=new m;else if("p224"===t)i=new x;else if("p192"===t)i=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new b}return v[t]=i,i},M.prototype.RH=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.EH=function(t,i){s(!(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).DH(this):(a(t,t.umod(this.m).DH(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).DH(this)},M.prototype.add=function(t,i){this.EH(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.DH(this)},M.prototype.iadd=function(t,i){this.EH(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.EH(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.DH(this)},M.prototype.isub=function(t,i){this.EH(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.RH(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.EH(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.EH(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var h=this.m.subn(1),n=0;!h.isZero()&&0===h.andln(1);)n++,h.iushrn(1);s(!h.isZero());var o=new r(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new r(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,h),d=this.pow(t,h.addn(1).iushrn(1)),f=this.pow(t,h),A=n;0!==f.cmp(o);){for(var g=f,p=0;0!==g.cmp(o);p++)g=g.redSqr();s(p<A);var v=this.pow(c,new r(1).iushln(A-p-1));d=d.redMul(v),c=v.redSqr(),f=f.redMul(c),A=p}return d},M.prototype.invm=function(t){var i=t.BH(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new r(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new r(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var h=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;h!==s[0]&&(h=this.sqr(h)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(h=this.mul(h,s[n]),o=0,n=0)):o=0}a=26}return h},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},r.mont=function(t){return new w(t)},e(w,M),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},w.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),h=r;return r.cmp(this.m)>=0?h=r.isub(this.m):r.cmpn(0)<0&&(h=r.iadd(this.m)),h.DH(this)},w.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new r(0).DH(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),n=h;return h.cmp(this.m)>=0?n=h.isub(this.m):h.cmpn(0)<0&&(n=h.iadd(this.m)),n.DH(this)},w.prototype.invm=function(t){return this.imod(t.BH(this.m).mul(this.r2)).DH(this)}}(0,Kv);var ty=qv.exports;function iy(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),r=e>>8,h=255&e;r?s.push(r,h):s.push(h)}return s}const sy=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const r=1<<i+1,h=t.clone();for(let t=0;t<e.length;t++){let i;const s=h.andln(r-1);h.isOdd()?(i=s>(r>>1)-1?(r>>1)-s:s,h.isubn(i)):i=0,e[t]=i,h.iushrn(1)}return e},ey=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,r=0;for(;t.cmpn(-e)>0||i.cmpn(-r)>0;){let h,n,o=t.andln(3)+e&3,a=i.andln(3)+r&3;if(3===o&&(o=-1),3===a&&(a=-1),1&o){const i=t.andln(7)+e&7;h=3!==i&&5!==i||2!==a?o:-o}else h=0;if(s[0].push(h),1&a){const t=i.andln(7)+r&7;n=3!==t&&5!==t||2!==o?a:-a}else n=0;s[1].push(n),2*e===h+1&&(e=1-e),2*r===n+1&&(r=1-r),t.iushrn(1),i.iushrn(1)}return s};class ry{constructor(t,i){this.type=t,this.p=new ty(i.p,16),this.red=i.prime?ty.red(i.prime):ty.mont(this.p),this.zero=new ty(0).toRed(this.red),this.one=new ty(1).toRed(this.red),this.two=new ty(2).toRed(this.red),this.n=i.n&&new ty(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.VH=new Array(4),this.NH=new Array(4),this.GH=new Array(4),this.$H=new Array(4),this.UH=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.YH=!0,this.redN=this.n.toRed(this.red))}jH(t,i){const s=t.HH(),e=sy(i,1,this.UH);let r=(1<<s.step+1)-(s.step%2==0?2:1);r/=3;const h=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let r=t+s.step-1;r>=t;r--)i=(i<<1)+e[r];h.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=r;t>0;t--){for(let i=0;i<h.length;i++){const e=h[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}WH(t,i){let s=4;const e=t.XH(s);s=e.wnd;const r=e.points,h=sy(i,s,this.UH);let n=this.jpoint(null,null,null);for(let s=h.length-1;s>=0;s--){for(let t=0;s>=0&&0===h[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=h[s];n="affine"===t.type?e>0?n.mixedAdd(r[e-1>>1]):n.mixedAdd(r[-e-1>>1].neg()):e>0?n.add(r[e-1>>1]):n.add(r[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}ZH(t,i,s,e,r){const h=this.VH,n=this.NH,o=this.GH;let a=0;for(let s=0;s<e;s++){const e=i[s].XH(t);h[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,r=t;if(1!==h[e]||1!==h[r]){o[e]=sy(s[e],h[e],this.UH),o[r]=sy(s[r],h[r],this.UH),a=Math.max(o[e].length,a),a=Math.max(o[r].length,a);continue}const l=[i[e],null,null,i[r]];0===i[e].y.cmp(i[r].y)?(l[1]=i[e].add(i[r]),l[2]=i[e].toJ().mixedAdd(i[r].neg())):0===i[e].y.cmp(i[r].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[r]),l[2]=i[e].add(i[r].neg())):(l[1]=i[e].toJ().mixedAdd(i[r]),l[2]=i[e].toJ().mixedAdd(i[r].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=ey(s[e],s[r]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[r]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[r][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.$H;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return r?l:l.toP()}decodePoint(t,i){t=iy(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class hy{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}JH(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.JH(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.XH(8),i.doubles=this.HH(4,t),i.beta=this.QH(),this.precomputed=i,this}KH(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}HH(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let r=0;r<i;r+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}XH(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}QH(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class ny extends ry{constructor(t){super("short",t),this.a=new ty(t.a,16).toRed(this.red),this.b=new ty(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.qH(t),this.tW=new Array(4),this.iW=new Array(4)}pointFromJSON(t,i){return oy.fromJSON(this,t,i)}qH(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new ty(t.beta,16).toRed(this.red);else{const t=this.sW(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new ty(t.lambda,16);else{const t=this.sW(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new ty(t.a,16),b:new ty(t.b,16)}))):this.eW(s),{beta:i,lambda:s,basis:e}}sW(t){const i=t===this.p?this.red:ty.mont(t),s=new ty(2).toRed(i).redInvm(),e=s.redNeg(),r=new ty(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(r).fromRed(),e.redSub(r).fromRed()]}eW(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,r,h,n,o,a,l,u,c=t,d=this.n.clone(),f=new ty(1),A=new ty(0),g=new ty(0),p=new ty(1),v=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=g.sub(t.mul(f));const n=p.sub(t.mul(A));if(!r&&l.cmp(i)<0)s=a.neg(),e=f,r=l.neg(),h=u;else if(r&&2==++v)break;a=l,d=c,c=l,g=f,f=u,p=A,A=n}n=l.neg(),o=u;const y=r.sqr().add(h.sqr());return n.sqr().add(o.sqr()).cmp(y)>=0&&(n=s,o=e),r.negative&&(r=r.neg(),h=h.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:r,b:h},{a:n,b:o}]}rW(t){const i=this.endo.basis,s=i[0],e=i[1],r=e.b.mul(t).divRound(this.n),h=s.b.neg().mul(t).divRound(this.n),n=r.mul(s.a),o=h.mul(e.a),a=r.mul(s.b),l=h.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new oy(this,t,i,s)}pointFromX(t,i){(t=new ty(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const r=e.fromRed().isOdd();return(i&&!r||!i&&r)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),r=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(r).cmpn(0)}hW(t,i,s){const e=this.tW,r=this.iW;let h=0;for(h=0;h<t.length;h++){const s=this.rW(i[h]);let n=t[h],o=n.QH();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*h]=n,e[2*h+1]=o,r[2*h]=s.k1,r[2*h+1]=s.k2}const n=this.ZH(1,e,r,2*h,s);for(let t=0;t<2*h;t++)e[t]=null,r[t]=null;return n}jpoint(t,i,s){return new ay(this,t,i,s)}}class oy extends hy{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new ty(i,16),this.y=new ty(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new oy(this,t,i,s)}QH(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function r(i){return t.point(i[0],i[1],s)}const h=i[2];return e.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[e].concat(h.doubles.points.map(r))},naf:h.naf&&{wnd:h.naf.wnd,points:[e].concat(h.naf.points.map(r))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),r=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),h=r.redSqr().redISub(this.x.redAdd(this.x)),n=r.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new ty(t,16),this.isInfinity()?this:this.KH(t)?this.curve.jH(this,t):this.curve.endo?this.curve.hW([this],[t]):this.curve.WH(this,t)}mulAdd(t,i,s){const e=[this,i],r=[t,s];return this.curve.endo?this.curve.hW(e,r):this.curve.ZH(1,e,r,2)}jmulAdd(t,i,s){const e=[this,i],r=[t,s];return this.curve.endo?this.curve.hW(e,r,!0):this.curve.ZH(1,e,r,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class ay extends hy{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ty(0)):(this.x=new ty(i,16),this.y=new ty(s,16),this.z=new ty(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new ay(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),r=t.x.redMul(s),h=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(r),a=h.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(h.redMul(u)),A=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,A)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),r=this.y,h=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=r.redSub(h);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(r.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const r=this.y;let h=this.z,n=h.redSqr().redSqr(),o=r.redAdd(r);for(let s=0;s<t;s++){const r=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=r.redAdd(r).redIAdd(r).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let A=u.redMul(f);A=A.redIAdd(A).redISub(l);const g=o.redMul(h);s+1<t&&(n=n.redMul(l)),e=d,h=g,o=A}return this.curve.jpoint(e,o.redMul(s),h)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.nW():this.curve.threeA?this.oW():this.aW()}nW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),r=this.y.redSqr(),h=r.redSqr();let n=this.x.redAdd(r).redSqr().redISub(e).redISub(h);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=h.redIAdd(h);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),r=this.y.redSqr(),h=r.redSqr();let n=this.x.redAdd(r).redSqr().redISub(e).redISub(h);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=h.redIAdd(h);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}oW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),r=this.y.redSqr(),h=r.redSqr();let n=this.x.redAdd(r).redSqr().redISub(e).redISub(h);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=h.redIAdd(h);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),r=this.y.redSqr(),h=this.x.redMul(r);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=h.redIAdd(h);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(r).redISub(e);let l=r.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}aW(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,r=e.redSqr().redSqr(),h=i.redSqr(),n=s.redSqr(),o=h.redAdd(h).redIAdd(h).redIAdd(t.redMul(r));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),A=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,A)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),r=t.redAdd(t).redIAdd(t),h=r.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(h);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=r.redIAdd(n).redSqr().redISub(h).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new ty(t,i),this.curve.WH(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),r=s.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),r=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(r),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class ly{constructor(t){this.curve=new ny(t),this.g=this.curve.g,this.n=this.curve.n}}const uy={};var cy,dy;uy.PresetCurve=ly,cy="secp256k1",dy={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(uy,cy,{configurable:!0,enumerable:!0,get(){const t=new ly(dy);return Object.defineProperty(uy,cy,{configurable:!0,enumerable:!0,value:t}),t}});class fy{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.lW(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof fy?i:new fy(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}lW(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function Ay(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let r=0,h=i.place;for(let i=0;i<e;i++,h++)r<<=8,r|=t[h],r>>>=0;return!(r<=127)&&(i.place=h,r)}class gy{constructor(){this.place=0}}class py{constructor(t,i){if(t instanceof py)return t;this.uW(t,i)||(this.r=new ty(t.r,16),this.s=new ty(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}uW(t,i){t=iy(t,i);const s=new gy;if(48!==t[s.place++])return!1;const e=Ay(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const r=Ay(t,s);if(!1===r)return!1;let h=t.slice(s.place,r+s.place);if(s.place+=r,2!==t[s.place++])return!1;const n=Ay(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new ty(h),this.s=new ty(o),this.recoveryParam=null,!0}}class vy{constructor(t){if(!(this instanceof vy))return new vy(t);"string"==typeof t&&(t=uy[t]),t instanceof uy.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return fy.fromPublic(this,t,i)}cW(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.cW(new ty(t,16)),s=this.keyFromPublic(s,e);const r=(i=new py(i,"hex")).r,h=i.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;const n=h.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(r).umod(this.n);if(!this.curve.YH){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(r)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(r)}}var yy,my={exports:{}},xy={exports:{}};xy.exports=(yy=yy||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==Kv&&Kv.crypto&&(s=Kv.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),h={},n=h.lib={},o=n.Base={extend:function(t){var i=r(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,r=t.sigBytes;if(this.clamp(),e%4)for(var h=0;h<r;h++){var n=s[h>>>2]>>>24-h%4*8&255;i[e+h>>>2]|=n<<24-(e+h)%4*8}else for(var o=0;o<r;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=r,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=h.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],r=0;r<s;r++){var h=i[r>>>2]>>>24-r%4*8&255;e.push((h>>>4).toString(16)),e.push((15&h).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],r=0;r<s;r++){var h=i[r>>>2]>>>24-r%4*8&255;e.push(String.fromCharCode(h))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.yM=new a.init,this.dW=0},fW:function(t){"string"==typeof t&&(t=d.parse(t)),this.yM.concat(t),this.dW+=t.sigBytes},AW:function(i){var s,e=this.yM,r=e.words,h=e.sigBytes,n=this.blockSize,o=h/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.gW,0))*n,u=t.min(4*l,h);if(l){for(var c=0;c<l;c+=n)this.pW(r,c);s=r.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.yM=this.yM.clone(),t},gW:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.vW()},update:function(t){return this.fW(t),this.AW(),this},finalize:function(t){return t&&this.fW(t),this.yW()},blockSize:16,mW:function(t){return function(i,s){return new t.init(s).finalize(i)}},xW:function(t){return function(i,s){return new A.HMAC.init(t,s).finalize(i)}}});var A=h.algo={};return h}(Math),yy);var Sy={exports:{}};Sy.exports=function(t){return function(i){var s=t,e=s.lib,r=e.WordArray,h=e.Hasher,n=s.algo,o=[],a=[];!function(){function t(t){for(var s=i.sqrt(t),e=2;e<=s;e++)if(!(t%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,r=0;r<64;)t(e)&&(r<8&&(o[r]=s(i.pow(e,.5))),a[r]=s(i.pow(e,1/3)),r++),e++}();var l=[],u=n.SHA256=h.extend({vW:function(){this.SW=new r.init(o.slice(0))},pW:function(t,i){for(var s=this.SW.words,e=s[0],r=s[1],h=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var A=l[f-15],g=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,p=l[f-2],v=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;l[f]=g+l[f-7]+v+l[f-16]}var y=e&r^e&h^r&h,m=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),x=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+x|0,n=h,h=r,r=e,e=x+(m+y)|0}s[0]=s[0]+e|0,s[1]=s[1]+r|0,s[2]=s[2]+h|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},yW:function(){var t=this.yM,s=t.words,e=8*this.dW,r=8*t.sigBytes;return s[r>>>5]|=128<<24-r%32,s[14+(r+64>>>9<<4)]=i.floor(e/4294967296),s[15+(r+64>>>9<<4)]=e,t.sigBytes=4*s.length,this.AW(),this.SW},clone:function(){var t=h.clone.call(this);return t.SW=this.SW.clone(),t}});s.SHA256=h.mW(u),s.HmacSHA256=h.xW(u)}(Math),t.SHA256}(xy.exports);var by=Sy.exports;my.exports=function(t){return s=(i=t).lib.WordArray,e=i.algo,r=e.SHA256,h=e.SHA224=r.extend({vW:function(){this.SW=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},yW:function(){var t=r.yW.call(this);return t.sigBytes-=4,t}}),i.SHA224=r.mW(h),i.HmacSHA224=r.xW(h),t.SHA224;var i,s,e,r,h}(xy.exports);var My=my.exports,wy={exports:{}};wy.exports=xy.exports.enc.Hex;var _y=wy.exports,ky={exports:{}};ky.exports=xy.exports.enc.Utf8;var Cy=ky.exports,Ty={exports:{}};!function(t){return s=(i=t).lib.WordArray,i.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.bW;t.clamp();for(var r=[],h=0;h<s;h+=3)for(var n=(i[h>>>2]>>>24-h%4*8&255)<<16|(i[h+1>>>2]>>>24-(h+1)%4*8&255)<<8|i[h+2>>>2]>>>24-(h+2)%4*8&255,o=0;o<4&&h+.75*o<s;o++)r.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;r.length%4;)r.push(a);return r.join("")},parse:function(t){var i=t.length,e=this.bW,r=this.MW;if(!r){r=this.MW=[];for(var h=0;h<e.length;h++)r[e.charCodeAt(h)]=h}var n=e.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,e){for(var r=[],h=0,n=0;n<i;n++)if(n%4){var o=e[t.charCodeAt(n-1)]<<n%4*2|e[t.charCodeAt(n)]>>>6-n%4*2;r[h>>>2]|=o<<24-h%4*8,h++}return s.create(r,h)}(t,i,r)},bW:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var i,s}(xy.exports);!function(t){(function(i){var s=t,e=s.lib,r=e.WordArray,h=e.Hasher,n=s.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*i.abs(i.sin(t+1))|0}();var a=n.MD5=h.extend({vW:function(){this.SW=new r.init([1732584193,4023233417,2562383102,271733878])},pW:function(t,i){for(var s=0;s<16;s++){var e=i+s,r=t[e];t[e]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var h=this.SW.words,n=t[i+0],a=t[i+1],f=t[i+2],A=t[i+3],g=t[i+4],p=t[i+5],v=t[i+6],y=t[i+7],m=t[i+8],x=t[i+9],S=t[i+10],b=t[i+11],M=t[i+12],w=t[i+13],_=t[i+14],k=t[i+15],C=h[0],T=h[1],F=h[2],I=h[3];C=l(C,T,F,I,n,7,o[0]),I=l(I,C,T,F,a,12,o[1]),F=l(F,I,C,T,f,17,o[2]),T=l(T,F,I,C,A,22,o[3]),C=l(C,T,F,I,g,7,o[4]),I=l(I,C,T,F,p,12,o[5]),F=l(F,I,C,T,v,17,o[6]),T=l(T,F,I,C,y,22,o[7]),C=l(C,T,F,I,m,7,o[8]),I=l(I,C,T,F,x,12,o[9]),F=l(F,I,C,T,S,17,o[10]),T=l(T,F,I,C,b,22,o[11]),C=l(C,T,F,I,M,7,o[12]),I=l(I,C,T,F,w,12,o[13]),F=l(F,I,C,T,_,17,o[14]),C=u(C,T=l(T,F,I,C,k,22,o[15]),F,I,a,5,o[16]),I=u(I,C,T,F,v,9,o[17]),F=u(F,I,C,T,b,14,o[18]),T=u(T,F,I,C,n,20,o[19]),C=u(C,T,F,I,p,5,o[20]),I=u(I,C,T,F,S,9,o[21]),F=u(F,I,C,T,k,14,o[22]),T=u(T,F,I,C,g,20,o[23]),C=u(C,T,F,I,x,5,o[24]),I=u(I,C,T,F,_,9,o[25]),F=u(F,I,C,T,A,14,o[26]),T=u(T,F,I,C,m,20,o[27]),C=u(C,T,F,I,w,5,o[28]),I=u(I,C,T,F,f,9,o[29]),F=u(F,I,C,T,y,14,o[30]),C=c(C,T=u(T,F,I,C,M,20,o[31]),F,I,p,4,o[32]),I=c(I,C,T,F,m,11,o[33]),F=c(F,I,C,T,b,16,o[34]),T=c(T,F,I,C,_,23,o[35]),C=c(C,T,F,I,a,4,o[36]),I=c(I,C,T,F,g,11,o[37]),F=c(F,I,C,T,y,16,o[38]),T=c(T,F,I,C,S,23,o[39]),C=c(C,T,F,I,w,4,o[40]),I=c(I,C,T,F,n,11,o[41]),F=c(F,I,C,T,A,16,o[42]),T=c(T,F,I,C,v,23,o[43]),C=c(C,T,F,I,x,4,o[44]),I=c(I,C,T,F,M,11,o[45]),F=c(F,I,C,T,k,16,o[46]),C=d(C,T=c(T,F,I,C,f,23,o[47]),F,I,n,6,o[48]),I=d(I,C,T,F,y,10,o[49]),F=d(F,I,C,T,_,15,o[50]),T=d(T,F,I,C,p,21,o[51]),C=d(C,T,F,I,M,6,o[52]),I=d(I,C,T,F,A,10,o[53]),F=d(F,I,C,T,S,15,o[54]),T=d(T,F,I,C,a,21,o[55]),C=d(C,T,F,I,m,6,o[56]),I=d(I,C,T,F,k,10,o[57]),F=d(F,I,C,T,v,15,o[58]),T=d(T,F,I,C,w,21,o[59]),C=d(C,T,F,I,g,6,o[60]),I=d(I,C,T,F,b,10,o[61]),F=d(F,I,C,T,f,15,o[62]),T=d(T,F,I,C,x,21,o[63]),h[0]=h[0]+C|0,h[1]=h[1]+T|0,h[2]=h[2]+F|0,h[3]=h[3]+I|0},yW:function(){var t=this.yM,s=t.words,e=8*this.dW,r=8*t.sigBytes;s[r>>>5]|=128<<24-r%32;var h=i.floor(e/4294967296),n=e;s[15+(r+64>>>9<<4)]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),s[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(s.length+1),this.AW();for(var o=this.SW,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=h.clone.call(this);return t.SW=this.SW.clone(),t}});function l(t,i,s,e,r,h,n){var o=t+(i&s|~i&e)+r+n;return(o<<h|o>>>32-h)+i}function u(t,i,s,e,r,h,n){var o=t+(i&e|s&~e)+r+n;return(o<<h|o>>>32-h)+i}function c(t,i,s,e,r,h,n){var o=t+(i^s^e)+r+n;return(o<<h|o>>>32-h)+i}function d(t,i,s,e,r,h,n){var o=t+(s^(i|~e))+r+n;return(o<<h|o>>>32-h)+i}s.MD5=h.mW(a),s.HmacMD5=h.xW(a)})(Math),t.MD5}(xy.exports);!function(t){return s=(i=t).lib,e=s.WordArray,r=s.Hasher,h=i.algo,n=[],o=h.SHA1=r.extend({vW:function(){this.SW=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},pW:function(t,i){for(var s=this.SW.words,e=s[0],r=s[1],h=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)n[l]=0|t[i+l];else{var u=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+n[l];c+=l<20?1518500249+(r&h|~r&o):l<40?1859775393+(r^h^o):l<60?(r&h|r&o|h&o)-1894007588:(r^h^o)-899497514,a=o,o=h,h=r<<30|r>>>2,r=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+r|0,s[2]=s[2]+h|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},yW:function(){var t=this.yM,i=t.words,s=8*this.dW,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.AW(),this.SW},clone:function(){var t=r.clone.call(this);return t.SW=this.SW.clone(),t}}),i.SHA1=r.mW(o),i.HmacSHA1=r.xW(o),t.SHA1;var i,s,e,r,h,n,o}(xy.exports);var Fy,Iy,Ly;Iy=(Fy=xy.exports).lib.Base,Ly=Fy.enc.Utf8,Fy.algo.HMAC=Iy.extend({init:function(t,i){t=this.wW=new t.init,"string"==typeof i&&(i=Ly.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var r=this._W=i.clone(),h=this.kW=i.clone(),n=r.words,o=h.words,a=0;a<s;a++)n[a]^=1549556828,o[a]^=909522486;r.sigBytes=h.sigBytes=e,this.reset()},reset:function(){var t=this.wW;t.reset(),t.update(this.kW)},update:function(t){return this.wW.update(t),this},finalize:function(t){var i=this.wW,s=i.finalize(t);return i.reset(),i.finalize(this._W.clone().concat(s))}}),function(t){return e=(s=(i=t).lib).Base,r=s.WordArray,n=(h=i.algo).MD5,o=h.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,h=e.hasher.create(),n=r.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&h.update(s),s=h.update(t).finalize(i),h.reset();for(var u=1;u<l;u++)s=h.finalize(s),h.reset();n.concat(s)}return n.sigBytes=4*a,n}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},t.EvpKDF;var i,s,e,r,h,n,o}(xy.exports);(function(t){t.lib.Cipher||function(){var i=t,s=i.lib,e=s.Base,r=s.WordArray,h=s.BufferedBlockAlgorithm,n=i.enc;n.Utf8;var o=n.Base64,a=i.algo.EvpKDF,l=s.Cipher=h.extend({cfg:e.extend(),createEncryptor:function(t,i){return this.create(this.TW,t,i)},createDecryptor:function(t,i){return this.create(this.FW,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.IW=t,this.LW=i,this.reset()},reset:function(){h.reset.call(this),this.vW()},process:function(t){return this.fW(t),this.AW()},finalize:function(t){return t&&this.fW(t),this.yW()},keySize:4,ivSize:4,TW:1,FW:2,mW:function(){function t(t){return"string"==typeof t?y:p}return function(i){return{encrypt:function(s,e,r){return t(e).encrypt(i,s,e,r)},decrypt:function(s,e,r){return t(e).decrypt(i,s,e,r)}}}}()});s.StreamCipher=l.extend({yW:function(){return this.AW(!0)},blockSize:1});var u=i.mode={},c=s.BlockCipherMode=e.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.PW=t,this.BW=i}}),d=u.CBC=function(){var t=c.extend();function i(t,i,s){var e,r=this.BW;r?(e=r,this.BW=undefined):e=this.DW;for(var h=0;h<s;h++)t[i+h]^=e[h]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.PW,r=e.blockSize;i.call(this,t,s,r),e.encryptBlock(t,s),this.DW=t.slice(s,s+r)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.PW,r=e.blockSize,h=t.slice(s,s+r);e.decryptBlock(t,s),i.call(this,t,s,r),this.DW=h}}),t}(),f=(i.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};s.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.IW==this.TW?t=e.createEncryptor:(t=e.createDecryptor,this.gW=1),this.EW&&this.EW.RW==t?this.EW.init(this,s&&s.words):(this.EW=t.call(e,this,s&&s.words),this.EW.RW=t)},pW:function(t,i){this.EW.processBlock(t,i)},yW:function(){var t,i=this.cfg.padding;return this.IW==this.TW?(i.pad(this.yM,this.blockSize),t=this.AW(!0)):(t=this.AW(!0),i.unpad(t)),t},blockSize:4});var A=s.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),g=(i.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(o)},parse:function(t){var i,s=o.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),A.create({ciphertext:s,salt:i})}},p=s.SerializableCipher=e.extend({cfg:e.extend({format:g}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var r=t.createEncryptor(s,e),h=r.finalize(i),n=r.cfg;return A.create({ciphertext:h,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.OW(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},OW:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),v=(i.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=a.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,A.create({key:h,iv:n,salt:e})}},y=s.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:v}),encrypt:function(t,i,s,e){var r=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=r.iv;var h=p.encrypt.call(this,t,i,r.key,e);return h.mixIn(r),h},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.OW(i,e.format);var r=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=r.iv,p.decrypt.call(this,t,i,r.key,e)}})}()})(xy.exports),Ty.exports=function(t){return function(){var i=t,s=i.lib.BlockCipher,e=i.algo,r=[],h=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var A=e^e<<1^e<<2^e<<3^e<<4;A=A>>>8^255&A^99,r[s]=A,h[A]=s;var g=t[s],p=t[g],v=t[p],y=257*t[A]^16843008*A;n[s]=y<<24|y>>>8,o[s]=y<<16|y>>>16,a[s]=y<<8|y>>>24,l[s]=y,y=16843009*v^65537*p^257*g^16843008*s,u[A]=y<<24|y>>>8,c[A]=y<<16|y>>>16,d[A]=y<<8|y>>>24,f[A]=y,s?(s=g^t[t[t[v^g]]],e^=t[t[e]]):s=e=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54],g=e.AES=s.extend({vW:function(){if(!this.zW||this.VW!==this.LW){for(var t=this.VW=this.LW,i=t.words,s=t.sigBytes/4,e=4*((this.zW=s+6)+1),h=this.NW=[],n=0;n<e;n++)n<s?h[n]=i[n]:(l=h[n-1],n%s?s>6&&n%s==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=A[n/s|0]<<24),h[n]=h[n-s]^l);for(var o=this.GW=[],a=0;a<e;a++){if(n=e-a,a%4)var l=h[n];else l=h[n-4];o[a]=a<4||n<=4?l:u[r[l>>>24]]^c[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,i){this.$W(t,i,this.NW,n,o,a,l,r)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.$W(t,i,this.GW,u,c,d,f,h),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},$W:function(t,i,s,e,r,h,n,o){for(var a=this.zW,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,A=1;A<a;A++){var g=e[l>>>24]^r[u>>>16&255]^h[c>>>8&255]^n[255&d]^s[f++],p=e[u>>>24]^r[c>>>16&255]^h[d>>>8&255]^n[255&l]^s[f++],v=e[c>>>24]^r[d>>>16&255]^h[l>>>8&255]^n[255&u]^s[f++],y=e[d>>>24]^r[l>>>16&255]^h[u>>>8&255]^n[255&c]^s[f++];l=g,u=p,c=v,d=y}g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],p=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],v=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],y=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=g,t[i+1]=p,t[i+2]=v,t[i+3]=y},keySize:8});i.AES=s.mW(g)}(),t.AES}(xy.exports);var Py=Ty.exports,By={exports:{}};By.exports=function(t){return t.mode.CTR=(s=(i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.PW,e=s.blockSize,r=this.BW,h=this.UW;r&&(h=this.UW=r.slice(0),this.BW=void 0);var n=h.slice(0);s.encryptBlock(n,0),h[e-1]=h[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),i.Decryptor=s,i),t.mode.CTR;var i,s}(xy.exports);var Dy=By.exports,Ey={exports:{}};Ey.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var i=t.lib.WordArray,s=i.init,e=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],r=0;r<i;r++)e[r>>>2]|=t[r]<<24-r%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=i}}(),t.lib.WordArray}(xy.exports);var Ry=Ey.exports,Oy={exports:{}};Oy.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(xy.exports);var zy=Oy.exports;const Vy="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",Ny=9e5,Gy={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAyNTExMjU="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vcHl0aG9uLWNoYXJ0cy8="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI=","aG9zdA==","dG9w"],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Q2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ==","dW5leHBlY3RlZA==","ZXJyb3I="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA==","aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vcGx1Z2lu"]},$y=Nt,Uy=(...t)=>t.slice(1).reduce(((i,s)=>i+$y.atob(Gy[t[0]][s].toString())),"");let Yy,jy,Hy,Wy=new Uint8Array([]);const Xy=t=>t&&"cGx1Z2lu"in t&&"cHl0aG9u"===t.cGx1Z2lu?Uy(-2,3):Uy(-2,2);class Zy{set e(t){Yy=t}get e(){jy={po:!1,vo:!1,yo:!1,mo:!1,xo:!1,So:!1,bo:!1,Mo:!1,wo:!1,_o:!1,ko:!1,Co:!1,To:!1,Fo:!1,Io:!1,Lo:!1,Po:!1,Bo:!1,Do:!1,Eo:!1,Ro:!1,Oo:!1,zo:!1,Vo:!1,No:!1,Go:!1,$o:!1};const t=Wy.length,i=t>=1?Wy[0]:void 0,s=t>=2?Wy[1]:void 0,e=t>=3?Wy[2]:void 0,r=t>=4?Wy[3]:void 0;return void 0!==i&&(jy.po=!!(1&i),jy.vo=!!(2&i),jy.yo=!!(4&i),jy.mo=!!(8&i),jy.xo=!!(16&i),jy.So=!!(32&i),jy.bo=!!(64&i),jy.Mo=!!(128&i)),void 0!==s&&(jy.wo=!!(1&s),jy._o=!!(2&s),jy.ko=!!(4&s),jy.Co=!!(8&s),jy.To=!!(16&s),jy.Fo=!!(32&s),jy.Io=!!(64&s),jy.Lo=!!(128&s)),void 0!==e&&(jy.Po=!!(1&e),jy.Bo=!!(2&e),jy.Do=!!(4&e),jy.Eo=!!(8&e),jy.Ro=!!(16&e),jy.Oo=!!(32&e),jy.zo=!!(64&e),jy.Vo=!!(128&e)),void 0!==r&&(jy.No=!!(1&r),jy.Go=!!(2&r),jy.$o=!!(4&r)),jy.So}set l(t){Hy=t}get l(){return Hy}}let Jy=!1;const Qy=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},Ky=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},qy=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),tm=t=>{const i={},s=t.split("-");if(3!==s.length)return{YW:Uy(0,0,1,7,1,12,5)};let e=0;const r=Uint8Array.from($y.atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const h=r.subarray(e,e+=20),n=new DataView(r.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=r[t+e]^h[t%h.byteLength];const a=new DataView(o.buffer);i.jW=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),Wy=new Uint8Array(l);const u=Ky(o.subarray(e,e+=4)),c=Uy(-3,0);if(!u)return{YW:Uy(0,0,1,7,1,12,5)};if(u<c)return{YW:Uy(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=Ky(o.subarray(e,e+=4)),i=qy(new Date);if(!t)return{YW:Uy(0,0,1,7,1,12,5)};if(t<i)return{YW:Uy(0,0,1,2,1,3,1,4,5),HW:Xy()}}i.WW=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call($y.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return em(d,f)?i:{YW:Uy(0,0,1,7,1,12,5)}},im=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(Qy(s,2)),i=t.slice(36,40),e=new Uint8Array(4),r=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return~e>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,r,!0);const h=t.slice(28,34);let n=0;for(let t=h.length-1;t>0;t-=1)n+=h[t]*2**(8*t);const o=new Date(n);if(qy(o)<Uy(-3,0))return{YW:Uy(0,0,1,2,1,3,1,4,5),HW:Xy()};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return tm(t);default:return{YW:Uy(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{YW:Uy(0,0,1,2,1,7,1,12,5)}},sm=t=>{if(!t)return{YW:Uy(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[Uy(-1,9)]||t[Uy(-1,37)]).map((t=>(t||"").trim())),s=$y[Uy(-1,41)];try{if(s&&i.indexOf(s[Uy(-1,6)][Uy(-1,7)])>-1)return{XW:!0}}catch(t){}if(i.indexOf($y[Uy(-1,6)][Uy(-1,7)])>-1)return{XW:!0};const e=i.filter((t=>t.indexOf("*")>-1));try{if(s&&am(s[Uy(-1,6)][Uy(-1,7)],e))return{XW:!0}}catch(t){}if(am($y[Uy(-1,6)][Uy(-1,7)],e))return{XW:!0};const r=t[Uy(-1,8)]||t[Uy(-1,38)];if(""!==r&&null!=r){try{if(s&&am(s[Uy(-1,6)][Uy(-1,7)],[r]))return{XW:!1}}catch(t){}if(am($y[Uy(-1,6)][Uy(-1,7)],[r]))return{XW:!1};try{if(s&&r===s[Uy(-1,6)][Uy(-1,7)])return{XW:!1}}catch(t){}if(r===$y[Uy(-1,6)][Uy(-1,7)])return{XW:!1}}return{YW:Uy(0,14,1,20,5),HW:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},em=(t,i)=>{const s=new vy("secp256k1").keyFromPublic(Uy(-4,0),"hex"),e=My(t).toString();return s.verify(e,i)},rm=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],r=i[2],h=i[3];if(!em(r,h))return{YW:Uy(0,21,1,2,1,7,1,12,5)};const n=_y.parse(r);s=Py.decrypt({ciphertext:_y.parse(e)},n,{mode:Dy,padding:zy,iv:_y.parse("00000000000000000000000000000001")}).toString(Cy)}catch(t){return{YW:Uy(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{YW:Uy(0,21,1,2,1,7,1,12,5)}}if(void 0===i[Uy(-1,5)]||null===i[Uy(-1,4)]||!i[Uy(-1,9)])return{YW:Uy(0,21,1,2,1,7,1,12,5)};const e=parseInt(Uy(-3,0),10)||Number(parseInt(Uy(-3,0),10));return i[Uy(-1,5)]<e?{YW:Uy(0,21,1,2,1,3,1,4,5)}:sm(i)})(t);case"0002":return(t=>{const i=tm(t),s=i.jW,e=i.WW;if(i.YW||void 0===s||void 0===e)return i;let r,h="";try{const t=s.slice(i.WW,e+16),r=new DataView(t.buffer),n=new Int32Array(4);for(let t=0;t<n.length;t+=1)n[t]=r.getInt32(4*t,!1);const o=Ry.create(Array.from(n)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=Ry.create(Array.from(c)),f=Py.decrypt({ciphertext:d},o,{mode:Dy,padding:zy,iv:_y.parse("00000000000000000000000000000001")});h=$y.atob(f.toString(Cy))}catch(t){return{YW:Uy(0,21,1,2,1,7,1,12,5)}}try{r=JSON.parse(h)}catch(t){return{YW:Uy(0,21,1,2,1,7,1,12,5)}}return r[Uy(-1,37)]?sm(r):{YW:Uy(0,21,1,2,1,7,1,12,5)}})(t);default:return{YW:Uy(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},hm=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{YW:Uy(0,39,1,40,1,41,5),HW:Vy};const s=t.split("-"),e=s[1].slice(1),r=s[2],h=s[3];if(!em(`${e}-${r}`,h))return{YW:Uy(0,21,1,2,1,7,1,12,5)};const n=Uint8Array.from(Qy(r,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(Uy(-3,0),10)||Number(parseInt(Uy(-3,0),10))))return{YW:Uy(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(Qy(e,8)),l=by(i[Uy(-1,31)]).toString(_y),u=Int32Array.from(Qy(l,8)),c=by(i[Uy(-1,32)]).toString(_y),d=Int32Array.from(Qy(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{YW:Uy(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{YW:Uy(0,39,1,40,1,41,5),HW:Vy};const s=tm(t),e=s.jW,r=s.WW;if(s.YW||void 0===e||void 0===r)return s;const h=e.slice(r,e.length),n=new DataView(h.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=n.getInt32(4*t,!1);const a=by(i[Uy(-1,31)]).toString(_y),l=Int32Array.from(Qy(a,8)),u=by(i[Uy(-1,32)]).toString(_y),c=Int32Array.from(Qy(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{YW:Uy(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{YW:Uy(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},nm=(t,i,s=!0,e)=>{Jy=!1,i.Ya();const r=i.zn,h=!!r&&(r===Nt.document.body||Nt.document.body.contains(r)),n=r&&h?r:document.body;if(void 0===Array.from(n.children).find((t=>"lcjs-error"===t.id))){const r=Nt.document.createElement("div");r.id="lcjs-error",n.append(r),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="black",r.style.boxSizing="border-box",r.style.padding="20px",r.style.font="Arial",r.style.fontSize="20px";let h,o=(t||"LICENSE_ERROR").split("_").join(" ");if(o=(s?Uy(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1),e){const t=Nt.document.createElement("a");t.href=e,h=t}else h=Nt.document.createElement("p1");r.append(h),h.innerHTML=o,h.style.color="red",i.AH()&&$y.console.error(o)}},om=(t,i,s)=>{i?(t[Uy(-1,17)](Uy(-1,19),s),t[Uy(-1,17)](Uy(-1,20),s),t[Uy(-1,17)](Uy(-1,21),s),t[Uy(-1,17)](Uy(-1,22),s)):(t[Uy(-1,18)](Uy(-1,19),s),t[Uy(-1,18)](Uy(-1,20),s),t[Uy(-1,18)](Uy(-1,21),s),t[Uy(-1,18)](Uy(-1,22),s))},am=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const r=i.findIndex((t=>"*"===t)),h=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(r>s.length-1||!h)}))},lm=new Map;exports.AbstractCursor=Fl,exports.Animation=St,exports.AnimationEasings=xt,exports.Animator=bt,exports.AreaRangeSeries=oc,exports.Axis=zo,exports.Axis3D=tl,exports.AxisScrollStrategies=gh,exports.AxisTickStrategies=ph,exports.Band=lh,exports.BarChart=Bf,exports.BarChartBar=Lf,exports.BarChartCategoryAxis=Ff,exports.BarChartSorting=Df,exports.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},exports.BarChartValueAxis=If,exports.BorderedPicture=On,exports.BoxFigure=Pu,exports.BoxSeries=Ru,exports.BoxSeries3D=Xa,exports.Button=wo,exports.Chart=ja,exports.Chart3D=zl,exports.ChartComponent=De,exports.ChartWithSeries=fl,exports.ChartXY=Bc,exports.Color=x,exports.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return b(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return b(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,r=t/60,h=e*(1-Math.abs(r%2-1));let n=[];isNaN(t)?n=[0,0,0]:r<=1?n=[e,h,0]:r<=2?n=[h,e,0]:r<=3?n=[0,e,h]:r<=4?n=[0,h,e]:r<=5?n=[h,0,e]:r<=6&&(n=[e,0,h]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]})(i[0],i[1],i[2]);return b(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?M(t):M((t=>{const i=k[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),M("#fff")},exports.ColorHEX=M,exports.ColorHSV=w,exports.ColorPalettes=$e,exports.ColorRGBA=b,exports.ColorShadingStyles=Qe,exports.ColorUint32=_,exports.ConstantLine=uh,exports.Cursor2D=Nl,exports.Cursor3D=Pl,exports.CursorBuilder2D=Gl,exports.CursorBuilder3D=Bl,exports.CursorBuilderXY=gc,exports.CursorBuilders=of,exports.CursorXY=Ac,exports.CustomTick=Uh,exports.Dashboard=TA,exports.DashedLine=dr,exports.DataGrid=wf,exports.DataSetXY=$n,exports.DateTimeTickStrategy=ya,exports.EllipseFigure=Ou,exports.EllipseSeries=zu,exports.EmptyFill=oe,exports.EmptyTickStrategy=Ch,exports.EmptyUIElement=Kh,exports.Eventer=yt,exports.Figure=Lu,exports.FigureSeries=Eu,exports.FontSettings=L,exports.FormattingFunctions=Ks,exports.FunnelChart=ad,exports.FunnelChartTypes=Ad,exports.FunnelChartWithLabelsInsideSlices=fd,exports.FunnelChartWithLabelsOnSides=dd,exports.FunnelSlice=td,exports.GaugeChart=Hf,exports.GenericAxis=Lh,exports.GlowEffect=yr,exports.HeatmapGridSeries=sc,exports.HeatmapGridSeriesIntensityValues=ec,exports.HeatmapScrollingGridSeries=rc,exports.HeatmapScrollingGridSeriesIntensityValues=hc,exports.Highlighter=Ee,exports.Icon=gr,exports.ImageFill=_t,exports.IndividualPointFill=Ae,exports.LUT=ee,exports.Legend=Ga,exports.LegendEntryClickBehaviors=Na,exports.LineAndPointSeries3D=nl,exports.LineSeries3D=ol,exports.LinearGradientFill=N,exports.LinearGradientFillPalette=(t,i,s,e)=>{const r=t(i+1,e);return t=>new N({stops:[{offset:0,color:r(t).getDarker()},{offset:.5,color:r(t)},{offset:1,color:r(t).getDarker()}],angle:s||90})},exports.MapChart=fu,exports.MapRegions=hu,exports.MapRegionsAfrica=Jl,exports.MapRegionsAsia=Ql,exports.MapRegionsAustralia=Kl,exports.MapRegionsCanada=ql,exports.MapRegionsEurope=tu,exports.MapRegionsNorthAmerica=eu,exports.MapRegionsSouthAmerica=ru,exports.MapRegionsUSA=su,exports.MapRegionsWorld=iu,exports.MapTypes=nu,exports.MeshModel3D=kl,exports.NumericTickStrategy=ka,exports.OHLCSeries=ac,exports.OHLCSeriesBars=uc,exports.OHLCSeriesCandlesticks=lc,exports.OHLCSeriesTypes=cc,exports.OnScreenMenu=yc,exports.OnScreenMenuAnimationsButton=Xr,exports.OnScreenMenuButton=Nr,exports.OnScreenMenuControlBase=kr,exports.OnScreenMenuCustomButton=Jr,exports.OnScreenMenuOsmToggleButton=Qr,exports.OnScreenMenuToggleButton=Gr,exports.OnScreenMenuZoomInButton=$r,exports.OnScreenMenuZoomInXButton=Ur,exports.OnScreenMenuZoomInYButton=Yr,exports.OnScreenMenuZoomOutButton=jr,exports.OnScreenMenuZoomOutXButton=Hr,exports.OnScreenMenuZoomOutYButton=Wr,exports.OnScreenMenuZoomToFitButton=Zr,exports.PalettedFill=ve,exports.Panel=$a,exports.ParallelCoordinateAxis=Qf,exports.ParallelCoordinateChart=qf,exports.ParallelCoordinateSeries=Kf,exports.PhongShadingStyle=Ze,exports.Picture=Rn,exports.PieChart=uA,exports.PieChartTypes=AA,exports.PieChartWithLabelsInsideSlices=fA,exports.PieChartWithLabelsOnSides=dA,exports.PieSlice=vd,exports.PixelatedPoints3D=rr,exports.PointCloudSeries3D=cl,exports.PointLineAreaSeries=mc,exports.PointLineSeries3D=al,exports.PointSeries3D=ul,exports.PointSeriesTypes3D=dl,exports.PointStyle3D=nr,exports.PolarAreaSeries=Tu,exports.PolarAreaSeriesInterior=Fu,exports.PolarAxis=pu,exports.PolarAxisAmplitude=yu,exports.PolarAxisTick=vu,exports.PolarChart=Jc,exports.PolarHeatmapSeries=Uc,exports.PolarLineSeries=Iu,exports.PolarPointLineSeries=Gc,exports.PolarPointSeries=$c,exports.PolarPolygon=xu,exports.PolarPolygonSeries=Cu,exports.PolarSector=Zc,exports.PolarSeries=bu,exports.PolygonFigure=Vu,exports.PolygonSeries=Nu,exports.PyramidChart=Md,exports.PyramidChartTypes=Fd,exports.PyramidChartWithLabelsInsideSlices=Td,exports.PyramidChartWithLabelsOnSides=Cd,exports.PyramidSlice=md,exports.RadialGradientFill=O,exports.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new O({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},exports.RangeSeries=nc,exports.RectangleFigure=Gu,exports.RectangleSeries=$u,exports.SegmentFigure=Uu,exports.SegmentSeries=Yu,exports.Series2D=Su,exports.Series3D=Wa,exports.SeriesXY=Bu,exports.SimpleShadingStyle=We,exports.Slice=qc,exports.SliceLabelFormatters=rd,exports.SliceSorters=ed,exports.SolidFill=de,exports.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new de({color:e(t)})},exports.SolidLine=ar,exports.SpiderAxis=Pd,exports.SpiderChart=Ud,exports.SpiderSeries=Ed,exports.StipplePatterns=ur,exports.SurfaceGridSeries3D=yl,exports.SurfaceScrollingGridSeries3D=ml,exports.TextFigure=Hu,exports.TextSeries=Wu,exports.Themes=bf,exports.Tick=Oo,exports.TickStyle=jo,exports.TimeFormattingFunctions=sa,exports.TimeTickStrategy=ra,exports.TreeMapChart=Yf,exports.TriangulatedPoints3D=ir,exports.UIBackgrounds=Cl,exports.UICircle=so,exports.UIColumnGrid=class extends lo{constructor(){super(...arguments),this.Wd=[]}addColumn(){return this.addElement(go,void 0)}getColumn(t,i=!1){return i&&this.Wd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Wd[t]}},exports.UIDiamond=eo,exports.UIElementBuilders=Ro,exports.UIElementColumn=uo,exports.UIElementLine=ao,exports.UIElementRow=lo,exports.UIElementWithBackground=Nh,exports.UIEmptyBackground=qh,exports.UILabel=qn,exports.UILayoutBuilders=af,exports.UILayoutGap=oo,exports.UILegendPanel=iA,exports.UIObject=zh,exports.UIOrigins=qr,exports.UIPanel=Ya,exports.UIPoint=ho,exports.UIPointer=ro,exports.UIPolygon=zn,exports.UIRectangle=io,exports.UIRowGrid=fo,exports.VisibleFill=ce,exports.ZoomBandChart=Nc,exports._translatePoint=q,exports.contoursFromLUT=(t,i)=>{const s=null!=i?i:t=>t;return{levels:t.steps.map((t=>s({value:t.value},t)))}},exports.defaultAxisIntervalRestrictionsXY=No,exports.defaultOsmBackgroundColor=oh,exports.disableTextShadows=t=>{var i,s,e;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(i=t.parallelCoordinateAxisTimeTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(s=t.parallelCoordinateAxisNumericTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(e=t.parallelCoordinateAxisDateTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0)))}},exports.disableThemeEffects=t=>({...t,effect:void 0}),exports.emptyFill=ae,exports.emptyLine=Tt,exports.emptyPoints3D=qe,exports.emptyTick=Wo,exports.formatLUTValue=he,exports.formatLongitudeLatitude=Au,exports.formatNumberAsUnicodeSuperscript=qs,exports.htmlTextRenderer=_r,exports.interpolateColor=nt,exports.isArtificialLCJSEvent=t=>!0===t.isLcjsArtificialEvent,exports.isColor=S,exports.isCoordinate3D=Sl,exports.isCoordinateBarChart=Pf,exports.isCoordinateClient=Se,exports.isCoordinatePolar=Xc,exports.isCoordinateXY=Me,exports.isDashedLine=fr,exports.isEmptyFill=le,exports.isEmptyTick=Xo,exports.isFontSettings=P,exports.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),exports.isHitBox=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,exports.isHitBox3D=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,exports.isHitEllipse=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,exports.isHitHeatmap=it,exports.isHitMeshModel=rt,exports.isHitOHLC=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,exports.isHitPolarHeatmap=et,exports.isHitPolygon=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,exports.isHitRectangle=t=>t&&"object"==typeof t&&"figure"in t&&"positionAndSize"in t,exports.isHitSampleXY=ht,exports.isHitSegment=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,exports.isHitSurface=st,exports.isIcon=pr,exports.isImageFill=kt,exports.isIndividualPointFill=ge,exports.isLUT=re,exports.isLinearGradientFill=G,exports.isPalettedFill=ye,exports.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),exports.isPixelatedPoints3D=hr,exports.isRadialGradientFill=z,exports.isSeriesSupportedByZoomBandChart=t=>t instanceof oc||t instanceof ec||t instanceof ac||t instanceof mc,exports.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),exports.isSolidFill=fe,exports.isSolidLine=lr,exports.isTickStyle=Ho,exports.isTriangulatedPoints3D=sr,exports.lightningChart=(t,i)=>{let s="object"==typeof t?t.license:t;s&&(s=s.trim());const e="object"==typeof t?t.licenseInformation:i,r="object"==typeof t?t:void 0,h=new Zy;h.e=s;let n=lm.get(s||"E");return n||(n=((t,i)=>{let s,e,r=!1,h=!1,n=!1,o=!1,a="",l=!1,u=!1,c=!1;try{if(Yy){const e=(()=>{if(!Yy)return;const t=Yy.split("-");if(t.length>0)switch(t[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";case"P001":return"P001";default:return}})(),a=t&&"cGx1Z2lu"in t;if("0001"===e){Wy=new Uint8Array([2]);const i=(()=>{if(!Yy)return;const t=Yy.split("-");return 4===t.length?t[1].startsWith("m")?2:1:0})();if(1===i){const t=rm(Yy);n=!t.XW,s=t,r=!0}else 2===i?(s=hm(Yy,t),h=!0):(Jy=!0,s=im(Yy),o=!0);a&&(s={YW:Uy(0,0,1,7,1,12,5)})}else if("0002"===e){const i=(()=>{if(!Yy)return;const t=Yy.split("-");return t.length>=2?Uint8Array.from($y.atob(t[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===i)Jy=!0,s=im(Yy),o=!0;else if(189===i){const t=rm(Yy);n=!t.XW,s=t,r=!0}else 159===i?(s=hm(Yy,t),h=!0):s={YW:Uy(0,0,1,7,1,12,5)};const e=Wy.length>3&&2&Wy[3];(e&&!a||!e&&a||e&&a&&"cHl0aG9u"!==t.cGx1Z2lu)&&(s={YW:Uy(0,0,1,7,1,12,5)})}else if("T001"===e){const e=((t,i)=>{const s=Yy.split("-");if(3!==s.length)return{YW:Uy(0,0,1,7,1,12,5)};const e=`${s[1]}`,r=Array.prototype.reduce.call($y.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!em(e,r))return{YW:Uy(0,0,1,7,1,12,5)};let h=0;const n=Uint8Array.from($y.atob(s[1]),(t=>t.charCodeAt(h))),o=n.subarray(h,h+=20),a=new DataView(n.buffer).getUint16(h,!0);h+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+h]^o[t%o.byteLength];h=0;const u=new DataView(l.buffer),c=Ky(l.subarray(h,h+=4)),d=Uy(-3,0);if(!c)return{YW:Uy(0,0,1,7,1,12,5)};if(c<d)return{YW:Uy(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,A=new Date;f.setDate(f.getDate()+1),A.setDate(A.getDate()-1);const g=qy(A),p=qy(f);if(c<g||c>p)return{YW:Uy(0,0,1,2,1,3,1,4,5)};const v=u.getUint16(h,!0),y=l.subarray(h+=2,h+v);if(Wy=new Uint8Array(y),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{ZW:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&em(t[0],t[2])?{ZW:t[0]}:{YW:Uy(0,0,1,7,1,12,5)}}return{YW:Uy(0,0,1,7,1,12,5)}})(0,t);s=e;const h=e.ZW;h&&i?("string"==typeof h&&(i.l=h),r=!0):s={YW:Uy(0,0,1,7,1,12,5)}}else"P001"===e?(s=((t,i)=>{const s=Yy.split("-");if(3!==s.length)return{YW:Uy(0,0,1,7,1,12,5)};const e=`${s[0]}-${s[1]}`,r=Array.prototype.reduce.call($y.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!em(e,r))return{YW:Uy(0,0,1,7,1,12,5)};let h=0;const n=Uint8Array.from($y.atob(s[1]),(t=>t.charCodeAt(0)));h+=1;const o=n.subarray(h,h+=20),a=new DataView(n.buffer).getUint16(h,!0);h+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+h]^o[t%o.byteLength];h=0;const u=new DataView(l.buffer).getUint16(h,!0);h+=2;const c=l.subarray(h,u+h),d=new TextDecoder("utf-8").decode(c);return i&&"cGx1Z2lu"in i&&d===$y.atob(i.cGx1Z2lu)?(Wy=new Uint8Array([38]),{}):{YW:Uy(0,0,1,7,1,12,5)}})(0,t),!s.YW&&i&&(r=!0,u=!0)):s={YW:Uy(0,0,1,7,1,12,5)}}else{const i=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes($y[Uy(-1,6)][Uy(-1,7)])||i.test($y[Uy(-1,6)][Uy(-1,7)])?s={YW:Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),HW:Xy(t)}:$y[Uy(-1,6)][Uy(-1,40)]===$y.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,l=!1,Wy=new Uint8Array([38]),s={}):(c=!0,l=!0,Wy=new Uint8Array([38]),s={})}}catch(t){s={YW:Uy(0,0,1,7,1,12,5,1,70,1,71,5)}}try{o&&(e=$y[Uy(-1,34)][Uy(-1,35)](Uy(-1,39))||void 0)}catch(t){$y.console.error(t)}let d=!1;if(e){const t=e.split("-");if(2===t.length&&em(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(d=!0)}}const f=!(c||l||u||s.YW||r||h||d),A=(()=>{const t=new($y[Uy(-1,0)]);return t.open(Uy(0,26),Uy(-2,0)),t.setRequestHeader(Uy(-1,24),Uy(-1,25)),t.withCredentials=!0,t})(),g=new yt;if(f){let t;try{t=parseInt(Yy?Yy.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());a=(t^i).toString();const s={};let e="",r="",h="";Yy=Yy||"";const n=Uy(-4,0);for(let t=0;t<Yy.length;t+=1){const i=Yy.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const o=Uy(-3,0);for(let t=0;t<o.length;t+=1)r+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<a.length;t+=1)h+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));s[Uy(-1,3)]=$y.btoa(e),s[Uy(-1,4)]=$y.btoa(r),s.h=$y.btoa(h),s.v=3,s.s=$y[Uy(-1,34)][Uy(-1,35)](Uy(-1,33))||void 0,A.send(JSON.stringify(s))}return(r,h)=>{const o=[],c={La:t=>{o.indexOf(t)>=0||(o.push(t),d(),jy&&jy.$o&&g.R("logochange",{logoDataURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAAhCAYAAAAbDs+XAAAACXBIWXMAAAsSAAALEgHS3X78AAAIiUlEQVR4nO2bTWwkVxHHf5uEoHFAkIz5zAxIiIwDSNlBQgibQIKcC8i+ILW3L611TmGXC9LeVssp0t583YjbLC1E4z7aByTwAUWyxc1GIJE5wKEHASJDxAEP7IHNoaqma9rd4xl7vNll5y+N3P36vXrVrz5fvfal+/fvM8fjgyc+aAbmeLB4qqwxTtIFYBVoAsdAfwZz1fXXjcJgZwb05jgDLhVdugr7GrAThUF31hPGSdpGlOmtKAyOdb5WFAaHs57rIhAnaT0Kg1kYwAeCMoFvAIcXIWw3Rxto620b2IrCIKvou6p9+srXYZykrUn5i5P0OpBN6lXiJK0DC54fbbsN3ARuALtRGOxPQu9hQ5nAr0dhcOciJtOFMwHWgR4i7OOK/ivAVeAIeBcYICFmA9jS8Y0oDLrqKey6DqwA+6iAgENyJTtU79JSmjVHYwMJZR0TuiroJiLwdhQG+zpHW2n1dWwbqLm2ps7XNAVx4/qAKe0IX9Ov7OQYieG6AKWWNg3iJP0BkHrXFyfpD4GXXLcBY4StqGm/d8gX8ba2rQMHwBoiiBawGSfpHUTIA30G8A/EQg2rrh/AIE7SPeTd24hS+bVo6nUL2IiTNHNjN+Ik3UYUrK5t68CPgFuOfgvYAX6s9AfA28C33LhV4M0x63FuzDxLj5P0+8BXEYuwtm8yKuxdYG8CbT4A9pCFuK2L1kWEvwU0ECuHXECvocqk4wE+hyjPsf4aiBAHwF2gA6xpHlFDrHvP8WHzmuDXtX0LUbZMaRr9WpykL2sfo78MPEuuxPvAvcK4xinrcW6cWeDOXfm2V4FX9bYVJ2krTtJngZddt+0psvRVZDF39b6JWMOxusZFoK5xfpXcRYIIabnQ1tXfXaWVqattAj33TgsFPryFe3oWOj6m930kdGwD/wP6LtYPgP/q3BkSOj7t+DrUZxeKqQUeJ+kLcZLeAl4vtK8ArwAfds0hYnHP6/2gYDnj5rFt3CYSx7uIxe4gi9xGLOcYETbIQpoyrSOLnOm4LqIATSQf8MIz4VvfTRO+8lFTOk03xzG5F/uT0moBS+QW3/P09fkauSL+0vG1pHxdKEaSNnWZS2UWGCfpp4BvI+7aYs5Njasr2v5ScRzwT+A5vd6LwmBb6a3P9+MPHqWFF484SZ9BLOorwBcYteB2nKQD4MuIhpbhOXd9UNFnjgeESoGroC8jQn5e/xbxHeCPwOcZVYQy9Kr22hXzNxFX2vPJnXP1/XEFkKrx09Ao9D1BZ1o4ngx9JF+ozaruYVvNqrUuE/iTcZJ+DXgReBL4IvDJCvqfAP5T8vyvwGcKbdMWKq4hC30TiZeGdSTmvcX4ku8GUsF7o+TZChJLT6MBcAVR/C1GE7aJ4fbxtcKju0j+0QDK+Jx2niayXTwCSmspZQJ/EfgI8Azixk+z3GK23gP+rDQ+6tonLp1qEaOOaGpRIMfIwmeF/sMtjVpLi3z/O7ROvbdCx4LLzE0YRau3+Xo6dvieZRbvPAKIMtUR5YU88bTkrIckpP0in2eEzVvpScsE/gSyXXjhDBMOEM36BvIyX9L2oynrzya8MsZXAVyyuMGo5fS0qIK23wCIk7Sre/cbru9VRAB1REHQvn1kL24ZdF8rc34scZIOK4Vxkm5qX49dcoPYLSapTtnqRT5VAUbmQ9bxTskzq9rZ/Gtxkq6Zd7N5ojDIygT+WeBDJe2Ge8DTFc92VBC/Aj5OnuRNezBiCeCIwNV6ALr60lcRJbN9+hry8raQtu9eRuoCdcSNX0MU8hfa36p3e8jiLwNLcZLa1H1n3Uazpb+GuuzlkmcZebWvLKQN36eEzz4SRtD3WQUuq/BsfXYRb9VQ3pt6bXt9VBGbSO0iG+7DldAVxgs7A35f8axre+woDO4Bvwb+hrjlaeO3d4keTdf+ml531HKsb+b67RWeLZDnA1khUbIDFs/ror2bo3mo/UwZ7Sh5EIXBVsGKhwpb4eHG8dlEhLlOHoJAvNaQF0TQu5qk1XSu/SgMMpVpXd+5Dgx84cU0pQq/1Rf/N1Ix8hggRZAhojD4O1IrrlKQcfCCrWo3N24C9PGrOL6uPFU+I0/IltzzhrsuxsdiVc57I5vPnyUUq3eQhxEb6xV9E0ku/SELiGcavo8Kd8eN932HglY6Ne/SfUJSxEEUBh3VmFeAvzC6Tdsp0+AoDN6Ok/R3Y+hWwRZ6M07SQ2XWu+p33PUV7WPxK2NUwJCfzEEuoJbmAEVvYvfvFmjata+e2cGO0bvu5reFP0Ky/NvuXUA8SVExjM8GuqUs8DXQfMFX8YARharHSboO7Gt49bH9wFt4nXIcRGHQUcYyZN/tLXzoyssQhcG/lKFmIcstRaFPTZm1cqTx2EPKm2aFa4wuXgNdcEfPL3SfvNZuimOZs9EZunHnGWzBF5S3TOfb1rGXyWO2zddRfv27rCGKN1QMx2em/U3wa46muWlPH+XxGFGuuvYfaHsnCoM39Lc/LK3GSfoTTmIobEOcpE8D3wO+q0TfPKUAsk5e7+7qIu2dt7RaKGIs6Uue4PeiUdwSIjG3hWTvF/YRyVnxFJywKkPp4kVhcC9O0t8AX0eSjUm3W3YkWFWCnRa3Cvdm9Q8aLfJ9Nmi2/zAKG/J9+GKhfaylRGHwXpykP4vC4A8TzpMhLmhxhgcmW+763GXPcyDzvDysgjaYwH38PprELU4hbEMHuBEnqR1DngsPy8Kqh3tkPmo0gZtL7zGjM1k7atXbJSS27SDbv2EmPceDhWXpTfSDQmCxYs84LQZIVrpMvqVaJ/9aZRZzzDElLv3059sLSF3WasImmM5FxMU4/+698yh/3/2owgRONHrm3EQOJTKmr4NXYQEJHYtIoebccXyO6XHiu3SPkgP78+LUDw7muFiMFfgc/3+Y//foY4a5wB8zvA/xX9auz5FT8QAAAABJRU5ErkJggg=="}))},Ba:g},d=()=>{o.forEach((t=>{const i=v(t);if(!i)return;const{JW:s,QW:e}=i,r=e?Uy(-2,1):void 0,h=`${Uy(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${r?Uy(0,5,1,63,1,64,1,59,1,65,1,41,5):""}`;nm(h,y,!1,r)}))},p=t=>$y.atob(t),v=t=>{const i=Object.values(jh).includes(t)?t:void 0;if(i){switch(t){case jh.yo:return jy.po||jy.yo?void 0:{JW:p(i),QW:!0};case jh.bo:return jy.po||jy.bo?void 0:{JW:p(i),QW:!0};case jh.Mo:return jy.po||jy.vo||jy.Mo?void 0:{JW:p(i),QW:!0};case jh.vo:return jy.po||jy.vo?void 0:{JW:p(i),QW:!0};case jh.To:return jy.po||jy.vo||jy.To?void 0:{JW:p(i),QW:!0};case jh.Lo:return jy.po||jy.vo||jy.Lo?void 0:{JW:p(i),QW:!0};case jh.Eo:return jy.po||jy.vo||jy.Eo?void 0:{JW:p(i),QW:!0};case jh.Oo:return jy.po||jy.vo||jy.Oo?void 0:{JW:p(i),QW:!0};case jh.zo:return jy.po||jy.vo||jy.zo?void 0:{JW:p(i),QW:!0};case jh.Ro:return jy.po||jy.vo||jy.Ro?void 0:{JW:p(i),QW:!0};case jh._o:return jy.po||jy.vo||jy._o?void 0:{JW:p(i),QW:!0};case jh.Io:return jy.po||jy.vo||jy.Io?void 0:{JW:p(i),QW:!0};case jh.Co:return jy.po||jy.vo||jy.Co?void 0:{JW:p(i),QW:!0};case jh.Po:return jy.po||jy.vo||jy.Po?void 0:{JW:p(i),QW:!0};case jh.Do:return jy.po||jy.vo||jy.Do?void 0:{JW:p(i),QW:!0};case jh.Bo:return jy.po||jy.vo||jy.Bo?void 0:{JW:p(i),QW:!0};case jh.wo:return jy.po||jy.vo||jy.wo?void 0:{JW:p(i),QW:!0};case jh.ko:return jy.po||jy.vo||jy.ko?void 0:{JW:p(i),QW:!0};case jh.Fo:return jy.po||jy.vo||jy.Fo?void 0:{JW:p(i),QW:!0};case jh.Vo:return jy.po||jy.vo||jy.Vo?void 0:{JW:p(i),QW:!0};case jh.No:return jy.po||jy.vo||jy.No?void 0:{JW:p(i),QW:!0};case jh.po:case jh.mo:case jh.So:case jh.xo:case jh.Go:case jh.$o:return}return $i(0,"")}},y=new Qv(h,r,c);Array.from(y.zn.children).forEach((t=>{"lcjs-error"===t.id&&y.zn.removeChild(t)})),(null==s?void 0:s.YW)&&nm(s.YW,y,void 0,s.HW);const m=t=>{if("error"===(null==t?void 0:t.type)&&e){const t=e.split("-");if(2===t.length&&em(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+Ny>s)return Jy=!1,void om(A,!1,x)}}if(A.readyState===$y[Uy(-1,0)].DONE)if(200===A.status){const t=JSON.parse(A[Uy(-1,23)]);if(!em(a+Uy(-3,0),t.h)){const t=Uy(0,0,1,27,1,28,1,29,1,30,1,31,5);nm(t,y)}$y[Uy(-1,34)][Uy(-1,36)](Uy(-1,39),t.t),$y[Uy(-1,34)][Uy(-1,36)](Uy(-1,33),t.s),Jy=!1}else{let i=Uy(0,0,1,2,1,7,1,12,5);try{i=t&&"loadend"!==t.type?Uy(0,0,1,23,1,32,1,24,5):JSON.parse(A[Uy(-1,23)]).message,om(A,!1,x)}catch(t){console.error(t)}nm(i,y,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},x=t=>{m(t)};if(om(A,!0,x),f?setTimeout((()=>{if(Jy){let t=!0;if(e){const i=e.split("-");if(2===i.length&&em(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+Ny>e&&(t=!1)}}t&&nm(Uy(0,25,1,23,1,32,1,24,5),y)}}),1e4):om(A,!1,x),l){const s=(()=>{const t=new($y[Uy(-1,0)]);return t.open(Uy(0,26),Uy(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),e=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),r=r=>{if("error"===(null==r?void 0:r.type)){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,h)}if(s.readyState===$y.XMLHttpRequest.DONE){const r=s.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==s.status||r&&"1"!==r){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,h)}else{const r=JSON.parse(s.responseText);if(!em(e,r.s)){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,h)}void 0!==i&&(i.l=r.l),g.R("logochange",{logoDataURI:r.l})}}else{const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,h)}},h=t=>{r(t)};om(s,!0,h),s.send(e),setTimeout((()=>{if(s.readyState<2){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,h)}}),1e4)}if(u){const s=(()=>{const t=new($y[Uy(-1,0)]);return t.open(Uy(0,26),Uy(1,1)),t.setRequestHeader(Uy(-1,24),Uy(-1,25)),t.withCredentials=!0,t})();let e;try{e=parseInt(Yy?Yy.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(t){e=Math.floor(1e6*Math.random())}const r=Math.floor(1e6*Math.random());a=(e^r).toString();const h={};let n="",o="";Yy=Yy||"";const l=Uy(-4,0);for(let t=0;t<Yy.length;t+=1){const i=Yy.charCodeAt(t)^l.charCodeAt(t);n+=String.fromCharCode(i)}for(let t=0;t<a.length;t+=1)o+=String.fromCharCode(a.charCodeAt(t)^l.charCodeAt(t));h[Uy(-1,3)]=$y.btoa(n),h.h=$y.btoa(o),h.v=1,s.send(JSON.stringify(h));const u=e=>{var r;if("error"===(null==e?void 0:e.type)){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,c)}if(s.readyState===$y.XMLHttpRequest.DONE)if(200===s.status){const e=JSON.parse(s.responseText);if(!em(a,e.h)){const i=Uy(0,0,1,7,1,12,5);nm(i,y,!1,Xy(t)),om(A,!1,c)}const r=e.l.split("-"),h=r[0],n=r[1];if(em(h,n))void 0!==i&&(i.l=h,g.R("logochange",{logoDataURI:h}));else{const i=Uy(0,0,1,7,1,12,5);nm(i,y,!1,Xy(t))}const o=e.f,l=Uint8Array.from($y.atob(o),(t=>t.charCodeAt(0)));let u=0;const f=l.subarray(u,u+=20),p=new DataView(l.buffer).getUint16(u,!0);u+=2;const v=Uint8Array.from(Array(p));for(let t=0;t<p;t+=1)v[t]=l[t+u]^f[t%f.byteLength];const m=new DataView(v.buffer);u=0;const x=Uint8Array.from(Array(m.getUint16(u,!0)));u+=2,x.set(v.subarray(u,u+=x.byteLength)),Wy=new Uint8Array(x),i&&i.e&&d()}else{const i=null!==(r=JSON.parse(s.responseText).message)&&void 0!==r?r:Uy(0,0,1,7,1,12,5);nm(i,y,!1,Xy(t)),om(A,!1,c)}else{const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,c)}},c=t=>{u(t)};om(s,!0,c),setTimeout((()=>{if(s.readyState<2){const i=Uy(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);nm(i,y,!1,Xy(t)),om(A,!1,c)}}),1e4)}return n?(t=>{let i;Jy=!1;const s=()=>{i&&(t.Fa(i.Ta()),i=void 0);const s=t.kt();i=t.zP("deployment test"),i._n(t.ai).tn(Uy(0,34,1,33)).sr({x:s.x/2,y:s.y/2}).Ll(50).Th(13).qe(new de({color:b(128,128,128,100)})).Fl("Arial").Bl(500).setPointerEvents(!1),t._a().ka()};t.O("resize",(()=>{s()})),setTimeout(s,0),setInterval((()=>{i&&i.Ta()<t.tl()-1?s():i||s()}),1e3)})(y):A.readyState===$y[Uy(-1,0)].DONE&&m(),y}})(e,h)),((t,i,s,e)=>{var r,h,n,o,a,l,u,c;let d;if(s&&s.license){const t=s.license.split("-");d=t[t.length-1]}const f=null===(r=null==s?void 0:s.webgl)||void 0===r?void 0:r.version,A={sE:null===(h=null==s?void 0:s.sharedContextOptions)||void 0===h?void 0:h.canvas,Ea:null==s?void 0:s.warnings,fE:"webgl1"===f?1:"webgl2"===f?2:void 0,lE:!1!==(null===(n=null==s?void 0:s.sharedContextOptions)||void 0===n?void 0:n.antialias),aE:(null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.devicePixelRatio)||void 0,bE:(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.noCanvasStyles)||void 0,kE:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.noCanvasTransform)||void 0,cE:!1!==(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.useStackingOrder),dE:!1!==(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.useIndividualCanvas),ME:d||void 0},g=new Ug(A),p=i=>t({...i,textRenderer:i.textRenderer?i.textRenderer:void 0,textPixelSnappingEnabled:void 0!==(null==i?void 0:i.textPixelSnappingEnabled)?i.textPixelSnappingEnabled:!(null==i?void 0:i.textRenderer)&&void 0},g);return{Dashboard:Yg(p,i,s,e),ChartXY:Wg(p,i,s,e),Spider:Xg(p,i,s,e),Polar:Zg(p,i,s,e),Pie:Jg(p,i,s,e),UIPanel:Hg(p,i,s,e),Gauge:Qg(p,i,s,e),Funnel:Kg(p,i,s,e),Pyramid:qg(p,i,s,e),Chart3D:ip(p,i,s,e),Map:tp(p,i,s,e),DataGrid:sp(p,i,s,e),BarChart:ep(p,i,s,e),ParallelCoordinateChart:np(p,i,s,e),ZoomBandChart:rp(p,i,s,e),TreeMapChart:hp(p,i,s,e),dispose:g.G.bind(g),layout:g.LE.bind(g)}})(n,h.e,r,h.l)},exports.onScreenMenuControlBaseHeight=sh,exports.onScreenMenuControlBaseWidth=eh,exports.onScreenMenuControlOpacity=rh,exports.onScreenMenuDefaultButtonShape=nh,exports.onScreenMenuSpriteURL=hh,exports.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const r=null==e?void 0:e.formatLabels,h=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==h?e.setA(h):e,value:o,label:r?r(o):void 0}}))},exports.saveToFile=Ca,exports.scaleTheme=(t,i)=>{const s=Object.fromEntries(Object.entries(t).map((([t,s])=>{if(P(s))return[t,s.setSize(s.getSize()*i)];if("panelPadding"===t||"chartXYPadding"===t)return[t,s*i];if("polarRadialAxisTickStyle"===t){const e=s;return[t,e.setTickLength(e.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(e.getTickPadding()*i)]}if("object"==typeof s&&"setTickStyle"in s)return[t,s.setTickStyle((t=>t.setTickLength(t.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(t.getTickPadding()*i)))];if("barChartValueLabelsAfterBars"===t||"barChartValueLabelsInsideBars"===t||"barChartCategoryLabels"===t){const e=s;return[t,{...e,labelFont:e.labelFont.setSize(e.labelFont.getSize()*i)}]}return[t,s]})));[["uiButtonSize",10],["chartXYTitleMargin",5],["legendPadding",5],["uiTextPadding",5],["legendLUTLabelMargin",7],["legendLUTUnitLabelMargin",7],["legendLUTLengthHorizontal",160],["legendLUTLengthVertical",140],["legendLUTThicknessHorizontal",15],["legendLUTThicknessVertical",25],["dataGridCellPadding",5],["dataGridScrollBarThickness",20],["gaugeChartBarThickness",40],["gaugeChartValueIndicatorThickness",10],["gaugeChartNeedleLength",40],["gaugeChartNeedleThickness",10],["gaugeChartGapBetweenBarAndValueIndicators",10]].forEach((t=>{var e;const r=t[0],h=t[1];s[r]=(null!==(e=s[r])&&void 0!==e?e:h)*i})),s.cursorPointMarkerSize={x:s.cursorPointMarkerSize.x*i,y:s.cursorPointMarkerSize.y*i};const e=s.cursorDynamicBehavior;return e&&(s.cursorDynamicBehavior={...e,pointMarkerSize:e.pointMarkerSize?t=>{if(!e.pointMarkerSize)return{x:0,y:0};const s=e.pointMarkerSize(t);return{x:s.x*i,y:s.y*i}}:void 0}),s},exports.synchronizeAxisIntervals=tt,exports.transparentFill=th,exports.transparentLine=ih,exports.uint32ColorFromObject=t=>F(255*t.r,255*t.g,255*t.b,255*t.a),exports.uint32ColorFromRGBA=F,exports.useCursorDataPointColor=rA,exports.useCursorFormatterSeriesOverride=eA,exports.vec3Utils=es,exports.xDimensionStrategy=Go,exports.yDimensionStrategy=$o;
