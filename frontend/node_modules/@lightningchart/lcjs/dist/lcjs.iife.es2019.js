/* LightningChart JS v8.1.1 */
var lcjs=function(t){"use strict";class i{constructor(){this.o=!0}u(){return this.o}}class s extends i{constructor(t,i){super(),this.S=t,this.M=t,this.o=i}_(t){return t!==this.S&&(this.M=this.S,this.S=t,this.o=!0),this}C(){return this.S}u(){return super.u()}}const e=(t,i)=>({x:t,y:i}),r=(t,i)=>({x:t,y:i}),n=(t,i,s)=>({position:t,high:i,low:s}),h=(t,i,s)=>({x:t,y:i,z:s}),o=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(e(t.position,t.high)),s.push(e(t.position,t.low))})),[i,s]},a=(t,i)=>({min:t,max:i}),l=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),u=(t,i=!0)=>new s(t,i),c=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),d=c,f=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom});var v="delete",A=32,g=31,y={};function p(t){t&&(t.value=!0)}function m(){}function S(t){return void 0===t.size&&(t.size=t.T(x)),t.size}function b(t,i){if("number"!=typeof i){var s=i>>>0;if(""+s!==i||4294967295===s)return NaN;i=s}return i<0?S(t)+i:i}function x(){return!0}function M(t,i,s){return(0===t&&!C(t)||void 0!==s&&t<=-s)&&(void 0===i||void 0!==s&&i>=s)}function w(t,i){return k(t,i,0)}function _(t,i){return k(t,i,i)}function k(t,i,s){return void 0===t?s:C(t)?i===1/0?i:0|Math.max(0,i+t):void 0===i||i===t?t:0|Math.min(i,t)}function C(t){return t<0||0===t&&1/t==-1/0}var T="@@__IMMUTABLE_ITERABLE__@@";function F(t){return Boolean(t&&t[T])}var I="@@__IMMUTABLE_KEYED__@@";function L(t){return Boolean(t&&t[I])}var P="@@__IMMUTABLE_INDEXED__@@";function B(t){return Boolean(t&&t[P])}function D(t){return L(t)||B(t)}var E=function(t){return F(t)?t:rt(t)},R=function(t){function i(t){return L(t)?t:nt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(E),O=function(t){function i(t){return B(t)?t:ht(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(E),z=function(t){function i(t){return F(t)&&!D(t)?t:ot(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(E);E.Keyed=R,E.Indexed=O,E.Set=z;var V="@@__IMMUTABLE_SEQ__@@";function N(t){return Boolean(t&&t[V])}var G="@@__IMMUTABLE_RECORD__@@";function $(t){return Boolean(t&&t[G])}function U(t){return F(t)||$(t)}var j="@@__IMMUTABLE_ORDERED__@@";function Y(t){return Boolean(t&&t[j])}var H="function"==typeof Symbol&&Symbol.iterator,W="@@iterator",X=H||W,Z=function(t){this.next=t};function J(t,i,s,e){var r=0===t?i:1===t?s:[i,s];return e?e.value=r:e={value:r,done:!1},e}function Q(){return{value:void 0,done:!0}}function K(t){return!!Array.isArray(t)||!!it(t)}function q(t){return t&&"function"==typeof t.next}function tt(t){var i=it(t);return i&&i.call(t)}function it(t){var i=t&&(H&&t[H]||t[W]);if("function"==typeof i)return i}Z.prototype.toString=function(){return"[Iterator]"},Z.KEYS=0,Z.VALUES=1,Z.ENTRIES=2,Z.prototype.inspect=Z.prototype.toSource=function(){return this.toString()},Z.prototype[X]=function(){return this};var st=Object.prototype.hasOwnProperty;function et(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var rt=function(t){function i(t){return null==t?dt():U(t)?t.toSeq():function(t){var i,s,e=At(t);if(e)return(s=it(i=t))&&s===i.entries?e.fromEntrySeq():function(t){var i=it(t);return i&&i===t.keys}(t)?e.toSetSeq():e;if("object"==typeof t)return new lt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toSeq=function(){return this},i.prototype.toString=function(){return this.F("Seq {","}")},i.prototype.cacheResult=function(){return!this.I&&this.L&&(this.I=this.entrySeq().toArray(),this.size=this.I.length),this},i.prototype.T=function(t,i){var s=this.I;if(s){for(var e=s.length,r=0;r!==e;){var n=s[i?e-++r:r++];if(!1===t(n[1],n[0],this))break}return r}return this.L(t,i)},i.prototype.P=function(t,i){var s=this.I;if(s){var e=s.length,r=0;return new Z((function(){if(r===e)return{value:void 0,done:!0};var n=s[i?e-++r:r++];return J(t,n[0],n[1])}))}return this.D(t,i)},i}(E),nt=function(t){function i(t){return null==t?dt().toKeyedSeq():F(t)?L(t)?t.toSeq():t.fromEntrySeq():$(t)?t.toSeq():ft(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toKeyedSeq=function(){return this},i}(rt),ht=function(t){function i(t){return null==t?dt():F(t)?L(t)?t.entrySeq():t.toIndexedSeq():$(t)?t.toSeq().entrySeq():vt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toIndexedSeq=function(){return this},i.prototype.toString=function(){return this.F("Seq [","]")},i}(rt),ot=function(t){function i(t){return(F(t)&&!D(t)?t:ht(t)).toSetSeq()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toSetSeq=function(){return this},i}(rt);rt.isSeq=N,rt.Keyed=nt,rt.Set=ot,rt.Indexed=ht,rt.prototype[V]=!0;var at=function(t){function i(t){this.R=t,this.size=t.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.has(t)?this.R[b(this,t)]:i},i.prototype.T=function(t,i){for(var s=this.R,e=s.length,r=0;r!==e;){var n=i?e-++r:r++;if(!1===t(s[n],n,this))break}return r},i.prototype.P=function(t,i){var s=this.R,e=s.length,r=0;return new Z((function(){if(r===e)return{value:void 0,done:!0};var n=i?e-++r:r++;return J(t,n,s[n])}))},i}(ht),lt=function(t){function i(t){var i=Object.keys(t);this.O=t,this.V=i,this.size=i.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return void 0===i||this.has(t)?this.O[t]:i},i.prototype.has=function(t){return st.call(this.O,t)},i.prototype.T=function(t,i){for(var s=this.O,e=this.V,r=e.length,n=0;n!==r;){var h=e[i?r-++n:n++];if(!1===t(s[h],h,this))break}return n},i.prototype.P=function(t,i){var s=this.O,e=this.V,r=e.length,n=0;return new Z((function(){if(n===r)return{value:void 0,done:!0};var h=e[i?r-++n:n++];return J(t,h,s[h])}))},i}(nt);lt.prototype[j]=!0;var ut,ct=function(t){function i(t){this.N=t,this.size=t.length||t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.L=function(t,i){if(i)return this.cacheResult().T(t,i);var s=tt(this.N),e=0;if(q(s))for(var r;!(r=s.next()).done&&!1!==t(r.value,e++,this););return e},i.prototype.D=function(t,i){if(i)return this.cacheResult().P(t,i);var s=tt(this.N);if(!q(s))return new Z(Q);var e=0;return new Z((function(){var i=s.next();return i.done?i:J(t,e++,i.value)}))},i}(ht);function dt(){return ut||(ut=new at([]))}function ft(t){var i=At(t);if(i)return i.fromEntrySeq();if("object"==typeof t)return new lt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function vt(t){var i=At(t);if(i)return i;throw new TypeError("Expected Array or collection object of values: "+t)}function At(t){return et(t)?new at(t):K(t)?new ct(t):void 0}var gt="@@__IMMUTABLE_MAP__@@";function yt(t){return Boolean(t&&t[gt])}function pt(t){return yt(t)&&Y(t)}function mt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function St(t,i){if(t===i||t!=t&&i!=i)return!0;if(!t||!i)return!1;if("function"==typeof t.valueOf&&"function"==typeof i.valueOf){if((t=t.valueOf())===(i=i.valueOf())||t!=t&&i!=i)return!0;if(!t||!i)return!1}return!!(mt(t)&&mt(i)&&t.equals(i))}var bt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,i){var s=65535&(t|=0),e=65535&(i|=0);return s*e+((t>>>16)*e+s*(i>>>16)<<16>>>0)|0};function xt(t){return t>>>1&1073741824|3221225471&t}var Mt=Object.prototype.valueOf;function wt(t){if(null==t)return _t(t);if("function"==typeof t.hashCode)return xt(t.hashCode(t));var i,s,e,r=(i=t).valueOf!==Mt&&"function"==typeof i.valueOf?i.valueOf(i):i;if(null==r)return _t(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return xt(i)}(r);case"string":return r.length>Et?(void 0===(e=zt[s=r])&&(e=kt(s),Ot===Rt&&(Ot=0,zt={}),Ot++,zt[s]=e),e):kt(r);case"object":case"function":return function(t){var i;if(Lt&&void 0!==(i=It.get(t)))return i;if(void 0!==(i=t[Dt]))return i;if(!Tt){if(void 0!==(i=t.propertyIsEnumerable&&t.propertyIsEnumerable[Dt]))return i;if(void 0!==(i=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return i}if(i=Ft(),Lt)It.set(t,i);else{if(void 0!==Ct&&!1===Ct(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Tt)Object.defineProperty(t,Dt,{enumerable:!1,configurable:!1,writable:!1,value:i});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Dt]=i;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Dt]=i}}return i}(r);case"symbol":return function(t){var i=Pt[t];return void 0!==i||(i=Ft(),Pt[t]=i),i}(r);default:if("function"==typeof r.toString)return kt(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function _t(t){return null===t?1108378658:1108378659}function kt(t){for(var i=0,s=0;s<t.length;s++)i=31*i+t.charCodeAt(s)|0;return xt(i)}var Ct=Object.isExtensible,Tt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Ft(){var t=++Bt;return 1073741824&Bt&&(Bt=0),t}var It,Lt="function"==typeof WeakMap;Lt&&(It=new WeakMap);var Pt=Object.create(null),Bt=0,Dt="__immutablehash__";"function"==typeof Symbol&&(Dt=Symbol(Dt));var Et=16,Rt=255,Ot=0,zt={},Vt=function(t){function i(t,i){this.G=t,this.$=i,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.G.get(t,i)},i.prototype.has=function(t){return this.G.has(t)},i.prototype.valueSeq=function(){return this.G.valueSeq()},i.prototype.reverse=function(){var t=this,i=Yt(this,!0);return this.$||(i.valueSeq=function(){return t.G.toSeq().reverse()}),i},i.prototype.map=function(t,i){var s=this,e=jt(this,t,i);return this.$||(e.valueSeq=function(){return s.G.toSeq().map(t,i)}),e},i.prototype.T=function(t,i){var s=this;return this.G.T((function(i,e){return t(i,e,s)}),i)},i.prototype.P=function(t,i){return this.G.P(t,i)},i}(nt);Vt.prototype[j]=!0;var Nt=function(t){function i(t){this.G=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.includes=function(t){return this.G.includes(t)},i.prototype.T=function(t,i){var s=this,e=0;return i&&S(this),this.G.T((function(r){return t(r,i?s.size-++e:e++,s)}),i)},i.prototype.P=function(t,i){var s=this,e=this.G.P(1,i),r=0;return i&&S(this),new Z((function(){var n=e.next();return n.done?n:J(t,i?s.size-++r:r++,n.value,n)}))},i}(ht),Gt=function(t){function i(t){this.G=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.has=function(t){return this.G.includes(t)},i.prototype.T=function(t,i){var s=this;return this.G.T((function(i){return t(i,i,s)}),i)},i.prototype.P=function(t,i){var s=this.G.P(1,i);return new Z((function(){var i=s.next();return i.done?i:J(t,i.value,i.value,i)}))},i}(ot),$t=function(t){function i(t){this.G=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.entrySeq=function(){return this.G.toSeq()},i.prototype.T=function(t,i){var s=this;return this.G.T((function(i){if(i){ii(i);var e=F(i);return t(e?i.get(1):i[1],e?i.get(0):i[0],s)}}),i)},i.prototype.P=function(t,i){var s=this.G.P(1,i);return new Z((function(){for(;;){var i=s.next();if(i.done)return i;var e=i.value;if(e){ii(e);var r=F(e);return J(t,r?e.get(0):e[0],r?e.get(1):e[1],i)}}}))},i}(nt);function Ut(t){var i=ei(t);return i.G=t,i.size=t.size,i.flip=function(){return t},i.reverse=function(){var i=t.reverse.apply(this);return i.flip=function(){return t.reverse()},i},i.has=function(i){return t.includes(i)},i.includes=function(i){return t.has(i)},i.cacheResult=ri,i.L=function(i,s){var e=this;return t.T((function(t,s){return!1!==i(s,t,e)}),s)},i.D=function(i,s){if(2===i){var e=t.P(i,s);return new Z((function(){var t=e.next();if(!t.done){var i=t.value[0];t.value[0]=t.value[1],t.value[1]=i}return t}))}return t.P(1===i?0:1,s)},i}function jt(t,i,s){var e=ei(t);return e.size=t.size,e.has=function(i){return t.has(i)},e.get=function(e,r){var n=t.get(e,y);return n===y?r:i.call(s,n,e,t)},e.L=function(e,r){var n=this;return t.T((function(t,r,h){return!1!==e(i.call(s,t,r,h),r,n)}),r)},e.D=function(e,r){var n=t.P(2,r);return new Z((function(){var r=n.next();if(r.done)return r;var h=r.value,o=h[0];return J(e,o,i.call(s,h[1],o,t),r)}))},e}function Yt(t,i){var s=this,e=ei(t);return e.G=t,e.size=t.size,e.reverse=function(){return t},t.flip&&(e.flip=function(){var i=Ut(t);return i.reverse=function(){return t.flip()},i}),e.get=function(s,e){return t.get(i?s:-1-s,e)},e.has=function(s){return t.has(i?s:-1-s)},e.includes=function(i){return t.includes(i)},e.cacheResult=ri,e.T=function(s,e){var r=this,n=0;return e&&S(t),t.T((function(t,h){return s(t,i?h:e?r.size-++n:n++,r)}),!e)},e.P=function(e,r){var n=0;r&&S(t);var h=t.P(2,!r);return new Z((function(){var t=h.next();if(t.done)return t;var o=t.value;return J(e,i?o[0]:r?s.size-++n:n++,o[1],t)}))},e}function Ht(t,i,s,e){var r=ei(t);return e&&(r.has=function(e){var r=t.get(e,y);return r!==y&&!!i.call(s,r,e,t)},r.get=function(e,r){var n=t.get(e,y);return n!==y&&i.call(s,n,e,t)?n:r}),r.L=function(r,n){var h=this,o=0;return t.T((function(t,n,a){if(i.call(s,t,n,a))return o++,r(t,e?n:o-1,h)}),n),o},r.D=function(r,n){var h=t.P(2,n),o=0;return new Z((function(){for(;;){var n=h.next();if(n.done)return n;var a=n.value,l=a[0],u=a[1];if(i.call(s,u,l,t))return J(r,e?l:o++,u,n)}}))},r}function Wt(t,i,s,e){var r=t.size;if(M(i,s,r))return t;var n=w(i,r),h=_(s,r);if(n!=n||h!=h)return Wt(t.toSeq().cacheResult(),i,s,e);var o,a=h-n;a==a&&(o=a<0?0:a);var l=ei(t);return l.size=0===o?o:t.size&&o||void 0,!e&&N(t)&&o>=0&&(l.get=function(i,s){return(i=b(this,i))>=0&&i<o?t.get(i+n,s):s}),l.L=function(i,s){var r=this;if(0===o)return 0;if(s)return this.cacheResult().T(i,s);var h=0,a=!0,l=0;return t.T((function(t,s){if(!a||!(a=h++<n))return l++,!1!==i(t,e?s:l-1,r)&&l!==o})),l},l.D=function(i,s){if(0!==o&&s)return this.cacheResult().P(i,s);if(0===o)return new Z(Q);var r=t.P(i,s),h=0,a=0;return new Z((function(){for(;h++<n;)r.next();if(++a>o)return{value:void 0,done:!0};var t=r.next();return e||1===i||t.done?t:J(i,a-1,0===i?void 0:t.value[1],t)}))},l}function Xt(t,i,s,e){var r=ei(t);return r.L=function(r,n){var h=this;if(n)return this.cacheResult().T(r,n);var o=!0,a=0;return t.T((function(t,n,l){if(!o||!(o=i.call(s,t,n,l)))return a++,r(t,e?n:a-1,h)})),a},r.D=function(r,n){var h=this;if(n)return this.cacheResult().P(r,n);var o=t.P(2,n),a=!0,l=0;return new Z((function(){var t,n,u;do{if((t=o.next()).done)return e||1===r?t:J(r,l++,0===r?void 0:t.value[1],t);var c=t.value;n=c[0],u=c[1],a&&(a=i.call(s,u,n,h))}while(a);return 2===r?t:J(r,n,u,t)}))},r}function Zt(t,i,s){var e=ei(t);return e.L=function(r,n){if(n)return this.cacheResult().T(r,n);var h=0,o=!1;return function t(a,l){a.T((function(n,a){return(!i||l<i)&&F(n)?t(n,l+1):(h++,!1===r(n,s?a:h-1,e)&&(o=!0)),!o}),n)}(t,0),h},e.D=function(e,r){if(r)return this.cacheResult().P(e,r);var n=t.P(e,r),h=[],o=0;return new Z((function(){for(;n;){var t=n.next();if(!1===t.done){var a=t.value;if(2===e&&(a=a[1]),i&&!(h.length<i)||!F(a))return s?t:J(e,o++,a,t);h.push(n),n=a.P(e,r)}else n=h.pop()}return{value:void 0,done:!0}}))},e}function Jt(t,i,s){i||(i=ni);var e=L(t),r=0,n=t.toSeq().map((function(i,e){return[e,i,r++,s?s(i,e,t):i]})).valueSeq().toArray();return n.sort((function(t,s){return i(t[3],s[3])||t[2]-s[2]})).forEach(e?function(t,i){n[i].length=2}:function(t,i){n[i]=t[1]}),e?nt(n):B(t)?ht(n):ot(n)}function Qt(t,i,s){if(i||(i=ni),s){var e=t.toSeq().map((function(i,e){return[i,s(i,e,t)]})).reduce((function(t,s){return Kt(i,t[1],s[1])?s:t}));return e&&e[0]}return t.reduce((function(t,s){return Kt(i,t,s)?s:t}))}function Kt(t,i,s){var e=t(s,i);return 0===e&&s!==i&&(null==s||s!=s)||e>0}function qt(t,i,s,e){var r=ei(t),n=new at(s).map((function(t){return t.size}));return r.size=e?n.max():n.min(),r.T=function(t,i){for(var s,e=this.P(1,i),r=0;!(s=e.next()).done&&!1!==t(s.value,r++,this););return r},r.D=function(t,r){var n=s.map((function(t){return t=E(t),tt(r?t.reverse():t)})),h=0,o=!1;return new Z((function(){var s;return o||(s=n.map((function(t){return t.next()})),o=e?s.every((function(t){return t.done})):s.some((function(t){return t.done}))),o?{value:void 0,done:!0}:J(t,h++,i.apply(null,s.map((function(t){return t.value}))))}))},r}function ti(t,i){return t===i?t:N(t)?i:t.constructor(i)}function ii(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function si(t){return L(t)?R:B(t)?O:z}function ei(t){return Object.create((L(t)?nt:B(t)?ht:ot).prototype)}function ri(){return this.G.cacheResult?(this.G.cacheResult(),this.size=this.G.size,this):rt.prototype.cacheResult.call(this)}function ni(t,i){return void 0===t&&void 0===i?0:void 0===t?1:void 0===i?-1:t>i?1:t<i?-1:0}function hi(t,i){i=i||0;for(var s=Math.max(0,t.length-i),e=new Array(s),r=0;r<s;r++)e[r]=t[r+i];return e}function oi(t,i){if(!t)throw new Error(i)}function ai(t){oi(t!==1/0,"Cannot perform this action with an infinite size.")}function li(t){if(et(t)&&"string"!=typeof t)return t;if(Y(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Nt.prototype.cacheResult=Vt.prototype.cacheResult=Gt.prototype.cacheResult=$t.prototype.cacheResult=ri;var ui=Object.prototype.toString;function ci(t){return"object"==typeof t&&(U(t)||Array.isArray(t)||function(t){if(!t||"object"!=typeof t||"[object Object]"!==ui.call(t))return!1;var i=Object.getPrototypeOf(t);if(null===i)return!0;for(var s=i,e=Object.getPrototypeOf(i);null!==e;)s=e,e=Object.getPrototypeOf(s);return s===i}(t))}function di(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(i){return JSON.stringify(t)}}function fi(t,i,s){return U(t)?t.get(i,s):function(t,i){return U(t)?t.has(i):ci(t)&&st.call(t,i)}(t,i)?"function"==typeof t.get?t.get(i):t[i]:s}function vi(t){if(Array.isArray(t))return hi(t);var i={};for(var s in t)st.call(t,s)&&(i[s]=t[s]);return i}function Ai(t,i,s,e){e||(e=s,s=void 0);var r=gi(U(t),t,li(i),0,s,e);return r===y?s:r}function gi(t,i,s,e,r,n){var h=i===y;if(e===s.length){var o=h?r:i,a=n(o);return a===o?i:a}if(!h&&!ci(i))throw new TypeError("Cannot update within non-data-structure value in path ["+s.slice(0,e).map(di)+"]: "+i);var l=s[e],u=h?y:fi(i,l,y),c=gi(u===y?t:U(u),u,s,e+1,r,n);return c===u?i:c===y?function(t,i){if(!ci(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(U(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(i)}if(!st.call(t,i))return t;var s=vi(t);return Array.isArray(s)?s.splice(i,1):delete s[i],s}(i,l):function(t,i,s){if(!ci(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(U(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(i,s)}if(st.call(t,i)&&s===t[i])return t;var e=vi(t);return e[i]=s,e}(h?t?Wi():{}:i,l,c)}function yi(t,i){return function(t,i,s){return Ai(t,i,y,(function(){return s}))}(this,t,i)}function pi(t){return function(t,i){return Ai(t,i,(function(){return y}))}(this,t)}function mi(t,i,s,e){return Ai(t,[i],s,e)}function Si(t,i,s){return 1===arguments.length?t(this):mi(this,t,i,s)}function bi(t,i,s){return Ai(this,t,i,s)}function xi(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return wi(this,t)}function Mi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return wi(this,i,t)}function wi(t,i,s){for(var e=[],r=0;r<i.length;r++){var n=R(i[r]);0!==n.size&&e.push(n)}return 0===e.length?t:0!==t.toSeq().size||t.U||1!==e.length?t.withMutations((function(t){for(var i=s?function(i,e){mi(t,e,y,(function(t){return t===y?i:s(t,i,e)}))}:function(i,s){t.set(s,i)},r=0;r<e.length;r++)e[r].forEach(i)})):t.constructor(e[0])}function _i(t,i,s){return ki(t,i,function(t){return function i(s,e,r){return ci(s)&&ci(e)&&(n=e,h=rt(s),o=rt(n),B(h)===B(o)&&L(h)===L(o))?ki(s,[e],i):t?t(s,e,r):e;var n,h,o}}(s))}function ki(t,i,s){if(!ci(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(U(t))return"function"==typeof s&&t.mergeWith?t.mergeWith.apply(t,[s].concat(i)):t.merge?t.merge.apply(t,i):t.concat.apply(t,i);for(var e=Array.isArray(t),r=t,n=e?O:R,h=e?function(i){r===t&&(r=vi(r)),r.push(i)}:function(i,e){var n=st.call(r,e),h=n&&s?s(r[e],i,e):i;n&&h===r[e]||(r===t&&(r=vi(r)),r[e]=h)},o=0;o<i.length;o++)n(i[o]).forEach(h);return r}function Ci(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return _i(this,t)}function Ti(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return _i(this,i,t)}function Fi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return Ai(this,t,Wi(),(function(t){return ki(t,i)}))}function Ii(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return Ai(this,t,Wi(),(function(t){return _i(t,i)}))}function Li(t){var i=this.asMutable();return t(i),i.wasAltered()?i.j(this.U):this}function Pi(){return this.U?this:this.j(new m)}function Bi(){return this.j()}function Di(){return this.Y}var Ei=function(t){function i(i){return null==i?Wi():yt(i)&&!Y(i)?i:Wi().withMutations((function(s){var e=t(i);ai(e.size),e.forEach((function(t,i){return s.set(i,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Wi().withMutations((function(i){for(var s=0;s<t.length;s+=2){if(s+1>=t.length)throw new Error("Missing value for key: "+t[s]);i.set(t[s],t[s+1])}}))},i.prototype.toString=function(){return this.F("Map {","}")},i.prototype.get=function(t,i){return this.H?this.H.get(0,void 0,t,i):i},i.prototype.set=function(t,i){return Xi(this,t,i)},i.prototype.remove=function(t){return Xi(this,t,y)},i.prototype.deleteAll=function(t){var i=E(t);return 0===i.size?this:this.withMutations((function(t){i.forEach((function(i){return t.remove(i)}))}))},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.H=null,this.W=void 0,this.Y=!0,this):Wi()},i.prototype.sort=function(t){return ms(Jt(this,t))},i.prototype.sortBy=function(t,i){return ms(Jt(this,i,t))},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){e.forEach((function(r,n){e.set(n,t.call(i,r,n,s))}))}))},i.prototype.P=function(t,i){return new Ui(this,t,i)},i.prototype.T=function(t,i){var s=this,e=0;return this.H&&this.H.iterate((function(i){return e++,t(i[1],i[0],s)}),i),e},i.prototype.j=function(t){return t===this.U?this:t?Hi(this.size,this.H,t,this.W):0===this.size?Wi():(this.U=t,this.Y=!1,this)},i}(R);Ei.isMap=yt;var Ri=Ei.prototype;Ri[gt]=!0,Ri[v]=Ri.remove,Ri.removeAll=Ri.deleteAll,Ri.setIn=yi,Ri.removeIn=Ri.deleteIn=pi,Ri.update=Si,Ri.updateIn=bi,Ri.merge=Ri.concat=xi,Ri.mergeWith=Mi,Ri.mergeDeep=Ci,Ri.mergeDeepWith=Ti,Ri.mergeIn=Fi,Ri.mergeDeepIn=Ii,Ri.withMutations=Li,Ri.wasAltered=Di,Ri.asImmutable=Bi,Ri["@@transducer/init"]=Ri.asMutable=Pi,Ri["@@transducer/step"]=function(t,i){return t.set(i[0],i[1])},Ri["@@transducer/result"]=function(t){return t.asImmutable()};var Oi=function(t,i){this.ownerID=t,this.entries=i};Oi.prototype.get=function(t,i,s,e){for(var r=this.entries,n=0,h=r.length;n<h;n++)if(St(s,r[n][0]))return r[n][1];return e},Oi.prototype.update=function(t,i,s,e,r,n,h){for(var o=r===y,a=this.entries,l=0,u=a.length;l<u&&!St(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===r:o)return this;if(p(h),(o||!c)&&p(n),!o||1!==a.length){if(!c&&!o&&a.length>=ts)return function(t,i,s,e){t||(t=new m);for(var r=new Gi(t,wt(s),[s,e]),n=0;n<i.length;n++){var h=i[n];r=r.update(t,0,void 0,h[0],h[1])}return r}(t,a,e,r);var d=t&&t===this.ownerID,f=d?a:hi(a);return c?o?l===u-1?f.pop():f[l]=f.pop():f[l]=[e,r]:f.push([e,r]),d?(this.entries=f,this):new Oi(t,f)}};var zi=function(t,i,s){this.ownerID=t,this.bitmap=i,this.nodes=s};zi.prototype.get=function(t,i,s,e){void 0===i&&(i=wt(s));var r=1<<((0===t?i:i>>>t)&g),n=this.bitmap;return n&r?this.nodes[Ki(n&r-1)].get(t+5,i,s,e):e},zi.prototype.update=function(t,i,s,e,r,n,h){void 0===s&&(s=wt(e));var o=(0===i?s:s>>>i)&g,a=1<<o,l=this.bitmap,u=!!(l&a);if(!u&&r===y)return this;var c=Ki(l&a-1),d=this.nodes,f=u?d[c]:void 0,v=Zi(f,t,i+5,s,e,r,n,h);if(v===f)return this;if(!u&&v&&d.length>=is)return function(t,i,s,e,r){for(var n=0,h=new Array(A),o=0;0!==s;o++,s>>>=1)h[o]=1&s?i[n++]:void 0;return h[e]=r,new Vi(t,n+1,h)}(t,d,l,o,v);if(u&&!v&&2===d.length&&Ji(d[1^c]))return d[1^c];if(u&&v&&1===d.length&&Ji(v))return v;var p=t&&t===this.ownerID,m=u?v?l:l^a:l|a,S=u?v?qi(d,c,v,p):function(t,i,s){var e=t.length-1;if(s&&i===e)return t.pop(),t;for(var r=new Array(e),n=0,h=0;h<e;h++)h===i&&(n=1),r[h]=t[h+n];return r}(d,c,p):function(t,i,s,e){var r=t.length+1;if(e&&i+1===r)return t[i]=s,t;for(var n=new Array(r),h=0,o=0;o<r;o++)o===i?(n[o]=s,h=-1):n[o]=t[o+h];return n}(d,c,v,p);return p?(this.bitmap=m,this.nodes=S,this):new zi(t,m,S)};var Vi=function(t,i,s){this.ownerID=t,this.count=i,this.nodes=s};Vi.prototype.get=function(t,i,s,e){void 0===i&&(i=wt(s));var r=(0===t?i:i>>>t)&g,n=this.nodes[r];return n?n.get(t+5,i,s,e):e},Vi.prototype.update=function(t,i,s,e,r,n,h){void 0===s&&(s=wt(e));var o=(0===i?s:s>>>i)&g,a=r===y,l=this.nodes,u=l[o];if(a&&!u)return this;var c=Zi(u,t,i+5,s,e,r,n,h);if(c===u)return this;var d=this.count;if(u){if(!c&&--d<ss)return function(t,i,s,e){for(var r=0,n=0,h=new Array(s),o=0,a=1,l=i.length;o<l;o++,a<<=1){var u=i[o];void 0!==u&&o!==e&&(r|=a,h[n++]=u)}return new zi(t,r,h)}(t,l,d,o)}else d++;var f=t&&t===this.ownerID,v=qi(l,o,c,f);return f?(this.count=d,this.nodes=v,this):new Vi(t,d,v)};var Ni=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entries=s};Ni.prototype.get=function(t,i,s,e){for(var r=this.entries,n=0,h=r.length;n<h;n++)if(St(s,r[n][0]))return r[n][1];return e},Ni.prototype.update=function(t,i,s,e,r,n,h){void 0===s&&(s=wt(e));var o=r===y;if(s!==this.keyHash)return o?this:(p(h),p(n),Qi(this,t,i,s,[e,r]));for(var a=this.entries,l=0,u=a.length;l<u&&!St(e,a[l][0]);l++);var c=l<u;if(c?a[l][1]===r:o)return this;if(p(h),(o||!c)&&p(n),o&&2===u)return new Gi(t,this.keyHash,a[1^l]);var d=t&&t===this.ownerID,f=d?a:hi(a);return c?o?l===u-1?f.pop():f[l]=f.pop():f[l]=[e,r]:f.push([e,r]),d?(this.entries=f,this):new Ni(t,this.keyHash,f)};var Gi=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entry=s};Gi.prototype.get=function(t,i,s,e){return St(s,this.entry[0])?this.entry[1]:e},Gi.prototype.update=function(t,i,s,e,r,n,h){var o=r===y,a=St(e,this.entry[0]);return(a?r===this.entry[1]:o)?this:(p(h),o?void p(n):a?t&&t===this.ownerID?(this.entry[1]=r,this):new Gi(t,this.keyHash,[e,r]):(p(n),Qi(this,t,i,wt(e),[e,r])))},Oi.prototype.iterate=Ni.prototype.iterate=function(t,i){for(var s=this.entries,e=0,r=s.length-1;e<=r;e++)if(!1===t(s[i?r-e:e]))return!1},zi.prototype.iterate=Vi.prototype.iterate=function(t,i){for(var s=this.nodes,e=0,r=s.length-1;e<=r;e++){var n=s[i?r-e:e];if(n&&!1===n.iterate(t,i))return!1}},Gi.prototype.iterate=function(t,i){return t(this.entry)};var $i,Ui=function(t){function i(t,i,s){this.X=i,this.Z=s,this.J=t.H&&Yi(t.H)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.next=function(){for(var t=this.X,i=this.J;i;){var s=i.node,e=i.index++,r=void 0;if(s.entry){if(0===e)return ji(t,s.entry)}else if(s.entries){if(e<=(r=s.entries.length-1))return ji(t,s.entries[this.Z?r-e:e])}else if(e<=(r=s.nodes.length-1)){var n=s.nodes[this.Z?r-e:e];if(n){if(n.entry)return ji(t,n.entry);i=this.J=Yi(n,i)}continue}i=this.J=this.J.K}return{value:void 0,done:!0}},i}(Z);function ji(t,i){return J(t,i[0],i[1])}function Yi(t,i){return{node:t,index:0,K:i}}function Hi(t,i,s,e){var r=Object.create(Ri);return r.size=t,r.H=i,r.U=s,r.W=e,r.Y=!1,r}function Wi(){return $i||($i=Hi(0))}function Xi(t,i,s){var e,r;if(t.H){var n={value:!1},h={value:!1};if(e=Zi(t.H,t.U,0,void 0,i,s,n,h),!h.value)return t;r=t.size+(n.value?s===y?-1:1:0)}else{if(s===y)return t;r=1,e=new Oi(t.U,[[i,s]])}return t.U?(t.size=r,t.H=e,t.W=void 0,t.Y=!0,t):e?Hi(r,e):Wi()}function Zi(t,i,s,e,r,n,h,o){return t?t.update(i,s,e,r,n,h,o):n===y?t:(p(o),p(h),new Gi(i,e,[r,n]))}function Ji(t){return t.constructor===Gi||t.constructor===Ni}function Qi(t,i,s,e,r){if(t.keyHash===e)return new Ni(i,e,[t.entry,r]);var n,h=(0===s?t.keyHash:t.keyHash>>>s)&g,o=(0===s?e:e>>>s)&g,a=h===o?[Qi(t,i,s+5,e,r)]:(n=new Gi(i,e,r),h<o?[t,n]:[n,t]);return new zi(i,1<<h|1<<o,a)}function Ki(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function qi(t,i,s,e){var r=e?t:hi(t);return r[i]=s,r}var ts=8,is=16,ss=8,es="@@__IMMUTABLE_LIST__@@";function rs(t){return Boolean(t&&t[es])}var ns=function(t){function i(i){var s=ds();if(null==i)return s;if(rs(i))return i;var e=t(i),r=e.size;return 0===r?s:(ai(r),r>0&&r<A?cs(0,r,5,null,new os(e.toArray())):s.withMutations((function(t){t.setSize(r),e.forEach((function(i,s){return t.set(s,i)}))})))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.F("List [","]")},i.prototype.get=function(t,i){if((t=b(this,t))>=0&&t<this.size){var s=As(this,t+=this.q);return s&&s.array[t&g]}return i},i.prototype.set=function(t,i){return function(t,i,s){if((i=b(t,i))!=i)return t;if(i>=t.size||i<0)return t.withMutations((function(t){i<0?gs(t,i).set(0,s):gs(t,0,i+1).set(i,s)}));i+=t.q;var e=t.tt,r=t.H,n={value:!1};return i>=ys(t.it)?e=fs(e,t.U,0,i,s,n):r=fs(r,t.U,t.st,i,s,n),n.value?t.U?(t.H=r,t.tt=e,t.W=void 0,t.Y=!0,t):cs(t.q,t.it,t.st,r,e):t}(this,t,i)},i.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},i.prototype.insert=function(t,i){return this.splice(t,0,i)},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=this.q=this.it=0,this.st=5,this.H=this.tt=this.W=void 0,this.Y=!0,this):ds()},i.prototype.push=function(){var t=arguments,i=this.size;return this.withMutations((function(s){gs(s,0,i+t.length);for(var e=0;e<t.length;e++)s.set(i+e,t[e])}))},i.prototype.pop=function(){return gs(this,0,-1)},i.prototype.unshift=function(){var t=arguments;return this.withMutations((function(i){gs(i,-t.length);for(var s=0;s<t.length;s++)i.set(s,t[s])}))},i.prototype.shift=function(){return gs(this,1)},i.prototype.concat=function(){for(var i=arguments,s=[],e=0;e<arguments.length;e++){var r=i[e],n=t("string"!=typeof r&&K(r)?r:[r]);0!==n.size&&s.push(n)}return 0===s.length?this:0!==this.size||this.U||1!==s.length?this.withMutations((function(t){s.forEach((function(i){return i.forEach((function(i){return t.push(i)}))}))})):this.constructor(s[0])},i.prototype.setSize=function(t){return gs(this,0,t)},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){for(var r=0;r<s.size;r++)e.set(r,t.call(i,e.get(r),r,s))}))},i.prototype.slice=function(t,i){var s=this.size;return M(t,i,s)?this:gs(this,w(t,s),_(i,s))},i.prototype.P=function(t,i){var s=i?this.size:0,e=us(this,i);return new Z((function(){var r=e();return r===ls?{value:void 0,done:!0}:J(t,i?--s:s++,r)}))},i.prototype.T=function(t,i){for(var s,e=i?this.size:0,r=us(this,i);(s=r())!==ls&&!1!==t(s,i?--e:e++,this););return e},i.prototype.j=function(t){return t===this.U?this:t?cs(this.q,this.it,this.st,this.H,this.tt,t,this.W):0===this.size?ds():(this.U=t,this.Y=!1,this)},i}(O);ns.isList=rs;var hs=ns.prototype;hs[es]=!0,hs[v]=hs.remove,hs.merge=hs.concat,hs.setIn=yi,hs.deleteIn=hs.removeIn=pi,hs.update=Si,hs.updateIn=bi,hs.mergeIn=Fi,hs.mergeDeepIn=Ii,hs.withMutations=Li,hs.wasAltered=Di,hs.asImmutable=Bi,hs["@@transducer/init"]=hs.asMutable=Pi,hs["@@transducer/step"]=function(t,i){return t.push(i)},hs["@@transducer/result"]=function(t){return t.asImmutable()};var os=function(t,i){this.array=t,this.ownerID=i};os.prototype.removeBefore=function(t,i,s){if(s===i?1<<i:0===this.array.length)return this;var e=s>>>i&g;if(e>=this.array.length)return new os([],t);var r,n=0===e;if(i>0){var h=this.array[e];if((r=h&&h.removeBefore(t,i-5,s))===h&&n)return this}if(n&&!r)return this;var o=vs(this,t);if(!n)for(var a=0;a<e;a++)o.array[a]=void 0;return r&&(o.array[e]=r),o},os.prototype.removeAfter=function(t,i,s){if(s===(i?1<<i:0)||0===this.array.length)return this;var e,r=s-1>>>i&g;if(r>=this.array.length)return this;if(i>0){var n=this.array[r];if((e=n&&n.removeAfter(t,i-5,s))===n&&r===this.array.length-1)return this}var h=vs(this,t);return h.array.splice(r+1),e&&(h.array[r]=e),h};var as,ls={};function us(t,i){var s=t.q,e=t.it,r=ys(e),n=t.tt;return function t(h,o,a){return 0===o?function(t,h){var o=h===r?n&&n.array:t&&t.array,a=h>s?0:s-h,l=e-h;return l>A&&(l=A),function(){if(a===l)return ls;var t=i?--l:a++;return o&&o[t]}}(h,a):function(r,n,h){var o,a=r&&r.array,l=h>s?0:s-h>>n,u=1+(e-h>>n);return u>A&&(u=A),function(){for(;;){if(o){var s=o();if(s!==ls)return s;o=null}if(l===u)return ls;var e=i?--u:l++;o=t(a&&a[e],n-5,h+(e<<n))}}}(h,o,a)}(t.H,t.st,0)}function cs(t,i,s,e,r,n,h){var o=Object.create(hs);return o.size=i-t,o.q=t,o.it=i,o.st=s,o.H=e,o.tt=r,o.U=n,o.W=h,o.Y=!1,o}function ds(){return as||(as=cs(0,0,5))}function fs(t,i,s,e,r,n){var h,o=e>>>s&g,a=t&&o<t.array.length;if(!a&&void 0===r)return t;if(s>0){var l=t&&t.array[o],u=fs(l,i,s-5,e,r,n);return u===l?t:((h=vs(t,i)).array[o]=u,h)}return a&&t.array[o]===r?t:(n&&p(n),h=vs(t,i),void 0===r&&o===h.array.length-1?h.array.pop():h.array[o]=r,h)}function vs(t,i){return i&&t&&i===t.ownerID?t:new os(t?t.array.slice():[],i)}function As(t,i){if(i>=ys(t.it))return t.tt;if(i<1<<t.st+5){for(var s=t.H,e=t.st;s&&e>0;)s=s.array[i>>>e&g],e-=5;return s}}function gs(t,i,s){void 0!==i&&(i|=0),void 0!==s&&(s|=0);var e=t.U||new m,r=t.q,n=t.it,h=r+i,o=void 0===s?n:s<0?n+s:r+s;if(h===r&&o===n)return t;if(h>=o)return t.clear();for(var a=t.st,l=t.H,u=0;h+u<0;)l=new os(l&&l.array.length?[void 0,l]:[],e),u+=1<<(a+=5);u&&(h+=u,r+=u,o+=u,n+=u);for(var c=ys(n),d=ys(o);d>=1<<a+5;)l=new os(l&&l.array.length?[l]:[],e),a+=5;var f=t.tt,v=d<c?As(t,o-1):d>c?new os([],e):f;if(f&&d>c&&h<n&&f.array.length){for(var A=l=vs(l,e),y=a;y>5;y-=5){var p=c>>>y&g;A=A.array[p]=vs(A.array[p],e)}A.array[c>>>5&g]=f}if(o<n&&(v=v&&v.removeAfter(e,0,o)),h>=d)h-=d,o-=d,a=5,l=null,v=v&&v.removeBefore(e,0,h);else if(h>r||d<c){for(u=0;l;){var S=h>>>a&g;if(S!==d>>>a&g)break;S&&(u+=(1<<a)*S),a-=5,l=l.array[S]}l&&h>r&&(l=l.removeBefore(e,a,h-u)),l&&d<c&&(l=l.removeAfter(e,a,d-u)),u&&(h-=u,o-=u)}return t.U?(t.size=o-h,t.q=h,t.it=o,t.st=a,t.H=l,t.tt=v,t.W=void 0,t.Y=!0,t):cs(h,o,a,l,v)}function ys(t){return t<A?0:t-1>>>5<<5}var ps,ms=function(t){function i(t){return null==t?bs():pt(t)?t:bs().withMutations((function(i){var s=R(t);ai(s.size),s.forEach((function(t,s){return i.set(s,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.F("OrderedMap {","}")},i.prototype.get=function(t,i){var s=this.et.get(t);return void 0!==s?this.rt.get(s)[1]:i},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.et.clear(),this.rt.clear(),this.Y=!0,this):bs()},i.prototype.set=function(t,i){return xs(this,t,i)},i.prototype.remove=function(t){return xs(this,t,y)},i.prototype.T=function(t,i){var s=this;return this.rt.T((function(i){return i&&t(i[1],i[0],s)}),i)},i.prototype.P=function(t,i){return this.rt.fromEntrySeq().P(t,i)},i.prototype.j=function(t){if(t===this.U)return this;var i=this.et.j(t),s=this.rt.j(t);return t?Ss(i,s,t,this.W):0===this.size?bs():(this.U=t,this.Y=!1,this.et=i,this.rt=s,this)},i}(Ei);function Ss(t,i,s,e){var r=Object.create(ms.prototype);return r.size=t?t.size:0,r.et=t,r.rt=i,r.U=s,r.W=e,r.Y=!1,r}function bs(){return ps||(ps=Ss(Wi(),ds()))}function xs(t,i,s){var e,r,n=t.et,h=t.rt,o=n.get(i),a=void 0!==o;if(s===y){if(!a)return t;h.size>=A&&h.size>=2*n.size?(e=(r=h.filter((function(t,i){return void 0!==t&&o!==i}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.U&&(e.U=r.U=t.U)):(e=n.remove(i),r=o===h.size-1?h.pop():h.set(o,void 0))}else if(a){if(s===h.get(o)[1])return t;e=n,r=h.set(o,[i,s])}else e=n.set(i,h.size),r=h.set(h.size,[i,s]);return t.U?(t.size=e.size,t.et=e,t.rt=r,t.W=void 0,t.Y=!0,t):Ss(e,r)}ms.isOrderedMap=pt,ms.prototype[j]=!0,ms.prototype[v]=ms.prototype.remove;var Ms="@@__IMMUTABLE_STACK__@@";function ws(t){return Boolean(t&&t[Ms])}var _s=function(t){function i(t){return null==t?Fs():ws(t)?t:Fs().pushAll(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.F("Stack [","]")},i.prototype.get=function(t,i){var s=this.nt;for(t=b(this,t);s&&t--;)s=s.next;return s?s.value:i},i.prototype.peek=function(){return this.nt&&this.nt.value},i.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var i=this.size+arguments.length,s=this.nt,e=arguments.length-1;e>=0;e--)s={value:t[e],next:s};return this.U?(this.size=i,this.nt=s,this.W=void 0,this.Y=!0,this):Ts(i,s)},i.prototype.pushAll=function(i){if(0===(i=t(i)).size)return this;if(0===this.size&&ws(i))return i;ai(i.size);var s=this.size,e=this.nt;return i.T((function(t){s++,e={value:t,next:e}}),!0),this.U?(this.size=s,this.nt=e,this.W=void 0,this.Y=!0,this):Ts(s,e)},i.prototype.pop=function(){return this.slice(1)},i.prototype.clear=function(){return 0===this.size?this:this.U?(this.size=0,this.nt=void 0,this.W=void 0,this.Y=!0,this):Fs()},i.prototype.slice=function(i,s){if(M(i,s,this.size))return this;var e=w(i,this.size);if(_(s,this.size)!==this.size)return t.prototype.slice.call(this,i,s);for(var r=this.size-e,n=this.nt;e--;)n=n.next;return this.U?(this.size=r,this.nt=n,this.W=void 0,this.Y=!0,this):Ts(r,n)},i.prototype.j=function(t){return t===this.U?this:t?Ts(this.size,this.nt,t,this.W):0===this.size?Fs():(this.U=t,this.Y=!1,this)},i.prototype.T=function(t,i){var s=this;if(i)return new at(this.toArray()).T((function(i,e){return t(i,e,s)}),i);for(var e=0,r=this.nt;r&&!1!==t(r.value,e++,this);)r=r.next;return e},i.prototype.P=function(t,i){if(i)return new at(this.toArray()).P(t,i);var s=0,e=this.nt;return new Z((function(){if(e){var i=e.value;return e=e.next,J(t,s++,i)}return{value:void 0,done:!0}}))},i}(O);_s.isStack=ws;var ks,Cs=_s.prototype;function Ts(t,i,s,e){var r=Object.create(Cs);return r.size=t,r.nt=i,r.U=s,r.W=e,r.Y=!1,r}function Fs(){return ks||(ks=Ts(0))}Cs[Ms]=!0,Cs.shift=Cs.pop,Cs.unshift=Cs.push,Cs.unshiftAll=Cs.pushAll,Cs.withMutations=Li,Cs.wasAltered=Di,Cs.asImmutable=Bi,Cs["@@transducer/init"]=Cs.asMutable=Pi,Cs["@@transducer/step"]=function(t,i){return t.unshift(i)},Cs["@@transducer/result"]=function(t){return t.asImmutable()};var Is="@@__IMMUTABLE_SET__@@";function Ls(t){return Boolean(t&&t[Is])}function Ps(t){return Ls(t)&&Y(t)}function Bs(t,i){if(t===i)return!0;if(!F(i)||void 0!==t.size&&void 0!==i.size&&t.size!==i.size||void 0!==t.W&&void 0!==i.W&&t.W!==i.W||L(t)!==L(i)||B(t)!==B(i)||Y(t)!==Y(i))return!1;if(0===t.size&&0===i.size)return!0;var s=!D(t);if(Y(t)){var e=t.entries();return i.every((function(t,i){var r=e.next().value;return r&&St(r[1],t)&&(s||St(r[0],i))}))&&e.next().done}var r=!1;if(void 0===t.size)if(void 0===i.size)"function"==typeof t.cacheResult&&t.cacheResult();else{r=!0;var n=t;t=i,i=n}var h=!0,o=i.T((function(i,e){if(s?!t.has(i):r?!St(i,t.get(e,y)):!St(t.get(e,y),i))return h=!1,!1}));return h&&t.size===o}function Ds(t,i){var s=function(s){t.prototype[s]=i[s]};return Object.keys(i).forEach(s),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(s),t}function Es(t){if(!t||"object"!=typeof t)return t;if(!F(t)){if(!ci(t))return t;t=rt(t)}if(L(t)){var i={};return t.T((function(t,s){i[s]=Es(t)})),i}var s=[];return t.T((function(t){s.push(Es(t))})),s}var Rs=function(t){function i(i){return null==i?Gs():Ls(i)&&!Y(i)?i:Gs().withMutations((function(s){var e=t(i);ai(e.size),e.forEach((function(t){return s.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(R(t).keySeq())},i.intersect=function(t){return(t=E(t).toArray()).length?zs.intersect.apply(i(t.pop()),t):Gs()},i.union=function(t){return(t=E(t).toArray()).length?zs.union.apply(i(t.pop()),t):Gs()},i.prototype.toString=function(){return this.F("Set {","}")},i.prototype.has=function(t){return this.et.has(t)},i.prototype.add=function(t){return Vs(this,this.et.set(t,t))},i.prototype.remove=function(t){return Vs(this,this.et.remove(t))},i.prototype.clear=function(){return Vs(this,this.et.clear())},i.prototype.map=function(t,i){var s=this,e=!1,r=Vs(this,this.et.mapEntries((function(r){var n=r[1],h=t.call(i,n,n,s);return h!==n&&(e=!0),[h,h]}),i));return e?r:this},i.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return 0===(i=i.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.U||1!==i.length?this.withMutations((function(s){for(var e=0;e<i.length;e++)t(i[e]).forEach((function(t){return s.add(t)}))})):this.constructor(i[0])},i.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.every((function(i){return i.includes(t)}))||e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.some((function(i){return i.includes(t)}))&&e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.sort=function(t){return ne(Jt(this,t))},i.prototype.sortBy=function(t,i){return ne(Jt(this,i,t))},i.prototype.wasAltered=function(){return this.et.wasAltered()},i.prototype.T=function(t,i){var s=this;return this.et.T((function(i){return t(i,i,s)}),i)},i.prototype.P=function(t,i){return this.et.P(t,i)},i.prototype.j=function(t){if(t===this.U)return this;var i=this.et.j(t);return t?this.ht(i,t):0===this.size?this.ot():(this.U=t,this.et=i,this)},i}(z);Rs.isSet=Ls;var Os,zs=Rs.prototype;function Vs(t,i){return t.U?(t.size=i.size,t.et=i,t):i===t.et?t:0===i.size?t.ot():t.ht(i)}function Ns(t,i){var s=Object.create(zs);return s.size=t?t.size:0,s.et=t,s.U=i,s}function Gs(){return Os||(Os=Ns(Wi()))}zs[Is]=!0,zs[v]=zs.remove,zs.merge=zs.concat=zs.union,zs.withMutations=Li,zs.asImmutable=Bi,zs["@@transducer/init"]=zs.asMutable=Pi,zs["@@transducer/step"]=function(t,i){return t.add(i)},zs["@@transducer/result"]=function(t){return t.asImmutable()},zs.ot=Gs,zs.ht=Ns;var $s,Us=function(t){function i(t,s,e){if(!(this instanceof i))return new i(t,s,e);if(oi(0!==e,"Cannot step a Range by 0"),t=t||0,void 0===s&&(s=1/0),e=void 0===e?1:Math.abs(e),s<t&&(e=-e),this.ut=t,this.ct=s,this.dt=e,this.size=Math.max(0,Math.ceil((s-t)/e-1)+1),0===this.size){if($s)return $s;$s=this}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this.ut+"..."+this.ct+(1!==this.dt?" by "+this.dt:"")+" ]"},i.prototype.get=function(t,i){return this.has(t)?this.ut+b(this,t)*this.dt:i},i.prototype.includes=function(t){var i=(t-this.ut)/this.dt;return i>=0&&i<this.size&&i===Math.floor(i)},i.prototype.slice=function(t,s){return M(t,s,this.size)?this:(t=w(t,this.size),(s=_(s,this.size))<=t?new i(0,0):new i(this.get(t,this.ct),this.get(s,this.ct),this.dt))},i.prototype.indexOf=function(t){var i=t-this.ut;if(i%this.dt==0){var s=i/this.dt;if(s>=0&&s<this.size)return s}return-1},i.prototype.lastIndexOf=function(t){return this.indexOf(t)},i.prototype.T=function(t,i){for(var s=this.size,e=this.dt,r=i?this.ut+(s-1)*e:this.ut,n=0;n!==s&&!1!==t(r,i?s-++n:n++,this);)r+=i?-e:e;return n},i.prototype.P=function(t,i){var s=this.size,e=this.dt,r=i?this.ut+(s-1)*e:this.ut,n=0;return new Z((function(){if(n===s)return{value:void 0,done:!0};var h=r;return r+=i?-e:e,J(t,i?s-++n:n++,h)}))},i.prototype.equals=function(t){return t instanceof i?this.ut===t.ut&&this.ct===t.ct&&this.dt===t.dt:Bs(this,t)},i}(ht);function js(t,i,s){for(var e=li(i),r=0;r!==e.length;)if((t=fi(t,e[r++],y))===y)return s;return t}function Ys(t,i){return js(this,t,i)}function Hs(){ai(this.size);var t={};return this.T((function(i,s){t[s]=i})),t}E.isIterable=F,E.isKeyed=L,E.isIndexed=B,E.isAssociative=D,E.isOrdered=Y,E.Iterator=Z,Ds(E,{toArray:function(){ai(this.size);var t=new Array(this.size||0),i=L(this),s=0;return this.T((function(e,r){t[s++]=i?[r,e]:e})),t},toIndexedSeq:function(){return new Nt(this)},toJS:function(){return Es(this)},toKeyedSeq:function(){return new Vt(this,!0)},toMap:function(){return Ei(this.toKeyedSeq())},toObject:Hs,toOrderedMap:function(){return ms(this.toKeyedSeq())},toOrderedSet:function(){return ne(L(this)?this.valueSeq():this)},toSet:function(){return Rs(L(this)?this.valueSeq():this)},toSetSeq:function(){return new Gt(this)},toSeq:function(){return B(this)?this.toIndexedSeq():L(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _s(L(this)?this.valueSeq():this)},toList:function(){return ns(L(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},F:function(t,i){return 0===this.size?t+i:t+" "+this.toSeq().map(this.ft).join(", ")+" "+i},concat:function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return ti(this,function(t,i){var s=L(t),e=[t].concat(i).map((function(t){return F(t)?s&&(t=R(t)):t=s?ft(t):vt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===e.length)return t;if(1===e.length){var r=e[0];if(r===t||s&&L(r)||B(t)&&B(r))return r}var n=new at(e);return s?n=n.toKeyedSeq():B(t)||(n=n.toSetSeq()),(n=n.flatten(!0)).size=e.reduce((function(t,i){if(void 0!==t){var s=i.size;if(void 0!==s)return t+s}}),0),n}(this,t))},includes:function(t){return this.some((function(i){return St(i,t)}))},entries:function(){return this.P(2)},every:function(t,i){ai(this.size);var s=!0;return this.T((function(e,r,n){if(!t.call(i,e,r,n))return s=!1,!1})),s},filter:function(t,i){return ti(this,Ht(this,t,i,!0))},find:function(t,i,s){var e=this.findEntry(t,i);return e?e[1]:s},forEach:function(t,i){return ai(this.size),this.T(i?t.bind(i):t)},join:function(t){ai(this.size),t=void 0!==t?""+t:",";var i="",s=!0;return this.T((function(e){s?s=!1:i+=t,i+=null!=e?e.toString():""})),i},keys:function(){return this.P(0)},map:function(t,i){return ti(this,jt(this,t,i))},reduce:function(t,i,s){return Qs(this,t,i,s,arguments.length<2,!1)},reduceRight:function(t,i,s){return Qs(this,t,i,s,arguments.length<2,!0)},reverse:function(){return ti(this,Yt(this,!0))},slice:function(t,i){return ti(this,Wt(this,t,i,!0))},some:function(t,i){return!this.every(te(t),i)},sort:function(t){return ti(this,Jt(this,t))},values:function(){return this.P(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,i){return S(t?this.toSeq().filter(t,i):this)},countBy:function(t,i){return function(t,i,s){var e=Ei().asMutable();return t.T((function(r,n){e.update(i.call(s,r,n,t),0,(function(t){return t+1}))})),e.asImmutable()}(this,t,i)},equals:function(t){return Bs(this,t)},entrySeq:function(){var t=this;if(t.I)return new at(t.I);var i=t.toSeq().map(qs).toIndexedSeq();return i.fromEntrySeq=function(){return t.toSeq()},i},filterNot:function(t,i){return this.filter(te(t),i)},findEntry:function(t,i,s){var e=s;return this.T((function(s,r,n){if(t.call(i,s,r,n))return e=[r,s],!1})),e},findKey:function(t,i){var s=this.findEntry(t,i);return s&&s[0]},findLast:function(t,i,s){return this.toKeyedSeq().reverse().find(t,i,s)},findLastEntry:function(t,i,s){return this.toKeyedSeq().reverse().findEntry(t,i,s)},findLastKey:function(t,i){return this.toKeyedSeq().reverse().findKey(t,i)},first:function(t){return this.find(x,null,t)},flatMap:function(t,i){return ti(this,function(t,i,s){var e=si(t);return t.toSeq().map((function(r,n){return e(i.call(s,r,n,t))})).flatten(!0)}(this,t,i))},flatten:function(t){return ti(this,Zt(this,t,!0))},fromEntrySeq:function(){return new $t(this)},get:function(t,i){return this.find((function(i,s){return St(s,t)}),void 0,i)},getIn:Ys,groupBy:function(t,i){return function(t,i,s){var e=L(t),r=(Y(t)?ms():Ei()).asMutable();t.T((function(n,h){r.update(i.call(s,n,h,t),(function(t){return(t=t||[]).push(e?[h,n]:n),t}))}));var n=si(t);return r.map((function(i){return ti(t,n(i))})).asImmutable()}(this,t,i)},has:function(t){return this.get(t,y)!==y},hasIn:function(t){return js(this,t,y)!==y},isSubset:function(t){return t="function"==typeof t.includes?t:E(t),this.every((function(i){return t.includes(i)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:E(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(i){return St(i,t)}))},keySeq:function(){return this.toSeq().map(Ks).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Qt(this,t)},maxBy:function(t,i){return Qt(this,i,t)},min:function(t){return Qt(this,t?ie(t):ee)},minBy:function(t,i){return Qt(this,i?ie(i):ee,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,i){return ti(this,Xt(this,t,i,!0))},skipUntil:function(t,i){return this.skipWhile(te(t),i)},sortBy:function(t,i){return ti(this,Jt(this,i,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,i){return ti(this,function(t,i,s){var e=ei(t);return e.L=function(e,r){var n=this;if(r)return this.cacheResult().T(e,r);var h=0;return t.T((function(t,r,o){return i.call(s,t,r,o)&&++h&&e(t,r,n)})),h},e.D=function(e,r){var n=this;if(r)return this.cacheResult().P(e,r);var h=t.P(2,r),o=!0;return new Z((function(){if(!o)return{value:void 0,done:!0};var t=h.next();if(t.done)return t;var r=t.value,a=r[0],l=r[1];return i.call(s,l,a,n)?2===e?t:J(e,a,l,t):(o=!1,{value:void 0,done:!0})}))},e}(this,t,i))},takeUntil:function(t,i){return this.takeWhile(te(t),i)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.W||(this.W=function(t){if(t.size===1/0)return 0;var i=Y(t),s=L(t),e=i?1:0;return function(t,i){return i=bt(i,3432918353),i=bt(i<<15|i>>>-15,461845907),i=bt(i<<13|i>>>-13,5),i=bt((i=i+3864292196^t)^i>>>16,2246822507),i=xt((i=bt(i^i>>>13,3266489909))^i>>>16)}(t.T(s?i?function(t,i){e=31*e+re(wt(t),wt(i))|0}:function(t,i){e=e+re(wt(t),wt(i))|0}:i?function(t){e=31*e+wt(t)|0}:function(t){e=e+wt(t)|0}),e)}(this))}});var Ws=E.prototype;Ws[T]=!0,Ws[X]=Ws.values,Ws.toJSON=Ws.toArray,Ws.ft=di,Ws.inspect=Ws.toSource=function(){return this.toString()},Ws.chain=Ws.flatMap,Ws.contains=Ws.includes,Ds(R,{flip:function(){return ti(this,Ut(this))},mapEntries:function(t,i){var s=this,e=0;return ti(this,this.toSeq().map((function(r,n){return t.call(i,[n,r],e++,s)})).fromEntrySeq())},mapKeys:function(t,i){var s=this;return ti(this,this.toSeq().flip().map((function(e,r){return t.call(i,e,r,s)})).flip())}});var Xs=R.prototype;Xs[I]=!0,Xs[X]=Ws.entries,Xs.toJSON=Hs,Xs.ft=function(t,i){return di(i)+": "+di(t)},Ds(O,{toKeyedSeq:function(){return new Vt(this,!1)},filter:function(t,i){return ti(this,Ht(this,t,i,!1))},findIndex:function(t,i){var s=this.findEntry(t,i);return s?s[0]:-1},indexOf:function(t){var i=this.keyOf(t);return void 0===i?-1:i},lastIndexOf:function(t){var i=this.lastKeyOf(t);return void 0===i?-1:i},reverse:function(){return ti(this,Yt(this,!1))},slice:function(t,i){return ti(this,Wt(this,t,i,!1))},splice:function(t,i){var s=arguments.length;if(i=Math.max(i||0,0),0===s||2===s&&!i)return this;t=w(t,t<0?this.count():this.size);var e=this.slice(0,t);return ti(this,1===s?e:e.concat(hi(arguments,2),this.slice(t+i)))},findLastIndex:function(t,i){var s=this.findLastEntry(t,i);return s?s[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return ti(this,Zt(this,t,!1))},get:function(t,i){return(t=b(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?i:this.find((function(i,s){return s===t}),void 0,i)},has:function(t){return(t=b(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ti(this,function(t,i){var s=ei(t);return s.size=t.size&&2*t.size-1,s.L=function(s,e){var r=this,n=0;return t.T((function(t){return(!n||!1!==s(i,n++,r))&&!1!==s(t,n++,r)}),e),n},s.D=function(s,e){var r,n=t.P(1,e),h=0;return new Z((function(){return(!r||h%2)&&(r=n.next()).done?r:h%2?J(s,h++,i):J(s,h++,r.value,r)}))},s}(this,t))},interleave:function(){var t=[this].concat(hi(arguments)),i=qt(this.toSeq(),ht.of,t),s=i.flatten(!0);return i.size&&(s.size=i.size*t.length),ti(this,s)},keySeq:function(){return Us(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,i){return ti(this,Xt(this,t,i,!1))},zip:function(){return ti(this,qt(this,se,[this].concat(hi(arguments))))},zipAll:function(){return ti(this,qt(this,se,[this].concat(hi(arguments)),!0))},zipWith:function(t){var i=hi(arguments);return i[0]=this,ti(this,qt(this,t,i))}});var Zs=O.prototype;Zs[P]=!0,Zs[j]=!0,Ds(z,{get:function(t,i){return this.has(t)?t:i},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Js=z.prototype;function Qs(t,i,s,e,r,n){return ai(t.size),t.T((function(t,n,h){r?(r=!1,s=t):s=i.call(e,s,t,n,h)}),n),s}function Ks(t,i){return i}function qs(t,i){return[i,t]}function te(t){return function(){return!t.apply(this,arguments)}}function ie(t){return function(){return-t.apply(this,arguments)}}function se(){return hi(arguments)}function ee(t,i){return t<i?1:t>i?-1:0}function re(t,i){return t^i+2654435769+(t<<6)+(t>>2)}Js.has=Ws.includes,Js.contains=Js.includes,Js.keys=Js.values,Ds(nt,Xs),Ds(ht,Zs),Ds(ot,Js);var ne=function(t){function i(t){return null==t?le():Ps(t)?t:le().withMutations((function(i){var s=z(t);ai(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(R(t).keySeq())},i.prototype.toString=function(){return this.F("OrderedSet {","}")},i}(Rs);ne.isOrderedSet=Ps;var he,oe=ne.prototype;function ae(t,i){var s=Object.create(oe);return s.size=t?t.size:0,s.et=t,s.U=i,s}function le(){return he||(he=ae(bs()))}oe[j]=!0,oe.zip=Zs.zip,oe.zipWith=Zs.zipWith,oe.zipAll=Zs.zipAll,oe.ot=le,oe.ht=ae;var ue=function(t,i){var s;!function(t){if($(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(U(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var e=function(n){var h=this;if(n instanceof e)return n;if(!(this instanceof e))return new e(n);if(!s){s=!0;var o=Object.keys(t),a=r.vt={};r.At=i,r.V=o,r.yt=t;for(var l=0;l<o.length;l++){var u=o[l];a[u]=l,r[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+fe(this)+' with property "'+u+'" since that property name is part of the Record API.'):Ae(r,u)}}return this.U=void 0,this.St=ns().withMutations((function(t){t.setSize(h.V.length),R(n).forEach((function(i,s){t.set(h.vt[s],i===h.yt[s]?void 0:i)}))})),this},r=e.prototype=Object.create(ce);return r.constructor=e,i&&(e.displayName=i),e};ue.prototype.toString=function(){for(var t,i=fe(this)+" { ",s=this.V,e=0,r=s.length;e!==r;e++)i+=(e?", ":"")+(t=s[e])+": "+di(this.get(t));return i+" }"},ue.prototype.equals=function(t){return this===t||t&&ve(this).equals(ve(t))},ue.prototype.hashCode=function(){return ve(this).hashCode()},ue.prototype.has=function(t){return this.vt.hasOwnProperty(t)},ue.prototype.get=function(t,i){if(!this.has(t))return i;var s=this.vt[t],e=this.St.get(s);return void 0===e?this.yt[t]:e},ue.prototype.set=function(t,i){if(this.has(t)){var s=this.St.set(this.vt[t],i===this.yt[t]?void 0:i);if(s!==this.St&&!this.U)return de(this,s)}return this},ue.prototype.remove=function(t){return this.set(t)},ue.prototype.clear=function(){var t=this.St.clear().setSize(this.V.length);return this.U?this:de(this,t)},ue.prototype.wasAltered=function(){return this.St.wasAltered()},ue.prototype.toSeq=function(){return ve(this)},ue.prototype.toJS=function(){return Es(this)},ue.prototype.entries=function(){return this.P(2)},ue.prototype.P=function(t,i){return ve(this).P(t,i)},ue.prototype.T=function(t,i){return ve(this).T(t,i)},ue.prototype.j=function(t){if(t===this.U)return this;var i=this.St.j(t);return t?de(this,i,t):(this.U=t,this.St=i,this)},ue.isRecord=$,ue.getDescriptiveName=fe;var ce=ue.prototype;function de(t,i,s){var e=Object.create(Object.getPrototypeOf(t));return e.St=i,e.U=s,e}function fe(t){return t.constructor.displayName||t.constructor.name||"Record"}function ve(t){return ft(t.V.map((function(i){return[i,t.get(i)]})))}function Ae(t,i){try{Object.defineProperty(t,i,{get:function(){return this.get(i)},set:function(t){oi(this.U,"Cannot set on an immutable record."),this.set(i,t)}})}catch(t){}}ce[G]=!0,ce[v]=ce.remove,ce.deleteIn=ce.removeIn=pi,ce.getIn=Ys,ce.hasIn=Ws.hasIn,ce.merge=xi,ce.mergeWith=Mi,ce.mergeIn=Fi,ce.mergeDeep=Ci,ce.mergeDeepWith=Ti,ce.mergeDeepIn=Ii,ce.setIn=yi,ce.update=Si,ce.updateIn=bi,ce.withMutations=Li,ce.asMutable=Pi,ce.asImmutable=Bi,ce[X]=ce.entries,ce.toJSON=ce.toObject=Ws.toObject,ce.inspect=ce.toSource=function(){return this.toString()};const ge=ue({type:"color",r:1,g:1,b:1,a:1});class ye extends ge{constructor(t){super(t)}toUint32(){return void 0!==this.bt||(this.bt=ke(this.getR(),this.getG(),this.getB(),this.getA())),this.bt}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.xt||(this.xt=new ye({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.xt}getLighter(){return this.Mt||(this.Mt=new ye({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.Mt}getDarker(){return this.wt||(this.wt=new ye({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.wt}toRGBAString(){return`rgba(${(255*this.r).toFixed(0)},${(255*this.g).toFixed(0)},${(255*this.b).toFixed(0)},${this.a})`}}const pe=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),me=(t,i,s,e=255)=>new ye({r:t/255,g:i/255,b:s/255,a:e/255}),Se=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},be=(t,i=1,s=1)=>{let e,r,n;t/=360;const h=Math.floor(6*t),o=6*t-h,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(h%6){case 0:e=s,r=u,n=a;break;case 1:e=l,r=s,n=a;break;case 2:e=a,r=s,n=u;break;case 3:e=a,r=l,n=s;break;case 4:e=u,r=a,n=s;break;default:e=s,r=a,n=l}return new ye({r:e,g:r,b:n})},xe=t=>me(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),Me={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},we=new ye({}),_e=me(0,0,0,0),ke=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,Ce=ue({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Te extends Ce{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Fe=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),Ie=new Te;var Le,Pe;t.GradientShape=void 0,(Le=t.GradientShape||(t.GradientShape={})).circle="circle",Le.ellipse="ellipse",t.GradientExtent=void 0,(Pe=t.GradientExtent||(t.GradientExtent={})).closestSide="closest-side",Pe.closestCorner="closest-corner",Pe.farthestSide="farthest-side",Pe.farthestCorner="farthest-corner";const Be=ue({type:"fillstyle",fillType:"radial-gradient",ditheringEnabled:!0,stops:[{color:Se("#f00"),offset:0},{color:Se("#0f0"),offset:1}],position:e(.5,.5),shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner});class De extends Be{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.ditheringEnabled},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`radial-gradient(${this.shape} ${this.extent} at ${100*this.position.x}% ${100*this.position.y}%, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}setDitheringEnabled(t){return this.set("ditheringEnabled",t)}getDitheringEnabled(){return this.get("ditheringEnabled")}}const Ee=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),Re=ue({type:"fillstyle",fillType:"linear-gradient",stops:[{color:Se("#f00"),offset:0},{color:Se("#0f0"),offset:1}],angle:0});class Oe extends Re{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`linear-gradient(${this.angle}deg, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?zh(this.get("angle")):this.get("angle")}}const ze=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class Ve{constructor(t,i,s,e){this._t=new Ar,this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new Ne,this.y=new Ne,this.z=new Ne;const r={...t},n={...i};if(e){const t=t=>{const i=t.value;this.cellsAmount.x=i.reduce(ch,0),this.cellIndex.x=i.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=i.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this._t.kt("cellresize",{})};e.x.Ct("change",t),t({value:e.x.C()});const i=t=>{const i=t.value;this.cellsAmount.y=i.reduce(ch,0),this.cellIndex.y=i.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=i.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this._t.kt("cellresize",{})};e.y.Ct("change",i),i({value:e.y.C()}),this.Tt=()=>{e.x.Ft("change",t),e.y.Ft("change",i)}}}It(){return this.Tt&&(this.Tt(),this.Tt=void 0),this}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Ne extends i{constructor(){super(...arguments),this.Lt=0,this.Pt=10,this.Bt=1}Dt(){return this.o=!1,this}Et(){return this.o=!0,this}getInnerStart(){return this.Lt}getInnerEnd(){return this.Pt}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}Rt(t,i){return this.Lt=t,this.Pt=i,this.Ot(),this}zt(t){return this.Bt=t,this.Ot(),this}Vt(t){return t/this.Bt}Ot(){const t=this.Vt(this.Pt-this.Lt),i=this.Bt;void 0!==this.Nt&&!1!==Ur(t,this.Nt)||(this.o=!0,this.Gt=i,this.Nt=t)}$t(){return this.Nt}Ut(){return this.Gt}jt(){return this.Pt<this.Lt}Yt(t,i){return!0}}class Ge{constructor(){this.Ht=!0}getInnerStart(){return this.Lt}getInnerEnd(){return this.Pt}getInnerInterval(){return Math.abs(this.Pt-this.Lt)}Rt(t,i){return this.Ht=t!==this.Lt||i!==this.Pt,this.Lt=t,this.Pt=i,this}Dt(){return this.Ht=!1,this}Et(){return this.Ht=!0,this}}class $e extends Ge{constructor(t,i,s,e){if(super(),this.Wt=!0,this.Xt=!0,this.Zt=[0,0],this.Jt=!0,this.Qt=t,this.Kt=i,this.qt=s,this.ti=t,this.ii=i,e){const t=t=>{this.si(t.value)};e.Ct("change",t),this.si(e.C()),this.ei=()=>e.Ft("change",t)}}zt(t){return this.Bt=t,this.Xt=!0,this}ri(t){return this.Zt=t.map(Math.abs),this.Jt=!0,this}ni(){return this.Qt/this.qt*this.Bt+this.Zt[0]}hi(){return(this.Qt+this.Kt)/this.qt*this.Bt-this.Zt[1]}oi(){return this.getCellSize()-this.ai()}li(){return this.Bt}getCellSize(){return this.ui(this.Bt)}ai(){return this.Zt[0]+this.Zt[1]}ci(){return this.Zt}si(t){this.qt=t.reduce(ch,0),this.Qt=t.reduce(((t,i,s)=>s>=this.ti?t:t+i),0),this.Kt=t.reduce(((t,i,s)=>s>=this.ti&&s<this.ti+this.ii?t+i:t),0),this.Wt=!0,this.di()}ui(t){return t*this.Kt/this.qt}Dt(){return super.Dt(),this.Xt=!1,this.Jt=!1,this.Wt=!1,this}Et(){return super.Et(),this.Xt=!0,this.Jt=!0,this.Wt=!0,this}}class Ue extends $e{constructor(t,i,s,e){super(t,i,s,e),this.fi=!1,this.Ai=!1,this.gi=0,this.Bt=1e3,this.Rt(0,10),this.Ot()}yi(){return this.Ai}Yt(t,i,s,e,r){if(t===i)return!1;const n=Math.abs(e-s),h=Math.abs(i-t);if(!this.fi){const s=Sn(t,i,this.getCellSize());if(void 0===s)return!1;if(h>s)return!0;const e=(i+t)/2,o=(r?s/2:n/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(h>o)return!0;const a=(i+t)/2,l=(r?o/2:n/2)*(t>i?-1:1);return{start:a-l,end:a+l}}di(){this.Ot()}pi(t){return this.ni()+(t-this.Lt)/(this.Pt-this.Lt)*(this.hi()-this.ni())}mi(t){return this.Lt+(t-this.ni())/(this.hi()-this.ni())*(this.Pt-this.Lt)}Rt(t,i){return super.Rt(t,i),this.Ot(),this}ri(t){return super.ri(t),this.Ot(),this}zt(t){return super.zt(t),this.Si=je(this.Pt-this.Lt,this.Zt,this.Bt,this.Kt,this.qt),this.Ot(),this}bi(){return this.fi=!0,this}xi(){return this.fi}Mi(){return Math.abs(this.wi)}_i(){return this.Mi()/this.Si}ki(){return this.ct}Ci(){return this.ut}getPixelSize(){return this.Si}Ti(){return this.Fi}Et(){return super.Et(),this.Ai=!0,this}Dt(){return super.Dt(),this.Ai=!1,this}Ii(t,i=Jh.Numeric){return i(t,{start:this.Lt,end:this.Pt})}Li(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Pi(t){return je(t,this.Zt,this.Bt,this.Kt,this.qt)}Ot(){let t=this.Lt,i=this.Pt,s=0;this.fi&&(t=0,i=this.Pt-this.Lt,s=this.Lt);const e=i-t,r=je(e,this.Zt,this.Bt,this.Kt,this.qt);this.ut=t-this.Zt[0]*r,this.ct=i+this.Zt[1]*r;const n=this.ct-this.ut,h=n-this.wi,o=Math.abs(h/r),a=e-this.gi,l=Math.abs(a/r);(!this.Fi||o>=.4||l>=.4)&&(this.gi=e,this.wi=n,this.Si=r,this.Ai=!0);const u=this.wi*this.qt/(2*this.Kt),c=-(this.ut-this.wi*this.Qt/this.Kt)-u,d=2*this.ni()/this.Bt-1,f=2*this.hi()/this.Bt-1-d;this.Fi={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Bi(t,i){return t+this.Si*i}}const je=(t,i,s,e=1,r=1)=>t/(s*e/r-(i[0]+i[1]));class Ye{Di(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Dt(){return this.x.Dt(),this.y.Dt(),this}Et(){return this.x.Et(),this.y.Et(),this}zt(t,i){return"object"==typeof t?(this.x.zt(t.x),this.y.zt(t.y)):(this.x.zt(t),this.y.zt(i)),this}li(){return e(this.x.li(),this.y.li())}Ei(t){return this.x.ri(t),this}Ri(t){return this.y.ri(t),this}ai(){return e(this.x.ai(),this.y.ai())}Oi(t,i){return this.x.Rt(t,i),this}zi(t,i){return this.y.Rt(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ai(),y:i-this.y.ai()}}Vi(){return this.x.yi()||this.y.yi()}}class He extends Ye{constructor(){super(...arguments),this.Ni="LinearScaleXY"}Gi(t,i,s,e){return this.x=new Ue(t.x,i.x,s.x,e?e.x:void 0),this.y=new Ue(t.y,i.y,s.y,e?e.y:void 0),this}xi(){return this.x.xi()||this.y.xi()}$i(){return e(this.x.getPixelSize(),this.y.getPixelSize())}Ti(){return{x:this.x.Ti(),y:this.y.Ti()}}Bi(t,i){const s=this.$i();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const r=this.$i(),n=Th(t,i);return n.x*=e,n.y*=e,{x:t.x+s*r.x*n.x,y:t.y+s*r.y*n.y}}}class We extends Ye{constructor(){super(...arguments),this.Ni="MixedScaleXY"}xi(){return!1}Bi(t,i){const s=this.x.pi(t.x),e=this.y.pi(t.y),r={x:s+i.x,y:e+i.y};return{x:this.x.mi(r.x),y:this.y.mi(r.y)}}Ui(t,i,s,e){const r={x:this.x.pi(t.x),y:this.y.pi(t.y)},n={x:this.x.pi(i.x),y:this.y.pi(i.y)},h=Ch(Ph(n,r)),o=Th(n,r),a={x:r.x+h.x*e+o.x*s,y:r.y+h.y*e+o.y*s};return{x:this.x.mi(a.x),y:this.y.mi(a.y)}}Ti(){const t=this.x.Ti(),i=this.y.Ti();return{uScaleStart:[this.x.Lt,this.y.Lt],uScaleInterval:[this.x.Pt-this.x.Lt,this.y.Pt-this.y.Lt],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Xe={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).Gi({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new Ve({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},Ze=(t,i,s)=>i===s?t:s.mi(i.pi(t)),Je=(t,i,s)=>{if(i===s)return t;const e=i instanceof Ye?i.x:i.x instanceof Ye?i.x.x:i.x.ji,r=i instanceof Ye?i.y:i.y instanceof Ye?i.y.y:i.y.ji,n=s instanceof Ye?s.x:s.x instanceof Ye?s.x.x:s.x.ji,h=s instanceof Ye?s.y:s.y instanceof Ye?s.y.y:s.y.ji;return{...t,x:Ze(t.x,e,n),y:Ze(t.y,r,h)}},Qe=(...t)=>{if(0===t.length)return{remove:$r};let i=!1;const s=t.map((s=>{const e=e=>{((s,e,r)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.Yi(e,r,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,e.start,e.end)};return s.addEventListener("intervalchange",e),e}));let e=!1;const r=t.map((i=>{const s=s=>{((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,s.isStopped)};return i.addEventListener("stoppedchange",s),s}));return{remove:()=>{t.forEach(((t,i)=>{t.removeEventListener("intervalchange",s[i]),t.removeEventListener("stoppedchange",r[i])}))}}},Ke=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,qe=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,tr=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,ir=t=>t&&"object"==typeof t&&"index"in t,sr=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,er=(t,i,s,e)=>s<0?t:s>1?i:me(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),void 0===e?t.getA()+s*(i.getA()-t.getA()):e);var rr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(rr||(rr={}));const nr=(t,i,s,e,r,n,h,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(r?2:1);if(s===rr.Nearest)return hr(t,i,n,h,c,d);if(s===rr.NearestX||s===rr.NearestY){if("boolean"==typeof l&&("x"===a&&s===rr.NearestX||"y"===a&&s===rr.NearestY))return lr(t,Je(i,h,n),a,l,c,d);if(s===rr.NearestX)return or(t,Je(i,h,n),o,c,d);if(s===rr.NearestY)return ar(t,Je(i,h,n),o,c,d)}},hr=(t,i,s,e,r,n)=>{let h,o=Number.MAX_VALUE;for(let a=r;a<=n;a+=1){const r=t[a];if(!Number.isNaN(r.x)&&!Number.isNaN(r.y)){const t=Je(r,s,e),n=(t.x-i.x)**2+(t.y-i.y)**2;n<o&&(o=n,h=a)}}return h},or=(t,i,s,e,r)=>{if(i.x<s.min.x||i.x>s.max.x)return;let n,h=Number.MAX_VALUE;for(let s=e;s<=r;s+=1){const e=t[s],r=e.x>i.x?e.x-i.x:i.x-e.x;r<h&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(h=r,n=s)}return n},ar=(t,i,s,e,r)=>{if(i.y<s.min.y||i.y>s.max.y)return;let n,h=Number.MAX_VALUE;for(let s=e;s<=r;s+=1){const e=t[s],r=e.y>i.y?e.y-i.y:i.y-e.y;r<h&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(h=r,n=s)}return n},lr=(t,i,s,e,r,n)=>{const h="x"===s,o=h?i.x:i.y,a=t[r],l=t[n],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(h&&(o<u||o>d)||!h&&(o<c||o>f))return;let v=r,A=Math.floor((r+n)/2),g=n,y=-1;for(;;){const i=o-(h?t[A].x:t[A].y);if(i*(e?-1:1)>0)v=Math.min(A+1,g),y=Math.floor((v+g)/2);else{if(0===Math.abs(i))return A;g=Math.max(A-1,v),y=Math.floor((v+g)/2)}if(y===A){const s=A>r?Math.abs(o-(h?t[A-1].x:t[A-1].y)):sh,e=A<n?Math.abs(o-(h?t[A+1].x:t[A+1].y)):sh,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return A-1;case e:return A+1;default:return A}}else A=y}},ur=(t,i,s,e,r,n)=>{const h="x"===s,o=h?i.x:i.y,a=t[r],l=t[n],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(h&&(o<u||o>d)||!h&&(o<c||o>f))return;let v=r,A=Math.floor((r+n)/2),g=n,y=-1;for(;;){const s=o-(h?t[A].x:t[A].y);if(s*(e?-1:1)>0)v=Math.min(A+1,g),y=Math.floor((v+g)/2);else{if(0===Math.abs(s))return{a:A,b:A,lerpAmount:0};g=Math.max(A-1,v),y=Math.floor((v+g)/2)}if(y===A){if(s*(e?-1:1)<0&&A>r){const s=t[A-1],e=t[A];return{a:A-1,b:A,lerpAmount:h?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(A<n){const s=t[A],e=t[A+1];return{a:A,b:A+1,lerpAmount:h?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:A,b:A,lerpAmount:0}}A=y}};let cr=0;class dr{constructor(t,i,s){this.Hi=u(!0),this.Wi=!1,this.Xi=!0,this.Zi=!1,this.Ji=void 0,this.Qi=0,this._t=new Ar,this.Ki=t,this.qi=i,this.ts=s,this.ss=cr,cr+=1,this.es=t.rs.highlightColorOffset}ns(){let t;return this.hs("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?rr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?rr.NearestY:rr.Nearest}ls(){}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}kt(t,i,s,e){this._t.kt(t,i,{collectionMember:s,info:e})}removeEventListener(t,i){this._t.removeEventListener(t,i)}us(t){return void 0!==this.ts.find((i=>i.type===t))}hs(t,i){var s;return!!this.us(t)&&!0===i(null===(s=this.ts.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Wi||(this.Ki.cs(this),this.Wi=!0,this.qi(this),this._t.kt("dispose",{})),this}isDisposed(){return this.Wi}setVisible(t){const i=this.Xi;return this.Xi=t,!t&&i&&this.Hi.C()&&this.Ki.cs(this),this}getVisible(){return this.Xi}setPointerEvents(t){const i=this.Hi.C();return this.Hi._(t),t||i&&this.Ki.cs(this),this}getPointerEvents(){return this.Hi.C()}ds(t){return this.Ji=t,this}fs(){return this.Ji?this.Ji:fr}vs(t){return this.Qi=t,this}As(){return this.Qi}gs(t){return this.es=t,this}ys(){return this.es}}const fr=a(e(0,0),e(0,0)),vr={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class Ar{constructor(){this.ps=new Array,this.Ss=[],this.Hi=!0,this.bs=!1,this.xs=new Map}setPointerEvents(t){this.Hi=t,this.Ss.forEach((i=>i.setPointerEvents(t)))}getPointerEvents(){return this.Hi}addEventListener(t,i,s){this.ps.push({listener:i,key:t,options:s||{}})}removeEventListener(t,i){const s=this.ps.findIndex((t=>t.listener===i));s>=0&&this.ps.splice(s,1)}set draggable(t){this.bs=t,this.Ss.forEach((i=>{i.Zi=t}))}get draggable(){return this.bs}kt(t,i,s=void 0){const e=this.ps.slice();for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.key===t&&(n.listener(i,s),!0===n.options.once&&this.removeEventListener(t,n.listener))}}Ms(t,i){const s=[];Object.keys(vr).forEach((e=>{const r=(t,s)=>{const r=gr(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,n=(null==i?void 0:i.getExtraData)&&void 0!==r.clientX?i.getExtraData(r,s.collectionMember,s.info):{};this.kt(e,t,n),!t.defaultPrevented&&(null==i?void 0:i.continueIfNotPrevented)&&i.continueIfNotPrevented(e,t,n)};t.addEventListener(e,r),s.push((()=>t.removeEventListener(e,r)))})),this.Ss.push(t);const e=()=>{const i=this.Ss.indexOf(t);i>=0&&this.Ss.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.xs.set(t,(()=>{s.forEach((t=>t()))})),t.Zi=this.bs,t.setPointerEvents(this.Hi)}ws(){this.xs.forEach((t=>t())),this.xs.clear(),this.Ss.length=0}_s(t,i){const s=[];Object.keys(vr).forEach((e=>{const r=(t,s)=>{const r=i(s.collectionMember);r&&this.kt(e,t,r)};t.addEventListener(e,r),s.push((()=>t.removeEventListener(e,r)))})),this.Ss.push(t);const e=()=>{const i=this.Ss.indexOf(t);i>=0&&this.Ss.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.xs.set(t,(()=>{s.forEach((t=>t()))})),t.setPointerEvents(this.Hi),t.Zi=this.bs}ks(t){Object.keys(vr).forEach((i=>{t.addEventListener(i,((t,s)=>{this.kt(i,t,s)}))})),t.setPointerEvents(this.Hi),t.draggable=this.bs}}const gr=t=>!(!t||"object"!=typeof t||!("touches"in t)),yr={linear:(t,i,s)=>{const e=i-t;return r=>r<s?t+e/s*r:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=xn(t);return(s,e,r)=>{const n=i(s),h=i(e);return i=>i<r?t**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-i/r))**2)*(h-n)):e}}};class pr{constructor(t,i,s,e=yr.linear,r){this.delta=0,this.nextAnimations=new Array,this.Cs=!1,this.easing=yr.linear,this.isOver=()=>(this.delta===this.duration||this.Cs)&&0===this.nextAnimations.length,this._t=new Ar,this.values=t,this.action=i,this.duration=s,this.easing=e,this.Ts=r,this.eases=t.map((([t,i])=>e(t,i,s)))}Fs(){this._t.kt("start",{})}start(){return this.Ts.includes(this)||this.Ts.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const r=new pr(t,i,s,e,this.Ts);return this.nextAnimations.push(r),r}finish(t=!0){if(this.Cs=!0,this.Ts.splice(this.Ts.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&this._t.ps.forEach((t=>{"allAnimationEnd"===t.key&&i.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&i.addEventListener("everyAnimationEnd",t.listener)})),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this._t.kt("end",{nextAnimation:i}),this._t.kt("everyAnimationEnd",{nextAnimation:i})),i}t&&(this._t.kt("end",{nextAnimation:void 0}),this._t.kt("everyAnimationEnd",{nextAnimation:void 0}),this._t.kt("allAnimationEnd",{}))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Nr):this.values.map(Nr)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const mr=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,r,n=0;const h=()=>{e=void 0;const o=Date.now();r=r||o,n=o-r,n/1e3>=1/i&&(r=Date.now()-n%(1e3/i),s.forEach((t=>{0===t.delta&&t.Fs(),t.delta+=n-n%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Or.requestAnimationFrame(h):(e=void 0,r=void 0)};return(t=1e3,i=yr.linear)=>(r,n,o=t)=>{const a=new pr(r,n,o,i,s).start();return e||(e=Or.requestAnimationFrame(h)),a}};var Sr;t.ImageFitMode=void 0,(Sr=t.ImageFitMode||(t.ImageFitMode={}))[Sr.Fill=0]="Fill",Sr[Sr.Fit=1]="Fit",Sr[Sr.Stretch=2]="Stretch",Sr[Sr.Center=3]="Center",Sr[Sr.Tile=4]="Tile";const br=ue({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:me(0,0,0,0),sourceMissingColor:me(0,0,0,0),fitMode:t.ImageFitMode.Fill});class xr extends br{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return pe(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return pe(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}toCSS(){return`url(${this.getSource().src})`}}const Mr=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),wr=ue({type:"linestyle",lineType:"empty"}),_r=new class extends wr{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Is(){return 0}setFillStyle(t){return this}getFillStyle(){return ho}},kr=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),Cr=-34028234663852886e22,Tr="-340282346638528859811704183484516925440.0";var Fr,Ir,Lr,Pr;t.UISpace=void 0,(Fr=t.UISpace||(t.UISpace={}))[Fr.Content=0]="Content",Fr[Fr.PaddedContent=1]="PaddedContent",Fr[Fr.PaddedBackground=2]="PaddedBackground",Fr[Fr.Everything=3]="Everything",t.UIVisibilityModes=void 0,(Ir=t.UIVisibilityModes||(t.UIVisibilityModes={}))[Ir.never=0]="never",Ir[Ir.always=1]="always",Ir[Ir.whenHovered=2]="whenHovered",Ir[Ir.whenDragged=3]="whenDragged",Ir[Ir.whenNotDragged=4]="whenNotDragged",Ir[Ir.whenHoveredOrDragged=5]="whenHoveredOrDragged",t.UIDraggingModes=void 0,(Lr=t.UIDraggingModes||(t.UIDraggingModes={}))[Lr.notDraggable=0]="notDraggable",Lr[Lr.draggable=1]="draggable",Lr[Lr.onlyHorizontal=2]="onlyHorizontal",Lr[Lr.onlyVertical=3]="onlyVertical",t.UIDirections=void 0,(Pr=t.UIDirections||(t.UIDirections={}))[Pr.Up=0]="Up",Pr[Pr.Right=1]="Right",Pr[Pr.Down=2]="Down",Pr[Pr.Left=3]="Left";const Br=t=>"getHighlight"in t&&"setHighlight"in t,Dr=(t,i,s)=>void 0===t||"number"==typeof t?t:Array.isArray(t)?t.slice(i,s):t.subarray(i,s),Er=(...t)=>{const i=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,s)=>s?(Object.keys(s).forEach((e=>{const r=t[e],n=s[e];i(r)&&i(n)?t[e]=Er(r,n):t[e]=n})),t):t),{})},Rr=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=Mr(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{Un(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${Or.location.origin}/resources`,s=t.styleFactory(i);if(Mr(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=Mr(s)&&s.getSource(),r=e&&e instanceof Image?e:void 0;Or.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==r||r.addEventListener("load",(()=>{t.apply(s)})),null==r||r.addEventListener("error",(()=>{Un(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},Or="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},zr=(t,i)=>t.x===i.x&&t.y===i.y,Vr=t=>t!==sh&&t!==eh&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Nr=t=>t[1],Gr=t=>t.dispose(),$r=()=>{},Ur=(t,i)=>t===i,jr=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Yr=t=>Array.prototype.concat.apply([],t),Hr=(t,i)=>void 0===t||Number.isNaN(t)?i:t,Wr=t=>t.Ls(),Xr=t=>t.Ps(),Zr=t=>t.Bs(),Jr=t=>t.Ds(),Qr=t=>t.min.x,Kr=t=>t.max.x,qr=t=>t.min.y,tn=t=>t.max.y,sn=(t,i,s,e,r)=>{if(t.length>0){let n=r?e(r):void 0;for(let e=0;e<t.length;e+=1){const r=i(t[e]);void 0!==r&&(n=void 0!==n?s(n,r):r)}return n}if(r)return e(r)},en=e(0,1),rn=e(1,0),nn=e(0,-1),hn=e(-1,0),on=e(0,0),an=i=>{switch(i){case t.UIDirections.Up:return en;case t.UIDirections.Right:return rn;case t.UIDirections.Down:return nn;case t.UIDirections.Left:return hn;default:return on}},ln=i=>i===t.UIDirections.Left||i===t.UIDirections.Right,un=t=>{t.stopPropagation(),t.preventDefault()},cn=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let r=0;for(let i=0;i<s;i+=1){const s=t[i],n=Math.fround(s);e[r+0]=n,e[r+1]=s-n,r+=2}return e},dn=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let r=0;for(let s=0;s<i;s+=1){const i=t[s];e[r+0]=i.x,e[r+1]=i.y,r+=2}return e}const e=t.length,r=new s(4*e);let n=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),h=Math.fround(s.y);r[n+0]=e,r[n+1]=h,r[n+2]=s.x-e,r[n+3]=s.y-h,n+=4}return r},fn=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let r=0;r<i;r+=1){const i=t[r];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},vn=(t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(r,n,h)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=r.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=r[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=h&&vo(h)&&h.getFallbackColor()||we;c=u;for(let i=0;i<a;i+=1){const s=r[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=n&&n.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=r[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=r[t];l[c+0]=void 0!==i.value?i.value:Cr,c+=o}u+=1}if(e){const t=n&&n.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=r[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,n=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,h=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=n,l[c+2]=h,c+=o}u+=3}return l}:(t,i,s)=>An(t,i):(t,i,s)=>pn(t):(t,i,s)=>yn(t,i):(t,i,s)=>gn(t,s):(t,i,s)=>fn(t),An=(t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const r=t.length,n=new Float32Array(6*r);let h=0;for(let i=0;i<r;i+=1){const s=t[i];n[h+0]=s.x,n[h+1]=s.y,n[h+2]=s.z;const r=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;n[h+3]=r,n[h+4]=o,n[h+5]=a,h+=6}return n},gn=(t,i)=>{const s=i&&vo(i)&&i.getFallbackColor()||we,e=t.length,r=new Float32Array(7*e);for(let i=0,n=0;i<e;i+=1){const e=t[i];r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z;const h=e.color||s;r[n+3]=h.r,r[n+4]=h.g,r[n+5]=h.b,r[n+6]=h.a,n+=7}return r},yn=(t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const r=t.length,n=new Float32Array(4*r);for(let i=0,s=0;i<r;i+=1){const r=t[i];n[s+0]=r.x,n[s+1]=r.y,n[s+2]=r.z;const h=void 0!==r.size?r.size:e;n[s+3]=h,s+=4}return n},pn=t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,r=0;e<i;e+=1){const i=t[e];s[r+0]=i.x,s[r+1]=i.y,s[r+2]=i.z,s[r+3]=void 0!==i.value?i.value:Cr,r+=4}return s},mn=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},Sn=(t,i,s)=>{const e=((t,i)=>{if(i<sh&&i>eh&&t<sh&&t>eh){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),r=Math.min(s,e);return 10**Math.floor(Math.log10(r))}})(t,i);if(void 0!==e)return e*s},bn=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},xn=t=>{const i=Math.log(t);return t=>Math.log(t)/i},Mn=xn(Math.E),wn=(t,i)=>{const s=i[t];return s?s():void 0},_n=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Vh(Ph(t,s))-Vh(Ph(i,s))))},kn=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Cn=t=>255===t.getA()?t:t.setA(255),Tn=(()=>{const t=me(0,0,0);return i=>(i=Cn(i),new Oe({angle:180,stops:[{offset:0,color:i},{offset:1,color:er(i,t,.5)}]}))})(),Fn=(()=>{const t=(t,i)=>{var s;if(t){if(co(t)){if(0===t.getColor().getA())return;return t.getColor()}if(Ee(t)||ze(t)){const i=t.getColorStops();return 2===i.length?i[1].color:null===(s=i[0])||void 0===s?void 0:s.color}return yo(t)&&void 0!==i?t.lut.getColors(i,void 0):void 0}};return(i,s,e)=>{var r;const n=[];if(e.fill&&n.push(e.fill),e.fill2&&n.push(e.fill2),e.stroke){const t=e.stroke.getFillStyle();t!==ho&&("stroke"===(null===(r=e.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(e.point3D){const t=e.point3D;n.push(t.getFillStyle())}let h;if(e.behavior&&!0===e.behavior.colorStep){const[s,r]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const r=t(s,e.lutValue);return r&&(void 0===i[0]?i[0]=r:i[1]=r),i}),[void 0,void 0]);h=s&&r?(o=s)===(a=r)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?Tn(o):(o=Cn(o),a=Cn(a),new Oe({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):i.uiButtonFillStyle}else{const r=n.reduce(((i,s)=>i||t(s,e.lutValue)),void 0);h=r?s?new uo({color:r}):Tn(r):i.uiButtonFillStyle}var o,a;return h}})(),In=(t,i)=>{const s=t;if(yo(s))return{lut:s.getPalette(),lookUpProperty:s.getLookUpProperty(),valueRange:i}},Ln=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Pn=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let r=e>=0?e:s.length;for(;r<i;r+=1)s=`0${s}`;return s},Bn=(t,i)=>"function"==typeof t?t(i):t,Dn=(t,i)=>i(),En=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"),Rn=t=>t===rh||t.min.x===rh.min.x&&t.max.x===rh.max.x&&t.min.y===rh.min.y&&t.max.y===rh.max.y,On=t=>Array.from(new Set(t)),zn=t=>t.filter((t=>void 0!==t)),Vn=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Nn=(t,i)=>{throw new Error(i)},Gn=t=>{let i;return()=>i||(i=t(),i)},$n=t=>{if(t===_r)return 0;const i=t.getThickness();return i<0?1:1*i},Un=(t,i,s,e)=>{const r=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Or.alert(r),new Error(r);Or.console.warn(r)},jn=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const r=i;for(;e!==i;){const r=Math.ceil((e+i)/2);t<s(r)?i=r-1:e=r}const n=Math.abs(t-s(e));return e<r&&Math.abs(t-s(e+1))<n?e+1:e},Yn=()=>{const t=new Map;return{N:i=>(Object.keys(vr).forEach((s=>{i.addEventListener(s,((i,e)=>{const r=e.collectionMember&&t.get(e.collectionMember);if(!r)return;const n=gr(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:i,h=r.Es(e.info,n,e.collectionMember);r._t.kt(s,i,h)}))})),i),Rs:(i,s)=>{t.set(i,s)},ws:()=>{t.clear()}}},Hn={left:0,right:0,top:0,bottom:0},Wn=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Xn=(t,i,s)=>{i&&i.Os();const e=s();return Object.keys(e).forEach((i=>{const s=i,r=e[s];t.addEventListener(s,r)})),{zs:t,Os:()=>{Object.entries(e).forEach((([i,s])=>{const e=i,r=s;t.removeEventListener(e,r)}))}}},Zn=(t,i,s)=>{let e;const r=()=>(e=s(),e),n={...t,resolve:()=>e||r()};for(const t of Object.keys(i))Object.defineProperty(n,t,{get:function(){return e?e[t]:r()[t]}});return n},Jn=t=>{if(t)return"resolve"in t?t.resolve():t},Qn=t=>{let i=t;return{Vs:t=>{const s=i;return i=s+t,[s,t]}}},Kn=t=>{const i=Date.now();Or.document.body.addEventListener(t,(t=>{Date.now()-i>500||(t.stopPropagation(),t.preventDefault())}),{once:!0,capture:!0})},qn=()=>{const t=Or.performance.now();Or.document.body.addEventListener("contextmenu",(i=>{Or.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},th=()=>{const t=Or.performance.now();Or.document.body.addEventListener("touchstart",(i=>{Or.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},ih={add:(t,i)=>h(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>h(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>h(t.x*i,t.y*i,t.z*i),divide:(t,i)=>h(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>ih.divide(t,ih.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>h(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(ih.dot(t,i)/(ih.length(t)*ih.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),r=Math.sin(s),n=ih.dot(i,t),h=ih.cross(i,t);return ih.addVec(ih.multiply(t,e),ih.addVec(ih.multiply(i,(1-e)*n),ih.multiply(h,r)))},lerp:(t,i,s)=>(s=jr(s,0,1),ih.addVec(ih.multiply(t,1-s),ih.multiply(i,s))),equals:(t,i)=>Ur(t.x,i.x)&&Ur(t.y,i.y)&&Ur(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},sh=Number.MAX_VALUE,eh=-Number.MAX_VALUE,rh=a(e(sh,sh),e(eh,eh)),nh=a(h(sh,sh,sh),h(eh,eh,eh)),hh=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},oh=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ah=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),lh=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),uh=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(oh(t[s],t[e]))return!0;return!1},ch=(t,i)=>i+t,dh=(t,i,s)=>{const r=Ph(i,t),n=r.x*r.x+r.y*r.y;if(0===n)return t;const h=Ph(s,t),o=(h.x*r.x+h.y*r.y)/n;return o<=0?t:o>=1?i:e(t.x+o*r.x,t.y+o*r.y)},fh=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,vh=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ah=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},gh=(t,i,s)=>{let e=s.x-i.x,r=s.y-i.y;const n=e*e+r*r;if(n<.01)return Number.MAX_VALUE;const h=((t.x-i.x)*e+(t.y-i.y)*r)/n,o=i.x+h*e,a=i.y+h*r;return e=t.x-o,r=t.y-a,e*e+r*r},yh=(t,i,s)=>Lh(t,Ih(Ph(i,t),s)),ph=(t,i,s)=>ih.addVec(t,ih.multiply(ih.subtractVec(i,t),s));function mh(t){const i=t.length;if(i>0){let s=t[0].x,r=t[0].x,n=t[0].y,h=t[0].y;for(let e=1;e<i;e+=1){const i=t[e];i.x>s&&(s=i.x),i.x<r&&(r=i.x),i.y>n&&(n=i.y),i.y<h&&(h=i.y)}return a(e(r,h),e(s,n))}return rh}function Sh(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,r=t[0].y,n=t[0].y,o=t[0].z,l=t[0].z;for(let h=0;h<i;h+=1){const i=t[h];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>r&&(r=i.y),i.y<n&&(n=i.y),i.z>o&&(o=i.z),i.z<l&&(l=i.z)}return a(h(e,n,l),h(s,r,o))}return nh}const bh=(...t)=>{const i={min:{x:sh,y:sh},max:{x:eh,y:eh}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},xh=(t,i)=>a(h(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),h(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Mh(t,i,s,e){const r=t.x-e.x,n=t.y-e.y,h=e.x-s.x,o=s.y-e.y,a=o*r+h*n,l=(e.y-i.y)*r+(i.x-e.x)*n,u=o*(i.x-e.x)+h*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}const wh=(t,i,s)=>!(t.x>s.x||t.y>s.y||t.x<i.x||t.y<i.y);function _h(t,i,s){return e(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function kh(t,i){return e(t.x-i.x,t.y-i.y)}function Ch(t){const i=Fh(t);return 0===i?e(0,0):e(t.x/i,t.y/i)}function Th(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Ch(s);const e=Math.PI/2,r=s.x;return s.x=-Math.sin(e)*s.y,s.y=r*Math.sin(e),s}function Fh(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Ih(t,i){return e(t.x*i,t.y*i)}function Lh(t,i){return e(t.x+i.x,t.y+i.y)}function Ph(t,i){return e(t.x-i.x,t.y-i.y)}function Bh(t,i){return e(t.x*i.x,t.y*i.y)}function Dh(t,i){return e(t.x/i.x,t.y/i.y)}function Eh(t){return Ih(t,-1)}function Rh(t,i){return t.x*i.x+t.y*i.y}const Oh=(t,i,s)=>{const r=(s.y-i.y)/(s.x-i.x),n=i.y+(t-i.x)*r;return e(t,n)};function zh(t){return t*Math.PI/180}function Vh(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Nh(t){return e(Math.cos(t),Math.sin(t))}const Gh=(t,i,s,r)=>{let n,h,o,a;if(i.x-t.x!=0||r.x-s.x!=0)return i.x-t.x==0?(o=i.x,h=(r.y-s.y)/(r.x-s.x),a=h*(o-s.x)+s.y):r.x-s.x==0?(o=r.x,n=(i.y-t.y)/(i.x-t.x),a=n*(o-t.x)+t.y):(n=(i.y-t.y)/(i.x-t.x),h=(r.y-s.y)/(r.x-s.x),o=(s.y-h*s.x+n*t.x-t.y)/(n-h),a=n*(o-t.x)+t.y),e(o,a)},$h=(t,i)=>{const s=t.length,e=i.length,r=new Uint16Array(s+e);return r.set(t,0),r.set(i,s),r};class Uh extends $e{constructor(t,i,s,e){super(t,i,s,e),this.Ns={internal:10,function:jh(10),number:10},this.Bt=1e3,this.Rt(1,1e3),this.Fi=this.Gs()}Yt(t,i,s,e,r){if(t===i)return!1;const n=Math.min(t,i)<Hh,h=Math.max(t,i)>Wh;return!n&&!h||!!r&&(i>t?{start:n?Hh:t,end:h?Wh:i}:{start:h?Wh:t,end:n?Hh:i})}pi(t){const i=this.ni(),s=this.hi(),e=Math.max(t,Hh);return i+(this.Ns.function(e)-this.Fi.scaleStartLog)/this.Fi.scaleIntervalLog*(s-i)}mi(t){const i=this.ni(),s=(t-i)/(this.hi()-i),e=this.Fi.scaleStartLog+s*this.Fi.scaleIntervalLog;return this.Ns.number**e}di(){this.Ns&&this.Gs()}Rt(t,i){return super.Rt(t,i),this.Ns&&this.Gs(),this}ri(t){return super.ri(t),this.Ns&&this.Gs(),this}zt(t){return super.zt(t),this.Ns&&this.Gs(),this}$s(t){return this.Ns={internal:t,function:jh(t),number:Yh(t)},this}Us(){return this.Ns.internal}Bi(t,i){const s=this.pi(t)+i;return this.mi(s)}yi(){return this.Xt||this.Ht||this.Jt||this.Wt}Gs(){const t=this.Ns.function(this.Lt),i=this.Ns.function(this.Pt)-t,s=2*this.ni()/this.Bt-1,e=2*this.hi()/this.Bt-1-s;return this.Fi={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Fi}Ti(){return this.Fi}}const jh=t=>"e"===t?Mn:xn(t),Yh=t=>"e"===t?Math.E:t,Hh=.9*10**-20,Wh=1.1*10**25,Xh=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Zh=(t,i,s)=>{const e=Math.abs(s-i);if(0===e)return t.toFixed(0);const r=Math.max(2-hh(e,10),0);return t.toFixed(r)},Jh={Numeric:(t,i)=>{const{start:s,end:e}=i;return Zh(t,s,e)},NumericUnits:(t,i)=>{const{start:s,end:e}=i,r=Math.abs(e-s),n=t<0;t=Math.abs(t);let h="",o="";if(r>=1e3&&t>1e3){let i="";for(const s of Xh){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),o=s.prefix;break}}h=(n?"-":"")+i}else{let i=String(Math.floor(t));const s=hh(t,1e3);for(let t=1;t<=s;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(n?"-":"")+i+(r<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-hh(r,10)):"")}return h+=o,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const r=jh(e)(t);return`${e}${Qh(r)}`},LogarithmicExponents:(t,i,s,e=10)=>{const r=jh(e),n=Math.floor(r(t)),h=t/Yh(e)**n;return`${Math.round(h)}${e}${Qh(n)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const r=jh(e),n=Math.floor(r(t));return`${(t/Yh(e)**n).toFixed(2)}${e}${Qh(n)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const r=jh(e);if("e"===e)return`${Math.floor(r(t))}e`;const n=t.toString();if(t>1)return n;const h=Math.floor(r(t));return t.toFixed(Math.abs(h))},Scientific:(t,i)=>{const{start:s,end:e}=i,r=Math.max(Math.abs(s),Math.abs(e)),n=Math.floor(Math.log10(r));return 0===t?`0.00e${n<0?"":"+"}${n}`:t.toExponential(2)}},Qh=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"";case"1":return"";case"2":return"";case"3":return"";case"4":return"";case"5":return"";case"6":return"";case"7":return"";case"8":return"";case"9":return"";case"-":return"";default:return t}})).join(""),Kh=(t,i)=>t.value-i.value,qh=ue({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:me(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1,formatter:(t,i)=>Zh(t,i.min,i.max)}),to=t=>{const{steps:i}=t,s=i.length;i.sort(Kh);const[e,r]=s>0?[i[0].value,i[s-1].value]:[0,0],n=s>0?s-1:0,h=Array(n);for(let t=0;t<n;t+=1)h[t]={min:i[t],max:i[t+1]};return{min:e,max:r,length:s,steps:i,subranges:h,isValid:s>0&&e!==r}};class io extends qh{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,formatter:t.formatter,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,to(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(to({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}setFormatter(t){return this.set("formatter",t)}getFormatter(){return this.get("formatter")}getColors(t,i){if(Array.isArray(t)){if(Array.isArray(t[0])){const s=t,e=s.length,r=s[0].length,n=[...Array(e)].map((()=>Array(r)));for(let t=0;t<e;t+=1)for(let e=0;e<r;e+=1)n[t][e]=this.js(s[t][e],i);return n}const s=t,e=s.length,r=Array(e);for(let t=0;t<e;t+=1)r[t]=this.js(s[t],i);return r}return this.js(t,i)}js(t,i){const{steps:s}=this,e=s.length;if(0===e)return this.getFallbackColor();if(1===e)return s[0].color||this.color;if(this.percentageValues,this.percentageValues&&i&&(t=Math.max(Math.min((t-i.min)/(i.max-i.min),1),0)),this.interpolate){for(let i=0;i<e-1;i+=1){const e=s[i],o=s[i+1],a=Math.min(e.value,o.value),l=Math.max(e.value,o.value);if(t>=a&&t<=l){if(a===l)return e.color;const i=(t-e.value)/(o.value-e.value);return r=e.color,n=o.color,h=i,new ye({r:r.r+(n.r-r.r)*h,g:r.g+(n.g-r.g)*h,b:r.b+(n.b-r.b)*h,a:r.a+(n.a-r.a)*h})}}return t<s[0].value?s[0].color:s[e-1].color}var r,n,h;for(let i=e-1;i>=0;i-=1)if(t>=s[i].value)return s[i].color;return s[0].color}}const so=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),eo=(t,i)=>t.formatter(i,{min:t.min,max:t.max,percentageValues:t.percentageValues}),ro=ue({type:"fillstyle",fillType:"empty"});class no extends ro{toString(){return"emptyFill"}toCSS(){return"transparent"}}const ho=new no,oo=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),ao=ue({type:"fillstyle",fillType:"solid",color:me(255,255,255)});class lo extends ao{}class uo extends lo{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}toCSS(){return this.color.toRGBAString()}setColor(t){return pe(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const co=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class fo extends lo{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}toCSS(){return this.getFallbackColor().toRGBAString()}setFallbackColor(t){return pe(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const vo=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),Ao=ue({type:"fillstyle",fillType:"palette",lut:new io({steps:[]}),lookUpProperty:"value"});class go extends Ao{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}toCSS(){return`linear-gradient(${this.lut.getSteps().map((t=>t.color.toRGBAString())).join(", ")})`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const yo=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),po=(t,i)=>t instanceof Uh||i instanceof Uh?(new We).Di(t,i):(new He).Di(t,i),mo=t=>"client"===t,So=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),bo=t=>"relative"===t,xo=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),Mo=(t,i,s,e)=>{let r,n,h=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===r||i<h)&&(r=l,n=a,h=i)}}return r&&n?[r,n]:void 0},wo=(t,i,s,e,r,n)=>{if(!t)return;let h=t;const o="button"in s?s:void 0;if(o&&"wheel"!==s.type)if(0===o.button){if(!1===t.lmb)return;void 0!==t.lmb&&(h=Er(h,t.lmb))}else if(1===o.button){if(!1===t.mmb)return;void 0!==t.mmb&&(h=Er(h,t.mmb))}else if(2===o.button){if(!1===t.rmb)return;void 0!==t.rmb&&(h=Er(h,t.rmb))}if(e){if(!1===t.shift)return;h=Er(h,t.shift)}if(r){if(!1===t.ctrl)return;h=Er(h,t.ctrl)}if(n){if(!1===t.alt)return;h=Er(h,t.alt)}if(!i)return h;const a=h[i];return a?!0===a?h:Er(h,a):void 0},_o=t=>{const i=[];return{push:t=>{i.push(t)},end:()=>{i.length>1&&t&&Or.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),i.forEach((t=>t()))}}},ko=(t,i,s)=>{if(t){const t={x:s.x.ni(),y:s.y.ni(),width:s.x.oi(),height:s.y.oi()};i.forEach((i=>{i.Ys=t}))}else i.forEach((t=>{t.Ys=void 0}))},Co=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.Hs)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},To=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},Fo=(t,i,s,e=1)=>jr(t+.1*e*(i-t)+.5*e*Math.abs(s.getPixelSize())*Math.sign(i-t),t,i),Io=(t,i,s,e=1)=>{const r=s.pi(t),n=s.pi(i);return jr(s.mi(r+.1*e*(n-r)+.5*e*Math.sign(n-r)),t,i)};var Lo,Po;t.HighlightModes=void 0,(Lo=t.HighlightModes||(t.HighlightModes={}))[Lo.noHighlighting=0]="noHighlighting",Lo[Lo.onHover=1]="onHover",Lo[Lo.onHoverIndividual=2]="onHoverIndividual";class Bo{constructor(i,s,e,r){this.Ws=t.HighlightModes.onHover,this.Wi=!1,this.Xi=!0,this.Xs=[],this.chart=i,this.Zs=s,this.rs=e,this.Js=new Map,this.Qs=r,this.Ks=this.Qs.qs(this,{te:{themeEffectEnabled:this.rs.effectsText},ie:{}}),this.chart.Ki.ee.se(this,(t=>{this.Js.forEach(((i,s)=>s.vs(t))),this.Xs.forEach((i=>i.vs(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),Or.requestAnimationFrame((()=>{this.Wi||(this.addEventListener("pointerenter",(()=>{this.Ws===t.HighlightModes.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.Ws===t.HighlightModes.onHover&&this.setHighlight(!1)})))}))}re(){}ne(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.pointerEventsDisabled)&&i.pointerEventsDisabled,r=void 0!==(null==i?void 0:i.isText)&&i.isText;this.Js.set(t,{isText:r,pointerEventsDisabled:e});const n=Array.from(this.Js);this.Ks.te.he(n.filter((t=>t[1].isText)).map((t=>t[0]))),this.Ks.ie.he(n.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.Xi).vs(this.chart.Ki.ee.oe(this,!0)),Or.requestAnimationFrame((()=>{this.Wi||t.isDisposed()||(t.setPointerEvents(!0!==(null==i?void 0:i.pointerEventsDisabled)&&this.getPointerEvents()),s&&this._t.Ms(t,{getExtraData:(t,i,s)=>this.Es(s,t,i)}))}));const h=i=>{t.removeEventListener("dispose",h),this.Js.delete(t)};t.addEventListener("dispose",h)}ae(t){this.Xs=t;const i=this.chart.Ki.ee.oe(this,!0);t.forEach((t=>{t.vs(i).le(this.Xi)}))}Es(t,i,s){}ue(t){const i=this.chart.Ki.ce(t);if(i&&Array.from(this.Js.keys()).includes(i.entity))return this.Es(i.info,t,i.collectionMember)}setEffect(t){return this.Ks.te.de(t&&this.rs.effectsText),this.Ks.ie.de(t),this.chart.Ki.fe(),this}getEffect(){return this.Ks.te.ve()||this.Ks.ie.ve()}setIcon(t){return this.Ae=t,this.chart.Ki.fe(),this}getIcon(){return this.Ae}setName(t){return this.At=t,this}getName(){return this.At||"Component"}dispose(){return this.Wi||(this.Wi=!0,this.Js.forEach(((t,i)=>i.dispose())),this.Zs(this),this._t.kt("dispose",{}),this.chart.legend.remove(this),this.chart.Ki.fe()),this}setVisible(t){return t===this.Xi||(this.Xi=t,this.Js.forEach(((i,s)=>s.setVisible(t))),this.Xs.forEach((i=>i.le(t))),this._t.kt("visiblechange",{isVisible:t}),this.chart.ge.forEach((t=>t.ye())),this.chart.Ki.fe()),this}getVisible(){return this.Xi}setHighlight(t){return this.chart.Ki.ee.pe(this,t),this._t.kt("highlightchange",{highlight:Vn(t)}),this}getHighlight(){return this.chart.Ki.ee.oe(this)}setAnimationHighlight(t){return this.chart.Ki.ee.me(this,t),this}getAnimationHighlight(){return this.chart.Ki.ee.Se(this)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}getPointed(){if(!this.chart.Ki.be())return!1;for(const t of this.Js)if(this.chart.Ki.xe(t[0]))return!0;for(const t of this.Xs)if(this.chart.Ki.xe(void 0,t))return!0;return!1}setHighlightOnHover(i){return this.Ws="boolean"==typeof i?i?t.HighlightModes.onHover:t.HighlightModes.noHighlighting:i,this.Ws===t.HighlightModes.noHighlighting&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Ws!==t.HighlightModes.noHighlighting}Me(){}we(){return this.Ae}isDisposed(){return this.Wi}set draggable(t){this._t.draggable=t}get draggable(){return this._t.draggable}}class Do extends Bo{constructor(t,i,s,e,r,n,h,o){super(i,s,h,o),this._e=!0,this.ke=t,this.axis=e,this.ji=r,this.Ce=n,Or.requestAnimationFrame((()=>this.Te()))}setClipping(t){return this._e=t,this.ke.fe(),this}getClipping(){return this._e}}t.TextObjectIdentifier=void 0,(Po=t.TextObjectIdentifier||(t.TextObjectIdentifier={}))[Po.Other=0]="Other",Po[Po.CursorResultTable=1]="CursorResultTable",Po[Po.CursorTickMarker=2]="CursorTickMarker",Po[Po.ChartTitle=3]="ChartTitle",Po[Po.AxisTitle=4]="AxisTitle";const Eo=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Ro;t.PointShape=void 0,(Ro=t.PointShape||(t.PointShape={}))[Ro.Square=0]="Square",Ro[Ro.Circle=1]="Circle",Ro[Ro.HollowCircle=2]="HollowCircle",Ro[Ro.Triangle=3]="Triangle",Ro[Ro.Cross=4]="Cross",Ro[Ro.Diamond=5]="Diamond",Ro[Ro.Plus=6]="Plus",Ro[Ro.Minus=7]="Minus",Ro[Ro.Arrow=8]="Arrow",Ro[Ro.Star=9]="Star";const Oo=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",zo=t=>"ProgressiveX"===t||"ProgressiveY"===t,Vo=(t,i,s)=>t*(1-s)+i*s,No=(t,i,s,e,r)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===r.value)return;const n=(t.x-s.point.x)/(r.point.x-s.point.x),h=(r.point.y-s.point.y)*n+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(h-a),u=Vo(s.value,r.value,n),c=Vo(i.value,e.value,o);return Vo(c,u,l)},Go={warm:t=>i=>be(60/(t-1)*i,.8,.8),cold:t=>i=>be(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>be(360/t*i,.8,.8),reverseSpectrum:t=>i=>be(360/t*(t-i),.8,.8),flatUI:t=>i=>be(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return be(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return be(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return be(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return be(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return be(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>be(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return be(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return be(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),be(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return be(0,0,e);const r=i.getR()/255,n=i.getG()/255,h=i.getB()/255,o=Math.max(r,n,h),a=Math.min(r,n,h);let l=0;if(o!==a){const t=o-a;switch(o){case r:l=(n-h)/t+(n<h?6:0);break;case n:l=(h-r)/t+2;break;case h:l=(r-n)/t+4;break;default:l=0}return l=l/6*360,be(l,.8,e)}return be(0,0,e)},sector:(t,i,s=.8,e=.8)=>r=>n=>be(t+(i-t)/r*n,s,e),auroraBorealis:t=>i=>$o([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>$o([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>$o([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>$o([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>$o([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>$o([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},$o=(t,i,s)=>{const e=jo(i,s),[r,n]=Yo(e,t),h=Uo(t[r]),o=Uo(t[n]),a=0!==h.value?(o.value-e)/h.value:0,l={value:a,h:Vo(h.h,o.h,a),s:Vo(h.s,o.s,a),v:Vo(h.v,o.v,a)};return be(l.h,l.s,l.v)},Uo=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,r=Math.max(i,s,e),n=Math.min(i,s,e);let h=0;const o=r,a=r-n,l=0===r?0:a/r;if(r===n)h=0;else{switch(r){case i:h=(s-e)/a+(s<e?6:0);break;case s:h=(e-i)/a+2;break;case e:h=(i-s)/a+4}h/=6}return[360*h,l,o]})(Se(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},jo=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Yo=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Ho{constructor(){this.type="simple"}}const Wo=new Ho;class Xo{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=Se("#000"),this.specularColor=Se("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Zo=new Xo,Jo={Simple:Ho,Phong:Xo};class Qo{getFillStyle(){return ho}}const Ko=new Qo,qo=ue({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new uo,wireframeStyle:_r});class ta extends qo{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const ia=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),sa=ue({type:"pixelated-points-3d",size:5,fillStyle:new uo});class ea extends sa{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const ra=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),na={Triangulated:ta,Pixelated:ea},ha=ue({type:"linestyle",lineType:"solid",fillStyle:new uo({color:me(255,255,255)}),thickness:1});class oa extends ha{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Is(){const t=this.getThickness();return t<0?1:t}}const aa=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),la={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},ua=ue({type:"linestyle",lineType:"dashed",pattern:la.DashedEqual,fillStyle:new uo({color:me(255,255,255)}),thickness:1,patternScale:3});class ca extends ua{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Is(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const da=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),fa=ue({type:"icon",width:void 0,height:void 0,Fe:void 0,Ie:$r,Le:$r});class va extends fa{constructor(t,i,s,e){super({...e,Fe:t,Ie:i,Le:s})}dispose(){return this.Le(this),this}setWidth(t){const i=this.set("width",t);return this.Ie(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.Ie(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.Ie(s),s}li(){if(!this.Fe)return{x:0,y:0};const t=this.Fe.width,i=this.Fe.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Aa=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),ga=ue({type:"glow",color:me(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class ya extends ga{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class pa extends Ye{constructor(){super(...arguments),this.Ni="RadialScale",this.Pe={start:0,end:1},this.Be=!1,this.De=0,this.Bt=e(0,0),this.Ee=[0,0],this.Re=[0,0],this.o=!0,this.Ai=!0,this.Oe=!0,this.ze=!0,this.Ve={x:0,y:0},this.Fi={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Ne(t,i){return t===this.Pe.start&&i===this.Pe.end||(this.Pe={start:t,end:i},this.Oe=!0,this.Ge()),this}$e(){return this.Pe}Ue(){return this.Pe.end>=this.Pe.start}je(t){this.Be=t,this.ze=!0}Ye(){return!1===this.Be}He(t){this.De=t,this.ze=!0}We(){return this.De}yi(){return this.Ai}xi(){return!1}Gi(t,i,s,e){return this.x=new Ue(t.x,i.x,s.x,e?e.x:void 0),this.y=new Ue(t.y,i.y,s.y,e?e.y:void 0),this}Ti(){return this.Fi}Xe(){return this.Oe}Ze(){return this.ze}$i(){return this.Ve}Dt(){return this.o=!1,this.Ai=!1,this.Oe=!1,this.ze=!1,this}Et(){return this.o=!0,this.Ai=!0,this.Oe=!0,this.ze=!0,this}zt(t,i){return"object"==typeof t?(this.Bt.x=t.x,this.Bt.y=t.y):(this.Bt.x=t,this.Bt.y=i),this.Ge(),this}Ei(t){return this.Ee=t,this.Ge(),this}Ri(t){return this.Re=t,this.Ge(),this}ai(){return e(this.Ee[0]+this.Ee[1],this.Re[0]+this.Re[1])}li(){return this.Bt}Ge(){const t=this.Pe,i=e(this.x.ui(this.Bt.x),this.y.ui(this.Bt.y)),s=this.Ee[0]+this.Ee[1],r=this.Re[0]+this.Re[1],n=Math.max(i.x-s,0),h=Math.max(i.y-r,0),o=.5*(n>h?h:n),a=[this.Ee[0]+Math.max((n-2*o)/2,0),this.Ee[1]+Math.max((n-2*o)/2,0)],l=[this.Re[0]+Math.max((h-2*o)/2,0),this.Re[1]+Math.max((h-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.zt(this.Bt.x).ri(a).Rt(-u,u),this.y.zt(this.Bt.y).ri(l).Rt(-u,u),this.Ve={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Fi={x:this.x.Ti(),y:this.y.Ti()},this.Et()}Bi(t,i){const s=this.$i();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const r=this.$i(),n=Th(t,i);return n.x*=e,n.y*=e,{x:t.x+s*r.x*n.x,y:t.y+s*r.y*n.y}}}const ma=t=>{if(t instanceof He||t instanceof pa)return t.xi()?"linear-highPrecision":"linear";if(t instanceof We){const i={};return t.x instanceof Uh&&(i.x={base:t.x.Us()}),t.y instanceof Uh&&(i.y={base:t.y.Us()}),["logarithmic",i]}return"linear"},Sa=(t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,r=Math.cos(e),n=Math.sin(e);return{x:Math.abs(t*r)+Math.abs(i*n),y:Math.abs(t*n)+Math.abs(i*r)}},ba=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let r=!1;s[i]=t=>{if(!t)return r;const i=e();return r=i,i}})),s},xa=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.Ls(),max:i.Ps()}:"y"===t.getLookUpProperty()?{min:i.Bs(),max:i.Ds()}:"z"===t.getLookUpProperty()?{min:i.Je(),max:i.Qe()}:void 0,Ma=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),wa={init:i=>(i=>{const s=new Map;i.engine.addEventListener("locationchange",(()=>{s.forEach((t=>{t.bounds=void 0}))}));const e=t=>{let e=s.get(t.uid);if(!e){const r=document.createElement("p");r.className="lcjs-text",i.engine.container.append(r),r.style.userSelect="none",r.style.whiteSpace="nowrap",r.style.margin="0px",e={span:r,active:!0},s.set(t.uid,e),r.addEventListener("pointerenter",(s=>i.handleEvent(t,s))),r.addEventListener("pointermove",(s=>i.handleEvent(t,s))),r.addEventListener("pointerleave",(s=>i.handleEvent(t,s)))}if(e.text!==t.text&&(((t,i)=>{const s=t.includes("latex:"),e=!s&&t.includes("tex:");let r=!0;if(s||e)try{Or.MathJax&&s?(r=!1,i.innerHTML=t.replace(/latex:/g,""),Or.MathJax.typesetPromise([i]).catch((t=>Or.console.error(t.message)))):Or.katex&&e&&(r=!1,Or.katex.render(t.replace(/tex:/g,""),i,{throwOnError:!1}))}catch(t){r=!0}r&&(i.innerHTML=t)})(t.text,e.span),e.bounds=void 0),e.font!==t.font&&(e.span.style.font=t.font,e.bounds=void 0),e.position!==t.position&&(e.span.style.position=t.position,e.bounds=void 0),e.color!==t.color&&(e.span.style.color=t.color),e.padding!==t.padding&&(e.span.style.padding=t.padding,e.bounds=void 0),e.rotation!==t.rotation&&(e.span.style.transform=`rotate(${t.rotation}deg)`,e.bounds=void 0),e.span.style.lineHeight="80%",e.text!==t.text||e.left!==t.left||e.top!==t.top||e.alignmentX!==t.alignmentX||e.alignmentY!==t.alignmentY||e.padding!==t.padding||e.rotation!==t.rotation||e.font!==t.font){e.span.style.width="unset",e.span.style.height="unset";const i=e.span.clientWidth,s=e.span.clientHeight,r=Sa(i,s,t.rotation),n={x:(r.x-i)/2,y:(r.y-s)/2};e.span.style.left=`${t.left+(-.5*t.alignmentX-.5)*r.x+n.x}px`,e.span.style.top=`${t.top+(.5*t.alignmentY-.5)*r.y+n.y}px`,e.bounds=void 0}return e.text=t.text,e.font=t.font,e.position=t.position,e.color=t.color,e.padding=t.padding,e.rotation=t.rotation,e.left=t.left,e.top=t.top,e.alignmentX=t.alignmentX,e.alignmentY=t.alignmentY,e},r=t=>{const i=e(t);let s=i.bounds;return s||(s=i.span.getBoundingClientRect(),i.bounds=s),s},n="polygon(0 0, 0 0, 0 0, 0 0)";return{update:i=>{s.forEach((t=>t.active=!1)),i.textList.forEach((i=>{const s=e(i);s.active=!0,s.span.style.clipPath="unset",i.identifier,t.TextObjectIdentifier.Other})),i.obstructingOverlays.forEach((t=>{const e=Math.min(t.p1.clientX,t.p2.clientX)-0,h=Math.min(t.p1.clientY,t.p2.clientY)-0,o=Math.max(t.p1.clientX,t.p2.clientX)+0,a=Math.max(t.p1.clientY,t.p2.clientY)+0;i.textList.forEach((i=>{if(t.blacklist.includes(i.identifier))return;const l=s.get(i.uid),u=r(i);var c,d,f,v,A,g,y,p;if(c=e,d=h,f=o,v=a,A=u.left-0,g=u.top-0,y=u.right+0,p=u.bottom+0,!((c>=f?c:f)<(A<y?A:y)||(c<f?c:f)>(A>=y?A:y)||(d>=v?d:v)<(g<p?g:p)||(d<v?d:v)>(g>=p?g:p))&&l)if(0!==i.rotation)l.span.style.clipPath=n;else{const t=((t,i,s,e,r,n,h,o)=>{const a=t<s?t:s,l=t>=s?t:s,u=i<e?i:e,c=i>=e?i:e,d=r<h?r:h,f=r>=h?r:h,v=n<o?n:o,A=n>=o?n:o;if(d<a&&f>l&&v<u&&A>c)return[];if(d>=a&&f<=l&&v>=u&&A<=c){const t=.5*(c+u);return[{x:a,y:u},{x:l,y:u},{x:l,y:t},{x:f,y:t},{x:f,y:v},{x:d,y:v},{x:d,y:A},{x:f,y:A},{x:f,y:t},{x:l,y:t},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>d&&l<f){if(u<v&&A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:v},{x:d,y:v},{x:d,y:A},{x:l,y:A},{x:l,y:c},{x:a,y:c}];if(u>v&&u<A&&c>A)return[{x:a,y:u},{x:d,y:u},{x:d,y:A},{x:l,y:A},{x:l,y:c},{x:a,y:c}];if(v<u&&A>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:a,y:c}];if(v<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:v},{x:d,y:v},{x:d,y:c},{x:a,y:c}]}if(d<a&&f>a&&f<l){if(u<v&&A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:A},{x:f,y:A},{x:f,y:v},{x:a,y:v}];if(A>u&&v<u&&A<c)return[{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:A},{x:f,y:A},{x:f,y:u}];if(v<u&&A>c)return[{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c}];if(v<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:v},{x:a,y:v}]}if(a>d&&l<f){if(v<u&&A>u&&A<c)return[{x:a,y:A},{x:l,y:A},{x:l,y:c},{x:a,y:c}];if(u<v&&v<c&&A>c)return[{x:a,y:u},{x:l,y:u},{x:l,y:v},{x:a,y:v}];if(u<v&&A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:v},{x:a,y:v},{x:a,y:A},{x:l,y:A},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>f){if(u<v&&c>v)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:v},{x:d,y:v},{x:d,y:c},{x:a,y:c}];if(v<u&&A>u&&A<c)return[{x:a,y:u},{x:d,y:u},{x:d,y:A},{x:f,y:A},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}];if(v<u&&v<c&&A>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:f,y:c},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]}return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]})(u.left-0,u.top-0,u.right+0,u.bottom+0,e,h,o,a);l.span.style.clipPath=0===t.length?n:`polygon(${t.map((t=>`${100*(t.x-u.left)/u.width}% ${100*(t.y-u.top)/u.height}%`)).join(", ")})`}}))})),s.forEach(((t,i)=>{t.active||(t.span.remove(),s.delete(i))}))},measureText:t=>{if(!t.visible)return{x:0,y:0};const i=r(t);return{x:i.width,y:i.height}},getTextBoundingBox:t=>{if(t.visible)return r(t)},dispose:()=>{s.forEach((t=>{t.span.remove()}))}}})(i)};class _a{constructor(t,i){this.Ke=t,this.qe=i,this.tr=i.rows*il,this.ir=i.columns*sl}}var ka,Ca;t.OnScreenMenuButtonType=void 0,(ka=t.OnScreenMenuButtonType||(t.OnScreenMenuButtonType={}))[ka.ZoomIn=0]="ZoomIn",ka[ka.ZoomInX=1]="ZoomInX",ka[ka.ZoomInY=2]="ZoomInY",ka[ka.ZoomOut=3]="ZoomOut",ka[ka.ZoomOutX=4]="ZoomOutX",ka[ka.ZoomOutY=5]="ZoomOutY",ka[ka.ZoomToFit=6]="ZoomToFit",ka[ka.ToggleAnimations=7]="ToggleAnimations",t.OnScreenMenuButtonShape=void 0,(Ca=t.OnScreenMenuButtonShape||(t.OnScreenMenuButtonShape={}))[Ca.Circle=0]="Circle",Ca[Ca.Rectangle=1]="Rectangle",Ca[Ca.RoundedRectangle=2]="RoundedRectangle";const Ta={x:-43,y:0},Fa={x:-65,y:0},Ia={x:-86,y:0},La={x:-107,y:-1},Pa={x:-128,y:-3},Ba={x:-150,y:0},Da={x:-171,y:0},Ea={x:-276,y:0},Ra={x:-298,y:0},Oa={x:0,y:0},za={x:-21,y:0};class Va extends _a{constructor(t,i,s,e){super(t,s),this.sr=Or.document.createElement("button"),this.er=Or.document.createElement("div"),this.rr=Or.document.createElement("label"),this.qe=s,this.nr=i,this.hr=e}ar(t,i,s,e){this.lr(t,e),this.ur(),this.cr(i),this.dr(),this.rr.textContent=s||"";const r=Or.document.createElement("div");this.vr(r),this.sr.onclick=this.onClick.bind(this),r.appendChild(this.er),r.appendChild(this.rr),this.sr.appendChild(r)}dr(){this.sr.style.cursor="pointer"}vr(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}cr(t){"string"==typeof t?(this.er.style.backgroundImage=`url(${t})`,this.er.style.backgroundSize="100%",this.er.style.backgroundRepeat="no-repeat",this.er.style.backgroundPosition="center",this.er.style.width="20px",this.er.style.height="20px"):this.applyStyleForSprite(t),this.er.style.margin="auto"}ur(){switch(this.nr){case t.OnScreenMenuButtonShape.RoundedRectangle:this.sr.style.borderRadius="10px";break;case t.OnScreenMenuButtonShape.Rectangle:this.sr.style.borderRadius="0px";break;case t.OnScreenMenuButtonShape.Circle:default:this.sr.style.borderRadius="31px"}}lr(t,i){this.sr.style.width=`${this.ir.toString()}px`,this.sr.style.height=`${this.tr.toString()}px`,this.sr.style.backgroundColor=t,this.sr.style.opacity=i||el,this.sr.style.alignItems="center",this.sr.style.border="2px solid #707070",this.sr.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.er.style.backgroundImage=`url(${this.Ke}/${rl})`,this.er.style.backgroundPositionX=`${t.x}px`,this.er.style.backgroundPositionY=`${t.y}px`,this.er.style.backgroundSize="1600%",this.er.style.backgroundRepeat="no-repeat",this.er.style.width="20px",this.er.style.height="20px"}Ar(t){return t.appendChild(this.sr),t}gr(){return this.sr}}class Na extends Va{constructor(t,i,s,e){super(t,i,s,e),this.yr="",this.pr="",this.mr=!1,this.hr=e}Sr(){this.br(),this.onToggledStateAction()}Mr(){this.wr(),this.onInitialStateAction()}wr(){this._r(this.yr)}br(){this._r(this.pr)}_r(t){"string"==typeof t?this.er.style.background=t:(this.er.style.backgroundImage=`url(${this.Ke}/${rl})`,this.er.style.backgroundPositionX=`${t.x}px`,this.er.style.backgroundPositionY=`${t.y}px`)}onClick(){this.mr?this.Mr():this.Sr(),this.mr=!this.mr}}class Ga extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Ta)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:-1,y:-1})}}class $a extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),La)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:-1,y:0})}}class Ua extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Ba)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:0,y:-1})}}class ja extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Fa)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:1,y:1})}}class Ya extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Pa)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:1,y:0})}}class Ha extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Da)}onClick(){const t=this.hr.kr();t&&this.hr.zoom(t,{x:0,y:1})}}class Wa extends Na{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.yr=Ea,this.pr=Ra,this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),this.yr)}onToggledStateAction(){this.hr.setAnimationsEnabled(!1)}onInitialStateAction(){this.hr.setAnimationsEnabled(!0)}}class Xa extends Va{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.hr=i;const e=this.hr.getTheme();this.ar(e.onScreenMenuBackgroundColor.toRGBAString(),Ia)}onClick(){this.hr.forEachAxis((t=>{t.fit(!0)}))}}class Za extends Va{constructor(t,i,s){super(t,i.shape||nl,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),r=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),n=i.icon||"",h=i.label||"",o=i.opacity||"";this.ar(r,n,h,o),this.Cr=i.action}onClick(){this.Cr(this.hr)}}class Ja extends Na{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.hr=s,this.Tr=e,this.yr=za,this.pr=Oa,this.ar(hl,this.yr)}wr(){this._r(this.yr),this.sr.style.backgroundColor=hl,this.sr.style.border="2px solid #707070",this.sr.style.margin="0px"}br(){this._r(this.pr),this.sr.style.background="#FECC00 0% 0% no-repeat padding-box",this.sr.style.border="10px solid #BCBCBC12",this.sr.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Tr)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Tr)||void 0===t||t.style.setProperty("display","none")}}var Qa;t.MouseStyles=void 0,(Qa=t.MouseStyles||(t.MouseStyles={})).Move="move",Qa.ResizeColumn="col-resize",Qa.ResizeRow="row-resize",Qa.Horizontal="ew-resize",Qa.Vertical="ns-resize",Qa.NorthWest="nw-resize",Qa.NorthEast="ne-resize",Qa.Copy="copy",Qa.CrossHair="crosshair",Qa.Default="default",Qa.Help="help",Qa.Restricted="not-allowed",Qa.None="none",Qa.Point="pointer",Qa.Text="text",Qa.Wait="wait",Qa.ZoomIn="zoom-in",Qa.ZoomOut="zoom-out",Qa.Grab="grab",Qa.Grabbing="grabbing";const Ka={LeftBottom:e(-1,-1),CenterBottom:e(0,-1),RightBottom:e(1,-1),LeftCenter:e(-1,0),Center:e(0,0),RightCenter:e(1,0),LeftTop:e(-1,1),CenterTop:e(0,1),RightTop:e(1,1)},qa=new uo({color:me(255,255,255,0)}),tl=new oa({thickness:1,fillStyle:qa}),il=60,sl=60,el="1.0",rl="osm/osm-sprite-transparent.png",nl=t.OnScreenMenuButtonShape.Circle,hl="#363636";var ol;t.OSMPosition=void 0,(ol=t.OSMPosition||(t.OSMPosition={}))[ol.TopRight=0]="TopRight",ol[ol.TopLeft=1]="TopLeft",ol[ol.BottomLeft=2]="BottomLeft",ol[ol.BottomRight=3]="BottomRight";class al extends Do{constructor(t,i,s,e,r,n,h,o){super(t,i,s,e,r,n,h,o),this.At="Band",this.Fr=0,this.Ir=1,this.Lr=this.rs.bandFillStyle,this.Pr=this.rs.bandStrokeStyle,this._t=new Ar,this.Br=this.ke.Rr(this.ji).Er(this.Lr).Dr(this.Pr).vs(this.getHighlight()),this.ne(this.Br)}setValueStart(t){return this.Fr=t,this._t.kt("valuechange",{start:this.Fr,end:this.Ir}),this.ke.fe(),this}getValueStart(){return this.Fr}setValueEnd(t){return this.Ir=t,this._t.kt("valuechange",{start:this.Fr,end:this.Ir}),this.ke.fe(),this}getValueEnd(){return this.Ir}setFillStyle(t){this.Lr="function"==typeof t?t(this.Lr):t;const i=this.Lr;return this.Br.Er(i),this.ke.fe(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){this.Pr="function"==typeof t?t(this.Pr):t;const i=this.Pr;return this.Br.Dr(i),this.ke.fe(),this}getStrokeStyle(){return this.Pr}Or(){return this.Br.zr(this.Ce.toVec2(this.Fr,this.Ce.getHeight(this.ji).getInnerStart())).zt(this.Ce.toVec2(this.Ir-this.Fr,this.Ce.getHeight(this.ji).getInnerInterval())),ko(this._e,[this.Br],this.ji),this}Vr(){return{fill:this.Lr,stroke:this.Pr}}Nr(t,i){t.vs(i),this.ke.fe()}Te(){let i,s,e;const r=(t,r,n)=>{const h=Je(this.ke.Ki.Gr(t.clientX,t.clientY),this.ke.Ki.ji,this.ji),o=this.Ce.getWidth(h),a=this.axis.ji.pi(this.Fr),l=this.axis.ji.pi(this.Ir),u=(this.axis.ji.pi(o)-a)/(l-a);i=r&&(!(u<.1||u>.9)||!n),s=n&&!i,s&&(e=u<.5)},n=e=>{const n=this.getUserInteractions(),h=wo(n.move,"drag",e,e.shiftKey,e.ctrlKey,e.altKey),o=wo(n.scale,"drag",e,e.shiftKey,e.ctrlKey,e.altKey);r(e,!!(null==h?void 0:h.drag),!!(null==o?void 0:o.drag));const a=i?t.MouseStyles.Point:s?this.Ce.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical}):t.MouseStyles.Default;this.$r=this.chart.engine.setMouseStyle(a,this.$r)},h=t=>{this.$r=this.chart.engine.restoreMouseStyle(this.$r)};this.addEventListener("pointermove",n),this.addEventListener("pointerleave",h);const o=(t,r,n,h)=>{const o=this.Ce.getWidth(t);if(i){this.Fr=this.axis.ji.Bi(this.Fr,o),this.Ir=this.axis.ji.Bi(this.Ir,o);const t=null==n?void 0:n.on;t&&t({event:r})}else if(s&&e){this.Fr=this.axis.ji.Bi(this.Fr,o);const t=null==h?void 0:h.on;t&&t({event:r})}else if(s&&!e){this.Ir=this.axis.ji.Bi(this.Ir,o);const t=null==h?void 0:h.on;t&&t({event:r})}un(r),this._t.kt("valuechange",{start:this.Fr,end:this.Ir}),this.ke.fe()};this.addEventListener("pointerdown",(t=>{const e=this.getUserInteractions(),r=wo(e.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey),a=wo(e.scale,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(!(null==r?void 0:r.drag)&&i)return;if(!(null==a?void 0:a.drag)&&s)return;un(t);let l=t;const u=i=>{if(i.pointerId!==t.pointerId)return;const s={x:i.clientX-l.clientX,y:l.clientY-i.clientY};o(s,i,r,a),l=i},c=i=>{i.pointerId===t.pointerId&&(this.addEventListener("pointermove",n),this.addEventListener("pointerleave",h),Or.removeEventListener("pointermove",u),Or.removeEventListener("pointerup",c),qn())};this.removeEventListener("pointermove",n),this.removeEventListener("pointerleave",h),Or.addEventListener("pointermove",u),Or.addEventListener("pointerup",c)}))}setUserInteractions(t){return this.Ur=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return Er({move:{drag:!0},scale:{drag:!0}},this.Ur)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class ll extends Do{constructor(t,i,s,e,r,n,h,o){super(t,i,s,e,r,n,h,o),this.At="Constant Line",this.S=0,this.Pr=this.rs.constantLineStrokeStyle,this.jr=!0,this._t=new Ar,this.Yr=this.ke.Wr(this.ji).Hr(this.Pr).vs(this.getHighlight()),this.ne(this.Yr)}setValue(t){return this.S=t,this._t.kt("valuechange",{value:this.S}),this.ke.fe(),this}getValue(){return this.S}setStrokeStyle(t){this.Pr="function"==typeof t?t(this.Pr):t;const i=this.Pr;return this.Yr.Hr(i),this.ke.fe(),this}getStrokeStyle(){return this.Pr}Or(){return this.Yr.Zr(this.Ce.toVec2(this.S,this.Ce.getHeight(this.ji).getInnerStart())).Xr(this.Ce.toVec2(this.S,this.Ce.getHeight(this.ji).getInnerEnd())),ko(this._e,[this.Yr],this.ji),this}Vr(){return{stroke:this.Pr}}Nr(t,i){t.vs(i),this.ke.fe()}setUserInteractions(t){return this.Ur=void 0===t?{move:!1}:t,this}getUserInteractions(){return Er({move:{drag:!0}},this.Ur)}Te(){this.addEventListener("pointerenter",(i=>{const s=this.getUserInteractions();if(wo(s.move,"drag",i,i.shiftKey,i.ctrlKey,i.altKey)){const i=this.Ce.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.$r=this.chart.engine.setMouseStyle(i,this.$r)}})),this.addEventListener("pointerleave",(t=>{this.$r=this.chart.engine.restoreMouseStyle(this.$r)})),this.addEventListener("pointerdown",(t=>{const i=this.getUserInteractions(),s=wo(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(s){un(t),qn();let i=t;const e=t=>{const e={x:t.clientX-i.clientX,y:i.clientY-t.clientY};i=t,this.S=this.axis.ji.Bi(this.S,this.Ce.getWidth(e)),this._t.kt("valuechange",{value:this.S}),this.ke.fe();const r=s.on;r&&r({event:t})},r=i=>{i.pointerId===t.pointerId&&(Or.removeEventListener("pointermove",e),Or.removeEventListener("pointerup",r))};Or.addEventListener("pointermove",e),Or.addEventListener("pointerup",r)}}))}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const ul="fitting",cl="expansion",dl="progressive",fl="regressive",vl={fitting:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end,e=void 0===(null==t?void 0:t.considerVisibleRangeOnly)||t.considerVisibleRangeOnly;return{id:ul,init:t=>{t.axis.Jr((t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax}))},considerVisibleRangeOnly:e,apply:t=>{if(t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min:t.seriesDataRange.max:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max:t.seriesDataRange.min:t.curEnd,allowIntervalLengthChange:!0}}}},scrolling:t=>{const i=void 0!==(null==t?void 0:t.progressive)&&!t.progressive,s=!0===(null==t?void 0:t.realTime)?{}:null==t?void 0:t.realTime;if(s){const t=void 0!==s.catchUpThresholdMs?s.catchUpThresholdMs:3e3;let e;const r=t=>{t.isStopped&&(e=void 0)};return{id:i?fl:dl,init:t=>{t.axis.Jr((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax})),t.axis.addEventListener("stoppedchange",r)},dispose:t=>{t.axis.removeEventListener("stoppedchange",r)},considerVisibleRangeOnly:!0,apply:s=>{if(!s.seriesDataRange)return;const r=Or.performance.now();if(void 0!==e){const n=(r-e)*(i?-1:1);let h=s.curStart+n,o=s.curEnd+n;const a=s.axis.Qr({forStart:h,forEnd:o,allowIntervalLengthChange:!1});if(!i&&a&&s.curEnd>s.curStart&&a.end-o>=t){const t=a.end-o;o+=t,h+=t}if(!i&&a&&s.curEnd<s.curStart&&a.start-h>=t){const t=a.start-h;o+=t,h+=t}return e=r,{start:h,end:o,allowIntervalLengthChange:!1,keepScrolling:!0,allowAnimation:!1}}return e=r,{keepScrolling:!0,start:s.curStart,end:s.curEnd,allowIntervalLengthChange:!1,allowAnimation:!1}}}}return{id:i?fl:dl,init:t=>{t.axis.Jr((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax}))},considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange){if(Math.sign(t.curEnd-t.curStart)*Math.sign(i?-1:1)>0){const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{end:s,start:s+(t.curStart-t.curEnd),allowIntervalLengthChange:!1}}{const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{start:s,end:s+(t.curEnd-t.curStart),allowIntervalLengthChange:!1}}}}}},expansion:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:cl,considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min<t.curStart?t.seriesDataRange.min:t.curStart:t.seriesDataRange.max>t.curStart?t.seriesDataRange.max:t.curStart:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max>t.curEnd?t.seriesDataRange.max:t.curEnd:t.seriesDataRange.min<t.curEnd?t.seriesDataRange.min:t.curEnd:t.curEnd,allowIntervalLengthChange:!0}}}},nextPowerOf10:{id:ul,start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?10**Math.ceil(Math.log10(e)):10**Math.ceil(Math.log10(s)),allowIntervalLengthChange:!0},fittingStepped:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:ul,considerVisibleRangeOnly:!0,apply:t=>{if(void 0===t.seriesDataRange)return;let e,r;if(i)if(t.curEnd>=t.curStart)if(t.seriesDataRange.min<t.curStart)e=t.curStart-(t.curEnd-t.curStart);else{const i=t.curStart+.5*(t.curEnd-t.curStart);e=t.seriesDataRange.min>i?i:t.curStart}else if(t.seriesDataRange.max>t.curStart)e=t.curStart+(t.curStart-t.curEnd);else{const i=t.curStart-.5*(t.curStart-t.curEnd);e=t.seriesDataRange.max<i?i:t.curStart}else e=t.curStart;if(s)if(t.curEnd>=t.curStart)if(t.seriesDataRange.max>t.curEnd)r=t.curEnd+(t.curEnd-t.curStart);else{const i=t.curEnd-.5*(t.curEnd-t.curStart);r=t.seriesDataRange.max<i?i:t.curEnd}else if(t.seriesDataRange.min<t.curEnd)r=t.curEnd-(t.curStart-t.curEnd);else{const i=t.curEnd+.5*(t.curStart-t.curEnd);r=t.seriesDataRange.min>i?i:t.curEnd}else r=t.curEnd;return{start:e,end:r,allowIntervalLengthChange:!0}}}}},Al={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},gl=t=>void 0!==t.Kr,yl=t=>void 0!==t.qr,pl=t=>void 0!==t.tn,ml=(t,i,s,e,r,n,h)=>[n,h],Sl=(t,i,s,e)=>{const r=[],n=Math.round(Math.abs((t-i)/s));for(let h=1;h<n;h+=1){let n=t+s*h;void 0!==e&&(n=Math.round(n*e)/e),n<i&&r.push(n)}return r},bl=(t,i,s,e,r)=>{Ur(t,0)&&(t=0),Ur(i,0)&&(i=0);const n=[],h=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;let o=h;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);let a=0;for(;(o-t)/(i-t)<.98;)n.push(o),a+=1,o=h+a*s,void 0!==r&&(o=Math.round(o*r)/r);return n.push(o),n},xl=(t,i,s,e)=>{const r=[];let n=s(t),h=0;for(;n<i&&!1===Ur(n,i);)if(r.push(n),n=e(n),h+=1,h>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r},Ml=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,r,n,h,o,a)=>{if(r>=s)return;const l=i[r]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,r)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+r)%i==0))))(e,l,u,c,d)}},wl=(...t)=>{const i=t.length>0?t.length:0;return(s,e,r,n,h,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},_l=ue({cursorFormatter:void 0});class kl extends _l{sn(t){return{en:[],rn:[],nn:this.cursorFormatter?this.cursorFormatter:Jh.Numeric,hn:void 0,an:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const Cl=t=>t&&"function"==typeof t?t():t,Tl=(t,i,s,e,r,n,h,o,a,l,u)=>{let c=a.get(h);if(c||(c=new Map,a.set(h,c)),c.has(t))return c.get(t);if(0===i.length)return rh;const d=u.ln(i,h.un.labelFont,r),f=o.Bi(s,{x:-(e.x/2+.5)*d.x+n.x-l,y:-(e.y/2+.5)*d.y+n.y-l}),v=o.Bi(f,{x:d.x+l,y:d.y+l}),A={min:{x:Math.min(f.x,v.x),y:Math.min(f.y,v.y)},max:{x:Math.max(f.x,v.x),y:Math.max(f.y,v.y)}};return c.set(t,A),A},Fl=(new kl).sn({type:"linear"});class Il{constructor(i,s,e,r,n,h,o){this.cn=Fl,this.dn=Al.Empty,this.fn=new Map,this.vn=!0,this.An=mr((()=>this.chart.Ki.fe()))(300,yr.linear),this.gn=!0,this.Xi=!0,this.yn=!1,this.pn=eh,this.mn=!1,this.Sn=!1,this.bn=eh,this.xn=eh,this.Mn=eh,this.wn=!1,this._n="",this.kn=!1,this.Cn=!1,this.Tn=!1,this.Fn=()=>{this.Ln.In=t.TextObjectIdentifier.AxisTitle,this.Ln.setPointerEvents(!0),this.title.Ms(this.Ln),this.Fn=void 0},this.Pn=(t,i,s,e,r,n,h,o,a,l,u)=>{const c=this.Bn(),d=[],f=t.filter((t=>this.Dn(t.keyValue,t.labelText,i))),v=[...f,...a.filter((t=>this.Dn(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,A=[];if(this.Dn(a.keyValue,a.labelText,i)){const t=Tl(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,i,c,o,u,this.chart.Ki.En);A=zn(v.map((i=>i&&i!==a&&oh(t,Tl(i.keyValue,i.labelText,i.labelPosition,i.labelAlignment,i.labelRotation,i.labelOffset,i.tickLevel,c,o,u,this.chart.Ki.En))?i:void 0))),l=A.length>0}else l=!1;if(l){let o=!0;if(o&&A.every((t=>gl(t.tickLevel)))&&(o=!1),o&&i.Rn&&i.Rn.On&&!1===i.Rn.On(a.keyValue,s,e,r,n,h)&&(o=!1),!1===o){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.cn.nn(t,{start:this.ji.getInnerStart(),end:this.ji.getInnerEnd()}),this.zn=!0,this.Vn=!0,this.title=new Ar,this.chart=i,this.Nn=s,this.rs=r,this.Gn=h,this.ji=e,this.$n=o,"logarithmic"===o.type&&this.setAnimationZoom(yr.logarithmic(Yh(o.base))),this.Un=h.numeric,this.jn("Numeric"),this.Yn=e.getInnerStart(),this.Hn=e.getInnerEnd(),this.setAnimationsEnabled(n),this.setScrollStrategy(vl.fitting)}setUnits(t,i={}){return this.Wn=t,this.Hs=i,this.Xn(),this}getUnits(){return this.Wn}setDefaultInterval(t,i){return this.Zn=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.wn=!0,this.chart.Ki.fe()),this.Jn=void 0!==(null==i?void 0:i.skipIntervalRestrictions)?i.skipIntervalRestrictions:void 0,this}getDefaultInterval(){return this.Zn}getTitle(){return this._n}setTitle(t){return this._n=t,this.Xn(),this}getTitleFillStyle(){return this.Ln.Qn()}setIntervalRestrictions(t){return this.Kn=t,this.kn=!0,this.chart.Ki.fe(),this}getIntervalRestrictions(){if("function"==typeof this.Kn){const t=this.qn();return this.Kn({curStart:this.Yn,curEnd:this.Hn,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Kn}Jr(t){this.kn||this.Cn||(this.Kn=t)}setTitleFillStyle(t){return this.Ln.Er(t),this.chart.Ki.fe(),this}getTitleFont(){return this.Ln.th()}setTitleFont(t){return this.Ln.ih(t),this.chart.Ki.fe(),this}setTitleRotation(t){return this.Ln.eh(t),this.chart.Ki.fe(),this.Tn=!0,this}getTitleRotation(){return this.Ln.rh()}setTitleEffect(t){return this.hh.de(t),this.chart.Ki.fe(),this}getTitleEffect(){return this.hh.ve()}jn(t,i){if(this.fn.size>0&&this.oh(),"Empty"===t){const s=i||(t=>t);this.Un=s(new kl),this.cn=this.Un.sn(this.$n),this.dn=t}else if("Numeric"===t){"Numeric"!==this.dn&&(this.Un=this.Gn.numeric);const s=i||(t=>t);this.Un=s(this.Un),this.cn=this.Un.sn(this.$n),this.dn=t}else if("DateTime"===t){"DateTime"!==this.dn&&(this.Un=this.Gn.datetime);const s=i||(t=>t);this.Un=s(this.Un),this.cn=this.Un.sn(this.$n),this.dn=t}else if("Time"===t){"Time"!==this.dn&&(this.Un=this.Gn.time);const s=i||(t=>t);this.Un=s(this.Un),this.cn=this.Un.sn(this.$n),this.dn=t}return this.chart.Ki.fe(),this}ah(){return this.cn}uh(t,i){this.cn=t,this.dn=i,this.chart.Ki.fe()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:r}=t;return this.kn||(this.Cn=!0,this.Kn=void 0),this.Yi(void 0!==i?i:this.Yn,void 0!==s?s:this.Hn,void 0!==e&&e,void 0===r||r,"userSetInterval"),this}Yi(t,i,s=!1,e=!0,r){let n={start:t,end:i};const h="synchronizedAxis"===r||"setDefaultInterval"===r&&!1!==this.Jn,o="setDefaultInterval"!==r,a=Math.abs(i-t),l=Math.abs(this.Hn-this.Yn);if(void 0!==this.cn.hn&&this.cn.hn>a){const s=(i+t)/2,e=(o?this.cn.hn/2:l/2)*(t>i?-1:1);n={start:s-e,end:s+e}}if(void 0!==this.cn.an&&this.cn.an<a){const s=(i+t)/2,e=(o?this.cn.an/2:l/2)*(t>i?-1:1);n={start:s-e,end:s+e}}const u=this.ji.Yt(n.start,n.end,this.Yn,this.Hn,o);if(!1===u)return this;if(!0===u);else if(n=u,"zoomBandChartOther"===r)return this;let c;switch(r){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":case"zoomBandChartClick":c=!0;break;case"zoomBandChartOther":case"synchronizedAxis":c=!1;break;default:return Nn(0,""),this}if(this.dh&&this.dh.finishAll(!1),this.An&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.dh||this.dh.isOver()?this.An:this.dh.NextAnimation.bind(this);this.dh=i([[this.Yn,n.start],[this.Hn,n.end]],(([t,i])=>{this.fh(t,i,{allowIntervalLengthChange:o,skipIntervalRestriction:h})}),t),this.dh.addEventListener("end",(()=>{this.dh=void 0,c&&(this.Mn=Or.performance.now())})),this.dh.addEventListener("end",(()=>{this.setStopped(e)}))}else this.fh(n.start,n.end,{allowIntervalLengthChange:o,skipIntervalRestriction:h}),this.setStopped(e),c&&(this.Mn=Or.performance.now());return this}getInterval(){return{start:this.Yn,end:this.Hn}}setStopped(t){return t===this.yn||(t&&(this.dh&&this.dh.finishAll(!1),this.dh=void 0),this.yn=t,this._t.kt("stoppedchange",{isStopped:this.yn}),this.pn=Or.performance.now(),this.chart.Ki.fe()),this}getStopped(){return this.yn}fit(t,i){const s=this.qn(),e=this.Zn||El,r="function"==typeof e?e({curStart:this.Yn,curEnd:this.Hn,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.Yi(void 0!==r.start?r.start:this.Yn,void 0!==r.end?r.end:this.Hn,void 0!==t?t:void 0!==r.animate?r.animate:this.gn,void 0!==i?i:void 0===r.stopAxisAfter||r.stopAxisAfter,this.Zn?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){var i,s;return(null===(i=this.Ah)||void 0===i?void 0:i.dispose)&&this.Ah.dispose({axis:this}),this.Ah=Cl(t),this.kn||(this.Kn=void 0),(null===(s=this.Ah)||void 0===s?void 0:s.init)&&this.Ah.init({axis:this}),this.chart.Ki.fe(),this}getScrollStrategy(){return this.Ah}setAnimationScroll(t){return this.vn=Boolean(t),this.chart.Ki.fe(),this}setAnimationZoom(t,i=300){return this.dh&&(this.dh.finishAll(!1),this.dh=void 0),this.An=t?mr((()=>this.chart.Ki.fe()))(i,t):void 0,this}setAnimationsEnabled(t){return this.gn=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(yr.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.gn}setVisible(t){const i=this.Xi!==t;return this.Xi=t,this.Ln.setVisible(t),this.gh((i=>{i.ph.setVisible(t)})),i&&this._t.kt("visiblechange",{isVisible:this.Xi}),this}getVisible(){return this.Xi}mh(t){return!1}Sh(t){this.Fn&&this.Fn(),this.title.setPointerEvents(this.title.ps.length>0);const i=this.bh(),s=i.min,e=i.max;if(!this.mh(t)||!this.Mh||this.Tn){const i=new Map,r=new Map,n=Pl(this.cn,s,e,this.Yn,this.Hn,t.physicalAxisSize,Math.min(this.Yn,this.Hn),Math.max(this.Yn,this.Hn));this.wh();const h=Vo(3,20,jr((t.physicalAxisSize-30)/270,0,1)),o={...t,...this._h(t)},a=this.kh(this.cn,Math.min(s,this.Yn,this.Hn),Math.max(e,this.Yn,this.Hn),n,i,o,r,h),l=this.Ch(this.cn,Math.min(s,this.Yn,this.Hn),Math.max(e,this.Yn,this.Hn),n,i,o,a,r,h),u=new Map([...a,...l]),c=this.cn.Th,d=void 0!==this.cn.rn.find((t=>yl(t)&&!oo(t.un.labelFillStyle)));if(c&&d&&Array.from(u).reduce(((t,i)=>t+(i[1].labelText.length>0&&!oo(i[0].ph.Qn())?1:0)),0)<=1){this.wh(),u.clear();const i=[Math.min(this.Yn,this.Hn),Math.max(this.Yn,this.Hn)],s={start:this.ji.getInnerStart(),end:this.ji.getInnerEnd()};i.forEach((i=>{const e=this.Fh(i,c,c.qr(i,s),t,o),r=this.Ih(e.keyValue,c,o,e,e.labelText);u.set(r,e)}))}return this.Lh(),this.Mh={...o,...this.Ph(t,u,!0),min:s,max:e},this.Mh}let r=!1;return this.fn.forEach((t=>{t.forEach(((i,n)=>{(n<s||n>e)&&(i.dispose(),t.delete(n),r=!0)}))})),{...this.Mh,updatedTicks:r}}Bh(t,i,s){const e=i.un;s.length>0?t.ph.Er(e.getLabelFillStyle()).ih(e.getLabelFont()).Eh(s).setVisible(this.getVisible()).Dh(e.getLabelShadow()):t.ph.setVisible(!1)}Ih(t,i,s,e,r){const n=this.fn.get(i)||new Map;this.fn.set(i,n);let h=n.get(t);return h||(h=this.Rh(t,i,s,e),n.set(t,h)),this.Bh(h,i,r),h.Oh=!1,h}kh(t,i,s,e,r,n,h,o){const a=new Map,l=this.Bn(),u=[];for(const c of t.en){const t=e.get(c).filter((t=>t>=i&&t<=s)),d=t.map((t=>this.Fh(t,c,c.qr(t,{start:this.ji.getInnerStart(),end:this.ji.getInnerEnd()}),n,n)));for(let i=0;i<t.length;i+=1){const s=t[i],e=d[i],f=this.Ih(s,c,n,e,e.labelText),v=Tl(f.S,f.ph.zh(),e.labelPosition,e.labelAlignment,e.labelRotation,{x:0,y:0},c,l,r,o,this.chart.Ki.En);u.find(((t,i)=>{const s=d[i];return oh(v,Tl(t.S,t.ph.zh(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},c,l,r,o,this.chart.Ki.En))}))&&f.ph.setVisible(!1),f.Oh=!1,h.set(f,e),u.push(f),a.set(f,e)}}return a}Ch(t,i,s,e,r,n,h,o,a){var l;const u={start:this.ji.getInnerStart(),end:this.ji.getInnerEnd()},c=new Map,d=Array.from(h.values());let f,v=[];for(const A of t.rn){const g=A===t.rn[t.rn.length-1],y=e.get(A);if(!y)break;let p;if(void 0===f)p=[{start:i,end:s,keyValues:y}];else{p=[];for(let t=0;t<f.length-1;t+=1){const e=f[t],r=f[t+1],n={start:e,end:r,keyValues:[]};for(const t of y)t>=e&&t<r&&n.keyValues.push(t);n.end<i||n.start>s||p.push(n)}}if(f=y,pl(A))continue;let m,S=0,b=!1,x=-1,M=!0,w=[];for(let t=0;t<p.length;t+=1){const i=p[t].keyValues.map((t=>this.Fh(t,A,A.qr(t,u),n,n)));w=w.concat(i)}if(A.un.getLabelFillStyle()!==ho)for(m=[];++x<p.length;){const t=p[x],e=t.start,n=t.end;let o=t.keyValues;if(S>0){if(void 0===A.Rn){M=!1;break}if(o=(0,A.Rn.Vh)(t.keyValues,S-1,e,n,i,s),void 0===o)break}const l=zn(o.map((t=>w.find((i=>i.keyValue===t)))));if(b)m=m.concat(l);else{const t=this.Pn(l,A,S,e,n,i,s,r,d,v,a);if(!0===t){S+=1,x=-1,m=[];continue}m=m.concat(t)}t!==p[p.length-1]||h.size+m.reduce(((t,e)=>t+(fh(e.keyValue,i,s)?1:0)),0)>=2||g||b||(b=!0,S-=1,x=-1,m=[])}else m=w;const _=m.reduce(((t,e)=>t+(fh(e.keyValue,i,s)?1:0)),0);void 0!==A.Nh&&_<A.Nh&&(m.length=0);const k=[];for(const t of w){if(t.keyValue<i||t.keyValue>s)continue;const e=m.includes(t);if(!e&&"hide-tick"===(null===(l=A.Rn)||void 0===l?void 0:l.Gh))continue;t.labelText=e?t.labelText:"";const r=this.Ih(t.keyValue,A,n,t,t.labelText);o.set(r,t),k.push(t),c.set(r,t)}if(v=k,!M)break}return c}gh(t){for(const i of this.fn.values())for(const s of i.values())t(s)}$h(t,i){for(const s of this.fn.values())for(const e of s.values())i=t(i,e);return i}oh(){this.fn.forEach(((t,i)=>{t.forEach((t=>{t.dispose()}))})),this.fn.clear()}wh(){for(const t of this.fn.values())for(const i of t.values())i.Oh=!0}Lh(){for(const t of this.fn.values()){const i=Array.from(t.entries());for(let s=0;s<i.length;s+=1){const[e,r]=i[s];r.Oh&&(r.dispose(),t.delete(e))}}}bh(){const t=this.ji.getInnerStart()<this.ji.getInnerEnd()?this.ji.getInnerStart():this.ji.getInnerEnd(),i=this.ji.getInnerEnd()>this.ji.getInnerStart()?this.ji.getInnerEnd():this.ji.getInnerStart();return a(t,i)}Dn(t,i,s){return 0!==i.length&&(!gl(s)||!0===s.Uh)}jh(t,i){return"Empty"===this.dn||(this.cn.en.forEach((s=>{i=t(i,s.un)})),this.cn.rn.forEach((s=>{yl(s)&&(i=t(i,s.un))}))),i}getSeriesDataRange(){const t=this.qn();if(t&&!0!==t.emptyBounds)return t}Qr(t){const i=void 0!==t.forStart?t.forStart:this.Yn,s=void 0!==t.forEnd?t.forEnd:this.Hn,e=this.qn();if(e)return Dl(this.Kn,e,{start:s>i?e.min:e.max,end:s>i?e.max:e.min},{start:i,end:s},!0)}qn(){const t=!this.Ah||this.Ah.considerVisibleRangeOnly;let i=this.Nn.Yh(t);const s=this.Nn.Hh(t);let e;if(void 0!==i&&Vr(i)&&void 0!==s&&Vr(s)&&("logarithmic"===this.$n.type&&(0===i&&(i=Math.min(1,s)),Math.sign(i)!==Math.sign(s)&&(i=Math.min(1,s-.1))),e?(e.min=Math.min(e.min,i),e.max=Math.max(e.max,s)):e=a(i,s)),e&&Vr(e.min)&&Vr(e.max))return Ur(e.min,e.max)?{min:e.min-1,max:e.max+1,emptyBounds:!0}:e}Wh(){if(!1===this.zn)return{start:0,end:0};if("object"==typeof this.zn)return this.zn;let t=0;const i=this.Nn.Xh();return i&&(t=Math.max(t,i)),{start:t,end:t}}setScrollMargins(t){return this.zn=void 0!==t&&("number"==typeof t?{start:t,end:t}:t),this.chart.Ki.fe(),this}getScrollMargins(){return this.zn}setAutoRegionsEnabled(t){return this.setScrollMargins(t),this}Zh(){const t=this.mn;let i=!1;if(this.wn&&this.Zn){const t=this.qn();if(t){const i="function"==typeof this.Zn?this.Zn({curStart:this.Yn,curEnd:this.Hn,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Zn;if("object"==typeof this.Zn&&!this.kn){const s=Dl(this.Kn,t,{start:void 0!==i.start?i.start:this.Yn,end:void 0!==i.end?i.end:this.Hn},this.getInterval(),!0);s.start===i.start&&s.end===i.end||(this.Cn=!0,this.Kn=void 0)}this.Yi(void 0!==i.start?i.start:this.Yn,void 0!==i.end?i.end:this.Hn,void 0!==i.animate&&i.animate,void 0===i.stopAxisAfter||i.stopAxisAfter,"setDefaultInterval"),this.wn=!1,this.Jn=void 0}}if(this.Ah&&!this.yn){let t=this.qn();(null==t?void 0:t.emptyBounds)&&this.Ah.id===cl&&(t=void 0);const s=this.Yn,e=this.Hn,r=this.Ah.apply({axis:this,curStart:s,curEnd:e,seriesDataRange:t});if(r){const n=Dl(this.Kn,t,{start:r.start,end:r.end},{start:s,end:e},r.allowIntervalLengthChange);let h=n.start,o=n.end;const a=!1===Ur(s,h)||r.keepScrolling,l=!1===Ur(e,o)||r.keepScrolling;if(h=a?h:s,o=l?o:e,a||l){let t=!1;if(this.vn&&!this.Vn&&!1!==r.allowAnimation)if(this.vn){t=!0;const n=a?this.Jh(s,h):s,u=l?this.Jh(e,o):e;if(!0===this.fh(n,u,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1})&&(a&&!1===Ur(n,h)||l&&!1===Ur(u,o))||!0===r.keepScrolling){this.chart.Ki.fe(!0),i=!0;let t=Math.abs(o-h)/Math.abs(n-u);t<1&&(t=1/t),this.Sn=t>=1.4}}else t=!1;t||(this.fh(h,o,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1}),!0===r.keepScrolling&&this.chart.Ki.fe(!0)),this.Vn=!1}}}return i?(this.mn!==i&&(this.mn=i,this.bn=Or.performance.now()),this.Qh&&(clearTimeout(this.Qh),this.Qh=void 0)):!0===t&&void 0===this.Qh&&(this.Sn=!1,this.Qh=setTimeout((()=>{!1!==this.mn&&(this.mn=!1,this.bn=Or.performance.now()),this.Qh=void 0,this.chart.Ki.fe()}),200)),this}Kh(){const t=this.getInterval(),i=this.qn();return"function"==typeof this.Kn?this.Kn({curStart:t.start,curEnd:t.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):this.Kn}fh(t,i,s){let e={start:t,end:i};const{allowIntervalLengthChange:r,skipIntervalRestriction:n}=s;let h=!0;if(this.Kn&&!n){const t=this.qn();e=Dl(this.Kn,t,e,{start:this.Yn,end:this.Hn},r)}const o=Math.abs(i-t),a=Math.abs(this.Hn-this.Yn);if(void 0!==this.cn.hn&&this.cn.hn>o){const s=(i+t)/2,n=(r?this.cn.hn/2:a/2)*(t>i?-1:1);e={start:s-n,end:s+n},h=!1}if(void 0!==this.cn.an&&this.cn.an<o){const s=(i+t)/2,n=(r?this.cn.an/2:a/2)*(t>i?-1:1);e={start:s-n,end:s+n},h=!1}let l=this.ji.Yt(e.start,e.end,this.Yn,this.Hn,r);if(!1===l)return!1;!0!==l&&(e=l);const u=this.Wh(),c=this.qh(e.start,e.end,u);return l=this.ji.Yt(c.start,c.end,this.Yn,this.Hn,!1),!!l&&(!0===l?this.ji.Rt(c.start,c.end):this.ji.Rt(e.start,e.end),this.Yn=e.start,this.Hn=e.end,this._t.kt("intervalchange",{start:e.start,end:e.end}),this.xn=Or.performance.now(),this.chart.Ki.fe(),h)}io(){return this.mn}so(){return void 0!==this.dh}Xn(){var t;const i=!1!==(null===(t=this.Hs)||void 0===t?void 0:t.displayOnAxis);this.Ln.Eh(this.Wn&&i&&this._n?`${this._n} (${this.Wn})`:this._n),this.chart.Ki.fe()}}class Ll{constructor(t,i,s,e,r=s.no(e).ro(Hn).eo(Hn).setPointerEvents(!1)){this.Oh=!1,this.Wi=!1,this.Js=[],this.ho=t,this.S=i,this.oo=s,this.ao=e,this.ph=r,this.Js.push(r)}le(t){this.Js.forEach((i=>i.setVisible(t)))}dispose(){return this.Wi||(this.Wi=!0,this.Js.forEach((t=>t.dispose()))),this}}const Pl=(t,i,s,e,r,n,h,o,a=!1)=>{const l=new Map;for(const a of t.en){let t=a.lo(i,s,e,r,n,h,o);t=Bl(t),l.set(a,t)}let u;for(const e of t.rn){let r;if(void 0===u)r=e.lo(i,s,i,s,n);else{if(a&&e===t.rn[t.rn.length-1])break;let h=[];const o=u.filter((t=>i<=t&&t<=s)).length;if(o>0){const t=n/(o-1);if(void 0!==e.uo&&e.uo>t)break}for(let t=0;t<u.length-1;t+=1){const r=e.lo(u[t],u[t+1],i,s,n);h=h.concat(r)}r=h}r=Bl(r),l.set(e,r),u=r}return l},Bl=t=>Array.from(new Set(t)),Dl=(t,i,s,e,r)=>{const n="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!n)return s;const h={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==n.intervalMin&&o<n.intervalMin){const t=(h.start+h.end)/2;h.start=t+.5*Math.sign(s.start-t)*n.intervalMin,h.end=t+.5*Math.sign(s.end-t)*n.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==n.intervalMax&&o>n.intervalMax){const t=(h.start+h.end)/2;h.start=t+.5*Math.sign(s.start-t)*n.intervalMax,h.end=t+.5*Math.sign(s.end-t)*n.intervalMax}return o=Math.abs(s.end-s.start),void 0!==n.startMin&&(h.start=Math.max(h.start,n.startMin),r||Ur(Math.abs(h.start-h.end),o)||(h.end=h.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==n.startMax&&(h.start=Math.min(h.start,n.startMax),r||Ur(Math.abs(h.start-h.end),o)||(h.end=h.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==n.endMin&&(h.end=Math.max(h.end,n.endMin),r||Ur(Math.abs(h.start-h.end),o)||(h.start=h.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==n.endMax&&(h.end=Math.min(h.end,n.endMax),r||Ur(Math.abs(h.start-h.end),o)||(h.start=h.end+Math.sign(s.start-s.end)*o)),Math.sign(h.end-h.start)!==Math.sign(s.end-s.start)?{end:h.start,start:h.end}:h},El=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Rl=i=>{const s=i.getDraggingMode();return void 0!==s&&s!==t.UIDraggingModes.notDraggable?s===t.UIDraggingModes.draggable?t.MouseStyles.Move:s===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical:void 0};class Ol{constructor(){this.Xi=!0}set draggable(t){this._t.draggable=t}get draggable(){return this._t.draggable}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}setVisible(t){const i=this.Xi!==t;return this.Xi=t,i&&this._t.kt("visiblechange",{isVisible:this.Xi}),this}getVisible(){return this.Xi}}class zl extends Ol{constructor(i,s,r,n,h){super(),this._t=new Ar,this.co=e(50,50),this.origin=e(0,0),this.size=e(0,0),this.Wi=!1,this.do=void 0,this.fo=void 0,this.vo=Rl,this.Ao=void 0,this.Zt=c(0,0,0,0),this.ke=i,this.renderingScale=s,this.scale=r,this.qi=n,this.rs=h,this.ke.fe(),this.rs=h,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.vo?this.vo(this):this.vo;t&&(this.fo=this.ke.Ki.yo(t))})),this.addEventListener("pointerleave",(()=>{this.ke.Ki.po(this.fo)}));const o=i=>{const s=this.getDraggingMode();if(s===t.UIDraggingModes.notDraggable)return;un(i);let e=i;const r=i=>{const r={x:i.clientX-e.clientX,y:i.clientY-e.clientY};e=i;const n=this.scale.Bi(this.getPosition(),{x:s!==t.UIDraggingModes.onlyVertical?r.x:0,y:s!==t.UIDraggingModes.onlyHorizontal?-r.y:0}),h=this.scale,o=this.getSize(),a=this.getOrigin(),l=h.Bi({x:h.x.getInnerStart(),y:h.y.getInnerStart()},Bh({x:(1+a.x)/2,y:(1+a.y)/2},o)),u=h.Bi({x:h.x.getInnerEnd(),y:h.y.getInnerEnd()},Bh({x:(a.x-1)/2,y:(a.y-1)/2},o)),c={x:Math.min(Math.max(n.x,l.x),u.x),y:Math.min(Math.max(n.y,l.y),u.y)};this.setPosition(c)},n=t=>{this.ke.Ki.mo.removeEventListener("pointermove",r),this.ke.Ki.mo.removeEventListener("pointerup",n),this.addEventListener("pointerdown",o)};this.removeEventListener("pointerdown",o),this.ke.Ki.mo.addEventListener("pointermove",r),this.ke.Ki.mo.addEventListener("pointerup",n)};this.addEventListener("pointerdown",o)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}setEffect(t){return this.Ks=this.Ks||this.ke.Ki.Ks.qs(this,{So:{shapes:this.bo()}}),this.Ks.So.de(t),this}getEffect(){return!!this.Ks&&this.Ks.So.ve()}setAutoDispose(t){return this.Ao=t,this.ke.fe(),this}getAutoDispose(){return this.Ao}getSize(i=t.UISpace.Everything){return i===t.UISpace.Everything?e(this.size.x+(this.Zt.left+this.Zt.right),this.size.y+(this.Zt.bottom+this.Zt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Zt="object"==typeof t?f(this.Zt,t):{left:t,top:t,right:t,bottom:t},this.ke.fe(),this}getMargin(){return this.Zt}Or(){if(this.Ao){const t=this.size,i=this.renderingScale.li(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Ao.type&&s.x>=this.Ao.maxWidth||"max-height"===this.Ao.type&&s.y>=this.Ao.maxHeight)&&this.dispose()}return this}Sh(){return this}dispose(){return this.Wi||(this.ke.fe(),this.Wi=!0,this.qi(this),this._t.kt("dispose",{}),this.bo().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.bo().forEach((i=>i.setVisible(t))),this.ke.fe(),this}isDisposed(){return this.Wi}setPosition(t){return this.co=t,this.ke.fe(),this}getPosition(i=this.origin,s=t.UISpace.Everything){const e=this.getSize(t.UISpace.Everything),r=this.scale.Bi(this.co,Bh({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},e));if(s===t.UISpace.Everything)return this.scale.Bi(r,Bh({x:(i.x+1)/2,y:(i.y+1)/2},e));const n=this.scale.Bi(r,{x:this.Zt.left,y:this.Zt.bottom}),h=this.getSize(t.UISpace.Content);return this.scale.Bi(n,Bh({x:(i.x+1)/2,y:(i.y+1)/2},h))}setOrigin(t){return this.origin=t,this.ke.fe(),this}getOrigin(){return this.origin}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.do=i,this.ke.fe(),this}getDraggingMode(){return void 0!==this.do?this.do:t.UIDraggingModes.notDraggable}setMouseStyle(t){return this.vo=t,this}getMouseStyle(){return this.vo}}class Vl extends zl{constructor(t,i,s,e,r,n){super(t,i,s,r,n),this.xo=c(),this.Mo=0,this.wo=e,this.backgroundElement=new this.wo(this.ke,this.renderingScale,this.scale,$r,n),this._t.ks(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}bo(){return this.backgroundElement.bo()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Or(){return super.Or(),this.Wi||(void 0!==this._o&&(this.backgroundElement._o=this._o-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,t.UISpace.PaddedBackground)).Or()),this}Sh(){const i=this.getSize(t.UISpace.PaddedContent);return this.backgroundElement.ko(i).Sh(),super.Sh()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.xo="object"==typeof t?f(this.xo,t):{left:t,top:t,right:t,bottom:t},this.ke.fe(),this}getPadding(){return this.xo}getSize(i=t.UISpace.Everything){let s=super.getSize(i);return i>=t.UISpace.PaddedContent&&(s=e(s.x+this.xo.left+this.xo.right,s.y+this.xo.bottom+this.xo.top)),i>=t.UISpace.PaddedBackground&&(s=e(s.x+this.backgroundElement.Co()+this.backgroundElement.To(),s.y+this.backgroundElement.Fo()+this.backgroundElement.Io())),s}getPosition(i=this.origin,s=t.UISpace.Everything){if(s===t.UISpace.Everything)return super.getPosition(i,s);const r=super.getPosition(e(-1,-1),t.UISpace.Everything),n=this.getMargin(),h=this.scale.Bi(r,{x:n.left,y:n.bottom});if(s===t.UISpace.PaddedBackground){const s=this.getSize(t.UISpace.PaddedBackground);return this.scale.Bi(h,Bh({x:(i.x+1)/2,y:(i.y+1)/2},s))}const o=this.scale.Bi(h,{x:this.backgroundElement.Co(),y:this.backgroundElement.Fo()});if(s===t.UISpace.PaddedContent){const s=this.getSize(t.UISpace.PaddedContent);return this.scale.Bi(o,Bh({x:(i.x+1)/2,y:(i.y+1)/2},s))}const a=this.getPadding(),l=this.scale.Bi(o,{x:a.left,y:a.bottom}),u=this.getSize(t.UISpace.Content);return this.scale.Bi(l,Bh({x:(i.x+1)/2,y:(i.y+1)/2},u))}getHighlight(){return this.Mo}setHighlight(t){return this.Mo=Vn(t),this.backgroundElement.setHighlight(t),this._t.kt("highlightchange",{highlight:this.Mo}),this}}const Nl=t=>"setBackground"in t,Gl=i=>{const s=i.getPosition({x:-1,y:-1},t.UISpace.PaddedBackground),e=i.getSize(t.UISpace.PaddedBackground),r=i.scale.Bi(s,e),n=Je(s,i.scale,i.ke.Ki.ji),h=Je(r,i.scale,i.ke.Ki.ji),o=i.ke.Ki.Lo(n.x,n.y),a=i.ke.Ki.Lo(h.x,h.y);return{p1:{clientX:o.x,clientY:o.y},p2:{clientX:a.x,clientY:a.y}}};class $l extends Ol{constructor(t,i,s,e,r,n,h,o,a,l,u){super(),this.S=0,this.Po=1,this.Bo=!0,this.Do=new Te,this.Eo=!0,this.Wi=!1,this._t=new Ar,this.axisScale=e,this.renderingScale=r,this.Ro=h,this.Oo=o,this.zo=a,this.qi=l,this.Vo=i,this.No=s,this.Go=this.Vo.Wr(this.renderingScale),this._t.Ms(this.Go),this.rs=u,this.$o=this.zo.setDirection(this.Oo).Uo(this.No,this.renderingScale,n,$r,this.rs,!1).setOrigin(an(this.Oo)),this._t.ks(this.$o),this.axis=t,this.setPointerEvents(!1),"major"===this.$o.jo?this.Go.Hr(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.$o.jo?this.Go.Hr(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.$o.jo&&this.Go.Hr(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.No.fe(),this._t.kt("valuechange",{value:this.S}),this}getValue(){return this.S}setTextFormatter(t){return this.Yo=t,this.No.fe(),this}setTickLength(t){return this.$o.setPointerLength(t),this.Vo.fe(),this}getTickLength(){return this.$o.getPointerLength()}setTickLabelAlignment(t,i){return this.$o.setTickLabelAlignment(t,i),this.Vo.fe(),this}getTickLabelAlignment(){return this.$o.getTickLabelAlignment()}setTickLabelPadding(t){return this.$o.setTickLabelPadding(t),this.Vo.fe(),this}setTickLabelRotation(t){return this.$o.setTextRotation(t),this.Vo.fe(),this}getTickLabelRotation(){return this.$o.getTextRotation()}getTickLabelPadding(){return this.$o.getTickLabelPadding()}setGridStrokeLength(t){return this.Po=t,this.Vo.fe(),this}getGridStrokeLength(){return this.Po}setGridStrokeStyle(t){return this.Go.Hr(t),this.Vo.fe(),this}getGridStrokeStyle(){return this.Go.Ho()}dispose(){return this.Wi||(this.Wi=!0,this.Go.dispose(),this.$o.dispose(),this.qi(this),this.Vo.Ki.fe(),this._t.kt("dispose",{})),this}setMarkerVisible(t){return this.Bo=t,this.No.fe(),this}getMarkerVisible(){return this.Bo}setMarker(t){return t(this.$o),this.No.fe(),this}getMarker(){return this.$o}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}setAllocatesAxisSpace(t){return this.Eo=t,this.No.fe(),this}getAllocatesAxisSpace(){return this.Eo}isInScale(){return fh(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Ul extends $l{constructor(t,i,s,e,r,n,h,o,a,l,u){super(t,i,s,e,r,n,h,o,u,a,l),this.Wo=!1,this.qi=a,this.Vo=i,this.No=s}dispose(){return this.Wo=!1,super.dispose()}update(){return this}plot(t,i,s,e,r){if(this.isInScale()&&this.getVisible()&&t){this.Wo=!1;const t=Ze(this.S,this.axisScale,this.Ro.getWidth(this.renderingScale));this.Go.setVisible(!0).Zr(this.Ro.toPoint(t,i)).Xr(this.Ro.toPoint(t,i-(e+s*this.Po))),this.Bo?(this.Yo&&this.$o.setText(this.Yo(this.S,this)),this.$o.setVisible(!0).setPosition(this.Ro.toPoint(t,r))):this.$o.setVisible(!1)}else this.Go.setVisible(!1),this.$o.setVisible(!1);return this.$o.Sh().Or(),this}Xo(){this.Bo?(this.Yo&&this.$o.setText(this.Yo(this.S,this)),this.$o.setVisible(!0)):this.$o.setVisible(!1);const t=this.$o.Sh().getSize();return this.Ro.getHeight(t)}}const jl={Zo:"X0Z1bGxBY2Nlc3M=",Jo:"X0Jhc2VDaGFydHM=",Qo:"RGF0YSBHcmlk",Ko:"X0hhc0hhcmRFeHBpcmF0aW9u",qo:"X0lzVHJpYWw=",ta:"X0lzQ29tbXVuaXR5",ia:"T0hMQyBTZXJpZXM=",sa:"QmFyIENoYXJ0",ea:"c2xpY2VkIGNoYXJ0cw==",ra:"R2F1Z2UgQ2hhcnQ=",na:"U3BpZGVyIENoYXJ0",ha:"UG9sYXIgQ2hhcnQ=",oa:"M0QgQ2hhcnQ=",aa:"Wm9vbSBCYW5kIENoYXJ0",la:"TWFwIENoYXJ0",ua:"WFkgQ2hhcnQ=",ca:"WFkgU2VyaWVz",da:"SGVhdG1hcCBTZXJpZXM=",fa:"RmlndXJlIFNlcmllcw==",va:"bG9nYXJpdGhtaWMgYXhpcw==",Aa:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",ga:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",ya:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",pa:"VHJlZU1hcCBDaGFydA==",ma:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Sa:"X1B5dGhvbkxpY2Vuc2U=",ba:"X1N0dWRlbnRMaWNlbnNl"},Yl=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Hl=(t,i,s)=>{s&&Nl(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Wl={uiElement:void 0,stylers:ns(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Xl={background:void 0,setBackground(t){return{...this,background:t}}},Zl={Uo(t,i,s,e,r,n){const h=this.applyStylers(new this.uiElement(t,i,s,e,r),r);return Hl(h,r,n),h}},Jl={Uo(t,i,s,e,r,n){const h=this.applyStylers(new this.uiElement(t,i,s,this.background,e,r),r);return Hl(h,r,n),h}};class Ql extends zl{constructor(){super(...arguments),this.xa=!0}Or(){return super.Or(),this}setPointerEvents(t){return this.xa=t,this}getPointerEvents(){return this.xa}bo(){return[]}}class Kl extends Ql{ko(t){return this.size=t,this}Co(){return 0}To(){return 0}Io(){return 0}Fo(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return ho}setStrokeStyle(){return this}getStrokeStyle(){return _r}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class ql{constructor(t){this.Ma=new Map,this.Ki=t}se(t,i,s){const e=s.animationEnabled;this.Ma.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const r=()=>{this.Ma.delete(t),t.removeEventListener("dispose",r)};Or.requestAnimationFrame((()=>{t.addEventListener("dispose",r)}))}wa(t,i){let s=i.animationEnabled;const e=[],r=()=>{e.forEach((t=>{this.Ma.delete(t)})),t.removeEventListener("dispose",r)};return Or.requestAnimationFrame((()=>{t.addEventListener("dispose",r)})),{_a:(t,i)=>{const r={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Ma.set(t,r)},ka:()=>{e.forEach((t=>{this.Ma.delete(t)})),e.length=0},Ca:t=>{s=t,e.forEach((t=>{this.me(t,s)}))},Ta:()=>s}}pe(t,i){const s=this.Ma.get(t);s&&(s.curUnanimatedHighlightValue=Vn(i),this.Ki.fe())}oe(t,i=!1){const s=this.Ma.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}me(t,i){const s=this.Ma.get(t);s&&(s.animationEnabled=i)}Se(t){const i=this.Ma.get(t);return!!i&&i.animationEnabled}Sh(t){let i=!1;this.Ma.forEach(((s,e)=>{let r;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const n=s.curAnimationPositionMillis/e;r=s.curUnanimatedHighlightValue*Math.abs(Math.sin(n*Math.PI/2+.5));const h=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=h,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(r=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||r>0):r=0,s.curAnimationPositionMillis=0}else r=s.curUnanimatedHighlightValue;r!==s.curAnimatedHighlightValue&&(s.applyHighlight(r),s.curAnimatedHighlightValue=r)})),i&&this.Ki.fe(!0)}}const tu=new Map,iu=(t,i)=>{const s=t.getSize(),e=t.getFamily(),r=t.getWeight(),n=t.getStyle(),h=t.getVariant(),o=`${n} ${h?"small-caps":"normal"} ${r} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=tu.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:n,variant:h,weight:r},i,a),tu.set(a,l)),l},su=t=>({container:t.mo,setMouseStyle:(i,s)=>t.yo(i,s),restoreMouseStyle:i=>t.po(i),clearMouseStyle:()=>t.Fa(),captureFrame:(i,s,e,r)=>t.Ia(i,s,e,r),renderFrame:(i,s,e=!1)=>t.La(i,s,e),layout:()=>{t.Pa(),t.Ba(),t.Ea.Da(),t.fe()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.Ra(i,s),addEventListener:(i,s,e)=>t.Ct(i,s,e),removeEventListener:(i,s)=>t.Ft(i,s)}),eu=[];let ru;const nu=()=>{if(void 0!==ru){const t=Or.getComputedStyle(Or.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));ru.style.height=Or.innerHeight-i+"px",(()=>{for(let t=0;t<eu.length;t+=1)eu[t]()})()}},hu=new uo({color:me(255,255,255)}),ou={font:iu(Ie,0),fillStyle:hu,lineStyle:new oa({fillStyle:hu,thickness:1}),pointStyle3D:new na.Triangulated};class au{constructor(t,i,s){this.ji=Xe.d2({scaleXYConstructor:He}),this.Oa=new Map,this.za=mr((()=>this.fe()),60),this.Va=e(0,0),this.Na=!1,this.Ga=$r,this.$a=()=>{},this.Ua=[],this.ja=-1,this.Ya=[],this.Wi=!1,this.Ha=!1,this.Wa=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.Xa=new Map,this.Za=(t,i)=>{var s,e,r;const n=i instanceof PointerEvent&&i,h=gr(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:{clientX:i.clientX,clientY:i.clientY};if(n){if(!n.pointerType)return;this.Ja=i}const o=this.ce({x:h.clientX,y:h.clientY});if(("pointermove"===t||"pointerenter"===t)&&o&&n){const t=this.Xa.get(n.pointerId);let e=t;e||(e={lastEvent:n,entity:o.entity,collectionMember:o.collectionMember,info:o.info},this.Xa.set(n.pointerId,e));const r=void 0===t||t.entity!==o.entity||t.collectionMember!==o.collectionMember;r&&t&&t.entity.kt("pointerleave",i,t.collectionMember,t.info),r&&o&&o.entity.kt("pointerenter",i,o.collectionMember,o.info),o&&(o.entity.kt("pointermove",i,o.collectionMember,o.info),this.mo.draggable=null!==(s=o.entity.Zi)&&void 0!==s&&s),e.lastEvent=n,e.entity=o.entity,e.collectionMember=o.collectionMember,e.info=o.info}else if("pointerleave"===t&&n){const t=this.Xa.get(n.pointerId);t&&(t.entity.kt("pointerleave",i,t.collectionMember,t.info),this.Xa.delete(n.pointerId))}else if("click"===t&&n){const t=(null===(e=this.Qa)||void 0===e?void 0:e.event)instanceof PointerEvent&&this.Qa.event.pointerId===n.pointerId&&this.Qa;t&&t.entity.kt("click",n,t.collectionMember,t.info)}else if("dblclick"===t&&i instanceof MouseEvent){const t="click"===(null===(r=this.Qa)||void 0===r?void 0:r.event.type)&&this.Qa;t&&t.entity.kt("dblclick",i,t.collectionMember,t.info)}else{const s=i instanceof PointerEvent?this.Xa.get(i.pointerId):o;null==s||s.entity.kt(t,i,s.collectionMember,s.info)}i&&o&&!["touchend"].includes(t)&&(this.Qa={...o,event:i})},this.Ba=()=>{const{bottom:t,left:i}=this.mo.getBoundingClientRect(),s=e(Math.floor(i),Math.floor(t));return s.x===this.Va.x&&s.y===this.Va.y||this._t.kt("locationchange",{}),this.Va=s,this.Ka=Or.performance.now(),this},this.Pa=()=>{this.qa&&this.qa()},this.yo=(t,i)=>{if(void 0!==i){const s=this.Ya.find((t=>t[0]===i));return s&&(s[1]=t,this.Ya.indexOf(s)===this.Ya.length-1&&(this.mo.style.cursor=t)),i}const s=this.ja;return this.ja+=1,this.Ya.push([s,t]),this.mo.style.cursor=t,s},this.po=t=>{var i;const s=this.Ya.find((i=>i[0]===t));if(s){const t=this.Ya.indexOf(s),e=t===this.Ya.length-1;if(this.Ya.splice(t,1),e){const t=(null===(i=this.Ya[this.Ya.length-1])||void 0===i?void 0:i[1])||"default";this.mo.style.cursor=t}}},this.tl=t=>(this.il._(t),this),this.sl=()=>this.il.C(),this.el=()=>{this.Ga&&this.Ga(1e3/60),this.rl(),this.nl(),this.$a&&this.$a()},this.hl=t=>(this.Oa.set(t.ol(),t),this.Oa=new Map([...this.Oa.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.al=t=>(this.Oa.delete(t),this),this.Dt=()=>(this.il.o=!1,this),this.Et=()=>(this.il.o=!0,this),this.ll=()=>this.Ja,this._t=new Ar,this.Ea=t,this.rs=i.theme,this.ul=s.ul,this.cl=s.dl,this.fl={Ke:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,vl:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,Al:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),yl:void 0===(null==i?void 0:i.interactable)||i.interactable,pl:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const r=i?i.container:void 0;if(r){if("string"==typeof r){const t=Or.document.getElementById(r);if(!t)throw new Error(`Container "${r}" doesn't exist.`);this.mo=t}else this.mo=r;Or.addEventListener("resize",this.Pa),this.Ua.push((()=>{Or.removeEventListener("resize",this.Pa)}))}else{if(void 0===ru){const t=Or.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Or.document.body.appendChild(t),ru=t,Or.addEventListener("resize",nu)}let t=1;for(;null!==Or.document.getElementById(`chart-${t}`);)t+=1;this.mo=Or.document.createElement("div"),this.mo.id=`chart-${t}`,this.mo.style.flex="1",this.mo.style.height="100%",ru.appendChild(this.mo),nu(),eu.push(this.Pa),this.Ua.push((()=>{ru&&ru.removeChild(this.mo),eu.includes(this.Pa)&&eu.splice(eu.indexOf(this.Pa),1),0===eu.length&&ru&&(Or.document.body.removeChild(ru),ru=void 0,Or.removeEventListener("resize",nu))}))}if(Or.ResizeObserver){const t=t=>{for(const i of t)i.target===this.mo&&this.Pa()};this.ml=new Or.ResizeObserver(t.bind(this)),this.ml.observe(this.mo)}this.mo.style.position="relative",this.mo.style.boxSizing="content-box",!1!==this.fl.yl&&(this.mo.style.touchAction="none"),this.mo.style.overflow="hidden",this.mo.addEventListener("fullscreenchange",this.Pa),this.mo.addEventListener("webkitfullscreenchange",this.Pa),this.mo.addEventListener("dragstart",this.Wa);const n=i?i.maxFps:void 0;this.Sl=n?-1===n?-1:0!==n?1e3/n:0:0,Object.keys(vr).forEach((t=>{const i=i=>{this.Za(t,i)};this.mo.addEventListener(t,i),this.Ua.push((()=>{this.mo.removeEventListener(t,i)}))})),Or.addEventListener("scroll",this.Ba,{passive:!0}),this.il=u(new ye({r:0,g:0,b:0,a:0})),this.ee=new ql(this)}bl(t,i,s){this.xl=t?{entity:t,timestamp:s,pointed:i}:void 0}Ml(t,i){const s=Array.from(this.Xa.values()).find((i=>i.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===i.collectionMember)));s&&(s.entity=i.entity,s.collectionMember=i.collectionMember)}cs(t,i=void 0){const s=Array.from(this.Xa.values()).find((s=>s.entity===t&&(void 0===i||i===s.collectionMember)));s&&(t.kt("pointerleave",s.lastEvent,s.collectionMember,s.info),this.Xa.delete(s.lastEvent.pointerId))}wl(){this.Ha=!0,this.Ga=void 0,this.$a=void 0}Fa(){this.Ya.length=0,this.mo.style.cursor="unset"}_l(){return this.kl}Cl(){return this.Tl}setBackgroundFillStyle(t){return this.Fl.Er(t),this.fe(),this}getBackgroundFillStyle(){return this.Fl.Qn()}setBackgroundStrokeStyle(t){return this.Fl.Dr(t),this.fe(),this}getBackgroundStrokeStyle(){return this.Fl.Il()}Ll(t){return this.$a=t,this}Pl(t){return this.Ga=t,this}Bl(t){return this.Oa.get(t)}Dl(){return Array.from(this.Oa.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}It(){if(!this.Wi){if(this.Wi=!0,this.Oa)for(const t of this.Oa.values())t.It();this.Ga=void 0,this.$a=void 0,Or.removeEventListener("scroll",this.Ba),this.mo.removeEventListener("fullscreenchange",this.Pa),this.mo.removeEventListener("webkitfullscreenchange",this.Pa),this.mo.removeEventListener("dragstart",this.Wa),this.ml&&(this.ml.disconnect(),this.ml=void 0),this.Ua.forEach((t=>{t()})),this.Ua.length=0}}Gr(t,i){return e(t-this.Va.x,this.Va.y-i)}Lo(t,i){return e(t+this.Va.x,this.Va.y-i)}El(t){const i=this.Gr(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Rl(t){const i=this.Lo(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}Ol(t,i,s,e){const r=Je(t,s,this.ji),n=Je(i,s,this.ji),h=this.Rl({engineX:r.x,engineY:r.y}),o=this.Rl({engineX:n.x,engineY:n.y});return{p1:{clientX:Math.min(h.clientX,o.clientX)-e.left,clientY:Math.min(h.clientY,o.clientY)-e.top},p2:{clientX:Math.max(h.clientX,o.clientX)+e.right,clientY:Math.max(h.clientY,o.clientY)+e.bottom}}}Ct(t,i,s){this._t.addEventListener(t,i,s)}Ft(t,i){this._t.removeEventListener(t,i)}}class lu extends dr{constructor(t,i,s,e){super(t,s,e),this._o=0,this.ke=i,this.ke.zl=!0}Vl(){}Nl(t){return this._o===t||(this._o=t,this.ke.zl=!0),this}Gl(){return this._o}}class uu extends lu{constructor(t,i,s,e,r){super(t,i,e,r),this.$l=!0,this.ji=s}}const cu=(t,i,s)=>{if(s instanceof He){const r=s.$i(),n=Bh(i,{x:Math.abs(r.x),y:Math.abs(r.y)});return a(e(t.min.x-n.x,t.min.y-n.y),e(t.max.x+n.x,t.max.y+n.y))}return a(s.Bi(e(t.min.x,t.min.y),Ih(i,-1)),s.Bi(e(t.max.x,t.max.y),i))},du=(t,i)=>"function"==typeof i?i(t):i,fu=(t,i)=>!t||t!==i,vu=(t,i)=>t===ho&&i!==ho,Au=t=>t!==ho;class gu extends uu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Lr=ou.fillStyle,this.Ki=t}Er(t){return this.Lr=du(this.Lr,t),this}Qn(){return this.Lr}Ul(){return fu(this.jl,this.Lr)}Yl(){return vu(this.jl,this.Lr)}Hl(){return Au(this.Lr)}Wl(t){this.jl=t}}class yu extends gu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Pr=ou.lineStyle,this.Ki=t}Dr(t){return this.Pr="function"==typeof t?t(this.Pr):t,this}Il(){return this.Pr}Xl(){return!this.Zl||this.Zl!==this.Pr}Jl(t){return!this.Zl||this.Zl.getThickness()!==t}Hl(){return this.Pr!==_r||super.Hl()}Yl(){return(this.Pr!==_r||this.Lr!==ho)&&this.Zl===_r&&this.jl===ho}Ql(t){this.Zl=t}}class pu extends gu{constructor(t,i,s,r,n,h=u(ou.font)){super(t,i,s,r,n),this.Kl=u(""),this.ql=!1,this.tu={x:1,y:-1},this.co=u(e(0,0)),this.iu=u(0),this.su=u(0),this.eu=u(e(0,0)),this.ru=u(0),this.nu=u(Ie),this.q=e(0,0),this.Zt=u(c(1,1,1,1)),this.xo=u(d(4,4,4,4)),this.font=u(ou.font),this.hu=!1,this.font=h}Hl(){return Au(this.Lr)&&this.Kl.C().length>0}Yl(){return!1===this.hu&&this.Hl()}Eh(t){return this.Kl._(t),this}zh(){return this.Kl.C()}ih(t){return Fe(t)?this.nu._(t):this.nu._(t(this.nu.C())),this}th(){return this.nu.C()}ou(t){return this.nu._(this.nu.C().setFamily(t)),this}au(){return this.nu.C().getFamily()}lu(t){return this.nu._(this.nu.C().setSize(t)),this}uu(){return this.nu.C().getSize()}cu(t){return this.nu._(this.nu.C().setWeight(t)),this}du(){return this.nu.C().getWeight()}fu(t){return this.nu._(this.nu.C().setStyle(t)),this}vu(){return this.nu.C().getStyle()}Au(t){return this.nu._(this.nu.C().setVariant(t)),this}gu(){return this.nu.C().getVariant()}zr(t){return this.co._(t),this}yu(){return this.co.C()}eh(t){return this.ru._(t),this}rh(){return this.ru.C()}Dh(t){return this.pu=t,this}mu(){return this.pu}Su(t,i){return this.eu._(e(t,i)),this}bu(){return this.eu.C()}xu(t){return this.su._(t),this}Mu(){return this.su.C()}wu(){return{x:this.su.C(),y:this.iu.C()}}_u(t){return this.iu._(t),this}ku(){return this.iu.C()}Cu(t){return this.su._(t.x),this.iu._(t.y),this}eo(t){return this.Zt._(t),this}Tu(){return this.Zt.C()}ro(t){return this.xo._(t),this}Fu(){return this.xo.C()}}class mu extends yu{constructor(t,i,s,r,n){super(t,i,s,r,n),this.co=u(e(0,0)),this.Bt=u(e(100,100)),this.ru=u(0),this.q=u(e(0,0)),this.Iu=!1}Sh(){return this.Lu(),this}zr(t){const i=this.co.C();return t.x===i.x&&t.y===i.y||(this.co._(t),this.Lu()),this}yu(){return this.co.C()}Pu(t){const i=this.co.C();return t!==i.x&&(this.co._(e(t,i.y)),this.Lu()),this}Bu(t){const i=this.co.C();return t!==i.y&&(this.co._(e(i.x,t)),this.Lu()),this}zt(t){const i=this.Bt.C();return t.x===i.x&&t.y===i.y||(this.Bt._(e(t.x,t.y)),this.Lu()),this}li(){return this.Bt.C()}Du(t){const i=this.Bt.C();return t!==i.x&&(this.Bt._(e(t,i.y)),this.Lu()),this}Eu(t){const i=this.Bt.C();return t!==i.x&&(this.Bt._(e(i.x,t)),this.Lu()),this}eh(t){return this.ru._(t),this}rh(){return this.ru.C()}Ru(t){const i=this.q.C();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Iu=!1,this.Lu()):(this.Iu=!0,this.q._(t))),this}Lu(){if(!this.Iu){const t=this.co.C(),i=this.Bt.C(),s=e(t.x+i.x/2,t.y+i.y/2),r=this.q.C();s.x===r.x&&s.y===r.y||this.q._(s)}}}class Su extends yu{constructor(){super(...arguments),this.Ou=[],this.co=u(e(0,0)),this.zu=rh,this.Vu=!1}Nu(t){return t=bn(t),this.Ou=t,this.Vu=!0,this}Gu(){return this.Ou}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return 0}Uu(){return 0}}class bu extends gu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.ju=new Array,this.Yu=new Array,this.zu=rh,this.Hu=0,this.Wu=!1,this.Xu=[Array(),Array()],this.Zu=!1,this.Ju=(new uo).setColor(me(42,171,240)),this.Qu=!1,this.Ku=!1,this.qu=!1}tc(t,i){const s=this.Hu-1,r=s>0&&!this.Zu;let[n,h]=r?[[this.ju[s]],[this.Yu[s]]]:[[],[]];if(t instanceof Array){const[i,s]=o(t);n=kn(n,i,{canReturnB:!0}),h=kn(h,s,{canReturnB:!0})}else{const i=t.position;n.push(e(i,t.high)),h.push(e(i,t.low))}return this.Zu?(this.Xu[0]=kn(this.Xu[0],n,{canReturnB:!0}),this.Xu[1]=kn(this.Xu[1],h,{canReturnB:!0})):(this.Xu=[n,h],this.Zu=!0),this.zu=bh(this.zu,i||bh(mh(n),mh(h))),this}ws(){return this.Qu=!0,this.ju.length=0,this.Yu.length=0,this.Hu=0,this.zu=rh,this}sc(){return[this.ju,this.Yu]}rc(){return[this.Xu[0],this.Xu[1]]}nc(t){return this.Ju="function"==typeof t?t(this.Ju):t,this}hc(){return this.Ju}oc(){return this.Hu-(Number(this.Ku)+Number(this.qu))}ac(){return this.Xu.length}lc(t){return this.Ku=t,this}uc(){return this.Ku}cc(t){return this.qu=t,this}dc(){return this.qu}Yl(){return this.jl===ho&&this.fc===ho&&(this.Lr!==ho||this.Ju!==ho)}vc(t){this.fc=t}Hl(){return this.Ju!==ho||super.Hl()}Ul(){return super.Ul()||!this.fc||this.fc!==this.Ju}}class xu extends yu{constructor(t,i,s,r,n){super(t,i,s,r,n),this.co=u(e(0,0)),this.Ac=u(0),this.ct=u(360),this.gc=u(100),this.yc=u(100),this.mc=u(0),this.Sc=u(void 0),this.bc=e(0,0),this.xc=e(0,0),this.Mc=e(0,0)}wc(){return this.gc.C()}_c(){return this.yc.C()}yu(){return this.co.C()}kc(){return this.Ac.C()}ki(){return this.ct.C()}Cc(){return this.mc.C()}Tc(){return this.Sc.C()}Fc(){return this.bc}Ic(){return this.xc}Lc(){return this.Mc}zr(t){return this.co._(t),this}Pc(t){return this.Ac._(t),this}Xr(t){return this.ct._(t),this}Bc(t){return this.yc._(t),this.gc._(t),this}Dc(t){return this.gc._(t),this}Ec(t){return this.yc._(t),this}Rc(t){return this.mc._(t<0?0:t),this}Oc(t){return this.Sc._(void 0!==t&&t<=0?void 0:t),this}}var Mu;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Mu||(Mu={}));const wu=(t,i)=>"function"==typeof i?i(t):i,_u=(t,i)=>!t||t!==i,ku=(t,i)=>!t||t.getThickness()!==i,Cu=(t,i)=>t===_r&&i!==_r,Tu=t=>t!==_r&&t.getFillStyle()!==ho;class Fu extends uu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.zc=ou.lineStyle,this.engine=t,this.Vc=s instanceof We}Hr(t){return this.zc=wu(this.zc,t),this.Vc&&da(this.zc)&&(Or.console.error("LightningChart JS error | DashedLine is not supported together with logarithmic axis"),this.zc=ou.lineStyle),this}Ho(){return this.zc}Xl(){return _u(this.Nc,this.zc)}Gc(t){return ku(this.Nc,t)}Yl(){return Cu(this.Nc,this.zc)}Hl(){return Tu(this.zc)}$c(t){this.Nc=t}}class Iu extends Fu{constructor(t,i,s,r,n){super(t,i,s,r,n),this.ut=e(0,0),this.ct=e(0,0),this.Uc=!1}_({min:t,max:i}){return t.x===this.ut.x&&t.y===this.ut.y&&i.x===this.ct.x&&i.y===this.ct.y||(this.Uc=!0,this.ut=t,this.ct=i),this}Ci(){return this.ut}ki(){return this.ct}Zr(t){return t.x===this.ut.x&&t.y===this.ut.y||(this.Uc=!0,this.ut=t),this}Xr(t){return t.x===this.ct.x&&t.y===this.ct.y||(this.Uc=!0,this.ct=t),this}}class Lu extends Fu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.jc=void 0,this.Yc=0}}class Pu extends Fu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Hc=[],this.zu=rh,this.Xu=new Array,this.Wc=0,this.Qu=!1,this.Xc=u(void 0),this.Ku=!1,this.qu=!1}rc(){return this.Xu}sc(){return this.Hc}ws(){return this.Qu=!0,this.Hc.length=0,this.Wc=0,this.Xu=[],this.zu=rh,this}oc(){return this.Wc-(Number(this.Ku)+Number(this.qu))}ac(){return this.Xu.length}lc(t){return this.Ku=t,this}uc(){return this.Ku}cc(t){return this.qu=t,this}dc(){return this.qu}}class Bu extends pu{constructor(i,s,e,r,n){super(i,s,e,r,[]),this.Zc={uid:n,text:"",font:"",color:"",position:"absolute",left:0,top:0,padding:"",alignmentX:0,alignmentY:0,rotation:0,identifier:t.TextObjectIdentifier.Other,visible:!0}}Jc(){var i;if(!this.getVisible()||0===this.Kl.C().length||oo(this.Lr))return this.Zc.visible=!1,this.Zc;this.Zc.visible=!0;const s=iu(this.nu.C(),devicePixelRatio);this.Zc.identifier=null!==(i=this.In)&&void 0!==i?i:t.TextObjectIdentifier.Other,this.Zc.text=this.Kl.C(),this.Zc.font=s.font,this.Zc.color=co(this.Lr)?`rgba(${255*this.Lr.color.r},${255*this.Lr.color.g},${255*this.Lr.color.b},${this.Lr.color.a})`:this.Zc.color;const e=this.co.C(),r=Je(e,this.ji,this.Ki.ji),n=Math.round(10*r.x)/10,h=Math.round(10*(this.Ki.li().y-r.y))/10;this.Zc.top=h,this.Zc.left=n,this.Zc.alignmentX=this.su.C(),this.Zc.alignmentY=this.iu.C(),this.Zc.rotation=this.ru.C();const o=this.Zt.C(),a=this.xo.C();return this.Zc.padding=`${o.top+a.top}px ${o.right+a.right}px ${o.bottom+a.bottom}px ${o.left+a.left}px`,this.Zc}Qc(){var t;this.Jc();const i=null===(t=this.Ki.Kc)||void 0===t?void 0:t.qc.getTextBoundingBox;if(i){const t=i(this.Zc);if(t){const i=this.Ki.El({clientX:t.left,clientY:t.top}),s=this.Ki.El({clientX:t.left+t.width,clientY:t.top+t.height}),e=Je({x:i.engineX,y:i.engineY},this.Ki.ji,this.ji),r=Je({x:s.engineX,y:s.engineY},this.Ki.ji,this.ji);return{min:{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)},max:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}}}}return rh}td(){var t;this.Jc();const i=null===(t=this.Ki.Kc)||void 0===t?void 0:t.qc.measureText;if(i){const t=i(this.Zc);if(t)return t}return this.Ki.sd.En.ln(this.Kl.C(),this.nu.C(),this.ru.C())}li(){if(!(this.ji instanceof He))return{x:0,y:0};const t=this.ji.$i(),i=this.td();return{x:i.x*t.x,y:i.y*t.y}}Sh(){return this}Ps(){return 0}Ls(){return 0}Ds(){return 0}Bs(){return 0}$u(){return 0}Uu(){return 0}ed(t,i){return{}}rd(){return this}nd(t,i,s,e,r){return{}}}class Du extends zl{constructor(){super(...arguments),this.Mo=0}getHighlight(){return this.Mo}setHighlight(t){return this.Mo=t,this.bo().forEach((i=>i.vs(t))),this._t.kt("highlightchange",{highlight:t}),this.ke.fe(),this}}class Eu extends Du{}class Ru extends Eu{constructor(t,i,s,e,r,n){super(t,i,s,r,n),this.hd=this.ke.od(this.renderingScale,Mu.Simple).setVisible(!1).Er(ho).Dr(_r),this._t.Ms(this.hd)}ad(){const t=this.ld();if(t.length>2){const i=mh(t),s=e(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const r=t.map((t=>{const r=Lh(t,Ih(i.min,-1));return this.scale.Bi(this.co,Lh(r,Bh(Ih(Lh(this.origin,e(1,1)),-.5),s)))})).map((t=>Je(t,this.scale,this.renderingScale)));this.hd.Nu(r).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.hd&&this.hd.setVisible(!1),this.setContentSize(e(0,0))}Or(){return super.Or(),this.Wi||(this.ad(),void 0!==this._o&&this.hd.Nl(this._o)),this}Sh(){return this.ad(),super.Sh()}setVisible(t){return super.setVisible(t),this.hd.setVisible(t),this}}const Ou=t=>!(!t||"object"!=typeof t||!("elementAt"in t)),zu=t=>{if("srcLoopArray"in t){const{srcLoopArray:i,dataRanges:s,NewArray:e}=t;return{length:s.reduce(((t,i)=>t+i.count),0),elementAt:t=>{let e=0;for(const r of s){if(e+r.count-1>=t){const s=r.offset+(t-e);return i[s]}e+=r.count}return Dn(0,(()=>{})),-1},toArray:(t,r)=>{const n=r-t+1;if(1===s.length){const e=s[0],n=e.offset+t,h=e.offset+r;return i.subarray(n,h+1)}{const h=s[0],o=s[1],a=0,l=a+h.count-1,u=l+1,c=u+o.count-1,d=new e(n);let f=0;if(!(r<a||t>l)){const s=Math.max(a,t),e=Math.min(l,r)-s+1,n=h.offset+(t+f-a);d.set(i.subarray(n,n+e),f),f+=e}if(!(r<u||t>c)){const s=Math.max(u,t),e=Math.min(c,r)-s+1,n=o.offset+(t+f-u);d.set(i.subarray(n,n+e),f),f+=e}return d}}}}return{length:t.length,elementAt:i=>t[i],toArray:(i,s)=>Dr(t,i,s+1)}},Vu=(t,i)=>Object.keys(t).length===Object.keys(i).length&&!Object.keys(t).find((t=>void 0===i[t]))&&!Object.entries(t).find((([t,s])=>i[t]!==s));class Nu{constructor(t){if(this.ud=0,this.dd=0,this.fd=0,this.vd=!1,this.Ad=!0,this.gd=!1,this.yd={warningDisplayed:!1,expandEvents:[]},this._t=new Ar,this.Ad=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,this.pd=!1!==(null==t?void 0:t.allowInputModification),this.md=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN,this.Sd=void 0!==(null==t?void 0:t.strictMode)&&t.strictMode,this.vl=void 0===(null==t?void 0:t.warnings)||t.warnings,this.bd=void 0===(null==t?void 0:t.autoDetectPatterns)||t.autoDetectPatterns,null==t?void 0:t.schema){const i={};Object.entries(t.schema).forEach((([t,s])=>{var e;if(!s)return;let r=void 0!==s.pattern?s.pattern:void 0;s.auto&&(r=("object"==typeof s.auto&&null!==(e=s.auto.step)&&void 0!==e?e:1)>0?"progressive":"regressive");const n={dataStorage:s.storage,xd:{effective:r,userSpecified:r},auto:s.auto,cache:void 0,ensureNoDuplication:void 0!==s.ensureNoDuplication&&s.ensureNoDuplication};if(this.Sd&&void 0===s.pattern)throw new Error(`LightningChart JS error - DataSetXY property ('${t}') data pattern not specified. This is not allowed when strict mode is enabled.`);i[t]=n})),this.Md=i}if(this.Sd&&!this.Md)throw new Error("LightningChart JS error - DataSetXY schema not defined. This is not allowed when strict mode is enabled.")}appendJSON(t,i,s){if(!Array.isArray(t))return this.appendJSON([t]);const e=t.length;if(0===e)return this;const r=Object.keys(t[0]).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===r.length)return this;const n=t[0],h=Object.fromEntries(r.map((t=>{if("number"!=typeof n[t])return[t,[]];const i=this.Md&&this.Md[t];return[t,new((null==i?void 0:i.dataStorage)||Float64Array)(e)]})));for(let i=0;i<e;i+=1){const s=t[i];for(const t of r)h[t][i]=s[t]}return s&&Object.entries(s).forEach((([t,i])=>{h[t]=i})),this.appendSamples(h,i),this}appendSample(t,i){const s=Object.keys(t).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===s.length)return this;const e=Object.fromEntries(s.map((i=>{var s,e;return[i,Xu(t[i],this.Md&&null!==(e=null===(s=this.Md[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),r=this.wd({appendCount:1,keys:s,parsedDataArrs:e,opts:i});if(!r.incomingDataReplacedCache&&this.Ad){let t=this._d(e);if(t=t&&t.filter((t=>this.Md&&this.Md[t].xd&&!("autoDetectResult"in this.Md[t].xd))),t&&t.length>0)if(this.gd);else{t.length>1&&this.vl&&Or.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.Md?this.Md[i]:void 0;if(!(t&&t.xd&&"autoDetectResult"in t.xd))return this.kd(i,{parsedDataArrs:Object.fromEntries(r.keys.map((t=>[t,"number"==typeof e[t]?new Array(1).fill(e[t]):e[t]]))),offset:0,count:1}),this}Or.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}for(const t of r.keys){const i=r.buckets[t].cache;if(!i)continue;const s=e[t];i[this.ud]="number"==typeof s?s:s[0]}return this._t.kt("change",{type:"change",iDataStart:this.ud,iDataEnd:this.ud}),this.ud+=1,this.ud>r.maxSampleCount-1&&void 0!==this.Cd&&(this.ud=0,this.vd=!0,this._t.kt("loop",{type:"loop"})),this.dd=Math.min(this.dd+1,r.maxSampleCount),this.fd+=1,this}appendSamples(t,i){const s=Object.entries(t).filter((([,t])=>void 0!==t)).map((t=>t[0]));if(0===s.length)return this;const e=Object.entries(t).filter((([,t])=>"object"==typeof t&&"length"in t)).map((t=>t[0])),r=e.reduce(((i,s)=>Math.min(i,t[s].length)),Number.MAX_SAFE_INTEGER);e.forEach((i=>{const s=t[i];s.length>r&&(Or.console.warn(`LightningChart JS warning - insymmetric DataSetXY input (${i}). Extra measurements will be dropped`),Array.isArray(s)?this.pd?s.length=r:t[i]=s.slice(0,r):t[i]=s.subarray(0,r))}));let n=null==i?void 0:i.offset,h=null==i?void 0:i.count;if(n=void 0!==n?n:0,h=void 0!==h?h:r-n,h<=0)return this;const o=Object.fromEntries(s.map((i=>{var s,e;const r=t[i];return this.Md&&this.Md[i]&&void 0!==this.Md[i].dataStorage||this.Sd||!Ju(r)?[i,Xu(t[i],this.Md&&null!==(e=null===(s=this.Md[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]:[i,r]}))),a=this.wd({appendCount:h,keys:s,parsedDataArrs:o,opts:i});if(Object.entries(a.buckets).forEach((([t,i])=>{if(0===this.dd&&i.ensureNoDuplication){const s=o[t],e=i.cache;if(Array.isArray(s)||e!==s)throw new Error(`LightningChart JS error | DataSetXY ensureNoDuplication check failed for '${t}'`)}})),!a.incomingDataReplacedCache&&this.Ad){let t=this._d(o);if(t=t&&t.filter((t=>this.Md&&this.Md[t].xd&&!("autoDetectResult"in this.Md[t].xd))),t&&t.length>0)if(this.gd);else{t.length>1&&this.vl&&Or.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.Md?this.Md[i]:void 0;if(!(t&&t.xd&&"autoDetectResult"in t.xd))return this.kd(i,{parsedDataArrs:Object.fromEntries(s.map((t=>[t,"number"==typeof o[t]?new Array(h).fill(o[t]):o[t]]))),offset:n,count:h}),this}Or.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}const l=a.maxSampleCount-this.ud,u=Math.min(h,l);if(u>0){if(!a.incomingDataReplacedCache)for(const t of a.keys){const i=a.buckets[t].cache,s=o[t];ju(i,s,n,u,this.ud)}this._t.kt("change",{type:"change",iDataStart:this.ud,iDataEnd:this.ud+u-1}),this.ud+=u,this.ud>a.maxSampleCount-1&&(this.ud=0,this.vd=!0,this._t.kt("loop",{type:"loop"}))}if(this.dd=Math.min(this.dd+u,a.maxSampleCount),this.fd+=u,h-u>0&&!a.incomingDataReplacedCache){const t={};for(const i of a.keys)t[i]=Dr(o[i],n+u,void 0);this.appendSamples(t,i)}else this.Td();return this}fill(t){return this.Md?(Object.keys(t).forEach((t=>{this.Md&&!this.Md[t]&&this.vl&&Or.console.warn(`LightningChart JS warning - DataSetXY.fill() tried to fill data property that doesn't exist in schema ("${t}")`)})),Object.entries(this.Md).forEach((([i,s])=>{let e=t[i];s.cache&&void 0!==e&&(pe(e)&&(e=e.toUint32()),s.cache.fill(e))})),this._t.kt("clear",{type:"clear"}),this):this}setSamples(t,i){return this.clear().appendSamples(t,i)}alterSamplesStartingFrom(t,i,s){var e,r,n;const h=Object.values(i).find((t=>"number"!=typeof t));let o=null==s?void 0:s.offset,a=null==s?void 0:s.count;const l=h?h.length:1;if(o=void 0!==o?o:0,a=void 0!==a?a:l-o,a<=0)return this;const u=Object.keys(i),c=Object.fromEntries(u.map((t=>{var s,e;return[t,Xu(i[t],this.Md&&null!==(e=null===(s=this.Md[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),d=this.fd-1,f=void 0!==this.Cd?Math.max(this.fd-this.Cd,0):0,v=t+a-1,A=Math.max(t,f),g=Math.min(v,d),y=g-A+1;if(this.fd>0&&y>0){const i=this.wd({appendCount:0,keys:u,parsedDataArrs:c,opts:s}),h=null!==(n=null===(r=null===(e=Object.values(i.buckets).find((t=>t.cache)))||void 0===e?void 0:e.cache)||void 0===r?void 0:r.length)&&void 0!==n?n:0;if(void 0!==this.Cd&&this.vd&&this.fd%this.Cd!=0){const s=this.fd-this.fd%this.Cd,e=this.fd-1,r=this.fd-this.dd,n=s-1,a=Math.max(A,r),l=Math.min(g,n)-a+1;if(l>0){const s=a-t,e=Gu(a,this.fd,h,this.ud);for(const t of i.keys){const r=i.buckets[t].cache,n=c[t];ju(r,n,o+s,l,e)}}const u=Math.max(A,s),d=Math.min(g,e)-u+1;if(d>0){const s=u-t,e=Gu(u,this.fd,h,this.ud);for(const t of i.keys){const r=i.buckets[t].cache,n=c[t];ju(r,n,o+s,d,e)}}}else{const t=A-f;for(const s of i.keys){const e=i.buckets[s].cache,r=c[s];ju(e,r,o,y,t)}}this._t.kt("clear",{type:"clear"})}const p=t+a-1-d;if(p>0){const s=g+1-t;this.appendSamples(i,{offset:o+s,count:p})}return this}alterSamplesByIndex(t,i){var s;if(!this.Md)return this;const e=t.length,r=Object.keys(i),n=Object.fromEntries(r.map((t=>{var s,e;return[t,Xu(i[t],this.Md&&null!==(e=null===(s=this.Md[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),h=this.fd-1,o=void 0!==this.Cd?Math.max(this.fd-this.Cd,0):0;if(e<=0)return this;let a=!1;const l=Object.values(this.Md).find((t=>t.cache)).cache.length;for(let i=0;i<e;i+=1){const e=t[i];if(e<o||e>h)continue;const u=Gu(e,this.fd,l,this.ud);for(const t of r){const e=null===(s=this.Md[t])||void 0===s?void 0:s.cache,r=n[t];e&&(e[u]="number"==typeof r?r:r[i],a=!0)}}return a&&this._t.kt("clear",{type:"clear"}),this}alterSamplesByMatch(t,i,s){var e;if(!this.Md)return this;const r=i.length,n=this.dd,h=this.fd-1,o=Math.max(h-n+1,0),a=Object.keys(s),l=Object.fromEntries(a.map((t=>{var i,e;return[t,Xu(s[t],this.Md&&null!==(e=null===(i=this.Md[t])||void 0===i?void 0:i.dataStorage)&&void 0!==e?e:Float64Array)]})));if(r<=0)return this;let u=!1;const c=this.Md[t].cache,d=this.Fd(t);if(!c)return this;const f=c.length;for(let s=0;s<r;s+=1){const r=i[s];let n;if(d){const t=Uu(r,o,h,!0,(t=>c[Gu(t,this.fd,f,this.ud)]));n=Gu(t,this.fd,f,this.ud)}else for(let t=0;t<f;t+=1)if(c[t]===r){n=t;break}if(void 0!==n){if(c[n]===r)for(const t of a){const i=null===(e=this.Md[t])||void 0===e?void 0:e.cache,r=l[t];i&&(i[n]="number"==typeof r?r:r[s],u=!0)}}else this.vl&&Or.console.warn(`LightningChart JS warning - DataSetXY.alterSamplesByMatch no match found for "${t}=${r}"`)}return u&&this._t.kt("clear",{type:"clear"}),this}Td(t=!1){this.Md&&this.bd&&Object.entries(this.Md).forEach((([i,s])=>{if(!s.cache)return;let e;if(s.xd&&"userSpecified"in s.xd)e=s.xd.userSpecified;else if(s.xd&&"autoDetectResult"in s.xd)e=s.xd.autoDetectResult;else if(s.cache&&this.fd>0&&!t){const t=void 0!==this.Cd&&this.vd?this.ud:0,r=this.dd-1,n=void 0!==this.Cd&&this.vd?0:void 0,h=void 0!==this.Cd&&this.vd?this.ud-1:void 0,[o,a]=void 0!==n&&void 0!==h&&Math.abs(h-n)>Math.abs(r-t)?[n,h]:[t,r];if(1+a-o>=5){let t,r=s.cache[o];for(let i=o+1;i<=a;i+=1)if(!1!==t){const e=s.cache[i],n=Math.sign(e-r);0!==n&&t&&t.direction!==n?t=!1:0===n||t||(t={direction:n}),r=e}e=t&&t.direction>0?"progressive":t&&t.direction<0?"regressive":null,s.xd={autoDetectResult:e,effective:e},this.vl&&Or.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (${i}=${e}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nDefine data patterns in schema when creating series or DataSetXY to clear this warning and improve performance.`)}}}))}wd(t){var i,s,e,r,n,h,o,a,l;if(this.Md||(this.Md=Object.fromEntries(t.keys.map((i=>[i,{dataStorage:Zu(t.parsedDataArrs[i]),xd:void 0}])))),0===this.dd&&this.Md&&!this.Sd){const i=this.Md;t.keys.forEach((s=>{i[s]||(i[s]={dataStorage:Zu(t.parsedDataArrs[s])})}))}if((this.dd>0||this.Sd)&&this.Md){const i=this.Md,s=t.keys.filter((t=>!i[t]));if(s.length>0&&t.appendCount>0){if(this.Sd)throw new Error(`LightningChart JS error - Input data includes data properties that are not defined in schema. This is not allowed when strict mode is enabled. Extra data properties: ${s.map((t=>`'${t}'`)).join(", ")}`);this.vl&&Or.console.warn(`LightningChart JS warning - Input data includes data properties that are not defined in schema. This is OK for data sets that don't yet have data pushed in, but this was not the case. Extra data properties were dropped: ${s.map((t=>`'${t}'`)).join(", ")}`)}s.forEach((i=>{delete t.parsedDataArrs[i]})),t.keys=Object.keys(t.parsedDataArrs)}if(Object.entries(this.Md).forEach((([i,s])=>{s.dataStorage||(s.dataStorage=Zu(t.parsedDataArrs[i]))})),0===this.dd&&1===Object.keys(this.Md).length&&!this.Sd){const o=(null!==(s=null===(i=t.opts)||void 0===i?void 0:i.step)&&void 0!==s?s:1)>0?"progressive":"regressive";this.Md._auto={dataStorage:Float64Array,auto:{start:null!==(r=null===(e=t.opts)||void 0===e?void 0:e.start)&&void 0!==r?r:0,step:null!==(h=null===(n=t.opts)||void 0===n?void 0:n.step)&&void 0!==h?h:1},xd:{userSpecified:o,effective:o}}}Object.entries(this.Md).forEach((([i,s])=>{var e,r,n,h,o,a,l,u;if(!s.auto)return;const c=null!==(n=null!==(r=null===(e=t.opts)||void 0===e?void 0:e.step)&&void 0!==r?r:"object"==typeof s.auto?s.auto.step:void 0)&&void 0!==n?n:1;let d;if(0===this.dd)d=null!==(a=null!==(o=null===(h=t.opts)||void 0===h?void 0:h.start)&&void 0!==o?o:"object"==typeof s.auto?s.auto.start:void 0)&&void 0!==a?a:0;else if(void 0!==(null===(l=t.opts)||void 0===l?void 0:l.start))d=t.opts.start;else{const t=this.Id();if(!t)return;d=t[i]+c}const f=new(null!==(u=s.dataStorage)&&void 0!==u?u:Float64Array)(t.appendCount);for(let i=0;i<t.appendCount;i+=1)f[i]=d+i*c;t.parsedDataArrs[i]=f})),t.keys=Object.keys(t.parsedDataArrs);const u=Object.keys(this.Md).filter((i=>!t.keys.includes(i)));if(u.length>0&&t.appendCount>0){if(this.Sd)throw new Error(`LightningChart JS error - Input data is missing keys that were defined in schema. This is not allowed when strict mode is enabled. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`);this.vl&&Or.console.warn(`LightningChart JS warning - Input data is missing keys that were defined in schema. They will be filled with \`0\`. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`)}for(const i of u)t.parsedDataArrs[i]=new(null!==(o=this.Md[i].dataStorage)&&void 0!==o?o:Float64Array)(t.appendCount).fill(0);if(t.keys=Object.keys(t.parsedDataArrs),0===this.dd&&0===Object.values(this.Md).reduce(((t,i)=>t+(i.cache?1:0)),0)&&(void 0===this.Cd||this.Cd===t.appendCount)&&this.pd&&(0===(null===(a=t.opts)||void 0===a?void 0:a.offset)||void 0===(null===(l=t.opts)||void 0===l?void 0:l.offset)))return Object.entries(this.Md).forEach((([i,s])=>{var e,r;s.cache="number"==typeof t.parsedDataArrs[i]?new(null!==(e=s.dataStorage)&&void 0!==e?e:Float64Array)(t.appendCount).fill(t.parsedDataArrs[i]):Yu(t.parsedDataArrs[i],null!==(r=s.dataStorage)&&void 0!==r?r:Float64Array)})),this.Td(),{maxSampleCount:t.appendCount,buckets:this.Md,incomingDataReplacedCache:!0,keys:t.keys};if(void 0===this.Cd){const i=this.dd+t.appendCount;if(!Object.values(this.Md).find((t=>t.cache)))return Object.values(this.Md).forEach((t=>{var s;t.cache=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i)})),this.Td(),{maxSampleCount:i,buckets:this.Md,keys:t.keys};const s=Object.values(this.Md)[0].cache.length;if(s<i){if(!this.yd.warningDisplayed){const s=Or.performance.now();if(this.yd.expandEvents=this.yd.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.yd.expandEvents.push({timestamp:s}),this.yd.expandEvents.length>5)return this.vl&&Or.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.yd.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.wd(t)}return Object.values(this.Md).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e})),this.ud=this.dd,this.Td(),{maxSampleCount:i,buckets:this.Md,keys:t.keys}}return s>4*i?(Object.values(this.Md).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache.subarray(0,this.dd)),t.cache=e})),this.Td(),{maxSampleCount:i,buckets:this.Md,keys:t.keys}):(this.Td(),{maxSampleCount:i,buckets:this.Md,keys:t.keys})}t.appendCount+this.dd>this.Cd&&this._t.kt("maxsamplecountexceed",{type:"maxsamplecountexceed",currentSampleCount:this.dd,currentMaxSampleCount:this.Cd,newTotalSampleCount:this.dd+t.appendCount});const c=this.Cd;return Object.values(this.Md).forEach((t=>{var i;t.cache=t.cache||new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(c)})),this.Td(),{maxSampleCount:c,buckets:this.Md,keys:t.keys}}getSampleCount(){return this.dd}getNextSampleIndex(){return this.fd}Fd(t){const i=this.Md&&this.Md[t];if(i)return i.xd&&"userSpecified"in i.xd?i.xd.userSpecified:i.xd&&"autoDetectResult"in i.xd?i.xd.autoDetectResult:void 0}Ld(t){if(!this.Md)return;const i=null==t?void 0:t.x,s=null==t?void 0:t.y,e=void 0!==i?this.Md[i]:void 0,r=void 0!==s?this.Md[s]:void 0;if(e&&e.xd&&"userSpecified"in e.xd){if("progressive"===e.xd.userSpecified)return"ProgressiveX";if("regressive"===e.xd.userSpecified)return"RegressiveX"}if(r&&r.xd&&"userSpecified"in r.xd){if("progressive"===r.xd.userSpecified)return"ProgressiveY";if("regressive"===r.xd.userSpecified)return"RegressiveY"}if(e&&e.xd&&"autoDetectResult"in e.xd&&e.xd.autoDetectResult){if("progressive"===e.xd.autoDetectResult)return"ProgressiveX";if("regressive"===e.xd.autoDetectResult)return"RegressiveX"}if(r&&r.xd&&"autoDetectResult"in r.xd&&r.xd.autoDetectResult){if("progressive"===r.xd.autoDetectResult)return"ProgressiveY";if("regressive"===r.xd.autoDetectResult)return"RegressiveY"}}Pd(t){if(!t||!this.Md)return{dataPattern:void 0,Bd:Float64Array,Dd:Float64Array};const i={dataPattern:this.Ld(t)};for(const s of Object.keys(t)){const e=s,r=t[e];if(void 0===r)continue;const n=this.Md[r];n&&n.cache&&("x"===e&&(i.Ed=n.cache,i.Bd=n.dataStorage),"y"===e&&(i.Rd=n.cache,i.Dd=n.dataStorage),"color"===e&&(i.Od=n.cache),"rotation"===e&&(i.zd=n.cache),"size"===e&&(i.Vd=n.cache),"lookupValue"===e&&(i.Nd=n.cache))}return i}setMaxSampleCount(t){if("object"==typeof t){this.Gd&&this.removeEventListener("maxsamplecountexceed",this.Gd);const i=t.max,s=t.initial;this.Gd=t=>{if(void 0!==i&&t.currentMaxSampleCount>=i)return;let s=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==i&&(s=Math.min(s,i)),this.setMaxSampleCount(s)},this.addEventListener("maxsamplecountexceed",this.Gd),void 0===this.Cd&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.dd,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Cd&&this.Cd>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Md||!Object.values(this.Md).find((t=>t.cache)))return this.Cd=i,this;if(i===this.Cd)return this;if(this.vd&&0!==this.ud&&this.ud!==this.getSampleCount())throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Cd=i,this.dd<i?(this.ud=this.dd,this.vd=!1):(this.ud=0,this.vd=!0),Object.values(this.Md).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e}))}return this}getMaxSampleCount(){return this.Cd}clear(){return this.ud=0,this.dd=0,this.fd=0,this.vd=!1,this._t.kt("clear",{type:"clear"}),this}readBack(t){var i;if(!this.Md)return{data:{},iSampleFirst:0};const s=null===(i=Object.values(this.Md).find((t=>t.cache)))||void 0===i?void 0:i.cache;if(!s)return{data:{},iSampleFirst:0};const e=s.length;let r,n=[];if(null==t?void 0:t.onlyInRange){const i=this.Md[t.onlyInRange.key],s=this.Fd(t.onlyInRange.key),e=i.cache;if(!s)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");if(!e)return{data:{},iSampleFirst:0};const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),o=Math.max(t.onlyInRange.start,t.onlyInRange.end),a=$u(h,o,e,this.fd,this.dd,this.ud,s,0);if(!a)return{data:{},iSampleFirst:0};n=a.dataRanges,r=a.iFirstSample}else if(void 0!==this.Cd&&this.vd&&this.fd%this.Cd!=0){const t=this.ud,i=e-t,s=this.ud-1;n.push({offset:t,count:i}),n.push({offset:0,count:s+1}),r=this.fd-e}else n.push({offset:0,count:this.dd}),r=0;const h=n.reduce(((t,i)=>t+i.count),0),o=Object.fromEntries(Object.entries(this.Md).filter((([t,i])=>i.cache)).map((([t,i])=>{var s;const e=i.cache;let r;if(1===n.length&&n[0].count===e.length)r=e;else{r=new(null!==(s=i.dataStorage)&&void 0!==s?s:Float64Array)(h);let t=0;for(const s of n)r.set(i.cache.subarray(s.offset,s.offset+s.count),t),t+=s.count}return[t,r]})));return{data:o,iSampleFirst:r}}$d(t,i){var s,e;const r=this.readBack(i);return{xValues:null!==(s=r.data[t.x])&&void 0!==s?s:new Float64Array,yValues:null!==(e=r.data[t.y])&&void 0!==e?e:new Float64Array,lookupValues:t.lookupValue?r.data[t.lookupValue]:void 0,colors:t.color?r.data[t.color]:void 0,sizes:t.size?r.data[t.size]:void 0,rotations:t.rotation?r.data[t.rotation]:void 0,iSampleFirst:r.iSampleFirst}}Ud(t){}jd(){return{min:0,max:void 0!==this.Cd&&this.vd?this.Cd-1:this.dd-1}}Yd(t){t=Math.min(t,this.dd),this.fd-=t,this.dd-=t,this.ud-=t,this.ud<0&&void 0!==this.Cd&&(this.ud+=this.Cd)}kd(t,i){const s=this.Md;if(!s)return;const e=this.Fd(t),r="progressive"===e,n=s[t].cache,h=i.parsedDataArrs[t],o=Object.keys(i.parsedDataArrs);if(!e||!n||!h)return;const a=i.count,l=h[0];if(this._d(Object.fromEntries(o.map((t=>[t,i.parsedDataArrs[t][i.offset+i.count-1]]))))){const t=n.length,e=this.dd,h=this.fd-1,u=Math.max(h-e+1,0),c=Uu(l,u,h,r,(i=>n[Gu(i,this.fd,t,this.ud)])),d=c-1,f=c+1,v=n[Gu(c,this.fd,t,this.ud)],A=f<=this.fd-1?n[Gu(f,this.fd,t,this.ud)]:void 0,g=void 0!==A&&(r&&A<l||!r&&A>l)?f+1:r&&v<l||!r&&v>l?c+1:d+1,y=h-g+1,p=Object.fromEntries(o.map((t=>{var i;return[t,new(null!==(i=s[t].dataStorage)&&void 0!==i?i:Float64Array)(y)]})));let m=0;for(let i=g;i<=h;i+=1){const e=Gu(i,this.fd,t,this.ud);for(const t of o)p[t][m]=s[t].cache[e];m+=1}this.Yd(y);const S=Object.fromEntries(o.map((t=>{var e;const r=new(null!==(e=s[t].dataStorage)&&void 0!==e?e:Float64Array)(a+y);return r.set(i.parsedDataArrs[t]),r.set(p[t],a),[t,r]})));this.gd=!0,this.appendSamples(S),this.gd=!1,this._t.kt("clear",{type:"clear"})}else{const s=this.Id(),e=s?s[t]:0;let r=0;for(let t=0;t<a;t+=1)if(h[t]>e){r=t;break}this.gd=!0,this.appendSamples(i.parsedDataArrs,{offset:r}),this.gd=!1}}_d(t){const i=this.Id();if(!i||!this.Md)return;const s=Object.keys(t),e=[];for(const r of s){const s=this.Fd(r);if(!s)continue;const n=i[r],h=t[r],o="number"==typeof h?h:h[0];("progressive"===s&&o<n||"regressive"===s&&o>n)&&e.push(r)}return e.length>0?e:void 0}Hd(t){const i=this.Pd(t);if(!i.Ed||!i.Rd||0===this.dd)return;if(void 0===this.Cd)return this.fd>0?{x:i.Ed[0],y:i.Rd[0]}:void 0;if(!this.vd)return{x:i.Ed[0],y:i.Rd[0]};let s=this.ud-this.dd;return s<0&&(s+=this.Cd),{x:i.Ed[s],y:i.Rd[s]}}Wd(t){const i=this.Pd(t);if(!i.Ed||!i.Rd||0===this.dd)return;if(void 0===this.Cd){const t=this.dd-1;return t>=0?{x:i.Ed[t],y:i.Rd[t]}:void 0}let s=this.ud-1;return s<0&&(s+=this.Cd),{x:i.Ed[s],y:i.Rd[s]}}Xd(){if(!this.Md||0===this.dd)return;let t;if(void 0===this.Cd){if(this.fd>0)return;t=0}else this.vd?(t=this.ud-this.dd,t<0&&(t+=this.Cd)):t=0;return Object.fromEntries(Object.entries(this.Md).map((([i,s])=>[i,s.cache[t]])))}Id(){if(!this.Md||0===this.dd)return;let t;return void 0===this.Cd?t=this.dd-1:(t=this.ud-1,t<0&&(t+=this.Cd)),Object.fromEntries(Object.entries(this.Md).map((([i,s])=>[i,s.cache[t]])))}Zd(t,i){const s=this.Pd(t);if(!(this.Md&&0!==this.dd&&s&&s.Ed&&s.Rd))return;const e=s.Ed.length,r=this.dd,n=this.fd-1,h=Math.max(n-r+1,0)+i,o=Gu(h,this.fd,e,this.ud);return{x:s.Ed[o],y:s.Rd[o],lookupValue:s.Nd?s.Nd[o]:void 0,color:s.Od?s.Od[o]:void 0,size:s.Vd?s.Vd[o]:void 0,rotation:s.zd?s.zd[o]:void 0,iSample:h,sample:Object.fromEntries(Object.entries(this.Md).map((([t,i])=>[t,i.cache?i.cache[o]:void 0])))}}Jd(t,i,s,e,r){if(!t)return;const n=this.Md,h=this.Pd(t),o=h.dataPattern,a=h.Ed,l=h.Rd;if(!a||!l||!n)return;const u=(t,i)=>({x:a[t],y:l[t],lookupValue:h.Nd?h.Nd[t]:void 0,color:h.Od?h.Od[t]:void 0,size:h.Vd?h.Vd[t]:void 0,rotation:h.zd?h.zd[t]:void 0,iSample:i,sample:Object.fromEntries(Object.entries(n).map((([i,s])=>[i,s.cache?s.cache[t]:void 0])))}),c=a.length,d=this.dd,f=this.fd-1,v=Math.max(f-d+1,0);if(o){const e=zo(o),r=this.Hd(t),a=this.Wd(t);if(!(r&&a&&h.Ed&&h.Rd))return;const l="ProgressiveX"===o||"RegressiveX"===o?"x":"y",d="x"===l?"y":"x",A="x"===l?h.Ed:h.Rd,g="x"===d?h.Ed:h.Rd,y=i[l],p=Math.min(r[l],a[l]),m=Math.max(r[l],a[l]);if(y<p||y>m)return;const S=Uu(y,v,f,e,(t=>A[Gu(t,this.fd,c,this.ud)])),b=Gu(S,this.fd,c,this.ud);if(!s)return u(b,S);const x=S-1,M=S+1,w=A[b],_=e?y>=w?M<=f?M:void 0:x>=v?x:void 0:y<=w?M<=f?M:void 0:x>=v?x:void 0;if(void 0===_)return;const k=Gu(_,this.fd,c,this.ud),C=S<_?{pos:A[b],val:g[b],iSample:S}:{pos:A[k],val:g[k],iSample:_},T=S>_?{pos:A[b],val:g[b],iSample:S}:{pos:A[k],val:g[k],iSample:_},F=(y-C.pos)/(T.pos-C.pos),I=Vo(C.val,T.val,F),L=Object.fromEntries(Object.entries(n).map((([t,i])=>[t,i.cache?i.cache[b]:void 0])));return"x"===Oo(o)?{x:y,y:I,iSample:Vo(C.iSample,T.iSample,F),sample:L}:{y:y,x:I,iSample:Vo(C.iSample,T.iSample,F),sample:L}}let A,g=Number.MAX_VALUE;const y=Je(i,e,r),p=this.dd-1;for(let t=0;t<=p;t+=1){const i=a[t],s=l[t];if(!this.md||!Number.isNaN(i)&&!Number.isNaN(s)){const n=Ze(i,e.x,r.x),h=Ze(s,e.y,r.y),o=(n-y.x)**2+(h-y.y)**2;o<g&&(g=o,A=t)}}return void 0===A?void 0:u(A,A)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Gu=(t,i,s,e)=>t%s,$u=(t,i,s,e,r,n,h,o)=>{if(0===e||0===r)return;const a="progressive"===h,l=s.length,u=e-1,c=Math.max(u-r+1,0),d=Ou(s)?Uu(t,c,u,a,(t=>s.elementAt(Gu(t,e,l)))):Uu(t,c,u,a,(t=>s[Gu(t,e,l)])),f=Ou(s)?Uu(i,c,u,a,(t=>s.elementAt(Gu(t,e,l)))):Uu(i,c,u,a,(t=>s[Gu(t,e,l)])),v=Math.min(d,f),A=Math.max(d,f);if(v===A&&(0===v||v===u))return;const g=Math.max(v-o,c),y=Math.min(A+o,u),p=Gu(g,e,l),m=Gu(y,e,l);return p>m?{iFirstSample:g,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:l-p},{offset:0,count:m+1}]}:{iFirstSample:g,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:m-p+1}]}},Uu=(t,i,s,e,r)=>{const n=s;for(;i!==s;){const n=Math.ceil((i+s)/2),h=r(n);e&&t<h||!e&&t>h?s=n-1:i=n}const h=Math.abs(t-r(i));return i<n&&Math.abs(t-r(i+1))<h?i+1:i},ju=(t,i,s,e,r)=>{if("number"==typeof i)t.fill(i,r,r+e);else{const n=i.length;if(Array.isArray(i))for(let n=0;n<e;n+=1)t[r+n]=i[s+n];else t.set(n===e?i:i.subarray(s,s+e),r)}},Yu=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),Hu=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Wu=t=>"string"==typeof t&&Hu.test(t)&&!Or.isNaN(Date.parse(t)),Xu=(t,i)=>{if("number"==typeof t)return t;if(pe(t))return t.toUint32();if(t instanceof Date)return t.getTime();if("string"==typeof t){if(Wu(t))return new Date(t).getTime();throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings")}const s=t.length,e=t[0]&&t[0]instanceof Date,r=t[0]&&Wu(t[0]),n=t[0]&&pe(t[0]);if(!r&&t[0]&&"string"==typeof t[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(r){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=new Date(t[i]).getTime();return e}if(e){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=t[i].getTime();return e}if(n){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],r=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=r}return s}return t},Zu=t=>{if(t&&Array.isArray(t))return Float64Array;const i="object"==typeof t?Object.getPrototypeOf(t).constructor:void 0;return null!=i?i:Float64Array},Ju=t=>!!t&&!Array.isArray(t)&&(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array);class Qu extends Du{constructor(t,i,s,e,r){var n;super(t,i,s,e,r),this.Kl="label",this.hd=this.ke.no(this.renderingScale).Eh(this.Kl).Er(ho).eo(Hn).ro(Hn),this.setMargin(null!==(n=r.uiTextPadding)&&void 0!==n?n:5),this._t.Ms(this.hd)}bo(){return[this.hd]}setFillStyle(t){return this.hd.Er(t),this.ke.fe(),this}getFillStyle(){return this.hd.Qn()}Or(){void 0!==this._o&&this.hd.Nl(this._o);const i=this.getPosition(e(0,0),t.UISpace.Content),s=Je(i,this.scale,this.renderingScale);return this.hd.zr(s),this.hd.In=this.In,this}Sh(){this.hd.Sh();const t=0===this.Kl.length?e(0,0):this.hd.td();return this.setContentSize(t),super.Sh()}setText(t){return this.Kl=t,this.hd.Eh(this.Kl),this.ke.fe(),this}getText(){return this.Kl}setFont(t){return this.hd.ih(t),this.ke.fe(),this}getFont(){return this.hd.th()}setTextRotation(t){return this.hd.eh(t),this.ke.fe(),this}getTextRotation(){return this.hd.rh()}}const Ku={...Wl,...Zl,uiElement:Qu};class qu extends Eu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.fitTo=this.ko.bind(this),this.setSize=this.fitTo,this.hd=this.ke.Qd(i).Er(ho).Dr(_r),this.Kd=this.hd._a(),this._t.Ms(this.hd)}bo(){return[this.hd]}setCornerRadius(t,i){var s,e,r,n;return this.qd=t,this.Kd.tf(t?{extent:t,c_x1_y1:null===(s=null==i?void 0:i.bottomLeft)||void 0===s||s,c_x1_y2:null===(e=null==i?void 0:i.topLeft)||void 0===e||e,c_x2_y1:null===(r=null==i?void 0:i.bottomRight)||void 0===r||r,c_x2_y2:null===(n=null==i?void 0:i.topRight)||void 0===n||n,skipTooSmallCheck:!!i}:void 0),this.ke.fe(),this}getCornerRadius(){return this.qd}setFillStyle(t){return this.hd.Er(t),this.ke.fe(),this}getFillStyle(){return this.hd.Qn()}setStrokeStyle(t){return this.hd.Dr(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.Il()}Or(){void 0!==this._o&&this.hd.Nl(this._o);const i=mh([this.getPosition(e(-1,-1),t.UISpace.Content),this.getPosition(e(1,1),t.UISpace.Content)].map((t=>Je(t,this.scale,this.renderingScale))));return this.Kd.if(i.min.x,i.min.y,i.max.x,i.max.y),this}ko(t){return this.setContentSize(t),this.ke.fe(),this}Co(){return 0}To(){return 0}Io(){return 0}Fo(){return 0}}class tc extends Eu{constructor(t,i,s,r,n){super(t,i,s,r,n),this.sf=e(0,0),this.hd=t.ef(i).Pc(0).Xr(360).Er(ho).Dr(_r),this._t.Ms(this.hd)}bo(){return[this.hd]}setFillStyle(t){return this.hd.Er(t),this.ke.fe(),this}getFillStyle(){return this.hd.Qn()}setStrokeStyle(t){return this.hd.Dr(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.Il()}Or(){void 0!==this._o&&this.hd.Nl(this._o);const i=this.getSize(t.UISpace.Content).x/2;return this.hd.Dc(i*this.renderingScale.$i().x).Ec(i*this.renderingScale.$i().y).zr(Je(this.getPosition(e(0,0),t.UISpace.Content),this.scale,this.renderingScale)).Oc(255).Sh(),this}ko(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(e(2*i,2*i)),this.sf=t,this.ke.fe(),this}Co(){return(this.getSize(t.UISpace.Content).x-this.sf.x)/2}To(){return(this.getSize(t.UISpace.Content).x-this.sf.x)/2}Io(){return(this.getSize(t.UISpace.Content).y-this.sf.y)/2}Fo(){return(this.getSize(t.UISpace.Content).y-this.sf.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(e(i,i)),this.sf=t,this}}class ic extends Ru{constructor(t,i,s,r,n){super(t,i,s,Mu.Simple,r,n),this.rf=u(e(0,0)),this.nf=!1,this.ad()}ld(){const t=this.rf.C();if(this.nf){const i=Math.min(t.x,t.y);return[e(0,0),e(i/2,i/2),e(0,i),e(-i/2,i/2)]}const i=2*Math.sqrt(this.rf.C().x*this.rf.C().x/4+this.rf.C().y*this.rf.C().y/4),s=e(Math.cos(Math.PI/4)*i,0),r=e(0,Math.sin(Math.PI/4)*i),n=e(0,0),h=Lh(n,Lh(s,r)),o=Lh(h,Lh(r,Ih(s,-1)));return[n,h,o,Ph(o,Lh(s,r))]}bo(){return[this.hd]}setFillStyle(t){return this.hd.Er(t),this.ke.fe(),this}getFillStyle(){return this.hd.Qn()}setStrokeStyle(t){return this.hd.Dr(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.Il()}ko(t){return this.rf._(t),this.nf=!1,this.ke.fe(),this}Co(){return this.nf?0:(this.getSize(t.UISpace.Content).x-this.rf.C().x)/2}To(){return this.nf?0:(this.getSize(t.UISpace.Content).x-this.rf.C().x)/2}Io(){return this.nf?0:(this.getSize(t.UISpace.Content).y-this.rf.C().y)/2}Fo(){return this.nf?0:(this.getSize(t.UISpace.Content).y-this.rf.C().y)/2}fitTo(t){return this.rf._(t),this.nf=!0,this.ke.fe(),this}}class sc extends Ru{constructor(i,s,r,n,h){super(i,s,r,Mu.Simple,n,h),this.hf=u(e(0,0)),this.af=u(10),this.lf=u(void 0),this.Oo=u(t.UIDirections.Right),this.ad()}bo(){return[this.hd]}setFillStyle(t){return this.hd.Er(t),this.ke.fe(),this}getFillStyle(){return this.hd.Qn()}setStrokeStyle(t){return this.hd.Dr(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.Il()}setDirection(t){return this.Oo._(t),this.ke.fe(),this}getDirection(){return this.Oo.C()}setPointerLength(t){return this.af._(t),this.ke.fe(),this}getPointerLength(){return this.af.C()}setPointerAngle(t){return this.lf._(t),this.ke.fe(),this}getPointerAngle(){let t=this.lf.C();if(void 0===t){const i=this.uf();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}ko(t){return this.hf._(t),this.ke.fe(),this}cf(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}df(){return ln(this.Oo.C())?this.hf.C().x:this.hf.C().y}uf(){return ln(this.Oo.C())?this.hf.C().y:this.hf.C().x}Co(){switch(this.Oo.C()){case t.UIDirections.Right:return 0;case t.UIDirections.Left:return this.getPointerLength();case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.cf()-this.uf());default:return 0}}To(){switch(this.Oo.C()){case t.UIDirections.Right:return this.getPointerLength();case t.UIDirections.Left:return 0;case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.cf()-this.uf());default:return 0}}Io(){switch(this.Oo.C()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.cf()-this.uf());case t.UIDirections.Up:return this.getPointerLength();case t.UIDirections.Down:default:return 0}}Fo(){switch(this.Oo.C()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.cf()-this.uf());case t.UIDirections.Up:return 0;case t.UIDirections.Down:return this.getPointerLength();default:return 0}}ld(){const t=an(this.Oo.C()),i=Th(e(0,0),t),s=this.getPointerLength(),r=this.cf(),n=this.df(),h=this.uf();if(!(0!==s&&0!==r||0!==n&&0!==h))return[];const o=e(0,0),a=Lh(Lh(o,Ih(t,-s)),Ih(i,r/2)),l=Lh(a,Ih(i,(h-r)/2)),u=Lh(l,Ih(t,-n)),c=Lh(Lh(o,Ih(t,-s)),Ih(i,-r/2)),d=Lh(c,Ih(i,-(h-r)/2)),f=Lh(d,Ih(t,-n));let v;return v=0===n||0===h?[o,a,c]:0===s||0===r?[l,u,f,d]:Ur(h,r)?[o,a,u,f,c]:[o,a,l,u,f,d,c],v}}class ec extends Du{constructor(t,i,s,e,r){super(t,i,s,e,r),this.fitTo=this.ko.bind(this),this.setSize=this.fitTo,this.ff=new Nu,this.hd=this.ke.yf(i).Hr(_r).gf(ho).Af(ho).vf(this.ff,{x:"x",y:"y"}),this._t.Ms(this.hd)}bo(){return[this.hd]}setShape(t){return this.hd.pf(t),this}getShape(){return this.hd.mf()}setRotation(t){return this.hd.Sf(t),this}getRotation(){return this.hd.bf()}setFillStyle(t){return this.hd.Af(t),this.ke.fe(),this}getFillStyle(){return this.hd.xf()}setStrokeStyle(t){return this.hd.Mf(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.wf()}Or(){void 0!==this._o&&this.hd.Nl(this._o);const i=Je(this.getPosition({x:0,y:0},t.UISpace.Content),this.scale,this.renderingScale),s=Math.max(this.size.x,this.size.y);if(this.ff.clear(),s>0){const t=this.hd.mf(),e=this.hd.xf(),r=Aa(t)&&t,n=Mr(e)&&e;if(r){const t=s/r.li().y;this.hd._f(t)}else if(n){const t=n.source;if(t instanceof Image){const i=s/t.height;this.hd._f(i)}}else this.hd._f(s);this.ff.appendSample(i)}return this}ko(t){return this.setContentSize(t),this.ke.fe(),this}Co(){return 0}To(){return 0}Io(){return 0}Fo(){return 0}}const rc={...Wl,...Zl,uiElement:ec};class nc extends Ql{setSize(t){return this.setContentSize(t),this.ke.fe(),this}}class hc extends Vl{constructor(){super(...arguments),this.kf=[],this.Cf=0,this.Tf=t=>{const i=this.kf.indexOf(t);i>=0&&this.kf.splice(i,1)}}getMembers(){return this.kf}getMemberCount(){return this.kf.length}setMinimumSize(t){return this.Ff=t,this.ke.fe(),this}getMinimumSize(){return this.Ff}addElement(t,i=-1){const s=t.Uo(this.ke,this.renderingScale,this.scale,this.Tf,this.rs,!1);return s.setPointerEvents(this.getPointerEvents()),i>=0?this.kf.splice(i,0,s):this.kf.push(s),s.setVisible(this.getVisible()),this._t.ks(s),this.Wi&&(Dn(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.kf.slice().forEach(Gr),this}Or(){super.Or(),this.kf.forEach((t=>{t.In=this.In}));const t=this._o;return void 0!==t&&this.kf.forEach(((i,s)=>{i._o=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.kf.forEach((i=>i.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let i=0;i<this.kf.length;i+=1)this.kf[i].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.kf.length;t+=1)if(this.kf[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.kf.length;i+=1){const s=this.kf[i];Br(s)&&s.setHighlight(t)}return this}}class oc extends hc{Or(){super.Or();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.kf.reduce(((t,i)=>t+ +(i instanceof nc)),0),r=s>0?(this.size.x-this.Cf)/s:0;return this.kf.reduce(((t,s)=>s instanceof nc?this.scale.Bi({x:t,y:i.y},{x:r+s.getSize().x,y:0}).x:s.setOrigin(e(-1,1)).setPosition(e(t,i.y)).Or().getPosition(e(1,0)).x),i.x),this}Sh(){for(let t=0;t<this.kf.length;t+=1){const i=this.kf[t];i instanceof ac&&i.setMinimumSize(0),i.Sh()}const t=this.kf.reduce(this.If.bind(this),r(0,0));this.Cf=t.x;const i=void 0===this.Ff?t:e(Math.max(t.x,this.Ff),t.y);this.setContentSize(i);for(let t=0;t<this.kf.length;t+=1){const s=this.kf[t];s instanceof ac&&s.setMinimumSize(i.y).Sh()}return super.Sh()}If(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(lc,i).setSize(e(0,t))}}class ac extends hc{Or(){super.Or();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.kf.reduce(((t,i)=>t+ +(i instanceof nc)),0),r=s>0?(this.size.y-this.Cf)/s:0;return this.kf.reduce(((t,s)=>s instanceof nc?this.scale.Bi({x:i.x,y:t},{x:0,y:-(r+s.getSize().y)}).y:s.setOrigin(e(-1,1)).setPosition(e(i.x,t)).Or().getPosition(e(0,-1)).y),i.y),this}Sh(){for(let t=0;t<this.kf.length;t+=1){const i=this.kf[t];i instanceof oc&&i.setMinimumSize(0),i.Sh()}const t=this.kf.reduce(this.If.bind(this),r(0,0));this.Cf=t.y;const i=void 0===this.Ff?t:e(t.x,Math.max(t.y,this.Ff));this.setContentSize(i);for(let t=0;t<this.kf.length;t+=1){const s=this.kf[t];s instanceof oc&&s.setMinimumSize(i.x).Sh()}return super.Sh()}If(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(lc,i).setSize(e(0,t))}}const lc={...Wl,...Zl,uiElement:nc};class uc extends ac{constructor(){super(...arguments),this.kf=[]}addRow(){return this.addElement(fc,void 0)}getRow(t,i=!1){return i&&this.kf.length<=t?(this.addRow(),this.getRow(t,!0)):this.kf[t]}}const cc={...Wl,...Xl,...Jl},dc={...cc,uiElement:ac,background:qu},fc={...cc,uiElement:oc,background:qu},vc={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},Ac=(t=>{const i={},s=`stylable${t}s`;return i[s]=[],i[`set${t}FillStyle`]=function(t){return this[s].forEach((i=>i.setFillStyle(t))),this},i[`get${t}FillStyle`]=function(){return this[s][0].getFillStyle()},i[`set${t}Font`]=function(t){return this[s].forEach((i=>i.setFont(t))),this},i[`get${t}Font`]=function(){return this[s][0].getFont()},i[`set${t}Rotation`]=function(t){return this[s].forEach((i=>i.setTextRotation(t))),this},i[`get${t}Rotation`]=function(){return this[s][0].getTextRotation()},i})("Text"),gc={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this._t.kt("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonStrokeStyle(t){return this.button.setStrokeStyle(t),this},getButtonStrokeStyle(){return this.button.getStrokeStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},yc={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},pc={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},mc={...Wl,...Xl,background:qu,Uo(t,i,s,e,r,n){const h=new oc(t,i,s,this.background,e,r),o=h.addElement(Ku,void 0),a=Object.assign(h,vc,{setTextLabel:o},Ac,{stylableTexts:[o]});return Hl(a,r,n),this.applyStylers(a,r)}}.addStyler(Yl),Sc={...Wl,...Xl,background:sc,direction:t.UIDirections.Up,setDirection(t){return this.direction=t,this},Uo(i,s,e,r,n,h){const o=this.direction,a=new oc(i,s,e,this.background,r,n),l=a.addElement(Ku,void 0),u=a.getBackground().setDirection(o),c=a.Or.bind(a),d=Object.assign(a,vc,{setTextLabel:l},Ac,{stylableTexts:[l]},pc,{pointable:u},{setTickLabelPadding(i){return this.getDirection()===t.UIDirections.Up?(this.setPadding({top:i}),l.setMargin({top:0})):this.getDirection()===t.UIDirections.Down?(this.setPadding({bottom:i}),l.setMargin({bottom:0})):this.getDirection()===t.UIDirections.Right?(this.setPadding({right:i}),l.setMargin({right:0})):this.getDirection()===t.UIDirections.Left&&(this.setPadding({left:i}),l.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===t.UIDirections.Up?this.getPadding().top:this.getDirection()===t.UIDirections.Down?this.getPadding().bottom:this.getDirection()===t.UIDirections.Right?this.getPadding().right:this.getPadding().left},setTickLabelAlignment(t,i){return this},getTickLabelAlignment:()=>0,In:void 0,Or(){l.In=this.In,c()}});return d.jo="other",d.setPointerLength(n.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(n.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(n.uiTextFont).setTextFillStyle(n.uiTextFillStyle).setBackground((t=>t.setFillStyle(n.uiBackgroundFillStyle).setStrokeStyle(n.uiBackgroundStrokeStyle))),Hl(d,n,h),this.applyStylers(d,n)}};class bc extends zl{constructor(t,i,s,e,r,n){super(t,i,s,r,n),this.Lf=!1,this.Pf=ho,this.Bf=ho,this.getOn=()=>this.Lf,this.Bf=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.Df=new ec(this.ke,this.renderingScale,this.scale,$r,n).setShape(e).setFillStyle(this.Bf),this._t.ks(this.Df)}bo(){return[...this.Df.bo()]}setOn(t){return this.Lf=t,this.Df.setFillStyle(t?this.Pf:this.Bf),this.ke.fe(),this}setOffFillStyle(t){return this.Bf="function"==typeof t?t(this.Bf):t,this.Lf||this.Df.setFillStyle(this.Bf),this}getOffFillStyle(){return this.Bf}setSize(t){return this.Df.fitTo("number"==typeof t?e(t,t):t),this}getSize(){return this.Df.getSize()}setOnFillStyle(t){return this.Pf="function"==typeof t?t(this.Pf):t,this.Lf&&this.Df.setFillStyle(this.Pf),this}getOnFillStyle(){return this.Pf}setStrokeStyle(t){return this.Df.setStrokeStyle(t),this}getStrokeStyle(){return this.Df.getStrokeStyle()}setButtonShape(t){return this.Df.setShape(t),this.ke.fe(),this}getButtonShape(){return this.Df.getShape()}Or(){return super.Or(),this.Df._o=this._o,this.Df.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).Or(),this}Sh(){const t=this.Df.Sh().getSize();return this.setContentSize(t),super.Sh()}dispose(){return super.dispose(),this.Df.dispose(),this}setPointerEvents(t){return this.Df.setPointerEvents(t),this}getPointerEvents(){return this.Df.getPointerEvents()}setHighlight(t){const i=Vn(t);return this.Df.setHighlight(i),this._t.kt("highlightchange",{highlight:i}),this.ke.fe(),this}getHighlight(){return this.Df.getHighlight()}}const xc={...Wl,uiElement:bc,buttonShape:t.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},Uo(t,i,s,e,r,n){const h=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,r),r);return Hl(h,r,n),h}},Mc={...Wl,...Xl,background:qu,buttonBuilder:xc,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},Uo(i,s,e,r,n,h){var o;const a=new oc(i,s,e,this.background,r,n),l=a.addElement(dc);l.addGap();const u=l.addElement(this.buttonBuilder);l.addGap();const c=a.addElement(dc);c.addGap();const d=c.addElement(Ku);c.addGap(),a.addGap();const f=Object.assign(a,vc,{setTextLabel:d},Ac,{stylableTexts:[d]},gc,{button:u},yc);let v;return f.addEventListener("click",(()=>{f.getLocked()||f.setOn(!f.getOn())})),f.addEventListener("pointerenter",(()=>{f.setHighlight(!0)})),f.addEventListener("pointerleave",(()=>{f.setHighlight(!1)})),f.setMouseStyle(t.MouseStyles.Point),f.setTextFillStyleHidden(n.uiTextFillStyleHidden||n.uiTextFillStyle),f.addEventListener("switch",(t=>{t.state?v&&f.setTextFillStyle(v):(v=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))})),f.setPadding({left:null!==(o=n.uiTextPadding)&&void 0!==o?o:5}),Hl(f,n,h),this.applyStylers(f,n)}}.addStyler(Yl).addStyler(((t,i)=>(t.setButtonOnFillStyle(i.uiButtonFillStyle).setButtonOffFillStyle(i.uiButtonFillStyleHidden).setButtonSize(i.uiButtonSize).setButtonStrokeStyle(i.uiButtonStrokeStyle),t)));class wc extends zl{constructor(i,s,e,r,n){super(i,s,e,r,n),this.Ef=10,this.Rf=t.UIDirections.Up,this.Of=0,this.jo="major",this.zf=0,this.Vf=1,this.Kl=i.no(this.renderingScale).eo(Hn).ro(Hn),this._t.Ms(this.Kl),this.Yr=i.Wr(this.renderingScale),this._t.Ms(this.Yr)}bo(){return[this.Kl]}Or(){if(super.Or(),this.Wi)return this;const i=Je(this.getPosition(),this.scale,this.renderingScale),s=this.renderingScale.Bi(i,{x:this.Rf===t.UIDirections.Right?-this.Ef:this.Rf===t.UIDirections.Left?this.Ef:0,y:this.Rf===t.UIDirections.Up?-this.Ef:this.Rf===t.UIDirections.Down?this.Ef:0}),e=this.renderingScale.Bi(s,{x:this.Rf===t.UIDirections.Right?-this.Of:this.Rf===t.UIDirections.Left?this.Of:0,y:this.Rf===t.UIDirections.Up?-this.Of:this.Rf===t.UIDirections.Down?this.Of:0});return this.Yr.Zr(i).Xr(s),this.Kl.zr(e).Cu(this.Rf===t.UIDirections.Up?{x:this.zf,y:this.Vf}:this.Rf===t.UIDirections.Down?{x:this.zf,y:-this.Vf}:this.Rf===t.UIDirections.Right?{x:this.Vf,y:this.zf}:{x:-this.Vf,y:this.zf}),this.Kl.In=this.In,this}Sh(){const i=this.Yr.Ho().getThickness();return this.size=this.Rf===t.UIDirections.Left||this.Rf===t.UIDirections.Right?{x:this.Ef+this.Of+this.Kl.Sh().td().x,y:i}:{y:this.Ef+this.Of+this.Kl.Sh().td().y,x:i},super.Sh()}dispose(){return super.dispose(),this.Kl.dispose(),this.Yr.dispose(),this}setVisible(t){return super.setVisible(t),this.Kl.setVisible(t),this.Yr.setVisible(t),this}setPointerEvents(t){return this.Kl.setPointerEvents(t),this.Yr.setPointerEvents(t),this}getPointerEvents(){return this.Kl.getPointerEvents()}getText(){return this.Kl.zh()}setTextFillStyle(t){return this.Kl.Er(t),this.ke.fe(),this}getTextFillStyle(){return this.Kl.Qn()}setTextFont(t){return this.Kl.ih(t),this}setTextRotation(t){return this.Kl.eh(t),this}getTextRotation(){return this.Kl.rh()}getTextFont(){return this.Kl.th()}setText(t){return this.Kl.Eh(t),this.ke.fe(),this}setDirection(t){return this.Rf=t,this.ke.fe(),this}getDirection(){return this.Rf}setPointerLength(t){return this.Ef=t,this.ke.fe(),this}getPointerLength(){return this.Ef}setTickLabelPadding(t){return this.Of=t,this.ke.fe(),this}getTickLabelPadding(){return this.Of}setTickStyle(t){return this.Yr.Hr(t),this.ke.fe(),this}getTickStyle(){return this.Yr.Ho()}setTickLabelAlignment(t,i){return this.zf=t,i&&(this.Vf=i),this.ke.fe(),this}getTickLabelAlignment(){return this.zf}}const _c={...Wl,direction:t.UIDirections.Up,setDirection(t){return this.direction=t,this},Uo(t,i,s,e,r,n){const h=this.direction,o=new wc(t,i,s,e,r);return Hl(o,r,n),o.setDirection(h),this.applyStylers(o,r)}}.addStyler(Yl),kc=_c.addStyler(((t,i)=>(t.jo="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Cc=_c.addStyler(((t,i)=>(t.jo="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle))));class Tc extends zl{constructor(t,i,s,e,r,n){var h,o,a,l,u,c;super(t,i,s,e,r),this.Nf=[],this.Gf="",this.$f=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:eo(i,t.value),this.Uf=0,this.jf=!1,this.zf=n,this.Yf=t.Qd(i).Dr(_r),this.Kd=this.Yf._a().tf("number"==typeof r.legendLUTCornerRadius?{extent:r.legendLUTCornerRadius,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this._t.Ms(this.Yf),this.Hf=t.no(i).Er(r.uiTextFillStyle).ih(r.uiTextFont).setPointerEvents(!1),this._t.Ms(this.Hf),this.Wf=null!==(h=r.legendLUTLabelMargin)&&void 0!==h?h:7,this.Xf=null!==(o=r.legendLUTUnitLabelMargin)&&void 0!==o?o:7,"vertical"===n?(this.Zf=null!==(a=r.legendLUTLengthVertical)&&void 0!==a?a:140,this.Jf=null!==(l=r.legendLUTThicknessVertical)&&void 0!==l?l:25):(this.Zf=null!==(u=r.legendLUTLengthHorizontal)&&void 0!==u?u:160,this.Jf=null!==(c=r.legendLUTThicknessHorizontal)&&void 0!==c?c:15)}bo(){return[this.Yf,this.Hf]}Qf(t){return this.Hf.eo(t),this.Nf.forEach((i=>i.eo(t))),this.ke.fe(),this}Kf(t){this.qf=t;const i=Lc(t,"vertical"===this.zf?0:90,this.jf);return this.Yf.Er(i),this.ke.fe(),this}Me(){return this.qf}tv(t){return this.Zf=t,this.ke.fe(),this}Cu(t){return this.zf=t,this.ke.fe(),this}sv(){return this.Zf}ev(t){return this.Jf=t,this.ke.fe(),this}rv(){return this.Jf}nv(t){return this.Gf=t,this.ke.fe(),this}hv(){return this.Gf}ov(t){return this.$f=t,this.ke.fe(),this}setLUTDisplayProportionalSteps(t){if(this.jf=t,this.qf){const t=Lc(this.qf,"vertical"===this.zf?0:90,this.jf);this.Yf.Er(t)}return this.ke.fe(),this}getLUTDisplayProportionalSteps(){return this.jf}setFillStyle(t){return this.Hf.Er(t),this.ke.fe(),this}getFillStyle(){return this.Hf.Qn()}setFont(t){return this.Hf.ih(t),this.ke.fe(),this}getFont(){return this.Hf.th()}setTextRotation(t){return this.Uf=t,this.Hf.eh(t),this.ke.fe(),this}getTextRotation(){return this.Hf.rh()}Or(){var i,s,e,r;if(super.Or(),this.Wi||!this.getVisible())return this;const n=this.qf;if(n){const h=this.renderingScale.$i(),o=n.min,a=n.max;if("vertical"===this.zf){const e=this.getPosition({x:-1,y:-1},t.UISpace.Content),r=Lh(e,{x:this.Jf*this.renderingScale.x.getPixelSize()+this.Wf*h.x,y:0}),l={x:r.x,y:r.y+(this.Gf.length>0?this.Xf*h.y+this.Hf.li().y:0)+.5*((null===(i=this.Nf[0])||void 0===i?void 0:i.li().y)||0)},u={x:l.x,y:this.getPosition({x:-1,y:1},t.UISpace.Content).y-.5*((null===(s=this.Nf[this.Nf.length-1])||void 0===s?void 0:s.li().y)||0)};this.Kd.if(e.x,l.y,e.x+this.Jf*this.renderingScale.x.getPixelSize(),l.y+this.Zf*this.renderingScale.y.getPixelSize()),this.Hf.Cu({x:-1,y:-1}).zr(r),n.getSteps().forEach(((t,i)=>{const s=yh(l,u,this.jf?!0===n.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===n.getInterpolation()?i/(n.getSteps().length-1):i/n.getSteps().length);this.Nf[i].Cu({x:-1,y:0}).zr(s)}))}else{const i=this.getPosition({x:-1,y:-1},t.UISpace.Content),s=this.getPosition({x:1,y:1},t.UISpace.Content),l=Math.max(this.Nf.reduce(((t,i)=>Math.max(t,i.li().y)),0),this.Hf.Sh().li().y),u=Lh(i,{x:.5*((null===(e=this.Nf[0])||void 0===e?void 0:e.li().x)||0),y:l}),c={x:s.x,y:u.y},d={x:n.getInterpolation()?c.x-(.5*((null===(r=this.Nf[this.Nf.length-1])||void 0===r?void 0:r.li().x)||0)+(this.Gf.length>0?this.Xf*h.x+this.Hf.li().x:0)):u.x+this.Zf*this.renderingScale.x.getPixelSize(),y:u.y},f={x:u.x,y:u.y+this.Wf*h.y};this.Kd.if(f.x,f.y,f.x+this.Zf*this.renderingScale.x.getPixelSize(),f.y+this.Jf*this.renderingScale.y.getPixelSize()),this.Hf.Cu({x:1,y:1}).zr(c),n.getSteps().forEach(((t,i)=>{const s=yh(u,d,this.jf?!0===n.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===n.getInterpolation()?i/(n.getSteps().length-1):i/n.getSteps().length);this.Nf[i].Cu({x:0,y:1}).zr(s)}))}}return this}Sh(){if(this.qf&&this.getVisible()){const t=this.qf.getSteps();for(let i=this.Nf.length;i<t.length;i+=1){const t=this.ke.no(this.renderingScale).setPointerEvents(!1);this.Nf.push(t),this._t.Ms(t)}for(let i=0;i<t.length;i+=1)this.Nf[i].Er(this.Hf.Qn()).ih(this.Hf.th()).Eh(this.$f(t[i],this.qf)).eh(this.Uf);for(let i=t.length;i<this.Nf.length;i+=1)this.Nf[i].dispose();if(this.Nf.length=t.length,this.Hf.Eh(this.Gf),"vertical"===this.zf){const t=this.Jf,i=this.Zf,s=t+Math.max(this.Nf.reduce(((t,i)=>Math.max(t,i.Sh().td().x)),0),this.Hf.Sh().td().x),e=(this.Gf.length>0?this.Xf+this.Hf.Sh().td().y:0)+i+.5*this.Nf[0].Sh().td().y+.5*this.Nf[this.Nf.length-1].Sh().td().y;this.setContentSize({x:s,y:e})}else{const t=this.Zf,i=this.Jf,s=Math.max(this.Gf.length>0?this.Xf+this.Hf.Sh().td().x+(this.qf.getInterpolation()?.5*this.Nf[this.Nf.length-1].Sh().td().x:0):0,this.qf.getInterpolation()?.5*this.Nf[this.Nf.length-1].Sh().td().x:0),e=t+.5*this.Nf[0].Sh().td().x+s,r=i+this.Wf+Math.max(this.Nf.reduce(((t,i)=>Math.max(t,i.Sh().td().y)),0),this.Hf.Sh().td().y);this.setContentSize({x:e,y:r})}}else this.Nf.forEach((t=>t.dispose())),this.Nf.length=0,this.Hf.setVisible(!1),this.Yf.setVisible(!1),this.setContentSize({x:0,y:0});return super.Sh()}dispose(){return super.dispose(),this.Yf.dispose(),this.Nf.forEach(Gr),this.Hf.dispose(),this}setPointerEvents(t){return this.Yf.setPointerEvents(t),this}getPointerEvents(){return this.Yf.getPointerEvents()}}const Fc={lutElement:{},setLUT(t){return this.lutElement.Kf(t),this},getLUT(){return this.lutElement.Me()},setLUTLength(t){return this.lutElement.tv(t),this},getLUTLength(){return this.lutElement.sv()},setLUTThickness(t){return this.lutElement.ev(t),this},getLUTThickness(){return this.lutElement.rv()},setLookUpUnit(t){return this.lutElement.nv(t),this},getLookUpUnit(){return this.lutElement.hv()},setLUTStepValueFormatter(t){return this.lutElement.ov(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Ic={...Wl,...Xl,background:qu,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},Uo(t,i,s,e,r,n){const h=new ac(t,i,s,this.background,e,r),o=h.addElement({Uo:()=>new Tc(t,i,s,$r,r,this.alignment)}),a=Object.assign(h,Ac,{stylableTexts:[o]},Fc,{lutElement:o});return Hl(a,r,n),this.applyStylers(a,r)}}.addStyler(Yl),Lc=(t,i,s)=>{const e=t.getSteps(),r=t.min,n=t.max-r;if(!0===t.getInterpolation())return new Oe({angle:i,stops:e.map(((i,h)=>({offset:s?(i.value-r)/n:h/(e.length-1),color:i.color||t.color})))});const h=[];for(let i=0;i<e.length;i+=1){const o=e[i];h.push({offset:s?.9*(o.value-r)/n:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;h.push({offset:s?a?.9*(a.value-r)/n:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new Oe({angle:i,stops:h})},Pc=Mc.addStyler((t=>t.addEventListener("switch",(i=>!0===i.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),Bc={TextBox:mc,CheckBox:Mc,ButtonBox:Pc,PointableTextBox:Sc,AxisTickMajor:kc,AxisTickMinor:Cc,LUTRange:Ic};class Dc extends Ll{constructor(t,i,s,e,r,n){super(t,i,s,e,n),this.av=r}}class Ec extends Il{constructor(i,s,e,r,n,h,o,a,l,u,c,d,f,v,A,g){var y,p,m;super(u,l,o,v,A,{numeric:l.getWidth({x:v.xAxisNumericTicks,y:v.yAxisNumericTicks}),datetime:l.getWidth({x:v.xAxisDateTimeTicks,y:v.yAxisDateTimeTicks}),time:l.getWidth({x:v.xAxisTimeTicks,y:v.yAxisTimeTicks})},g),this.lv=new Map,this.uv=void 0,this.cv=0,this.dv=[],this.fv=[],this.vv=!0,this.Av=[],this.gv=t=>{const i=this.fv.indexOf(t);i>=0&&this.fv.splice(i,1)},this.yv=t=>(this.fv.indexOf(t)<0&&this.fv.push(t),this.gv),this.pv=!0,this.mv=mn(this.Av),this.Zf={relative:1},this.Sv=(t,i)=>i.getAllocatesAxisSpace()&&fh(i.getValue(),this.Yn,this.Hn)?Math.max(t,i.update().Xo()):t,this.bv=t=>{const i=this.dv.indexOf(t);-1!==i&&this.dv.splice(i,1)},this.Ws=t.HighlightModes.onHover,this._t=new Ar,this.Ur={},this.xv=o instanceof Ue?o:void 0,this.isX=this.Nn.getWidth({x:!0,y:!1}),this.isY=this.Nn.getHeight({x:!0,y:!1}),this.Mv=i,this.wv=s,this._v=r,this.kv=n,this.chart=u,this.Cv=d,this.Tv=e,this.Qs=h,"logarithmic"===g.type&&this.chart.Ki.ul(jl.va),this.Kn=Oc,f(this,this.yv),o.Fv=this,this.Iv=c,this.Lv=this.Iv>50?1:-1,this.Pv=(m=this.Nn.toPoint(0,-this.Lv),Math.abs(m.x)>=Math.abs(m.y)?m.x>=0?t.UIDirections.Right:t.UIDirections.Left:m.y>=0?t.UIDirections.Up:t.UIDirections.Down),this.Bv=a,this.Dv=this.ji instanceof Ue?(new He).Di(this.Nn.toVec2(this.ji,this.Bv)):(new We).Di(this.Nn.toVec2(this.ji,this.Bv)),this.Ev=this.chart.Rv,this.Ov=(new He).Di(this.Nn.toVec2(this.Nn.getWidth(this.Ev),this.Bv)),this.zv=this.wv.Wr(this.Dv).setPointerEvents(!1),this.Vv=this.Tv.Rr(this.Ev).Er(l.getWidth({x:v.xAxisOverlayStyle,y:v.yAxisOverlayStyle})).Dr(_r).gs(v.highlightColorOffsetAxisOverlay||v.highlightColorOffset),this.Nv=this.Tv.Rr(this.Ev).Er(l.getWidth({x:v.xAxisZoomingBandFillStyle,y:v.yAxisZoomingBandFillStyle})).Dr(l.getWidth({x:v.xAxisZoomingBandStrokeStyle,y:v.yAxisZoomingBandStrokeStyle})).gs(v.highlightColorOffsetAxisOverlay||v.highlightColorOffset),this.Ln=this.Tv.no(this.Dv).setPointerEvents(!1).eh(this.Nn.getTitleTextRotation(this.Lv)).ro(Hn).eo(Hn),this.chart.Ki.ee.se(this.Vv,(t=>this.Vv.vs(t)),{animationEnabled:this.gn}),this._t.Ms(this.Vv),this.zv.Hr(l.getWidth({x:v.xAxisStrokeStyle,y:v.yAxisStrokeStyle})),this.Ln.Er(l.getWidth({x:v.xAxisTitleFillStyle,y:v.yAxisTitleFillStyle})).ih(l.getWidth({x:v.xAxisTitleFont,y:v.yAxisTitleFont})),this.Ks=h.qs(this,{}),this.hh=this.Ks.Gv([this.Ln]).de(v.effectsText),this.$v=null!==(y=l.getWidth({x:v.xAxisMarginAfterTicks,y:v.yAxisMarginAfterTicks}))&&void 0!==y?y:7,this.Uv=null!==(p=l.getWidth({x:v.xAxisMarginAfterTitle,y:v.yAxisMarginAfterTitle}))&&void 0!==p?p:7}setHighlight(t){return this.chart.Ki.ee.pe(this.Vv,t),this._t.kt("highlightchange",{highlight:Vn(t)}),this}getHighlight(){return this.chart.Ki.ee.oe(this)}io(){return this.mn}so(){return void 0!==this.dh}setKeepTickLabelsInAxisBounds(t){return this.pv=t,this.chart.Ki.fe(),this}getKeepTickLabelsInAxisBounds(){return this.pv}setTickStrategy(t,i){return super.jn(t,i)}getTickStrategy(){return this.dn}addBand(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,r=s?this.kv:this._v,n=new al(r,this.chart,this.mv,this,this.Dv,this.Nn,this.rs,this.Qs);return e&&this.chart.legend.add(n,e),this.Av.push(n),n}addConstantLine(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,r=s?this.kv:this._v,n=new ll(r,this.chart,this.mv,this,this.Dv,this.Nn,this.rs,this.Qs);return e&&this.chart.legend.add(n,e),this.Av.push(n),n}jv(t){this.Av.forEach(t)}Yv(t){return this.Av.map(t)}getHighlighters(){return this.Av}setThickness(t){return"number"==typeof t?(this.Hv=t,this.Wv=t):"object"==typeof t?(this.Hv=t.min,this.Wv=t.max):void 0===t&&(this.Hv=void 0,this.Wv=void 0),this.Mh=void 0,this.chart.Ki.fe(),this}getThickness(){return{min:this.Hv,max:this.Wv}}Xv(){return this.fv}_h(t){return{}}Fh(t,i,s,e,r){var n;const h=i.un;return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.Nn.toPoint(t,0),labelAlignment:this.Nn.toPoint(h.getLabelAlignment(),null!==(n=h.labelAlignmentOpposite)&&void 0!==n?n:-this.Lv),labelOffset:{x:0,y:0},labelRotation:i.un.labelRotation}}Ph(t,i,s){if(!this.Xi)return{Zv:0,Jv:0,Qv:0,ticksInfo:i,updatedTicks:s};const e=this.Ln&&this.Ln.zh().length>0&&this.getTitleFillStyle()!==ho,r=this.Nn.getHeight(e?this.Ln.Sh().td():{x:0,y:0})+(e?this.Uv:0);let n=0;this.fn.forEach(((t,i)=>{const s=i.un.tickLength<0||i.un.tickPadding<0,e=i.un.tickLength+i.un.tickPadding;t.forEach((t=>{if(!t.ph.getVisible()||oo(t.ph.Qn()))return void(s||(n=Math.max(n,e)));const i=e+this.Nn.getHeight(t.ph.Sh().td());s||(n=Math.max(n,i))}))}));const h=this.dv.reduce(this.Sv,0);n=Math.max(n,h),n+=this.$v;const o=jr(r+n,void 0!==this.Hv?this.Hv:0,void 0!==this.Wv?this.Wv:sh);return this.cv=o,{Zv:n,Jv:r,Qv:o,ticksInfo:i,updatedTicks:s}}Rh(t,i){return new Dc(i,t,this.wv,this.Dv,this.Dv)}Bn(){return this.Dv}oh(){if(this.lv){for(const t of this.lv)t[1].grid.dispose(),t[1].tick.dispose();this.lv.clear()}super.oh()}Jh(t,i){return"linear"===this.$n.type||"linear-highPrecision"===this.$n.type?Fo(t,i,this.ji):Io(t,i,this.ji)}Kv(t,i){return i instanceof Ue?Fo:Io}qh(t,i,s){if("logarithmic"!==this.$n.type){const e=this.ji.Pi(Math.abs(i-t));return{start:t+Math.sign(t-i)*s.start*e,end:i+Math.sign(i-t)*s.end*e}}const e=this.ji,r={start:e.Lt,end:e.Pt};e.Rt(t,i).Gs();const n={start:e.Bi(t,s.start*Math.sign(t-i)),end:e.Bi(i,s.end*Math.sign(i-t))};return e.Rt(r.start,r.end).Gs(),n}mh(t){var i,s;const e=this.bh(),r=e.min,n=e.max,h=this.fn.size>0,o=(null===(i=this.Mh)||void 0===i?void 0:i.physicalAxisSize)!==t.physicalAxisSize;let a=(null===(s=this.Mh)||void 0===s?void 0:s.min)!==r||this.Mh.max!==n;if(this.Mh&&this.xv){const t=this.xv.getPixelSize(),i=Math.abs(n-this.Mh.max),s=Math.abs(i/t),e=Math.abs(r-this.Mh.min),h=Math.abs(e/t);a=Math.max(s,h)>=10}return!(!h||o||a||t.anyPreviousAxisUpdated)}Or(i){const s=this.getVisible()&&i.qv>0,e=this.ji.getInnerStart()<this.ji.getInnerEnd()?this.ji.getInnerStart():this.ji.getInnerEnd(),r=this.ji.getInnerEnd()>this.ji.getInnerStart()?this.ji.getInnerEnd():this.ji.getInnerStart();s||this.oh();const n=this.zv.Ho().getThickness()*this.Lv/2,h=this.Bv.getInnerInterval(),o=this.Iv/100*h,a=o+i.tA,l=h*this.Lv,u=a+n;if("Empty"!==this.dn&&s){const t=this.ji.ni(),s=this.ji.hi(),e=Math.min(t,s),r=Math.max(t,s);for(const[t,s]of this.fn){let n=this.lv.get(t);if(!n)if(t.Kr)n={grid:this.Mv[0].iA(this.Dv).setPointerEvents(!1),tick:this.Mv[0].iA(this.Dv).setPointerEvents(!1)};else if("sA"in t){const i=Array.from(this.fn.keys()).filter((t=>"sA"in t)).reverse().indexOf(t),s=this.Mv[i];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");n={grid:s.iA(this.Dv).setPointerEvents(!1),tick:s.iA(this.Dv).setPointerEvents(!1)}}if(!n)continue;n.grid.ws(),n.tick.ws();const h=t.un,c=o-l*h.getGridStrokeLength(),d=u+h.getTickLength()*this.Lv,f=d+h.getTickPadding()*this.Lv;for(const[t,h]of s){const t=i.ticksInfo.get(h);if(!t)continue;const s={start:this.Nn.toPoint(h.S,a),end:this.Nn.toPoint(h.S,c)},o={start:this.Nn.toPoint(h.S,u),end:this.Nn.toPoint(h.S,d)};let l=0;if(this.pv){const i=h.ph.td(),s=this.ji.pi(t.keyValue)+this.Nn.getWidth(t.labelOffset)+(-.5*this.Nn.getWidth(t.labelAlignment)-.5)*this.Nn.getWidth(i),n=s+this.Nn.getWidth(i);l=n>r?r-n:s<e?e-s:0}h.ph.zr(this.Nn.toPoint(this.ji.Bi(h.S,l),f)).Cu(t.labelAlignment).eh(t.labelRotation),n.grid._a().eA(s.start,s.end),n.tick._a().eA(o.start,o.end)}n.grid.Hr(t.un.getGridStrokeStyle()),n.tick.Hr(t.un.getTickStyle()),this.lv.set(t,n)}}const c=u,d=c+this.Lv*i.Qv,f={start:this.Nn.toVec2(this.ji.getInnerStart(),c),end:this.Nn.toVec2(this.ji.getInnerEnd(),d)},v=Je(f.start,this.Dv,this.Ev),A=Je(f.end,this.Dv,this.Ev);this.zv.Zr(this.Nn.toPoint(e,a)).Xr(this.Nn.toPoint(r,a)).setVisible(s);let g=this.rA;g||(g="center-chart",("pixels"in this.Zf||void 0!==this.nA||void 0!==this.hA||1!==i.oA||this.isY)&&(g="center"));const y=a+i.Zv*this.Lv;if(this.Ln.zr(this.Nn.toPoint(this.Nn.getWidth(Je("center-chart"===g?{x:.5*this.Ev.x.getInnerInterval(),y:.5*this.Ev.y.getInnerInterval()}:"center"===g?Ih(Lh(v,A),.5):"start"===g?v:A,this.Ev,this.Dv)),y)).Cu(this.Nn.toPoint("center-chart"===g||"center"===g?0:"start"===g?-1:1,-1*this.Lv)).setVisible(s),this.uv){const t=this.Iv/100*h+i.tA,s=-this.Lv*h-i.tA,e={start:this.Nn.toVec2(this.uv.min,u+this.Lv*this.cv),end:this.Nn.toVec2(this.uv.max,t+s)},r=Je(e.start,this.Dv,this.Ev),n=Je(e.end,this.Dv,this.Ev);this.Nv.zr(r).zt(Ph(n,r)).setVisible(!0)}else this.Nv.setVisible(!1);this.Vv.zr(v).zt(Ph(A,v)).setVisible(s);for(const e of this.dv)if(e.update().plot(s,a,l,i.tA,u),this.Tv.Ki.Kc&&e.getVisible()&&e.getMarkerVisible()&&e.$o.In===t.TextObjectIdentifier.CursorTickMarker){const i=Gl(e.$o);this.Tv.Ki.Kc.aA({...i,blacklist:[t.TextObjectIdentifier.CursorResultTable,t.TextObjectIdentifier.CursorTickMarker]})}for(const t of this.Av)t.Or();return{width:Math.abs(A.x-v.x),height:Math.abs(A.y-v.y),left:Math.min(v.x,A.x),right:this.Ev.x.getInnerEnd()-Math.max(v.x,A.x),bottom:Math.min(v.y,A.y),top:this.Ev.y.getInnerEnd()-Math.max(v.y,A.y)}}setLength(t){return this.Zf=t,this.Mh=void 0,this.chart.Ki.fe(),this}getLength(){return this.Zf}setMargins(t,i){return this.nA=t,this.hA=i,this.Mh=void 0,this.chart.Ki.fe(),this}getMargins(){var t,i;return{start:null!==(t=this.nA)&&void 0!==t?t:0,end:null!==(i=this.hA)&&void 0!==i?i:0}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.lA,...this.chart.uA,...this.chart.cA,...this.chart.dA].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.lA,...this.chart.uA,...this.chart.cA,...this.chart.dA].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}fA(){return this.cv}vA(i,s){s=s||Bc.AxisTickMajor;const e=new Ul(this,i?this.Mv[0]:this.Tv,this.Tv,this.ji,this.Ov,this.Ov,this.Nn,this.Pv,this.bv,this.rs,s).setTextFormatter(this.formatValue);return this.dv.push(e),this.Mh=void 0,"other"===e.$o.jo&&(e.$o.In=t.TextObjectIdentifier.CursorTickMarker),e}AA(t,i){const s=-this.Nn.getWidth(i);this.pan(s)}pan(t,i){var s,e;const r=this.Yn,n=this.Hn,h=this.ji.Bi(r,t),o=this.ji.Bi(n,t);this.fh(h,o,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1});const a=this.qn();if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(s=this.Ah)||void 0===s?void 0:s.id)===dl&&this.yn&&a){const t=this.Qr({forStart:h,forEnd:o,allowIntervalLengthChange:!1});t&&(this.Hn>this.Yn&&this.Hn>=t.end||this.Hn<this.Yn&&this.Yn>=t.start)&&this.setStopped(!1)}if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(e=this.Ah)||void 0===e?void 0:e.id)===fl&&this.yn&&a){const t=this.Qr({forStart:h,forEnd:o,allowIntervalLengthChange:!1});t&&(this.Hn<this.Yn&&this.Hn<=t.end||this.Hn>this.Yn&&this.Yn<=t.start)&&this.setStopped(!1)}}zoom(t,i){const s=this.ji.pi(this.Yn),e=this.ji.pi(this.Hn),r=this.ji.pi(t),n=jr((r-s)/(e-s),0,1),h=.2*this.ji.oi(),o=n*h*-i,a=(1-n)*h*i,l=this.ji.Bi(this.Yn,o),u=this.ji.Bi(this.Hn,a),c=this.Kh();let d=l,f=u;if(void 0!==(null==c?void 0:c.intervalMax)&&Math.abs(f-d)>c.intervalMax){const t=c.intervalMax-Math.abs(f-d);d-=t*n,f+=t*(1-n)}if(void 0!==(null==c?void 0:c.intervalMin)&&Math.abs(f-d)<c.intervalMin){const t=c.intervalMin-Math.abs(f-d);d-=t*n,f+=t*(1-n)}this.fh(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.vA(!0,t)}getCustomTicks(){return[...this.dv]}setTitlePosition(t){return this.rA=t,this.chart.Ki.fe(),this}getTitlePosition(){var t;return null!==(t=this.rA)&&void 0!==t?t:"center-chart"}getUiPosition(){return this.Iv}setStrokeStyle(t){return this.zv.Hr(t),this.wv.fe(),this}getStrokeStyle(){return this.zv.Ho()}getOverlayStyle(){return this.Vv.Qn()}setOverlayStyle(t){return this.Vv.Er(t),this.wv.fe(),this}setAnimationHighlight(t){return this.chart.Ki.ee.me(this.Vv,t),this}getAnimationHighlight(){return this.chart.Ki.ee.Se(this.Vv)}getMarginAfterTicks(){return this.$v}setMarginAfterTicks(t){return this.$v=t,this.Mh=void 0,this.wv.fe(),this}getMarginAfterTitle(){return this.Uv}setMarginAfterTitle(t){return this.Uv=t,this.Mh=void 0,this.wv.fe(),this}Dt(){return this.ji.Dt(),this}Et(){return this.ji.Et(),this}dispose(){var t;(null===(t=this.Ah)||void 0===t?void 0:t.dispose)&&this.Ah.dispose({axis:this}),this.zv.dispose(),this.Vv.dispose(),this.Nv.dispose(),this.Ln.dispose(),this.gh(Gr);for(const t of this.lv.values())t.grid.dispose(),t.tick.dispose();return this.fv.slice().forEach(Gr),this.Av.slice().forEach(Gr),this.Cv(this),this._t.kt("dispose",{}),this}setVisible(t){this.zv.setVisible(t),this.Ln.setVisible(t),this.Vv.setVisible(t),this.gh((i=>{i.le(t)}));for(const i of this.lv.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.Mh=void 0,this.chart.Ki.fe(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.gn),this}setHighlightOnHover(i){return this.Ws=i?t.HighlightModes.onHover:t.HighlightModes.noHighlighting,!1===i&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Ws!==t.HighlightModes.noHighlighting}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}set draggable(t){this._t.draggable=t}get draggable(){return this._t.draggable}setUserInteractions(t){return this.Ur=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.Ur}}var Rc;t.AxisXYTitlePositionOptions=void 0,(Rc=t.AxisXYTitlePositionOptions||(t.AxisXYTitlePositionOptions={})).Start="start",Rc.Center="center",Rc.End="end",Rc.CenterChart="center-chart";const Oc=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},zc={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>e(t,i)},Vc={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>e(i,t)},Nc=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Ec&&"y"in t&&t.y instanceof Ec),Gc=ue({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new oa,tickLength:7,tickStyle:new oa,tickPadding:0,labelFont:new Te,labelFillStyle:new uo,labelAlignment:0,labelAlignmentOpposite:void 0,labelRotation:0,labelShadow:void 0});class $c extends Gc{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t,i){return this.withMutations((s=>s.set("labelAlignment",t).set("labelAlignmentOpposite",i)))}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Uc=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),jc=new $c({labelFillStyle:ho,gridStrokeStyle:_r,tickStyle:_r}),Yc=t=>Uc(t)&&oo(t.labelFillStyle)&&kr(t.gridStrokeStyle)&&kr(t.tickStyle),Hc=1e6,Wc=ue({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new $c,minorTickStyle:new $c,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Xc=36e5,Zc=6e4,Jc=1e3,Qc=1e-6,Kc=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=Xc?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=Jc?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},qc={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Xc);i%=Xc;const r=Math.floor(i/Zc);i%=Zc;const n=Math.floor(i/Jc);return`${s}${Pn(e,2)}:${Pn(r,2)}:${Pn(n,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/Xc);i%=Xc;const r=Math.floor(i/Zc);i%=Zc;const n=Math.floor(i/Jc);i%=Jc;const h=Math.floor(i/1);return`${s}${Pn(e,2)}:${Pn(r,2)}:${Pn(n,2)}.${Pn(h,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Xc),r=Math.floor(i/Zc)%60,n=Math.floor(i/Jc)%60,h=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Pn(e,2)}:${Pn(r,2)}:${Pn(n,2)}.${Pn(h,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/Xc),r=Math.floor(i/Zc)%60,n=Math.floor(i/Jc)%60,h=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Pn(e,2)}:${Pn(r,2)}:${Pn(n,2)}.${Pn(h,3)}${o}`}},td={MajorHours12:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>{const r=432e5;return t=Math.floor(t/(4*r))*r*4,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,4)},minor:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>Sl(t,i,36e5,Hc),fitKeyValues:Ml({},2,3,4,6)},defaultValueFormatter:qc.hhmmss},MajorHours:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>{const r=Xc;return t=Math.floor(t/(12*r))*r*12,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,6,12)},minor:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>Sl(t,i,3e5,Hc),fitKeyValues:Ml({},2,4,6)},defaultValueFormatter:qc.hhmmss},MajorMinutes15:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/Xc)*Xc,bl(t,i,9e5,void 0,Hc)),fitKeyValues:Ml({ignore:"first"},2)},minor:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>Sl(t,i,6e4,Hc),fitKeyValues:Ml({},3,5)},defaultValueFormatter:qc.hhmmss},MajorMinutes:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>{const r=Zc;return t=Math.floor(t/6e5)*r*10,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>Sl(t,i,5e3,Hc),fitKeyValues:Ml({},2,3,4,6)},defaultValueFormatter:qc.hhmmss},MajorSeconds15:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>{const r=15e3;return t=Math.floor(t/6e4)*r*4,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,4)},minor:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>Sl(t,i,1e3,Hc),fitKeyValues:Ml({},3,5)},defaultValueFormatter:qc.hhmmss},MajorSeconds:{major:{format:qc.hhmmss,getKeyValues:(t,i,s,e)=>{const r=Jc;return t=Math.floor(t/1e4)*r*10,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sl(t,i,100,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmm},MajorMilliseconds100:{major:{format:qc.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,bl(t,i,100,void 0,Hc)),fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sl(t,i,10,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmm},MajorMilliseconds10:{major:{format:qc.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,bl(t,i,10,void 0,Hc)),fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmm,getKeyValues:(t,i,s,e)=>Sl(t,i,1,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmm},MajorMilliseconds:{major:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,bl(t,i,1,void 0,Hc)),fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sl(t,i,.1,Hc),fitKeyValues:Ml({},2)},defaultValueFormatter:qc.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,bl(t,i,.1,void 0,Hc)),fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sl(t,i,.01,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const r=.01;return t=Math.floor(t/.1)*r*10,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Sl(t,i,.001,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmmuuu},MajorMicroseconds:{major:{format:qc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const r=.001;return t=Math.floor(t/.01)*r*10,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Sl(t,i,100*Qc,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:qc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const r=100*Qc;return t=Math.floor(t/.001)*r*10,bl(t,i,r,void 0,Hc)},fitKeyValues:Ml({ignore:"first"},2,5)},minor:{format:qc.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Sl(t,i,10*Qc,Hc),fitKeyValues:Ml({},2,3,5)},defaultValueFormatter:qc.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class id extends Wc{sn(t){const i=this.timeOrigin||0,s=[{ph:"Major ticks",sA:0,un:this.majorTickStyle,qr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const r=Kc(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,td[r].major.format)(t+i,s,e)},lo:(t,i,s,e,r)=>{const n=Kc(s,e);return(0,td[n].major.getKeyValues)(t,i,s,e,r)},Rn:{Vh:(t,i,s,e,r,n)=>{const h=Kc(r,n),o=td[h].major.fitKeyValues;if(o)return o(t,i,s,e,r,n)},Gh:"hide-label"},uo:void 0}];return Uc(this.minorTickStyle)&&s.push({ph:"Minor ticks",sA:1,un:this.minorTickStyle,qr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const r=Kc(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,td[r].minor.format)(t+i,s,e)},lo:(t,i,s,e,r)=>{const n=Kc(s,e);return(0,td[n].minor.getKeyValues)(t,i,s,e,r)},Rn:{Vh:(t,i,s,e,r,n)=>{const h=Kc(r,n),o=td[h].minor.fitKeyValues;if(o)return o(t,i,s,e,r,n)},Gh:"hide-tick"},uo:void 0}),{en:[],rn:s,nn:this.cursorFormatter||((t,s,e)=>{const r=Kc(Math.min(s.start,s.end),Math.max(s.start,s.end));return td[r].defaultValueFormatter(t+i,s,e)}),hn:1e-4,an:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const sd=(t,i,s,e,r)=>(n,h)=>o=>{const a=new Date(o+n),l={year:h?a.getUTCFullYear():a.getFullYear(),monthIndex:h?a.getUTCMonth():a.getMonth(),day:h?a.getUTCDate():a.getDate(),hours:h?a.getUTCHours():a.getHours(),minutes:h?a.getUTCMinutes():a.getMinutes(),seconds:h?a.getUTCSeconds():a.getSeconds(),millis:h?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];r.includes("year")&&(l.year=Math.floor(l.year/s)*s),r.includes("monthIndex")&&(l.monthIndex=0),r.includes("day")&&(l.day=1),r.includes("hours")&&(l.hours=0),r.includes("minutes")&&(l.minutes=0),r.includes("seconds")&&(l.seconds=0),r.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),h?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-n:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-n},ed=(t,i,s,...e)=>sd(-1,t,i,s,e),rd=(t,i,s,...e)=>sd(-1,t,i,s,e),nd=(t,i,s,...e)=>sd(0,t,i,s,e),hd=(t,i,...s)=>sd(1,t,i,void 0,s),od=t=>(i,s)=>e=>{const r=new Date(e+i),n=s?r.getUTCDay():r.getDay(),h=1===n&&0===(s?r.getUTCHours():r.getHours())&&0===(s?r.getUTCMinutes():r.getMinutes())&&0===r.getSeconds()&&0===r.getMilliseconds();if(0===t&&!0===h)return e;let o=s?r.getUTCDate():r.getDate();return-1===t&&1===n&&!1===h||(-1===t?o-=n>=2?n-1:n+6:o+=n>0?8-n:1),s?Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),o,0,0,0,0)-i:new Date(r.getFullYear(),r.getMonth(),o,0,0,0,0).getTime()-i},ad=[{label:"NanoSecond10",unit:1e-5,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"NanoSecond100",unit:1e-4,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>1e-4*Math.floor(t/1e-4)},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MicroSecond1",unit:.001,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.001*Math.floor(t/.001)},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MicroSecond10",unit:.01,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.01*Math.floor(t/.01)},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MicroSecond100",unit:.1,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.1*Math.floor(t/.1)},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:{getReferenceKeyValue:ed("millis",1,(t=>t.millis%1==0),"millis")},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:ed("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:ed("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Ml({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:ed("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:wl(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:Ml(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:ed("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:wl(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:Ml(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:ed("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:wl(3,6,12)},minorTicks:{amount:8,fitFunction:Ml(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:ed("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Ml({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Ml({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:od(-1),getNextKeyValueIncludingRef:od(0),getNextKeyValue:od(1),greatTicks:!0,majorTicks:{fitFunction:Ml(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:rd("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:nd("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:hd("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ml(void 0,2,3,6)},minorTicks:{fitFunction:Ml(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:rd("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:nd("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:hd("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ml({ignore:"first"},2,5)},minorTicks:{fitFunction:Ml(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:rd("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:nd("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:hd("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ml(void 0,2,4)},minorTicks:{fitFunction:Ml(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:rd("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:nd("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:hd("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:rd("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:nd("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:hd("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],ld=(t,i,s,e,r)=>{const n=i-t;let h;for(let t=r?0:ad.length-1;r?t<ad.length:t>=0;r?t+=1:t-=1){const i=n/ad[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){h=ad[t];break}}return h},ud=(t,i,s)=>{let e=ld(i,s,void 0,2,!0);if(void 0!==e&&0===ad.indexOf(e)&&(e=ad[1]),void 0===e)return;if("great"===t)return e;const r="major"===t?1:2,n=ad[ad.indexOf(e)-r];return void 0===n?ad[0]:n},cd=(t,i,s)=>(e,r,n,h)=>{const o=ud("great",e,r);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=h>n?e:r,l=(e+r)/2,u=h>n?r:e;if(ad.indexOf(o)<=ad.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=xl(e,r,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=bl(e,r,o.unit,s,void 0)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,r,c);return"left"===s?void 0===d||fh(d,l,u)?[a]:[d]:void 0!==d&&fh(d,l,u)?[d]:[u]},dd=(t,i,s)=>(e,r,n,h)=>{const o=ud(t,n,h);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=xl(e,r,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=bl(e,r,o.unit,t,void 0)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const r=[];let n=s(t),h=0;for(;n<i;)if(r.push(n),n=e(n),h+=1,h>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r})(e,r,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let r=t,n=0;for(;(r-t)/(i-t)<.98;)if(e.push(r),n+=1,r=t+n*s,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(r),e})(e,r,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const r=[];let n=e(t),h=0;for(;n<i;)if(r.push(n),n=e(n),h+=1,h>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r})(e,r,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return ad[ad.indexOf(t)+1]})(o);if(void 0===t)return[];a=Sl(e,r,t.unit/o.minorTicks.amount,void 0)}}return a},fd=t=>(i,s,e,r,n,h)=>{const o=ud(t,n,h);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,r,n,h):void 0},vd=ue({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new $c,majorTickStyle:new $c,minorTickStyle:new $c,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),r=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${r}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),qc.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),qc.hhmmssmmm(t-i.getTime())},formatMicrosecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),qc.hhmmssmmmuuu(t-i.getTime())},formatNanosecondRange:(t,i,s,e)=>{if(e){const t=new Date(e.valueShifted);return t.setHours(0,0,0,0),qc.hhmmssmmmuuunnn(e.valueShifted-t.getTime())}{const i=new Date(t);return i.setHours(0,0,0,0),qc.hhmmssmmmuuunnn(t-i.getTime())}},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ad extends vd{sn(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>ad.map((i=>{const s=((t,i,s)=>{switch(s.label){case"NanoSecond10":case"NanoSecond100":return t.formatNanosecondRange;case"MicroSecond1":case"MicroSecond10":case"MicroSecond100":return t.formatMicrosecondRange;case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Or.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const r=t=>String(t),n=(t,s)=>(n,h)=>{let o=n,a=n+i;const l=h.start,u=h.end,c=l>u,d=ud(t,c?u:l,c?l:u);if(void 0===d)return r(a);if("great"===t){const t=Ur(n,"left"===s?l:u);let e;if(e=!1===t?n:!1===d.irregular?"left"===s&&!1===c||"right"===s&&!0===c?d.greatTicks.getReferenceKeyValue(i,this.utc)(n):d.greatTicks.getReferenceKeyValue(i,this.utc)(n+1*d.unit):"left"===s&&!1===c||"right"===s&&!0===c?d.getPrevKeyValue(i,this.utc)(n):d.getNextKeyValue(i,this.utc)(n),o=e,a=e+i,"right"===s&&!0===t)return"";if("right"===s&&"Week"===d.label)return""}const f=e.get(t);if(void 0===f)return r(a,this.locale);const v=f[ad.indexOf(d)];return void 0===v?"":"function"==typeof v?v(a,h,this.locale,{valueShifted:o,shiftOrigin:this.dateOrigin?this.dateOrigin.getTime():0}):v.format(a)},h=[],o=[{ph:"Great ticks (directive)",sA:0,tn:!0,lo:dd("great",i,this.utc),uo:void 0},{ph:"Major ticks",sA:1,un:this.majorTickStyle,qr:n("major"),lo:dd("major",i,this.utc),Rn:{Vh:fd("major"),Gh:"hide-tick"},uo:void 0}];Yc(this.greatTickStyle)||h.push({ph:"Great ticks (left)",un:this.greatTickStyle.setLabelAlignment(-1),qr:n("great","left"),lo:cd(i,this.utc,"left"),Kr:!0,Uh:!1}),Yc(this.minorTickStyle)||o.push({ph:"Minor ticks",sA:2,un:this.minorTickStyle,qr:n("minor"),lo:dd("minor",i,this.utc),Rn:{Vh:fd("minor"),On:(t,i,s,e,r,n)=>{const h=ud("minor",r,n);return!h||"Week"!==h.label},Gh:"hide-tick"},uo:void 0,Nh:2});const a=this.cursorFormatter;return{en:h,rn:o,nn:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const r=ld(Math.min(s.start,s.end),Math.max(s.start,s.end),void 0,1,!0),n=r&&r.unit<=.1,h=r&&r.unit<=100,o=r&&r.unit<=6e4,a=new Date(i+t),l=new Date(i+t);l.setHours(0,0,0,0);const u=n?this.formatNanosecondRange:h?this.formatMicrosecondRange:o?this.formatMillisecondRange:qc.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(a)} ${u(a.getTime()-l.getTime(),s,this.locale,{valueShifted:t,shiftOrigin:i})}`},hn:10**-5,an:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const gd=(t,i)=>(s,e,r,n,h)=>{const o=e-s;if(i){let i=5;h<=125?i=2:h<=250?i=3:h<=500&&(i=4);const r=Math.log10(o/i),n=Math.floor(2*r)/2;let a;a=n%1==0?10**(n-t):10**Math.ceil(n)/2;const l=1/a;a=Math.round(a*l)/l;const u=Math.round(Math.floor(s/(10*a))*a*10*l)/l;return bl(u,e,a,void 0,l)}let a=o/5;const l=1/a;return a=Math.round(a*l)/l,Sl(s,e,a,l)},yd=(t,i,s,e,r,n)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):2===i?t.filter(((t,i)=>i%10==0)):void 0,pd=(t,i,s,e,r,n)=>{},md=(t,i,s,e,r,n)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Sd=(t,i,s,e,r,n)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,bd=(t,i)=>{const s=jh(t),e=Yh(t);if(i)return(t,i)=>{const r=[],n=Math.floor(s(t)),h=Math.ceil(s(i));for(let t=n-1;t<=h+1;t+=1){const i=e**t;r.push(i)}return r};const r=10===t?9:4;return(t,i)=>{const n=Math.round(s(t)),h=Math.round(s(i)),o=[],a=e**n,l=(e**h-a)/r;for(let s=1;s<=r;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},xd=ue({cursorFormatter:void 0,extremeTickStyle:new $c,majorTickStyle:new $c,minorTickStyle:new $c,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class Md extends xd{sn(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Jh.LogarithmicNoExponents(i,s,void 0,t.base):Jh.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Jh.LogarithmicNoExponents(i,s,void 0,t.base):Jh.Numeric),r=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Jh.LogarithmicNoExponents(i,s,void 0,t.base):Jh.Numeric),n=[],h=[];Yc(this.extremeTickStyle)||n.push({ph:"Extreme ticks",un:this.extremeTickStyle,qr:void 0===i?s:(t,e,r)=>s(i+t,e,r),lo:ml,Kr:!0,Uh:!0});const o={ph:"Major ticks",sA:0,un:this.majorTickStyle,qr:void 0===i?e:(t,s,r)=>e(i+t,s,r),lo:"logarithmic"===t.type?bd(t.base,!0):gd(0,!0),Rn:{Gh:"hide-label",Vh:"logarithmic"===t.type?md:yd},uo:void 0};if(h.push(o),!Yc(this.minorTickStyle)){const s="logarithmic"===t.type?bd(t.base,!1):gd(1,!1);h.push({ph:"Minor ticks",sA:1,un:this.minorTickStyle,qr:void 0===i?r:(t,s,e)=>r(i+t,s,e),lo:(t,i,e,r,n)=>s(t,i,e,r,n),Rn:{Gh:"hide-tick",Vh:"logarithmic"===t.type?Sd:pd},uo:80})}const a=this.cursorFormatter?this.cursorFormatter:Jh.Numeric;return{en:n,rn:h,nn:void 0===i?a:(t,s,e)=>a(i+t,s,e),hn:1e-9,an:void 0,Th:this.fallBackToExtremeTicksAutomatically?o:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==jc?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const wd=(t,i,s="image/png",e,r=1)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const n=t.captureFrame(s,e,void 0,r);if("image/png"!==s&&n.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Or.navigator.msSaveBlob)Or.navigator.msSaveBlob(n,i);else{const t=Or.document.createElement("a");Or.document.body.appendChild(t);const s=Or.URL.createObjectURL(n);t.href=s,t.download=i,t.click(),setTimeout((()=>{Or.URL.revokeObjectURL(s),Or.document.body.removeChild(t)}),0)}},_d=(i,s,e,r,n,h)=>{const o=i.Uo(s,e,r,n,h,!0);return o.setDraggingMode(t.UIDraggingModes.draggable),o},kd=(t,i)=>{if("relative"===t)return i;if(t instanceof Ye)return t;const s=t.x instanceof Il?t.x.ji:t.x.x,e=t.y instanceof Il?t.y.ji:t.y.y;return po(s,e)},Cd=(t,i,s,e,r)=>{if(s){const n=t,h=i,o=Nc(h)?h:bo(h)?e:void 0;if(o&&mo(s)){const t=Je(n,o,r.ji);return r.Rl({engineX:t.x,engineY:t.y})}if(o&&bo(s))return Je(n,o,e);if(o&&Nc(s))return Je(n,o,s)}else{const s=t;if(bo(i)){const t=r.El(s);return Je({x:t.engineX,y:t.engineY},r.ji,e)}if(Nc(i)){const t=i,e=r.El(s);return Je({x:e.engineX,y:e.engineY},r.ji,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Td{constructor(t){this.gA=[],this.yA=t}pA(){return this.mA(),{add:()=>this.SA(),finishPlot:()=>{this.bA()}}}SA(){let t=this.gA.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.yA()},this.gA.push(t)),t.isFree=!1,t.shape}mA(){this.gA.forEach((t=>{t.isFree=!0}))}bA(){this.gA.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.gA.splice(this.gA.indexOf(t),1)}))}xA(){this.gA.forEach((t=>t.shape.dispose())),this.gA.length=0}bo(){return this.gA.map((t=>t.shape))}}const Fd=i=>{const s=i.layer,e=i.scale,r=i.panel,n=i.legend;let h;const o=r.Ki.ee,a=new Map,l=(t,i,s,e)=>{var r;a.has(t)||a.set(t,[]),null===(r=a.get(t))||void 0===r||r.push({eventType:i,callback:s}),t.addEventListener(i,s,e)},u=()=>{for(const[t,i]of a.entries())for(const{eventType:s,callback:e}of i)t.removeEventListener(s,e);a.clear()},c=[];let d=[],f=[];const v=new Td((()=>s.no(e).eo(Hn).ro(Hn))),A=new Td((()=>s.yf(e))),g=s.Qd(e).Er(r.getTheme().uiBackgroundFillStyle).setVisible(!1),y=g._a().tf({extent:8,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}),p=r.getTheme().uiButtonFillStyle,m=r.getTheme().uiButtonFillStyleHidden,S=r.getTheme().uiTextFillStyle,b=r.getTheme().uiTextFillStyleHidden,x=r.getTheme().uiTextFont,M=r.getTheme().uiBackgroundFillStyle,w=r.getTheme().uiBackgroundStrokeStyle,_=r.getTheme().uiButtonStrokeStyle,k=()=>{g.setVisible(!1),c.forEach((t=>t.setVisible(!1).Sh())),d.forEach((t=>t.setVisible(!1))),f.forEach((t=>t.setVisible(!1)))},C=h=>{var a,d,f,g;u(),h.titleEvents.ws(),h.backgroundEvents.ws(),c.forEach((t=>t.dispose())),c.length=0;const y=v.pA(),M=A.pA(),w=null!==(a=h.marginInner)&&void 0!==a?a:0,k=h.marginOuter,C=h.chartPadding,T={left:k.left+C.left,right:k.right+C.right,top:k.top+C.top,bottom:k.bottom+C.bottom},F=r.getSizePixels();let I,L={x:-1,y:1};if("number"==typeof h.position)switch(h.position){case t.LegendPosition.TopLeft:case t.LegendPosition.TopCenter:case t.LegendPosition.TopRight:case t.LegendPosition.BottomLeft:case t.LegendPosition.BottomCenter:case t.LegendPosition.BottomRight:I={x:F.x-h.chartTitleSpace.left-h.chartTitleSpace.right-T.left-T.right,y:F.y-h.chartTitleSpace.top-h.chartTitleSpace.bottom-T.top-T.bottom};break;default:I={x:F.x-T.left-T.right,y:F.y-T.top-T.bottom}}else h.position.origin&&(L=h.position.origin),I={x:F.x-h.position.x*(L.x+1)/2,y:h.position.y*(L.y+1)/2};const P=void 0!==h.orientation?h.orientation===t.LegendOrientation.Vertical:"number"==typeof h.position&&h.position<6,B=null!==(d=h.padding)&&void 0!==d?d:{left:5,right:5,top:5,bottom:5},D=B.top+B.bottom,E=B.left+B.right,R=null!==(f=h.entryMargin)&&void 0!==f?f:10,O={left:R,right:R,top:R,bottom:R},z=i.panel.getTheme().uiButtonSize;let V=0,N=0,G=0,$=0;const U=[],j=h.title?y.add().Cu({x:-1,y:0}).Eh(h.title).ih(h.titleFont?new Te(h.titleFont):x.setWeight("bold")).Er(null!==(g=h.titleFillStyle)&&void 0!==g?g:S).eo(O):void 0;if(j){const t=j.setVisible(!0).Sh().td();G=P?t.y:t.x+R,$=P?t.x:t.y,V=t.x,N=t.y,h.titleEvents.Ms(j)}const Y=h.entries.filter((t=>!1!==t.options.show)),H=Y.map(((i,h)=>{var a,u;const d=void 0!==i.options.text?i.options.text:i.component&&"getName"in i.component?i.component.getName():"",f=i.component&&i.component.getVisible?i.component.getVisible()?void 0!==i.options.textFillStyle?i.options.textFillStyle:S:b:void 0!==i.options.textFillStyle?i.options.textFillStyle:S,v=i.options.textFont?new Te(i.options.textFont):x,A=y.add().Cu({x:-1,y:0}).Eh(d).Er(f).ih(v).eo(O),g=void 0!==i.options.buttonShape?i.options.buttonShape:i.component&&i.component.we?i.component.we():t.PointShape.Circle,w=Aa(g);w&&g.Fe instanceof Image&&l(g.Fe,"load",(()=>{n.ye()}));const k=i.component&&i.component.getVisible?i.component.getVisible()?void 0!==i.options.buttonFillStyle?i.options.buttonFillStyle:i.component&&i.component.Vr?Fn(r.getTheme(),i.options.matchStyleExactly||!1,i.component.Vr()):p:m:void 0!==i.options.buttonFillStyle?i.options.buttonFillStyle:i.component&&i.component.Vr?Fn(r.getTheme(),i.options.matchStyleExactly||!1,i.component.Vr()):p,C=null!==(a=i.options.buttonStrokeStyle)&&void 0!==a?a:_,T=void 0!==i.options.buttonSize?i.options.buttonSize:w?Math.max(g.li().x,g.li().y):d?z:0,F=void 0!==i.options.buttonRotation?i.options.buttonRotation:i.component&&i.component.getPointRotation?i.component.getPointRotation():0,L=M.add().MA({x:-1,y:0})._f(T).Sf(F);k&&L.Af(k),void 0!==g&&L.pf(g),L.Mf(C);const B=null===i.options.lut?void 0:i.options.lut?i.options.lut:i.component&&i.component.Me?null===(u=i.component.Me())||void 0===u?void 0:u.lut:void 0;let j;B&&(j=new Tc(s,e,e,(()=>{}),r.getTheme(),P?"vertical":"horizontal").Kf(B),c.push(j),j.Kf(B).setVisible(!0).Cu(P?"vertical":"horizontal").setFillStyle(f).setFont(v).setMargin(R).Qf(Hn),i.options.lutLength&&j.tv(i.options.lutLength),i.options.lutThickness&&j.ev(i.options.lutThickness),i.options.lutDisplayProportionalSteps&&j.setLUTDisplayProportionalSteps(i.options.lutDisplayProportionalSteps),i.options.lutStepValueFormatter&&j.ov(i.options.lutStepValueFormatter),B.units&&j.nv(B.units)),o.se(A,(t=>{A.vs(t)}),{animationEnabled:!0}),o.se(L,(t=>{L.vs(t)}),{animationEnabled:!0});const H=i.component&&Br(i.component)?i.component:void 0;H&&l(H,"highlightchange",(t=>{const i=t.highlight;A.vs(i),L.vs(i),r.Ki.fe()})),[A,L].forEach((t=>{t&&(l(t,"pointerenter",(()=>{!1!==i.options.highlight&&(H&&H.setHighlight(!0),A.vs(1),L.vs(1))})),l(t,"pointerleave",(()=>{H&&H.setHighlight(!1),A.vs(0),L.vs(0)})))})),[A,L,j].forEach((s=>{s&&(l(s,"pointerenter",(()=>{r.engine.setMouseStyle(t.MouseStyles.Point)})),l(s,"pointerleave",(()=>{r.engine.clearMouseStyle()})),i.options.events&&Object.entries(i.options.events).forEach((([t,e])=>{l(s,t,(t=>e(t,{entry:i,allEntries:Y})))})),l(s,"click",(()=>{n.ye(),r.Ki.fe()})))}));const W=A.setVisible(!0).Sh().td();let X={length:0,thickness:0};if(j){const t=j.Sh().getSize();X=P?{length:t.y,thickness:t.x}:{length:t.x,thickness:t.y}}const Z=P?{width:(T?R+T:0)+Math.max(W.x,X.thickness),height:Math.max(T,W.y)+X.length}:{width:(T?R+T:0)+W.x+X.length,height:Math.max(T,W.y,X.thickness)};return V=Math.max(Z.width,V),N=Math.max(Z.height,N),(P?G+Z.height<I.y-D:G+Z.width<I.x-E)?($=P?Math.max(Z.width,$):Math.max(Z.height,$),G+=P?Z.height:Z.width,h===Y.length-1&&U.push(P?{width:$,height:0===U.length?G:I.y-D}:{width:0===U.length?G:I.x-E,height:$})):(U.push(P?{width:$,height:I.y-D}:{width:I.x-E,height:$}),G=P?Z.height:Z.width,h===Y.length-1&&U.push(P?{width:Z.width,height:I.y-D}:{width:I.x-E,height:Z.height}),$=P?Z.width:Z.height),{text:d?A:void 0,button:d&&0!==T?L:void 0,buttonSize:T,lut:j}}));return{entries:H,sectionSizes:U,legendTitle:j,isVertical:P,availableChartSize:I,horizontalLegendPadding:E,verticalLegendPadding:D,marginInner:w,totalMarginOuter:T,maxEntryWidth:V,maxEntryHeight:N,chartSize:F,legendSpace:{left:0,right:0,top:0,bottom:0},origin:L,legendPadding:B,entryMarginValue:R,shapeProviderText:y,shapeProviderMarker:M}};return{update:i=>{if(!i.visible||i.renderOnTop)return Hn;const s=C(i);h=s;const{entries:e,sectionSizes:r,isVertical:n,availableChartSize:o,horizontalLegendPadding:a,verticalLegendPadding:l,marginInner:u,totalMarginOuter:c,maxEntryWidth:d,maxEntryHeight:f,legendSpace:v,shapeProviderText:A,shapeProviderMarker:g}=s;if(A.finishPlot(),g.finishPlot(),0===e.length&&0===r.length)return Hn;const y=Ld(n,r,a,l,o);if(i.autoHideThreshold&&Id(i.autoHideThreshold,y,o,n,d,f))return Hn;const p={...v},m=i.chartPadding,S=Math.max(0,c.left-m.left),b=Math.max(0,c.right-m.right),x=Math.max(0,c.top-m.top),M=Math.max(0,c.bottom-m.bottom);switch(i.position){case t.LegendPosition.RightTop:case t.LegendPosition.RightCenter:case t.LegendPosition.RightBottom:p.right=y.width+u+b;break;case t.LegendPosition.LeftTop:case t.LegendPosition.LeftCenter:case t.LegendPosition.LeftBottom:p.left=y.width+u+S;break;case t.LegendPosition.TopLeft:case t.LegendPosition.TopCenter:case t.LegendPosition.TopRight:p.top=y.height+u+x;break;case t.LegendPosition.BottomLeft:case t.LegendPosition.BottomCenter:case t.LegendPosition.BottomRight:p.bottom=y.height+u+M}return p},plot:i=>{var s;if(!i.visible)return void k();const e=h||C(i);h=void 0;const{entries:r,sectionSizes:n,legendTitle:o,isVertical:a,availableChartSize:l,horizontalLegendPadding:u,verticalLegendPadding:c,chartSize:p,maxEntryWidth:m,maxEntryHeight:S,origin:b,legendPadding:x,entryMarginValue:_,shapeProviderText:T,shapeProviderMarker:F,totalMarginOuter:I}=e;if(d=v.bo(),f=A.bo(),0===r.length&&0===n.length)return k(),T.finishPlot(),void F.finishPlot();const L=Ld(a,n,u,c,l);if(i.autoHideThreshold&&Id(i.autoHideThreshold,L,l,a,m,S))return k(),T.finishPlot(),void F.finishPlot();const P=(b.x+1)*L.width/2,B=(b.y+1)*L.height/2;d.forEach((t=>t.setVisible(!0))),f.forEach((t=>t.setVisible(!0)));const D=i.chartTitleSpace;let E={leftBottom:{x:0,y:0},leftTop:{x:0,y:0},rightTop:{x:0,y:0},rightBottom:{x:0,y:0}};switch(i.position){case t.LegendPosition.RightTop:case t.LegendPosition.RightCenter:case t.LegendPosition.RightBottom:E={leftBottom:{x:p.x-L.width-I.right,y:0+I.bottom},leftTop:{x:p.x-L.width-I.right,y:p.y-I.top},rightTop:{x:p.x-I.right,y:p.y-I.top},rightBottom:{x:p.x-I.right,y:0+I.bottom}};break;case t.LegendPosition.LeftTop:case t.LegendPosition.LeftCenter:case t.LegendPosition.LeftBottom:E={leftBottom:{x:0+I.left,y:0+I.bottom},leftTop:{x:0+I.left,y:p.y-I.top},rightTop:{x:L.width+I.left,y:p.y-I.top},rightBottom:{x:L.width+I.left,y:0+I.bottom}};break;case t.LegendPosition.TopLeft:case t.LegendPosition.TopCenter:case t.LegendPosition.TopRight:E={leftBottom:{x:0+I.left,y:p.y-L.height-I.top-D.top},leftTop:{x:0+I.left,y:p.y-I.top-D.top},rightTop:{x:p.x-I.right,y:p.y-I.top-D.top},rightBottom:{x:p.x-I.right,y:p.y-L.height-I.top-D.top}};break;case t.LegendPosition.BottomLeft:case t.LegendPosition.BottomCenter:case t.LegendPosition.BottomRight:E={leftBottom:{x:0+I.left,y:0+I.bottom+D.bottom},leftTop:{x:0+I.left,y:L.height+I.bottom+D.bottom},rightTop:{x:p.x-I.right,y:L.height+I.bottom+D.bottom},rightBottom:{x:p.x-I.right,y:0+I.bottom+D.bottom}};break;default:E={leftBottom:{x:i.position.x-P,y:i.position.y-B},leftTop:{x:i.position.x-P,y:i.position.y-B+L.height},rightTop:{x:i.position.x-P+L.width,y:i.position.y-B+L.height},rightBottom:{x:i.position.x-P+L.width,y:i.position.y-B}}}if(i.backgroundVisible){let s={x:0,y:0};const e=L.width,r=L.height;switch(i.position){case t.LegendPosition.RightTop:s={x:p.x-L.width-I.right,y:p.y-L.height-I.top};break;case t.LegendPosition.RightCenter:s={x:p.x-L.width-I.right,y:p.y/2-L.height/2-I.top/2+I.bottom/2};break;case t.LegendPosition.RightBottom:s={x:p.x-L.width-I.right,y:0+I.bottom};break;case t.LegendPosition.LeftTop:s={x:0+I.left,y:p.y-L.height-I.top};break;case t.LegendPosition.LeftCenter:s={x:0+I.left,y:p.y/2-L.height/2-I.top/2+I.bottom/2};break;case t.LegendPosition.LeftBottom:s={x:0+I.left,y:0+I.bottom};break;case t.LegendPosition.TopLeft:s={x:0+I.left,y:p.y-L.height-I.top-D.top};break;case t.LegendPosition.TopCenter:s={x:p.x/2-L.width/2+I.left/2-I.right/2,y:p.y-L.height-I.top-D.top};break;case t.LegendPosition.TopRight:s={x:p.x-L.width-I.right,y:p.y-L.height-I.top-D.top};break;case t.LegendPosition.BottomLeft:s={x:0+I.left,y:0+I.bottom+D.bottom};break;case t.LegendPosition.BottomCenter:s={x:p.x/2-L.width/2+I.left/2-I.right/2,y:0+I.bottom+D.bottom};break;case t.LegendPosition.BottomRight:s={x:p.x-L.width-I.right,y:0+I.bottom+D.bottom};break;default:s={x:i.position.x-P,y:i.position.y-B}}y.if(s.x,s.y,s.x+e,s.y+r)}i.backgroundEvents.Ms(g),g.setVisible(null===(s=i.backgroundVisible)||void 0===s||s),g.Er(void 0!==i.backgroundFillStyle?i.backgroundFillStyle:M),g.Dr(void 0!==i.backgroundStrokeStyle?i.backgroundStrokeStyle:w);let R={x:0,y:0};switch(i.position){case t.LegendPosition.LeftTop:case t.LegendPosition.RightTop:R={x:E.leftTop.x,y:E.leftTop.y};break;case t.LegendPosition.LeftCenter:case t.LegendPosition.RightCenter:R={x:E.leftBottom.x,y:E.leftBottom.y+(E.leftTop.y-E.leftBottom.y)/2+L.height/2};break;case t.LegendPosition.LeftBottom:case t.LegendPosition.RightBottom:R={x:E.leftBottom.x,y:E.leftBottom.y+L.height};break;case t.LegendPosition.TopLeft:case t.LegendPosition.BottomLeft:R={x:E.leftTop.x,y:E.leftTop.y};break;case t.LegendPosition.TopCenter:case t.LegendPosition.BottomCenter:R={x:E.leftBottom.x+(E.rightBottom.x-E.leftBottom.x)/2-L.width/2,y:E.leftTop.y};break;case t.LegendPosition.TopRight:case t.LegendPosition.BottomRight:R={x:E.rightTop.x-L.width,y:E.leftTop.y};break;default:R={x:E.leftTop.x,y:E.leftTop.y}}R={x:R.x+x.left,y:R.y-x.top};const O={...R};let z=0,V=0;const N=[];let G=[];if(o){const t=o.td();o.zr({...R,y:R.y-t.y/2}),V+=a?t.y:t.x+_,R=a?{...R,y:R.y-t.y}:{...R,x:R.x+t.x+_}}r.forEach((t=>{const i=t.text?t.text.td():{x:0,y:0},s=t.button?t.buttonSize:0,e=t.lut||void 0,r=Pd(i,s,a,_,t.lut);V+r>=(a?n[z].height:n[z].width)&&n.length-1>z&&(N.push(G),G=[],z+=1,V=0),G.push({entry:t,textSize:i,buttonSize:s,lut:e,entryLength:r}),V+=r})),G.length>0&&N.push(G);const $=N.map(((t,i)=>{const s=t.reduce(((t,i)=>t+i.entryLength),0);if(0===i&&o){const t=o.td();return s+(a?t.y:t.x+_)}return s}));N.forEach(((s,e)=>{let r;const h=$[e],l=N.length>1;if(0===e)if(l)if(a){const t=n[e].height-h;r={x:O.x,y:O.y-t/2}}else{const t=n[e].width-h;r={x:O.x+t/2,y:O.y}}else r={...O};else if(a){const s=n.slice(0,e).reduce(((t,i)=>t+i.width),0),o=n[e].height;let a;if(l){const s=o-h;let e;switch(i.position){case t.LegendPosition.LeftTop:case t.LegendPosition.RightTop:e=E.leftTop.y-x.top;break;case t.LegendPosition.LeftCenter:case t.LegendPosition.RightCenter:e=E.leftBottom.y+(E.leftTop.y-E.leftBottom.y)/2+o/2;break;case t.LegendPosition.LeftBottom:case t.LegendPosition.RightBottom:e=E.leftBottom.y+o+x.bottom;break;default:e=O.y}a=e-s/2}else a=O.y;r={x:O.x+s,y:a}}else{const s=n.slice(0,e).reduce(((t,i)=>t+i.height),0),o=n[e].width;let a;if(l){const s=o-h;let e;switch(i.position){case t.LegendPosition.TopLeft:case t.LegendPosition.BottomLeft:e=E.leftTop.x+x.left;break;case t.LegendPosition.TopCenter:case t.LegendPosition.BottomCenter:e=E.leftBottom.x+(E.rightBottom.x-E.leftBottom.x)/2-o/2;break;case t.LegendPosition.TopRight:case t.LegendPosition.BottomRight:e=E.rightTop.x-o-x.right;break;default:e=O.x}a=e+s/2}else a=O.x;r={x:a,y:O.y-s}}if(0===e&&o){const t=o.td();a?(o.zr({x:r.x,y:r.y-t.y/2}),r={...r,y:r.y-t.y}):(o.zr({x:r.x,y:r.y-t.y/2}),r={...r,x:r.x+t.x+_})}let u={...r};s.forEach((t=>{Bd(u,t.entry.button,t.entry.text,t.lut,t.textSize,t.buttonSize,a,_),u=a?{...u,y:u.y-t.entryLength}:{...u,x:u.x+t.entryLength}}))})),T.finishPlot(),F.finishPlot()},dispose:()=>{u(),v.xA(),A.xA(),g.dispose(),c.forEach((t=>t.dispose()))}}},Id=(t,i,s,e,r,n)=>(e?Math.ceil(i.width)>=Math.ceil(s.x*t):Math.ceil(i.height)>=Math.ceil(s.y*t))||r>s.x||n>s.y,Ld=(t,i,s,e,r)=>t?{width:i.reduce(((t,i)=>t+i.width),0)+s,height:i.length>1?r.y:i[0].height+e}:{width:i.length>1?r.x:i[0].width+s,height:i.reduce(((t,i)=>t+i.height),0)+e},Pd=(t,i,s,e=0,r)=>{if(r){const n=r.Sh().getSize(),h=s?{length:n.y,thickness:n.x}:{length:n.x,thickness:n.y};return s?Math.max(i,t.y)+h.length:(i?e+i:0)+t.x+h.length}return s?Math.max(i,t.y):(i?e+i:0)+t.x},Bd=(t,i,s,e,r,n,h,o=0)=>{let a,l;if(r.y>n?(a={x:t.x+(n?o:0),y:t.y-r.y/2},l={x:a.x+n,y:t.y-r.y/2}):(a={x:t.x+(n?o:0),y:t.y-n/2},l={x:a.x+n,y:t.y-n/2}),i&&i.vf(new Nu({schema:{x:{},y:{}}}).appendSample(a),{x:"x",y:"y"}),s&&s.zr(l),e){const i=e.Sh().getSize(),s=h?{length:i.y,thickness:i.x}:{length:i.x,thickness:i.y},o=h?{x:l.x+s.thickness/2,y:t.y-Math.max(n,r.y)-s.length/2}:{x:l.x+r.x+s.length/2,y:t.y-s.thickness/2};e.setPosition(o),e.Or()}},Dd=t=>"Me"in t;var Ed,Rd;t.LegendPosition=void 0,(Ed=t.LegendPosition||(t.LegendPosition={}))[Ed.RightTop=0]="RightTop",Ed[Ed.RightCenter=1]="RightCenter",Ed[Ed.RightBottom=2]="RightBottom",Ed[Ed.LeftTop=3]="LeftTop",Ed[Ed.LeftCenter=4]="LeftCenter",Ed[Ed.LeftBottom=5]="LeftBottom",Ed[Ed.TopLeft=6]="TopLeft",Ed[Ed.TopCenter=7]="TopCenter",Ed[Ed.TopRight=8]="TopRight",Ed[Ed.BottomLeft=9]="BottomLeft",Ed[Ed.BottomCenter=10]="BottomCenter",Ed[Ed.BottomRight=11]="BottomRight",t.LegendOrientation=void 0,(Rd=t.LegendOrientation||(t.LegendOrientation={}))[Rd.Horizontal=0]="Horizontal",Rd[Rd.Vertical=1]="Vertical";const Od={toggleIndividualVisibility:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;const s=i.entry.component.getVisible();i.entry.component.setVisible(!s)},focusClicked:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;let s=!1;i.allEntries.forEach((t=>{t.component&&t.component.getVisible&&t.component.getVisible()&&t!==i.entry&&(s=!0)})),i.allEntries.forEach((t=>{t.component&&t.component.setVisible&&t.component.setVisible(!s)})),i.entry.component.setVisible(!0)},doNothing:()=>{}};class zd{constructor(i,s,e,r,n,h){var o;this.wA=[],this._A=!0,this.co=t.LegendPosition.BottomCenter,this._n=void 0,this.kA=!1,this.CA=!1,this.TA=!0,this.FA=!1,this.IA={left:0,right:0,top:0,bottom:0},this.Wi=!1,this.LA=5,this.PA={x:0,y:0},this.BA=!0,this.DA=.5,this.EA=[],this.RA=!1,this.title=new Ar,this.background=new Ar,this.OA=s,this.zA=null!==(o=s.getTheme().panelPadding)&&void 0!==o?o:7,this.VA={events:{click:Od.toggleIndividualVisibility}},i!==Fd&&(this.kA=!0);const a=this.kA?{panel:s}:{panel:s,layer:e,scale:r,legend:this};this.NA=i(a),n&&(this.wA=n),h&&this.setOptions(h),this.OA.Ki.fe();const l=()=>{Or.setTimeout((()=>{this.ye(),this.OA.Ki.fe()}),0)};Or.setTimeout((()=>{this.Wi||this.OA.addEventListener("resize",l)}),0),this.GA=()=>{this.OA.removeEventListener("resize",l)}}$A(i,s){const e=i&&"number"==typeof i?{...Hn,top:i}:i&&"number"!=typeof i?i:Hn;let r={visible:this.wA.length>0&&this._A,chartTitleSpace:e,marginOuter:this.IA,chartPadding:s,titleEvents:this.title,backgroundEvents:this.background,position:this.co,orientation:this.UA,padding:this.xo?this.xo:this.CA?{left:5,right:5,top:5,bottom:5}:Hn,entryMargin:this.LA,marginInner:this.zA,renderOnTop:this.FA,title:this._n,titleFont:this.jA,titleFillStyle:this.YA,backgroundVisible:this.CA,backgroundFillStyle:this.HA,backgroundStrokeStyle:this.WA,autoHideThreshold:this.DA,entries:this.wA};if(this.kA){const i=this.OA.getTheme().uiTextFillStyle,s=this.OA.getTheme().uiButtonFillStyle,e=this.OA.getTheme().uiTextFont,n=this.wA.map((r=>{var n,h,o,a,l;return{component:r.component,options:{...r.options,show:null===(n=r.options.show)||void 0===n||n,text:null!==(h=r.options.text)&&void 0!==h?h:r.component&&r.component.getName?r.component.getName():"",textFont:r.options.textFont?r.options.textFont:e,textFillStyle:r.options.textFillStyle?r.options.textFillStyle:i,buttonSize:null!==(o=r.options.buttonSize)&&void 0!==o?o:10,buttonShape:null!==(a=r.options.buttonShape)&&void 0!==a?a:t.PointShape.Circle,buttonRotation:null!==(l=r.options.buttonRotation)&&void 0!==l?l:0,buttonFillStyle:r.component&&r.component.Vr?Fn(this.OA.getTheme(),r.options.matchStyleExactly||!1,r.component.Vr()):s,events:{click:Od.toggleIndividualVisibility,...r.options.events}}}}));r={...r,entries:n}}return r}XA(){let t=!1;const i=this.OA.getSizePixels(),s=this.OA.getMinimumSize(),e=void 0===s||i.x>s.x&&i.y>s.y;return i.x===this.PA.x&&i.y===this.PA.y&&e||(t=!0),this.PA=i,t}ZA(){const t=this.wA.map((t=>({entryText:t.component&&t.component.getName?t.component.getName():void 0,buttonShape:t.component&&t.component.we?t.component.we():void 0,legendStyle:t.component&&t.component.Vr?t.component.Vr():void 0})));if(this.EA.length!==t.length)return this.EA=t,!0;const i=t.some(((t,i)=>{var s,e,r,n;const h=this.EA[i];if(t.entryText!==h.entryText)return!0;if(t.buttonShape!==h.buttonShape)return!0;if(t.legendStyle&&h.legendStyle){if(t.legendStyle.fill!==h.legendStyle.fill)return!0;if(t.legendStyle.fill2!==h.legendStyle.fill2)return!0;if(t.legendStyle.stroke!==h.legendStyle.stroke)return!0;if(t.legendStyle.point3D!==h.legendStyle.point3D)return!0;if((null===(s=t.legendStyle.behavior)||void 0===s?void 0:s.colorStep)!==(null===(e=h.legendStyle.behavior)||void 0===e?void 0:e.colorStep))return!0;if((null===(r=t.legendStyle.behavior)||void 0===r?void 0:r.priority)!==(null===(n=h.legendStyle.behavior)||void 0===n?void 0:n.priority))return!0;if(t.legendStyle.lutValue!==h.legendStyle.lutValue)return!0}}));return this.EA=t,i}JA(){this.RA||this.co===t.LegendPosition.RightCenter||this.wA.some((t=>{var i;return!!(t.component&&t.component.Me&&(null===(i=t.component.Me())||void 0===i?void 0:i.lut)||so(t.component)||t.options.lut)}))&&(this.co=t.LegendPosition.RightCenter,this.BA=!0)}Sh(t,i){var s;if(this.Wi)return Hn;if((this.XA()||this.ZA())&&(this.BA=!0),this.JA(),!this.BA&&!this.kA)return null!==(s=this.QA)&&void 0!==s?s:Hn;const e=this.$A(t,i),r=this.NA.update(e);return this.QA=r||Hn,this.QA}Or(t,i){if(!this.Wi&&this.BA){const s=this.$A(t,i);this.NA.plot(s),this.BA=!1}}tc(t,i){if(void 0===t||!this.wA.some((i=>i.component===t))){if(this.wA.push({component:t,options:{...this.VA,...i}}),t instanceof Bo){const i=()=>{this.ye(),this.OA.Ki.fe()},s=()=>{t.removeEventListener("dispose",s),t.removeEventListener("visiblechange",i),this.remove(t),this.OA.Ki.fe()};t.addEventListener("visiblechange",i),t.addEventListener("dispose",s)}return this.BA=!0,this}}KA(){return this.TA}ye(){return this.BA=!0,this}qA(t){const i=(t=Array.isArray(t)?t:[t]).map((t=>Dd(t)?this.wA.find((i=>i.component===t)):this.wA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Me)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Me())||void 0===r?void 0:r.lut)===t})))).filter((t=>void 0!==t)),s=this.wA.filter((t=>!i.includes(t)));return this.wA=[...i,...s],this.BA=!0,this.OA.Ki.fe(),this}add(t,i){return void 0===t&&void 0===i||(t instanceof $d?t.tg().forEach((t=>this.tc(t,i))):t&&!Dd(t)?this.tc({Me:()=>({lut:t})},i):this.tc(t,i),this.BA=!0,this.OA.Ki.fe()),this}remove(t){const i=this.wA.find((i=>i.component===t));if(i){const t=this.wA.indexOf(i);this.wA.splice(t,1)}return this.BA=!0,this.OA.Ki.fe(),this}clear(){return this.wA=[],this.BA=!0,this.OA.Ki.fe(),this}dispose(){return this.Wi||(this.Wi=!0,this.GA(),this.NA.dispose&&this.NA.dispose(),this.BA=!0,this.OA.Ki.fe()),this}setOptions(t){var i,s,e,r,n,h,o,a;return void 0!==t.addEntriesAutomatically&&(this.TA=t.addEntriesAutomatically),void 0!==t.position&&(this.co=t.position,this.RA=!0),void 0!==t.orientation&&(this.UA=t.orientation),void 0!==t.padding&&("number"==typeof t.padding?this.xo={left:t.padding,right:t.padding,top:t.padding,bottom:t.padding}:this.xo={left:null!==(i=t.padding.left)&&void 0!==i?i:0,right:null!==(s=t.padding.right)&&void 0!==s?s:0,top:null!==(e=t.padding.top)&&void 0!==e?e:0,bottom:null!==(r=t.padding.bottom)&&void 0!==r?r:0}),void 0!==t.marginOuter&&("number"==typeof t.marginOuter?this.IA={left:t.marginOuter,right:t.marginOuter,top:t.marginOuter,bottom:t.marginOuter}:this.IA={left:null!==(n=t.marginOuter.left)&&void 0!==n?n:0,right:null!==(h=t.marginOuter.right)&&void 0!==h?h:0,top:null!==(o=t.marginOuter.top)&&void 0!==o?o:0,bottom:null!==(a=t.marginOuter.bottom)&&void 0!==a?a:0}),void 0!==t.entryMargin&&(this.LA=t.entryMargin),void 0!==t.marginInner&&(this.zA=t.marginInner),void 0!==t.renderOnTop&&(this.FA=t.renderOnTop),void 0!==t.title&&(this._n=t.title),void 0!==t.titleFont&&(this.jA=t.titleFont),void 0!==t.titleFillStyle&&(this.YA=t.titleFillStyle),void 0!==t.visible&&(this._A=t.visible),void 0!==t.backgroundVisible&&(this.CA=t.backgroundVisible),void 0!==t.backgroundFillStyle&&(this.HA=t.backgroundFillStyle),void 0!==t.backgroundStrokeStyle&&(this.WA=t.backgroundStrokeStyle),void 0!==t.autoHideThreshold&&(this.DA=t.autoHideThreshold),void 0!==t.entries&&(this.VA={...this.VA,...t.entries},this.wA.forEach((t=>{t.options={...this.VA,...t.options}}))),this.BA=!0,this.OA.Ki.fe(),this}getOptions(){return{addEntriesAutomatically:this.TA,position:this.co,orientation:this.UA,padding:this.xo,marginOuter:this.IA,entryMargin:this.LA,marginInner:this.zA,renderOnTop:this.FA,title:this._n,titleFont:new Te(this.jA),titleFillStyle:this.YA,visible:this._A,backgroundVisible:this.CA,backgroundFillStyle:this.HA,backgroundStrokeStyle:this.WA,autoHideThreshold:this.DA,entries:this.VA}}setEntryOptions(t,i){const s=Dd(t)?this.wA.find((i=>i.component===t)):this.wA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Me)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Me())||void 0===r?void 0:r.lut)===t}));return s&&(s.options={...s.options,...i}),this.BA=!0,this.OA.Ki.fe(),this}getEntryOptions(t){const i=Dd(t)?this.wA.find((i=>i.component===t)):this.wA.find((i=>{var s,e,r;return(null===(s=i.component)||void 0===s?void 0:s.Me)&&(null===(r=null===(e=i.component)||void 0===e?void 0:e.Me())||void 0===r?void 0:r.lut)===t}));if(i)return i.options}getEntries(){return this.wA}}class Vd{constructor(t,i,s,r,n,h,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.ig=[],this.ge=[],this.sg=void 0,this.eg=void 0,this.rg=void 0,this.Zt=c(0,0,0,0),this.ng=!1,this.Wi=!1,this.hg=()=>{this.og=!0,this.ag.fe()},this.lg=t=>i=>{const s=this.ig.indexOf(i);-1!==s&&this.ig.splice(s,1),this.Ki.fe(),t.It()},this.og=!0,this.background=new Ar,this.ug=t,this.cg=s,this.ag=r,this.removePanel=n,this.rs=i.Ki.rs;const u=i.Ki.li();this.uiScale=s.d2({scaleXYConstructor:He}).Oi(0,100).zi(0,100).zt(u),this.Rv=s.d2({scaleXYConstructor:He}).Oi(0,this.uiScale.x.getCellSize()).zi(0,this.uiScale.y.getCellSize()).zt(u),this.engine=i.Ki.dg,this.Ki=i.Ki.sd,this.Ks=this.Ki.Ks.qs(this,{}),this.vg=()=>i.Ag("unidentified ui"),this.gg=i.yg(),this.pg=this.ag.Rr(this.uiScale).zr(e(0,0)).zt(e(100,100)).Er(h).Dr(o),this.background.Ms(this.pg),a?(a.addEventListener("resize",this.hg),this.mg=()=>a.removeEventListener("resize",this.hg)):(i.Ki.Ct("resize",this.hg),this.Sg=()=>i.Ki.Ft("resize",this.hg));const d=t=>{this.ng=t.isInView,this._t.kt("inviewchanged",{isInView:this.ng})};i.Ki.Ct("inviewchanged",d),this.bg=()=>i.Ki.Ft("inviewchanged",d),this.sg=n,this.legend=new zd(null!=l?l:Fd,this,this.gg,this.Rv),this.ge=[this.legend]}getTheme(){return this.rs}getSizePixels(){return this.Rv.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.pg.Er(t),this.ag.fe(),this}getBackgroundFillStyle(){return this.pg.Qn()}setBackgroundStrokeStyle(t){return this.pg.Dr(t),this.ag.fe(),this}getBackgroundStrokeStyle(){return this.pg.Il()}translateCoordinate(t,i,s){return Cd(t,i,s,this.Rv,this.Ki)}xg(t){return this.ig.push(t),this.Ki.fe(),t}addUIElement(t=mc,i=this.uiScale){i=kd(i,this.Rv);const s=this.vg();return this.xg(_d(t,s,this.uiScale,i,this.lg(s),this.rs))}dispose(){return this.Wi||(this.Wi=!0,this.Sg&&this.Sg(),this.mg&&this.mg(),Nd(this.uiScale),Nd(this.Rv),this.bg&&this.bg(),this.eg&&this.eg(),this.ag.It(),this.gg.It(),this.ig.slice().forEach((t=>{t.dispose()})),this.ge.forEach((t=>t.dispose())),this.Ki.fe(),this.sg&&this.sg(this),this._t.kt("dispose",{})),this}isDisposed(){return this.Wi}saveToFile(t,i,s,e){return wd(this.engine,t,i,s,e),this}eo(t){this.Zt=t,this.hg()}Dt(){return this.Rv.Dt(),this.uiScale.Dt(),this}Et(){return this.Rv.Et(),this.uiScale.Et(),this}Or(t){if(this.og){const t=this.ag.Ki.li(),i=t.x,s=t.y;this.uiScale.zt(i,s),this.Rv.zt(i,s);const e=[this.Zt.left,this.Zt.right],r=[this.Zt.bottom,this.Zt.top];this.uiScale.Ei(e),this.uiScale.Ri(r);const n=this.uiScale.getInnerIntervalPixels();this.Rv.Oi(0,n.x).Ei(e).zi(0,n.y).Ri(r),this._t.kt("resize",{width:n.x,height:n.y,engineHeight:s,engineWidth:i})}this.og=!1}Mg(){for(let t=0;t<this.ig.length;t+=1)this.ig[t].Sh().Or();this.rg&&this.rg()}wg(t,i){if(t){const s=t(i);this.addEventListener("resize",s.Sh.bind(s)),this.eg=s.It.bind(s),this.rg=s.Sh.bind(s)}}getIsInView(){return this.ng}}const Nd=t=>{t.ei&&t.ei()};class Gd extends Vd{constructor(i,s,e,r,n,h,o){super(i,s,e,s._g("uipanel bg",0),r,s.Ki.rs.uiPanelBackgroundFillStyle,s.Ki.rs.uiPanelBackgroundStrokeStyle,h),this._t=new Ar,this.legend.setOptions({position:t.LegendPosition.LeftTop,...o}),this.wg(n,this.Rv)}setMinimumSize(t){return this.Ff=t,this.Ki.fe(),this}getMinimumSize(){return this.Ff}Or(t){this.ge.forEach((t=>t.Sh(0,Hn))),super.Or(t),super.Mg(),this.ge.forEach((t=>t.Or(0,Hn)))}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class $d extends Vd{constructor(i,s,r,n,h,o,a,l,u,c,d,f){super(i,s,r,n,h,o,a,d,f),this.kg={},this.gn=!0,this.Cg={left:!1,top:!1,right:!1,bottom:!1},this.title=new Ar,this.Tg=s.Fg("chart internal ui",0),this.xo=void 0!==this.rs.panelPadding?{left:this.rs.panelPadding,right:this.rs.panelPadding,top:this.rs.panelPadding,bottom:this.rs.panelPadding}:{left:7,right:7,top:7,bottom:7},this._n=this.Tg.no(this.uiScale).Eh("Chart").zr(e(50,100)).Cu(e(0,1)).ih(l).Er(u).setPointerEvents(!1).Dh(c),this._n.In=t.TextObjectIdentifier.ChartTitle,this.title.Ms(this._n),this.Ig=this.Ks.Gv([this._n]).de(this.rs.effectsText)}addLegend(t){var i;let s;(t={addEntriesAutomatically:!1,backgroundVisible:!0,...t}).addEntriesAutomatically&&this.legend&&(s=this.legend.getEntries());const e=null!==(i=t.customLegend)&&void 0!==i?i:Fd,r=new zd(e,this,this.gg,this.Rv,s,t);return this.ge.push(r),this.Ki.fe(),r}setAnimationsEnabled(t){return this.gn=t,this}getAnimationsEnabled(){return this.gn}setTitle(t){return this._n.Eh(t),this.Ki.fe(),this}getTitle(){return this._n.zh()}getTitleSize(){return this._n.Sh().td()}setTitleFillStyle(t){return this._n.Er(t),this.hg(),this}getTitleFillStyle(){return this._n.Qn()}setTitleShadow(t){return this._n.Dh(t),this.Ki.fe(),this}getTitleShadow(){return this._n.mu()}setTitleFont(t){return this._n.ih(t),this.hg(),this}getTitleFont(){return this._n.th()}setTitleRotation(t){return this._n.eh(t),this.Ki.fe(),this}getTitleRotation(){return this._n.rh()}setTitleEffect(t){return this.Ig.de(t),this.Ki.fe(),this}getTitleEffect(){return this.Ig.ve()}setTitleMargin(t){var i,s;return this.kg="object"==typeof t?this.kg?(i=this.kg,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.hg(),this}getTitleMargin(){return this.kg}ro(t,i){const s="object"==typeof t?f(this.xo,t):{left:t,top:t,right:t,bottom:t};return s.bottom===this.xo.bottom&&s.left===this.xo.left&&s.right===this.xo.right&&s.top===this.xo.top||(Object.entries(t).forEach((t=>{const s=t[0],e=t[1];void 0===e||!i&&this.Cg[s]||(this.xo[s]=e,this.Cg[s]=i)})),this.hg()),this}setPadding(t){return this.ro("object"==typeof t?t:{left:t,top:t,right:t,bottom:t},!0),this}getPadding(){return this.xo}Lg(t){const i=t.Pg(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Tg.It(),this}}const Ud={Bg(t,i){var s,e;return t.Qn()!==ho&&0!==t.zh().length&&t.getVisible()?t.Sh().td().y+(null!==(s=i.bottom)&&void 0!==s?s:10)+(null!==(e=i.top)&&void 0!==e?e:10):0},Dg(t,i,s,e,r){var n;const h=r&&r.left?r.left:0,o=r&&r.right?r.right:0,a={x:50,y:100-s.y*(e.top+(null!==(n=i.top)&&void 0!==n?n:10))};t.zr(a).Cu({x:0,y:1}).eo({top:0,bottom:0,right:e.right+(i.right||0)+o,left:e.left+(i.left||0)+h})}};class jd extends Bo{constructor(t,i,s,e,r){super(t,i,e,r),this.Eg=Zo,this.Rg=!0,this.Og=!0,this.zg=!0,this.chart=t,this.Vg=s,this.Js=new Map,this.axisX=t.axisX,this.axisY=t.axisY,this.axisZ=t.axisZ}Es(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Rv,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.Rg=t,this}getCursorEnabled(){return this.Rg}setCursorFormattingOverride(t){return this.Ng=t,this}getCursorFormattingOverride(){return this.Ng}Gg(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.Og=t,this.chart.Ki.fe(),this}getAutoScrollingEnabled(){return this.Og}setColorShadingStyle(t){return this.Eg=t,this.Js.forEach(((i,s)=>s.$g(t))),this.Vg.fe(),this}getColorShadingStyle(){return this.Eg}setDepthTestEnabled(t){return this.zg=t,this.Js.forEach(((i,s)=>s.Ug(t))),this.Vg.fe(),this}getDepthTestEnabled(){return this.zg}jg(){}Or(){}Yg(){}getXMax(){const t=this.hd;return t?t.Ps():0}getXMin(){const t=this.hd;return t?t.Ls():0}getYMax(){const t=this.hd;return t?t.Ds():0}getYMin(){const t=this.hd;return t?t.Bs():0}getZMax(){const t=this.hd;return t?t.Qe():0}getZMin(){const t=this.hd;return t?t.Je():0}Xh(){const t=this.hd;return t?h(t.$u(),t.Uu(),t.Hg()):h(0,0,0)}}class Yd extends jd{constructor(t,i,s,e,r,n){super(t,i,s,e,n),this.At="Box Series 3D",this.Wg=.25,this.Xg=!1,this._t=new Ar,this.Lr=Bn(this.rs.boxSeries3DFillStyle,r),this.hd=this.Vg.Jg().Ug(this.zg).Er(this.Lr).Zg(this.Wg).vs(this.getHighlight()),this.ne(this.hd)}Qg(){return this.Xg}invalidateData(t){const i=t.length;if(0===i)return this;this.Xg&&this.chart.Ki.ul(jl.Aa);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],r="xMin"in i&&"xMax"in i,n="yMin"in i&&"yMax"in i,h="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:r?(i.xMin+i.xMax)/2:void 0,yCenter:n?(i.yMin+i.yMax)/2:void 0,zCenter:h?(i.zMin+i.zMax)/2:void 0,xSize:r?i.xMax-i.xMin:void 0,ySize:n?i.yMax-i.yMin:void 0,zSize:h?i.zMax-i.zMin:void 0}}}else e=t;return this.hd.Kg(e.slice()),this.chart.Ki.fe(),this.Xg=!0,this}clear(){return this.hd.ws(),this.Xg=!1,this.chart.Ki.fe(),this}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.hd.Er(t),this.chart.Ki.fe(),this}getFillStyle(){return this.Lr}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Wg=void 0!==t?jr(t,0,1):void 0,this.hd.Zg(this.Wg),this.Vg.fe(),this}getRoundedEdges(){return this.Wg}qg(){return this.Og&&this.getVisible()}Nr(t,i){t.vs(i),this.chart.Ki.fe()}Me(){return In(this.Lr,this.hd.ls())}Or(){super.Or(),this.hd.Sh(!1)}Vr(){return{fill:this.Lr}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Hd=t=>{if(aa(t)){const i=t.getThickness(),s=t.getFillStyle();if(co(s))return 1===i?Ko:new ta({size:i,fillStyle:s,shape:"sphere"})}return Ko},Wd={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}};class Xd{constructor(t,i,s,e,r,n,h,o,a,l){this.S=0,this.Xi=!0,this.Wi=!1,this.Hi=!0,this._t=new Ar,this.fe=t,this.ty=i,this.iy=s,this.sy=e,this.ey=r,this.ny=n,this.Uf=h,this.hy=o,this.oy=a,this.Yo=l}setValue(t){return t===this.S||(this.S=t,this.fe(),this._t.kt("valuechange",{value:this.S})),this}getValue(){return this.S}setTickStyle(t){return this.iy="function"==typeof t?t(this.iy):t,this.fe(),this}getTickStyle(){return this.iy}setTickLength(t){return this.sy=t,this.fe(),this}getTickLength(){return this.sy}setGridStrokeStyle(t){return this.ey="function"==typeof t?t(this.ey):t,this.fe(),this}getGridStrokeStyle(){return this.ey}setTextPadding(t){return this.ny=t,this.fe(),this}getTextPadding(){return this.ny}setTextRotation(t){return this.Uf=t,this.fe(),this}getTextRotation(){return this.Uf}setTextFillStyle(t){return this.hy="function"==typeof t?t(this.hy):t,this.fe(),this}getTextFillStyle(){return this.hy}setTextFont(t){return this.oy="function"==typeof t?t(this.oy):t,this.fe(),this}getTextFont(){return this.oy}setTextFormatter(t){return this.Yo=t,this.fe(),this}dispose(){return this.Wi||(this.Wi=!0,this.ty(),this.fe(),this._t.kt("dispose",{})),this}isDisposed(){return this.Wi}setVisible(t){const i=this.Xi!==t;return this.Xi=t,i&&(this._t.kt("visiblechange",{isVisible:this.Xi}),this.fe()),this}getVisible(){return this.Xi}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this.Hi=t,this.fe(),this}getPointerEvents(){return this.Hi}}class Zd extends Xd{constructor(t,i,s,e,r,n,h,o,a,l,u,c,d){super(t,i,s,e,r,n,h,o,a,l),this.HA=u,this.WA=c,this.xo=d}setBackgroundFillStyle(t){return this.HA="function"==typeof t?t(this.HA):t,this.fe(),this}getBackgroundFillStyle(){return this.HA}setBackgroundStrokeStyle(t){return this.WA="function"==typeof t?t(this.WA):t,this.fe(),this}getBackgroundStrokeStyle(){return this.WA}setPadding(t){return this.xo="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.xo,...t},this.fe(),this}getPadding(){return this.xo}}class Jd{constructor(t,i,s,e){this.ly=[],this.uy=new Map,this.vy=t,this.Ay=i,this.gy=s,this.Yg=e}pA(){this.gy&&this.gy();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.ly.slice(),r=[];i.forEach((t=>{let i=e.shift();i||(i=this.vy(),this.ly.push(i));const n=[],h=i.yy().slice();t.instances.forEach((t=>{const i=h.shift();n.push({...t,existingMember:i})}));const o=this.Ay(i,n,t.sharedProperties);s=kn(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)r.push({ss:t.instances[s].ss,collection:i,member:o[s]});h.forEach((t=>{null==i||i.Tf(t)}))})),e.forEach((t=>{t.dispose();const i=this.ly.indexOf(t);i<0?Dn(0,(()=>{})):this.ly.splice(i,1)})),r.forEach((t=>{const i=this.uy.get(t.ss);i&&t.collection.Ki.Ml({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.uy.clear(),r.forEach((t=>{this.uy.set(t.ss,t)})),this.Yg&&this.Yg(this.ly,s)}}}xA(){this.ly.forEach((t=>{t.dispose()})),this.ly.length=0}}class Qd extends Il{constructor(t,i,s,e,r,n,h,o,a){super(t,i,s,e,o,{numeric:i.my({x:t.Ki.rs.xAxis3DNumericTicks,y:t.Ki.rs.yAxis3DNumericTicks,z:t.Ki.rs.zAxis3DNumericTicks}),datetime:i.my({x:t.Ki.rs.xAxis3DDateTimeTicks,y:t.Ki.rs.yAxis3DDateTimeTicks,z:t.Ki.rs.zAxis3DDateTimeTicks}),time:i.my({x:t.Ki.rs.xAxis3DTimeTicks,y:t.Ki.rs.yAxis3DTimeTicks,z:t.Ki.rs.zAxis3DTimeTicks})},{type:"linear"}),this.dv=[],this._t=new Ar,this.chart=t,this.Vg=r,this.Sy=n,this.by=h,this.xy=this.Vg.ji;const l=this.Nn.my({x:this.rs.xAxis3DStrokeStyle,y:this.rs.yAxis3DStrokeStyle,z:this.rs.zAxis3DStrokeStyle});this.My=this.Vg._y([Wd.InternalUI],void 0).Hr(l).wy(Hd(l)).setPointerEvents(!1),this.Ln=this.Sy.no(this.by).setPointerEvents(!1).Er(i.my({x:t.Ki.rs.xAxis3DTitleFillStyle,y:t.Ki.rs.yAxis3DTitleFillStyle,z:t.Ki.rs.zAxis3DTitleFillStyle})).ih(i.my({x:t.Ki.rs.xAxis3DTitleFont,y:t.Ki.rs.yAxis3DTitleFont,z:t.Ki.rs.zAxis3DTitleFont})).Nl(3),this.ky=new Td((()=>this.Sy.no(this.by).Nl(2).ro(Hn).eo(Hn))),this.Cy=new Jd((()=>this.Sy.Ty(this.by).setPointerEvents(!1).Nl(1)),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t._a();return e.Nu(i),e}))))),this.Fy=new Jd((()=>this.Vg.iA().setPointerEvents(!1)),((t,i,s)=>(t.ws().Hr(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.tc(i)))))),this.Ks=a,this.hh=this.Ks.Gv([this.Ln]).de(e.effectsText),s.Fv=this}setTickStrategy(t,i){return super.jn(t,i)}getTickStrategy(){return this.dn}addCustomTick(){const t=new Zd((()=>this.chart.Ki.fe()),(()=>{const i=this.dv.indexOf(t);i>=0&&this.dv.splice(i,1)}),this.rs.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.rs.xAxis3DNumericTicks.majorTickStyle.tickLength,this.rs.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.rs.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.rs.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.rs.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.rs.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),ho,_r,{left:4,right:4,top:4,bottom:4});return this.dv.push(t),this.chart.Ki.fe(),t}getCustomTicks(){return[...this.dv]}setStrokeStyle(t){return this.My.Hr(t).wy(Hd(this.My.Ho())),this.chart.Ki.fe(),this}getStrokeStyle(){return this.My.Ho()}setVisible(t){return super.setVisible(t),this.My.setVisible(t),!1===t&&(this.Fy.xA(),this.ky.xA(),this.Cy.xA()),this.Vg.fe(),this}Xv(){return this.chart.getSeries()}qh(t,i,s){const e=Math.abs(this.ji.Vt(Math.abs(i-t))*this.Vg.Iy(1));return{start:t+s.start*e*Math.sign(t-i),end:i+s.end*e*Math.sign(i-t)}}_h(t){const i=this.xy,s=h(i.x.$t(),i.y.$t(),i.z.$t()),{gridlinePositionA:r,gridlinePositionB:n,gridlinePositionC:o}=this.Nn.Ly(t.cameraDirection),a=t=>({x:-1===t.x?this.xy.x.getInnerStart():1===t.x?this.xy.x.getInnerEnd():0,y:-1===t.y?this.xy.y.getInnerStart():1===t.y?this.xy.y.getInnerEnd():0,z:-1===t.z?this.xy.z.getInnerStart():1===t.z?this.xy.z.getInnerEnd():0}),l=a(r),u=a(n),c=a(o),d=this.Nn.Rf,f=ph(t.start,t.end,.5),v=ih.addVec(f,ih.multiplyVec(ih.multiply(d,-1),s)),A=this.Vg.Py(f)||e(0,0),g=this.Vg.Py(v)||e(0,0);return{center:f,wuSize:s,tickDirection3D:d,tickDirection2D:Ch(Ph(Je(A,this.chart.Ki.ji,this.by),Je(g,this.chart.Ki.ji,this.by))),gridlinePositionA:l,gridlinePositionB:u,gridlinePositionC:c}}Fh(t,i,s,e,r){return{...this.By(r,t,i.un.tickLength,i.un.tickPadding),keyValue:t,tickLevel:i,labelText:s,labelOffset:{x:0,y:0},labelRotation:i.un.labelRotation}}Rh(t,i){const s=new Kd(i,t,this.Sy,this.by,this.Vg);return s.ph.Nl(0),s}Ph(t,i,s){return{ticksInfo:i,updatedTicks:s}}Bn(){return this.by}By(t,i,s,r){const{wuSize:n,start:h,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ji.getInnerStart())/(this.ji.getInnerEnd()-this.ji.getInnerStart()),c=ih.addVec(ph(h,o,u),ih.multiplyVec(ih.multiply(a,this.Vg.Iy(.5*this.My.Ho().getThickness())),n)),d=ih.addVec(c,ih.multiplyVec(ih.multiply(a,this.Vg.Iy(s)),n)),f=this.Vg.Py(d)||e(0,0);return{labelPosition:Lh(Je(f,this.chart.Ki.ji,this.by),Ih(l,r)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Dy(t,i,s){const{wuSize:r,start:n,end:h,tickDirection3D:o}=i,a=(t-this.ji.getInnerStart())/(this.ji.getInnerEnd()-this.ji.getInnerStart()),l=ih.addVec(ph(n,h,a),ih.multiplyVec(ih.multiply(o,this.Vg.Iy(.5*this.My.Ho().getThickness())),r)),u=ih.addVec(l,ih.multiplyVec(ih.multiply(o,this.Vg.Iy(10)),r)),c=this.Vg.Py(l)||e(0,0),d=this.Vg.Py(u)||e(0,0);return this.Sy.Wr(this.by).Zr(c).Xr(d).Hr(new oa({fillStyle:new uo({color:be(120*s)}),thickness:1}))}Jh(t,i){return qd(t,i,this.ji)}Ey(t){const i=this.xy;let s,r;this.Ry()?(s=h(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),r=h(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(s=h(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),r=this.Nn.Oy(h(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),s));const n=this.Vg.Py(s)||e(0,0),o=this.Vg.Py(r)||e(0,0);return{cameraDirection:t,physicalAxisSize:Fh(Ph(n,o)),start:s,end:r,start2D:n,end2D:o}}Or(i){if(!this.Xi)return;const s=Math.min(this.Yn,this.Hn),r=Math.max(this.Yn,this.Hn);this.My.ws().tc([i.start,i.end]);const n=this.Fy.pA();for(const[t,s]of this.fn)for(const[,e]of s){const s=i.ticksInfo.get(e);if(!s)continue;const r=this.zy(i,s);n.add({ss:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:t.un.tickStyle}),r.gridStroke&&n.add({ss:0,positions:r.gridStroke},{lineStyle:t.un.gridStrokeStyle}),e.ph.zr(s.labelPosition).Cu(s.labelAlignment).eh(s.labelRotation).Su(s.labelOffset.x,s.labelOffset.y)}const h=this.ky.pA(),o=this.Cy.pA(),a={x:0,y:0};this.dv.forEach((e=>{if(!e.Xi||e.S<s||e.S>r)return;const l=this.By(i,e.S,e.sy,e.ny),u=this.zy(i,l);if(e.hy!==ho){const i=h.add().zr(l.labelPosition).Cu(l.labelAlignment).Er(e.hy).ih(e.oy).Eh(e.Yo(e.S)).eh(e.Uf).setPointerEvents(e.Hi);i.In=e.In;const s=i.Sh().li();if(a.x=Math.max(a.x,s.x),a.y=Math.max(a.y,s.y),e.HA!==ho){const s=i.Qc(),r=[{x:s.min.x-e.xo.left,y:s.max.y+e.xo.top},{x:s.max.x+e.xo.right,y:s.max.y+e.xo.top},{x:s.max.x+e.xo.right,y:s.min.y-e.xo.bottom},{x:s.min.x-e.xo.left,y:s.min.y-e.xo.bottom}];o.add({ss:0,positions:r},{fillStyle:e.HA,strokeStyle:e.WA}),this.Sy.Ki.Kc&&e.In===t.TextObjectIdentifier.CursorTickMarker&&this.Sy.Ki.Kc.aA({...this.Sy.Ki.Ol(s.min,s.max,i.ji,e.xo),blacklist:[t.TextObjectIdentifier.CursorTickMarker]})}}n.add({ss:0,positions:[u.tickStroke.start,u.tickStroke.end]},{lineStyle:e.iy}),u.gridStroke&&n.add({ss:0,positions:u.gridStroke},{lineStyle:e.ey})})),h.finishPlot(),o.finishPlot(),n.finishPlot();const l=this.$h(((t,i)=>{const s=i.ph.Sh().li();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:a.x,y:a.y}),u=Math.atan((i.end2D.y-i.start2D.y)/(i.end2D.x-i.start2D.x));this.Ln.Cu({x:0,y:0}).eh(180*-u/Math.PI);const c=ih.addVec(i.center,ih.multiplyVec(ih.multiply(i.tickDirection3D,this.Vg.Iy(.5*this.My.Ho().getThickness()+this.jh(((t,i)=>Math.max(t,i.tickLength)),0))),i.wuSize)),d=this.Vg.Py(c)||e(0,0),f=Lh(Je(d,this.chart.Ki.ji,this.by),Lh(Lh(Bh(l,i.tickDirection2D),Ih(i.tickDirection2D,this.jh(((t,i)=>Math.max(t)),0))),Bh(Ih(this.Ln.Sh().li(),.5),i.tickDirection2D)));this.Ln.zr(f)}zy(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:r}=t,n=i.posTickStart3D,h=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ur(o,0)||Ur(o,1)||(a=[this.Vy()?{...s,x:n.x}:this.Ny()?{...s,y:n.y}:this.Ry()?{...s,z:n.z}:{x:0,y:0,z:0},this.Vy()?{...e,x:n.x}:this.Ny()?{...e,y:n.y}:this.Ry()?{...e,z:n.z}:{x:0,y:0,z:0},this.Vy()?{...r,x:n.x}:this.Ny()?{...r,y:n.y}:this.Ry()?{...r,z:n.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:n,end:h}}}Gy(t){const i=this.Yn,s=this.Hn,e=.01*t*(s-i),r=i+e,n=s+e;this.fh(r,n,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}$y(t,i,s){if(0===i)return;s<0&&(i*=-1,s*=-1);const e=this.Hn-this.Yn,r=e*(i>=1?1+.02*s:1-.02*s)-e;"centered"===t?this.fh(this.Yn+r/2,this.Hn-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.fh(this.Yn,this.Hn-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.fh(this.Yn+r/2,this.Hn,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}oh(){super.oh(),this.Fy.xA(),this.ky.xA(),this.Cy.xA()}Vy(){return this.Nn.Vy()}Ny(){return this.Nn.Ny()}Ry(){return this.Nn.Ry()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}}class Kd extends Ll{constructor(t,i,s,e,r,n){super(t,i,s,e,n),this.Uy=r}}const qd=(t,i,s)=>jr(t+.1*(i-t)+Math.abs(s.$t())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),tf=(t,i,s,e)=>({Yh:s=>{const e=t();let r;for(const t of e){if(!t.qg())continue;const e=i(t,s);r=void 0===e?r:void 0!==r?Math.min(r,e):e}return r},Hh:i=>{const e=t();let r;for(const t of e){if(!t.qg())continue;const e=s(t,i);r=void 0===e?r:void 0!==r?Math.max(r,e):e}return r},Xh:()=>{const i=t();let s;for(const t of i){if(!t.qg())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),sf=t=>({...tf(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Xh().y)),my:t=>t.y,Oy:(t,i)=>({x:i.x,y:t.y,z:i.z}),Rf:h(-1,0,0),Ly:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:h(i.x,0,i.z),gridlinePositionB:h(i.x,0,-i.z),gridlinePositionC:h(-i.x,0,-i.z)}},Vy:()=>!1,Ny:()=>!0,Ry:()=>!1}),ef=t=>({...tf(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Xh().z)),my:t=>t.z,Oy:(t,i)=>({x:i.x,y:i.y,z:t.z}),Rf:h(1,0,0),Ly:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:h(i.x,-i.y,0),gridlinePositionB:h(i.x,i.y,0),gridlinePositionC:h(-i.x,i.y,0)}},Vy:()=>!1,Ny:()=>!1,Ry:()=>!0});class rf extends jd{constructor(t,i,s,e,r){super(t,i,s,e,r),this.Xg=!1,this._t=new Ar}Qg(){return this.getPointAmount()>0}setStrokeStyle(t){this.zc="function"==typeof t?t(this.zc):t;const i=this.zc;return this.hd.Hr(i),this.Vg.fe(),this}getStrokeStyle(){return this.zc}add(t){return this.Xg&&this.chart.Ki.ul(jl.Aa),this.Xg=!0,(t=Array.isArray(t)?t:[t])?(this.hd.tc(t.slice()),this.Vg.fe(),this):this}clear(){return this.hd.ws(),this}getPointAmount(){const t=this.hd;return t.oc()+t.ac()}qg(){return this.Og&&this.getPointAmount()>0&&this.getVisible()}Nr(t,i){t.vs(i),this.Vg.fe()}Vr(){return{stroke:this.zc}}Me(){return In(this.zc.getFillStyle(),this.hd.ls())}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class nf extends rf{constructor(t,i,s,e,r,n,h){super(t,i,s,e,n),this.At="Line Series 3D",this.zc=Bn(e.lineSeries3DStrokeStyle,r),this.jy=ou.pointStyle3D,this.Yy(this.zc);const o={individualLookupValuesEnabled:!1,...h};this.hd=this.Vg._y([Wd.UserSeries],o).Ug(this.zg).Hr(this.zc).wy(this.jy).vs(this.getHighlight()),this.ne(this.hd)}setStrokeStyle(t){super.setStrokeStyle(t),this.Yy(this.zc);const i=this.jy;return this.hd.wy(i),this}Yy(t){const i=new na.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.jy=i}}class hf extends rf{constructor(t,i,s,e,r,n,h){super(t,i,s,e,n),this.At="Point Line Series 3D",this.jy=Bn(e.pointLineSeries3DPointStyle,r),this.zc=Bn(e.lineSeries3DStrokeStyle,r),this.Hy();const o={individualLookupValuesEnabled:!1,...h};this.hd=this.Vg._y([Wd.UserSeries],o).Ug(this.zg).Hr(this.zc).wy(this.jy).vs(this.getHighlight()),this.ne(this.hd)}setPointStyle(t){return this.jy="function"==typeof t?t(this.jy):t,this.Hy(),this.hd.wy(this.jy),this.Vg.fe(),this}getPointStyle(){return this.jy}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.zc,s=Math.abs(i.getThickness()),e=this.jy,r=e.getSize();s>("object"==typeof r?Math.max(r.x,r.y,r.z):r)&&(this.jy=e.setSize(s)),this.Hy();const n=this.jy;return this.hd.wy(n),this.Vg.fe(),this}Me(){return In(this.zc.getFillStyle(),this.hd.ls())||In(this.jy.getFillStyle(),this.hd.ls())}Hy(){const t=this.jy,i=t.getSize();this.jy=t.setSize(i)}Nr(t,i){t.vs(i),this.Vg.fe()}}class of extends jd{constructor(t,i,s,e,r,n){super(t,i,s,e,r),this.Xg=!1,this._t=new Ar,((null==n?void 0:n.individualPointSizeAxisEnabled)||(null==n?void 0:n.individualPointSizeEnabled))&&this.chart.Ki.ul(jl.ga)}Qg(){return this.getPointAmount()>0}add(t){return this.Xg&&this.chart.Ki.ul(jl.Aa),this.Xg=!0,(t=Array.isArray(t)?t:[t])?(this.hd.tc(t.slice()),this.Vg.fe(),this):this}clear(){return this.hd.ws(),this}getPointAmount(){const t=this.hd;return t.oc()+t.ac()}qg(){return this.Og&&this.getPointAmount()>0&&this.getVisible()}Nr(t,i){t.vs(i),this.Vg.fe()}Vr(){return{point3D:this.Wy}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class af extends of{constructor(t,i,s,e,r,n){super(t,i,s,e,r,n),this.At="Point Series 3D";const h=void 0!==(null==n?void 0:n.automaticColorIndex)?n.automaticColorIndex:this.chart.getSeries().length;this.Wy=Bn(e.pointSeries3DPointStyle,h);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.hd=this.Vg.Zy(o).Ug(this.zg).Xy(this.Wy).vs(this.getHighlight()),this.ne(this.hd)}setPointStyle(t){this.Wy="function"==typeof t?t(this.Wy):t;const i=this.Wy;return this.hd.Xy(i),this.Vg.fe(),this}getPointStyle(){return this.Wy}Me(){return In(this.Wy.getFillStyle(),this.hd.ls())}}class lf extends of{constructor(t,i,s,e,r,n){super(t,i,s,e,r,n),this.At="Point Cloud Series 3D";const h=this.chart.getSeries().length;this.Wy=Bn(e.pointCloudSeries3DPointStyle,h);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.hd=this.Vg.Zy(o).Xy(this.Wy).vs(this.getHighlight()),this.ne(this.hd)}setPointStyle(t){this.Wy="function"==typeof t?t(this.Wy):t;const i=this.Wy;return this.hd.Xy(i),this.Vg.fe(),this}getPointStyle(){return this.Wy}Me(){return In(this.Wy.getFillStyle(),this.hd.ls())}}const uf={Triangulated:af,Pixelated:lf};class cf extends $d{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,a,l,u,c),this.Jy=[],this.Qy=0,this.Ky=t=>{const i=this.Jy.indexOf(t);i>=0&&(this.Jy.splice(i,1),this._t.kt("seriesdispose",{series:t}))},this.seriesBackground=new Ar,this.qy=this.Ks.Gv()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Jy.forEach((i=>i.setAnimationHighlight(t))),this}tp(t,i){this.qy.he([i]),this.seriesBackground.Ms(t)}setSeriesBackgroundFillStyle(t){return this.ip.Er(t),this.Ki.fe(),this}getSeriesBackgroundFillStyle(){return this.ip.Qn()}setSeriesBackgroundStrokeStyle(t){return this.sp.Dr(t),this.Ki.fe(),this}getSeriesBackgroundStrokeStyle(){return this.sp.Il()}setSeriesBackgroundEffect(t){return this.qy.de(t),this.Ki.fe(),this}getSeriesBackgroundEffect(){return this.qy.ve()}ep(t,i){this.Jy.push(t),void 0!==this.rp&&t.setHighlightOnHover(this.rp),this._t.kt("seriesadd",{series:t}),this.ge.forEach((s=>{s.KA()&&null!==(null==i?void 0:i.legend)&&s.tc(t,null==i?void 0:i.legend)}))}tg(){return this.Jy}setSeriesHighlightOnHover(t){return this.rp=t,this.Jy.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Jy.slice().forEach(Gr),super.dispose()}}const df=ih.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class ff{constructor(t,i,s,e){this.np=!0,this.hp=!0,this.op=2*-Math.PI/2160,this.ap=2*Math.PI/2160,this.lp=.1,this.up=1*Math.PI/180,this.cp=t,this.dp=i,this.fp=s,this.Py=e}getDefaultCameraConfiguration(t,i){const s={direction:df,location:ih.multiply(df,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.vp(s,t):"wheel-zoom"===t.type?s=this.Ap(s,t):"rotate+zoom"===t.type?s=this.gp(s,t):"fixed-rotate"===t.type?s=this.yp(s,t):"move"===t.type&&(s=this.pp(s,t))})),this.np?s=this.mp(t.boundingBox,s):this.hp&&(s=this.Sp(t.boundingBox,t.projection,s)),s}vp(t,i){const{rotation:s}=i,e=t.location,r=ih.multiply(ih.normalize(t.location),-1),{Right:n,Up:h}=this.bp(r);let o=e;const a=this.xp(r),l=s.x*this.op*a;o=ih.rotateAroundAxis(o,h,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.ap,a-this.up);return 0!==u&&(o=ih.rotateAroundAxis(o,n,u)),{location:o,direction:ih.multiply(ih.normalize(o),-1)}}Ap(t,i){const{deltaY:s}=i;this.np&&this.Mp(!1);const e=t.location,r=ih.multiply(ih.normalize(e),-1),n=s*this.lp,h=ih.length(e)*-n;return{direction:r,location:ih.addVec(e,ih.multiply(r,h))}}gp(t,i){const{rotation:s,cameraDistance:e}=i;this.np&&this.Mp(!1);let r=this.vp(t,{type:"rotate",rotation:s});const n=r.location,h=ih.multiply(ih.normalize(n),-1),o=ih.multiply(h,-e);return r={direction:ih.multiply(ih.normalize(o),-1),location:o},r}yp(t,i){this.np&&this.Mp(!1);const{rotation:s}=i,e=t.location,r=t.direction,{Right:n,Up:h}=this.bp(r),o=s.x*this.op;let a=ih.normalize(ih.rotateAroundAxis(r,h,o));const l=s.y*this.ap;return a=ih.normalize(ih.rotateAroundAxis(a,n,l)),{location:e,direction:a}}pp(t,i){this.np&&this.Mp(!1),this.hp=!1;const{amountRight:s,amountForward:e}=i,r=t.location,n=t.direction,{Right:h}=this.bp(n);return{location:ih.addVec(r,ih.multiply(n,.01*e),ih.multiply(h,.01*s)),direction:n}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:ih.multiply(ih.normalize(t.cameraLocation),-1)};return this.np?this.mp(t.boundingBox,i):this.Sp(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:ih.multiply(ih.normalize(t.cameraLocation),-1)};return this.np?this.mp(t.boundingBox,i):this.Sp(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:ih.multiply(ih.normalize(t.cameraLocation),-1)};if(this.np)return this.mp(t.boundingBox,i)}mp(t,i,s){let e=i;s=void 0!==s?s:0,e=this.wp(t,e,100,20,1,s,5);const r=this.xp(e.direction);return e=this._p(e,this.kp(t,e,100,1),r),e}wp(t,i,s,e,r,n,h){return vf(n,h,(t=>({direction:i.direction,location:ih.multiply(i.direction,-t)})),(i=>this.Cp(t,i)),s,r,"linear",e)}kp(t,i,s,e){const{Right:r,Left:n,Up:h,Down:o}=this.bp(i.direction),a=this.Tp(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Af(0,c,(t=>({location:l.location,direction:ih.normalize(ih.lerp(l.direction,o,t))})),(i=>this.Fp(t,i)),0,u,!0,s):Af(0,c,(t=>({location:l.location,direction:ih.normalize(ih.lerp(l.direction,h,t))})),(i=>this.Fp(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Af(0,c,(t=>({location:l.location,direction:ih.normalize(ih.lerp(l.direction,n,t))})),(i=>this.Ip(t,i)),0,u,!0,s):Af(0,c,(t=>({location:l.location,direction:ih.normalize(ih.lerp(l.direction,r,t))})),(i=>this.Ip(t,i)),0,u,!0,s)),l}Cp(t,i){const s=this.Tp(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}Ip(t,i){const s=this.Tp(t,!1,i);return Math.abs(s.left-s.right)}Fp(t,i){const s=this.Tp(t,!1,i);return Math.abs(s.top-s.bottom)}Tp(t,i,s){const e=mh(this.Lp(t,i,s).map((t=>Je(t,this.cp,this.dp))));return{left:e.min.x,right:this.dp.x.getInnerEnd()-e.max.x,top:this.dp.y.getInnerEnd()-e.max.y,bottom:e.min.y}}Lp(t,i,s){const e=this.fp,r=h(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),n=h(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),o=[],a=i?16:4,l=(r.x+n.x)/2,u=(r.z+n.z)/2,c=Math.sqrt(2)*(n.x-l),d=Math.sqrt(2)*(n.z-u);return[r.y,n.y].forEach((t=>{for(let i=0;i<a;i+=1){const s=Math.PI/4+2*Math.PI*i/a,e=l+Math.cos(s)*c,r=u+Math.sin(s)*d;o.push({x:e,y:t,z:r})}})),o.map((t=>this.Py(t,s))).filter((t=>void 0!==t))}Sp(t,i,s){const e=ih.length(s.location),r=this.Pp(t,i);return e<r.min?{direction:s.direction,location:ih.multiply(s.direction,-r.min)}:e>r.max?{direction:s.direction,location:ih.multiply(s.direction,-r.max)}:s}Pp(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}bp(t){const i=h(0,1,0),s=ih.normalize(ih.cross(i,ih.multiply(t,-1)));let e=ih.cross(s,t);return e.y=Math.abs(e.y),e=ih.normalize(e),{Right:s,Up:e,Down:ih.multiply(e,-1),Left:ih.multiply(s,-1)}}xp(t){const i={x:0,y:1,z:0},s=ih.angle(t,i),e=ih.angle(t,ih.multiply(i,-1));return Math.min(s,e)}_p(t,i,s){return{location:ih.lerp(t.location,i.location,s),direction:ih.normalize(ih.lerp(t.direction,i.direction,s))}}Mp(t){return this.np=t,this}Bp(){return this.np}}const vf=(t,i,s,e,r,n,h,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-r)<=n)break;const c=a.score>r;c&&"linear"===h||!c&&"reversed"===h?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Af=(t,i,s,e,r,n,h,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-r)<Math.abs(a.score-r)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-r)<=n)break}else if(h)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class gf extends jd{constructor(t,i,s,e,r,n){super(t,i,s,r,n),this.At="Surface Grid Series 3D",this.Dp={},this.Xg=!1,this._t=new Ar,this.Eg=Wo;const h=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Lr=Bn(this.rs.surfaceGridSeries3DFillStyle,h),this.Ep=Bn(this.rs.surfaceGridSeries3DWireframeStyle,h);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.fl=o,this.hd=this.Vg.Op(o).Er(this.Lr).Rp(this.Ep).$g(this.Eg).vs(this.getHighlight()),this.ne(this.hd),this.setHighlightOnHover(!1)}Qg(){return this.Xg}Es(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Rv,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:yo(this.Lr)?this.Lr.lut:void 0}}Vr(){return{fill:this.Lr}}zp(){const t=this.Dp.start||{x:0,z:0};let i;i=this.Dp.end?{x:(this.Dp.end.x-t.x)/this.fl.columns,z:(this.Dp.end.z-t.z)/this.fl.rows}:this.Dp.step?this.Dp.step:{x:1,z:1},this.hd.Vp(t,i),this.chart.Ki.fe()}setStart(t){return this.Dp.start=t,this.zp(),this}getStart(){return this.hd.Np().start}setStep(t){return this.Dp.step=t,this.zp(),this}getStep(){return this.hd.Np().step}setEnd(t){return this.Dp.end=t,this.zp(),this}getEnd(){return this.hd.Np().end}setContours(t){return this.hd.Gp(t?{valueSource:t.valueSource,levels:t.levels.map((t=>{var i,s;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.rs.surfaceGridSeriesContourStrokeStyle)&&void 0!==s?s:new oa({thickness:1,fillStyle:new uo({color:me(255,0,0)})})}}))}:void 0),this.Vg.fe(),this}getContours(){return this.hd.$p()}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.hd.Er(this.Lr),this.Vg.fe(),this}getFillStyle(){return this.Lr}setWireframeStyle(t){return this.Ep="function"==typeof t?t(this.Ep):t,this.hd.Rp(this.Ep),this.Vg.fe(),this}getWireframeStyle(){return this.hd.jp()}setIntensityInterpolation(t){return t=t||"disabled",this.hd.Yp(t),this.Vg.fe(),this}getIntensityInterpolation(){return this.hd.Hp()}invalidateIntensityValues(t){if(this.Xg&&this.chart.Ki.ul(jl.Aa),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.fl.dataOrder?t.length:t[0].length,rows:"rows"===this.fl.dataOrder?t.length:t[0].length},s="columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows,e="columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns;if(i.x>s||i.y>e){if(!0===this.chart.ug.vl){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.fl.columns}x${this.fl.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);t=r}this.hd.Wp({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.fl.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.fl.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.fl.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let r="columns"===this.fl.dataOrder?t.iRow:t.iColumn;const n=r+i.secondary-1,h=("columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows)-1,o=("columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns)-1;if(s<0||r<0||e>h||n>o){if(!0===this.chart.ug.vl){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.fl.columns}x${this.fl.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-r,0),u=Math.max(e-h,0),c=Math.max(n-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),r=Math.max(r,0)}this.hd.Wp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.Vg.fe(),this.Xg=!0,this}invalidateHeightMap(t){if(this.Xg&&this.chart.Ki.ul(jl.Aa),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.fl.dataOrder?t.length:t[0].length,rows:"rows"===this.fl.dataOrder?t.length:t[0].length},s="columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows,e="columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns;if(i.x>s||i.y>e){if(!0===this.chart.ug.vl){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.fl.columns}x${this.fl.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);t=r}this.hd.Xp({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.fl.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.fl.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.fl.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let r="columns"===this.fl.dataOrder?t.iRow:t.iColumn;const n=r+i.secondary-1,h=("columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows)-1,o=("columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns)-1;if(s<0||r<0||e>h||n>o){if(!0===this.chart.ug.vl){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.fl.columns}x${this.fl.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-r,0),u=Math.max(e-h,0),c=Math.max(n-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),r=Math.max(r,0)}this.hd.Xp({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.Vg.fe(),this.Xg=!0,this}setCullMode(t){return this.hd.Zp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.hd.Jp()}Me(){return In(this.Lr,this.hd.ls())}jg(){}Or(){}Yg(){}qg(){return this.Og&&this.getVisible()}Nr(t,i){t.vs(i),this.Vg.fe()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class yf extends jd{constructor(t,i,s,e,r,n){super(t,i,s,r,n),this.At="Surface Grid Series 3D",this.Xg=!1,this.Dp={},this._t=new Ar,this.chart.Ki.ul(jl.Aa),this.Eg=Wo;const h=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Lr=Bn(this.rs.surfaceScrollingGridSeries3DFillStyle,h),this.Ep=Bn(this.rs.surfaceScrollingGridSeries3DWireframeStyle,h);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.fl=o,this.hd=this.Vg.Qp(o).Er(this.Lr).Rp(this.Ep).$g(this.Eg).vs(this.getHighlight()),this.ne(this.hd),this.setHighlightOnHover(!1)}Qg(){return this.Xg}Es(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Rv,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:yo(this.Lr)?this.Lr.lut:void 0}}zp(){const t=this.Dp.start||{x:0,z:0};let i;i=this.Dp.step?this.Dp.step:{x:1,z:1},this.hd.Vp(t,i),this.chart.Ki.fe()}setStart(t){return this.Dp.start=t,this.zp(),this}getStart(){return this.hd.Np().start}setStep(t){return this.Dp.step=t,this.zp(),this}getStep(){return this.hd.Np().step}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.hd.Er(this.Lr),this.Vg.fe(),this}getFillStyle(){return this.Lr}setWireframeStyle(t){return this.Ep="function"==typeof t?t(this.Ep):t,this.hd.Rp(this.Ep),this.Vg.fe(),this}getWireframeStyle(){return this.hd.jp()}setIntensityInterpolation(t){return t=t||"disabled",this.hd.Yp(t),this.Vg.fe(),this}getIntensityInterpolation(){return this.hd.Hp()}clear(){return this.hd.ws(),this.Vg.fe(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),this.Xg=!0,i){const t=i[0].length,s=0+t-1,e="columns"===this.fl.scrollDimension?this.fl.rows:this.fl.columns;if(s>e-1){if(!0===this.chart.ug.vl){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.fl.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.fl.scrollDimension?this.fl.rows:this.fl.columns;if(i>e-1){if(!0===this.chart.ug.vl){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.fl.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.ug.vl){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Or.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,r=i?i[0].length:null==s?void 0:s[0].length;return this.hd.Kp({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:r,heightMapValues:i,intensityValues:s}),this.Vg.fe(),this}invalidateValues(t){return this.hd.Wp(t),this.chart.Ki.fe(),this}getSampleCount(){return this.hd.qp()}setCullMode(t){return this.hd.Zp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.hd.Jp()}Me(){return In(this.Lr,this.hd.ls())}jg(){}Or(){}Yg(){}qg(){return this.Og&&this.getVisible()}Nr(t,i){t.vs(i),this.Vg.fe()}Vr(){return{fill:this.Lr}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const pf=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof Rf),mf=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),Sf=(t,i=/\s+/g)=>Array.from(t.split(i).map(parseFloat)),bf=t=>{if(t.length<=3)return t;const i=new Array;for(let s=1;s<t.length-1;s+=1)i.push(t[0]),i.push(t[s]),i.push(t[s+1]);return i},xf=t=>{const i=t.split(/\s+/g);let s=[],e=[],r=[];for(const t of i){const i=Sf(t.trim(),"/");s.push(i[0]),i.length>1&&!Number.isNaN(i[1])&&r.push(i[1]),i.length>2&&!Number.isNaN(i[2])&&e.push(i[2])}return s=bf(s),r=bf(r),e=bf(e),{vertexIndex:s,textureIndex:r||void 0,normalIndex:e||void 0}},Mf={id:"",ambient:me(0,0,0,0),diffuse:me(254,204,0),emissive:me(0,0,0,0),specular:me(255,255,255),specularCoeff:1,opacity:1};class wf extends jd{constructor(t,i,s,e,r,n){super(t,i,s,e,n),this.At="Mesh Model 3D",this.tm=new Float32Array,this.im=new Float32Array,this.sm=new Uint16Array,this.ji={x:1,y:1,z:1},this.rm={x:0,y:0,z:0},this.nm={x:0,y:0,z:0},this.hm={x:0,y:0,z:0},this.om={w:1,x:0,y:0,z:0},this.am={x:0,y:0,z:0},this.lm=new Array,this.um=[],this.zu=nh,this._t=new Ar;const h=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.hd=this.Vg.dm().Ug(this.zg).Er(Bn(this.rs.meshModel3DFillStyle||this.rs.pointSeriesFillStyle,h)).vs(this.getHighlight()),this.ne(this.hd)}Qg(){return this.tm.length>0}Es(t,i,s){const e=this.getFillStyle();return Zn({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:yo(e)?e.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const s=this.hd.fm(t,i);if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Rv,axisLocation:s.coordAxis},...s.coordAxis,index:s.index,value:s.value,coordAxis:s.coordAxis,coordModel:s.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:yo(e)?e.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let r=eh,n=sh,h=eh,o=sh,a=eh,l=sh;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];r=Math.max(r,i),n=Math.min(n,i),h=Math.max(h,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.zu={min:{x:n,y:o,z:l},max:{x:r,y:h,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.zu.min.x,s[t+1]-=this.zu.min.y,s[t+2]-=this.zu.min.z;this.am={x:this.zu.max.x-this.zu.min.x,y:this.zu.max.y-this.zu.min.y,z:this.zu.max.z-this.zu.min.z},this.tm=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(Wo);const u=new Array,c={indexStart:0,count:i.length,useIndexBuffer:!0,offset:0,material:{id:Mf.id,diffuse:Mf.diffuse,specular:Mf.specular,ambient:Mf.ambient,emissive:Mf.emissive,specularCoeff:Mf.specularCoeff,opacity:1}};return u.push(c),this.um=u,this.hd.vm({vertices:this.tm,normals:this.checkedNormals,indices:i instanceof Uint32Array||i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.am,parts:this.um}),this.chart.Ki.fe(),this}Am(t){if(!t)return this;this.lm=[];let i={id:Mf.id,diffuse:Mf.diffuse,specular:Mf.specular,ambient:Mf.ambient,emissive:Mf.emissive,specularCoeff:Mf.specularCoeff,opacity:1};const s=t.split("\n");for(let t of s){if(t=t.trim(),""===t||t.startsWith("#"))continue;const s=t.split(/\s+/g);switch(s[0].trim().toLowerCase()){case"ka":{const s=Sf(t.substring(2).trim()).map((t=>255*t));i.ambient=me(s[0],s[1],s[2])}break;case"ke":{const s=Sf(t.substring(2).trim()).map((t=>255*t));i.emissive=me(s[0],s[1],s[2])}break;case"kd":{const s=Sf(t.substring(2).trim()).map((t=>255*t));i.diffuse=me(s[0],s[1],s[2])}break;case"ks":{const s=Sf(t.substring(2).trim()).map((t=>255*t));i.specular=me(s[0],s[1],s[2])}break;case"d":i.opacity=parseFloat(s[1].trim());break;case"tr":i.opacity=1-parseFloat(s[1].trim());break;case"newmtl":i.diffuse=me(255*i.diffuse.r,255*i.diffuse.g,255*i.diffuse.b,255*i.opacity),i.specular=me(255*i.specular.r,255*i.specular.g,255*i.specular.b,255*i.opacity),i.emissive=me(255*i.emissive.r,255*i.emissive.g,255*i.emissive.b,255*i.opacity),i={id:s[1],diffuse:Mf.diffuse,specular:Mf.specular,ambient:Mf.ambient,emissive:Mf.emissive,specularCoeff:Mf.specularCoeff,opacity:Mf.opacity},this.lm.push(i)}}return this}setModelMaterial(t){return t?(this.Am(t),this.setFillStyle(ho),this.um?(this.um.forEach((t=>{const i=this.lm.find((i=>i.id.toLowerCase()===t.material.id.toLowerCase()));i&&(t.material=i)})),this.um.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.chart.Ki.fe(),this):this):this}setModelFromObj(t){if(!t)return this;const i=new Array,s=new Array,e=new Array,r=new Array,n=new Array,h=new Array,o=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:Mf.id,diffuse:Mf.diffuse,specular:Mf.specular,ambient:Mf.ambient,emissive:Mf.emissive,specularCoeff:Mf.specularCoeff,opacity:Mf.opacity}},l=0,u=0,c=0,d=0,f=0,v=0,A=0,g=eh,y=sh,p=eh,m=sh,S=eh,b=sh;const x=t.replace(/\r/g,"").split("\n");for(let t of x){if(t=t.trim(),""===t||t.startsWith("#"))continue;const x=t.split(/\s+/g);let M=0;switch(x[0].trim().toLowerCase()){case"v":{const s=Sf(t.substring(1).trim()),e=s[0],r=s[1],n=s[2];g=Math.max(g,e),y=Math.min(y,e),p=Math.max(p,r),m=Math.min(m,r),S=Math.max(S,n),b=Math.min(b,n),i.push(...s.slice(0,3)),l+=1,d=l}break;case"vt":{const i=Sf(t.substring(2).trim());s.push(...i),u+=1,f=u}break;case"vn":{const i=Sf(t.substring(2).trim());e.push(...i),c+=1,v=c}break;case"usemtl":{const t=this.lm.find((t=>t.id.toLowerCase()===x[1].toLowerCase()));A+=o.length>0?a.count:0,a={indexStart:void 0!==a?3*A*2:0,count:0,offset:void 0!==a?1*A:0,useIndexBuffer:!1,material:t||{id:x[1].toLowerCase(),diffuse:Mf.diffuse,specular:Mf.specular,ambient:Mf.ambient,emissive:Mf.emissive,specularCoeff:1,opacity:1}},o.push(a)}break;case"fo":M+=1;case"f":M+=1;{const o=xf(t.substring(M).trim());for(let t=0;t<o.vertexIndex.length;t+=1){let s=o.vertexIndex[t];s<0?s+=d:s-=1,s*=3,r.push(i[s]),r.push(i[s+1]),r.push(i[s+2])}if(a.count+=o.vertexIndex.length,o.textureIndex)for(let t=0;t<o.textureIndex.length;t+=1){let i=o.textureIndex[t];i<0?i+=f:i-=1,i*=3,h.push(s[i]),h.push(s[i+1]),h.push(s[i+2])}if(o.normalIndex)for(let t=0;t<o.normalIndex.length;t+=1){let i=o.normalIndex[t];i<0?i+=v:i-=1,i*=3,n.push(e[i]),n.push(e[i+1]),n.push(e[i+2])}}}}this.zu={min:{x:y,y:m,z:b},max:{x:g,y:p,z:S}};for(let t=0;t<r.length;t+=3)r[t]-=this.zu.min.x,r[t+1]-=this.zu.min.y,r[t+2]-=this.zu.min.z;if(this.am={x:this.zu.max.x-this.zu.min.x,y:this.zu.max.y-this.zu.min.y,z:this.zu.max.z-this.zu.min.z},o.length<1&&r.length>0&&(a.count=r.length/3,o.push(a)),this.um=o,this.tm=new Float32Array(r),n.length<1)for(let t=0;t<r.length/9;t+=1){const i={x:r[9*t],y:r[9*t+1],z:r[9*t+2]},s={x:r[9*t+3],y:r[9*t+4],z:r[9*t+5]},e={x:r[9*t+6],y:r[9*t+7],z:r[9*t+8]},h=ih.normalize(ih.cross(ih.subtractVec(i,s),ih.subtractVec(i,e)));for(let t=0;t<3;t+=1)n.push(h.x),n.push(h.y),n.push(h.z)}return this.im=new Float32Array(n.map(((t,i)=>n[i]))),this.checkedNormals=new Float32Array,this.lm&&this.um.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.hd.vm({vertices:this.tm,normals:this.im,indices:this.sm,modelSize:this.am,parts:this.um}),this.chart.Ki.fe(),this}setVertexValues(t){return this.hd.gm(t),this.chart.Ki.fe(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ji=i,this.hd.ym(i),this.chart.Ki.fe(),this}getScale(){return this.ji}setModelLocation(t){return this.nm=t,this.hd.pm(t),this.chart.Ki.fe(),this}getModelLocation(){return this.nm}setModelAlignment(t){return this.rm=t,this.hd.Sm(t),this.chart.Ki.fe(),this}getModelAlignment(){return this.rm}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.hm}setModelRotationEuler(t){const i={x:zh(t.x),y:zh(t.y),z:zh(t.z)};return this.hm=i,this.hd.bm(this.hm),this.chart.Ki.fe(),this}getModelRotationEuler(){return this.hm}setModelRotationQuaternion(t){return this.om=t,this.hd.xm(this.om),this.chart.Ki.fe(),this}getModelRotationQuaternion(){return this.om}setBackfaceCullingMode(t){return this.hd.Mm(t),this.chart.Ki.fe(),this}getBackfaceCullingMode(){return this.hd.wm()}setFillStyle(t){return this.hd.Er(t),this.chart.Ki.fe(),this}getFillStyle(){return this.hd.Qn()}setColorShadingStyle(t){return this.checkedNormals||t!==Zo?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Jo.Simple))}qg(){return!1}Nr(t,i){t.vs(i),this.chart.Ki.fe()}Me(){return In(this.getFillStyle(),this.hd.ls())}Vr(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const _f={None:Kl,Rectangle:qu,Circle:tc,Diamond:ic,Pointer:sc};class kf extends uc{constructor(i,s,e,r,n,h){super(i,s,e,r,n,h),this.Do=this.rs.cursorResultTableTextFont,this.Uf=0,this.hy=this.rs.cursorResultTableTextFillStyle,this._o=100,this.In=t.TextObjectIdentifier.CursorResultTable}setContent(t){var i;let s;void 0===t?s=[]:Array.isArray(t)?(s=[],t.forEach((t=>{s.push(Array.isArray(t)?t:[t])}))):s=[[t]];for(let t=0;t<s.length;t+=1){const i=s[t];let e=!1;for(let t=0;t<i.length;t+=1){const s=i[t],r="object"==typeof s&&"text"in s?s.text:"string"==typeof s?s:void 0,n="object"==typeof s&&"icon"in s?s.icon:Aa(s)?s:void 0,h=s instanceof Bo&&s;if(!(r&&r.length>0||n||h)){e=!0;break}}e||(i.unshift(""),i.push(""))}const e=s.length;let r=this.getMembers().length;for(let t=0;t<Math.max(e,r);t+=1){const h=this.getRow(t,!0);if(t>=e)this.getMembers()[t].dispose(),t-=1,r-=1;else{const r=s[t].length;let o=h.getMembers().length;for(let a=0;a<Math.max(r,o);a+=1){const l=s[t][a],u="object"==typeof l&&"font"in l?l.font:void 0,c="object"==typeof l&&"fillStyle"in l?l.fillStyle:void 0,d="object"==typeof l&&"text"in l?l.text:"string"==typeof l?l:void 0,f="object"==typeof l&&"icon"in l?l.icon:Aa(l)?l:void 0,v=l instanceof Bo&&l||("object"==typeof l&&"component"in l?l.component:void 0),A="object"==typeof l&&"componentColor"in l&&l.componentColor,g="object"==typeof l&&"componentFillStyle"in l&&l.componentFillStyle,y="object"==typeof l&&"rowFillStyle"in l?l.rowFillStyle:void 0,p=h.getMembers();if(a>=r)h.getMembers()[a].dispose(),a-=1,o-=1;else if(void 0!==d&&d.length>0||f||v){const s=u?this.Do.withMutations((t=>{for(const i of Object.keys(u)){const s=u[i];void 0!==s&&t.set(i,s)}return t})):this.Do,r=c||this.hy,o=p[a];if(d){let t;o&&o instanceof Qu?t=o:(o&&o.dispose(),t=h.addElement(Ku,a)),t.setText(d).setFont(s).setFillStyle(r).setTextRotation(this.Uf)}else if(f){let t;o&&o instanceof ec?t=o:(o&&o.dispose(),t=h.addElement(rc,a)),t.setFillStyle(r).setShape(f).setSize({y:s.size,x:s.size}),t.setMargin(null!==(i=this.rs.uiTextPadding)&&void 0!==i?i:5)}else if(v){let t;o&&"setTextFillStyleHidden"in(n=o)&&"setText"in n?t=o:(o&&o.dispose(),t=h.addElement(Mc.setBackground(_f.None),a).setOn(!0));const i=v.we();void 0!==i&&t.setButtonShape(i),t.setText(v.getName()).setTextFont(s).setTextFillStyle(r).setTextRotation(this.Uf),A?t.setButtonOnFillStyle(new uo({color:A})):g?t.setButtonOnFillStyle(g):t.setButtonOnFillStyle(Fn(v.chart.getTheme(),!1,v.Vr()))}y&&h.setBackground((i=>{i.setFillStyle(y);const s=this.getBackground();Eo(s)&&i instanceof qu&&i.setCornerRadius(s.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===e-1,bottomRight:t===e-1})}))}else{const t=p[a];t&&t instanceof nc||(t&&t.dispose(),h.addGap(void 0,a))}}}}var n;return this.ke.fe(),this}Or(){if(super.Or(),this.ke.Ki.Kc&&this.getVisible()){const i=Gl(this);this.ke.Ki.Kc.aA({...i,blacklist:[t.TextObjectIdentifier.CursorResultTable]})}return this}setTextFillStyle(t){this.hy="function"==typeof t?t(this.hy):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Qu&&s.setFillStyle(this.hy)}}return this.ke.fe(),this}getTextFillStyle(){return this.hy}setTextFont(t){return Fe(t)?this.Do=t:this.Do=t(this.Do),this.ke.fe(),this}getTextFont(){return this.Do}setTextRotation(t){return this.Uf=t,this.ke.fe(),this}getTextRotation(){return this.Uf}_m(){for(let t=0;t<this.kf.length;t+=1)for(let i=0;i<this.kf[t].getMembers().length;i+=1)this.kf[t].getMembers()[i].dispose()}Sh(){for(let t=0;t<this.kf.length;t+=1)this.kf[t].setMinimumSize(void 0);super.Sh();for(let t=0;t<this.kf.length;t+=1)this.kf[t].setMinimumSize(this.size.x);return super.Sh(),this}}class Cf{constructor(t,i,s,e,r,n){this.km=[],this.Cm=!0,this.Tm=!0,this.ng=!1,this.Xi=!0,this.Wi=!1,this.Fm=[],this.Im=!0,this._t=new Ar,this.ke=t,this.renderingScale=i,this.scale=s,this.Lm=e,this.Pm=r,this.rs=n,this.Bm=new kf(this.ke,this.renderingScale,this.scale,this.Pm,$r,n).setPointerEvents(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.Dm=new Ff((t=>this.Bm.setOrigin(t)),(()=>this.Bm.getOrigin())),this.Em=new Ff((t=>this.Bm.setPosition(t)),(()=>this.Bm.getPosition()))}isDisposed(){return this.Wi}setPointMarkerVisible(t){return this.Cm=t,this.km.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.ke.fe(),this}getPointMarkerVisible(){return this.Cm}setPointMarker(t){return this.km.forEach((i=>t(i.pointMarker))),this.Fm.push(t),this.ke.fe(),this}setResultTableVisible(t){return this.Tm=t,this.ke.fe(),this}getResultTableVisible(){return this.Tm}setResultTable(t){return t(this.Bm),this.ke.fe(),this}setAutoFit(t){return this.Im=t,this.Dm.resetValue(),this.Em.resetValue(),this.ke.fe(),this}getAutoFit(){return this.Im}setVisible(t){return this.Xi=t,this.ke.fe(),this}getVisible(){return this.Xi}dispose(){return this.km.forEach((t=>t.pointMarker.dispose())),this.Bm.dispose(),this.Fm.length=0,this.Lm(this),this._t.kt("dispose",{}),this}Rm(){const i=this.Bm,s=this.ke.Ki.ji,r=Je(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),n=Je(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s),h=r.x<s.x.getInnerStart()||n.x>s.x.getInnerEnd(),o=r.y<s.y.getInnerStart()||n.y>s.y.getInnerEnd();return{x:h,y:o,either:h||o,resultTableViewport:this.Bm.ke.Ki.ji,resultTableViewportBounds:{x:{min:Math.min(s.x.getInnerStart(),s.x.getInnerEnd()),max:Math.max(s.x.getInnerStart(),s.x.getInnerEnd())},y:{min:Math.min(s.y.getInnerStart(),s.y.getInnerEnd()),max:Math.max(s.y.getInnerStart(),s.y.getInnerEnd())}}}}Or(){if(this.Xi){(this.Dm.isAltered()||this.Em.isAltered())&&(this.Dm.resetValue(),this.Em.resetValue(),this.Bm.Sh());let i=this.Im&&this.Rm();if(i&&i.either){const s=i.resultTableViewport;let r=Je(this.Bm.getPosition(e(-1,-1),t.UISpace.PaddedBackground),this.Bm.scale,s),n=Je(this.Bm.getPosition(e(1,1),t.UISpace.PaddedBackground),this.Bm.scale,s);const h=i.resultTableViewportBounds,o=this.Bm.getOrigin();let a={x:0,y:0},l={...o};if(n.y>h.y.max?a.y=h.y.max-n.y:r.y<h.y.min&&(a.y=h.y.min-r.y),(n.x>h.x.max||r.x<h.x.min)&&(l.x*=-1),0!==a.x||0!==a.y||l.x!==o.x||l.y!==o.y){const o=this.Bm.getPosition(),u=Je(o,this.Bm.scale,s);let c={x:u.x+a.x,y:u.y+a.y},d=Je(c,s,this.Bm.scale);this.Em.alter(d),this.Dm.alter(l),this.Bm.Sh(),i=this.Rm(),i.x&&(r=Je(this.Bm.getPosition(e(-1,-1),t.UISpace.PaddedBackground),this.Bm.scale,s),n=Je(this.Bm.getPosition(e(1,1),t.UISpace.PaddedBackground),this.Bm.scale,s),n.x>h.x.max?a.x=h.x.max-n.x:r.x<h.x.min&&(a.x=h.x.min-r.x),c={x:u.x+a.x,y:u.y+a.y},d=Je(c,s,this.Bm.scale),this.Em.alter(d),this.Bm.Sh())}}}return this.km.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.ng&&this.Xi&&this.Cm))),this.km.forEach((t=>t.pointMarker.Or())),this.Bm.Or(),this}Sh(){return this.Bm.setVisible(this.ng&&this.Xi&&this.Tm),this.km.forEach((t=>t.pointMarker.Sh())),this.Bm.Sh(),this}Om(t,i){const s=i===this.scale?t:Je(t,i,this.scale);this.Bm.setPosition(s)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Tf=(t,i)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(e(-1,-1)).setMargin(.5*i.cursorPointMarkerSize.x+2).setBackground((t=>{i.cursorResultTableBorderRadius&&Eo(t)&&t.setCornerRadius(i.cursorResultTableBorderRadius)}))));class Ff{constructor(t,i){this.zm=t,this.Vm=i}alter(t){this.Nm=void 0!==this.Nm?this.Nm:this.Vm(),this.Gm=t,this.zm(t)}resetValue(){void 0!==this.Gm&&(void 0!==this.Nm&&this.isAltered()&&this.zm(this.Nm),this.Nm=void 0,this.Gm=void 0)}getNormalValue(){return void 0!==this.Nm?this.Nm:this.Vm()}isAltered(){return void 0!==this.Gm&&this.Vm()===this.Gm}}class If extends Cf{constructor(i,s,e,r,n,h,o){super(i,s,e,r,n,h),this.chart=o,this.$m=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleX).setTickStyle(h.cursor3DTickStrokeStyleX).setTextFillStyle(h.cursor3DTickLabelFillStyleX).setTextFont(h.cursor3DTickLabelFontX).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(h.cursor3DTickLabelPaddingX),this.Um=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleY).setTickStyle(h.cursor3DTickStrokeStyleY).setTextFillStyle(h.cursor3DTickLabelFillStyleY).setTextFont(h.cursor3DTickLabelFontY).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(h.cursor3DTickLabelPaddingY),this.jm=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(h.cursor3DGridStrokeStyleZ).setTickStyle(h.cursor3DTickStrokeStyleZ).setTextFillStyle(h.cursor3DTickLabelFillStyleZ).setTextFont(h.cursor3DTickLabelFontZ).setBackgroundFillStyle(h.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(h.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(h.cursor3DTickLabelPaddingZ),this.$m.In=t.TextObjectIdentifier.CursorTickMarker,this.Um.In=t.TextObjectIdentifier.CursorTickMarker,this.jm.In=t.TextObjectIdentifier.CursorTickMarker}setTickX(t){return t(this.$m),this.chart.Ki.fe(),this}setTickY(t){return t(this.Um),this.chart.Ki.fe(),this}setTickZ(t){return t(this.jm),this.chart.Ki.fe(),this}setTicks(t){return t(this.$m),t(this.Um),t(this.jm),this.chart.Ki.fe(),this}dispose(){return super.dispose(),this.$m.dispose(),this.Um.dispose(),this.jm.dispose(),this}Or(){return this.$m.setVisible(this.Xi&&this.ng),this.Um.setVisible(this.Xi&&this.ng),this.jm.setVisible(this.Xi&&this.ng),super.Or()}setPosition(...t){if(0===t.length)return this;const i=t[0];this.ng=!0;const s=this.renderingScale,e=kd(i.resultTableScale,s),r=e===this.scale?i.resultTable:Je(i.resultTable,e,this.scale);this.Bm.setPosition(r),this.$m.setValue(i.axisLocation.x),this.Um.setValue(i.axisLocation.y),this.jm.setValue(i.axisLocation.z);let n=this.km[0];if(!n){const t=new ec(this.ke,this.renderingScale,this.scale,$r,this.rs).setPointerEvents(!1).setFillStyle(this.rs.cursorPointMarkerFillStyle).setStrokeStyle(this.rs.cursorPointMarkerStrokeStyle).setSize(this.rs.cursorPointMarkerSize).setShape(this.rs.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.km.push(n),this.Fm.forEach((i=>i(t)))}return i.pointMarkerShape&&n.pointMarker.setShape(i.pointMarkerShape),i.pointMarkerSize&&n.pointMarker.setSize(i.pointMarkerSize),i.pointMarkerFillStyle&&n.pointMarker.setFillStyle(i.pointMarkerFillStyle),i.pointMarkerStrokeStyle&&n.pointMarker.setStrokeStyle(i.pointMarkerStrokeStyle),n.pointMarker.setPosition(r),this.chart.Ki.fe(),this}}class Lf{constructor(t,i){this.Ym=[],this.Hm=(t,i)=>(this.Ym.forEach((s=>s(t,i))),t),this.addStyler=t=>new Lf(this.Pm,this.Ym.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Lf(t,this.Ym.map((t=>t))),this.Wm=(t,i,s,e,r,n)=>this.Hm(new If(t,i,s,e,this.Pm,r,n),r),this.Pm=t,this.Ym=i}}const Pf=new Lf(qu,[(t,i)=>{Tf(t,i)}]),Bf=(t,i,s,e)=>{t.background.addEventListener(i,s,e),t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const r=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",r),()=>{t.background.removeEventListener(i,s),t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",r)}},Df=(i,s,e,r)=>{var n,h,o,a,l,u;th(),s.camera&&e.Xm(),s.x&&i.axisX.fit(null!==(n=s.animationsEnabled)&&void 0!==n?n:void 0,null!==(h=s.stopScroll)&&void 0!==h?h:void 0),s.y&&i.axisY.fit(null!==(o=s.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=s.stopScroll)&&void 0!==a?a:void 0),s.z&&i.axisZ.fit(null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(u=s.stopScroll)&&void 0!==u?u:void 0);let c=s.cursor;if(null!==c){c=null!=c?c:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(c);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const d=s.on;d&&Or.requestAnimationFrame((()=>d({event:r})))},Ef=(t,i,s,e)=>{th(),t.restorePreviousZoomState();const r=i.on;r&&Or.requestAnimationFrame((()=>r({event:e})))};class Rf extends cf{constructor(i,s,r,n,o,a,l){var u,c;super(i,s,r,s._g("chart3D bg",0),n,s.Ki.rs.chart3DBackgroundFillStyle,s.Ki.rs.chart3DBackgroundStrokeStyle,s.Ki.rs.chart3DTitleFont,s.Ki.rs.chart3DTitleFillStyle,s.Ki.rs.chart3DTitleShadow,a,null===(u=null==l?void 0:l.legend)||void 0===u?void 0:u.customLegend),this.Zm=1,this.Jm=[],this.Qm=2,this.Km=!0,this.qm=!0,this.tS=!0,this.iS=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.Ua=[],this.sS=[],this.eS=!1,this.rS=()=>{if(this.Wi)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Xv().find((t=>t.Qg()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.sS.push(t),this.sS.length>100&&this.sS.shift())},this.qa=()=>{const t=this.Vg.nS();this.oS.hS(t),this.aS.hS(t);const i=this.lS.viewportChanged(this.uS());i&&this.cS(i),this.Ki.fe()},this._t=new Ar,this.Ki.ul(jl.oa),this._n.Eh("Chart3D"),this.dS=r.d3(),this.dS.x.Rt(-1,1),this.dS.y.Rt(-1,1),this.dS.z.Rt(-1,1),this.Vg=s.fS("chart3D layer3D",0,this.dS),this.oS=s.vS("chart3D series bg",0),this.aS=s.AS("chart3D axis ui",1),this.gS={x:new Qd(this,(c=()=>this.Jy,{...tf(c,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Xh().x)),my:t=>t.x,Oy:(t,i)=>({x:t.x,y:i.y,z:i.z}),Rf:h(0,-1,0),Ly:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:h(0,i.y,i.z),gridlinePositionB:h(0,i.y,-i.z),gridlinePositionC:h(0,-i.y,-i.z)}},Vy:()=>!0,Ny:()=>!1,Ry:()=>!1}),this.dS.x,this.rs,this.Vg,this.aS,this.Rv,!1,this.Ks),y:new Qd(this,sf((()=>this.Jy)),this.dS.y,this.rs,this.Vg,this.aS,this.Rv,!1,this.Ks),z:new Qd(this,ef((()=>this.Jy)),this.dS.z,this.rs,this.Vg,this.aS,this.Rv,!1,this.Ks)},this.yS=this.Vg._y([Wd.InternalUI],void 0).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this.rs.chart3DBoundingBoxStrokeStyle),this.ip=this.oS.od(this.Ki.ji,Mu.Simple).Er(this.rs.chart3DSeriesBackgroundFillStyle).Dr(_r).setPointerEvents(!0),this.sp=this.oS.od(this.Ki.ji,Mu.Simple).Er(ho).Dr(this.rs.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.tp(this.ip,this.sp),this.pS({x:1,y:1,z:1},!0),this.lS=new ff(this.Ki.ji,this.Rv,this.dS,((t,i)=>(i&&this.cS(i),this.Vg.Py(t)))),this.mS=this.lS.getDefaultCameraConfiguration(this.SS(this.bS),this.getProjection()),this.cS(this.mS);const d=Hr(l?l.cursorBuilder:void 0,Pf),f=s.xS();this.MS=rp(this,f,d.Wm(f,this.Rv,this.Rv,$r,this.rs,this),this,"show-pointed",Of,(()=>0)),this.setAnimationsEnabled(!1!==(null==l?void 0:l.animationsEnabled)),this.addEventListener("resize",this.qa),this.qa(),this.wg(o,this.Rv),this.wS=(t=>{let i=!1,s=!1,r=!1;const n=(t=>{let i=!0,s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled();return{_S:()=>{i&&(s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled()),i=!1},Xm:()=>{t.setCameraLocation(s).setCameraAutomaticFittingEnabled(e),i=!0}}})(t);let h={};const o=()=>Er({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},h),a=e=>{const h=o();let a=!1,l=!1,u=!1;for(const t of Object.keys(h)){const i=h[t];"object"==typeof i&&(void 0!==i.ctrl&&(a=!0),void 0!==i.shift&&(l=!0),void 0!==i.alt&&(u=!0))}s=e.ctrlKey,i=e.shiftKey,r=e.altKey,("Control"===e.key&&a||"Shift"===e.key&&l||"Alt"===e.key&&u)&&e.preventDefault();const c=wo(h.restoreDefault,void 0,e,i,s,r);c&&c.code===e.code&&(un(e),Df(t,c,n,e));const d=wo(h.restorePrevious,void 0,e,i,s,r);d&&d.code===e.code&&(un(e),Ef(t,d,0,e))},l=t=>{s=t.ctrlKey,i=t.shiftKey,r=t.altKey},u=()=>{s=!1,i=!1,r=!1};Or.addEventListener("keydown",a),Or.addEventListener("keyup",l),Or.addEventListener("blur",u),t.addEventListener("dispose",(()=>{Or.removeEventListener("keydown",a),Or.removeEventListener("keyup",l),Or.removeEventListener("blur",u)}));const c=t=>{},d=h=>{const a=_o(!1!==t.Ki.fl.vl),l=o(),u=wo(l.rotate,"drag",h,i,s,r),c=wo(l.pan,"drag",h,i,s,r);c&&a.push((()=>((t,i,s,e)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i;"mouse"===i.pointerType&&i.preventDefault();const h=e=>{var r,h,o;if(e.pointerId!==i.pointerId)return;un(e);const a=e.clientX-n.clientX,l=e.clientY-n.clientY;if(n=e,s&&s.x){const i=a+-l;t.axisX.Gy(-Math.sign(i)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s&&s.y){const i=-a+l;t.axisY.Gy(Math.sign(i)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s&&s.z){const i=-a+l;t.axisZ.Gy(Math.sign(i)*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}const u=null==s?void 0:s.on;u&&Or.requestAnimationFrame((()=>u({event:e})))},o=s=>{s.pointerId===i.pointerId&&(un(s),t.setCursorMode(r),Or.removeEventListener("pointermove",h),Or.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())},a=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),Or.removeEventListener("pointermove",h),Or.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())};Or.addEventListener("pointermove",h),Or.addEventListener("pointerup",o),t.engine.container.addEventListener("pointerdown",a),th()})(t,h,c,f()))),u&&a.push((()=>((t,i,s,e,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let h=i,o=!1,a=0;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var n,l;if(e.pointerId!==i.pointerId)return;un(e);const u={x:e.clientX-h.clientX,y:e.clientY-h.clientY};h=e,a+=Fh(u),r._S(),t.kS({x:u.x*(null!==(n=s.sensitivity)&&void 0!==n?n:1),y:-u.y*(null!==(l=s.sensitivity)&&void 0!==l?l:1)}),o||(qn(),o=!0);const c=s.on;c&&Or.requestAnimationFrame((()=>c({event:e})))},u=s=>{s.pointerId===i.pointerId&&(un(s),t.setCursorMode(n),Or.removeEventListener("pointermove",l),Or.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e(),a>=10&&Kn("click"))},c=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(n),Or.removeEventListener("pointermove",l),Or.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e())};Or.addEventListener("pointermove",l),Or.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",c),th()})(t,h,u,f(),n)));const d=wo(l.zoom,"drag",h,i,s,r);d&&a.push((()=>((t,i,s,e,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let h=i;"mouse"===i.pointerType&&i.preventDefault();const o=e=>{var n,o,a,l,u,c,d;if(e.pointerId!==i.pointerId)return;un(e);const f=e.clientX-h.clientX,v=e.clientY-h.clientY;if(h=e,s.x){const i=f+-v;t.axisX.$y(null!==(n=s.mode)&&void 0!==n?n:"centered",Math.sign(i),null!==(o=s.sensitivity)&&void 0!==o?o:1),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s.y){const i=-f+v;t.axisY.$y(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i),null!==(l=s.sensitivity)&&void 0!==l?l:1),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s.z){const i=-f+v;t.axisZ.$y(null!==(u=s.mode)&&void 0!==u?u:"centered",-Math.sign(i),null!==(c=s.sensitivity)&&void 0!==c?c:1),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}if(s.camera){const i=f+-v;r._S(),t.CS(-.15*Math.sign(i)*(null!==(d=s.sensitivity)&&void 0!==d?d:1))}const A=s.on;A&&Or.requestAnimationFrame((()=>A({event:e})))},a=s=>{s.pointerId===i.pointerId&&(un(s),t.setCursorMode(n),Or.removeEventListener("pointermove",o),Or.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e())},l=i=>{t.setCursorMode(n),Or.removeEventListener("pointermove",o),Or.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e()};Or.addEventListener("pointermove",o),Or.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),th()})(t,h,d,f(),n))),a.end();const v=wo(l.rotate,"pinch",h,i,s,r),A=wo(l.pan,"pinch",h,i,s,r),g=wo(l.zoom,"pinch",h,i,s,r);(v||g||A)&&((t,i,s,r,n,h,o)=>{if(!s&&!r&&!n)return;const a=u=>{if(u.pointerId===i.pointerId)return;const c=h();let d;t.engine.container.removeEventListener("pointerdown",a),Or.removeEventListener("pointerup",l);let f,v=u;const A=u,g=t.getCursorMode();t.setCursorMode(void 0);const y=t.getCameraLocation();let p,m,S;const b=[],x=()=>{var h,a,l,c,g,x,w,_;M=void 0;const k=d,C=v;if(b.forEach((t=>{t.pointerId===i.pointerId?d=t:t.pointerId===u.pointerId&&(v=t)})),b.length=0,f=f||d,void 0===d||void 0===k||void 0===f)return;if(!m||!S){const i=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},s=(s,e)=>{const r=t.Vg.Py(s),n=t.Vg.Py(e);if(!r||!n)return{deg:-1,dir:{x:0,y:0}};const h=t.Ki.Rl({engineX:r.x,engineY:r.y}),o=t.Ki.Rl({engineX:n.x,engineY:n.y});return{deg:i(Vh(Ph(n,r))),dir:Ch(Ph({x:o.clientX,y:o.clientY},{x:h.clientX,y:h.clientY}))}},e=t.axisX.getInterval(),r=t.axisY.getInterval(),n=t.axisZ.getInterval(),h={x:s({x:e.start,y:r.start,z:n.start},{x:e.end,y:r.start,z:n.start}),y:s({x:e.start,y:r.start,z:n.start},{x:e.start,y:r.end,z:n.start}),z:s({x:e.end,y:r.start,z:n.start},{x:e.end,y:r.start,z:n.end})},o=t.Ki.El(f),a=t.Ki.El(A),l=i(Vh(Ph({x:a.engineX,y:a.engineY},{x:o.engineX,y:o.engineY})));m=["x","y","z"].reduce(((t,s)=>{const e=Math.abs(h[s].deg-l),r=Math.abs(i(h[s].deg+180)-l),n=Math.min(e,r);return Math.min(n,r)<t.angleDiff?{angleDiff:n,axis:s}:t}),{axis:"x",angleDiff:1e3}).axis,S=h[m].dir}const T=d.clientX-k.clientX,F=d.clientY-k.clientY,I=v.clientX-C.clientX,L=v.clientY-C.clientY,P=Math.sqrt((f.clientX-A.clientX)**2+(f.clientY-A.clientY)**2),B=Math.sqrt((d.clientX-v.clientX)**2+(d.clientY-v.clientY)**2),D=ih.length(y),E=P/B*(null!==(h=null==n?void 0:n.sensitivity)&&void 0!==h?h:1)*D,R=e((null!==(a=null==s?void 0:s.sensitivity)&&void 0!==a?a:1)*(T+I)/2,(null!==(l=null==s?void 0:s.sensitivity)&&void 0!==l?l:1)*-(F+L)/2);o._S(),(s||(null==n?void 0:n.camera))&&(t.Jm.push({type:"rotate+zoom",rotation:s?R:{x:0,y:0},cameraDistance:(null==n?void 0:n.camera)?E:D}),t.Ki.fe());const O=void 0===p?0:B-Fh(p)?1:-1,z=p?.25*(null!==(c=null==n?void 0:n.sensitivity)&&void 0!==c?c:1)*(B-Fh(p)):0;n&&n.x&&("x"===m||void 0===n.y&&void 0===n.z)&&(t.axisX.$y(null!==(g=n.mode)&&void 0!==g?g:"centered",O,z),!1!==n.stopScroll&&t.axisX.setStopped(!0)),n&&n.y&&("y"===m||void 0===n.x&&void 0===n.z)&&(t.axisY.$y(null!==(x=n.mode)&&void 0!==x?x:"centered",O,z),!1!==n.stopScroll&&t.axisY.setStopped(!0)),n&&n.z&&("z"===m||void 0===n.x&&void 0===n.y)&&(t.axisZ.$y(null!==(w=n.mode)&&void 0!==w?w:"centered",O,z),!1!==n.stopScroll&&t.axisZ.setStopped(!0));const V=(k.clientX+C.clientX)/2,N=(k.clientY+C.clientY)/2,G={x:(d.clientX+v.clientX)/2-V,y:(d.clientY+v.clientY)/2-N},$=Rh(Ch(G),S),U=Fh(G)*$*.3*(null!==(_=null==r?void 0:r.sensitivity)&&void 0!==_?_:1);r&&r.x&&("x"===m||void 0===r.y&&void 0===r.z)&&(t.axisX.Gy(-U),!1!==r.stopScroll&&t.axisX.setStopped(!0)),r&&r.y&&("y"===m||void 0===r.x&&void 0===r.z)&&(t.axisY.Gy(-U),!1!==r.stopScroll&&t.axisY.setStopped(!0)),r&&r.z&&("z"===m||void 0===r.x&&void 0===r.y)&&(t.axisZ.Gy(-U),!1!==r.stopScroll&&t.axisZ.setStopped(!0)),p={x:Math.abs(d.clientX-v.clientX),y:Math.abs(d.clientY-v.clientY)};const j=(null==r?void 0:r.on)||(null==s?void 0:s.on)||(null==n?void 0:n.on);j&&Or.requestAnimationFrame((()=>j({event:void 0})))};let M;const w=t=>{t.pointerId!==i.pointerId&&t.pointerId!==u.pointerId||(un(t),b.push(t),M||(M=Or.requestAnimationFrame(x)))},_=s=>{s.pointerId!==i.pointerId&&s.pointerId!==u.pointerId||(un(s),t.setCursorMode(g),Or.removeEventListener("pointermove",w),Or.removeEventListener("pointerup",_),c(),M&&Or.cancelAnimationFrame(M))};Or.addEventListener("pointermove",w),Or.addEventListener("pointerup",_),th()},l=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",a),Or.removeEventListener("pointerup",l))};t.engine.container.addEventListener("pointerdown",a),Or.addEventListener("pointerup",l)})(t,h,v,A,g,f,n)};Bf(t,"wheel",(e=>{const h=_o(!1!==t.Ki.fl.vl),a=o(),l=wo(a.pan,"wheel",e,i,s,r);l&&h.push((()=>((t,i,s)=>{var e,r,n;un(i),s.x&&(t.axisX.Gy(2*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.Gy(2*Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.Gy(2*Math.sign(i.deltaY)*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0));const h=s.on;h&&Or.requestAnimationFrame((()=>h({event:i})))})(t,e,l)));const u=wo(a.zoom,"wheel",e,i,s,r);u&&h.push((()=>((t,i,s,e)=>{var r,n,h,o,a,l,u;un(i),s.x&&(t.axisX.$y(null!==(r=s.mode)&&void 0!==r?r:"centered",-Math.sign(i.deltaY),3*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.$y(null!==(h=s.mode)&&void 0!==h?h:"centered",-Math.sign(i.deltaY),3*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.$y(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i.deltaY),3*(null!==(l=s.sensitivity)&&void 0!==l?l:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),s.camera&&(e._S(),t.CS(.5*Math.sign(i.deltaY)*(null!==(u=s.sensitivity)&&void 0!==u?u:1)));const c=s.on;c&&Or.requestAnimationFrame((()=>c({event:i})))})(t,e,u,n))),h.end()})),Bf(t,"dblclick",(e=>{if(e.defaultPrevented)return;const h=_o(!1!==t.Ki.fl.vl),a=o(),l=wo(a.restoreDefault,void 0,e,i,s,r);l&&l.doubleClick&&(un(e),Df(t,l,n,e));const u=wo(a.restorePrevious,void 0,e,i,s,r);u&&u.doubleClick&&(un(e),Ef(t,u,0,e)),h.end()})),Bf(t,"click",(e=>{if(e.defaultPrevented)return;const h=_o(!1!==t.Ki.fl.vl),a=o(),l=wo(a.restoreDefault,void 0,e,i,s,r);l&&l.singleClick&&(un(e),Df(t,l,n,e));const u=wo(a.restorePrevious,void 0,e,i,s,r);u&&u.singleClick&&(un(e),Ef(t,u,0,e)),h.end()})),Bf(t,"contextmenu",(e=>{if(e.defaultPrevented)return;const h=_o(!1!==t.Ki.fl.vl),a=o(),l=wo(a.restoreDefault,"rmb",e,i,s,r);l&&l.singleClick&&(un(e),Df(t,l,n,e));const u=wo(a.restorePrevious,"rmb",e,i,s,r);u&&u.singleClick&&(un(e),Ef(t,u,0,e)),h.end()}));const f=()=>(v(),A(),()=>{v=Bf(t,"pointermove",c),A=Bf(t,"pointerdown",d)});let v=Bf(t,"pointermove",c),A=Bf(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)h={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)h={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?h[i]=t[i]:h[i]={}},getUserInteractions:o}})(this),this.TS(this.axisX),this.TS(this.axisY),this.TS(this.axisZ);const v={position:t.LegendPosition.RightCenter,backgroundVisible:!0,...null==l?void 0:l.legend};this.legend.setOptions(v)}restorePreviousZoomState(t){if(this.sS.length<=1)return this;this.sS.pop();const i=this.sS[this.sS.length-1];return i?(this.eS=!0,this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.Yi(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this.eS=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.FS)this.sS.length=0;else for(;this.sS.length>1;)this.sS.unshift();return this}TS(t){const i=()=>{this.eS||(this.FS&&Or.clearTimeout(this.FS),this.FS=Or.setTimeout((()=>{this.rS(),this.FS=void 0}),300))};Or.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.sS.forEach((i=>{i.delete(t)}))}))}setUserInteractions(t){return this.wS.setUserInteractions(t),this}getUserInteractions(){return this.wS.getUserInteractions()}setProjection(t){this.Vg.IS(t);const i=this.lS.projectionChanged(this.uS(),t);return i&&this.cS(i),this.Ki.fe(),this}getProjection(){return this.Vg.LS()}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Pf){const i=this.vg(),s=t.Wm(i,this.Rv,this.Rv,this.lg(i),this.rs,this);return this.xg(s),s}addPointSeries(t){const i=new(t&&t.type||af)(this,this.Ky,this.Vg,this.rs,this.Ki.Ks,t);return this.ep(i,t),i}addLineSeries(t){const i=new nf(this,this.Ky,this.Vg,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks,t);return this.ep(i,t),i}addPointLineSeries(t){const i=new hf(this,this.Ky,this.Vg,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks,t);return this.ep(i,t),i}addSurfaceGridSeries(t){const i=new gf(this,this.Ky,this.Vg,t,this.rs,this.Ki.Ks);return this.ep(i,t),i}addSurfaceScrollingGridSeries(t){const i=new yf(this,this.Ky,this.Vg,t,this.rs,this.Ki.Ks);return this.ep(i,t),i}addBoxSeries(t){const i=new Yd(this,this.Ky,this.Vg,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addMeshModel(t){const i=new wf(this,this.Ky,this.Vg,this.rs,t,this.Ki.Ks);return this.ep(i,t),i}translateCoordinate(t,i,s){if(pf(i)||pf(s)||mf(t)){if(pf(i)&&pf(s)&&mf(t)){if("axes"===i.id&&"world"===s.id)return this.Vg.BS(t);if("world"===i.id&&"axes"===s.id)return this.Vg.DS(t);if(i.id===s.id)return t}if(pf(i)&&mo(s)&&mf(t)){const i=this.Vg.Py(t);return i?this.Ki.Rl({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(pf(i)&&bo(s)&&mf(t)){const i=this.Vg.Py(t);return i?Je(i,this.Ki.ji,this.Rv):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Cd(t,i,s,this.Rv,this.Ki)}getDefaultAxisX(){return this.gS.x}getDefaultAxisY(){return this.gS.y}getDefaultAxisZ(){return this.gS.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.gS.x,this.gS.y,this.gS.z]}setCameraLocation(t){let i={location:t,direction:ih.normalize(ih.multiply(t,-1))};const s=this.lS.cameraLocationChanged(this.uS(i));return s&&(i=s),this.cS(i),this.Ki.fe(),this}getCameraLocation(){return this.Vg.getCameraLocation()}getCameraDirection(){return this.Vg.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.lS.Mp(t);const i=this.lS.cameraLocationChanged(this.uS());return i&&this.cS(i),this}getCameraAutomaticFittingEnabled(){return this.lS.Bp()}setBoundingBoxStrokeStyle(t){return this.yS.Hr(t).wy(Hd(this.yS.Ho())),this.Vg.fe(),this}getBoundingBoxStrokeStyle(){return this.yS.Ho()}setBoundingBox(t){return this.pS(t,!1),this}pS(t,i){this.bS=t;const s=this.SS(t);if(this.dS.x.zt(s.x),this.dS.y.zt(s.y),this.dS.z.zt(-s.z),!i){const t=this.lS.boundingBoxChanged(this.uS());t&&this.cS(t)}this.Ki.fe()}getBoundingBox(){return this.bS}Or(t){const i=Ud.Bg(this._n,this.kg);this.ge.forEach((t=>t.Sh(i,this.xo)));const s=Hn;if(Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,s),0!==this.iS){const i=this.iS*t*.006;this.Jm.push({type:"wheel-zoom",deltaY:i}),this.iS=Math.sign(this.iS)*Math.max(Math.abs(this.iS)-.01*t,0),0!==this.iS&&this.Ki.fe(!0)}const e=this.getCameraDirection();if(this.Jm.length>0){const t=this.lS.applyCameraInteractions(this.uS(),this.Jm);t&&this.cS(t),this.Jm.length=0}this.ES&&ih.equals(this.ES.location,this.mS.location)&&ih.equals(this.ES.direction,this.mS.direction)||this._t.kt("camerachange",{cameraLocation:this.getCameraLocation()}),this.ES=this.mS,super.Or(t);for(let t=0;t<this.Jy.length;t+=1)this.Jy[t].jg();for(let t=0;t<this.Jy.length;t+=1)this.Jy[t].Or();this.gS.x.Zh(),this.gS.y.Zh(),this.gS.z.Zh();const r=this.gS.x.Sh(this.gS.x.Ey(e)),n=this.gS.y.Sh(this.gS.y.Ey(e)),o=this.gS.z.Sh(this.gS.z.Ey(e));this.gS.x.Or(r),this.gS.y.Or(n),this.gS.z.Or(o),this.MS.Or(!1,this.Jy,void 0),super.Mg();const a=this.dS,l=h(a.x.getInnerStart(),a.y.getInnerStart(),a.z.getInnerStart()),u=h(a.x.getInnerEnd(),a.y.getInnerEnd(),a.z.getInnerEnd());this.yS.ws().tc([h(u.x,l.y,l.z),h(u.x,u.y,l.z),h(u.x,u.y,u.z),h(u.x,l.y,u.z),h(l.x,l.y,u.z),h(l.x,u.y,u.z),h(u.x,u.y,u.z),h(u.x,u.y,l.z),h(l.x,u.y,l.z),h(l.x,u.y,u.z),h(l.x,l.y,u.z),h(l.x,l.y,l.z)]);const c=[h(l.x,l.y,l.z),h(u.x,l.y,l.z),h(l.x,u.y,l.z),h(u.x,u.y,l.z),h(l.x,l.y,u.z),h(u.x,l.y,u.z),h(l.x,u.y,u.z),h(u.x,u.y,u.z)].map((t=>this.Vg.Py(t))),d=this.Vg.Py(h((l.x+u.x)/2,(l.y+u.y)/2,(l.z+u.z)/2)),f=_n(c,d),v=[];for(let t=0;t<f.length;t+=1){const i=f[t];Mh(i,d,f[t>0?t-1:f.length-1],f[t<f.length-1?t+1:0])||v.push(i)}const A=_n(v,d);this.ip.Nu(A),this.sp.Nu(A);for(let t=0;t<this.Jy.length;t+=1)this.Jy[t].Yg();this.ge.forEach((t=>t.Or(i,this.xo)))}dispose(){return this.Ua.forEach((t=>{t()})),this.Ua.length=0,this.dS.It(),this.Vg.It(),this.aS.It(),this.oS.It(),this.MS.It(),super.dispose()}Dt(){return this.dS.x.Dt(),this.dS.y.Dt(),this.dS.z.Dt(),super.Dt()}Et(){return super.Et()}cS(t){this.Vg.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ih.addVec(t.location,ih.multiply(t.direction,-this.Qm))),this.mS=t,this.Ki.fe()}SS(t){return ih.divide(t,ih.length(t)/this.Zm)}uS(t=this.mS){return{boundingBox:this.SS(this.bS),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.gS.x),t(this.gS.y),t(this.gS.z),this}getSeries(){return this.Jy}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.Km=!!t,this}getAnimationZoom(){return this.Km}kS(t){this.Jm.push({type:"rotate",rotation:t}),this.Ki.fe()}CS(t){this.Km?Math.sign(this.iS)!==Math.sign(t)?this.iS=t:this.iS+=t:this.Jm.push({type:"wheel-zoom",deltaY:t}),this.Ki.fe()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Of=(t,i,s)=>{var e,r;const n=t.axisX.getTitle()||void 0,h=t.axisY.getTitle()||void 0,o=t.axisZ.getTitle()||void 0;return qe(i)?tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n?[n,""]:[],{text:Co(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...h?[h,""]:[],{text:Co(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Co(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Co(i.lut?eo(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):ir(i)?tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==i.value?["Value","",{text:Co(i.lut?eo(i.lut,i.value):i.value.toFixed(2),null===(r=i.lut)||void 0===r?void 0:r.units),font:{weight:"bold"}}]:[]]):tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n?[n,""]:[],{text:Co(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...h?[h,""]:[],{text:Co(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Co(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])};class zf extends Cf{setPosition(...t){const i=this.renderingScale;if(t.length>0){const s=kd(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:Je(t[0].resultTable,s,this.scale);this.Bm.setPosition(e)}return this.ng=!1,this.km.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=kd(t.pointMarkerScale,i),r=e===this.scale?t.pointMarker:Je(t.pointMarker,e,this.scale);let n=this.km[s];if(!n){const t=new ec(this.ke,this.renderingScale,this.scale,$r,this.rs).setPointerEvents(!1).setFillStyle(this.rs.cursorPointMarkerFillStyle).setStrokeStyle(this.rs.cursorPointMarkerStrokeStyle).setSize(this.rs.cursorPointMarkerSize).setShape(this.rs.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.km.push(n),this.Fm.forEach((i=>i(t)))}t.pointMarkerShape&&n.pointMarker.setShape(t.pointMarkerShape),t.pointMarkerSize&&n.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&n.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&n.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle),n.pointMarker.setPosition(r),n.targetVisible=((t,i,s=i)=>{const e=i!==s?Je(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),n.targetVisible&&(this.ng=!0)})),this.ke.fe(),this}}class Vf{constructor(t,i=[]){this.Ym=[],this.Hm=(t,i)=>(this.Ym.forEach((s=>s(t,i))),t),this.addStyler=t=>new Vf(this.Pm,this.Ym.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Vf(t,this.Ym.map((t=>t))),this.Wm=(t,i,s,e,r)=>this.Hm(new zf(t,i,s,e,this.Pm,r),r),this.Pm=t,this.Ym=i}}const Nf=new Vf(qu,[Tf]),Gf=Nf,$f=Nf,Uf=Nf,jf=Nf,Yf=Gf,Hf=new Vf(qu,[Tf,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(Ka.LeftBottom)))]),Wf=Nf,Xf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},Zf={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},Jf={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Qf={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Kf={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},qf={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaao":{name:"Curaao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},tv={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},iv={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},sv={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},ev={World:qf,USA:tv,NorthAmerica:iv,SouthAmerica:sv,Canada:Qf,Europe:Kf,Asia:Zf,Africa:Xf,Australia:Jf},rv={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},nv=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),hv=(t,i)=>{let s=i.geometry;return s=ov(t,i,s),s=av(t,i,s),s},ov=(t,i,s)=>{if(t===rv.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],r=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?r[t]={x:i.x+360,y:i.y}:r[t]=i}}return t}return s},av=(t,i,s)=>{const e=i.name.toLowerCase();let r;if(t===rv.USA&&("alaska"===e?r={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(r={translate:{x:48,y:7},scale:{x:1,y:1}})),r){const{translate:t,scale:n}=r,h=mh(Yr(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const r=s[i],a=o[i];for(let i=0;i<r.length;i+=1){const s=r[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-h.min.x)*n.x+h.min.x,y:t.y+(s.y-h.min.y)*n.y+h.min.y}}}return i.outlier=!0,i.transform={...r,vertexBoundaries:h},o}return s},lv={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},uv={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class cv extends $d{constructor(t,i,s,e,r,n,h){var o;super(t,i,s,i._g("mapChart bg",0),e,i.Ki.rs.mapChartBackgroundFillStyle,i.Ki.rs.mapChartBackgroundStrokeStyle,i.Ki.rs.mapChartTitleFont,i.Ki.rs.mapChartTitleFillStyle,i.Ki.rs.mapChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.RS=[],this.ji=this.cg.d2({scaleXYConstructor:He}),this.OS=!0,this.zS=this.rs.mapChartSeparateRegionFillStyle,this.VS=this.rs.mapChartSeparateRegionStrokeStyle,this.gn=!0,this.NS=0,this.GS=!0,this.$S=new Map,this.regions=new Ar,this.US=t=>{this.ji.x.zt(t.engineWidth).ri([this.Zt.left+this.xo.left,this.Zt.right+this.xo.right]),this.ji.y.zt(t.engineHeight).ri([this.Zt.bottom+this.xo.bottom,this.Zt.top+this.xo.top+Ud.Bg(this._n,this.kg)]),this.jS&&this.YS(this.HS,this.ji,this.jS)},this._t=new Ar,this.Ki.ul(jl.la),this.gn=!1!==(null==n?void 0:n.animationsEnabled),this.WS=i.AS("mapChart plotting",0),this.addEventListener("resize",this.US),this._n.Eh("Map Chart");const a=i.xS(),l=Hr(n?n.cursorBuilder:void 0,Hf);this.MS=rp(this,a,l.Wm(a,this.uiScale,this.uiScale,$r,this.rs),void 0,"show-pointed",fv,(()=>0)),this.XS=this.Ks.Gv(),this.wg(r,this.uiScale),this.ZS=this.WS.Ty(this.ji).setPointerEvents(this.OS).Er(this.rs.mapChartFillStyle).Dr(this.rs.mapChartStrokeStyle),this.regions._s(this.ZS,(t=>{if(!this.JS)return;const i=this.QS(this.JS,t);return i?i.region:void 0})),this.ZS.addEventListener("pointermove",((t,i)=>{const s=i.collectionMember;if(!this.JS||!s)return;const e=this.QS(this.JS,s);this.KS(e),this.GS&&e&&this.Ki.ee.pe(e.region,!0)})),this.ZS.addEventListener("pointerleave",((t,i)=>{const s=i.collectionMember;if(!this.JS||!s)return;const e=this.QS(this.JS,s);this.qS(),this.GS&&e&&this.Ki.ee.pe(e.region,!1)})),this.tb=this.WS.Ty(this.ji).setPointerEvents(this.OS).Er(this.rs.mapChartOutlierRegionFillStyle).Dr(this.rs.mapChartOutlierRegionStrokeStyle);const u=Hr(n&&n.type,rv.World);this.HS=u,this.ib(u).then((()=>{this._t.kt("ready",{})}));const c={renderOnTop:!0,backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(c)}setFillStyle(t){return this.ZS.Er(t),this.ge.forEach((t=>{t.KA()&&t.add(this)})),this.ge.forEach((t=>t.ye())),this.Ki.fe(),this}getFillStyle(){return this.ZS.Qn()}setStrokeStyle(t){return this.ZS.Dr(t),this.Ki.fe(),this}getStrokeStyle(){return this.ZS.Il()}setEffect(t){return this.XS.de(t),this.Ki.fe(),this}getEffect(){return this.XS.ve()}setOutlierRegionFillStyle(t){return this.tb.Er(t),this.Ki.fe(),this}getOutlierRegionFillStyle(){return this.tb.Qn()}setOutlierRegionStrokeStyle(t){return this.tb.Dr(t),this.Ki.fe(),this}getOutlierRegionStrokeStyle(){return this.tb.Il()}setSeparateRegionFillStyle(t){return this.zS="function"==typeof t?t(this.zS):t,this.RS.forEach((t=>t.Er(this.zS))),this.Ki.fe(),this}getSeparateRegionFillStyle(){return this.zS}setSeparateRegionStrokeStyle(t){return this.VS="function"==typeof t?t(this.VS):t,this.RS.forEach((t=>t.Dr(this.VS))),this.Ki.fe(),this}getSeparateRegionStrokeStyle(){return this.VS}invalidateRegionValues(t){if(!this.JS||!this.sb)return this.eb=this.eb||[],this.eb.push(t),this;if("function"==typeof t)for(let i=0;i<this.JS.regions.length;i+=1){const s=this.JS.regions[i],e=this.sb[i],r=t({...s,geometry:void 0},e);if(void 0!==r&&r!==e){this.sb[i]=r;const t=this.$S.get(s);null==t||t.forEach((t=>{t.rb(r)}))}}else for(const i of t)if(i)for(let t=0;t<this.JS.regions.length;t+=1){const s=this.JS.regions[t],e=this.sb[t];if(void 0!==i.value&&i.value!==e&&nv(s,i)){this.sb[t]=i.value;const e=this.$S.get(s);null==e||e.forEach((t=>{t.rb(i.value)}))}}return this.ge.forEach((t=>{t.KA()&&t.add(this)})),this.Ki.fe(),this}setPointerEvents(t){return this.OS=t,this.ZS.setPointerEvents(t),this}getPointerEvents(){return this.OS}setHighlight(t){var i;return t=Vn(t),this.NS=t,null===(i=this.JS)||void 0===i||i.regions.forEach((i=>{this.Ki.ee.pe(i,t)})),this._t.kt("highlightchange",{highlight:t}),this}getHighlight(){return this.NS}setAnimationHighlight(t){var i;return null===(i=this.JS)||void 0===i||i.regions.forEach((i=>{this.Ki.ee.me(i,t)})),this}getAnimationHighlight(){var t;return this.Ki.ee.Se(null===(t=this.JS)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.GS=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.GS}async ib(t){const i=await((t,i)=>{let s;if(t===rv.World)s="countries_world.json";else if(t===rv.NorthAmerica)s="countries_northAmerica.json";else if(t===rv.SouthAmerica)s="countries_southAmerica.json";else if(t===rv.Africa)s="countries_africa.json";else if(t===rv.Europe)s="countries_europe.json";else if(t===rv.Asia)s="countries_asia.json";else if(t===rv.USA)s="states_usa.json";else if(t===rv.Canada)s="territoriesProvinces_canada.json";else{if(t!==rv.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Or.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void Or.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${Or.location.origin}/resources${t.fileName}`;Or.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;Or.fetch(s).then((i=>{Or.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>Un(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.ug.Ke);this.sb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=lv[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.tb._a().Nu(i);if(t===rv.USA){const t=25.8,i=29.7;this.RS.push(this.ag.Rr(this.ji).setPointerEvents(!1).Er(this.zS).Dr(this.VS).zr({x:-126,y:t}).zt({x:10,y:i-t}),this.ag.Rr(this.ji).setPointerEvents(!1).Er(this.zS).Dr(this.VS).zr({x:-113,y:t}).zt({x:7,y:i-t}))}const e=this.Ki.ee.wa(this.ZS,{animationEnabled:this.gn});for(let s=0;s<i.regions.length;s+=1){const r=i.regions[s],n=hv(t,r),h=[];for(const t of n)t.length<3||h.push(this.ZS._a().Nu(t));this.$S.set(r,h),e._a(r,(t=>{h.forEach((i=>i.vs(t)))}))}if(this.XS.he([this.ZS]),this.jS=s,this.YS(t,this.ji,s),this.JS=i,this.eb){for(const t of this.eb)this.invalidateRegionValues(t);this.eb=void 0}this.Ki.fe()}YS(t,i,s){const e=uv[t],r=i.x.getCellSize(),n=i.y.getCellSize()/r,h={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(n<e){const t=(h.max.x-h.min.x)*(e/n-1);h.min.x-=t/2,h.max.x+=t/2}else if(n>e){const t=(h.max.y-h.min.y)*(n/e-1);h.min.y-=t/2,h.max.y+=t/2}i.x.Rt(h.min.x,h.max.x),i.y.Rt(h.min.y,h.max.y);const o=this.ji.x.ci(),a=this.ji.y.ci();this._t.kt("viewchange",{latitudeRange:{start:h.min.y,end:h.max.y},longitudeRange:{start:h.min.x,end:h.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}KS(t){this.nb=t,this.Ki.fe()}qS(){this.nb=void 0,this.Ki.fe()}QS(t,i){const s=Array.from(this.$S.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],r=this.Ki.ll();if(!r)return;const n=this.Ki.El(r),h=this.sb&&this.sb[s];let o=Je({x:n.engineX,y:n.engineY},this.Ki.ji,this.ji);o={x:jr(o.x,this.ji.x.getInnerStart(),this.ji.x.getInnerEnd()),y:jr(o.y,this.ji.y.getInnerStart(),this.ji.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.Ki.ji,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.Ki.ji},region:e,value:h,longitude:l,latitude:a,lut:yo(c)?c.lut:void 0}}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Hf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}setAnimationsEnabled(t){return this.gn=!t,this}getAnimationsEnabled(){return this.gn}getMinimumSize(){}tg(){return[this]}Or(t){super.Or(t),super.Mg();const i=Ud.Bg(this._n,this.kg),s=this.ge.reduce(((t,s)=>{const e=s.Sh(i,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,s);const e=l(this.ji.x.ni()+s.left,this.ji.y.ni()+s.bottom,this.ji.x.oi()-s.right,this.ji.y.oi()-s.top);return this.WS.hS(e),this.MS.Or(!1,[],void 0,{explicitTarget:this.nb}),this.ge.forEach((t=>t.Or(i,this.xo))),this}dispose(){return this.WS.It(),this.MS.It(),Nd(this.ji),super.dispose()}Dt(){return super.Dt(),this.ji.Dt(),this}Et(){return super.Et(),this.ji.Et(),this}Me(){return In(this.getFillStyle(),this.ZS.ls())}Vr(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const dv=(t,i)=>{const s=t>0,e=i>0;return`${[Pn(Math.abs(0|t),2)," ",Pn(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Pn(Math.abs(0|i),2)," ",Pn(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},fv=(t,i,s)=>{var e;const r=[[{text:i.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[dv(i.longitude,i.latitude)]];return void 0!==i.value&&r.push({text:Co(i.lut?eo(i.lut,i.value):i.value.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),r};class vv extends Il{constructor(t,i,s,e,r,n,h,o,a){super(t,i,i.hb(s),e,r,{numeric:i.ob({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.ob({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.ob({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this._t=new Ar,this.ab=n,this.lb=h,this.ub=o,this.Ks=a,this.cb=s,this.fb=i.ob({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Ln=o.no(s).setPointerEvents(!1).ih(i.ob({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Er(i.ob({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.hh=this.Ks.Gv([this.Ln]).de(e.effectsText)}setTickStrategy(t,i){return super.jn(t,i)}setStrokeStyle(t){return this.fb="function"==typeof t?t(this.fb):t,this.lb.fe(),this}getStrokeStyle(){return this.fb}_h(t){return{}}Fh(t,i,s,e){const r=this.Ab(this.cb,t,i.un);return{keyValue:t,tickLevel:i,labelText:s,labelPosition:Lh(this.gb(this.cb,t),r.padding),labelAlignment:r.alignment,labelRotation:r.rotation,labelOffset:r.offset}}Rh(t,i,s,e){return new Av(i,t,this.cb,this.ub,this.yb(this.ab,this.cb),this.ub.Wr(this.cb).setPointerEvents(!1))}Bn(){return this.cb}Or(t){this.pb(this.cb,this.fb,t.Qv),this.mb(this.cb,this.Ln,t.Qv),t.ticksInfo.forEach(((t,i)=>{i.ph.zr(t.labelPosition).Cu(t.labelAlignment).eh(t.labelRotation).Su(t.labelOffset.x,t.labelOffset.y),this.Sb&&!1===this.Sb(i)&&i.ph.setVisible(!1),this.bb(this.cb,i.xb,i.Mb,i)}))}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}}class Av extends Ll{constructor(t,i,s,e,r,n,h){super(t,i,e,s,h),this.xb=r,this.Mb=n,r.setPointerEvents(!1),this.Js.push(r,n)}}class gv extends vv{constructor(t,i,s,e,r,n,h,o,a){super(t,yv((()=>this.Xv())),i,s,e,r,n,h,o),this.My=this.lb.Wr(this.cb).setPointerEvents(!1),this.wb=a,this.setScrollStrategy(vl.expansion),this.setTickStrategy(Al.Numeric),this.setTitle("Amplitude"),this.Ln.Dh(s.polarAmplitudeAxisTitleShadow)}Xv(){return this.wb()}Ph(t,i,s){return{ticksInfo:i,Qv:this.$h(((t,i)=>{const s=i.ho.un,e=.5*this.fb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.ph.Sh().td().y);return Math.max(t,e)}),0),updatedTicks:s}}Jh(t,i){return Fo(t,i,this.cb.y)}qh(t,i,s){const e=2*Math.abs(i-t),r=this.cb.x.Pi(e);return{start:t+s.start*r*Math.sign(t-i),end:i+s.end*r*Math.sign(i-t)}}gb(t,i){return{x:t.Ue()?i-t.$e().start:t.$e().start-i,y:0}}yb(t,i){return t.ef(i)}bb(t,i,s,e){const r=e.ho.un,n=t.Ue()?e.S-t.$e().start:t.$e().start-e.S;Ur(e.S,t.$e().start)||Ur(e.S,t.$e().end)?i.setVisible(!1):i.setVisible(!0).Pc(0).Xr(360).Oc(void 0).Rc(0).Bc(n).Oc(60).Er(ho).Dr(r.gridStrokeStyle);const h=.5*this.fb.getThickness();s.Zr({x:n,y:-h*t.$i().y}).Xr({x:n,y:-(h+r.tickLength)*t.$i().y}).Hr(r.tickStyle)}Ab(t,i,s){return{alignment:{x:0,y:1},padding:{x:0,y:t.$i().y*-(.5*this.fb.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}pb(t,i,s){const e=t.Ue()?t.$e().end-t.$e().start:t.$e().start-t.$e().end;this.My.Zr({x:0,y:0}).Xr({x:e,y:0}).Hr(i)}mb(t,i,s){const e=t.Ue()?(t.$e().start+t.$e().end)/2-t.$e().start:t.$e().start-(t.$e().start+t.$e().end)/2;i.Cu({x:0,y:1}).zr({x:e,y:-s*t.$i().y})}}const yv=t=>({...tf(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),hb:t=>({getInnerStart:()=>t.$e().start,getInnerEnd:()=>t.$e().end,Rt:(i,s)=>t.Ne(i,s),Yt:(i,s,e,r,n)=>t.y.Yt(i,s,e,r,n)}),ob:t=>t.amplitude});class pv{constructor(t,i,s,e){this._b=!1,this._t=new Ar,this.hr=t,this.kb=i,this.Jy=s,this.hd=e}setGeometry(t){return this.Cb=t,this._b=!0,this.hr.Ki.fe(),this}getGeometry(){return this.Cb}setPointerEvents(t){return this.hd.setPointerEvents(t),this}dispose(){return this.hd.dispose(),this.kb(this),this._t.kt("dispose",{}),this}setVisible(t){const i=this.hd.getVisible()!==t;return this.hd.setVisible(t),i&&this._t.kt("visiblechange",{isVisible:t}),this.hr.Ki.fe(),this}getVisible(){return this.hd.getVisible()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class mv extends Bo{constructor(){super(...arguments),this.Og=!0,this.Rg=!0}setAutoScrollingEnabled(t){return this.Og=t,this.chart.Ki.fe(),this}getAutoScrollingEnabled(){return this.Og}jg(){}Or(){}Yg(){}setCursorEnabled(t){return this.Rg=t,this}getCursorEnabled(){return this.Rg}Gg(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.Ng=t,this}getCursorFormattingOverride(){return this.Ng}}class Sv extends mv{constructor(t,i,s,e,r,n){super(i,s,r,n),this.ke=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.Tb?this.Tb.min:void 0}getAmplitudeMax(){return this.Tb?this.Tb.max:void 0}}const bv=(t,i)=>{const s=[],e=i.$e().start,r=i.$e().end,n=i.Ue(),h=i.Ye()?1:-1,o=i.We(),a=Math.abs(r-e),l=Math.min(e,r)+.001*a,u=Math.max(e,r)-.001*a;for(const i of t){const t=jr(i.amplitude,l,u),r=i.angle*Math.PI/180-o,a=Math.cos(r*h)*(n?t-e:e-t),c=Math.sin(r*h)*(n?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},xv=t=>{const i={min:sh,max:eh};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},Mv=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),wv=(t,i)=>{let s=Vh(t);for(i.Ye()||(s*=-1),s+=180*i.We()/Math.PI;s<0;)s+=360;s%=360;const e=Fh(t),r=i.$e(),n=Math.abs(r.end-r.start);return{angle:s,amplitude:Vo(r.start,r.end,e/n),color:t.color?xe(t.color):void 0}};class _v extends Sv{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,h),this.At="Polygon Series",this.Fb=[],this.Ib=[],this.Lb=t=>{const i=this.Ib.indexOf(t);i>=0&&this.Ib.splice(i,1);const s=this.Fb.findIndex((i=>i===t.hd));s>=0&&this.Fb.splice(s,1),this.ke.fe()},this._t=new Ar,this.Lr=Bn(this.rs.polarPolygonSeriesFillStyle,n),this.Pr=Bn(this.rs.polarPolygonSeriesStrokeStyle,n)}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=Mo(e,this.Fb,((t,i)=>{const s=t.Jd(i);if(s)return Je(s,this.scale,t.Ki.ji)}),vh);if(!r)return;const n=Je(r[0],r[1].Ki.ji,this.scale);if(!this.Pb(r[1]))return;const h=wv(n,this.scale);return{cursorPosition:{pointMarker:n,pointMarkerScale:this.scale,resultTable:n,resultTableScale:this.scale},series:this,...h}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new pv(this.chart,this.Lb,this,this.Bb());return this.Ib.push(t),t}setFillStyle(t){this.Lr="function"==typeof t?t(this.Lr):t;const i=this.Lr;for(const t of this.Fb)t.Er(i);return this.ke.fe(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){this.Pr="function"==typeof t?t(this.Pr):t;const i=this.Pr;for(const t of this.Fb)t.Dr(i);return this.ke.fe(),this}getStrokeStyle(){return this.Pr}qg(){return this.Og&&void 0!==this.Ib.find((t=>void 0!==t.Db))&&this.getVisible()}Or(){this.Ib.forEach((t=>{(t._b||this.scale.Xe())&&t.Eb&&(t.hd.Nu(bv(t.Eb,this.scale)),t._b=!1,t.hd.Sh())}))}jg(){super.jg();const t=a(sh,eh);this.Ib.forEach((i=>{if(!i.Cb)return;const s=!i._b&&i.Eb?i.Eb:Mv(i.Cb);i.Eb=s;const e=!i._b&&i.Db?i.Db:xv(s);i.Db=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Tb=t}Nr(t,i){t.vs(i),this.ke.fe()}Vr(){return{fill:this.Lr,stroke:this.Pr}}Bb(){const t=this.ke.od(this.scale,Mu.Simple).Er(this.Lr).Dr(this.Pr).vs(this.getHighlight());return this.Fb.push(t),this.ne(t),t}Pb(t){return this.Ib.find((i=>i.hd===t))}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class kv extends Sv{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,h),this.At="Area Series",this.Rb=[],this.Ob=!1,this.zb=!1,this.Vb=!1,this._t=new Ar,this.Lr=Bn(this.rs.polarAreaSeriesFillStyle,n),this.Pr=Bn(this.rs.polarAreaSeriesStrokeStyle,n)}setData(t){0!==this.Rb.length&&this.chart.Ki.ul(jl.Aa);const i=(t=>{const i=[];let s,e,r=!1;for(let n=0;n<t.length;n+=1){const h=t[n];let o=!0;if(s){o=!1;const t=h.angle-s.angle;if(Ur(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(h):r=!0,s=h}return{progressivePoints:i,userDataModified:r}})(t);return i.userDataModified&&!1===this.Vb&&(console.warn(`${this.At} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.Vb=!0),this.Rb=i.progressivePoints,this.Ob=!0,this.Tb=xv(this.Rb),this.ke.fe(),this}getData(){return this.Rb}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.ke.fe(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.ke.fe(),this}getStrokeStyle(){return this.Pr}setConnectDataAutomaticallyEnabled(t){return this.zb=t,this.ke.fe(),this}getConnectDataAutomaticallyEnabled(){return this.zb}qg(){return this.Og&&this.Rb.length>0&&this.getVisible()}Vr(){return{fill:this.Lr,stroke:this.Pr}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Cv extends kv{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,n,h),this.Nb=this.ke.od(this.scale,Mu.Simple).vs(this.getHighlight()),this.ne(this.Nb)}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=this.Nb.Jd(e);if(!r)return;const n=wv(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Or(){if(this.Ob||this.scale.Xe()){const t=this.Rb,i=!0===this.zb?bv(t,this.scale):[...bv(t,this.scale),{x:0,y:0}];this.Nb.Nu(i).Er(this.Lr).Dr(this.Pr),this.Ob=!1,this.Nb.Sh()}}Nr(t,i){t.vs(i),this.ke.fe()}}class Tv extends Sv{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,h),this.At="Line Series",this.Rb=[],this.Ob=!1,this.zb=!1,this._t=new Ar,this.zc=Bn(this.rs.polarLineSeriesStrokeStyle,n),this.Gb=t._y(e,void 0,[Wd.UserSeries]).Hr(this.zc).vs(this.getHighlight()),this.ne(this.Gb)}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=this.Gb.$b(e);if(!r)return;const n=wv(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.Rb.length&&this.chart.Ki.ul(jl.Aa),this.Rb=Mv(t),this.Ob=!0,this.Tb=xv(this.Rb),this.ke.fe(),this}getData(){return this.Rb}setStrokeStyle(t){this.zc="function"==typeof t?t(this.zc):t;const i=this.zc;return this.Gb.Hr(i),this.ke.fe(),this}getStrokeStyle(){return this.zc}setConnectDataAutomaticallyEnabled(t){return this.zb=t,this.ke.fe(),this}getConnectDataAutomaticallyEnabled(){return this.zb}qg(){return this.Og&&this.Rb.length>0&&this.getVisible()}Nr(t,i){t.vs(i),this.ke.fe()}Or(){if(this.Ob||this.scale.Xe()){const t=bv(this.Rb,this.scale),i=mh(t);this.zb?(t.push({...t[0]}),this.Gb.cc(!0)):this.Gb.cc(!1),this.Gb.ws().tc(t).ds(i),this.Ob=!1,this.Gb.Sh()}}Vr(){return{stroke:this.zc}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Fv extends Ol{constructor(t,i,s,e,r,n,h,o,a){super(),this.ss=Wn(),this.Wi=!1,this._t=new Ar,this.Ub=e,this.jb=r,this.Yb=n,this.Hb=h,this.Wb=o,this.ke=t,this.scale=i,this.Xb=s,this.rs=a}Zb(t){this.Jb=t}setHighlight(t){const i=Vn(t);return this.Qb=i<=0?void 0:i,this.Jb&&this.Jb.vs(i),this._t.kt("highlightchange",{highlight:i}),this}dispose(){return this.Xb&&this.Xb(this),this.ke.Ki.fe(),this._t.kt("dispose",{}),this.Wi=!0,this}setVisible(t){return super.setVisible(t),this.Yb(),this.ke.Ki.fe(),this}isDisposed(){return this.Wi}setPointerEvents(t){return this.Hb(this,t),this}getPointerEvents(){return this.Wb(this)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Iv extends Fv{constructor(t,i,s,e,r,n,h,o,l,u,c,d,f,v,A,g,y,p){super(i,s,e,r,n,h,o,l,p),this.Kb=1,this.qb=1,this.Jy=t,this.ke=i,this.scale=s,this.dimensionStrategy=u,this.start=c,this.end=d,this.lowerExtreme=f,this.lowerQuartile=v,this.median=A,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=a(this.dimensionStrategy.toPoint(c,f),this.dimensionStrategy.toPoint(d,y)),this.tx=this.rs.boxSeriesBodyFillStyle,this.ix=this.rs.boxSeriesBodyStrokeStyle,this.zc=this.rs.boxSeriesStrokeStyle,this.sx=this.rs.boxSeriesMedianStrokeStyle,this.Sh()}Es(t,i){const s=this.Jy.Ce.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...s,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return this.boundaries}setBodyWidth(t){return this.Kb=t,this.Sh(),this}getBodyWidth(){return this.Kb}setBodyFillStyle(t){return this.tx="function"==typeof t?t(this.tx):t,this.jb(),this}getBodyFillStyle(){return this.tx}setBodyStrokeStyle(t){return this.ix="function"==typeof t?t(this.ix):t,this.jb(),this}getBodyStrokeStyle(){return this.ix}setTailWidth(t){return this.qb=t,this.Sh(),this}getTailWidth(){return this.qb}setStrokeStyle(t){return this.zc="function"==typeof t?t(this.zc):t,this.jb(),this}getStrokeStyle(){return this.zc}setMedianStrokeStyle(t){return this.sx="function"==typeof t?t(this.sx):t,this.jb(),this}getMedianStrokeStyle(){return this.sx}Sh(){this.Ub()}getDominantStyle(){return this.getBodyFillStyle()}}class Lv extends mv{constructor(t,i,s,e,r,n,h,o,a,l){super(t,i,a,l),this._e=!0,this.Js=new Map,this.chart=t,this.ke=s,this.axisX=e,this.axisY=r,this.axisXAttachHandler=n,this.axisYAttachHandler=h,this.scale=po(e.ji,r.ji),this.hx=t.ox,t.ox+=1,this.lx(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}Vl(){const t=Array.from(this.Js.keys());for(const i of t){const t=i.Vl();if(t)return t}}setClipping(t){return this._e=t,this.ke.fe(),this}getClipping(){return this._e}attacheAxis(){this.ux=this.axisXAttachHandler(this),this.vx=this.axisYAttachHandler(this)}ne(t,i){super.ne(t,i),t.Nl(this.hx)}getName(){const t=this.re(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.At||i.length>0&&i||"Series"}setDrawOrder(t){return this.hx=t.seriesDrawOrderIndex,this.Js.forEach(((t,i)=>{i.Nl(this.hx)})),this.chart.Ki.fe(),this}dispose(){return super.dispose(),this.ux(this),this.vx(this),this.chart.legend.remove(this),this}Yg(){super.Yg(),ko(this._e,Array.from(this.Js.keys()),this.scale)}getXMax(){var t;return null!==(t=this.Ax(!1))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.gx(!1))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.yx(!1))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.mx(!1))&&void 0!==t?t:0}getBoundaries(){return a(e(this.getXMin()||0,this.getYMin()||0),e(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Pv=(t,i,s,e)=>{const r=t.length;let n=0;if(void 0!==i){const r=s-i;if(r>0){const i=t.slice(n,r);n+=r,e(i,!0)}}for(;n<r;){const i=t.slice(n,n+s);n+=s,e(i,!1)}};class Bv extends Lv{constructor(i,s,e,r,n,h,o,a,l,u){super(i,s,e,r,n,h,o,a,l,u),this.Sx=[],this.bx=void 0,this.xx=!1,this.Xb=t=>{const i=this.Sx.findIndex((i=>i===t));i>=0&&this.Sx.splice(i,1),this.xx=!0,this.bx=void 0,this.ke.fe()},this.Ub=()=>{this.bx=void 0,this.xx=!0,this.chart.Ki.fe()},this.jb=()=>{this.xx=!0,this.chart.Ki.fe()},this.Yb=()=>{this.bx=void 0,this.xx=!0,this.chart.Ki.fe()},this.Hb=(t,i)=>{this.setPointerEvents(i)},this.Mx=t=>this.getPointerEvents(),this.Ws=t.HighlightModes.onHoverIndividual}getFigures(){return this.Sx.slice()}setPointerEvents(t){return super.setPointerEvents(t),this.Js.forEach(((i,s)=>s.setPointerEvents(t))),this}Qg(){return this.Sx.length>0}Or(){super.Or(),this.xx&&(this.wx(this.Sx),this.xx=!1)}clear(){return this.Sx.slice().forEach(Gr),this.Sx.length=0,this.xx=!0,this.bx=void 0,this.ke.fe(),this}_x(i,s){void 0!==s?this.Sx.splice(s,0,i):this.Sx.push(i),this.xx=!0,this.kx&&this.kx(i),this._t.ks(i),this.ke.fe(),i.addEventListener("pointerenter",(()=>{this.Ws===t.HighlightModes.onHoverIndividual&&i.setHighlight(!0)})),i.addEventListener("pointerleave",(()=>{this.Ws===t.HighlightModes.onHoverIndividual&&i.setHighlight(!1)}))}qg(){return this.Og&&this.Sx.length>0&&this.getVisible()}setDefaultStyle(t){return this.kx=t,this.Sx.forEach(t),t(this.Cx),this.xx=!0,this.chart.Ki.fe(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.Sx.forEach((i=>i.setVisible(t))),this}Ax(){return this.bx||(this.bx=this.Tx()),this.bx.max.x}gx(){return this.bx||(this.bx=this.Tx()),this.bx.min.x}yx(){return this.bx||(this.bx=this.Tx()),this.bx.max.y}mx(){return this.bx||(this.bx=this.Tx()),this.bx.min.y}Xh(){return e(0,0)}Tx(){const t=a(r(sh,sh),r(eh,eh));for(let i=0;i<this.Sx.length;i+=1)if(this.Sx[i].getVisible()){const s=this.Sx[i].nx();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}Vr(){return{fill:this.Sx.length>0?this.Sx[0].getDominantStyle():this.Cx.getDominantStyle()}}}class Dv extends Bv{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,l,u),this.At="Box Series",this.Fx=Yn(),this.Ix=t=>Je(this.Ce.toPoint((t.start+t.end)/2,t.median),this.scale,this.ke.Ki.ji),this._t=new Ar,this.chart.Ki.ul(jl.fa),this.Ce=a,this.Cx=new Iv(this,this.ke,this.scale,this.Xb,$r,$r,$r,$r,(t=>!1),this.Ce,0,0,0,0,0,0,0,this.rs).dispose(),this.Lx=new Jd((()=>{const t=this.ke.iA(this.scale);return this.ne(t,{setEventHandlers:!1,pointerEventsDisabled:!0}),t}),((t,i,s)=>(t.Hr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.eA(i.start,i.end),s}))))),this.Px=new Jd((()=>{const t=this.Fx.N(this.ke.Ty(this.scale));return this.ne(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.Nu(i.vertices),this.Fx.Rs(s,i.figure),i.figure.Zb(s),s})))),(()=>{this.Fx.ws()}),((t,i)=>{this.ae(i)}))}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,vh);if(!r)return;const n=Je(r[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],start:r[1].start,end:r[1].end,lowerExtreme:r[1].lowerExtreme,lowerQuartile:r[1].lowerQuartile,median:r[1].median,upperQuartile:r[1].upperQuartile,upperExtreme:r[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){if(!s)return;const e=this.Sx.find((t=>t.Jb===s));if(!e)return;const r=this.Ce.toPoint((e.start+e.end)/2,e.median);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,start:e.start,end:e.end,lowerExtreme:e.lowerExtreme,lowerQuartile:e.lowerQuartile,median:e.median,upperQuartile:e.upperQuartile,upperExtreme:e.upperExtreme,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}lx(t){if(!(t instanceof He||t instanceof We))throw new Error("BoxSeries only supports Linear Axes")}wx(t){const i=this.Px.pA(),s=this.Lx.pA();t.forEach((t=>{if(!t.getVisible())return;const e=this.Ce.toPoint((t.start+t.end-t.Kb*(t.end-t.start))/2,t.lowerQuartile),r=this.Ce.toPoint((t.end-t.start)*t.Kb,t.upperQuartile-t.lowerQuartile),n=this.Ce.toPoint((t.start+t.end)/2,t.lowerQuartile),h=this.Ce.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Ce.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Ce.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Ce.toPoint((t.start+t.end-t.qb*(t.end-t.start))/2,t.lowerExtreme),u=this.Ce.toPoint((t.start+t.end+t.qb*(t.end-t.start))/2,t.lowerExtreme),c=this.Ce.toPoint((t.start+t.end-t.qb*(t.end-t.start))/2,t.upperExtreme),d=this.Ce.toPoint((t.start+t.end+t.qb*(t.end-t.start))/2,t.upperExtreme),f=this.Ce.toPoint((t.start+t.end-t.Kb*(t.end-t.start))/2,t.median),v=this.Ce.toPoint((t.start+t.end+t.Kb*(t.end-t.start))/2,t.median);i.add({ss:t.ss,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+r.y},{x:e.x+r.x,y:e.y+r.y},{x:e.x+r.x,y:e.y}],figure:t},{fillStyle:t.tx,strokeStyle:t.ix}),s.add({ss:0,start:n,end:h,figure:t},{strokeStyle:t.zc}),s.add({ss:0,start:o,end:a,figure:t},{strokeStyle:t.zc}),s.add({ss:0,start:l,end:u,figure:t},{strokeStyle:t.zc}),s.add({ss:0,start:c,end:d,figure:t},{strokeStyle:t.zc}),s.add({ss:0,start:f,end:v,figure:t},{strokeStyle:t.sx})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Iv(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.Ce,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.rs);return this._x(i),this.xx=!0,this.chart.Ki.fe(),i}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Ev extends Fv{constructor(t,i,s,r,n,h,o,l,u,c,d){super(i,s,r,n,h,o,l,u,c),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.zu=a(e(0,0),e(0,0)),this.Jy=t,this.ke=i,this.scale=s,this.Lr=Bn(c.ellipseSeriesFillStyle,d),this.Pr=Bn(c.ellipseSeriesStrokeStyle,d)}Es(t,i){const s=this.getDimensions(),r=e(s.x,s.y);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...r,figure:this,...this.getDimensions(),series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return this.zu}setDimensions(t){return this.dimensions=t,this.zu=a(e(t.x-t.radiusX,t.y-t.radiusY),e(t.x+t.radiusX,t.y+t.radiusY)),this.Ub(),this.ke.fe(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.jb(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.jb(),this}getStrokeStyle(){return this.Pr}getDominantStyle(){return this.Lr}}class Rv extends Bv{constructor(t,i,s,r,n,h,o,a,l,u,c){super(t,i,s,r,n,h,o,a,l,u),this.At="Ellipse Series",this.Fx=Yn(),this.Ix=t=>{const i=t.getDimensions(),s=e(i.x,i.y);return Je(s,this.scale,this.ke.Ki.ji)},this._t=new Ar,this.chart.Ki.ul(jl.fa),this.Bx=c,this.Cx=new Ev(this,this.ke,this.scale,$r,$r,$r,$r,$r,(t=>!1),this.rs,this.Bx).dispose(),this.Px=new Jd((()=>{const t=this.Fx.N(this.ke.Ty(this.scale));return this.ne(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.Nu(i.vertices),this.Fx.Rs(s,i.figure),i.figure.Zb(s),s})))),(()=>{this.Fx.ws()}),((t,i)=>{this.ae(i)}))}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,vh);if(!r)return;const n=Je(r[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){if(!s)return;const e=this.Sx.find((t=>t.Jb===s));if(!e)return;const r=e.getDimensions();return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}lx(t){if(!(t instanceof He||t instanceof We))throw new Error("EllipseSeries only supports Linear Axes")}wx(t){const i=this.Px.pA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],r=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=r;t+=1){const i=t/r*2*Math.PI,n=s.x+s.radiusX*Math.cos(i),h=s.y+s.radiusY*Math.sin(i);e.push({x:n,y:h})}const n=t.getFillStyle(),h=t.getStrokeStyle();i.add({ss:t.ss,vertices:e,figure:t},{fillStyle:n,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Ev(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.rs,this.Bx).setDimensions(t);return this._x(i),this.xx=!0,this.chart.Ki.fe(),i}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Ov extends Fv{constructor(t,i,s,e,r,n,h,o,a,l,u){super(i,s,e,r,n,h,o,a,l),this.Dx=[],this.zu=rh,this.Jy=t,this.ke=i,this.scale=s,this.Lr=Bn(l.polygonSeriesFillStyle,u),this.Pr=Bn(l.polygonSeriesStrokeStyle,u)}Es(t,i){const s=this.nx(),r=e((s.min.x+s.max.x)/2,(s.min.y+s.max.y)/2);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...r,figure:this,coordinates:this.getDimensions(),series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return this.zu}setDimensions(t){return this.Dx=t,this.zu=mh(this.Dx),this.Ub(),this.ke.fe(),this}getDimensions(){return this.Dx}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.jb(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.jb(),this}getStrokeStyle(){return this.Pr}getDominantStyle(){return this.Lr}}class zv extends Bv{constructor(t,i,s,r,n,h,o,a,l,u,c){super(t,i,s,r,n,h,o,a,l,u),this.At="Polygon Series",this.Fx=Yn(),this.Ix=t=>{const i=t.nx(),s=e((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return Je(s,this.scale,this.ke.Ki.ji)},this._t=new Ar,this.chart.Ki.ul(jl.fa),this.Bx=c,this.Cx=new Ov(this,this.ke,this.scale,$r,$r,$r,$r,$r,(t=>!1),this.rs,this.Bx).dispose(),this.Px=new Jd((()=>{const t=this.Fx.N(this.ke.Ty(this.scale));return this.ne(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.Nu(i.vertices),this.Fx.Rs(s,i.figure),i.figure.Zb(s),s})))),(()=>{this.Fx.ws()}),((t,i)=>{this.ae(i)}))}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,vh);if(!r)return;const n=Je(r[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],coordinates:r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){if(!s)return;const r=this.Sx.find((t=>t.Jb===s));if(!r)return;const n=r.nx(),h=e((n.min.x+n.max.x)/2,(n.min.y+n.max.y)/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,coordinates:r.getDimensions(),figure:r,series:this,axisX:this.axisX,axisY:this.axisY}}lx(t){}wx(t){const i=this.Px.pA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),r=t.getStrokeStyle();i.add({ss:t.ss,vertices:s,figure:t},{fillStyle:e,strokeStyle:r})})),i.finishPlot()}add(t){const i=new Ov(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.rs,this.Bx).setDimensions(t);return this._x(i),this.xx=!0,this.chart.Ki.fe(),i}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Vv extends Fv{constructor(t,i,s,r,n,h,o,l,u,c,d){super(i,s,r,n,h,o,l,u,c),this.Ex={x:0,y:0,width:0,height:0},this.Rx={x1:0,y1:0,x2:0,y2:0},this.zu=a(e(0,0),e(0,0)),this.Jy=t,this.Lr=Bn(c.rectangleSeriesFillStyle,d),this.ke=i,this.scale=s,this.Pr=Bn(c.rectangleSeriesStrokeStyle,d)}setCornerRadius(t){return this.Ox=t,this.Ub(),this}getCornerRadius(){return this.Ox}Es(t,i){const s=this.getDimensionsPositionAndSize(),r=e(s.x+s.width/2,s.y+s.height/2);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...r,figure:this,positionAndSize:this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return this.zu}setDimensions(t){return"x"in t?(this.Ex=t,this.Rx={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Rx=t,this.Ex={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.zu=mh([this.Ex,e(this.Ex.x+this.Ex.width,this.Ex.y+this.Ex.height)]),this.Ub(),this.ke.fe(),this}getDimensionsPositionAndSize(){return this.Ex}getDimensionsTwoPoints(){return this.Rx}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.jb(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.jb(),this}getStrokeStyle(){return this.Pr}getDominantStyle(){return this.Lr}}class Nv extends Bv{constructor(t,i,s,r,n,h,o,a,l,u,c,d){super(t,i,s,r,n,h,o,a,l,u),this.At="Rectangle Series",this.zx=Yn(),this.Vx="xy",this.Ix=t=>{const i=t.getDimensionsPositionAndSize(),s=e(i.x+i.width/2,i.y+i.height/2);return Je(s,this.scale,this.ke.Ki.ji)},this._t=new Ar,this.chart.Ki.ul(jl.fa),this.Bx=c,this.fl=d,this.Cx=new Vv(this,this.ke,this.scale,$r,$r,$r,$r,$r,(t=>!1),this.rs,this.Bx).dispose(),this.Nx=new Jd((()=>{const t=this.zx.N(this.ke.Qd(this.scale));return this.ne(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.if(i.x1,i.y1,i.x2,i.y2).tf(i.roundedCorners?{extent:i.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.zx.Rs(s,i.figure),i.figure.Zb(s),s})))),(()=>{this.zx.ws()}),((t,i)=>{this.ae(i)}))}Gx(){var t,i,s;let e,r;if(!(null===(t=this.fl)||void 0===t?void 0:t.solvePlane)&&this.Sx.length>=3){let t;for(const i of this.Sx){const s=i.getDimensionsPositionAndSize(),n={x:s.x+s.width/2,y:s.y+s.height/2};if(t){const i=n.x-t.x,s=0===i?e:i>0?"progressive":"regressive";e=null===e?null:void 0===e?s:s!==e?null:e;const h=n.y-t.y,o=0===h?r:h>0?"progressive":"regressive";r=null===r?null:void 0===r?o:o!==r?null:r}t=n}}const n=null!==(s=null===(i=this.fl)||void 0===i?void 0:i.solvePlane)&&void 0!==s?s:e?"x":r?"y":"xy";this.Vx=n}re(){return"x"===this.Vx?"ProgressiveX":"y"===this.Vx?"ProgressiveY":void 0}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r="x"===this.Vx?(t,i)=>Math.abs(t.x-i.x):"y"===this.Vx?(t,i)=>Math.abs(t.y-i.y):vh,n=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,r);if(!n)return;const h=Je(e,this.ke.Ki.ji,this.scale);if("x"===this.Vx&&!fh(h.x,this.getXMin(),this.getXMax()))return;if("y"===this.Vx&&!fh(h.y,this.getYMin(),this.getYMax()))return;const o=Je(n[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:o,resultTableScale:this.scale,pointMarker:o,pointMarkerScale:{x:this.axisX,y:this.axisY}},...o,figure:n[1],positionAndSize:n[1].getDimensionsPositionAndSize(),...n[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){if(!s)return;const r=this.Sx.find((t=>t.Jb===s));if(!r)return;const n=r.getDimensionsPositionAndSize(),h=e(n.x+n.width/2,n.y+n.height/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,positionAndSize:r.getDimensionsPositionAndSize(),...r.getDimensionsTwoPoints(),figure:r,series:this,axisX:this.axisX,axisY:this.axisY}}lx(t){}wx(t){const i=this.Nx.pA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=t.getFillStyle(),r=t.getStrokeStyle();i.add({ss:t.ss,figure:t,roundedCorners:t.Ox,...s},{fillStyle:e,strokeStyle:r})})),i.finishPlot(),this.Gx()}add(t){const i=new Vv(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.rs,this.Bx).setDimensions(t);return this._x(i),this.xx=!0,this.chart.Ki.fe(),i}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Gv extends Fv{constructor(t,i,s,r,n,h,o,l,u,c,d){super(i,s,r,n,h,o,l,u,c),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.zu=a(e(0,0),e(0,0)),this.Jy=t,this.rs=c,this.ke=i,this.scale=s,this.Pr=Bn(c.segmentSeriesStrokeStyle,d)}Es(t,i){const s=this.getDimensions(),r=e((s.startX+s.endX)/2,(s.startY+s.endY)/2);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...r,figure:this,...this.getDimensions(),series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return this.zu}setDimensions(t){return this.dimensions=t,this.zu=a(e(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),e(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.Ub(),this.ke.fe(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.jb(),this}getStrokeStyle(){return this.Pr}getDominantStyle(){const t=this.Pr;return t!==_r?t.getFillStyle():ho}}class $v extends Bv{constructor(t,i,s,r,n,h,o,a,l,u,c){super(t,i,s,r,n,h,o,a,l,u),this.At="Segment Series",this.$x=Yn(),this.Ix=t=>{const i=t.getDimensions(),s=e((i.startX+i.endX)/2,(i.startY+i.endY)/2);return Je(s,this.scale,this.ke.Ki.ji)},this._t=new Ar,this.chart.Ki.ul(jl.fa),this.Bx=c,this.Cx=new Gv(this,this.ke,this.scale,$r,$r,$r,$r,$r,(t=>!1),this.rs,this.Bx).dispose(),this.Lx=new Jd((()=>{const t=this.$x.N(this.ke.iA(this.scale));return this.ne(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Hr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.eA(i.start,i.end),this.$x.Rs(s,i.figure),i.figure.Zb(s),s})))),(()=>{this.$x.ws()}),((t,i)=>{this.ae(i)}))}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,vh);if(!r)return;const n=Je(r[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){if(!s)return;const r=this.Sx.find((t=>t.Jb===s));if(!r)return;const n=r.getDimensions(),h=e((n.startX+n.endX)/2,(n.startY+n.endY)/2);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,...n,figure:r,series:this,axisX:this.axisX,axisY:this.axisY}}lx(t){}wx(t){const i=this.Lx.pA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},r={x:s.endX,y:s.endY},n=t.getStrokeStyle();i.add({ss:t.ss,start:e,end:r,figure:t},{strokeStyle:n})})),i.finishPlot()}add(t){const i=new Gv(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.rs,this.Bx).setDimensions(t);return this._x(i),this.xx=!0,this.chart.Ki.fe(),i}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Uv={x:0,y:0};class jv extends Fv{constructor(t,i,s,e,r,n,h,o,a,l,u){var c;super(i,s,e,r,n,h,o,a,l),this.Kl="Text",this.Va=Uv,this.zf=Uv,this.ru=0,this.Zt=Hn,this.Jy=t,this.Lr=l.textSeriesFillStyle?Bn(l.textSeriesFillStyle,u):l.uiTextFillStyle,this.Do=null!==(c=l.textSeriesFont)&&void 0!==c?c:l.uiTextFont,this.hd=this.ke.no(s,!1).Dh(l.textSeriesShadow),this.hd.ql=!0,this._t.Ms(this.hd,{getExtraData:(t,i,s)=>this.Es(s,t)}),this.addEventListener("dispose",(()=>this.hd.dispose()))}Es(t,i){const s=this.Va;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.Jy.axisX,y:this.Jy.axisY}},...s,figure:this,series:this.Jy,axisX:this.Jy.axisX,axisY:this.Jy.axisY}}nx(){return{min:{x:this.Va.x,y:this.Va.y},max:{x:this.Va.x,y:this.Va.y}}}Ux(){this.hd.Eh(this.Kl).zr(this.Va).Cu(this.zf).eh(this.ru).eo(this.Zt).Er(this.Lr).ih(this.Do)}getSizePixels(){return this.Ux(),this.hd.Sh().td()}getBoundingBox(){return this.Ux(),this.hd.Sh().Qc()}setText(t){return this.Kl=t,this.Ub(),this}getText(){return this.Kl}setLocation(t){return this.Va=t,this.Ub(),this}getLocation(){return this.Va}setAlignment(t){return this.zf=t,this.Ub(),this}getAlignment(){return this.zf}setRotation(t){return this.ru=t,this.Ub(),this}getRotation(){return this.ru}setMargin(t){return this.Zt=f(this.Zt,t),this.Ub(),this}getMargin(){return this.Zt}setLabelShadow(t){return this.hd.Dh(t),this.ke.fe(),this}getLabelShadow(){return this.hd.mu()}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.jb(),this}getFillStyle(){return this.Lr}setFont(t){return this.Do="function"==typeof t?t(this.Do):t,this.jb(),this}getFont(){return this.Do}getDominantStyle(){return this.Lr}}class Yv extends Bv{constructor(t,i,s,e,r,n,h,o,a,l,u){super(t,i,s,e,r,n,h,o,a,l),this.At="Text Series",this.Ix=t=>Je(t.getLocation(),this.scale,this.ke.Ki.ji),this._t=new Ar,this.Bx=u,this.Cx=new jv(this,this.ke,this.scale,$r,$r,$r,$r,$r,(t=>!1),this.rs,this.Bx).dispose()}lx(t){}wx(t){t.forEach((t=>{t.Ux(),t.hd.setVisible(t.getVisible())}))}add(t){const i=new jv(this,this.ke,this.scale,this.Xb,this.Ub,this.jb,this.Yb,this.Hb,this.Mx,this.rs,this.Bx);return(null==t?void 0:t.alignment)&&i.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&i.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&i.setFont(t.font),(null==t?void 0:t.location)&&i.setLocation(t.location),(null==t?void 0:t.margin)&&i.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&i.setRotation(t.rotation),(null==t?void 0:t.text)&&i.setText(t.text),this._x(i),this.xx=!0,this.ne(i.hd,{setEventHandlers:!1,isText:!0}),this.chart.Ki.fe(),this._t.Ms(i.hd,{getExtraData:(t,s,e)=>i.Es(e,t)}),i}Es(t,i,s){return Zn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY};if(0===this.Sx.length)return;const r=Mo(e,this.Sx.filter((t=>t.getVisible())),this.Ix,vh);if(!r)return;const n=Je(r[0],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Hv=(t,i)=>{let s=0;const e=[];for(;s<t;){const r=s;let n=i;const h=s>0;n-=h?1:0,n-=s+n<t?1:0;const o=Math.min(n,t-r),a=s-(h?1:0),l={start:a,startUnique:r,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Wv=(t,i)=>{let s=0;const e=[];for(;s<t;){const r=s;let n=i;const h=s>0;n-=h?1:0,n-=0;const o=Math.min(n,t-r),a=s-(h?1:0),l={start:a,startUnique:r,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Xv=(t,i,s,r)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const n=new Map;for(let s=0;s<t.length;s+=1){const h=t[s],o={x:h.startPrimary,y:h.startSecondary},l={x:o.x+h.lengthPrimary-1,y:o.y+h.lengthSecondary-1},u=[o,{x:l.x,y:o.y},l,{x:o.x,y:l.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=r(t),o={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},l=[{x:i.primary,y:i.secondary},{x:o.x,y:i.secondary},o,{x:i.primary,y:o.y}];if(!ah(u,l))return;let c=n.get(t);c||(c={type:h.type,dataInvalidationRanges:[]},n.set(t,c));const d=(f=u,v=l,a(e(Math.max(Math.min(f[0].x,f[2].x),Math.min(v[0].x,v[2].x)),Math.max(Math.min(f[0].y,f[2].y),Math.min(v[0].y,v[2].y))),e(Math.min(Math.max(f[0].x,f[2].x),Math.max(v[0].x,v[2].x)),Math.min(Math.max(f[0].y,f[2].y),Math.max(v[0].y,v[2].y)))));var f,v;const A={primary:d.min.x-i.primary,secondary:d.min.y-i.secondary},g={primary:1+d.max.x-d.min.x,secondary:1+d.max.y-d.min.y};let y=!1;const p=[{x:A.primary,y:A.secondary},{x:A.primary+g.primary,y:A.secondary},{x:A.primary+g.primary,y:A.secondary+g.secondary},{x:A.primary,y:A.secondary+g.secondary}];for(let t=0;t<c.dataInvalidationRanges.length;t+=1)if(!y){const i=c.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(ah(p,s)){const t=lh(p,s);i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,y=!0}}y||c.dataInvalidationRanges.push({tileInvalidationLength:g,tileInvalidationOffset:A})}))}return n},Zv=t=>Ju(t)||Array.isArray(t)&&"number"==typeof t[0],Jv=t=>!Zv(t)&&Array.isArray(t),Qv=(t,i,s,e)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),r=Math.max(i.startPrimary,t.iFirstVector.primary),n=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),h=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);if(Jv(i.values))for(let s=r;s<=n;s+=1){const r=s-i.startPrimary,n=i.values[r],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=h;s<=o;s+=1){const r=s-i.startSecondary,h=s-t.iFirstVector.secondary,o=n[r];e[a+h]=o}}else for(let s=r;s<=n;s+=1){const r=s-i.startPrimary,n=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=h;s<=o;s+=1){const h=s-i.startSecondary,o=s-t.iFirstVector.secondary,a=r*i.lengthSecondary+h,l=i.values[a];e[n+o]=l}}}));else{const r=t[0],n=s(r);if(Jv(i.values))for(let t=0;t<i.lengthPrimary;t+=1){const s=t*r.sizeHeatmapDataVectors.secondary;n.set(i.values[t],s)}else e(r,Zu(i.values)===Float32Array?i.values:new Float32Array(i.values))}},Kv=(t,i,s)=>{var e,r;const n=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(n)return t.jx(null,n.RED,!1,!0,{x:i,y:s},!1,n.FLOAT,n.R32F);const h=t.gl;return(null===(r=t.gl1)||void 0===r?void 0:r.optional.OES_texture_float)?t.jx(null,h.LUMINANCE,!1,!0,{x:i,y:s},!1,h.FLOAT):t.jx(null,h.RGBA,!1,!0,{x:i,y:s},!1,h.UNSIGNED_BYTE)},qv=(t,i,s,e)=>{i.forEach(((i,r)=>{var n,h;const o=s(r),a=e(r),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(n=t.gl2)||void 0===n?void 0:n.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/r.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*r.sizeHeatmapDataVectors.secondary,n=e+i.tileInvalidationLength.primary*r.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,n));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,n));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*n);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class tA extends Lv{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,l,u),this.At="Heatmap Grid Series",this.Yx=!0,this.Dp={},this.chart.Ki.ul(jl.da),this.Hx=a,this.rs=l;const d=c;this.Lr=Bn(l.heatmapGridSeriesFillStyle,d),this.Ep=Bn(this.rs.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,Wx:a.maxTileSize};this.fl=f,this.Xx=this.ke.Zx(this.scale,[],f).Er(this.Lr).Rp(this.Ep).vs(this.getHighlight()),this.ne(this.Xx),this.Yx=!0,this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=Je(e,this.ke.Ki.ji,this.scale),n=qy(i)?this.Xx.Jx(r):this.Xx.Jd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:yo(this.Lr)?this.Lr.lut:void 0}}Es(t,i,s){return Zn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:yo(this.Lr)?this.Lr.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}zp(){const t=this.Dp.start||{x:0,y:0};let i;i=this.Dp.end?{x:(this.Dp.end.x-t.x)/this.fl.columns,y:(this.Dp.end.y-t.y)/this.fl.rows}:this.Dp.step?this.Dp.step:{x:1,y:1},this.Xx.Vp(t,i),this.chart.Ki.fe()}setStart(t){return this.Dp.start=t,this.zp(),this}getStart(){return this.Xx.Np().start}setStep(t){return this.Dp.step=t,this.zp(),this}getStep(){return this.Xx.Np().step}setEnd(t){return this.Dp.end=t,this.zp(),this}getEnd(){return this.Xx.Np().end}setContours(t){var i,s,e;return this.Xx.Gp(t?{showLabels:null===(i=t.showLabels)||void 0===i||i,levels:t.levels.map((t=>{var i,s,e,r,n,h;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.rs.heatmapGridSeriesContourStrokeStyle)&&void 0!==s?s:new oa({thickness:1,fillStyle:new uo({color:me(0,0,0)})}),labelFillStyle:new uo({color:null!==(e=t.labelColor)&&void 0!==e?e:this.rs.heatmapGridSeriesContourLabelColor}),labelFont:(n=t.labelFont,h=null!==(r=this.rs.heatmapGridSeriesContourLabelFont)&&void 0!==r?r:this.rs.uiTextFont,void 0===n?h:Fe(n)?n:new Te({size:h.size,family:h.family,variant:h.variant,type:h.type,style:h.style,weight:h.weight,...n})),label:t.label}})),shadows:null!==(e=null!==(s=t.shadows)&&void 0!==s?s:this.rs.heatmapGridSeriesContourLabelShadow)&&void 0!==e?e:null}:void 0),this.ke.fe(),this}getContours(){return this.Xx.$p()}qg(){return this.Og&&this.getVisible()}Me(){return In(this.Lr,this.Xx.ls())}Vr(){return{fill:this.Lr}}Qx(t){this.Xx.Qx().forEach((i=>{t.Xx.Wp(i)}))}Ax(){const t=this.Xx;return t?t.Ps():void 0}gx(){const t=this.Xx;return t?t.Ls():void 0}yx(){const t=this.Xx;return t?t.Ds():void 0}mx(){const t=this.Xx;return t?t.Bs():void 0}Xh(){const t=e(0,0);return t.x=Math.max(t.x,this.Xx.$u()),t.y=Math.max(t.y,this.Xx.Uu()),t}lx(t){if(!(t instanceof He))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}Nr(t,i){t.vs(i),this.ke.fe()}Or(){return super.Or(),this.Xx.ds(this.getBoundaries()),this}}class iA extends tA{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,a,l,u,c),this.Xg=!1,this._t=new Ar}Qg(){return this.Xg}invalidateIntensityValues(t){if(this.Xg&&this.chart.Ki.ul(jl.Aa),Ju(t)||Array.isArray(t)&&"number"==typeof t[0]){const i=this.fl.columns*this.fl.rows,s=t.length;if(i!==s)throw new Error(`LightningChart JS input error | Heatmap invalidateIntensityValues received typed array whose length does not match heatmap columns x rows (received ${s}, expected ${i})`);this.Xx.Wp({type:"intensity",lengthPrimary:"columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows,lengthSecondary:"columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns,startPrimary:0,startSecondary:0,values:t})}else if(Array.isArray(t)){let i=t;if(0===t.length)return this;const s={x:i.length,y:i[0].length,columns:"columns"===this.fl.dataOrder?i.length:i[0].length,rows:"rows"===this.fl.dataOrder?i.length:i[0].length},e="columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows,r="columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns;if(s.x>e||s.y>r){if(!0===this.chart.ug.vl){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.fl.columns}x${this.fl.rows}, input ${s.columns}x${s.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const t=[];for(let s=0;s<e;s+=1)t[s]=i[s].slice(0,r);i=t}this.Xx.Wp({type:"intensity",lengthPrimary:s.x,lengthSecondary:s.y,startPrimary:0,startSecondary:0,values:i})}else if("iColumn"in t&&"iRow"in t&&"values"in t&&Jv(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:i.length,secondary:i[0].length,columns:"columns"===this.fl.dataOrder?i.length:i[0].length,rows:"rows"===this.fl.dataOrder?i.length:i[0].length},e="columns"===this.fl.dataOrder?t.iColumn:t.iRow,r=e+s.primary-1,n="columns"===this.fl.dataOrder?t.iRow:t.iColumn,h=n+s.secondary-1,o=("columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows)-1,a=("columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns)-1;if(e<0||n<0){if(!0===this.chart.ug.vl){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Or.console.warn(i)}return this}if(r>o||h>a){if(!0===this.chart.ug.vl){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.fl.columns}x${this.fl.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(i)}const e=Math.max(r-o,0),n=s.primary-e,l=Math.max(h-a,0),u=[];for(let t=0;t<n;t+=1)u[t]=i[t].slice(0,l>0?-l:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:u}}this.Xx.Wp({type:"intensity",lengthPrimary:i.length,lengthSecondary:i[0].length,startPrimary:e,startSecondary:n,values:i})}else if("iColumn"in t&&"iRow"in t&&"columns"in t&&"rows"in t&&"values"in t&&Zv(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:"columns"===this.fl.dataOrder?t.columns:t.rows,secondary:"columns"===this.fl.dataOrder?t.rows:t.columns,columns:t.columns,rows:t.rows},e="columns"===this.fl.dataOrder?t.iColumn:t.iRow,r=e+s.primary-1,n="columns"===this.fl.dataOrder?t.iRow:t.iColumn,h=n+s.secondary-1,o=("columns"===this.fl.dataOrder?this.fl.columns:this.fl.rows)-1,a=("columns"===this.fl.dataOrder?this.fl.rows:this.fl.columns)-1;if(e<0||n<0){if(!0===this.chart.ug.vl){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Or.console.warn(i)}return this}if(r>o||h>a){if(!0===this.chart.ug.vl){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.fl.columns}x${this.fl.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nWith flat array input, this operation is not permitted. No intensity values will be invalidated.`;Or.console.warn(i)}return this}const l=s.columns*s.rows;if(i.length!==l){if(!0===this.chart.ug.vl){const s=`HeatmapGridSeries.invalidateIntensityValues invalid flat data input.\ncolumns=${t.columns} rows=${t.rows}, array length must be ${l}, received ${i.length}\nNo intensity values will be invalidated.`;Or.console.warn(s)}return this}this.Xx.Wp({type:"intensity",lengthPrimary:s.primary,lengthSecondary:s.secondary,startPrimary:e,startSecondary:n,values:i})}return this._t.kt("invalidateintensity",{value:t}),this.ke.fe(),this.Xg=!0,this}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.Xx.Er(this.Lr),this._t.kt("stylechange",{}),this.ke.fe(),this}getFillStyle(){return this.Lr}setIntensityInterpolation(t){return t=t||"disabled",this.Xx.Yp(t),this.ke.fe(),this._t.kt("stylechange",{}),this}getIntensityInterpolation(){return this.Xx.Hp()}setAggregation(t){return this.Xx.Kx(t),this.ke.fe(),this}getAggregation(){return this.Xx.qx()}clear(){return this.Xx.ws(),this.ke.fe(),this._t.kt("dataclear",{}),this}setWireframeStyle(t){return this.Ep="function"==typeof t?t(this.Ep):t,this.Xx.Rp(this.Ep),this.ke.fe(),this._t.kt("stylechange",{}),this}getWireframeStyle(){return this.Ep}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class sA extends Lv{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,l,u),this.At="Scrolling Heatmap Grid Series",this.Dp={},this.chart.Ki.ul(jl.da),this.chart.Ki.ul(jl.Aa);const d=c;this.Lr=Bn(l.heatmapScrollingGridSeriesFillStyle,d),this.Ep=Bn(this.rs.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.fl=f,this.tM=this.ke.iM(this.scale,[],f).Er(this.Lr).Rp(this.Ep).vs(this.getHighlight()),this.ne(this.tM),this.setHighlightOnHover(!1)}Qg(){return this.tM.qp()>0}solveNearest(t,i="show-nearest"){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=Je(e,this.ke.Ki.ji,this.scale),n=qy(i)?this.tM.Jx(r):this.tM.Jd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:yo(this.Lr)?this.Lr.lut:void 0}}Es(t,i,s){return Zn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:yo(this.Lr)?this.Lr.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}zp(){const t=this.Dp.start||{x:0,y:0};let i;i=this.Dp.step?this.Dp.step:{x:1,y:1},this.tM.Vp(t,i),this.chart.Ki.fe()}setStart(t){return this.Dp.start=t,this.zp(),this}getStart(){return this.tM.Np().start}setStep(t){return this.Dp.step=t,this.zp(),this}getStep(){return this.tM.Np().step}clear(){return this.tM.ws(),this.ke.fe(),this}setAggregation(t){return this.tM.Kx(t),this.ke.fe(),this}getAggregation(){return this.tM.qx()}setWireframeStyle(t){return this.Ep="function"==typeof t?t(this.Ep):t,this.tM.Rp(this.Ep),this.ke.fe(),this}getWireframeStyle(){return this.Ep}setIntensityInterpolation(t){return t=t||"disabled",this.tM.Yp(t),this.ke.fe(),this}getIntensityInterpolation(){return this.tM.Hp()}setPixelInterpolationMode(t){return this.setIntensityInterpolation(t),this}getPixelInterpolationMode(){return this.getIntensityInterpolation()}setDataCleaning(t){return this.tM.sM(t),this.ke.fe(),this}qg(){return this.Og&&this.getVisible()}Me(){return In(this.Lr,this.tM.ls())}Vr(){return{fill:this.Lr}}Er(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.tM.Er(this.Lr),this.ke.fe(),this}lx(t){if(!(t instanceof He))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}Ax(){return this.tM.Ps()||0}gx(){return this.tM.Ls()||0}yx(){return this.tM.Ds()||0}mx(){return this.tM.Bs()||0}Xh(){const t=e(0,0);return t.x=Math.max(t.x,this.tM.$u()),t.y=Math.max(t.y,this.tM.Uu()),t}Nr(t,i){t.vs(i),this.ke.fe()}}class eA extends sA{constructor(t,i,s,e,r,n,h,o,a,l,u,c){super(t,i,s,e,r,n,h,o,a,l,u,c),this._t=new Ar}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.fl.scrollDimension?t.length:t[0].length,"rows"===this.fl.scrollDimension?t.length:t[0].length,0+s-1),r=this.fl.resolution-1;if(e>r){if(!0===this.chart.ug.vl){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.fl.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,r+1);t=e}return this.tM.Kp(t),this.ke.fe(),this}invalidateIntensityValues(t){return this.tM.Wp(t.iSample,t.values),this.ke.fe(),this}getSampleCount(){return this.tM.qp()}setFillStyle(t){return this.Er(t),this}getFillStyle(){return this.Lr}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class rA extends Lv{constructor(){super(...arguments),this.eM=[],this.Hc=[],this.rM=[],this.nM=[],this.hM=1e3,this.oM=0,this.Ws=t.HighlightModes.onHover,this.aM=[],this.lM=[],this.uM=!1,this.cM=(t,i)=>{const s=t.$b(i);if(s)return[Je(s[0],this.scale,this.ke.Ki.ji),Je(s[1],this.scale,this.ke.Ki.ji)]},this.dM=(t,i)=>{const s=t.fM(i);if(s)return[Je(s[0],this.scale,this.ke.Ki.ji),Je(s[1],this.scale,this.ke.Ki.ji)]},this.vM=t=>{const i=t.length;if(this.eM.length>0){const s=this.eM.length-1,r=this.eM[s];if(i>0){const[i,s]=r.sc(),[h,o]=r.rc();if((h?i.length+h.length:i.length)>=this.hM){const l=h&&h.length>0?h[h.length-1]:i[i.length-1],u=o&&o.length>0?o[o.length-1]:s[i.length-1],c=(l.x+t[0].position)/2,d=Oh(c,l,e(t[0].position,t[0].high)).y,f=Oh(c,u,e(t[0].position,t[0].low)).y,v=n(c,d,f);r.tc(v,a(e(c,f),e(c,d))).cc(!0),this.AM([v].concat(t)).lc(!0)}else r.tc(t)}}else i>0&&this.AM(t)},this.gM=t=>{const i=this.aM,s=t.length;if(this.aM.length>0){if(s>0){const s=i[i.length-1],r=s.sc(),n=s.rc();if(r.length+n.length>=this.hM){const h=n.length>0?n[n.length-1]:r[r.length-1],o=(h.x+t[0].x)/2,l=Oh(o,h,e(t[0].x,t[0].y)).y,u=e(o,l);s.tc(u,a(e(o,l),e(o,l))).cc(!0),i.push(this.yM([u].concat(t),this.pM).lc(!0))}else s.tc(t)}}else s>0&&i.push(this.yM(t))},this.mM=t=>{const i=this.lM,s=t.length;if(this.lM.length>0){if(s>0){const s=i[i.length-1],r=s.sc(),n=s.rc();if(r.length+n.length>=this.hM){const h=n.length>0?n[n.length-1]:r[r.length-1],o=(h.x+t[0].x)/2,l=Oh(o,h,e(t[0].x,t[0].y)).y,u=e(o,l);s.tc(u,a(e(o,l),e(o,l))).cc(!0),i.push(this.SM([u].concat(t)).lc(!0))}else s.tc(t)}}else s>0&&i.push(this.SM(t))}}re(){return"ProgressiveX"}Qg(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.oM=void 0!==i&&i>0?i:0,this.ke.fe(),this}clear(){for(let t=0;t<this.eM.length;t+=1)this.eM[t].dispose();for(let t=0;t<this.aM.length;t+=1)this.aM[t].dispose();for(let t=0;t<this.lM.length;t+=1)this.lM[t].dispose();return this.Hc.length=0,this.rM.length=0,this.nM.length=0,this.pM=void 0,this.eM.length=0,this.aM.length=0,this.lM.length=0,this.ke.fe(),this._t.kt("dataclear",{}),this}getPointAmount(){return this.eM.reduce(((t,i)=>t+i.oc()+i.ac()),this.Hc.length)}Ax(){return sn(this.eM,Xr,Math.max,Kr,this.pM)||0}gx(){return sn(this.eM,Wr,Math.min,Qr,this.pM)||0}yx(){return sn(this.eM,Jr,Math.max,tn,this.pM)||0}mx(){return sn(this.eM,Zr,Math.min,qr,this.pM)||0}Xh(){const t=e(0,0);for(const i of this.eM)t.x=Math.max(t.x,i.$u()),t.y=Math.max(t.y,i.Uu());return t}Me(){return In(this.bM,void 0)||In(this.xM,void 0)}qg(){return this.Og&&this.getPointAmount()>0&&this.getVisible()}lx(t){}MM(t,i,s){this.Hc=kn(this.Hc,t,{canReturnB:!1}),this.rM=kn(this.rM,i,{canReturnB:!1}),this.nM=kn(this.nM,s,{canReturnB:!1}),this.ke.fe()}wM(t,i,s,e){this._M(i,s,e),this.MM(Array.isArray(t)?t:[t],i,s)}_M(t,i,s){const e=bh(mh(t),mh(i));this.pM?this.pM=bh(this.pM,e):this.pM=e,s&&(this.pM=bh(this.pM,s))}kM(){const t=this.eM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Bi(this.eM[e].Ps(),this.eM[e].$u())<i&&(s+=1);return s}CM(t,i,s,e){if(s>0){const r=Math.ceil(s/i),n=t.length-r;if(n>0&&e>0){const i=n-e>0?e:n;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}TM(t){const i=this.eM.length>0?this.eM[this.eM.length-1]:void 0,s=i?i.sc()[0].length+(i.rc()[0]?i.rc()[0].length:0):void 0;Pv(t,s,this.hM,this.vM)}FM(t){const i=this.aM.length>0?this.aM[this.aM.length-1].sc().length+this.aM[this.aM.length-1].rc().length:void 0;Pv(t,i,this.hM,this.gM)}IM(t,i){const s=this.aM.length>0?this.aM[this.aM.length-1].sc().length+this.aM[this.aM.length-1].rc().length:void 0;Pv(t,s,this.hM,this.gM),Pv(i,s,this.hM,this.mM)}AM(t,i){const s=this.ke.LM(this.scale).tc(t,i).Er(this.bM).nc(this.xM).vs(this.getHighlight());return this.eM.push(s),this.ne(s),s}PM(t,i,s){const e=this.ke._y(this.scale,void 0,[Wd.UserSeries]).tc(t,s).setPointerEvents(!1).Hr(i).vs(this.getHighlight());return this.ne(e),e}yM(t,i){return this.PM(t,this.BM,i)}SM(t,i){return this.PM(t,this.DM,i)}EM(t){this.bM="function"==typeof t?t(this.bM):t;const i=this.bM;for(let t=0;t<this.eM.length;t+=1)this.eM[t].Er(i);this.ke.fe()}RM(t){this.xM="function"==typeof t?t(this.xM):t;const i=this.xM;for(let t=0;t<this.eM.length;t+=1)this.eM[t].nc(i);this.ke.fe()}OM(){return this.bM}hc(){return this.xM}zM(t){this.BM="function"==typeof t?t(this.BM):t;const i=this.BM;for(let t=0;t<this.aM.length;t+=1)this.aM[t].Hr(i);this.ke.fe()}VM(t){this.DM="function"==typeof t?t(this.DM):t;const i=this.DM;for(let t=0;t<this.lM.length;t+=1)this.lM[t].Hr(i);this.ke.fe()}NM(){return this.BM}GM(){return this.DM}Nr(t,i){t.vs(i),this.$M(i),this.ke.fe()}$M(t){for(let i=0;i<this.aM.length;i+=1)this.aM[i].vs(t);for(let i=0;i<this.lM.length;i+=1)this.lM[i].vs(t)}jg(){if(super.jg(),this.uM=!1,this.oM>0){const t=this.kM();this.CM(this.eM,this.hM,this.oM,t),this.aM.length>0&&this.CM(this.aM,this.hM,this.oM,t),this.lM.length>0&&this.CM(this.lM,this.hM,this.oM,t),this.uM=!0}}Or(){if(super.Or(),this.Hc.length>0&&(this.TM(this.Hc),this.UM(this.rM,this.nM),this.uM=!0),this.uM){const t=this.getBoundaries();for(const i of this.eM)i.ds(t);for(const i of this.aM)i.ds(t);for(const i of this.lM)i.ds(t)}}Yg(){super.Yg(),this.pM=void 0,this.Hc.length=0,this.rM.length=0,this.nM.length=0}}class nA extends rA{constructor(t,i,s,e,r,n,h,o,a,l,u){super(t,i,s,e,r,n,h,o,a,l),this._t=new Ar,this.chart.Ki.ul(jl.ca);const c=u;this.bM=Bn(this.rs.areaRangeSeriesFillStyle,c),this.BM=Bn(this.rs.areaRangeSeriesStrokeStyle,c),this.xM=Bn(this.rs.areaRangeSeriesFillStyleInverted,c),this.DM=Bn(this.rs.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.Ki.El(t),e=((t,i,s)=>{let e,r,n=Number.MAX_VALUE;for(let h=0;h<i.length;h+=1){const o=i[h],a=s(o,t);if(a){const i=vh(t,a[0]),s=vh(t,a[1]);(void 0===e||i<n||s<n)&&(e=a,r=o,i<n?n=i:s<n&&(n=s))}}return e&&r?[e,r]:void 0})({x:s.engineX,y:s.engineY},this.eM,qy(i)?this.dM:this.cM);if(void 0!==e&&void 0!==e[0]){const t=Je(e[0][0],this.ke.Ki.ji,this.scale),i=Je(e[0][1],this.ke.Ki.ji,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=o(i);this.wM(t,s,e);const r=this.Hc[this.Hc.length-1];return this.jM=r?{position:r.position,high:r.high,low:r.low}:void 0,this._t.kt("dataadd",{data:i,boundaries:this.pM}),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let r=e;r||(r=this.jM?this.jM.position+s:0),this.add(((t,i,s=1,e)=>{const r=void 0!==e?e:0,n=new Array(t.length);for(let e=0;e<t.length;e+=1)n[e]={position:r+s*e,high:t[e],low:i[e]};return n})(t,i,s,r))}return this}UM(t,i){this.IM(t,i)}setHighFillStyle(t){return this.EM(t),this}setLowFillStyle(t){return this.RM(t),this}setHighStrokeStyle(t){return this.zM(t),this}setLowStrokeStyle(t){return this.VM(t),this}getHighFillStyle(){return this.OM()}getLowFillStyle(){return this.hc()}getHighStrokeStyle(){return this.NM()}getLowStrokeStyle(){return this.GM()}YM(){return((t,i=t=>t)=>{const s=[];let e;for(let r=0;r<t.length;r+=1){e=t[r];const n=i(e.sc()),h=e.rc(),o=h?i(h):[];let a=!1,l=!1;"uc"in e&&(a=e.uc(),l=e.dc()),s.push.apply(s,n.slice(a?1:0,n.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===n.length?1:0,o.length-(l?1:0)))}return s})(this.eM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],r=i.length;for(let t=0;t<r;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}Vr(){return{fill:this.bM,fill2:this.xM,behavior:{colorStep:!0}}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class hA extends Lv{constructor(t,i,s,e,n,h,o,l,u,c){super(t,i,s,e,n,h,o,l,u,c),this.HM=t=>t[4]>=t[1],this.bx=a(r(sh,sh),r(eh,eh)),this.WM=[],this.XM=!1,this.ZM=-1,this.JM=[],this.QM=!0,this.KM=!1,this.qM=4,this.tw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this._t=new Ar,this.chart.Ki.ul(jl.ia)}Qg(){return this.JM.length>0}re(){return"ProgressiveX"}YM(){return this.JM}qg(){return this.Og&&this.JM.length>0&&this.getVisible()}iw(t){if(!(this.JM.length<1))return[this.JM[t][0],this.JM[t][1],this.JM[t][2],this.JM[t][3],this.JM[t][4]]}solveNearest(t,i){if(0===this.JM.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,r=void 0!==this.getPackDataState();let n,h,o,a,l;if(r){const t=this.sw;if(!t)return;const i=jn(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],h=e[1],l=e[4],n=e[0]}else{const t=jn(s,this.JM.length-1,(t=>this.JM[t][0])),i=void 0!==t&&this.JM[t];if(!i)return;n=i[0],h=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:e(n,l),resultTableScale:this.scale,pointMarker:e(n,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n,y:l,open:h,high:o,low:a,close:l,position:n,isPacked:r,series:this,axisX:this.axisX,axisY:this.axisY}}Es(t,i,s){return Zn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}lx(t){if(!(t.x instanceof Ue))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.ew=t.x}Xh(){return e(5,5)}uM(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.bx.min.y&&(this.bx.min.y=t[s][3]),this.bx.max.y<t[s][2]&&(this.bx.max.y=t[s][2]);return this.bx.min.x=Math.min(this.bx.min.x,t[0][0]),this.bx.max.x=Math.max(this.bx.max.x,t[i][0]),this}Ax(){return this.bx.max.x}gx(){return this.bx.min.x}yx(){return this.bx.max.y}mx(){return this.bx.min.y}add(t){this.JM.length>0&&this.chart.Ki.ul(jl.Aa);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.XM=!0;const t=this.JM.length,s=this.WM.length,e=i.length;this.JM.length=t+e,this.WM.length=s+e;for(let r=0;r<e;r+=1)this.JM[t+r]=i[r],this.WM[s+r]=this.JM[t+r];this.uM(i),this._t.kt("dataadd",{data:i}),this.ke.fe()}return this}setPackData(t){return t!==this.QM&&(this.KM=!0,this.QM=t,this.chart.Ki.fe()),this}getPackData(){return this.QM}getPackDataState(){const t=this.ZM;if(!(t<0||void 0===this.sw||this.sw.length===this.JM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.rw=t,this.chart.Ki.fe(),this}getFigureWidth(){return this.rw}setFigureMinimumGap(t){return this.qM=t,this.chart.Ki.fe(),this}getFigureMinimumGap(){return this.qM}clear(){return this.JM=[],this.WM=[],this.sw=void 0,this.nw(),this.bx.min.x=sh,this.bx.min.y=sh,this.bx.max.x=eh,this.bx.max.y=eh,this._t.kt("dataclear",{}),this}hw(t){return this.ew.getPixelSize()*t/1e3}ow(){const t=this.tw.length-1,i=this.hw(this.rw+this.qM);let s=jn(i,t,(t=>this.tw[t]));return void 0===s?s=i<this.tw[0]?0:this.tw[t]<i?t:this.tw.length/2:this.tw[s]<i&&(s+=1),this.tw.length<=s&&(s=t),1e3*this.tw[s]}Or(){if(super.Or(),!this.QM){this.sw=void 0;let t=null;if(this.KM?(this.KM=!1,t=this.JM,this.nw()):t=this.WM,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.HM(s)?this.aw(e,s):this.lw(e,s)}this.WM.length=0,this.XM=!1,this.ZM=-1}}}Yg(){super.Yg();const t=this.ow();if(this.QM&&this.JM.length>=1&&(t!==this.ZM||this.XM||this.KM)){this.KM=!1,this.ZM=t,this.XM=!1,this.nw(),this.sw=[];const i=this.JM.length;let s=this.JM[0][0]-this.JM[0][0]%(t/2)+t,e=0;for(;e<i;){let r=this.iw(e);if(void 0===r)break;let n=r[3],h=r[2];const o=e;for(e+=1;e<i&&this.JM[e][0]<s;)r=this.JM[e],this.JM[e][3]<n&&(n=this.JM[e][3]),h<this.JM[e][2]&&(h=this.JM[e][2]),e+=1;const a=e-1;let l=r[0];o<a&&(l=this.JM[a][0],r=[l,this.JM[o][1],h,n,this.JM[a][4]]),r[1]<r[4]?this.aw(l,r):this.lw(l,r),this.sw.push(r),s+=t}}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class oA extends hA{constructor(t,i,s,e,r,n,h,o,a,l){super(t,i,s,e,r,n,h,o,a,l),this.uw=1175494351e-14,this.rw=this.rs.ohlcCandleThicknessPixels||5,this.cw=this.rs.ohlcCandleTailStrokeStylePositive,this.dw=this.rs.ohlcCandleTailStrokeStyleNegative,this.fw=this.rs.ohlcCandleBodyFillStylePositive,this.Aw=this.rs.ohlcCandleBodyFillStyleNegative,this.gw=s.iA(this.scale).Hr(new oa({thickness:this.rw,fillStyle:this.fw})),this.gw.jc={x:0,y:1},this.yw=s.iA(this.scale).Hr(new oa({thickness:this.rw,fillStyle:this.Aw})),this.yw.jc={x:0,y:-1},this.pw=s.iA(this.scale).Hr(this.cw),this.mw=s.iA(this.scale).Hr(this.dw),this.ne(this.gw),this.ne(this.yw),this.ne(this.pw),this.ne(this.mw)}setBodyThickness(t){return this.rw=t,this.gw.Hr(new oa({thickness:this.rw,fillStyle:this.fw})),this.yw.Hr(new oa({thickness:this.rw,fillStyle:this.Aw})),this.chart.Ki.fe(),this}getBodyThickness(){return this.rw}setBodyFillStylePositive(t){return this.fw="function"==typeof t?t(this.fw):t,this.gw.Hr(new oa({thickness:this.rw,fillStyle:this.fw})),this.chart.Ki.fe(),this}getBodyFillStylePositive(){return this.fw}setBodyFillStyleNegative(t){return this.Aw="function"==typeof t?t(this.Aw):t,this.yw.Hr(new oa({thickness:this.rw,fillStyle:this.Aw})),this.chart.Ki.fe(),this}getBodyFillStyleNegative(){return this.Aw}setTailStrokeStylePositive(t){return this.cw="function"==typeof t?t(this.cw):t,this.pw.Hr(this.cw),this.chart.Ki.fe(),this}getTailStrokeStylePositive(){return this.cw}setTailStrokeStyleNegative(t){return this.dw="function"==typeof t?t(this.dw):t,this.mw.Hr(this.dw),this.chart.Ki.fe(),this}getTailStrokeStyleNegative(){return this.dw}Vr(){return{fill:this.fw,fill2:this.Aw,behavior:{colorStep:!0}}}nw(){return this.pw.ws(),this.mw.ws(),this.gw.ws(),this.yw.ws(),this}aw(t,i){return Math.abs(i[1]-i[4])<this.uw?this.gw._a().eA({x:t,y:i[1]-this.uw},{x:t,y:i[1]+this.uw}):this.gw._a().eA({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.pw._a().eA({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.pw._a().eA({x:t,y:i[3]},{x:t,y:i[1]}),this}lw(t,i){return Math.abs(i[1]-i[4])<this.uw?this.yw._a().eA({x:t,y:i[1]-this.uw},{x:t,y:i[1]+this.uw}):this.yw._a().eA({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.mw._a().eA({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.mw._a().eA({x:t,y:i[1]},{x:t,y:i[2]}),this}}class aA extends hA{constructor(t,i,s,e,r,n,h,o,a,l){super(t,i,s,e,r,n,h,o,a,l),this.rw=this.rs.ohlcBarThicknessPixels||10,this.Sw=this.rs.ohlcBarStrokeStylePositive,this.bw=this.rs.ohlcBarStrokeStyleNegative,this.xw=s.iA(this.scale).Hr(this.Sw),this.ne(this.xw),this.Mw=s.iA(this.scale).Hr(this.Sw),this.Mw.jc={x:-this.rw/2,y:0},this.ne(this.Mw),this.ww=s.iA(this.scale).Hr(this.Sw),this.ww.jc={x:this.rw/2,y:0},this.ne(this.ww),this._w=s.iA(this.scale).Hr(this.bw),this.ne(this._w),this.kw=s.iA(this.scale).Hr(this.bw),this.kw.jc={x:-this.rw/2,y:0},this.ne(this.kw),this.Cw=s.iA(this.scale).Hr(this.bw),this.Cw.jc={x:this.rw/2,y:0},this.ne(this.Cw)}setStrokeStylePositive(t){return this.Sw="function"==typeof t?t(this.Sw):t,this.xw.Hr(this.Sw),this.Mw.Hr(this.Sw),this.ww.Hr(this.Sw),this.chart.Ki.fe(),this}getStrokeStylePositive(){return this.Sw}setStrokeStyleNegative(t){return this.bw="function"==typeof t?t(this.bw):t,this._w.Hr(this.bw),this.kw.Hr(this.bw),this.Cw.Hr(this.bw),this.chart.Ki.fe(),this}getStrokeStyleNegative(){return this.bw}Vr(){return{fill:this.Sw.getFillStyle(),fill2:this.bw.getFillStyle(),behavior:{colorStep:!0}}}setFigureWidth(t){return super.setFigureWidth(t),this.Mw.jc={x:-t/2,y:0},this.kw.jc={x:-t/2,y:0},this.ww.jc={x:t/2,y:0},this.Cw.jc={x:t/2,y:0},this}nw(){return this._w.ws(),this.xw.ws(),this.kw.ws(),this.Mw.ws(),this.Cw.ws(),this.ww.ws(),this}aw(t,i){return this.xw._a().eA({x:t,y:i[3]},{x:t,y:i[2]}),this.Mw._a().eA({x:t,y:i[1]},{x:t,y:i[1]}),this.ww._a().eA({x:t,y:i[4]},{x:t,y:i[4]}),this}lw(t,i){return this._w._a().eA({x:t,y:i[3]},{x:t,y:i[2]}),this.kw._a().eA({x:t,y:i[1]},{x:t,y:i[1]}),this.Cw._a().eA({x:t,y:i[4]},{x:t,y:i[4]}),this}}const lA={Candlesticks:oA,Bars:aA},uA=i=>({defaultDragMouseStyle:t.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...tf(i,((t,i)=>t.gx(i)),((t,i)=>t.Ax(i)),(t=>t.Xh().x))}),cA=i=>({defaultDragMouseStyle:t.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...tf(i,((t,i)=>t.mx(i)),((t,i)=>t.yx(i)),(t=>t.Xh().y))});class dA extends Cf{constructor(t,i,s,e,r,n,h,o){super(t,i,s,e,r,o),this.Tw=!1,this.Fw=!1,this.Iw=!1,this.Lw=!1,this.Pw=!1,this.Bw=new Map,this.Dw=new Map,this.Ew=[],this.Rw=[],this.Ow=!0,this.zw=!0,this.Vw=!1,this.Nw=[],this.Gw=new Set,this.$w=!1,this.Pm=r,this.Uw=n,this.jw=h,this.Yw=o.cursorGridStrokeStyleX,this.Hw=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.Tw=t,this.ke.fe(),this}getKeepWithinAxisBoundaries(){return this.Tw}dispose(){return super.dispose(),this.Bw.forEach((t=>t.forEach((t=>t.dispose())))),this.Dw.forEach((t=>t.forEach((t=>t.dispose())))),this.Ew.length=0,this.Rw.length=0,this.Fm.length=0,this}Or(){return this.Vw&&this.Xi&&this.setPosition(...this.Nw),this.Bw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.Dw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.Ew.forEach((t=>t.setVisible(this.Xi&&this.ng).setMarkerVisible(this.Xi&&this.ng&&this.Ow))),this.Rw.forEach((t=>t.setVisible(this.Xi&&this.ng).setMarkerVisible(this.Xi&&this.ng&&this.zw))),super.Or()}Rm(){if(!this.Tw)return super.Rm();const i=this.Bm,s=i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),r=i.getPosition(e(1,1),t.UISpace.PaddedBackground),n=this.Nw.map((t=>{const e=t.pointMarkerScale.x,n=t.pointMarkerScale.y,h=Je({x:e.ji.Lt,y:n.ji.Lt},{x:e,y:n},i.scale),o=Je({x:e.ji.Pt,y:n.ji.Pt},{x:e,y:n},i.scale),a={x:jr(s.x,h.x,o.x),y:jr(s.y,h.y,o.y)},l={x:jr(r.x,h.x,o.x),y:jr(r.y,h.y,o.y)};return{axisX:e,axisY:n,a:h,b:o,visibleArea:Math.abs(l.x-a.x)*Math.abs(l.y-a.y),clampMin:a,clampMax:l,tableMin:s,tableMax:r}}));n.sort(((t,i)=>i.visibleArea-t.visibleArea));const h=n[0];if(!h)return super.Rm();const o=fh(h.tableMin.x,h.a.x,h.b.x)&&fh(h.tableMax.x,h.a.x,h.b.x),a=fh(h.tableMin.y,h.a.y,h.b.y)&&fh(h.tableMax.y,h.a.y,h.b.y);return{x:!o,y:!a,either:!o||!a,resultTableViewport:{x:h.axisX,y:h.axisY},resultTableViewportBounds:{x:{min:Math.min(h.axisX.ji.Lt,h.axisX.ji.Pt),max:Math.max(h.axisX.ji.Lt,h.axisX.ji.Pt)},y:{min:Math.min(h.axisY.ji.Lt,h.axisY.ji.Pt),max:Math.max(h.axisY.ji.Lt,h.axisY.ji.Pt)}}}}setPosition(...t){t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.Nw=t,this.Ew.length=0,this.Rw.length=0;const i=this.renderingScale;if(t.length>0){const s=t[0].resultTable,e=kd(t[0].resultTableScale,i),r=e===this.scale?s:Je(s,e,this.scale);this.Bm.setPosition(r)}this.ng=!1,this.km.forEach((t=>{t.targetVisible=!1}));const s=new Map;t.forEach(((t,r)=>{const n=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=s.get(n)||[],a=s.get(h)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),s.set(n,o),s.set(h,a);const c=t.pointMarker,d=AA(e(c.x,c.y),n,h);if(l){const t=this.Ww(n,!0);t.setValue(c.x),t.setGridStrokeLength(this.Fw?d.x:1).setAllocatesAxisSpace(this.$w),this.Ew.push(t)}if(u){const t=this.Ww(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.Iw?d.y:1).setAllocatesAxisSpace(this.$w),this.Rw.push(t)}let f=this.km[r];if(!f){const t=new ec(this.ke,this.renderingScale,this.scale,$r,this.rs).setPointerEvents(!1).setFillStyle(this.rs.cursorPointMarkerFillStyle).setStrokeStyle(this.rs.cursorPointMarkerStrokeStyle).setSize(this.rs.cursorPointMarkerSize).setShape(this.rs.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.km.push(f),this.Fm.forEach((i=>i(t)))}void 0!==t.pointMarkerShape&&f.pointMarker.setShape(t.pointMarkerShape),void 0!==t.pointMarkerSize&&f.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&f.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&f.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle);const v=kd(t.pointMarkerScale,i),A=v===this.scale?t.pointMarker:Je(t.pointMarker,v,this.scale);f.pointMarker.setPosition(A),f.targetVisible=!0;const g=n.getInterval(),y=h.getInterval(),p=Math.min(g.start,g.end),m=Math.max(g.start,g.end),S=Math.min(y.start,y.end),b=Math.max(y.start,y.end);c.x>=p&&c.x<=m&&c.y>=S&&c.y<=b&&(this.ng=!0)}));for(const t of this.km)t.targetVisible||(t.pointMarker.dispose(),this.km.splice(this.km.indexOf(t),1));return this}setTickMarkersAllocateAxisSpace(t){return this.$w=t,this.ke.fe(),this}getTickMarkersAllocateAxisSpace(){return this.$w}Ww(t,i){this.Gw.has(t)||(t.addEventListener("dispose",(()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.Gw.add(t));const s=i?this.Bw:this.Dw,e=i?this.Ew:this.Rw,r=s.get(t)||[];s.set(t,r);let n=r.find((t=>!e.includes(t)));return n||(n=i?t.vA(!1,this.Uw):t.vA(!1,this.jw),r.push(n),this.Bh(n,i),n.setPointerEvents(!1)),n}Bh(t,i){const s=i?this.Yw:this.Hw;return t.setGridStrokeStyle(s),t.setPointerEvents(!1),(i?this.Ow:this.zw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.Fw=t,this.ke.fe(),this}getGridStrokeXCut(){return this.Fw}setGridStrokeYCut(t){return this.Iw=t,this.ke.fe(),this}getGridStrokeYCut(){return this.Iw}setGridStrokeXStyle(t){return this.Yw=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.Bw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.Yw))))),this}getGridStrokeXStyle(){return this.Yw}setGridStrokeYStyle(t){return this.Hw=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.Dw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.Hw))))),this}getGridStrokeYStyle(){return this.Hw}setTickMarkerXVisible(t){return this.Ow=t,this.ke.fe(),this}getTickMarkerXVisible(){return this.Ow}setTickMarkerYVisible(t){return this.zw=t,this.ke.fe(),this}getTickMarkerYVisible(){return this.zw}setTickMarkerX(t){return this.Bw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.Uw=this.Uw.addStyler(t),this.ke.fe(),this}setTickMarkerY(t){return this.Dw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.jw=this.jw.addStyler(t),this.ke.fe(),this}}class fA{constructor(t,i,s,e){this.Ym=[],this.Hm=(t,i)=>(this.Ym.forEach((s=>s(t,i))),t),this.addStyler=t=>new fA(this.Pm,this.Uw,this.jw,this.Ym.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new fA(t,this.Uw,this.jw,this.Ym.map((t=>t))),this.Wm=(t,i,s,e,r)=>this.Hm(new dA(t,i,s,e,this.Pm,this.Uw,this.jw,r),r),this.Pm=t,this.Ym=e,this.Uw=i,this.jw=s}}const vA=new fA(qu,Bc.PointableTextBox,Bc.PointableTextBox,[(t,i)=>{Tf(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Nl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Nl(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),AA=(t,i,s)=>{const r=i.ji,n=s.ji;let h=(t.x-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart()),o=(t.y-n.getInnerStart())/(n.getInnerEnd()-n.getInnerStart());return 1===s.Lv&&(h=1-h),1===i.Lv&&(o=1-o),e(o,h)};class gA{constructor(t,i,s,e){this.Xw=!1,this._t=new Ar,this.chart=s,this.Zw=e,this.Ke=t.Ke,this.nr=e||nl,this.Jw=Or.document.createElement("div"),this.Jw.style.position="absolute",this.Jw.style.pointerEvents="none",Or.document.body.append(this.Jw);const r=()=>{const t=s.engine.container.getBoundingClientRect();this.Jw.style.left=`${t.left}px`,this.Jw.style.top=`${t.top}px`,this.Jw.style.width=`${t.width}px`,this.Jw.style.height=`${t.height}px`};r(),s.addEventListener("resize",r),this.Qw(this.Jw),this.Kw(),this.qw(),this.t_(),this.i_(i),this.chart.s_().push(this)}Qw(t){this.e_=Or.document.createElement("div"),this.e_.style.pointerEvents="all",t.append(this.e_),this.r_=Or.document.createElement("div"),this.n_=new Ja(this.Ke,this.nr,this.chart,this.r_),this.h_=Or.document.createElement("table"),this.h_.style.borderSpacing="0",this.e_.appendChild(this.n_.gr()),this.e_.appendChild(this.r_),this.r_.appendChild(this.h_)}qw(){let t=0,i=0,s=0,e=0,r=!1;this.Xw=!1,this.e_.onmousedown=n=>{n=n||Or.event,s=n.clientX,e=n.clientY,r=!0,Or.document.onmouseup=t=>{this.Xw?this.e_.addEventListener("click",un,!0):this.e_.removeEventListener("click",un,!0),r=!1,this.Xw=!1,Or.document.onmouseup=null,Or.document.onmousemove=null},Or.document.onmousemove=n=>{n=n||Or.event,r&&(t=s-n.clientX,i=e-n.clientY,s=n.clientX,e=n.clientY,this.Xw=!0,this.e_.style.top=this.e_.offsetTop-i+"px",this.e_.style.left=this.e_.offsetLeft-t+"px",this.e_.style.removeProperty("right"),this.e_.style.removeProperty("bottom"))}}}t_(){let t=0,i=0,s=0,e=0,r=!1;this.e_.ontouchstart=n=>{n=n||Or.event,s=n.touches[0].clientX,e=n.touches[0].clientY,r=!0,this.e_.ontouchend=()=>{r=!1,Or.document.ontouchend=null,Or.document.ontouchmove=null},this.e_.ontouchmove=n=>{r&&(un(n),n=n||Or.event,t=s-n.touches[0].clientX,i=e-n.touches[0].clientY,s=n.touches[0].clientX,e=n.touches[0].clientY,this.e_.style.top=this.e_.offsetTop-i+"px",this.e_.style.left=this.e_.offsetLeft-t+"px",this.e_.style.removeProperty("right"),this.e_.style.removeProperty("bottom"))}}}Kw(){this.e_.style.setProperty("top","10px"),this.e_.style.setProperty("left","10px"),this.e_.style.position="absolute",this.e_.style.display="flex",this.e_.style.alignItems="flex-start",this.r_.style.setProperty("display","none")}removePositionProperty(){this.e_.style.removeProperty("top"),this.e_.style.removeProperty("left"),this.e_.style.removeProperty("bottom"),this.e_.style.removeProperty("right")}setPositionProperty(i){switch(this.removePositionProperty(),i){case t.OSMPosition.BottomLeft:this.e_.style.setProperty("bottom","10px"),this.e_.style.setProperty("left","10px");break;case t.OSMPosition.TopLeft:this.e_.style.setProperty("top","10px"),this.e_.style.setProperty("left","10px");break;case t.OSMPosition.BottomRight:this.e_.style.setProperty("bottom","10px"),this.e_.style.setProperty("right","10px");break;case t.OSMPosition.TopRight:default:this.e_.style.setProperty("top","10px"),this.e_.style.setProperty("right","10px")}}i_(t){for(let i=0;i<t.length;i+=1){const s=this.h_.insertRow();for(let e=0;e<t[i].length;e+=1){const r=s.insertCell(),n=t[i][e];"object"!=typeof n?this.o_(n,r):this.addCustomButton(n,r)}}}o_(i,s){switch(i){case t.OnScreenMenuButtonType.ZoomIn:this.a_(new Ga(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomInX:this.a_(new $a(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomInY:this.a_(new Ua(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomOut:this.a_(new ja(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomOutX:this.a_(new Ya(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomOutY:this.a_(new Ha(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ZoomToFit:this.a_(new Xa(this.Ke,this.chart,this.nr),s);break;case t.OnScreenMenuButtonType.ToggleAnimations:this.a_(new Wa(this.Ke,this.chart,this.nr),s);break;default:console.error(`No predefined button like "${t.OnScreenMenuButtonType[i]}" exists.`)}}a_(t,i){i.rowSpan=t.qe.rows,i.colSpan=t.qe.columns,t.Ar(i)}addCustomButton(t,i){const s=new Za(this.Ke,t,this.chart);return this.a_(s,i),this}dispose(){this.Jw.remove(),this._t.kt("dispose",{})}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class yA extends Lv{constructor(t,i,s,e,r,n,h,o,a,l,u,c){var d;super(t,i,s,e,r,n,h,o,a,l),this.l_=t=>{this._t.kt(t.type,t)},this.u_=0,this._t=new Ar,this.fl=c,this.hd=this.ke.yf(this.scale).Hr(Bn(this.rs.lineSeriesStrokeStyle,u)).Af(Bn(this.rs.pointSeriesFillStyle,u)).Mf(Bn(this.rs.pointSeriesStrokeStyle,u)).gf(Bn(this.rs.areaSeriesPositiveFillStyle,u)).c_(void 0)._f(7),this.hd.d_=!1!==(null===(d=this.fl)||void 0===d?void 0:d.allowDataGrouping),this.ne(this.hd)}Qg(){return this.f_().getSampleCount()>0}re(){return this.getDataSet().Ld(this.v_)}setDataSet(t,i){var s;const e=null===(s=this.ff)||void 0===s?void 0:s.zs;if(t===e&&i&&this.v_&&Vu(i,this.v_))return this;const r=["change","clear","loop","maxsamplecountexceed"];return e&&r.forEach((t=>e.removeEventListener(t,this.l_))),t?(r.forEach((i=>t.addEventListener(i,this.l_))),!i&&t.Md&&(i=this.A_(t.Md)),i&&t.Ud(i),this.v_=i,this.g_=!1,(null==i?void 0:i.color)&&this.chart.Ki.ul(jl.ya),(null==i?void 0:i.size)&&this.chart.Ki.ul(jl.ga),this.ff=Xn(t,this.ff,(()=>({change:()=>{this.u_+=1,this.u_>1&&this.chart.Ki.ul(jl.Aa),this.chart.Ki.fe()},clear:()=>{this.chart.Ki.fe()}}))),i&&this.hd.vf(t,i),this.chart.Ki.fe(),this):(this.hd.vf(),this)}getDataSet(){return this.f_()}setDataMapping(t){var i;return(null===(i=this.ff)||void 0===i?void 0:i.zs)?this.setDataSet(this.getDataSet(),t):this.v_=t,this.g_=!1,this}getDataMapping(){return this.v_}setStrokeStyle(t){return this.hd.Hr(t),this.ke.fe(),this}getStrokeStyle(){return this.hd.Ho()}setAreaFillStyle(t){return this.hd.gf(t),this.ke.fe(),this}getAreaFillStyle(){return this.hd.y_()}setPointFillStyle(t){return this.hd.Af(t),this.ke.fe(),this}getPointFillStyle(){return this.hd.xf()}setPointStrokeStyle(t){return this.hd.Mf(t),this.ke.fe(),this}getPointStrokeStyle(){return this.hd.wf()}setPointSize(t){return this.hd._f(t),this.ke.fe(),this}getPointSize(){return this.hd.p_()}setPointShape(t){return this.hd.pf(t),this.ke.fe(),this}getPointShape(){return this.hd.mf()}setPointRotation(t){return this.hd.Sf(t),this.ke.fe(),this}getPointRotation(){return this.hd.bf()}setPointAlignment(t){return this.hd.MA(t),this.chart.Ki.fe(),this}getPointAlignment(){return this.hd.m_()}setCurvePreprocessing(t){return this.hd.c_(t),this.ke.fe(),this}getCurvePreprocessing(){return this.hd.S_()}appendJSON(t,i,s){return this.f_().appendJSON(t,i,s),this.ke.Ki.fe(),this}appendSample(t,i){return this.f_().appendSample(t,i),this.ke.Ki.fe(),this}appendSamples(t,i){return this.f_().appendSamples(t,i),this.ke.Ki.fe(),this}fill(t){return this.f_().fill(t),this.ke.fe(),this}setSamples(t,i){return this.f_().setSamples(t,i),this.ke.fe(),this}alterSamplesStartingFrom(t,i,s){return this.f_().alterSamplesStartingFrom(t,i,s),this.ke.fe(),this}alterSamplesByIndex(t,i){return this.f_().alterSamplesByIndex(t,i),this.ke.fe(),this}alterSamplesByMatch(t,i,s){return this.f_().alterSamplesByMatch(t,i,s),this.ke.fe(),this}getSampleCount(){return this.f_().getSampleCount()}getNextSampleIndex(){return this.f_().getNextSampleIndex()}setMaxSampleCount(t){return this.f_().setMaxSampleCount(t),this.ke.fe(),this}getMaxSampleCount(){return this.f_().getMaxSampleCount()}clear(){return this.f_().clear(),this.ke.fe(),this}readBack(t){if(this.v_||this.b_(),!this.v_)return{xValues:new Float64Array,yValues:new Float64Array,iSampleFirst:0};const i=this.f_();if(null==t?void 0:t.onlyInRange){const s=i.Ld(this.v_),e=s&&Oo(s);if(!e)throw new Error("LightningChart JS - attempted to use `PointLineAreaSeries.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");const r=this.v_[e];return i.$d(this.v_,{onlyInRange:{key:r,start:t.onlyInRange.start,end:t.onlyInRange.end}})}return i.$d(this.v_)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){this.v_||this.b_();let s=qy(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.x_(),r=So(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,n=e.Jd(this.v_,r,s,this.scale,this.chart.Rv);if(void 0!==n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}}Es(t,i,s){const e=this.getDataSet(),r=null==t?void 0:t.dataPoint;return void 0===e.Ld(this.v_)||r?r?{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}:void 0:Zn({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0,sample:0,pointShape:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}x_(){return this.f_()}Me(){return In(this.getPointFillStyle(),this.hd.ls())||In(this.getStrokeStyle().getFillStyle(),this.hd.ls())||In(this.getAreaFillStyle(),this.hd.ls())}qg(){var t;const i=null===(t=this.ff)||void 0===t?void 0:t.zs;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.fd>0}lx(t){}Ax(t){this.v_||this.b_();const i=this.hd.Vl();return i&&"y"===i.M_&&t&&i.w_(),this.hd.Ps(t)}gx(t){this.v_||this.b_();const i=this.hd.Vl();return i&&"y"===i.M_&&t&&i.w_(),this.hd.Ls(t)}yx(t){this.v_||this.b_();const i=this.hd.Vl();return i&&"x"===i.M_&&!t&&i.w_(),this.hd.Ds(t)}mx(t){this.v_||this.b_();const i=this.hd.Vl();return i&&"x"===i.M_&&t&&i.w_(),this.hd.Bs(t)}Xh(){return{x:this.hd.$u(),y:this.hd.Uu()}}b_(){var t;const i=null===(t=this.ff)||void 0===t?void 0:t.zs;if((!this.v_||this.g_)&&i&&i.Md){const t=i.Md,s=this.__;let e=!1;if(this.v_&&this.g_&&s){const i=Object.keys(t).length!==Object.keys(s).length,r=Object.entries(t).find((([t,i])=>{var e;return t in s&&s[t]!==(null===(e=i.xd)||void 0===e?void 0:e.effective)}));e=!i&&void 0===r}if(!e){const t=this.A_(i.Md);!t||this.v_&&Vu(this.v_,t)||(this.v_=t,this.g_=!0,t.color&&this.chart.Ki.ul(jl.ya),t.size&&this.chart.Ki.ul(jl.ga),this.hd.vf(i,t)),this.__=Object.fromEntries(Object.entries(i.Md).map((([t,i])=>{var s;return[t,null===(s=i.xd)||void 0===s?void 0:s.effective]})))}}}jg(){var t,i,s,e;if(super.jg(),this.b_(),((null===(t=this.fl)||void 0===t?void 0:t.strictMode)||(null===(i=this.ff)||void 0===i?void 0:i.zs.Sd))&&this.v_&&(null===(s=this.ff)||void 0===s?void 0:s.zs)){const t=this.ff.zs.Md;t&&Object.values(this.v_).forEach((i=>{if(!(i in t))throw new Error(`LightningChart JS error - PointLineAreaSeries data mapping is referencing a data property ('${i}') that doesn't exist in the connected data set. This is not allowed when strict mode is enabled.`)}))}const r=Oo(null!==(e=this.re())&&void 0!==e?e:"ProgressiveX");this.hd.k_("x"===r?0===this.xAxis.Iv?"bottom":"top":0===this.yAxis.Iv?"left":"right")}f_(){var t;if(!this.ff){const t=new Nu(this.fl);return this.setDataSet(t,!0!==this.g_?this.v_:void 0),t}return null===(t=this.ff)||void 0===t?void 0:t.zs}A_(t){var i,s;if((null===(i=this.fl)||void 0===i?void 0:i.strictMode)||(null===(s=this.ff)||void 0===s?void 0:s.zs.Sd))throw new Error("LightningChart JS error - PointLineAreaSeries data mapping is not explicitly defined. This is not allowed when strict mode is enabled.");const e=Object.entries(t),r=e.find((t=>t[0].toLowerCase().includes("x"))),n=e.find((t=>t[0].toLowerCase().includes("y"))),h=e.find((t=>t[0].toLowerCase().includes("size"))),o=e.find((t=>t[0].toLowerCase().includes("rot"))),a=e.find((t=>t[0].toLowerCase().includes("lookup")||t[0].toLowerCase().includes("value")&&!t[0].toLowerCase().includes("y")&&!t[0].toLowerCase().includes("x"))),l=e.find((t=>t[0].toLowerCase().includes("color"))),u={};h&&(u.size=h[0]),o&&(u.rotation=o[0]),a&&(u.lookupValue=a[0]),l&&(u.color=l[0]);const c=e.find((t=>{var i;return Boolean(null===(i=t[1].xd)||void 0===i?void 0:i.effective)})),d=(t,...i)=>{for(const s of i)if(s!==t)return s[0];for(const i of e)if(i!==t&&!Object.keys(u).includes(i[0]))return i[0]};if("xValues"in t&&"yValues"in t)return{...u,x:"xValues",y:"yValues"};if("yValues"in t){const t=d(e.find((t=>"yValues"===t[0])));if(t)return{...u,x:t,y:"yValues"}}if("xValues"in t){const t=d(e.find((t=>"xValues"===t[0])));if(t)return{...u,y:t,x:"xValues"}}if(r&&n)return{...u,x:r[0],y:n[0]};if(c){const t="x",i="y",s=d(c);if(s)return{...u,[t]:c[0],[i]:s}}return e.length>=2?{...u,x:e[0][0],y:e[1][0]}:void 0}Vr(){const t=this.getPointFillStyle(),i=this.getAreaFillStyle();return{stroke:this.getStrokeStyle(),fill:t!==ho?t:i,behavior:{priority:"stroke"}}}we(){return this.Ae||this.getPointShape()}Nr(t,i){t.vs(i),this.ke.fe()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const pA={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},mA=(t,i,s,e)=>{t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const r=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",r),()=>{t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",r)}},SA=(t,i,s,e)=>{const r=[];t.forEachAxis((t=>{const n=i=>s(t,i);t.addEventListener(i,n,e),r.push((()=>t.removeEventListener(i,n)))}));const n=t=>{const n=i=>s(t.axis,i);t.axis.addEventListener(i,n,e),r.push((()=>t.axis.removeEventListener(i,n)))};return t.addEventListener("axisadd",n),r.push((()=>t.removeEventListener("axisadd",n))),()=>{r.forEach((t=>t()))}},bA=(i,s,e)=>{th();const r=new Map;i.forEachAxis((t=>{var i,e;const n=t.Ur.chartInteractions;!1===n||"object"==typeof n&&!1===n.restoreDefault||r.set(t,{animate:null!==(i=s.animationsEnabled)&&void 0!==i?i:void 0,stopAxisAfter:null!==(e=s.stopScroll)&&void 0!==e?e:void 0})})),i.C_(r);let n=s.cursor;if(null!==n){n=null!=n?n:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(n);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const h=s.on;h&&Or.requestAnimationFrame((()=>h({event:e})))},xA=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ji.zt(i),t.axis.Bv.zt(s)})))),MA=e(10,10);var wA;t.AxisPosition=void 0,(wA=t.AxisPosition||(t.AxisPosition={}))[wA.Top=0]="Top",wA[wA.Bottom=1]="Bottom",wA[wA.Left=2]="Left",wA[wA.Right=3]="Right";const _A=new Set([t.AxisPosition.Top,t.AxisPosition.Bottom,t.AxisPosition.Left,t.AxisPosition.Right]),kA=t=>t.setStopped(!0),CA=(t,i)=>{if(!t||!i)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const s="linear-highPrecision"===t.$n.type||"linear-highPrecision"===i.$n.type,e="logarithmic"===t.$n.type||"logarithmic"===i.$n.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.$n.type}, y: ${i.$n.type})`;throw new Error(s)}};var TA,FA,IA;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(TA||(TA={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(FA||(FA={}));class LA extends cf{constructor(i,s,e,r,n,h,o){var a,l,u,c,d;super(i,s,e,s._g("chartXY bg",0),r,s.Ki.rs.chartXYBackgroundFillStyle,s.Ki.rs.chartXYBackgroundStrokeStyle,s.Ki.rs.chartXYTitleFont,s.Ki.rs.chartXYTitleFillStyle,s.Ki.rs.chartXYTitleShadow,o,null===(a=null==h?void 0:h.legend)||void 0===a?void 0:a.customLegend),this.T_=this.cg.d2({scaleXYConstructor:He}),this.lA=[],this.uA=[],this.dA=[],this.cA=[],this.F_=new Map,this.I_=!0,this.L_=[],this.P_=this.rs.chartXYZoomingRectangleFillStyle,this.B_=this.rs.chartXYZoomingRectangleStrokeStyle,this.rA=PA,this.ox=0,this.sS=[],this.rS=()=>{if(this.Wi)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Xv().find((t=>t.Qg()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.sS.push(t),this.sS.length>100&&this.sS.shift())},this.D_=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&fh(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&fh(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.E_=xA(this.uA,this.lA),this.R_=xA(this.dA,this.cA),this.O_=t=>{this.E_(t.engineWidth,t.engineHeight),this.R_(t.engineHeight,t.engineWidth),this.T_.zt(t.engineWidth,t.engineHeight),this.Ki.fe()},this.z_=(t,i)=>{this.F_.set(t,i)},this.Cv=t=>{const i=this.uA.findIndex((i=>i.axis===t)),s=this.lA.findIndex((i=>i.axis===t)),e=this.dA.findIndex((i=>i.axis===t)),r=this.cA.findIndex((i=>i.axis===t));i>=0&&this.uA.splice(i,1),s>=0&&this.lA.splice(s,1),e>=0&&this.dA.splice(e,1),r>=0&&this.cA.splice(r,1),this.F_.delete(t),this.Ki.fe()},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new nA(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(e,t),e},this._t=new Ar,this.Ki.ul(jl.ua),this.ro({left:null!==(l=this.rs.panelPadding)&&void 0!==l?l:7,right:null!==(u=this.rs.panelPadding)&&void 0!==u?u:7,top:null!==(c=this.rs.panelPadding)&&void 0!==c?c:7,bottom:null!==(d=this.rs.panelPadding)&&void 0!==d?d:7},!1),this.N_=s.vS("chartXY series bg",TA.seriesBackground),this.G_=[TA.gridLine0,TA.gridLine1,TA.gridLine2].map((t=>s.U_(`chartXY gridline #${t}`,t))),this._v=s.U_("chartXY highlighters below",TA.highlightersBelow),this.WS=s.AS("chartXY plotting",FA.plotting),this.kv=s.AS("chartXY highlighters above",FA.highlightersAbove),this.wv=s.AS("chartXY fg",FA.fg),this.T_.x.Rt(0,this.uiScale.x.getCellSize()-(this.Zt.left+this.Zt.right+this.xo.left+this.xo.right)),this.T_.y.Rt(0,this.uiScale.y.getCellSize()-(this.Zt.bottom+this.Zt.top+this.xo.bottom+this.xo.top)),this.T_.zt(this.uiScale.li().x,this.uiScale.li().y),this.ip=this.N_.Rr(this.T_).Er(this.rs.chartXYSeriesBackgroundFillStyle).Dr(_r),this.sp=this.N_.Rr(this.T_).Er(ho).Dr(this.rs.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.tp(this.ip,this.sp),this.setSeriesBackgroundEffect(!1);const f=Hr(h?h.cursorBuilder:void 0,vA),v=s.xS();this.MS=rp(this,v,f.Wm(v,this.T_,this.T_,$r,this.rs),this,"show-all",OA,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(h&&h.defaultAxisX),this.addAxisY(h&&h.defaultAxisY),this.addEventListener("resize",this.O_),this._n.Eh("ChartXY"),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.wg(n,this.T_),this.wS=(i=>{let s={},e=!1,r=!1,n=!1;const h=()=>{var t;const e=i.getAxes().find((t=>{var i,s;return(null===(i=t.getScrollStrategy())||void 0===i?void 0:i.id)===dl||(null===(s=t.getScrollStrategy())||void 0===s?void 0:s.id)===fl})),r=i.getSeries().map((t=>t.re())).find((t=>t)),n=i.getSeries().find((t=>t instanceof yA&&!oo(t.getAreaFillStyle())&&t.re())),h=e?{type:"scrolling",scrollingAxis:e,x:e.isX,y:e.isY}:r?{type:"progressive",x:"ProgressiveX"===r||"RegressiveX"===r,y:"ProgressiveY"===r||"RegressiveY"===r}:{type:"freeform"};if("progressive"===h.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},i={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return Er({rectangleZoom:{x:h.x,y:h.y,rmb:!1},pan:{x:h.x,y:h.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:!1,zoom:{x:h.x,y:h.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:h.x?t:i,yAxis:h.y?t:i},s)}if("scrolling"===h.type){const i=((null===(t=h.scrollingAxis.Ah)||void 0===t?void 0:t.id)===fl?-1:1)*(h.scrollingAxis.getInterval().end>h.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",e={zoom:{wheel:{},stopScroll:!1,mode:i},pan:{drag:{}},restoreDefault:{doubleClick:!0}},r={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return Er({rectangleZoom:!1,pan:{x:h.x,y:h.y,pinch:{},drag:{}},paginate:!1,zoom:{x:h.x,y:h.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:i},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:h.x?e:r,yAxis:h.y?e:r},s)}return Er({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},s)},o=t=>{const i=h(),s=t.getUserInteractions();let e=t.isX?i.xAxis:i.yAxis,r=i.axes;return e=!1!==e?e:pA,r=!1!==r?r:pA,Er(null!=r?r:{},null!=e?e:{},s)},a=t=>{},l=s=>{if(!i.axisX||!i.axisY)return;const o=_o(!1!==i.Ki.fl.vl),a=h(),l=wo(a.pan,"drag",s,e,r,n);l&&o.push((()=>((i,s,e,r)=>{let n;const h=i.getCursorMode();let o=!1,a=s;"mouse"===s.pointerType&&s.preventDefault();const l=r=>{if(r.pointerId!==s.pointerId)return;const h=r.clientX-a.clientX,l=r.clientY-a.clientY;if(a=r,!o){if(!("mouse"===r.pointerType||Math.max(Math.abs(r.clientX-s.clientX),Math.abs(r.clientY-s.clientY))>=10))return;{o=!0;let s=e.cursor;null!==s&&(s=null!=s?s:!1===e.x?t.MouseStyles.Vertical:!1===e.y?t.MouseStyles.Horizontal:t.MouseStyles.Move,n=i.engine.setMouseStyle(s)),i.setCursorMode(void 0),qn()}}un(r),e.x&&i.forEachAxisX((t=>{var i;const s=t.Ur.chartInteractions;!1===s||"object"==typeof s&&!1===s.pan||(!1!==e.stopScroll&&t.setStopped(!0),t.pan(-h*(null!==(i=e.sensitivity)&&void 0!==i?i:1)))})),e.y&&i.forEachAxisY((t=>{var i;const s=t.Ur.chartInteractions;!1===s||"object"==typeof s&&!1===s.pan||(!1!==e.stopScroll&&t.setStopped(!0),t.pan(l*(null!==(i=e.sensitivity)&&void 0!==i?i:1)))}));const u=e.on;u&&Or.requestAnimationFrame((()=>u({event:r})))},u=t=>{t.pointerId===s.pointerId&&(Or.removeEventListener("pointermove",l),Or.removeEventListener("pointerup",u),i.engine.container.removeEventListener("pointerdown",c),n=i.engine.restoreMouseStyle(n),r(),i.setCursorMode(h),o&&(Kn("click"),Kn("contextmenu")))},c=t=>{t.pointerId!==s.pointerId&&(Or.removeEventListener("pointermove",l),Or.removeEventListener("pointerup",u),i.engine.container.removeEventListener("pointerdown",c),n=i.engine.restoreMouseStyle(n),r(),i.setCursorMode(h))};Or.addEventListener("pointermove",l),Or.addEventListener("pointerup",u),i.engine.container.addEventListener("pointerdown",c),th()})(i,s,l,v())));const u=wo(a.zoom,"drag",s,e,r,n);u&&o.push((()=>((i,s,e,r)=>{let n;const h=e.cursor;if(null!==h){let s="function"==typeof h?h("in"):h;null!==s&&(s=null!=s?s:t.MouseStyles.ZoomIn,n=i.engine.setMouseStyle(s))}const o=i.getCursorMode();i.setCursorMode(void 0);let a=!1,l=s;"mouse"===s.pointerType&&s.preventDefault();const u=r=>{if(r.pointerId!==s.pointerId)return;un(r);const o={x:r.clientX-l.clientX,y:r.clientY-l.clientY};l=r,e.x&&i.forEachAxisX((r=>{var a;const l=r.Ur.chartInteractions;if(!1===l||"object"==typeof l&&!1===l.zoom)return;let u;u="keep-start"===e.mode?r.getInterval().start:"keep-end"===e.mode?r.getInterval().end:"centered"===e.mode?r.ji.mi((r.ji.ni()+r.ji.hi())/2):i.translateCoordinate(s,{x:r,y:r}).x;const c=.05*r.Nn.getWidth({x:-o.x,y:o.y})*(null!==(a=e.sensitivity)&&void 0!==a?a:1);if(r.zoom(u,c),!1!==e.stopScroll&&r.setStopped(!0),null!==h){let s="function"==typeof h?h(c<0?"in":"out"):h;null!==s&&(s=null!=s?s:c<0?t.MouseStyles.ZoomIn:t.MouseStyles.ZoomOut,n=i.engine.setMouseStyle(s,n))}})),e.y&&i.forEachAxisY((r=>{var a;const l=r.Ur.chartInteractions;if(!1===l||"object"==typeof l&&!1===l.zoom)return;let u;u="keep-start"===e.mode?r.getInterval().start:"keep-end"===e.mode?r.getInterval().end:"centered"===e.mode?r.ji.mi((r.ji.ni()+r.ji.hi())/2):i.translateCoordinate(s,{x:r,y:r}).y;const c=.05*r.Nn.getWidth({x:-o.x,y:o.y})*(null!==(a=e.sensitivity)&&void 0!==a?a:1);if(r.zoom(u,c),!1!==e.stopScroll&&r.setStopped(!0),null!==h){let s="function"==typeof h?h(c<0?"in":"out"):h;null!==s&&(s=null!=s?s:c<0?t.MouseStyles.ZoomIn:t.MouseStyles.ZoomOut,n=i.engine.setMouseStyle(s,n))}})),a||(qn(),a=!0);const u=e.on;u&&Or.requestAnimationFrame((()=>u({event:r})))},c=t=>{t.pointerId===s.pointerId&&(Or.removeEventListener("pointermove",u),Or.removeEventListener("pointerup",c),i.engine.container.removeEventListener("pointerdown",d),n=i.engine.restoreMouseStyle(n),r(),i.setCursorMode(o))},d=t=>{t.pointerId!==s.pointerId&&(Or.removeEventListener("pointermove",u),Or.removeEventListener("pointerup",c),i.engine.container.removeEventListener("pointerdown",d),n=i.engine.restoreMouseStyle(n),r(),i.setCursorMode(o))};Or.addEventListener("pointermove",u),Or.addEventListener("pointerup",c),i.engine.container.addEventListener("pointerdown",d),th()})(i,s,u,v())));const c=wo(a.rectangleZoom,void 0,s,e,r,n);c&&o.push((()=>((i,s,e,r)=>{let n;const h=i.getCursorMode(),o=i.addRectangleSeries({legend:null}).setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),a=o.add({x1:0,x2:0,y1:0,y2:0});let l=!1,u=!1;"mouse"===s.pointerType&&s.preventDefault();const c=r=>{if(r.pointerId!==s.pointerId)return;un(r),e.x&&i.forEachAxisX((t=>{const i=t.Ur.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)})),e.y&&i.forEachAxisY((t=>{const i=t.Ur.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)}));const o=i.translateCoordinate(s,i.coordsAxis),c=i.translateCoordinate(r,i.coordsAxis),d=Je({x:0,y:0},i.T_,i.coordsAxis),f=Je({x:i.T_.x.getInnerEnd(),y:i.T_.y.getInnerEnd()},i.T_,i.coordsAxis);!1===e.x?a.setDimensions({y1:o.y,x1:d.x,y2:c.y,x2:f.x}):!1===e.y?a.setDimensions({x1:o.x,y1:d.y,x2:c.x,y2:f.y}):a.setDimensions({x1:o.x,y1:o.y,x2:c.x,y2:c.y});const v=vh({x:r.clientX,y:r.clientY},{x:e.x?s.clientX:r.clientX,y:e.y?s.clientY:r.clientY})>=20,A=fh(c.x,d.x,f.x)&&fh(c.y,d.y,f.y);if(a.setFillStyle(v&&A?i.getZoomingRectangleFillStyle():ho).setStrokeStyle(v&&A?i.getZoomingRectangleStrokeStyle():_r),l||(qn(),l=!0),i.setCursorMode(v?void 0:h),v){let s=e.cursor;if(null!==s&&(s=null!=s?s:t.MouseStyles.ZoomIn,n=i.engine.setMouseStyle(s,n)),!u){const t=e.start;t&&t({event:r})}}else n=i.engine.restoreMouseStyle(n);u=v},d=t=>{if(t.pointerId!==s.pointerId)return;const a=vh({x:t.clientX,y:t.clientY},{x:e.x?s.clientX:t.clientX,y:e.y?s.clientY:t.clientY})>=20,l=i.translateCoordinate(t,i.coordsAxis),u=Je({x:0,y:0},i.T_,i.coordsAxis),v=Je({x:i.T_.x.getInnerEnd(),y:i.T_.y.getInnerEnd()},i.T_,i.coordsAxis),A=fh(l.x,u.x,v.x)&&fh(l.y,u.y,v.y);a&&A&&i.forEachAxis((r=>{var n,h;if(r.isX&&!e.x)return;if(r.isY&&!e.y)return;const o=r.Ur.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.rectangleZoom)return;const a=i.translateCoordinate(s,{x:r,y:r}),l=i.translateCoordinate(t,{x:r,y:r}),u=r.Nn.getWidth(a),c=r.Nn.getWidth(l),d=Math.sign(c-u),f=Math.sign(r.getInterval().end-r.getInterval().start),v=d===f?u:c,A=d===f?c:u;r.Yi(v,A,null!==(n=e.animationsEnabled)&&void 0!==n?n:void 0,null!==(h=e.stopScroll)&&void 0!==h?h:void 0,"interactionSetInterval")})),a&&(Kn("click"),Kn("contextmenu")),i.setCursorMode(h),o.dispose(),Or.removeEventListener("pointermove",c),Or.removeEventListener("pointerup",d),i.engine.container.removeEventListener("pointerdown",f),n=i.engine.restoreMouseStyle(n),r();const g=a&&A&&e.on;g&&Or.requestAnimationFrame((()=>g({event:t})))},f=t=>{t.pointerId!==s.pointerId&&(i.setCursorMode(h),o.dispose(),Or.removeEventListener("pointermove",c),Or.removeEventListener("pointerup",d),i.engine.container.removeEventListener("pointerdown",f),n=i.engine.restoreMouseStyle(n),r())};Or.addEventListener("pointermove",c),Or.addEventListener("pointerup",d),i.engine.container.addEventListener("pointerdown",f),th()})(i,s,c,v()))),o.end();const d=wo(a.pan,"pinch",s,e,r,n),f=wo(a.zoom,"pinch",s,e,r,n);(f||d)&&((t,i,s,e,r)=>{if(!s&&!e)return;const n=o=>{if(o.pointerId===i.pointerId)return;const a=r();let l;t.engine.container.removeEventListener("pointerdown",n),Or.removeEventListener("pointerup",h);let u=o;const c=t.getCursorMode();t.setCursorMode(void 0);const d=r=>{var n,h,a,c;const d=l,f=u;if(r.pointerId===i.pointerId)l=r;else{if(r.pointerId!==o.pointerId)return;u=r}if(un(r),void 0===l||void 0===d)return;const v={x:(l.clientX-d.clientX+(u.clientX-f.clientX))/2*(null!==(n=null==s?void 0:s.sensitivity)&&void 0!==n?n:1),y:(l.clientY-d.clientY+(u.clientY-f.clientY))/-2*(null!==(h=null==s?void 0:s.sensitivity)&&void 0!==h?h:1)};let A=!1;if(s&&s.x&&(A=!0,t.forEachAxisX((t=>{const i=t.Ur.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.AA({},v)}))),s&&s.y&&(A=!0,t.forEachAxisY((t=>{const i=t.Ur.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.AA({},v)}))),A){const t=null==s?void 0:s.on;t&&Or.requestAnimationFrame((()=>t({event:r})))}const g=Bh(Ph({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-u.clientX),y:Math.abs(l.clientY-u.clientY)}),{x:null!==(a=null==e?void 0:e.sensitivity)&&void 0!==a?a:1,y:null!==(c=null==e?void 0:e.sensitivity)&&void 0!==c?c:1});let y=!1;if(e&&e.x&&(y=!0,t.forEachAxisX((t=>{var i;const s=t.Ur.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.Yi(t.ji.Bi(t.getInterval().start,-t.Nn.getWidth(g)),t.ji.Bi(t.getInterval().end,t.Nn.getWidth(g)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),e&&e.y&&(y=!0,t.forEachAxisY((t=>{var i;const s=t.Ur.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.Yi(t.ji.Bi(t.getInterval().start,-t.Nn.getWidth(g)),t.ji.Bi(t.getInterval().end,t.Nn.getWidth(g)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),y){const t=null==e?void 0:e.on;t&&Or.requestAnimationFrame((()=>t({event:r})))}},f=s=>{s.pointerId!==i.pointerId&&s.pointerId!==o.pointerId||(un(s),t.setCursorMode(c),Or.removeEventListener("pointermove",d),Or.removeEventListener("pointerup",f),a())};Or.addEventListener("pointermove",d),Or.addEventListener("pointerup",f),th()},h=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",n),Or.removeEventListener("pointerup",h))};t.engine.container.addEventListener("pointerdown",n),Or.addEventListener("pointerup",h)})(i,s,d,f,v)};mA(i,"wheel",(s=>{const o=_o(!1!==i.Ki.fl.vl),a=h(),l=wo(a.pan,"wheel",s,e,r,n);l&&o.push((()=>((i,s,e)=>{if(un(s),i.forEachAxisX((t=>{var i;const r=t.Ur.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||e.x&&(!1!==e.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(s.deltaY)*(null!==(i=e.sensitivity)&&void 0!==i?i:1)))})),i.forEachAxisY((t=>{var i;const r=t.Ur.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||e.y&&(!1!==e.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(s.deltaY)*(null!==(i=e.sensitivity)&&void 0!==i?i:1)))})),e.x||e.y){let r=e.cursor;if(null!==r){r=null!=r?r:!e.x&&e.y?t.MouseStyles.Vertical:e.x&&!e.y?t.MouseStyles.Horizontal:t.MouseStyles.Move;const s=i.engine.setMouseStyle(r);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const n=e.on;n&&Or.requestAnimationFrame((()=>n({event:s})))}})(i,s,l)));const u=wo(a.zoom,"wheel",s,e,r,n);u&&o.push((()=>((i,s,e)=>{un(s),i.forEachAxisX((t=>{var r;const n=t.Ur.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!e.x)return;let h;h="keep-start"===e.mode?t.getInterval().start:"keep-end"===e.mode?t.getInterval().end:"centered"===e.mode?t.ji.mi((t.ji.ni()+t.ji.hi())/2):i.translateCoordinate(s,{x:t,y:t}).x,t.zoom(h,Math.sign(s.deltaY)*(null!==(r=e.sensitivity)&&void 0!==r?r:1)),!1!==e.stopScroll&&t.setStopped(!0)})),i.forEachAxisY((t=>{var r;const n=t.Ur.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!e.y)return;let h;h="keep-start"===e.mode?t.getInterval().start:"keep-end"===e.mode?t.getInterval().end:"centered"===e.mode?t.ji.mi((t.ji.ni()+t.ji.hi())/2):i.translateCoordinate(s,{x:t,y:t}).y,t.zoom(h,Math.sign(s.deltaY)*(null!==(r=e.sensitivity)&&void 0!==r?r:1)),!1!==e.stopScroll&&t.setStopped(!0)}));const r=e.cursor;if(null!==r){let e="function"==typeof r?r(s.deltaY<0?"in":"out"):r;if(null!==e){e=null!=e?e:s.deltaY<0?t.MouseStyles.ZoomIn:t.MouseStyles.ZoomOut;const r=i.engine.setMouseStyle(e);Or.setTimeout((()=>{i.engine.restoreMouseStyle(r)}),500)}}const n=e.on;n&&Or.requestAnimationFrame((()=>n({event:s})))})(i,s,u))),o.end()})),mA(i,"click",(s=>{if(s.defaultPrevented)return;const o=_o(!1!==i.Ki.fl.vl),a=h(),l=wo(a.restoreDefault,void 0,s,e,r,n);l&&l.singleClick&&o.push((()=>{un(s),bA(i,l,s)}));const u=wo(a.restorePrevious,void 0,s,e,r,n);u&&u.singleClick&&o.push((()=>{un(s);const e=i.getAxes().filter((t=>{const i=t.Ur.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));i.restorePreviousZoomState({whitelist:e});let r=u.cursor;if(null!==r){r=null!=r?r:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(r);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const n=u.on;n&&Or.requestAnimationFrame((()=>n({event:s})))})),o.end()})),mA(i,"contextmenu",(s=>{if(s.defaultPrevented)return;const o=_o(!1!==i.Ki.fl.vl),a=h(),l=wo(a.restoreDefault,"rmb",s,e,r,n);l&&l.singleClick&&o.push((()=>{un(s),bA(i,l,s)}));const u=wo(a.restorePrevious,"rmb",s,e,r,n);u&&u.singleClick&&o.push((()=>{un(s);const e=i.getAxes().filter((t=>{const i=t.Ur.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));i.restorePreviousZoomState({whitelist:e});let r=u.cursor;if(null!==r){r=null!=r?r:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(r);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const n=u.on;n&&Or.requestAnimationFrame((()=>n({event:s})))})),o.end()})),mA(i,"dblclick",(s=>{if(s.defaultPrevented)return;const o=_o(!1!==i.Ki.fl.vl),a=h(),l=wo(a.restoreDefault,void 0,s,e,r,n);l&&l.doubleClick&&o.push((()=>{un(s),bA(i,l,s)}));const u=wo(a.restorePrevious,void 0,s,e,r,n);u&&u.doubleClick&&o.push((()=>{un(s);const e=i.getAxes().filter((t=>{const i=t.Ur.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));i.restorePreviousZoomState({whitelist:e});let r=u.cursor;if(null!==r){r=null!=r?r:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(r);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const n=u.on;n&&Or.requestAnimationFrame((()=>n({event:s})))})),o.end()}));const u=(s,h)=>{const a=_o(!1!==i.Ki.fl.vl),l=o(s),u=wo(l.pan,"drag",h,e,r,n);u&&a.push((()=>((i,s,e,r)=>{const n=i.chart,h=n.getCursorMode();let o;n.setCursorMode(void 0);let a=e.cursor;null!==a&&(a=null!=a?a:i.isY?t.MouseStyles.Vertical:t.MouseStyles.Horizontal,o=n.engine.setMouseStyle(a));let l=!1,u=s;"mouse"===s.pointerType&&s.preventDefault();const c=t=>{var r;if(t.pointerId!==s.pointerId)return;un(t);const n=t.clientX-u.clientX,h=t.clientY-u.clientY;u=t,!1!==e.stopScroll&&i.setStopped(!0),i.pan((i.isX?-n:h)*(null!==(r=e.sensitivity)&&void 0!==r?r:1)),l||(qn(),l=!0);const o=e.on;o&&Or.requestAnimationFrame((()=>o({event:t})))},d=t=>{t.pointerId===s.pointerId&&(un(t),Or.removeEventListener("pointermove",c),Or.removeEventListener("pointerup",d),o=i.chart.engine.restoreMouseStyle(o),r(),i.chart.setCursorMode(h))};Or.addEventListener("pointermove",c),Or.addEventListener("pointerup",d)})(s,h,u,v())));const c=wo(l.zoom,"drag",h,e,r,n);c&&a.push((()=>((i,s,e,r)=>{const n=i.chart;let h;const o=e.cursor;if(null!==o){let i="function"==typeof o?o("in"):o;null!==i&&(i=null!=i?i:t.MouseStyles.ZoomIn,h=n.engine.setMouseStyle(i))}const a=n.getCursorMode();n.setCursorMode(void 0);let l=!1,u=s;"mouse"===s.pointerType&&s.preventDefault();const c=r=>{var a;if(r.pointerId!==s.pointerId)return;un(r);const c={x:r.clientX-u.clientX,y:r.clientY-u.clientY};let d;u=r,d="keep-start"===e.mode?i.getInterval().start:"keep-end"===e.mode?i.getInterval().end:i.ji.mi((i.ji.ni()+i.ji.hi())/2);const f=.05*i.Nn.getWidth({x:-c.x,y:c.y})*(null!==(a=e.sensitivity)&&void 0!==a?a:1);if(i.zoom(d,f),!1!==e.stopScroll&&i.setStopped(!0),null!==o){let i="function"==typeof o?o("in"):o;null!==i&&(i=null!=i?i:f<0?t.MouseStyles.ZoomIn:t.MouseStyles.ZoomOut,h=n.engine.setMouseStyle(i,h))}l||(qn(),l=!0);const v=e.on;v&&Or.requestAnimationFrame((()=>v({event:r})))},d=t=>{t.pointerId===s.pointerId&&(un(t),Or.removeEventListener("pointermove",c),Or.removeEventListener("pointerup",d),h=n.engine.restoreMouseStyle(h),n.setCursorMode(a),r())};Or.addEventListener("pointermove",c),Or.addEventListener("pointerup",d)})(s,h,c,v())));const d=wo(l.rectangleZoom,void 0,h,e,r,n);d&&a.push((()=>((i,s,e,r)=>{const n=i.chart,h=n.getCursorMode();let o;n.setCursorMode(void 0);let a=e.cursor;null!==a&&(a=null!=a?a:t.MouseStyles.ZoomIn,o=n.engine.setMouseStyle(a));const l=i.addBand({onTop:!0}).setPointerEvents(!1).setValueStart(i.Nn.getWidth(n.translateCoordinate(s,{x:i,y:i}))).setValueEnd(i.Nn.getWidth(n.translateCoordinate(s,{x:i,y:i}))).setVisible(!1).setFillStyle(n.getZoomingRectangleFillStyle()).setStrokeStyle(n.getZoomingRectangleStrokeStyle());let u=!1,c=!1;"mouse"===s.pointerType&&s.preventDefault();const d=t=>{if(t.pointerId!==s.pointerId)return;un(t),i.setStopped(!0);const r=n.translateCoordinate(t,{x:i,y:i});l.setValueEnd(i.Nn.getWidth(r));const h=vh({x:t.clientX,y:t.clientY},{x:i.isX?s.clientX:t.clientX,y:i.isY?s.clientY:t.clientY})>=20;if(l.setVisible(h),u||(qn(),u=!0),h&&!c){const i=h&&e.start;i&&i({event:t})}c=h},f=t=>{var a,u;if(t.pointerId!==s.pointerId)return;un(t);const c=vh({x:t.clientX,y:t.clientY},{x:i.isX?s.clientX:t.clientX,y:i.isY?s.clientY:t.clientY})>=20;if(c){const r=i.Nn.getWidth(n.translateCoordinate(s,{x:i,y:i})),h=i.Nn.getWidth(n.translateCoordinate(t,{x:i,y:i})),o=Math.sign(h-r),l=Math.sign(i.getInterval().end-i.getInterval().start),c=o===l?r:h,d=o===l?h:r;i.Yi(c,d,null!==(a=e.animationsEnabled)&&void 0!==a?a:void 0,null!==(u=e.stopScroll)&&void 0!==u?u:void 0,"interactionSetInterval")}l.dispose(),Or.removeEventListener("pointermove",d),Or.removeEventListener("pointerup",f),o=n.engine.restoreMouseStyle(o),r(),n.setCursorMode(h);const v=c&&e.on;v&&Or.requestAnimationFrame((()=>v({event:t})))};Or.addEventListener("pointermove",d),Or.addEventListener("pointerup",f)})(s,h,d,v()))),a.end()};SA(i,"pointerenter",((t,i)=>{const s=o(t);t.getHighlightOnHover()&&(s.pan||s.rectangleZoom||s.restoreDefault||s.zoom)&&t.setHighlight(!0)})),SA(i,"pointerleave",((t,i)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),SA(i,"wheel",((s,h)=>{const a=_o(!1!==i.Ki.fl.vl),l=o(s),u=wo(l.zoom,"wheel",h,e,r,n);u&&a.push((()=>((i,s,e)=>{var r;let n;un(s),n="keep-start"===e.mode?i.getInterval().start:"keep-end"===e.mode?i.getInterval().end:"centered"===e.mode?i.ji.mi((i.ji.ni()+i.ji.hi())/2):i.Nn.getWidth(i.chart.translateCoordinate(s,{x:i,y:i})),i.zoom(n,Math.sign(s.deltaY)*(null!==(r=e.sensitivity)&&void 0!==r?r:1)),!1!==e.stopScroll&&i.setStopped(!0);const h=e.cursor;if(null!==h){let e="function"==typeof h?h(s.deltaY<0?"in":"out"):h;if(null!==e){e=null!=e?e:s.deltaY<0?t.MouseStyles.ZoomIn:t.MouseStyles.ZoomOut;const r=i.chart.engine.setMouseStyle(e);Or.setTimeout((()=>{i.chart.engine.restoreMouseStyle(r)}),500)}}const o=e.on;o&&Or.requestAnimationFrame((()=>o({event:s})))})(s,h,u)));const c=wo(l.pan,"wheel",h,e,r,n);c&&a.push((()=>((i,s,e)=>{var r;un(s);const n=i.chart;!1!==e.stopScroll&&i.setStopped(!0),i.pan(30*Math.sign(s.deltaY)*i.Nn.getWidth({x:-1,y:1})*(null!==(r=e.sensitivity)&&void 0!==r?r:1));let h=e.cursor;if(null!==h){h=null!=h?h:i.isY?t.MouseStyles.Vertical:t.MouseStyles.Horizontal;const s=n.engine.setMouseStyle(h);Or.setTimeout((()=>{i.chart.engine.restoreMouseStyle(s)}),500)}const o=e.on;o&&Or.requestAnimationFrame((()=>o({event:s})))})(s,h,c))),a.end()})),SA(i,"dblclick",((s,h)=>{var a,l;if(h.defaultPrevented)return;const u=o(s),c=wo(u.restoreDefault,void 0,h,e,r,n);if(c&&c.doubleClick){un(h),s.fit(null!==(a=c.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=c.stopScroll)&&void 0!==l?l:void 0);let e=c.cursor;if(null!==e){e=null!=e?e:t.MouseStyles.ZoomOut;const s=i.engine.setMouseStyle(e);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const r=c.on;r&&Or.requestAnimationFrame((()=>r({event:h})))}}));const c=s=>{const o=h();let a=!1,l=!1,u=!1;for(const t of Object.keys(o)){const i=o[t];if("object"==typeof i)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=i;if("object"!=typeof t)continue;for(const i of Object.keys(t)){const s=t[i];"object"==typeof s&&("ctrl"in s&&void 0!==s.ctrl&&(a=!0),"shift"in s&&void 0!==s.shift&&(l=!0),"alt"in s&&void 0!==s.alt&&(u=!0))}}else"ctrl"in i&&void 0!==i.ctrl&&(a=!0),"shift"in i&&void 0!==i.shift&&(l=!0),"alt"in i&&void 0!==i.alt&&(u=!0)}r=s.ctrlKey,e=s.shiftKey,n=s.altKey,("Control"===s.key&&a||"Shift"===s.key&&l||"Alt"===s.key&&u)&&s.preventDefault();const c=wo(o.restorePrevious,void 0,s,e,r,n);if(c&&c.code===s.code){un(s);const t=i.getAxes().filter((t=>{const i=t.Ur.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));i.restorePreviousZoomState({whitelist:t});const e=c.on;e&&Or.requestAnimationFrame((()=>e({event:s})))}const d=wo(o.paginate,void 0,s,e,r,n);d&&((i,s,e)=>{var r,n,h,o;const a=null!==(n=null===(r=e.forward)||void 0===r?void 0:r.code)&&void 0!==n?n:"ArrowLeft",l=null!==(o=null===(h=e.backward)||void 0===h?void 0:h.code)&&void 0!==o?o:"ArrowRight",u=s.code===a?1:s.code===l?-1:0;if(0===u)return;let c=!1;if(i.forEachAxis((t=>{var i;const s=t.Ur.chartInteractions;!1===s||"object"==typeof s&&!1===s.paginate||t.isX&&!e.x||t.isY&&!e.y||(c=!0,!1!==e.stopScroll&&t.setStopped(!0),t.pan(-u*(t.Hn>t.Yn?1:-1)*.5*t.ji.oi()*(null!==(i=e.sensitivity)&&void 0!==i?i:1)))})),c){un(s);let r=e.cursor;if(null!==r){r=null!=r?r:!e.x&&e.y?t.MouseStyles.Vertical:e.x&&!e.y?t.MouseStyles.Horizontal:t.MouseStyles.Move;const s=i.engine.setMouseStyle(r);Or.setTimeout((()=>{i.engine.restoreMouseStyle(s)}),500)}const n=e.on;n&&Or.requestAnimationFrame((()=>n({event:s})))}})(i,s,d);const f=wo(o.restoreDefault,void 0,s,e,r,n);if(f&&f.code===s.code){un(s),i.getAxes().forEach((t=>{var i,s;const e=t.Ur.chartInteractions;!1===e||"object"==typeof e&&!1===e.restoreDefault||t.fit(null!==(i=f.animationsEnabled)&&void 0!==i?i:void 0,null!==(s=f.stopScroll)&&void 0!==s?s:void 0)}));const t=f.on;t&&Or.requestAnimationFrame((()=>t({event:s})))}},d=t=>{r=t.ctrlKey,e=t.shiftKey,n=t.altKey},f=()=>{r=!1,e=!1,n=!1};Or.addEventListener("keydown",c),Or.addEventListener("keyup",d),Or.addEventListener("blur",f),i.addEventListener("dispose",(()=>{Or.removeEventListener("keydown",c),Or.removeEventListener("keyup",d),Or.removeEventListener("blur",f)}));const v=()=>(A(),g(),y(),()=>{A=mA(i,"pointermove",a),g=mA(i,"pointerdown",l),y=SA(i,"pointerdown",u)});let A=mA(i,"pointermove",a),g=mA(i,"pointerdown",l),y=SA(i,"pointerdown",u);return{setUserInteractions:t=>{if(void 0===t)s={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)s={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?s[i]=t[i]:s[i]={}},getUserInteractions:h}})(this);const A={...null==h?void 0:h.legend};this.legend.setOptions(A)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Jy}restorePreviousZoomState(t){if(this.sS.length<=1)return this;this.sS.pop();const i=this.sS[this.sS.length-1];return i?(this.j_=Or.performance.now(),this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.Yi(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.FS)this.sS.length=0;else for(;this.sS.length>1;)this.sS.unshift();return this}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.MS.solveNearest(t,i,this.Jy,this.D_)}addCursor(t=vA){const i=this.vg(),s=t.Wm(i,this.T_,this.T_,this.lg(i),this.rs);return s.Vw=!0,this.xg(s),s}getMinimumSize(){var t;const i={x:0,y:0};i.x+=this.Zt.left+this.Zt.right+this.xo.left+this.xo.right,i.y+=this.Zt.top+this.Zt.bottom+this.xo.top+this.xo.bottom;const s=this._n.Sh().td(),e=f(BA(this.rA||PA,null!==(t=this.rs.chartXYTitleMargin)&&void 0!==t?t:5),this.kg);return i.x+=s.x+e.left+e.right,i.y+=s.y+e.top+e.bottom,this.Y_&&(i.x+=this.Y_.left,i.x+=this.Y_.right,i.y+=this.Y_.top,i.y+=this.Y_.bottom),i.x+=MA.x,i.y+=MA.y,i}getLayout(){const t=this.H_;return this.Ki.W_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.H_=void 0})):new Promise((i=>{i(t)}))}addAxisX(t){var i,s;const{opposite:e,type:r}=To(t);let n;n="linear"===r.type?this.cg.d1({dimension:"x",scale1DConstructor:Ue}):"linear-highPrecision"===r.type?this.cg.d1({dimension:"x",scale1DConstructor:Ue}).bi():this.cg.d1({dimension:"x",scale1DConstructor:Uh}).$s(r.base),n.zt(this.T_.x.li());const h=e?this.lA:this.uA,o=new Ec(this.G_,this.wv,this.Tg,this._v,this.kv,this.Ki.Ks,n,this.T_.y,(a=()=>o.Xv(),{...zc,...uA(a)}),this,e?100:0,this.Cv,this.z_,this.rs,this.gn,r);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=h.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),h.push({axis:o,iStack:u,iParallel:l}),this.Ki.fe(),this._t.kt("axisadd",{axis:o}),this.TS(o),o}addAxisY(t){var i,s;const{opposite:e,type:r}=To(t);let n;n="linear"===r.type?this.cg.d1({dimension:"y",scale1DConstructor:Ue}):"linear-highPrecision"===r.type?this.cg.d1({dimension:"y",scale1DConstructor:Ue}).bi():this.cg.d1({dimension:"y",scale1DConstructor:Uh}).$s(r.base),n.zt(this.T_.y.li());const h=e?this.cA:this.dA,o=new Ec(this.G_,this.wv,this.Tg,this._v,this.kv,this.Ki.Ks,n,this.T_.x,(a=()=>o.Xv(),{...Vc,...cA(a)}),this,e?100:0,this.Cv,this.z_,this.rs,this.gn,r);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=h.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),h.push({axis:o,iParallel:l,iStack:u}),this.Ki.fe(),this._t.kt("axisadd",{axis:o}),this.TS(o),o}TS(t){const i=()=>{const i=Or.performance.now();void 0!==this.j_&&i-this.j_<=1e3||t.getVisible()&&(this.X_=i+300)};Or.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.sS.forEach((i=>{i.delete(t)}))}))}swapAxes(t,i){const s=[this.uA,this.dA,this.cA,this.lA],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),r=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!r)return this;if(e!==r)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const n=e.find((i=>i.axis===t)),h=e.find((t=>t.axis===i));if(!n||!h)return this;const o=n.iParallel,a=n.iStack;n.iParallel=h.iParallel,n.iStack=h.iStack,h.iParallel=o,h.iStack=a,this.H_=void 0;const l=[];this.legend.getEntries().forEach((t=>{if(t.component&&t.component instanceof Lv){const i=t.component.axisX,s=t.component.axisY,r=e.find((t=>t.axis===i||t.axis===s));r&&l.push({iStack:r.iStack,entry:t.component})}}));const u=l.sort(((t,i)=>i.iStack-t.iStack)).map((t=>t.entry));return this.ge.forEach((t=>t.qA(u))),this.Ki.fe(),this}dispose(){return this.MS.It(),this.N_.It(),this.WS.It(),this.wv.It(),this.G_.forEach((t=>t.It())),this.kv.It(),this._v.It(),this.s_().forEach((t=>t.dispose())),Nd(this.T_),this.uA.slice().forEach((t=>t.axis.dispose())),this.dA.slice().forEach((t=>t.axis.dispose())),this.cA.slice().forEach((t=>t.axis.dispose())),this.lA.slice().forEach((t=>t.axis.dispose())),this.Jy.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.uA,...this.lA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.dA,...this.cA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...i){const s=i&&i.length>0?new Set(i):_A;return Yr(Array.from(s).map((i=>{switch(i){default:case t.AxisPosition.Top:return this.lA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case t.AxisPosition.Bottom:return this.uA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case t.AxisPosition.Left:return this.dA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case t.AxisPosition.Right:return this.cA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}Z_(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.uA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.lA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.dA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.cA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.rA=t,this.ge.forEach((t=>t.ye())),this.Ki.fe(),this}getTitlePosition(){return this.rA}Or(t,i=!1){var s;super.Or(t);const r=Or.performance.now();void 0!==this.X_&&this.X_<=r&&(this.rS(),this.X_=void 0);for(const t of this.Jy)t.jg();for(const t of this.Jy)t.Or();const n=zn(this.Jy.map((t=>t.Vl()))),h=new Set(n.map((t=>t.M_)));if(1===h.size){const t=Array.from(h)[0],i="x"===t?[this.uA,this.lA]:[this.dA,this.cA],s="y"===t?[this.uA,this.lA]:[this.dA,this.cA];i.forEach((t=>t.forEach((t=>t.axis.Zh())))),s.forEach((t=>t.forEach((t=>t.axis.Zh()))))}else this.dA.forEach((t=>t.axis.Zh())),this.uA.forEach((t=>t.axis.Zh())),this.lA.forEach((t=>t.axis.Zh())),this.cA.forEach((t=>t.axis.Zh()));let o=!1;this.forEachAxis((t=>{(t.io()||t.so())&&(o=!0)}));const a=!this.I_&&o,u=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.MS.Or(a,u?this.Jy.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Jy,this.D_,{afterCursorPointedAt:t=>{const i=this.Ki.ll();if(t.length>1&&i){const t=this.Ki.El(i);this.MS.J_.Om({x:t.engineX,y:t.engineY},this.Ki.ji)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const c=(t,i,s,e,r={})=>{const n=RA(t);let h=0;const o=[],a=n.parallels.map((t=>{const n=t.stacks.reduce(((t,i)=>{var s,e;return t+(i.axis.getVisible()?(null!==(s=i.axis.nA)&&void 0!==s?s:0)+(null!==(e=i.axis.hA)&&void 0!==e?e:0):0)}),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Zf?i.axis.Zf.pixels:0)),0),l=i-n-a;let u=0;const c=t.stacks.map((s=>{var n,a;const c=s.axis,d=c.getVisible(),f=Math.max(i-u,0),v=Math.min(d?"pixels"in c.Zf?c.Zf.pixels:c.Zf.relative/t.sumRelativeSize*l:0,f),A=t.stacks.length,g={...r,availableSpace:i,stack:s,axisLength:v,axisLengthOffset:u,axisThicknessOffset:h,stackAxisCount:A},y=e(g,o);return o.push({...g,...y}),d&&(u+=v+(null!==(n=c.nA)&&void 0!==n?n:0)+(null!==(a=c.hA)&&void 0!==a?a:0)),{...y,stack:s,axis:c}})),d=c.reduce(((t,i)=>i.axis.getVisible()?Math.max(t,i.Qv):t),0),f=c.reduce(((t,i)=>Math.max(t,i.Zv)),0);return c.forEach((t=>{t.Zv=f})),h+=d*s,{...t,stacks:c}}));return{parallels:a,thicknessTotal:Math.abs(h)}},d=this.getTitleFillStyle()!==ho&&this.getTitle().length>0,v=d?this._n.Sh().td():{x:0,y:0},A=f(BA(this.rA,null!==(s=this.rs.chartXYTitleMargin)&&void 0!==s?s:5),this.kg),g=d?DA(this.rA,v,A):Hn,y=this.ge.reduce(((t,i)=>{const s=i.Sh(g,this.xo);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0}),p=this.T_.x.getCellSize()-(this.xo.left+this.xo.right+g.left+g.right)-y.left-y.right,m=this.T_.y.getCellSize()-(this.xo.top+this.xo.bottom+g.bottom+g.top)-y.top-y.bottom,S=new Map,b=(t,i)=>{const s=!!i.find((t=>!0===t.updatedTicks)),e={physicalAxisSize:t.axisLength,qv:t.axisLength,Q_:t.axisLengthOffset,tA:t.axisThicknessOffset,anyPreviousAxisUpdated:s,oA:t.stackAxisCount};return t.stack.axis.Sh(e)},x=c(this.dA,m,-1,b),M=c(this.cA,m,1,b),w=c(this.uA,p,-1,b),_=c(this.lA,p,1,b),k=[this.xo.left+g.left+x.thicknessTotal+y.left,this.xo.right+g.right+M.thicknessTotal+y.right],C=[this.xo.bottom+w.thicknessTotal+g.bottom+y.bottom,this.xo.top+g.top+_.thicknessTotal+y.top],T=this.T_.x.getCellSize()-(k[0]+k[1]),F=this.T_.y.getCellSize()-(C[0]+C[1]);this.T_.x.Rt(0,T),this.T_.y.Rt(0,F),this.T_.x.ri(k),this.T_.y.ri(C),super.Mg();const I=[...x.parallels,...w.parallels,...M.parallels,..._.parallels].map((t=>t.stacks)).flat(),L=t=>{var i,s;const e=t.stack.axis,r=I.find((t=>t.axis===e));if(!r)throw new Error("LightningChart JS unexpected runtime error");const n=e.getVisible()?t.margins[0]+t.axisLengthOffset+(null!==(i=e.nA)&&void 0!==i?i:0):0,h=e.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-(null!==(s=e.nA)&&void 0!==s?s:0):0;e.ji.ri([n,h]);const o=t.stack.axis.Or(r);return S.set(t.stack.axis,o),r},P=p-(x.thicknessTotal+M.thicknessTotal),B=m-(w.thicknessTotal+_.thicknessTotal);c(this.dA,B,-1,L,{margins:C}),c(this.cA,B,1,L,{margins:C}),c(this.uA,P,-1,L,{margins:k}),c(this.lA,P,1,L,{margins:k}),this.Y_={left:x.thicknessTotal,top:_.thicknessTotal,right:M.thicknessTotal,bottom:w.thicknessTotal};const D={chartWidth:this.T_.x.getCellSize(),chartHeight:this.T_.y.getCellSize(),viewportWidth:T,viewportHeight:F,margins:{left:k[0],right:k[1],bottom:C[0],top:C[1]},axes:S},E=this.H_;if(i)this._t.kt("layoutchange",{...D,userChangedLayout:()=>{}});else if(!E||Math.abs(E.chartWidth-D.chartWidth)>=1||Math.abs(E.chartHeight-D.chartHeight)>=1||Math.abs(E.viewportWidth-D.viewportWidth)>=1||Math.abs(E.viewportHeight-D.viewportHeight)>=1||this.getAxes().find((t=>{var i,s,e,r,n,h,o,a,l,u,c,d;const f=E.axes.get(t),v=D.axes.get(t);if(Math.abs((null!==(i=null==f?void 0:f.width)&&void 0!==i?i:0)-(null!==(s=null==v?void 0:v.width)&&void 0!==s?s:0))>=1||Math.abs((null!==(e=null==f?void 0:f.height)&&void 0!==e?e:0)-(null!==(r=null==v?void 0:v.height)&&void 0!==r?r:0))>=1||Math.abs((null!==(n=null==f?void 0:f.left)&&void 0!==n?n:0)-(null!==(h=null==v?void 0:v.left)&&void 0!==h?h:0))>=1||Math.abs((null!==(o=null==f?void 0:f.right)&&void 0!==o?o:0)-(null!==(a=null==v?void 0:v.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(u=null==v?void 0:v.bottom)&&void 0!==u?u:0))>=1||Math.abs((null!==(c=null==f?void 0:f.top)&&void 0!==c?c:0)-(null!==(d=null==v?void 0:v.top)&&void 0!==d?d:0))>=1)return t}))){let i=!1;const s=()=>{i=!0};if(this._t.kt("layoutchange",{...D,userChangedLayout:s}),this.og||i)return this.engine.layout(),this.O_({width:this.uiScale.li().x,height:this.uiScale.li().y,engineWidth:this.Ki.ji.li().x,engineHeight:this.Ki.ji.li().y}),this.og=!0,void this.Or(t,!0)}this.H_=D,this.ip.zr(e(0,0)).zt(e(T,F)),this.sp.zr(e(0,0)).zt(e(T,F));const R=EA(this.rA,v,A,this.uiScale.$i(),this.xo,k,C,y);this._n.zr(R.position).eo(R.margin).xu(R.horizontalAlignment)._u(R.verticalAlignment),this.ge.forEach((t=>t.Or(g,this.xo)));const O=l(this.T_.x.ni(),this.T_.y.ni(),this.T_.x.oi(),this.T_.y.oi());this.WS.hS(O),this._v.hS(O),this.kv.hS(O),this.rg&&this.rg();for(const t of this.Jy)t.Yg()}C_(t){const i=zn(this.Jy.map((t=>t.Vl()))),s=new Set(i.map((t=>t.M_)));if(1===s.size){const e=Array.from(s)[0],r="x"===e?[this.uA,this.lA]:[this.dA,this.cA],n="y"===e?[this.uA,this.lA]:[this.dA,this.cA];r.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&i.axis.fit(s.animate,s.stopAxisAfter)})))),i.forEach((t=>t.w_())),n.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&(i.axis.getScrollStrategy()&&void 0===i.axis.getDefaultInterval()?i.axis.setStopped(!1):i.axis.fit(s.animate,s.stopAxisAfter))}))))}else t.forEach(((t,i)=>i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}Dt(){for(let t=0;t<this.uA.length;t+=1)this.uA[t].axis.Dt();for(let t=0;t<this.lA.length;t+=1)this.lA[t].axis.Dt();for(let t=0;t<this.dA.length;t+=1)this.dA[t].axis.Dt();for(let t=0;t<this.cA.length;t+=1)this.cA[t].axis.Dt();return super.Dt()}V_(t){if(this.F_.has(t))return this.F_.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new yA(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,t);return this.ep(e,t),e}addLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ho).setPointFillStyle(ho)}addPointSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ho).setStrokeStyle(_r)}addPointLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ho)}addStepSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ho).setCurvePreprocessing({type:"step"})}addSplineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(ho).setCurvePreprocessing({type:"spline"})}addAreaSeries(t){return this.addPointLineAreaSeries(t).setPointFillStyle(ho)}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new Nv(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,t);return this.ep(e,t),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new zv(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(e,t),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new $v(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(e,t),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new Rv(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(e,t),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:zc,r=new Dv(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,e,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(r,t),r}addTextSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new Yv(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length);return this.ep(e,t),e}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new iA(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,t,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length),this.ep(e,t),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new eA(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,t,this.rs,this.Ki.Ks,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length),this.ep(e,t),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();CA(i,s);const e=new(t&&t.type?t.type:lA.Candlesticks)(this,this.Ky,this.WS,i,s,this.V_(i),this.V_(s),this.vg,this.rs,this.Ki.Ks);return this.ep(e,t),e}addOnScreenMenu(t,i){return new gA(this.ug,t,this,i)}setZoomingRectangleFillStyle(t){return this.P_="function"==typeof t?t(this.P_):t,this.Ki.fe(),this}getZoomingRectangleFillStyle(){return this.P_}setZoomingRectangleStrokeStyle(t){return this.B_="function"==typeof t?t(this.B_):t,this.Ki.fe(),this}getZoomingRectangleStrokeStyle(){return this.B_}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(kA),this.forEachAxisX((s=>{s.zoom(s.ji.mi(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ji.mi(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}tg(){const t=[];return this.forEachAxis((i=>i.jv((i=>t.push(i))))),super.tg().concat(t)}s_(){return this.L_}kr(){return this.Lg(this.WS)}setCursorEnabledDuringAxisAnimation(t){return this.I_=t,this}getCursorEnabledDuringAxisAnimation(){return this.I_}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,r=i,n=Nc(r)?r:bo(r)?this.Rv:void 0;if(n&&mo(s)){const t=Je(e,n,this.Ki.ji);return this.Ki.Rl({engineX:t.x,engineY:t.y})}if(n&&bo(s))return Je(e,n,this.Rv);if(n&&Nc(s))return Je(e,n,s)}else{const s=t;if(bo(i)){const t=this.Ki.El(s);return Je({x:t.engineX,y:t.engineY},this.Ki.ji,this.Rv)}if(Nc(i)){const t=i,e=this.Ki.El(s);return Je({x:e.engineX,y:e.engineY},this.Ki.ji,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,i,s){this._t.addEventListener(t,i,s),"layoutchange"===t&&this.H_&&i({...this.H_,userChangedLayout:()=>{}})}removeEventListener(t,i){this._t.removeEventListener(t,i)}setUserInteractions(t){return this.wS.setUserInteractions(t),this}getUserInteractions(){return this.wS.getUserInteractions()}}t.ChartXYTitlePositionOptions=void 0,(IA=t.ChartXYTitlePositionOptions||(t.ChartXYTitlePositionOptions={})).CenterTop="center-top",IA.RightTop="right-top",IA.LeftTop="left-top",IA.CenterBottom="center-bottom",IA.RightBottom="right-bottom",IA.LeftBottom="left-bottom",IA.SeriesCenterTop="series-center-top",IA.SeriesRightTop="series-right-top",IA.SeriesLeftTop="series-left-top",IA.SeriesCenterBottom="series-center-bottom",IA.SeriesRightBottom="series-right-bottom",IA.SeriesLeftBottom="series-left-bottom";const PA=t.ChartXYTitlePositionOptions.CenterTop,BA=(t,i)=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:i};case"left-top":return{left:20,right:0,top:0,bottom:i};case"right-top":return{left:0,right:20,top:0,bottom:i};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:i,bottom:0};case"series-left-top":return{left:i,right:0,top:i,bottom:0};case"series-right-top":return{left:0,right:i,top:i,bottom:0};case"series-left-bottom":return{left:i,right:0,top:0,bottom:i};case"series-right-bottom":return{left:0,right:i,top:0,bottom:i}}return Nn(0,`Unexpected ChartXY title position selection ${t}`)},DA=(t,i,s)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:i.y+s.top+s.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:i.y+s.top+s.bottom,right:0,left:0,top:0};default:return Hn}},EA=(t,i,s,e,r,n,h,o)=>{const a=(s.left-s.right)*e.x,l=(s.bottom-s.top)*e.y,u={top:0,left:o.left+r.left,right:o.right+r.right,bottom:0};switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-(r.top+s.top)*e.y},margin:u};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:a,y:100-(r.top-s.top)*e.y},margin:u};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+a,y:100-(r.top-s.top)*e.y},margin:u};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+a,y:(r.bottom+s.bottom)*e.y},margin:u};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:a,y:(r.bottom+s.bottom)*e.y},margin:u};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+a,y:(r.bottom+s.bottom)*e.y},margin:u};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-h[1]*e.y+l},margin:u};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:n[0]*e.x+a,y:100-h[1]*e.y+l},margin:Hn};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-n[1]*e.x+a,y:100-h[1]*e.y+l},margin:Hn};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:h[0]*e.y+l},margin:u};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:n[0]*e.x+a,y:h[0]*e.y+l},margin:Hn};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-n[1]*e.x+a,y:h[0]*e.y+l},margin:Hn}}return Nn(0,`Unexpected ChartXY title position selection ${t}`)},RA=t=>{const i=[];t.forEach(((t,s)=>{const e=i.find((i=>i.iParallel===t.iParallel));e?(e.stacks.push({...t}),e.stacks.sort(((t,i)=>t.iStack-i.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t}]})}));const s=i.map((t=>{const i=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Zf?i.axis.Zf.relative:0)),0);return{...t,sumRelativeSize:i}}));return s.sort(((t,i)=>t.iParallel-i.iParallel)),{parallels:s}},OA=(t,i,s)=>{var e;const r=Array.from(new Set(s.map((t=>t.series.re())))),n=1===r.length&&void 0!==r[0]?r[0]:void 0,h="ProgressiveY"===n||"RegressiveY"===n?{progressiveDimension:i.axisY.getTitle()||void 0,progressiveAxis:i.axisY,valueDimension:i.axisX.getTitle()||void 0,hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:i.axisX.getTitle()||void 0,progressiveAxis:i.axisX,valueDimension:i.axisY.getTitle()||void 0,hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x};return Ke(i)?tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Co(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Co(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Co(i.lut?eo(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):n?[[{text:Co(h.progressiveAxis.formatValue(h.position(i)),h.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...s.map((t=>t.multiHit?tp(t,[[{component:t.series,componentColor:ip(t)},""],[...h.valueDimension?[`${h.valueDimension}1`,""]:[],{text:Co(h.hitValueAxis(t).formatValue(h.value(t.multiHit[0])),h.hitValueAxis(t)),font:{weight:"bold"}}],[...h.valueDimension?[`${h.valueDimension}2`,""]:[],{text:Co(h.hitValueAxis(t).formatValue(h.value(t.multiHit[1])),h.hitValueAxis(t)),font:{weight:"bold"}}]]):tp(t,[[{component:t.series,componentColor:ip(t)},"",{text:Co(h.hitValueAxis(t).formatValue(h.value(t)),h.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((i=>tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...h.progressiveDimension?[`${h.progressiveDimension}`,""]:[],{text:Co(h.progressiveAxis.formatValue(h.position(i)),h.progressiveAxis),font:{weight:"bold"}}],[...h.valueDimension?[`${h.valueDimension}`,""]:[],{text:Co(h.hitValueAxis(i).formatValue(h.value(i)),h.hitValueAxis(i)),font:{weight:"bold"}}]]))).flat()};class zA{constructor(t,i,s,e,r,n,h){var o;this.coordsRelative="relative",this.coordsClient="client",this.K_=[],this.q_=new Map,this.Jy=new Map,this.tk=!0,this.ik=new Set,this.sk=()=>{this.ek.Ki.fe()},this.rk=(t,i,s)=>{0!==this.Jy.size&&void 0!==[...this.Jy.values()].find((({series:t})=>!0===t.getVisible()))||this.nk.Yi(i,s,!1,!1,"zoomBandChartOther"),this.ek.Ki.fe()},this.hk=!0,this._t=new Ar,i.Ki.ul(jl.aa),this.ug=t,this.UA=(null==n?void 0:n.orientation)||"x",this.ak=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.lk=e,this.Ro="x"===this.UA?zc:Vc;const a={...n,defaultAxisX:this.Ro.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Ro.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0}),legend:null!==(o=null==n?void 0:n.legend)&&void 0!==o?o:{addEntriesAutomatically:!1}};this.ek=new LA(t,i,s,$r,r,a,h).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.ek.engine;const l=this.ek.getDefaultAxisX().setPointerEvents(!1),u=this.ek.getDefaultAxisY().setPointerEvents(!1);this.nk=this.Ro.getWidth({x:l,y:u}).setScrollStrategy(vl.fitting()).setAnimationScroll(!1).setStrokeStyle(_r).setTickStrategy(Al.Empty),(null==n?void 0:n.useSharedValueAxis)?this.uk=this.Ro.getHeight({x:l,y:u}):this.Ro.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new uo({color:this.getTheme().isDark?me(0,0,0,180):me(255,255,255,180)});this.ck=[this.ek.wv.Rr(this.nk.Dv).Er(c).Dr(_r),this.ek.wv.Rr(this.nk.Dv).Er(c).Dr(_r)];const d=this.ek.wv.iA(this.nk.Dv).Hr(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.dk={collection:d,members:new Array(5).fill(0).map((t=>d._a()))};const f=this.getTheme(),v="function"==typeof f.zoomBandChartKnobFillStyle?Rr({resourcesBaseUrl:this.ug.Ke,styleFactory:f.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):f.zoomBandChartKnobFillStyle||ho;this.fk=[this.ek.wv.Rr(this.ek.Rv).Er(v).Dr(_r),this.ek.wv.Rr(this.ek.Rv).Er(v).Dr(_r)],this.vk=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.Ak()}get chart(){return this.ek}setUserInteractions(t){return this.Ur=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return Er({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.Ur)}add(t){this.ik.has(t.chart)||(this.ik.add(t.chart),t.chart.addEventListener("layoutchange",this.sk));const i=this.K_.map((t=>t.axis)),s="x"===this.UA?t.axisX:t.axisY;if(!i.includes(s)){const t=t=>{this.rk(s,t.start,t.end)};s.addEventListener("intervalchange",t),this.K_.push({axis:s,deattach:()=>{s.removeEventListener("intervalchange",t)}}),this.nk.uh(s.ah(),s.getTickStrategy()),this.gk&&this.gk.remove(),this.gk=Qe(...this.K_.map((t=>t.axis)))}const e=this.Ro.getHeight({x:t.axisX,y:t.axisY});let r;if(this.ak)r=this.uk;else{const t=this.q_.get(e);t?r=t:(r=this.Ro.getHeight({x:this.ek.addAxisX.bind(this.ek),y:this.ek.addAxisY.bind(this.ek)})({type:e.$n.type}),this.yk(r)),this.q_.set(e,r)}const n=this.Ro.getWidth({x:this.nk,y:r}),h=this.Ro.getHeight({x:this.nk,y:r});let o;const a=[];if(t instanceof yA)o=this.ek.addPointLineAreaSeries({...t.fl,axisX:n,axisY:h,xAxis:n,yAxis:h}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),o.setDataSet(t.x_(),t.getDataMapping());else if(t instanceof hA){const i=this.ek.addPointLineAreaSeries({axisX:n,axisY:h,xAxis:n,yAxis:h});((t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.appendJSON(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.appendJSON(e)}},e=t.YM();s(e);const r=t=>{s(t.data)},n=()=>{i.clear()};t.addEventListener("dataadd",r),t.addEventListener("dataclear",n),a.push((()=>{t.removeEventListener("dataadd",r),t.removeEventListener("dataclear",n)}))})(t,i),o=i}else if(t instanceof nA){const i=this.ek.addAreaRangeSeries({axisX:n,axisY:h,xAxis:n,yAxis:h}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.YM()),s=t=>i.add(t.data);t.addEventListener("dataadd",s),a.push((()=>t.removeEventListener("dataadd",s))),o=i;const e=t=>i.clear();t.addEventListener("dataclear",e),a.push((()=>{t.removeEventListener("dataclear",e)}))}else{if(!(t instanceof tA))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.ek.addHeatmapGridSeries({...t.Hx,axisX:n,axisY:h,xAxis:n,yAxis:h}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle()).setContours(t.getContours())};s(),o=i,t.Qx(o);const e=t=>i.invalidateIntensityValues(t.value);t.addEventListener("stylechange",s),a.push((()=>{t.removeEventListener("invalidateintensity",e),t.removeEventListener("stylechange",s)}));const r=()=>{i.clear()};t.addEventListener("dataclear",r),a.push((()=>{t.removeEventListener("dataclear",r)}))}}o.setPointerEvents(!1);const l=t=>{o.setVisible(t.isVisible)};t.addEventListener("visiblechange",l),a.push((()=>{t.removeEventListener("visiblechange",l)}));const u=t=>{o.setHighlight(t.highlight)};a.push((()=>{t.addEventListener("highlightchange",u),t.removeEventListener("highlightchange",u)}));const c=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",c),a.push((()=>{t.removeEventListener("dispose",c)})),this.Jy.set(t,{series:o,clearReferences:()=>a.forEach((t=>t()))}),o}disposeSeries(t){const i=this.Jy.get(t);if(i){const{clearReferences:s}=i;s(),this.Jy.delete(t),i.series.dispose();const e=this.Ro.getHeight({x:t.axisX,y:t.axisY}),r=this.q_.get(e);r&&0===r.Xv().length&&(this.q_.delete(e),r.dispose())}const s="x"===this.UA?t.axisX:t.axisY;if(!Array.from(this.Jy.keys()).find((t=>s===("x"===this.UA?t.axisX:t.axisY)))){const t=this.K_.findIndex((t=>t.axis===s));t>=0&&(this.K_[t].deattach(),this.K_.splice(t,1))}const e=Array.from(this.Jy.keys()).find((t=>t.chart==t.chart));return e||(t.chart.removeEventListener("layoutchange",this.sk),this.ik.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.ck.forEach((i=>i.Er(t))),this.ek.Ki.fe(),this}getDefocusOverlayFillStyle(){return this.ck[0].Qn()}setSplitterStrokeStyle(t){return this.dk.collection.Hr(t),this.ek.Ki.fe(),this}getSplitterStrokeStyle(){return this.dk.collection.Ho()}setKnobFillStyle(t){return this.fk.forEach((i=>i.Er(t))),this.ek.Ki.fe(),this}getKnobFillStyle(){return this.fk[0].Qn()}setKnobStrokeStyle(t){return this.fk.forEach((i=>i.Dr(t))),this.ek.Ki.fe(),this}getKnobStrokeStyle(){return this.fk[0].Il()}setKnobSize(t){return this.vk=t,this.ek.Ki.fe(),this}getKnobSize(){return this.vk}getDefaultAxisX(){return this.ek.getDefaultAxisX()}getDefaultAxisY(){return this.ek.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}yk(t){t.setTickStrategy(Al.Empty).setPointerEvents(!1).setStrokeStyle(_r)}setStopAxisOnInteraction(t){return this.tk=t,this}getStopAxisOnInteraction(){return this.tk}Ak(){let i;const s=(t,i,s,e)=>{var r,n;const h="x"===this.UA?null===(r=Array.from(this.Jy.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.Jy.keys())[0])||void 0===n?void 0:n.axisY;if(!h)return;const o=h.getInterval(),a=this.nk.getInterval(),l=Math.abs(this.nk.ji.pi(t)-this.nk.ji.pi(i));s.preventTooSmall&&l<10||Math.sign(i-t)!==Math.sign(o.end-o.start)||Math.min(t,i)<Math.min(a.start,a.end)||Math.max(t,i)>Math.max(a.start,a.end)&&Math.max(o.start,o.end)<Math.max(t,i)||h.Yi(t,i,s.animated,this.tk,e)};this.fk.forEach(((e,r)=>{e.addEventListener("pointerenter",(()=>{var s;(null===(s=this.getUserInteractions().zoom)||void 0===s?void 0:s.dragKnob)&&(i=this.engine.setMouseStyle(this.Ro.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical}),i))})),e.addEventListener("pointerleave",(()=>{i=this.engine.restoreMouseStyle(i)})),e.addEventListener("pointerdown",(t=>{var i,e,n;if(!(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob))return;const h="x"===this.UA?null===(e=Array.from(this.Jy.keys())[0])||void 0===e?void 0:e.axisX:null===(n=Array.from(this.Jy.keys())[0])||void 0===n?void 0:n.axisY;if(!h)return;un(t);const o=i=>{if(i.pointerId!==t.pointerId)return;un(i);const e=this.Ro.getWidth(this.ek.translateCoordinate(i,this.ek.coordsAxis)),n=h.getInterval(),o=0===r?e:n.start,a=1===r?e:n.end;s(o,a,{animated:!1,preventTooSmall:!0},"zoomBandChartOther")},a=i=>{i.pointerId===t.pointerId&&(un(i),Kn("click"),Or.removeEventListener("pointermove",o),Or.removeEventListener("pointerup",a))};Or.addEventListener("pointermove",o),Or.addEventListener("pointerup",a)}))})),this.ek.seriesBackground.addEventListener("pointerenter",(()=>{var s;(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.drag)&&(i=this.engine.setMouseStyle(t.MouseStyles.Move,i))})),this.ek.seriesBackground.addEventListener("pointerleave",(()=>{i=this.engine.restoreMouseStyle(i)}));const e=(t,i)=>{var e,r,n;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag))return;const h="x"===this.UA?null===(r=Array.from(this.Jy.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.Jy.keys())[0])||void 0===n?void 0:n.axisY;if(!h)return;const o=h.getInterval(),a=this.nk.ji.Bi(o.start,this.Ro.getWidth(t)),l=this.nk.ji.Bi(o.end,this.Ro.getWidth(t));s(a,l,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),un(i)};this.ek.seriesBackground.addEventListener("pointerdown",(t=>{var i,s;if(!("x"===this.UA?null===(i=Array.from(this.Jy.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Jy.keys())[0])||void 0===s?void 0:s.axisY))return;un(t);let r=t;const n=i=>{if(i.pointerId!==t.pointerId)return;const s={x:i.clientX-r.clientX,y:r.clientY-i.clientY};r=i,e(s,i)},h=i=>{i.pointerId===t.pointerId&&(un(i),qn(),Kn("click"),Or.removeEventListener("pointermove",n),Or.removeEventListener("pointerup",h))};Or.addEventListener("pointermove",n),Or.addEventListener("pointerup",h)})),this.ek.seriesBackground.addEventListener("wheel",(t=>{var i,e,r,n;const h=this.getUserInteractions();if(!(null===(i=h.zoom)||void 0===i?void 0:i.wheel))return;const o="x"===this.UA?null===(e=Array.from(this.Jy.keys())[0])||void 0===e?void 0:e.axisX:null===(r=Array.from(this.Jy.keys())[0])||void 0===r?void 0:r.axisY;if(!o)return;const a=o.getInterval(),l=this.nk.getInterval(),u=this.Ro.getWidth(this.ek.translateCoordinate(t,this.ek.coordsAxis)),c=this.nk.ji.pi(a.start),d=this.nk.ji.pi(a.end),f=this.nk.ji.pi(u),v=jr((f-c)/(d-c),0,1),A=.2*Math.abs(d-c)*(null!==(n=h.zoom.wheel.sensitivity)&&void 0!==n?n:1),g=v*A*-Math.sign(t.deltaY),y=(1-v)*A*Math.sign(t.deltaY),p=jr(this.nk.ji.Bi(a.start,g),l.start,l.end),m=jr(this.nk.ji.Bi(a.end,y),l.start,l.end);s(p,m,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),un(t)})),this.ck.forEach(((e,r)=>{e.addEventListener("pointerenter",(()=>{var s;(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.click)&&(i=this.engine.setMouseStyle(t.MouseStyles.Point,i))})),e.addEventListener("pointerleave",(()=>{i=this.engine.restoreMouseStyle(i)})),e.addEventListener("click",(t=>{var i,e,r;if(t.defaultPrevented)return;if(!(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click))return;const n="x"===this.UA?null===(e=Array.from(this.Jy.keys())[0])||void 0===e?void 0:e.axisX:null===(r=Array.from(this.Jy.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const h=this.Ro.getWidth(this.ek.translateCoordinate(t,this.ek.coordsAxis)),o=n.getInterval(),a=this.nk.getInterval(),l=jr(h-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),u=l+(o.end-o.start);s(l,u,{animated:!0,preventTooSmall:!1},"zoomBandChartClick"),un(t)}))}))}getSizePixels(){return this.ek.getSizePixels()}eo(t){this.ek.eo(t)}getMinimumSize(){return this.ek.getMinimumSize()}Dt(){return this.ek.Dt()}Et(){return this.ek.Et()}Or(t){var i,s,e,r;const n=On(Array.from(this.Jy.keys()).map((t=>t.chart))),h="x"===this.UA?null===(i=Array.from(this.Jy.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Jy.keys())[0])||void 0===s?void 0:s.axisY,o=(()=>{var t;const i=null===(t=this.K_.find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis;return!!i&&Math.sign(i.getInterval().end-i.getInterval().start)})(),a=Math.sign(this.nk.getInterval().end-this.nk.getInterval().start);if(a!==o&&0!==a&&0!==o&&this.nk.Yi(this.nk.getInterval().end,this.nk.getInterval().start,!1,this.nk.getStopped(),"zoomBandChartOther"),this.Jy.forEach(((t,i)=>{const s=t.series;i instanceof yA&&s instanceof yA&&s.setDataSet(i.getDataSet(),i.getDataMapping())})),this.hk)if("x"===this.UA){const t=n.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||0!==t.Iv)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.fA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=n.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||100!==t.Iv)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.fA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=n.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),r=n.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.ek.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.ek.setPadding({left:s+(0===n.length?10:0),right:r+i+(0===n.length?10:0)})}else{const t=n.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||0!==t.Iv)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.fA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=n.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||100!==t.Iv)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.fA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=n.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=n.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.ek.forEachAxisX((t=>t.setThickness(0))),null===(r=this.getDefaultAxisX())||void 0===r||r.setThickness(t),this.ek.setPadding({bottom:s+(0===n.length?10:0),top:e+i+(0===n.length?10:0)})}this.ek.Or(t);const l=this.nk.getInterval().start,u=this.nk.getInterval().end,c=jr(h?h.getInterval().start:l,l,u),d=jr(h?h.getInterval().end:u,l,u),f=this.Ro.getHeight(this.ek.T_.getInnerIntervalPixels());this.ck[0].zr(this.Ro.toPoint(l,0)).zt(this.Ro.toPoint(c-l,f)),this.ck[1].zr(this.Ro.toPoint(d,0)).zt(this.Ro.toPoint(u-d,f)),this.dk.members[0].eA(this.Ro.toPoint(l,f),this.Ro.toPoint(c,f)),this.dk.members[1].eA(this.Ro.toPoint(c,f),this.Ro.toPoint(c,0)),this.dk.members[2].eA(this.Ro.toPoint(c,0),this.Ro.toPoint(d,0)),this.dk.members[3].eA(this.Ro.toPoint(d,0),this.Ro.toPoint(d,f)),this.dk.members[4].eA(this.Ro.toPoint(d,f),this.Ro.toPoint(u,f));const v=Je(this.Ro.toPoint(c,f/2),this.nk.Dv,this.ek.Rv),A=Je(this.Ro.toPoint(d,f/2),this.nk.Dv,this.ek.Rv),g=this.vk;this.fk[0].zr({x:v.x-g.x/2,y:v.y-g.y/2}).zt({x:g.x,y:g.y}).eh(this.Ro.getWidth({x:0,y:90})),this.fk[1].zr({x:A.x-g.x/2,y:A.y-g.y/2}).zt({x:g.x,y:g.y}).eh(this.Ro.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.ek.setSeriesBackgroundFillStyle(t),this.ek.Ki.fe(),this}getSeriesBackgroundFillStyle(){return this.ek.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.ek.setSeriesBackgroundStrokeStyle(t),this.ek.Ki.fe(),this}getSeriesBackgroundStrokeStyle(){return this.ek.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.ek.setSeriesBackgroundEffect(t),this.ek.Ki.fe(),this}getSeriesBackgroundEffect(){return this.ek.getSeriesBackgroundEffect()}getTheme(){return this.ek.getTheme()}setTitle(t){return this.ek.setTitle(t),this}getTitle(){return this.ek.getTitle()}setTitleFillStyle(t){return this.ek.setTitleFillStyle(t),this}getTitleFillStyle(){return this.ek.getTitleFillStyle()}setTitleFont(t){return this.ek.setTitleFont(t),this}getTitleFont(){return this.ek.getTitleFont()}setTitleMargin(t){return this.ek.setTitleMargin(t),this}getTitleMargin(){return this.ek.getTitleMargin()}setPadding(t){return void 0===t?this.hk=!0:(this.hk=!1,this.ek.setPadding(t),this.ek.forEachAxis((t=>t.setThickness(void 0)))),this.ek.Ki.fe(),this}getPadding(){return this.ek.getPadding()}setBackgroundFillStyle(t){return this.ek.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.ek.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.ek.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.ek.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Cd(t,i,s,this.ek.Rv,this.ek.Ki)}addUIElement(t,i){return this.ek.addUIElement(t,i)}saveToFile(t,i,s){return this.ek.saveToFile(t,i,s),this}dispose(){return this.ek.dispose(),this.q_.clear(),this.Jy.clear(),this.lk(this),this}isDisposed(){return this.ek.isDisposed()}getLayout(){return this.ek.getLayout()}addEventListener(t,i,s){this.ek.addEventListener(t,i,s)}removeEventListener(t,i){this.ek.removeEventListener(t,i)}}class VA extends Sv{constructor(i,s,e,r,n,h,o){super(i,s,e,r,n,o),this.At="Point Line Series",this.Rb=[],this.Ob=!1,this.zb=!1,this.pk=3,this.ru=0,this.mk=t.PointShape.Circle,this._t=new Ar,this.Lr=Bn(this.rs.polarPointLineSeriesFillStyle,h),this.zc=Bn(this.rs.polarPointLineSeriesStrokeStyle,h),this.Gb=i._y(r,void 0,[Wd.UserSeries]).Hr(this.zc).vs(this.getHighlight()),this.ne(this.Gb),this.Sk=i.yf(r).gf(ho).Hr(_r).Af(this.Lr).pf(this.mk)._f(this.pk).vs(this.getHighlight()),this.ne(this.Sk)}solveNearest(t,i){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=this.Gb.$b(e);if(!r)return;const n=wv(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Rb.length&&this.chart.Ki.ul(jl.Aa),this.Rb=Mv(t),this.Ob=!0,this.Tb=xv(this.Rb),this.ke.fe(),this}getData(){return this.Rb}setStrokeStyle(t){this.zc="function"==typeof t?t(this.zc):t;const i=this.zc;return this.Gb.Hr(i),this.ke.fe(),this}getStrokeStyle(){return this.zc}setPointFillStyle(t){this.Lr="function"==typeof t?t(this.Lr):t;const i=this.Lr;return this.Sk.Af(i),this.ke.fe(),this}getPointFillStyle(){return this.Lr}setPointSize(t){return this.pk=t,this.Sk._f(t),this.ke.fe(),this}getPointSize(){return this.pk}setPointShape(t){return this.mk=t,this.Sk.pf(this.mk),this}getPointShape(){return this.mk}setPointRotation(t){return this.ru=t,this.Sk.Sf(t),this.ke.fe(),this}getPointRotation(){return this.ru}Vr(){return{fill:this.Lr,stroke:this.zc}}setConnectDataAutomaticallyEnabled(t){return this.zb=t,this.ke.fe(),this}getConnectDataAutomaticallyEnabled(){return this.zb}qg(){return this.Og&&this.Rb.length>0&&this.getVisible()}Nr(t,i){t.vs(i),this.ke.fe()}Or(){if(this.Ob||this.scale.Xe()){const t=bv(this.Rb,this.scale),i=mh(t);this.zb?(t.push({...t[0]}),this.Gb.cc(!0)):this.Gb.cc(!1),this.Gb.ws().tc(t).ds(i),this.Sk.vf((new Nu).appendJSON(t),{x:"x",y:"y"}).ds(i),this.Ob=!1,this.Gb.Sh(),this.Sk.Sh()}}we(){return this.Ae||this.mk}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class NA extends Sv{constructor(i,s,e,r,n,h,o){super(i,s,e,r,n,o),this.At="Point Series",this.Rb=[],this.Ob=!1,this.pk=3,this.ru=0,this._t=new Ar,this.Lr=Bn(this.rs.polarPointSeriesFillStyle,h),this.Pr=Bn(this.rs.polarPointSeriesStrokeStyle,h),this.ff=new Nu({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null,storage:Uint32Array}}}),this.hd=i.yf(r).Hr(_r).gf(ho).Af(this.Lr).Mf(this.Pr).pf(t.PointShape.Circle)._f(this.pk).vs(this.getHighlight()).vf(this.ff,{x:"x",y:"y",color:"color"}),this.ne(this.hd)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=bv([s],this.scale)[0],r=this.ff.Jd({x:"x",y:"y",color:"color"},e,qy(i),this.scale,this.chart.Rv);if(!r)return;const n=wv(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Rb.length&&this.chart.Ki.ul(jl.Aa),this.Rb=Mv(t),this.Ob=!0,this.Tb=xv(this.Rb),this.ke.fe(),this}getData(){return this.Rb}setPointAlignment(t){return this.hd.MA(t),this.chart.Ki.fe(),this}getPointAlignment(){return this.hd.m_()}setPointFillStyle(t){this.Lr="function"==typeof t?t(this.Lr):t;const i=this.Lr;return this.hd.Af(i),this.ke.fe(),this}getPointFillStyle(){return this.Lr}setPointStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.hd.Mf(this.Pr),this.ke.fe(),this}getPointStrokeStyle(){return this.Pr}setPointSize(t){return this.pk=t,this.hd._f(t),this.ke.fe(),this}getPointSize(){return this.pk}setPointShape(t){return this.hd.pf(t),this.chart.Ki.fe(),this}getPointShape(){return this.hd.mf()}setPointRotation(t){return this.ru=t,this.hd.Sf(t),this.ke.fe(),this}getPointRotation(){return this.ru}qg(){return this.Og&&this.Rb.length>0&&this.getVisible()}Nr(t,i){t.vs(i),this.ke.fe()}Or(){if(this.Ob||this.scale.Xe()){const t=bv(this.Rb,this.scale),i=mh(t);this.ff.clear().appendJSON(t),this.hd.ds(i),this.Ob=!1,this.hd.Sh()}}Vr(){return{fill:this.Lr}}we(){return this.Ae||this.getPointShape()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class GA extends Sv{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,n),this.At="Heatmap Series",this.bk=!0,this.Xg=!1,this._t=new Ar;const o=this.chart.getSeries().length;this.Lr=Bn(this.rs.polarHeatmapSeriesFillStyle||this.rs.heatmapGridSeriesFillStyle,o);const a=h.amplitudeStart||0,l=h.amplitudeEnd?(h.amplitudeEnd-a)/(h.annuli-1):h.amplitudeStep||1,u={sectors:h.sectors,annuli:h.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:h.dataOrder||"annuli"};this.fl=u,this.xk=t.Mk(e,[],u).Er(this.Lr).vs(this.getHighlight()),this.ne(this.xk);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Tb={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.Ki.El(t),e={x:s.engineX,y:s.engineY},r=Je(e,this.chart.Ki.ji,this.scale),n=wv(r,this.scale),h=qy(i)?this.xk.Jx(n):this.xk.Jd(n);if(!h)return;const o=bv([h],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:h.angle,amplitude:h.amplitude,intensity:h.cellValue,annulus:h.iAnnulus,sector:h.iSector,lut:yo(this.Lr)?this.Lr.lut:void 0}}Es(t,i,s){return Zn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:yo(this.Lr)?this.Lr.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Xg&&this.chart.Ki.ul(jl.Aa),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.fl.dataOrder?t[0].length:t.length,annuli:"annuli"===this.fl.dataOrder?t.length:t[0].length},s="annuli"===this.fl.dataOrder?this.fl.annuli:this.fl.sectors,e="annuli"===this.fl.dataOrder?this.fl.sectors:this.fl.annuli;if(i.x>s||i.y>e){if(!0===this.chart.ug.vl){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const r=[];for(let i=0;i<s;i+=1)r[i]=t[i].slice(0,e);if(0===(t=r).length||0===t[0].length)return this}this.xk.Wp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.fl.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.fl.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.fl.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,r="annuli"===this.fl.dataOrder?t.iSector:t.iAnnulus,n=r+i.secondary-1,h="annuli"===this.fl.dataOrder?this.fl.annuli-1:this.fl.sectors-1,o="annuli"===this.fl.dataOrder?this.fl.sectors-1:this.fl.annuli-1;if(s<0||r<0){if(!0===this.chart.ug.vl){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Or.console.warn(i)}return this}if(e>h||n>o){if(!0===this.chart.ug.vl){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${h}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${r}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Or.console.warn(t)}const a=Math.max(e-h,0),l=i.primary-a,u=Math.max(n-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.xk.Wp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:r,values:t.values})}return this.ke.fe(),this.Xg=!0,this}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.xk.Er(this.Lr),this.ke.fe(),this}getFillStyle(){return this.Lr}clear(){return this.xk.ws(),this.ke.fe(),this}setIntensityInterpolation(t){return t=t||"disabled",this.xk.Yp(t),this.ke.fe(),this}getIntensityInterpolation(){return this.xk.Hp()}Me(){return In(this.Lr,this.xk.ls())}qg(){return this.Og&&this.getVisible()}Nr(t,i){t.vs(i),this.ke.fe()}Or(){}Vr(){return{fill:this.Lr}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class $A extends vv{constructor(t,i,s,e,r,n,h,o){var a;super(t,jA,i,s,e,r,n,h,o),this.wk=90,this._k=12,this.kk=UA,this.My=this.lb.ef(this.cb).setPointerEvents(!1),this.Sb=t=>{if(0===this.getTitle().length||oo(this.getTitleFillStyle()))return;let i=180*(t.S-this.cb.We())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;return!(i>=0&&i<=20||i>=340&&i<=360)&&void 0},this.Ah=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.wk),this.Ck=null!==(a=this.rs.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.Tk="function"==typeof t?t(this.Tk):t,this.Fk(),this.lb.fe(),this}getTickStyle(){return this.Tk}setTickFormattingFunction(t){return this.kk=t,this.Fk(),this.lb.fe(),this}getTickFormattingFunction(){return this.kk}setClockwise(t){this.cb.je(t);const i=this.wk*Math.PI/180;return t?this.cb.He(i+Math.PI/2):this.cb.He(i-Math.PI/2),this.lb.fe(),this}getClockwise(){return!this.cb.Ye()}setNorth(t){for(;t<0;)t+=360;t%=360,this.wk=t;const i=t*Math.PI/180;return this.getClockwise()?this.cb.He(i+Math.PI/2):this.cb.He(i-Math.PI/2),this.lb.fe(),this}getNorth(){return 180*this.cb.We()/Math.PI}setDivision(t){return this._k=t,this.Fk(),this.lb.fe(),this}getDivision(){return this._k}getMarginAfterTicks(){return this.Ck}setMarginAfterTicks(t){return this.Ck=t,this.chart.Ki.fe(),this}Xv(){return[]}Ph(t,i,s){return{ticksInfo:i,Qv:this.$h(((t,i)=>{const s=i.ho.un,e=.5*this.fb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.ph.Sh().td().y);return Math.max(t,e)}),0)+this.Ck,updatedTicks:s}}Jh(t,i){return i}qh(t,i,s){return{start:t,end:i}}gb(t,i){const s=t.Ye()?1:-1,e=t.We(),r=t.Ue()?t.$e().end-t.$e().start:t.$e().start-t.$e().end;return{x:Math.cos((i-e)*s)*r,y:Math.sin((i-e)*s)*r}}yb(t,i){return t.Wr(i)}bb(t,i,s,e){const r=this.Tk,n=t.Ye()?1:-1,h=t.We(),o=(e.S-h)*n,a=Math.cos(o),l=Math.sin(o),u=t.Ue()?t.$e().end-t.$e().start:t.$e().start-t.$e().end,c={x:a*u,y:l*u};i.Zr({x:0,y:0}).Xr(c);const d={x:c.x+a*r.tickLength*t.$i().x,y:c.y+l*r.tickLength*t.$i().y};s.Zr(c).Xr(d),i.Hr(r.gridStrokeStyle),s.Hr(r.tickStyle)}Ab(t,i,s){const e=t.Ye()?1:-1;let r,n=(i-t.We())*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const h=Math.cos(n),o=Math.sin(n),a=s.tickLength+s.tickPadding;return{alignment:{x:0,y:0},padding:{x:h*a*t.$i().x,y:o*a*t.$i().y},rotation:180*r/Math.PI,offset:{x:0,y:0}}}pb(t,i,s){const e=t.Ue()?t.$e().end-t.$e().start:t.$e().start-t.$e().end;this.My.Pc(0).Xr(360).Rc(0).Bc(e+.5*i.getThickness()*t.$i().x).Oc(360).Er(ho).Dr(i)}mb(t,i,s){const e=t.We(),r=this.Ab(t,0+e,this.Tk),n=t.Ue()?t.$e().end-t.$e().start:t.$e().start-t.$e().end;i.Cu(r.alignment).eh(r.rotation).Su(r.offset.x,r.offset.y).zr(Lh({x:n,y:0},r.padding))}Fk(){this.uh({en:[],rn:[{ph:"Radial ticks",sA:0,un:this.Tk,qr:this.kk,lo:(t,i,s,e)=>{const r=[],n=2*Math.PI/this._k;for(let t=0;t<2*Math.PI;t+=n)r.push(t);return r},Rn:{Vh:()=>{},On:()=>!1,Gh:"hide-label"},uo:void 0}],nn:UA,hn:void 0,an:void 0},"Numeric")}}const UA=(t,i,s)=>(180*t/Math.PI).toFixed(0),jA={Yh:()=>{},Hh:()=>{},Xh:()=>{},hb:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,Rt:(t,i)=>{},Yt:(i,s,e,r,n)=>t.x.Yt(i,s,e,r,n)}),ob:t=>t.radial},YA=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),HA=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class WA extends Bo{constructor(t,i,s,e,r,n){super(i,s,r,n),this.At="Sector",this.Ik=0,this.Lk=1*Math.PI/2,this.Pk=void 0,this.Bk=void 0,this._t=new Ar,this.ke=t,this.cb=e,this.Nb=this.ke.od(this.cb).vs(this.getHighlight()),this.ne(this.Nb),this.Lr=r.polarSectorFillStyle,this.Pr=r.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.Ik=t,this.ke.fe(),this}getAngleStart(){return this.Ik}setAngleEnd(t){return this.Lk=t,this.ke.fe(),this}getAngleEnd(){return this.Lk}setAmplitudeStart(t){return this.Pk=t,this.ke.fe(),this}getAmplitudeStart(){return this.Pk}setAmplitudeEnd(t){return this.Bk=t,this.ke.fe(),this}getAmplitudeEnd(){return this.Bk}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.ke.fe(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.ke.fe(),this}getStrokeStyle(){return this.Pr}Or(){const t=this.cb.$e(),i=void 0!==this.Pk?jr(this.Pk,t.start,t.end):t.start,s=void 0!==this.Bk?jr(this.Bk,t.start,t.end):t.end,e=[],r=Math.min(this.Ik,this.Lk),n=Math.max(this.Ik,this.Lk);for(let t=r;t<=n;t+=1)e.push({angle:t,amplitude:i});for(let t=n;t>=r;t-=1)e.push({angle:t,amplitude:s});const h=bv(e,this.cb);this.Nb.Nu(h).Er(this.Lr).Dr(this.Pr)}Nr(t,i){t.vs(i),this.ke.fe()}Vr(){return{fill:this.Lr,stroke:this.Pr}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class XA extends cf{constructor(t,i,s,e,r,n,h){var o;super(t,i,s,i._g("polarChart bg",0),e,i.Ki.rs.polarChartBackgroundFillStyle,i.Ki.rs.polarChartBackgroundStrokeStyle,i.Ki.rs.polarChartTitleFont,i.Ki.rs.polarChartTitleFillStyle,i.Ki.rs.polarChartTitleShadow,h,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.coordsClient="client",this.Av=[],this.Dk=t=>{this.cb.zt(t.engineWidth,t.engineHeight)},this.mv=mn(this.Av),this.Ek=t=>{this.Av.push(t)},this.Rk=()=>this.Jy,this._t=new Ar,this.Ki.ul(jl.ha),this.N_=i.vS("polarChart series bg",0),this.Ok=i.AS("polarChart axis gridlines",0),this.zk=i.AS("polarChart series",1),this.Vk=i.AS("polarChart axis lines",2),this.Nk=i.AS("polarChart axis ticks",3),this.cb=s.d2({scaleXYConstructor:pa}),this.addEventListener("resize",this.Dk),this._n.Eh("Polar Chart"),this.ip=this.N_.ef(this.cb).Er(this.rs.polarChartSeriesBackgroundFillStyle).Dr(_r).Pc(0).Xr(360).Rc(0),this.sp=this.N_.ef(this.cb).Er(ho).Dr(this.rs.polarChartSeriesBackgroundStrokeStyle).Pc(0).Xr(360).Rc(0),super.tp(this.ip,this.sp),this.wg(r,this.Rv),this.Gk=new gv(this,this.cb,this.rs,!1!==(null==n?void 0:n.animationsEnabled),this.Ok,this.Vk,this.Nk,this.Ks,this.Rk),this.$k=new $A(this,this.cb,this.rs,!1!==(null==n?void 0:n.animationsEnabled),this.Ok,this.Vk,this.Nk,this.Ks),this.coordsAxis={axisAmplitude:this.Gk,axisRadial:this.$k};const a=i.xS(),l=Hr(n?n.cursorBuilder:void 0,Yf);this.MS=rp(this,a,l.Wm(a,this.uiScale,this.uiScale,$r,this.rs),this,"show-nearest",JA,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}getSeries(){return this.Jy}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.MS.solveNearest(t,i,this.Jy,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=Yf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.Rv,r=s;if(mo(r)){const t=Je(i,e,this.Ki.ji);return this.Ki.Rl({engineX:t.x,engineY:t.y})}if(bo(r))return i;if(YA(r)){const t=Je(i,e,this.cb);return wv(t,this.cb)}}else{const s=t,e=i;if(So(s)){if(YA(e)){const t=this.Ki.El(s),i=Je({x:t.engineX,y:t.engineY},this.Ki.ji,this.cb);return wv(i,this.cb)}if(mo(e))return s;if(bo(e)){const t=this.Ki.El(s);return Je({x:t.engineX,y:t.engineY},this.Ki.ji,this.Rv)}}else if(HA(s)){if(YA(e))return s;const t=bv([s],this.cb)[0];if(mo(e)){const i=Je(t,this.cb,this.Ki.ji),s={engineX:i.x,engineY:i.y};return this.Ki.Rl(s)}if(bo(e))return Je(t,this.cb,this.Rv)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new Tv(this.zk,this,this.Ky,this.cb,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addPointSeries(t){const i=new NA(this.zk,this,this.Ky,this.cb,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addPointLineSeries(t){const i=new VA(this.zk,this,this.Ky,this.cb,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addAreaSeries(t){const i=new Cv(this.zk,this,this.Ky,this.cb,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addPolygonSeries(t){const i=new _v(this.zk,this,this.Ky,this.cb,this.rs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Jy.length,this.Ki.Ks);return this.ep(i,t),i}addHeatmapSeries(t){const i=new GA(this.zk,this,this.Ky,this.cb,this.rs,this.Ki.Ks,t);return this.ep(i,t),i}addSector(t){const i=new WA(this.zk,this,this.mv,this.cb,this.rs,this.Ki.Ks);return this.Ek(i),this.ge.forEach((s=>{s.KA()&&null!==t&&s.tc(i,t)})),i}getAmplitudeAxis(){return this.Gk}get amplitudeAxis(){return this.Gk}get axisAmplitude(){return this.Gk}getRadialAxis(){return this.$k}get radialAxis(){return this.$k}get axisRadial(){return this.$k}Or(t){super.Or(t);const i=Ud.Bg(this._n,this.kg),s=this.ge.reduce(((t,s)=>{const e=s.Sh(i,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,s);for(const t of this.Jy)t.jg();this.Gk.Zh(),this.$k.Zh();for(const t of this.Jy)t.Or();const e=this.cb.getInnerIntervalPixels().x/2,r=this.Gk.Sh({physicalAxisSize:e}),n=this.$k.Sh({physicalAxisSize:2*Math.PI*e});this.Gk.Or(r),this.$k.Or(n);const h=[this.xo.left+n.Qv+s.left,this.xo.right+n.Qv+s.right],o=[this.xo.bottom+n.Qv+s.bottom,this.xo.top+n.Qv+i+s.top];this.cb.Ei(h).Ri(o);const a=this.cb.$e().start,l=this.cb.$e().end,u=this.cb.Ue()?(n.Qv||0)*this.cb.x.getPixelSize()+l-a:(n.Qv||0)*this.cb.x.getPixelSize()+a-l;this.ip.Bc(u).Oc(360),this.sp.Bc(u).Oc(360);for(const t of this.Av)t.Or();this.MS.Or(!1,this.Jy,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.Jy)t.Yg();return super.Mg(),this.ge.forEach((t=>t.Or(i,this.xo))),this.Uk(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Gk.setAnimationsEnabled(t),this.$k.setAnimationsEnabled(t),this}getMinimumSize(){return e(ZA,ZA)}Uk(){}forEachAxis(t){return t(this.Gk),t(this.$k),this}dispose(){return this.Av.slice().forEach((t=>t.dispose())),this.MS.It(),this.N_.It(),this.Ok.It(),this.zk.It(),this.Vk.It(),this.Nk.It(),super.dispose()}tg(){return[...this.Jy,...this.Av]}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const ZA=300,JA=(t,i,s)=>{var e;return tr(i)?tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Co(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Co(i.lut?eo(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):tp(i,[[{component:i.series,componentColor:ip(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Co(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class QA extends Bo{constructor(t,i,s,e){super(t,i,s,e),this.At="Slice",this.S=0,Or.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.Ki.fe()}))}))}}class KA extends QA{}class qA extends KA{constructor(t,i,s,e,r,n,h,o){super(e,n,h,o),this.At="Slice",this.S=0,this.jk=!1,this.Yk=ho,this.Hk=ho,this.Wk=this.S,this.Xk=mr((()=>this.chart.Ki.fe())),this.Zk=()=>{this.Jk=void 0},this._t=new Ar,this.index=t,this.chart=e,this.scale=r,this.Zs=n,this.Nb=i.od(r,Mu.Simple).vs(this.getHighlight()),this.ne(this.Nb),this.ph=s.no(r).vs(this.getHighlight()),this.ne(this.ph,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Qk(this.Wk,t,(()=>this.chart.ge.forEach((t=>t.ye())))):this.Wk=t,this.S=t,this.chart.ge.forEach((t=>t.ye())),this.chart.Ki.fe(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Wk)>0?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),this.Qk(this.Wk,0,(()=>super.setVisible(!1)))):(this.Wk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),super.setVisible(!0),this.Qk(this.Wk,this.S)):(this.Wk=this.S,super.setVisible(!0)),this}Qk(t,i,s){this.Jk=this.Xk(300,yr.ease)([[t,i]],(([t])=>{this.Wk=t,this.chart.Ki.fe()})),this.Jk.addEventListener("everyAnimationEnd",this.Zk),s&&this.Jk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.Yk=t,this.Hk=s,this.Nb.Er(this.Yk).Dr(i),this.ph.Er(this.Hk).ih(e).Dh(r)}getAnimatedValue(){return this.Wk}Nr(t,i){return t.vs(i),this.chart.Ki.fe(),this}Vr(){return{fill:this.Yk,stroke:this.Nb.Il()}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}var tg;t.SliceLabelIndices=void 0,(tg=t.SliceLabelIndices||(t.SliceLabelIndices={}))[tg.LabelsInsideSlices=0]="LabelsInsideSlices",tg[tg.LabelsOnSides=1]="LabelsOnSides";const ig={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>Math.abs(t.getAnimatedValue())-Math.abs(i.getAnimatedValue()),SortByValueDescending:(t,i)=>Math.abs(i.getAnimatedValue())-Math.abs(t.getAnimatedValue()),None:()=>0},sg={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};var eg;t.FunnelSliceModes=void 0,(eg=t.FunnelSliceModes||(t.FunnelSliceModes={}))[eg.VariableHeight=0]="VariableHeight",eg[eg.VariableWidth=1]="VariableWidth";const rg=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},ng=(i,s,e,r,n,h=0,o=t.FunnelSliceModes.VariableHeight,a,l)=>{s=rg(s,r.x),e=rg(e,r.x);const u=i.length;let c=0,d=0;c=i.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let f={x:a-s/2+l.left,y:r.y+n.bottom+l.bottom},v={x:a+s/2+l.left,y:r.y+n.bottom+l.bottom},A={x:0,y:n.bottom},g={x:0,y:n.bottom},y=0,p=0;if(h)for(let s=0;s<i.length;s+=1){const e=i[s],a=10;p+=Math.abs(e.getAnimatedValue());const l=o===t.FunnelSliceModes.VariableWidth?(r.y-h*u)/u:r.y+n.bottom-p/c*r.y;if(o===t.FunnelSliceModes.VariableWidth){h=l-h<a?Math.max(20,l-a):h;break}0!==y&&y-l-h<a&&(h=Math.max(0,y-l-a)),y=l}const m=(s-e)/2/r.y;for(let y=0;y<u;y+=1){const p=i[y];d+=Math.abs(p.getAnimatedValue());const S=o===t.FunnelSliceModes.VariableWidth?(r.y-h*u)/u:r.y+n.bottom-d/c*r.y;let b=0;y>0&&(f={x:A.x+m*h,y:A.y-h},v={x:g.x-m*h,y:g.y-h}),b=(s+d/c*(e-s))/2,A={x:a-b+l.left,y:o===t.FunnelSliceModes.VariableWidth?f.y-S:S+l.bottom},g={x:a+b+l.left,y:o===t.FunnelSliceModes.VariableWidth?v.y-S:S+l.bottom},v.x>=f.x&&g.x>A.x&&p.Nb.Nu([A,f,v,g])}};class hg extends $d{constructor(i,s,e,r,n,h,o){var a;super(i,s,e,s._g("funnelChart bg",0),r,s.Ki.rs.funnelChartBackgroundFillStyle,s.Ki.rs.funnelChartBackgroundStrokeStyle,s.Ki.rs.funnelChartTitleFont,s.Ki.rs.funnelChartTitleFillStyle,s.Ki.rs.funnelChartTitleShadow,h,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.Kk=[],this.qk=ig.None,this.tC=!0,this.iC=this.rs.funnelChartSliceLabelShadow,this.sC=0,this.eC=20,this.rC=5,this.nC=t.FunnelSliceModes.VariableHeight,this.hC=!0,this.oC=t=>{const i=this.Kk.indexOf(t);i>=0&&(this.Kk.splice(i,1),this.aC())},this._t=new Ar,this.Ki.ul(jl.ea),this.lC=this.rs.effectsText,this.uC=s.AS("funnelChart bottom",0),this.cC=s.AS("funnelChart top",1),this._n.Eh("Funnel Chart"),this.dC=this.rs.funnelChartSliceFillStylePalette,this.fC=this.rs.funnelChartSliceStrokeStyle,this.vC=this.rs.funnelChartSliceLabelFont,this.AC=this.rs.funnelChartSliceLabelFillStyle;const l=s.xS(),u=Hr(o?o.cursorBuilder:void 0,Uf);this.MS=rp(this,l,u.Wm(l,this.uiScale,this.uiScale,$r,this.rs),void 0,"show-pointed",og,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.wg(n,this.Rv);const c={backgroundVisible:!0,...null==o?void 0:o.legend};this.legend.setOptions(c)}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Uf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}addSlice(t,i){const s=new qA(this.sC,this.uC,this.cC,this,this.Rv,this.oC,this.rs,this.Ki.Ks);return this.sC+=1,s.setName(t),s.setValue(i),s.Ks.te.de(this.lC),s.Ks.ie.de(this.hC),this.Kk.push(s),this.Ki.fe(),s.setHighlightOnHover(this.tC),this.ge.forEach((t=>{t.KA()&&t.tc(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Kk}setNeckWidth(t){return this.eC=jr(t,1,99),this.Ki.fe(),this}getNeckWidth(){return this.eC}setSliceGap(t){return this.rC=Math.min(Math.max(t,0),20),this.Ki.fe(),this}setSliceMode(t){return this.nC=t,this.Ki.fe(),this}getFunnelSliceMode(){return this.nC}setLUT(t){return this.qf=t,this.Ki.fe(),this}setSliceFillStyle(t){return this.dC=t,this.Ki.fe(),this}getSliceFillStyle(){return this.dC}setSliceStrokeStyle(t){return this.fC="function"==typeof t?t(this.fC):t,this.Ki.fe(),this}getSliceStrokeStyle(){return this.fC}setSliceEffect(t){return this.hC=t,this.Kk.forEach((i=>i.Ks.ie.de(t))),this.Ki.fe(),this}getSliceEffect(){return this.hC}setSliceSorter(t){return this.qk=t,this.Kk=this.Kk.sort(this.qk),this.Ki.fe(),this}getSliceSorter(){return this.qk}setLabelFillStyle(t){return this.AC="function"==typeof t?t(this.AC):t,this.Ki.fe(),this}getLabelFillStyle(){return this.AC}setLabelShadow(t){return this.iC=t,this.Ki.fe(),this}getLabelShadow(){return this.iC}setLabelFont(t){return this.vC="function"==typeof t?t(this.vC):t,this.Ki.fe(),this}getLabelFont(){return this.vC}setLabelEffect(t){return this.lC=t,this.Kk.forEach((i=>i.Ks.te.de(t))),this.Ki.fe(),this}getLabelEffect(){return this.lC}setLabelFormatter(t){return this.gC=t,this.Ki.fe(),this}getLabelFormatter(){return this.gC}setSliceHighlightOnHover(t){return this.tC=t,this.Kk.forEach((i=>i.setHighlightOnHover(t))),this}Or(t){super.Or(t),super.Mg(),this.Kk=this.Kk.sort(this.qk);for(let t=0,{length:i}=this.Kk;t<i;t+=1)this.yC(this.Kk[t],t);const i=this.Kk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=Ud.Bg(this._n,this.kg),r=this.ge.reduce(((t,i)=>{const e=i.Sh(s,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,r);const n=e(this.Rv.x.getInnerInterval()-(this.xo.left+this.xo.right),this.Rv.y.getInnerInterval()-(this.xo.bottom+this.xo.top+s)),h=e(n.x-r.left-r.right,n.y-r.top-r.bottom),o=e(this.xo.left+(n.x+r.left-r.right)/2,this.xo.bottom+(n.y+r.bottom-r.top)/2);let a=0;for(let t=0;t<i.length;t+=1)a+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.ph.Eh(this.gC(s,l[t])).Sh()}l.push(a),this.MS.Or(!1,this.Kk,((t,s,e)=>{const r=l[i.indexOf(t)]||0,n=this.Ki.El(s);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.Ki.ji,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.Ki.ji},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}})),this.ge.forEach((t=>t.Or(s,this.xo))),this.pC(i,l,o,h,r)}yC(t,i){t.setStyle(this.qf?new uo({color:this.qf.getColors(t.getAnimatedValue(),void 0)}):this.dC(i,t),this.fC,this.AC,this.vC,this.iC)}aC(){this.Kk=this.Kk.sort(this.qk),this.Ki.fe()}tg(){return this.Kk}dispose(){return this.Kk.slice().forEach((t=>t.dispose())),this.MS.It(),this.uC.It(),this.cC.It(),super.dispose()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const og=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],ag=(i,s,e)=>{const r=i.Gu();if(0===r.length)return{x:0,y:0};let n;const h=(r[1].y-r[0].y)/2+r[0].y;return n=s===t.FunnelLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-e:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+e,{x:n,y:h}},lg=t=>{const i=t.Gu();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class ug extends hg{constructor(){super(...arguments),this.gC=sg.NamePlusValue,this.mC=0,this.SC=10,this.bC=30,this.xC=10,this.MC=t.FunnelLabelSide.Left,this.wC=[],this._C=this.rs.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this._C=t;for(let t=0;t<this.wC.length;t+=1)this.wC[t].Hr(this._C);return this.Ki.fe(),this}getLabelConnectorStyle(){return this._C}setLabelConnectorGapBeforeLabel(t){return this.SC=t,this.Ki.fe(),this}getLabelConnectorGapBeforeLabel(){return this.SC}setLabelConnectorGapBeforeSlice(t){return this.mC=t,this.Ki.fe(),this}getLabelConnectorGapBeforeSlice(){return this.mC}setLabelConnectorLengthAfterSlice(t){return this.bC=t,this.Ki.fe(),this}getLabelConnectorLengthAfterSlice(){return this.bC}setLabelConnectorMinLengthBeforeSlice(t){return this.xC=t,this.Ki.fe(),this}getLabelConnectorMinLengthBeforeSlice(){return this.xC}setLabelSide(t){return this.MC=t,this.Ki.fe(),this}getLabelSide(){return this.MC}pC(i,s,e,r,n){let h=0,o=0;for(let t=0;t<i.length;t+=1){const s=i[t].ph.setVisible(!0).Sh().td();h=Math.max(h,s.x),o+=s.y}const a=.4*r.x,l=r.x-a-(this.mC+this.bC+this.xC+this.SC);let u=!0;l<50?u=!1:h>l&&(i.forEach((t=>{const i=t.ph.zh(),s=t.ph.td().x/i.length,e=Math.floor(l/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.ph.Eh(s).Sh()}})),o=0,h=i.reduce(((t,i)=>{const s=i.ph.td();return o+=s.y,Math.max(t,s.x)}),0));const c=this.MC===t.FunnelLabelSide.Left?this.xo.left+n.left:this.xo.left+r.x,d=this.MC===t.FunnelLabelSide.Left?-1:1,f=r.y-o;f<0&&(u=!1);const v=u?h+this.SC+this.xC+this.bC+this.mC:0,A=r.x-v,g=this.MC===t.FunnelLabelSide.Left?this.xo.left+v:this.xo.left,y=this.MC===t.FunnelLabelSide.Left?g+A:this.xo.left+A,p=(g+y)/2;ng(i,100,this.eC,{x:A,y:r.y},this.xo,this.rC,this.nC,p,n);const m=i.filter((t=>u&&0!==t.Nb.Gu().length?(t.ph.setVisible(!0),!0):(t.ph.setVisible(!1),!1))),S=f/(m.length+1);let b=this.xo.bottom+r.y-(this.nC==t.FunnelSliceModes.VariableHeight?S:0)+n.bottom;this.nC==t.FunnelSliceModes.VariableWidth&&(b-=o/i.length/2);const x=this.MC===t.FunnelLabelSide.Left?g:y,M=this.MC===t.FunnelLabelSide.Left?p-.5*this.eC/100*A:p+.5*this.eC/100*A,w=this.xo.bottom+r.y+n.bottom,_=this.xo.bottom+n.bottom;for(let t=0;t<this.wC.length;t+=1)this.wC[t].setVisible(!1);for(let i=0;i<m.length;i+=1){const s=m[i],e=s.Nb,r=s.ph,n=r.td(),h=ag(e,this.MC,this.mC);if(this.nC==t.FunnelSliceModes.VariableHeight){s.ph.zr({x:c,y:b}).Cu({x:d,y:1});const i=b-.5*n.y,e={x:this.MC===t.FunnelLabelSide.Left?Math.min(Vo(x,M,(i-w)/(_-w))-this.bC,h.x):Math.max(Vo(x,M,(i-w)/(_-w))+this.bC,h.x),y:i},o={x:this.MC===t.FunnelLabelSide.Left?r.yu().x+n.x+this.SC:r.yu().x-n.x-this.SC,y:i};this.kC([h,e,o]),b-=n.y+S}else{const i=this.MC===t.FunnelLabelSide.Left?c+n.x+this.SC:c-n.x-this.SC;s.ph.zr({x:c,y:h.y}).Cu({x:d,y:0}),this.kC([h,{x:i,y:h.y}])}}}getMinimumSize(){return e(500,300)}kC(t){if(t){let i;for(let t=0;t<this.wC.length;t+=1)if(!this.wC[t].getVisible()){i=this.wC[t].setVisible(!0);break}void 0===i&&(i=this.cC._y(this.Rv,void 0,[Wd.InternalUI]).Hr(this._C),this.wC.push(i)),i.ws().tc(t)}}}class cg extends hg{constructor(){super(...arguments),this.gC=sg.Name}pC(t,i,s,e,r){const n=this.xo.left+e.x/2;ng(t,100,this.eC,e,this.xo,this.rC,this.nC,n,r);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.Nb,r=s.ph,n=lg(e);n&&r.zr(n).xu(0)._u(0)}}getMinimumSize(){return e(200,200)}}const dg={LabelsOnSides:ug,LabelsInsideSlices:cg};var fg,vg;t.FunnelLabelSide=void 0,(fg=t.FunnelLabelSide||(t.FunnelLabelSide={}))[fg.Right=0]="Right",fg[fg.Left=1]="Left";class Ag extends QA{}class gg extends Ag{constructor(t,i,s,e,r,n,h,o){super(e,n,h,o),this.jk=!1,this.CC=ho,this.Hk=ho,this.Wk=this.S,this.TC=this.jk?1:0,this.FC=this.getVisible(),this.Xk=mr((()=>this.chart.Ki.fe())),this.IC=mr((()=>this.chart.Ki.fe())),this.Zk=()=>{this.Jk=void 0},this.LC=()=>{this.PC=void 0},this._t=new Ar,this.index=t,this.chart=e,this.scale=r,this.Zs=n,this.BC=i.ef(r).vs(this.getHighlight()),this.ne(this.BC),this.ph=s.no(r).vs(this.getHighlight()),this.ne(this.ph,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,i)=>{un(i),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.FC&&this.Qk(this.Wk,t,(()=>this.chart.ge.forEach((t=>t.ye())))):this.Wk=t,this.S=t,this.chart.ge.forEach((t=>t.ye())),this.chart.Ki.fe(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.PC&&this.PC.finish(),this.PC=this.IC(300,yr.ease)([[this.TC,t?1:0]],(([t])=>{this.TC=t,this.chart.Ki.fe()})),this.PC.addEventListener("everyAnimationEnd",this.LC),this.jk=!this.jk):!1!==this.chart.getMultipleSliceExplosion()||t?(this.TC=this.jk?0:1,this.jk=!this.jk):(this.TC=0,this.jk=!this.jk),this.chart.Ki.fe(),this}getExploded(){return this.jk}setVisible(t){return this.FC=t,!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Wk)>0?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),this.Qk(this.Wk,0,(()=>super.setVisible(!1)))):(this.Wk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),super.setVisible(!0),this.Qk(this.Wk,this.S)):(this.Wk=this.S,super.setVisible(!0)),this}Qk(t,i,s){this.Jk=this.Xk(300,yr.ease)([[t,i]],(([t])=>{this.Wk=t,this.chart.Ki.fe()})),this.Jk.addEventListener("everyAnimationEnd",this.Zk),s&&this.Jk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.CC=t,this.Hk=s,this.BC.Er(this.CC).Dr(i),this.ph.Er(this.Hk).ih(e).Dh(r)}getAnimatedValue(){return this.Wk}getAnimatedExplosion(){return this.TC}Vr(){return{fill:this.CC,stroke:this.BC.Il()}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class yg extends QA{}class pg extends yg{constructor(t,i,s,e,r,n,h,o){super(e,n,h,o),this.At="Slice",this.S=0,this.jk=!1,this.Yk=ho,this.Hk=ho,this.Wk=this.S,this.Xk=mr((()=>this.chart.Ki.fe())),this.Zk=()=>{this.Jk=void 0},this._t=new Ar,this.index=t,this.chart=e,this.scale=r,this.Zs=n,this.Nb=i.od(r,Mu.Simple).vs(this.getHighlight()),this.ne(this.Nb),this.ph=s.no(r).vs(this.getHighlight()),this.ne(this.ph,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Qk(this.Wk,t,(()=>this.chart.ge.forEach((t=>t.ye())))):this.Wk=t,this.S=t,this.chart.ge.forEach((t=>t.ye())),this.chart.Ki.fe(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Wk)>0?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),this.Qk(this.Wk,0,(()=>super.setVisible(!1)))):(this.Wk=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Jk&&(this.Jk.finish(!1),this.Jk=void 0),super.setVisible(!0),this.Qk(this.Wk,this.S)):(this.Wk=this.S,super.setVisible(!0)),this}Qk(t,i,s){this.Jk=this.Xk(300,yr.ease)([[t,i]],(([t])=>{this.Wk=t,this.chart.Ki.fe()})),this.Jk.addEventListener("everyAnimationEnd",this.Zk),s&&this.Jk.addEventListener("end",s)}setStyle(t,i,s,e,r){this.Yk=t,this.Hk=s,this.Nb.Er(this.Yk).Dr(i),this.ph.Er(this.Hk).ih(e).Dh(r)}getAnimatedValue(){return this.Wk}Vr(){return{fill:this.Yk,stroke:this.Nb.Il()}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}t.PyramidSliceModes=void 0,(vg=t.PyramidSliceModes||(t.PyramidSliceModes={}))[vg.VariableHeight=0]="VariableHeight",vg[vg.VariableWidth=1]="VariableWidth";const mg=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Sg=(i,s,e,r,n,h=0,o=t.PyramidSliceModes.VariableHeight,a,l=Hn)=>{s=mg(s,r.x),e=mg(e,r.x);const u=i.length;let c=0,d=0;c=i.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let f={x:a-s/2+l.left,y:r.y+n.bottom+l.bottom},v={x:a+s/2+l.left,y:r.y+n.bottom+l.bottom},A={x:0,y:n.bottom},g={x:0,y:n.bottom},y=0,p=0;if(h)for(let s=0;s<i.length;s+=1){const e=10;p+=Math.abs(i[s].getAnimatedValue());const a=o===t.PyramidSliceModes.VariableWidth?(r.y-h*u)/u:r.y+n.bottom-p/c*r.y;if(o===t.PyramidSliceModes.VariableWidth){h=a-h<e?Math.max(20,a-e):h;break}0!==y&&y-a-h<e&&(h=Math.max(0,y-a-e)),y=a}const m=(s-e)/2/r.y;for(let y=0;y<u;y+=1){const p=i[y];d+=Math.abs(p.getAnimatedValue());const S=o===t.PyramidSliceModes.VariableWidth?(r.y-h*u)/u:r.y+n.bottom-d/c*r.y;let b=0;y>0&&(f={x:A.x+m*h,y:A.y-h},v={x:g.x-m*h,y:g.y-h}),b=(s+d/c*(e-s))/2,A={x:a-b+l.left,y:o===t.PyramidSliceModes.VariableWidth?f.y-S:S+l.bottom},g={x:a+b+l.left,y:o===t.PyramidSliceModes.VariableWidth?v.y-S:S+l.bottom},v.x>=f.x&&g.x>=A.x&&p.Nb.Nu([A,f,v,g])}};class bg extends $d{constructor(i,s,e,r,n,h,o){var a;super(i,s,e,s._g("pyramidChart bg",0),r,s.Ki.rs.pyramidChartBackgroundFillStyle,s.Ki.rs.pyramidChartBackgroundStrokeStyle,s.Ki.rs.pyramidChartTitleFont,s.Ki.rs.pyramidChartTitleFillStyle,s.Ki.rs.pyramidChartTitleShadow,h,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.Kk=[],this.qk=ig.None,this.dC=this.rs.pyramidChartSliceFillStylePalette,this.fC=this.rs.pyramidChartSliceStrokeStyle,this.tC=!0,this.vC=this.rs.pyramidChartSliceLabelFont,this.AC=this.rs.pyramidChartSliceLabelFillStyle,this.iC=this.rs.pyramidChartSliceLabelShadow,this.sC=0,this.eC=100,this.rC=5,this.nC=t.PyramidSliceModes.VariableHeight,this.hC=!0,this.oC=t=>{const i=this.Kk.indexOf(t);i>=0&&(this.Kk.splice(i,1),this.aC())},this._t=new Ar,this.Ki.ul(jl.ea),this.lC=this.rs.effectsText,this.uC=s.AS("pyramidChart bottom",0),this.cC=s.AS("pyramidChart top",1),this._n.Eh("Pyramid Chart");const l=s.xS(),u=Hr(o?o.cursorBuilder:void 0,Uf);this.MS=rp(this,l,u.Wm(l,this.uiScale,this.uiScale,$r,this.rs),void 0,"show-pointed",xg,(()=>0)),this.wg(n,this.Rv),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled));const c={backgroundVisible:!0,...null==o?void 0:o.legend};this.legend.setOptions(c)}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Uf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}addSlice(t,i){const s=new pg(this.sC,this.uC,this.cC,this,this.Rv,this.oC,this.rs,this.Ki.Ks);return this.sC+=1,s.setName(t),s.setValue(i),s.Ks.te.de(this.lC),s.Ks.ie.de(this.hC),this.Kk.push(s),this.Ki.fe(),this.ge.forEach((t=>{t.KA()&&t.tc(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Kk}setNeckWidth(t){return this.eC=jr(t,1,100),this.Ki.fe(),this}getNeckWidth(){return this.eC}setSliceGap(t){return this.rC=Math.min(Math.max(t,0),20),this.Ki.fe(),this}setSliceMode(t){return this.nC=t,this.Ki.fe(),this}getPyramidSliceMode(){return this.nC}setLUT(t){return this.qf=t,this.Ki.fe(),this}setSliceFillStyle(t){return this.dC=t,this.Ki.fe(),this}getSliceFillStyle(){return this.dC}setSliceStrokeStyle(t){return this.fC="function"==typeof t?t(this.fC):t,this.Ki.fe(),this}getSliceStrokeStyle(){return this.fC}setSliceEffect(t){return this.hC=t,this.Kk.forEach((i=>i.Ks.ie.de(t))),this.Ki.fe(),this}getSliceEffect(){return this.hC}setSliceSorter(t){return this.qk=t,this.Kk=this.Kk.sort(this.qk),this.Ki.fe(),this}getSliceSorter(){return this.qk}setLabelFillStyle(t){return this.AC="function"==typeof t?t(this.AC):t,this.Ki.fe(),this}getLabelFillStyle(){return this.AC}setLabelShadow(t){return this.iC=t,this.Ki.fe(),this}getLabelShadow(){return this.iC}setLabelFont(t){return this.vC="function"==typeof t?t(this.vC):t,this.Ki.fe(),this}getLabelFont(){return this.vC}setLabelEffect(t){return this.lC=t,this.Kk.forEach((i=>i.Ks.te.de(t))),this.Ki.fe(),this}getLabelEffect(){return this.lC}setLabelFormatter(t){return this.gC=t,this.Ki.fe(),this}getLabelFormatter(){return this.gC}setSliceHighlightOnHover(t){return this.tC=t,this.Kk.forEach((i=>i.setHighlightOnHover(t))),this}Or(t){super.Or(t),super.Mg(),this.Kk=this.Kk.sort(this.qk);for(let t=0,{length:i}=this.Kk;t<i;t+=1)this.yC(this.Kk[t],t);const i=this.Kk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=Ud.Bg(this._n,this.kg),r=this.ge.reduce(((t,i)=>{const e=i.Sh(s,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,r);const n=e(this.Rv.x.getInnerInterval()-(this.xo.left+this.xo.right),this.Rv.y.getInnerInterval()-(this.xo.bottom+this.xo.top+s)),h=e(n.x-r.left-r.right,n.y-r.top-r.bottom),o=e(this.xo.left+(n.x+r.left-r.right)/2,this.xo.bottom+(n.y+r.bottom-r.top)/2);let a=0;for(let t=0;t<i.length;t+=1)a+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.ph.Eh(this.gC(s,l[t])).Sh()}l.push(a),this.MS.Or(!1,this.Kk,((t,s,e)=>{const r=l[i.indexOf(t)]||0,n=this.Ki.El(s);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.Ki.ji,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.Ki.ji},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}})),this.ge.forEach((t=>t.Or(s,this.xo))),this.pC(i,l,o,h,r)}yC(t,i){t.setStyle(this.qf?new uo({color:this.qf.getColors(t.getAnimatedValue(),void 0)}):this.dC(i,t),this.fC,this.AC,this.vC,this.iC)}aC(){this.Kk=this.Kk.sort(this.qk),this.Ki.fe()}tg(){return this.Kk}dispose(){return this.Kk.slice().forEach((t=>t.dispose())),this.MS.It(),this.uC.It(),this.cC.It(),super.dispose()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const xg=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Mg=(i,s,e)=>{const r=i.Gu();if(0===r.length)return{x:0,y:0};let n;const h=(r[1].y-r[0].y)/2+r[0].y;return n=s===t.PyramidLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-e:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+e,{x:n,y:h}},wg=t=>{const i=t.Gu();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class _g extends bg{constructor(){super(...arguments),this.gC=sg.NamePlusValue,this.mC=0,this.SC=10,this.bC=30,this.xC=10,this.MC=t.PyramidLabelSide.Left,this.DC=t.SliceLabelIndices.LabelsOnSides,this.wC=[],this._C=this.rs.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this._C=t;for(let t=0;t<this.wC.length;t+=1)this.wC[t].Hr(this._C);return this.Ki.fe(),this}getLabelConnectorStyle(){return this._C}setLabelConnectorGapBeforeLabel(t){return this.SC=t,this.Ki.fe(),this}getLabelConnectorGapBeforeLabel(){return this.SC}setLabelConnectorGapBeforeSlice(t){return this.mC=t,this.Ki.fe(),this}getLabelConnectorGapBeforeSlice(){return this.mC}setLabelConnectorLengthAfterSlice(t){return this.bC=t,this.Ki.fe(),this}getLabelConnectorLengthAfterSlice(){return this.bC}setLabelConnectorMinLengthBeforeSlice(t){return this.xC=t,this.Ki.fe(),this}getLabelConnectorMinLengthBeforeSlice(){return this.xC}setLabelSide(t){return this.MC=t,this.Ki.fe(),this}getLabelSide(){return this.MC}pC(i,s,e,r,n){let h=0,o=0;for(let t=0;t<i.length;t+=1){const s=i[t].ph.td();h=Math.max(h,s.x),o+=s.y}const a=.4*r.x,l=r.x-a-(this.mC+this.bC+this.xC+this.SC);let u=!0;l<50?u=!1:h>l&&(i.forEach((t=>{const i=t.ph.zh(),s=t.ph.td().x/i.length,e=Math.floor(l/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.ph.Eh(s).Sh()}})),o=0,h=i.reduce(((t,i)=>{const s=i.ph.td();return o+=s.y,Math.max(t,s.x)}),0));const c=this.MC===t.PyramidLabelSide.Left?this.xo.left+n.left:this.xo.left+r.x,d=this.MC===t.PyramidLabelSide.Left?-1:1,f=r.y-o;f<0&&(u=!1);const v=u?h+this.SC+this.xC+this.bC+this.mC:0,A=r.x-v,g=this.MC===t.PyramidLabelSide.Left?this.xo.left+v:this.xo.left,y=this.MC===t.PyramidLabelSide.Left?g+A:this.xo.left+A,p=(g+y)/2;Sg(i,.001,this.eC,{x:A,y:r.y},this.xo,this.rC,this.nC,p,n);const m=i.filter((t=>u&&0!==t.Nb.Gu().length?(t.ph.setVisible(!0),!0):(t.ph.setVisible(!1),!1))),S=f/(m.length+1);let b=this.xo.bottom+r.y-(this.nC==t.PyramidSliceModes.VariableHeight?S:0)+n.bottom;this.nC==t.PyramidSliceModes.VariableWidth&&(b-=o/i.length/2);const x=p,M=this.MC===t.PyramidLabelSide.Left?g:y,w=this.xo.bottom+r.y+n.bottom,_=this.xo.bottom+n.bottom;for(let t=0;t<this.wC.length;t+=1)this.wC[t].setVisible(!1);for(let i=0;i<m.length;i+=1){const s=m[i],e=s.Nb,r=s.ph,n=r.td(),h=Mg(e,this.MC,this.mC);if(this.nC==t.PyramidSliceModes.VariableHeight){s.ph.zr({x:c,y:b}).Cu({x:d,y:1});const i=b-.5*n.y,e={x:this.MC===t.PyramidLabelSide.Left?Math.min(Vo(x,M,(i-w)/(_-w))-this.bC,h.x):Math.max(Vo(x,M,(i-w)/(_-w))+this.bC,h.x),y:i},o={x:this.MC===t.PyramidLabelSide.Left?r.yu().x+n.x+this.SC:r.yu().x-n.x-this.SC,y:i};this.kC([h,e,o]),b-=n.y+S}else{const i=this.MC===t.PyramidLabelSide.Left?c+n.x+this.SC:c-n.x-this.SC;s.ph.zr({x:c,y:h.y}).Cu({x:d,y:0}),this.kC([h,{x:i,y:h.y}])}}}getMinimumSize(){return e(500,300)}kC(t){let i;for(let t=0;t<this.wC.length;t+=1)if(!this.wC[t].getVisible()){i=this.wC[t].setVisible(!0);break}void 0===i&&(i=this.cC._y(this.Rv,void 0,[Wd.InternalUI]).Hr(this._C),this.wC.push(i)),i.ws().tc(t)}}class kg extends bg{constructor(){super(...arguments),this.gC=sg.Name,this.DC=t.SliceLabelIndices.LabelsInsideSlices}pC(t,i,s,e,r){const n=this.xo.left+e.x/2;Sg(t,.001,this.eC,e,this.xo,this.rC,this.nC,n,r);for(let i=0;i<t.length;i+=1){const s=t[i].Nb,e=t[i].ph,r=wg(s);r&&e.zr(r).xu(0)._u(0)}}getMinimumSize(){return e(200,200)}}const Cg={LabelsOnSides:_g,LabelsInsideSlices:kg};var Tg,Fg;t.PyramidLabelSide=void 0,(Tg=t.PyramidLabelSide||(t.PyramidLabelSide={}))[Tg.Right=0]="Right",Tg[Tg.Left=1]="Left",t.SpiderWebMode=void 0,(Fg=t.SpiderWebMode||(t.SpiderWebMode={}))[Fg.Normal=0]="Normal",Fg[Fg.Circle=1]="Circle";class Ig{constructor(t,i,s,e,r,n,h,o,a){this.yn=!1,this.EC=vl.fitting({start:!1}),this.RC=t=>this.axisScale.Ii(t,Jh.Numeric),this.formatValue=t=>this.RC(t,{start:this.axisScale.Lt,end:this.axisScale.Pt}),this.OC=t,this.oo=i,this.scale=s,this.chart=e,this.tag=r,this.axisScale=Xe.d1({scale1DConstructor:Ue,dimension:"x"}).Rt(0,1),this.zC=n,this.EC=o,a&&(this.RC=a),h&&this.setInterval(h),this.VC=this.OC.Wr(this.scale).setPointerEvents(!1),this.NC=this.oo.no(this.scale).Eh(this.tag).setPointerEvents(!1),this.GC=this.OC._y(this.scale,void 0,[Wd.InternalUI]).Hr(this.chart.getNibStyle()),this.zC.he([this.NC])}pC(i,s,r,n,h,o,a){const l=s.length,u=s[r>0?r-1:l-1],c=s[r],d=s[r<l-1?r+1:0],f=this.chart.getNibLength();this.VC.Zr(i).Xr(c).Hr(this.chart.getAxisStyle()),this.GC.ws().tc(o===t.SpiderWebMode.Normal?[yh(c,u,jr(.5*f/Fh(Ph(u,c)),0,1)),c,yh(c,d,jr(.5*f/Fh(Ph(d,c)),0,1))]:((t,i,s,r,n=2)=>{const h=r/s,o=[];for(let a=-r/2;a<=r/2;a+=n){const n=h*(a/r)+i,l=e(t.x+Math.cos(n)*s,t.y+Math.sin(n)*s);o.push(l)}return o})(i,n,h,f)),a?this.NC.setVisible(!0).zr(Lh(c,e(a.paddingX,a.paddingY))).xu(a.alignmentX)._u(a.alignmentY):this.NC.setVisible(!1)}Zh(t){if(this.EC&&!this.yn){const i=this.EC.apply({axis:this,curStart:this.axisScale.getInnerStart(),curEnd:this.axisScale.getInnerEnd(),seriesDataRange:t});i&&this.axisScale.Rt(i.start,i.end)}}getLabelSize(){return this.NC.ih(this.chart.getAxisLabelFont()).Er(this.chart.getAxisLabelStyle()).Sh().li()}dispose(){this.VC&&this.VC.dispose(),this.NC&&this.NC.dispose(),this.GC&&this.GC.dispose()}getTag(){return this.tag}setInterval(t){const{start:i,end:s,stopAxisAfter:e}=t;return void 0!==e&&(this.yn=e),this.axisScale.Rt(null!=i?i:this.axisScale.getInnerStart(),null!=s?s:this.axisScale.getInnerEnd()),this.chart.Ki.fe(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.RC=t,this.chart.Ki.fe(),this}setScrollStrategy(t){return this.EC=Cl(t),this.chart.Ki.fe(),this}getScrollStrategy(){return this.EC}}const Lg=(t,i,s,e,r,n)=>(t.alignmentX=(r+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=r%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(r)*n,t.paddingY=Math.sin(r)*n,t),Pg=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let i=!1;const s=t.chart.getAxes();if(s.length>1){const t=s[0].getInterval();i=s.some((i=>{const s=i.getInterval();return s.start!==t.start||s.end!==t.end}))}return i?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};class Bg extends mv{constructor(i,s,e,r,n,h,o,a,l,u,c,d){super(i,l,u,d),this.At="Spider Series",this.$C=new Map,this.UC=new Map,this.Ws=t.HighlightModes.onHover,this.pk=8,this.ru=0,this.jC=(()=>{const t=mr((()=>{}));let i;return(s,e,r,n)=>{const h=null==n?void 0:n.onStart,o=null==n?void 0:n.onCompleted,a=(null==n?void 0:n.easing)||yr.ease,l=(null==n?void 0:n.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,r(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,r(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{r(t)})),i=u;u.addEventListener("end",(()=>{i=void 0})),h&&u.addEventListener("start",h),o&&u.addEventListener("end",o)}})(),this.YC={},this.HC={},this.FC=this.getVisible(),this.WC=1,this.XC=((t,i)=>{const s=mr((()=>{}));let e,r,n=1;return(h,o,a)=>{if(h===r)return;r=h;const l=(null==a?void 0:a.easing)||yr.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===h?o&&n&&(e=s(u,l)([[n,0]],(([i])=>{n=i,t(n)})),e.addEventListener("end",(()=>{e=void 0,i(!1)})),n=0,i(!1)):o?(i(!0),e=s(u,l)([[n,1]],(([i])=>{n=i,t(n)})),e.addEventListener("end",(()=>{e=void 0}))):(n=1,i(!0))}})((t=>{this.WC=t,this.ke.Ki.fe()}),(t=>{super.setVisible(t)})),this.ZC=!1,this._t=new Ar,this.chart=i,this.ke=s,this.mk=r,this.JC=n,this.gS=h,this.QC=o,this.KC=a,this.scale=e,this.qC=Bn(u.spiderSeriesFillStyle,c),this.tT=Bn(u.spiderSeriesStrokeStyle,c),this.iT=Bn(u.spiderSeriesPointFillStyle,c)}sT(){return this.ZC}Es(t,i,s){const e=this.KC(i);if(void 0!==e&&this.$C.has(e.tag)){const t=this.$C.get(e.tag),i=this.QC(e.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:e.tag,value:t}}}qg(){return this.Og&&this.$C.size>0&&this.getVisible()}addPoints(...t){const i=0===this.$C.size;i||this.chart.Ki.ul(jl.Aa),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.JC(s)}if(this.chart.getAnimationsEnabled()&&void 0!==this.YC){let s;t.forEach((t=>this.UC.set(t.axis,t.value))),this.jC(0,1,(t=>{this.UC.forEach(((i,e)=>{const r=(null==s?void 0:s.get(e))||0;this.$C.set(e,r+t*(i-r)),this.ke.Ki.fe()}))}),{easing:this.YC.easing,durationMs:this.YC.durationMs,onStart:()=>{this.ZC=i,s=new Map(this.$C)},onCompleted:()=>{this.ZC=!1}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.$C.set(s,t[i].value),this.UC.set(s,t[i].value)}return this.ke.fe(),this}getValue(t,i=!1){if(this.chart.getAxis(t))return i?this.$C.get(t):this.UC.get(t)}setAnimationAddPoints(t,i){return this.YC=t?{easing:t,durationMs:i}:void 0,this.ke.fe(),this}setVisibleStateChangedAnimation(t,i){return this.HC=t?{easing:t,durationMs:i}:void 0,this.ke.fe(),this}setFillStyle(t){return this.qC="function"==typeof t?t(this.qC):t,this.Nb&&(this.Nb.Er(this.qC),this.ke.fe()),this}getFillStyle(){return this.qC}setStrokeStyle(t){return this.tT="function"==typeof t?t(this.tT):t,this.Nb&&(this.Nb.Dr(this.tT),this.ke.fe()),this}getStrokeStyle(){return this.tT}setPointFillStyle(t){return this.iT="function"==typeof t?t(this.iT):t,this.Sk&&(this.Sk.Af(this.iT),this.ke.fe()),this}getPointFillStyle(){return this.iT}setPointSize(t){return this.pk=t,this.Sk&&this.Sk._f(t),this}getPointSize(){return this.pk}getPointShape(){return this.mk}setPointRotation(t){return this.ru=t,this.Sk&&this.Sk.Sf(t),this.ke.fe(),this}getPointRotation(){return this.ru}Or(){if(super.Or(),!this.Wi){const t=new Array(this.gS.length);for(let i=0;i<this.gS.length;i+=1){const s=this.gS[i].getInterval().start,e=this.$C.get(this.gS[i].tag);t[i]=void 0!==e?this.QC(this.gS[i].tag,s+this.WC*(e-s)):this.QC(this.gS[i].tag,s)}bn(t),t.length>=3&&(this.Nb||(this.Nb=this.ke.od(this.scale,Mu.Simple).Dr(this.tT).Er(this.qC).vs(this.getHighlight()),this.ne(this.Nb)),this.Nb.Nu(t),this.Sk||(this.Sk=this.ke.yf(this.scale).gf(ho).Hr(_r)._f(this.pk).pf(this.mk).Sf(this.ru).Af(this.iT).vs(this.getHighlight()),this.ne(this.Sk)),this.Sk.vf(new Nu({schema:{x:{pattern:null},y:{pattern:null}}}).appendJSON(t),{x:"x",y:"y"}))}}Vr(){return{fill:this.qC,stroke:this.tT}}we(){return this.Ae||this.mk}Nr(t,i){return t.vs(i),this.ke.fe(),this}setVisible(t){var i,s;return this.FC=t,this.XC(t,this.chart.getAnimationsEnabled()&&void 0!==this.HC,{easing:null===(i=this.HC)||void 0===i?void 0:i.easing,durationMs:null===(s=this.HC)||void 0===s?void 0:s.durationMs}),this}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Dg=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Eg=t=>t.NC.Qc(),Rg=t=>t.Qc(),Og=(i,s,e,r)=>i.Rc(0).zr(e).Pc(90).Xr(-270).Oc(s===t.SpiderWebMode.Circle?void 0:r.length),zg={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Vg={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Ng=()=>{Vg.alignmentX=0,Vg.alignmentY=0,Vg.paddingX=0,Vg.paddingY=0};class Gg extends cf{constructor(i,s,e,r,n,h,o){var a;super(i,s,e,s._g("spiderChart bg",0),r,s.Ki.rs.spiderChartBackgroundFillStyle,s.Ki.rs.spiderChartBackgroundStrokeStyle,s.Ki.rs.spiderChartTitleFont,s.Ki.rs.spiderChartTitleFillStyle,s.Ki.rs.spiderChartTitleShadow,o,null===(a=null==h?void 0:h.legend)||void 0===a?void 0:a.customLegend),this.gS=[],this.eT=[],this.rT=[],this.EC=vl.fitting({start:!1}),this.nT=!0,this.hT=Pg,this.oT=Lg,this.aT=t.SpiderWebMode.Normal,this.lT=4,this.uT=this.rs.spiderChartWebStyle,this.cT=this.rs.spiderChartScaleLabelFillStyle,this.dT=this.rs.spiderChartScaleLabelShadow,this.fT=this.rs.spiderChartScaleLabelFont,this.vT=5,this.AT=this.rs.spiderChartAxisLabelFillStyle,this.gT=this.rs.spiderChartAxisLabelFont,this.yT=5,this.pT=this.rs.spiderChartAxisStrokeStyle,this.mT=this.rs.spiderChartAxisNibStrokeStyle,this.ST=10,this.bT=c(),this.hasAxis=t=>this.gS.reduce(((i,s)=>i||s.tag===t),!1),this.xT=()=>{const t=this.gS.map(Eg).concat(this.rT.map(Rg));return uh(t)},this.MT=()=>this.wT.ef(this.Rv).setPointerEvents(!1),this._T=t=>t.dispose(),this.kT=()=>this.wv.no(this.Rv).setPointerEvents(!1),this.CT=t=>t.dispose(),this.TT=t=>{this.nT&&!this.hasAxis(t)&&this.addAxis(t)},this.QC=(t,i)=>{for(const s of this.gS)if(s.tag===t){const t=Math.max(Math.min((i-s.axisScale.getInnerStart())/(s.axisScale.getInnerEnd()-s.axisScale.getInnerStart()),1),0);return yh(s.VC.Ci(),s.VC.ki(),t)}},this.KC=t=>{if(0===this.gS.length)return;const i=Ph(this.translateCoordinate(t,this.coordsRelative),this.gS[0].VC.Ci()),s=Math.atan2(i.y,i.x);let e,r=sh;for(const t of this.gS){const i=Ph(t.VC.ki(),t.VC.Ci()),n=Math.atan2(i.y,i.x),h=Math.abs(s-n);h<r&&(e=t,r=h)}return e},this._t=new Ar,this.Ki.ul(jl.na),this.N_=s.vS("spiderChart series bg",0),this.wT=s.AS("spiderChart web shapes",0),this.FT=s.AS("spiderChart axis bg",1),this.WS=s.AS("spiderChart plotting",2),this.wv=s.AS("spiderChart fg",3),this.zC=this.Ks.Gv().de(this.rs.effectsText),this._n.Eh("Spider Chart"),this.ip=this.N_.ef(this.Rv).Er(this.rs.spiderChartSeriesBackgroundFillStyle).Dr(_r).Pc(90).Xr(-270).Rc(0),this.sp=this.N_.ef(this.Rv).Er(ho).Dr(this.rs.spiderChartSeriesBackgroundStrokeStyle).Pc(90).Xr(-270).Rc(0),super.tp(this.ip,this.sp);const l=s.xS(),u=Hr(h?h.cursorBuilder:void 0,Gf);this.MS=rp(this,l,u.Wm(l,this.uiScale,this.uiScale,$r,this.rs),this,"show-pointed",$g,(()=>0)),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.wg(n,this.Rv);const d={backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(d)}getSeries(){return this.Jy}getAxes(){return this.gS}getAxis(t){const i=this.gS.find((i=>i.getTag()===t));if(!i)throw new Error(`Axis with tag "${t}" was not found.`);return i}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Gf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}addAxis(t){const i=this.gS.find((i=>i.tag===t));if(i)return i;const s=new Ig(this.FT,this.wv,this.Rv,this,t,this.zC,this.IT,this.EC,this.scaleLabelFormatter);return this.gS.push(s),this.zC.he(this.gS.map((t=>t.NC))),this.Ki.fe(),s}addSeries(i){const s=void 0!==(null==i?void 0:i.pointShape)?i.pointShape:t.PointShape.Circle,e=void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.Jy.length,r=new Bg(this,this.WS,this.Rv,s,this.TT,this.gS,this.QC,this.KC,this.Ky,this.rs,e,this.Ki.Ks);return this.ep(r,i),r}getSeriesCount(){return this.Jy.length}setWebMode(t){return this.aT=t,this.Ki.fe(),this}getWebMode(){return this.aT}setWebCount(t){return this.lT=t,this.Ki.fe(),this}getWebCount(){return this.lT}setWebStyle(t){return this.uT="function"==typeof t?t(this.uT):t,this.Ki.fe(),this}getWebStyle(){return this.uT}setScaleLabelStyle(t){return this.cT="function"==typeof t?t(this.cT):t,this.Ki.fe(),this}getScaleLabelStyle(){return this.cT}setScaleLabelShadow(t){return this.dT=t,this.Ki.fe(),this}getScaleLabelShadow(){return this.dT}setScaleLabelFont(t){return this.fT="function"==typeof t?t(this.fT):t,this.Ki.fe(),this}getScaleLabelFont(){return this.fT}setScaleLabelPadding(t){return this.vT=t,this.Ki.fe(),this}getScaleLabelPadding(){return this.vT}setScaleLabelStrategy(t){return this.hT=t,this.Ki.fe(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.gS.forEach((i=>{i.setScaleLabelFormatter(t)})),this.Ki.fe(),this}setAxisLabelStyle(t){return this.AT="function"==typeof t?t(this.AT):t,this.Ki.fe(),this}getAxisLabelStyle(){return this.AT}setAxisLabelFont(t){return this.gT="function"==typeof t?t(this.gT):t,this.Ki.fe(),this}getAxisLabelFont(){return this.gT}setAxisLabelEffect(t){return this.zC.de(t),this.Ki.fe(),this}getAxisLabelEffect(){return this.zC.ve()}setAxisLabelPadding(t){return this.yT=t,this.Ki.fe(),this}getAxisLabelPadding(){return this.yT}setAxisLabelStrategy(t){return this.oT=t,this.Ki.fe(),this}setAxisStyle(t){return this.pT="function"==typeof t?t(this.pT):t,this.Ki.fe(),this}getAxisStyle(){return this.pT}setNibStyle(t){return this.mT="function"==typeof t?t(this.mT):t,this.Ki.fe(),this}getNibStyle(){return this.mT}setNibLength(t){return this.ST=t,this.Ki.fe(),this}getNibLength(){return this.ST}setAutoAxis(t){return this.nT=t,this}getAutoAxis(){return this.nT}setScrollStrategy(t){return this.EC=Cl(t),this.gS.forEach((i=>i.setScrollStrategy(t))),this.Ki.fe(),this}setAxisInterval(t){return this.IT=t,this.gS.forEach((i=>i.setInterval(t))),this}Or(t){super.Or(t);const i=this.gS.length,s=Ud.Bg(this._n,this.kg),r=this.ge.reduce(((t,i)=>{const e=i.Sh(s,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,r);const n=e(this.Rv.x.getInnerInterval()-(this.xo.left+this.xo.right),this.Rv.y.getInnerInterval()-(this.xo.bottom+this.xo.top+s)),h=e(n.x-r.left-r.right,n.y-r.top-r.bottom),o=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.oT){const t=Math.min(h.x,h.y)/2;for(let s=0;s<i;s+=1){const r=Dg(s,i),n=Math.cos(r),h=Math.sin(r),a=this.gS[s].getLabelSize();Ng();const l=this.oT(Vg,s,i,this.gS[s].tag,r,this.yT),u=e(n*t+l.paddingX,h*t+l.paddingY);n>0?o.right=Math.max(o.right,u.x+.5*(1-l.alignmentX)*a.x-t):o.left=Math.max(o.left,-u.x+.5*(l.alignmentX+1)*a.x-t),h>0?o.top=Math.max(o.top,u.y+.5*(1-l.alignmentY)*a.y-t):o.bottom=Math.max(o.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}this.gS.forEach((t=>{const i=!this.getSeries().some((t=>t.sT()))&&this.getSeriesCount()>1,s=this.LT(t.tag,i);s&&t.Zh(s)}));const a=e(this.Rv.x.getInnerStart()+this.xo.left+r.left+h.x/2,this.Rv.y.getInnerStart()+this.xo.bottom+r.bottom+h.y/2),l=Math.min(h.x/2-(o.left+o.right)/2,h.y/2-(o.bottom+o.top)/2);this.bT=c(this.Zt.left+this.xo.left+o.left,this.Zt.top+this.xo.top+s+o.top,this.Zt.right+this.xo.right+o.right,this.Zt.bottom+this.xo.bottom+o.bottom),this.pC(a,l);for(const t of this.Jy)t.jg();for(const t of this.Jy)t.Or();this.MS.Or(!1,this.Jy,void 0),super.Mg(),this.ge.forEach((t=>t.Or(s,this.xo)));for(const t of this.Jy)t.Yg()}dispose(){return this.N_.It(),this.wT.It(),this.FT.It(),this.WS.It(),this.wv.It(),this.MS.It(),super.dispose()}getMinimumSize(){return e(this.bT.left+this.bT.right+100,this.bT.bottom+this.bT.top+100)}pC(t,i){const s=this.gS.length,r=[];for(let n=0;n<s;n+=1){const h=Dg(n,s),o=e(t.x+Math.cos(h)*i,t.y+Math.sin(h)*i);r.push(o)}Og(this.ip,this.aT,t,r),Og(this.sp,this.aT,t,r),this.ip.Bc(i),this.sp.Bc(i),((t,i,s,e,r,n,h,o)=>{const a=t.length,l=n.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(h());const o=t[l];Og(o,s,e,n);const u=r*((l+1)/i);o.Bc(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.eT,this.lT,this.aT,t,i,r,this.MT,this._T);for(const t of this.eT)t.Er(ho).Dr(this.uT);for(let e=0;e<s;e+=1){const n=this.gS[e],h=Dg(e,s);Ng();const o=void 0!==this.oT?this.oT(Vg,e,s,this.gS[e].tag,h,this.yT):void 0;n.pC(t,r,e,h,i,this.aT,o)}((t,i,s,r,n,h,o,a,l)=>{const u=n.length,c=t.length;let d=0;void 0!==i&&n.forEach(((n,l)=>{var f,v,A,g;const y=n.tag,p=Dg(l,u);for(let m=0;m<s;m+=1){zg.alignmentX=0,zg.alignmentY=0,zg.paddingX=0,zg.paddingY=0;const S=i({...zg,chart:n.chart,axis:n,axisIndex:l,axisCount:u,axisTag:y,axisAngle:p,webIndex:m,webCount:s,labelPadding:r});if(void 0!==S){d>=c&&t.push(a());const i=t[d];d+=1;const r=(s-m)/s,u=n.formatValue(n.axisScale.getInnerStart()+r*(n.axisScale.getInnerEnd()-n.axisScale.getInnerStart())),y=yh(h,o[l],r);i.zr(Lh(y,e(null!==(f=S.paddingX)&&void 0!==f?f:0,null!==(v=S.paddingY)&&void 0!==v?v:0))).xu(null!==(A=S.alignmentX)&&void 0!==A?A:0)._u(null!==(g=S.alignmentY)&&void 0!==g?g:0).Eh(u)}}}));for(let i=d;i<c;i+=1)l(t[i]);t.length=d})(this.rT,this.hT,this.lT,this.vT,this.gS,t,r,this.kT,this.CT);for(const t of this.rT)t.Er(this.cT).ih(this.fT).Dh(this.dT)}LT(t,i){let s,e;const r=this.getAxis(t);for(const t of this.Jy){const n=t.getValue(r.tag,i);void 0!==n&&(s=void 0===s?n:Math.min(s,n),e=void 0===e?n:Math.max(e,n))}if(void 0!==s&&void 0!==e)return a(s,e)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const $g=(t,i,s)=>tp(i,[[{component:i.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[i.axis],[{text:t.getAxis(i.axis).formatValue(i.value),font:{weight:"bold"}}]]),Ug={yn:!1,pn:0,mn:!1,bn:0,Sn:!1,xn:0,Mn:0,Ah:vl.fitting({})},jg=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Yg=(t,i,s,e,r,n,h,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,r];"spark-line"===a&&ty(t,i,u,n,h,o),"spark-bar"===a&&iy({...t,winLoss:!1},i,u,n,h,o),"spark-win-loss"===a&&iy({...t,winLoss:!0},i,u,n,h,o),"spark-area"===a&&sy(t,i,u,n,h,o),"spark-pie"===a&&ey(t,i,u,n,h,o)},Hg=(t,i,s,e)=>({x:Xg(t.x,i.x,s.x,e),y:Zg(t.y,i.y,s.y,e)}),Wg=(t,i,s,e)=>({position:Xg(t.position,i.x,s.x,e),high:Zg(t.high,i.y,s.y,e),low:Zg(t.low,i.y,s.y,e)}),Xg=(t,i,s,e)=>{const r=jr(t,i,i+s);return e[0].x+e[1].x*(r-i)/s},Zg=(t,i,s,e)=>{const r=jr(t,i,i+s);return e[0].y+e[1].y*(r-i)/s},Jg=(t,i,s,e,r,n,h,o)=>{for(const a of t)"point"===a.type&&Qg(a,i,s,r,n,h,o),"axis-band"===a.type&&Kg(a,s,r,n,h,o),"constant-line"===a.type&&qg(a,s,e,r,n,h,o)},Qg=(i,s,e,r,n,h,o)=>{const{value:a,fillStyle:l,shape:u,size:c,rotation:d}=i;let f={x:NaN,y:NaN};if("start"===a&&(f=s[0]),"end"===a&&(f=s[s.length-1]),"min"===a){f=s[0];for(const t of s)f=f.y<t.y?f:t}if("max"===a){f=s[0];for(const t of s)f=f.y>t.y?f:t}("object"!=typeof a||(f=Hg(a,e,r,n),((t,i)=>{const s=i[0],e=i[1],r=t.x,n=t.y;return s.x<=r&&r<=s.x+e.x&&s.y<=n&&n<=s.y+e.y})(f,n)))&&h.pointSet.add().pf(void 0!==u?u:t.PointShape.Circle).Sf(d||0)._f(c||5).Af(l||o.sparkPointChartFillStyle).vf((new Nu).appendSample(f),{x:"x",y:"y"})},Kg=(t,i,s,r,n,h)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=e(eh,sh),f=e(eh,sh);"x"===o&&(d=Hg({x:a,y:eh},i,s,r),f=Hg({x:l,y:sh},i,s,r)),"y"===o&&(d=Hg({x:eh,y:a},i,s,r),f=Hg({x:sh,y:l},i,s,r));const v=r[0],A=r[1],g=jr(d.x,v.x,v.x+A.x),y=jr(d.y,v.y,v.y+A.y),p=jr(f.x,v.x,v.x+A.x),m=jr(f.y,v.y,v.y+A.y);n.rect.add().Pu(g).Bu(y).zt(e(p-g,m-y)).Er(u||h.sparkChartBandFillStyle).Dr(c||h.sparkChartBandStrokeStyle).Dr(_r)},qg=(t,i,s,r,n,h,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,v=i.x,A=s.x,g=[];if("y"===a&&d<=c&&c<=f){const t=Hg(e(v,c),{x:v,y:d},r,n),i=Hg(e(A,c),{x:v,y:d},r,n);g.push([t,i])}if("x"===a&&v<=c&&c<=A){const t=Hg(e(c,d),{x:v,y:d},r,n),i=Hg(e(c,f),{x:v,y:d},r,n);g.push([t,i])}g.length>0&&h.line.add().Hr(u||o.sparkChartConstantLineStrokeStyle).Zr(g[0][0]).Xr(g[0][1])},ty=(t,i,s,e,r,n)=>{const{strokeStyle:h,data:o,markers:a}=t,l=o.length;l>1e4&&r.vl&&Or.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=sh,c=eh,d=sh,f=eh;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const v={x:c-u,y:f-d},A=o.map((t=>Hg(t,{x:u,y:d},v,s)));i.lineSet.add().vs(n).Hr(h||e.sparkLineChartStrokeStyle).ws().tc(A),a&&Jg(a,A,{x:u,y:d},{x:c,y:f},v,s,i,e)},iy=(t,i,s,e,r,n)=>{const{data:h,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,v=t.winLoss,A=l||0,g=f/d*1;let y=sh,p=eh;if(v)y=-1,p=1;else for(const t of h)y=Math.min(y,t),p=Math.max(p,t);const m={x:0,y:v?-1:Math.min(0,y)},S={x:1*h.length+(h.length-1)*g,y:v?2:Math.max(p,1e-5)};h.map(((t,i)=>{const e={x:1*(i+1)+i*g,y:v?t>=A?1:0:t},r=Hg({x:1*i+i*g,y:v?t>=A?0:-1:0},m,S,s),n=Hg(e,m,S,s);return{value:t,position:r,width:n.x-r.x,height:n.y-r.y}})).forEach((t=>{var s;i.rect.add().vs(n).zr(t.position).Eu(t.height).Du(t.width).Er((s=t.value,v?(s>=A?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Dr(a||e.sparkBarChartStrokeStyle)}))},sy=(t,i,s,e,r,h)=>{const{data:o,fillStyle:a,strokeStyle:l,markers:u}=t,c=o.length;c>1e4&&r.vl&&Or.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=sh,f=eh,v=sh,A=eh;for(let t=0;t<c;t+=1){const i=o[t];d=Math.min(d,i.x),f=Math.max(f,i.x),v=Math.min(v,i.y),A=Math.max(A,i.y)}const g={x:f-d,y:A-v},y=[],p=[];for(const t of o){const i=n(t.x,t.y,v);y.push(Wg(i,{x:d,y:v},g,s)),p.push(Hg(t,{x:d,y:v},g,s))}i.junction.add().vs(h).ws().tc(y).Er(a||e.sparkAreaChartFillStyle),i.lineSet.add().vs(h).ws().tc(p).Hr(l||e.sparkAreaChartStrokeStyle),u&&Jg(u,p,{x:d,y:v},{x:f,y:A},g,s,i,e)},ey=(t,i,s,r,n,h)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=Hg(e(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],v=f.x<=f.y?f.x/2:f.y/2;let A=90;l.forEach(((t,s)=>{const e=t/c*360;i.arc.add().vs(h).zr(d).Bc(v).Rc(0).Pc(A).Xr(A+e).Er(u[s]||Bn(r.sparkPieChartFillStyle,s)).Dr(a||r.sparkPieChartStrokeStyle),A+=e}))},ry={XY:vA,Spider:Gf,BarChart:$f,Map:Hf,Polar:Yf,D3:Pf},ny={Column:dc,Row:fc},hy=(i,s)=>{const e=(i=>{const s=me(0,0,0),e=me(255,255,255),r=new uo({color:i.uiStrokeColorContrastHigh}),n=new uo({color:i.uiStrokeColorContrastMedium}),h=new uo({color:i.uiStrokeColorContrastLow}),o=new Te({family:i.fontFamily,weight:"normal",style:"normal"}),a=i.isDark?me(0,0,0,255):void 0,l=o.setSize(18*i.fontScaler),u=o.setSize(16*i.fontScaler),c=o.setSize(14*i.fontScaler),d=o.setSize(10*i.fontScaler),f=o.withMutations((t=>t.set("size",14*i.fontScaler).set("weight","bold"))),v=o.setSize(13*i.fontScaler),A=new oa({thickness:2,fillStyle:h}),g=new uo({color:i.dataHighlightOverlayColor}),y=new oa({thickness:2,fillStyle:i.legendBackgroundBorderFillStyle}),p=i.dataColorPalette.map((t=>new uo({color:t.stroke}))),m=t=>p[t%p.length],S=p.map((t=>new oa({thickness:2,fillStyle:t}))),b=t=>S[t%S.length],x=i.dataColorPalette.map((t=>new uo({color:t.border}))).map((t=>new oa({thickness:2,fillStyle:t}))),M=t=>x[t%x.length],w=i.dataColorPalette.map((t=>{const i=t.area;return new Oe({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),_=t=>w[t%w.length],k=i.dataColorPaletteInverted.map((t=>{const i=t.area;return new Oe({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),C=t=>k[t%k.length],T=i.dataColorPalette.map((t=>{const i=t.area;return new Oe({angle:180,stops:[{color:er(i,me(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:er(i,me(0,0,0,i.getA()),.3),offset:1}]})})),F=t=>T[t%T.length],I=i.dataColorPaletteInverted.map((t=>new uo({color:t.border}))).map((t=>new oa({thickness:2,fillStyle:t}))),L=t=>I[t%I.length],P=new uo({color:i.dataColorPositive}),B=new uo({color:i.dataColorNegative}),D=new oa({thickness:1,fillStyle:new uo({color:i.dataStrokeColorContrastHigh.setA(50)})}),E=new oa({thickness:2,fillStyle:i.axisLineFillStyle}),R=new uo({color:me(0,0,0,1)}),O=new oa({thickness:1,fillStyle:i.axisGridMajorFillStyle}),z=new oa({thickness:1,fillStyle:i.axisTickMajorFillStyle}),V=c,N=i.axisLabelMajorFillStyle,G=new oa({thickness:1,fillStyle:i.axisGridMinorFillStyle}),$=new oa({thickness:1,fillStyle:i.axisTickMinorFillStyle}),U=d,j=N,Y=jc,H=new $c({gridStrokeStyle:O,tickStyle:z,tickLength:7,tickPadding:5,labelFont:V,labelFillStyle:N,labelShadow:a}),W=new $c({gridStrokeStyle:G,tickStyle:$,tickLength:4,tickPadding:10,labelFont:U,labelFillStyle:j,labelShadow:a}),X=new Md({extremeTickStyle:Y,majorTickStyle:H,minorTickStyle:W.setLabelFillStyle(ho)}),Z=new Ad({greatTickStyle:jc,majorTickStyle:H,minorTickStyle:W}),J=Z,Q=Z,K=new id({majorTickStyle:H,minorTickStyle:W}),q=new uo({color:i.dataHighlightOverlayColor}),tt=new oa({thickness:1,fillStyle:n}),it=new oa({thickness:2,fillStyle:n}),st=t=>new na.Triangulated({shape:"sphere",size:10,fillStyle:p[t%p.length]}),et=p[0],rt=i.uiTextFillStyle,nt=i.legendBackgroundFillStyle,ht=new oa({thickness:1,fillStyle:i.legendBackgroundBorderFillStyle}),ot=Tn(i.legendButtonDefaultColor),at=Tn(i.isDark?me(70,70,70,255):me(170,170,170,255)),lt=new uo({color:i.isDark?me(70,70,70,255):me(170,170,170,255)}),ut=new oa({thickness:1,fillStyle:r}),ct=new ca({thickness:1,fillStyle:i.cursorGridFillStyle,pattern:la.DashedEqual,patternScale:3}),dt=new oa({thickness:1,fillStyle:i.cursorGridFillStyle}),ft=i.zoomBandChartDefocusOverlayFillStyle,vt=new oa({thickness:2,fillStyle:new uo({color:i.zoomBandChartSplitterColor})}),At=new uo({color:i.uiBackgroundColor}),gt=new oa({thickness:1,fillStyle:new uo({color:i.isDark?e:s})});let yt={isDark:i.isDark,effect:i.effect,effectsText:i.effectsText,effectsDashboardSplitters:i.effectsDashboardSplitters,lcjsBackgroundFillStyle:i.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:_r,highlightColorOffset:i.highlightColorOffset,highlightColorOffsetAxisOverlay:i.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new oa({thickness:4,fillStyle:i.dashboardSplitterFillStyle}),panelPadding:7,chartXYBackgroundFillStyle:i.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:_r,chartXYTitleFont:l,chartXYTitleFillStyle:i.titleFillStyle,chartXYTitleShadow:a,chartXYTitleMargin:5,chartXYSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:A,chartXYZoomingRectangleFillStyle:g,chartXYZoomingRectangleStrokeStyle:y,lineSeriesStrokeStyle:b,pointLineSeriesStrokeStyle:b,pointLineSeriesFillStyle:m,pointSeriesFillStyle:m,pointSeriesStrokeStyle:gt,ellipseSeriesFillStyle:m,ellipseSeriesStrokeStyle:b,polygonSeriesFillStyle:m,polygonSeriesStrokeStyle:b,rectangleSeriesFillStyle:m,rectangleSeriesStrokeStyle:_r,segmentSeriesStrokeStyle:b,boxSeriesBodyFillStyle:m(0),boxSeriesBodyStrokeStyle:_r,boxSeriesStrokeStyle:new oa({thickness:1,fillStyle:p[0]}),boxSeriesMedianStrokeStyle:new oa({thickness:1,fillStyle:new uo({color:s})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:P,ohlcCandleBodyFillStyleNegative:B,ohlcCandleTailStrokeStylePositive:new oa({thickness:1,fillStyle:new uo({color:i.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new oa({thickness:1,fillStyle:new uo({color:i.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new oa({thickness:2,fillStyle:P}),ohlcBarStrokeStyleNegative:new oa({thickness:2,fillStyle:B}),heatmapGridSeriesFillStyle:m,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:m,heatmapScrollingGridSeriesWireframeStyle:D,heatmapGridSeriesContourStrokeStyle:new oa({thickness:1,fillStyle:new uo({color:me(0,0,0)})}),heatmapGridSeriesContourLabelColor:co(rt)?rt.getColor():et.getColor(),heatmapGridSeriesContourLabelFont:v,heatmapGridSeriesContourLabelShadow:a,areaRangeSeriesFillStyle:_,areaRangeSeriesStrokeStyle:M,areaRangeSeriesFillStyleInverted:C,areaRangeSeriesStrokeStyleInverted:L,areaSeriesBipolarHighFillStyle:_,areaSeriesBipolarHighStrokeStyle:M,areaSeriesBipolarLowFillStyle:C,areaSeriesBipolarLowStrokeStyle:L,areaSeriesPositiveFillStyle:_,areaSeriesPositiveStrokeStyle:M,areaSeriesNegativeFillStyle:C,areaSeriesNegativeStrokeStyle:L,xAxisTitleFont:u,xAxisTitleFillStyle:i.axisTitleFillStyle,xAxisStrokeStyle:E,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:g,xAxisZoomingBandStrokeStyle:_r,xAxisNumericTicks:X,xAxisDateTimeTicks:J,xAxisTimeTicks:K,yAxisTitleFont:u,yAxisTitleFillStyle:i.axisTitleFillStyle,yAxisStrokeStyle:E,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:g,yAxisZoomingBandStrokeStyle:_r,yAxisNumericTicks:X,yAxisDateTimeTicks:Q,yAxisTimeTicks:K,bandFillStyle:q,bandStrokeStyle:tt,constantLineStrokeStyle:it,barChartBackgroundFillStyle:i.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:_r,barChartTitleFont:l,barChartTitleFillStyle:i.titleFillStyle,barChartTitleShadow:a,barChartSeriesBackgroundFillStyle:ho,barChartSeriesBackgroundStrokeStyle:_r,barChartBarFillStyle:m,barChartBarStrokeStyle:new oa({thickness:1,fillStyle:h}),barChartValueAxisTitleFont:u,barChartValueAxisTitleFillStyle:i.axisTitleFillStyle,barChartValueAxisStrokeStyle:E,barChartValueAxisTicks:X.setMajorTickStyle((t=>t.setGridStrokeStyle(_r))).setMinorTickStyle((t=>t.setGridStrokeStyle(_r))),barChartCategoryAxisTitleFont:u,barChartCategoryAxisTitleFillStyle:i.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:E,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,tickStyle:X.majorTickStyle.tickStyle,tickLength:0,labelShadow:a},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:a},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:X.majorTickStyle.labelFillStyle,labelFont:X.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:a},barChartCornerRadius:10,chart3DBackgroundFillStyle:i.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:_r,chart3DTitleFont:l,chart3DTitleFillStyle:i.titleFillStyle,chart3DTitleShadow:a,chart3DSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:A,chart3DBoundingBoxStrokeStyle:_r,xAxis3DTitleFont:u,xAxis3DTitleFillStyle:i.axisTitleFillStyle,xAxis3DStrokeStyle:E,xAxis3DNumericTicks:X,xAxis3DDateTimeTicks:Z,xAxis3DTimeTicks:K,yAxis3DTitleFont:u,yAxis3DTitleFillStyle:i.axisTitleFillStyle,yAxis3DStrokeStyle:E,yAxis3DNumericTicks:X,yAxis3DDateTimeTicks:Z,yAxis3DTimeTicks:K,zAxis3DTitleFont:u,zAxis3DTitleFillStyle:i.axisTitleFillStyle,zAxis3DStrokeStyle:E,zAxis3DNumericTicks:X,zAxis3DDateTimeTicks:Z,zAxis3DTimeTicks:K,lineSeries3DStrokeStyle:b,pointLineSeries3DStrokeStyle:b,pointLineSeries3DPointStyle:st,pointSeries3DPointStyle:st,pointCloudSeries3DPointStyle:t=>new na.Pixelated({size:5,fillStyle:p[t%p.length]}),surfaceGridSeries3DFillStyle:m,surfaceGridSeries3DWireframeStyle:D,surfaceGridSeriesContourStrokeStyle:S[0],surfaceScrollingGridSeries3DFillStyle:m,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:m,meshModel3DFillStyle:m(0),polarChartBackgroundFillStyle:i.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:_r,polarChartTitleFont:l,polarChartTitleFillStyle:i.titleFillStyle,polarChartTitleShadow:a,polarChartSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:A,polarSectorFillStyle:q,polarSectorStrokeStyle:tt,polarAmplitudeAxisTitleFont:u,polarAmplitudeAxisTitleFillStyle:i.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:a,polarAmplitudeAxisStrokeStyle:E,polarAmplitudeAxisNumericTicks:X,polarAmplitudeAxisDateTimeTicks:Z,polarAmplitudeAxisTimeTicks:K,polarRadialAxisTitleFont:u,polarRadialAxisTitleFillStyle:i.axisTitleFillStyle,polarRadialAxisStrokeStyle:E,polarRadialAxisTickStyle:H.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:b,polarPointLineSeriesFillStyle:m,polarPointLineSeriesStrokeStyle:b,polarPointSeriesFillStyle:m,polarPointSeriesStrokeStyle:gt,polarPolygonSeriesFillStyle:F,polarPolygonSeriesStrokeStyle:M,polarAreaSeriesFillStyle:F,polarAreaSeriesStrokeStyle:M,polarHeatmapSeriesFillStyle:m,mapChartBackgroundFillStyle:i.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:_r,mapChartTitleFont:l,mapChartTitleFillStyle:i.titleFillStyle,mapChartTitleShadow:a,mapChartFillStyle:et,mapChartStrokeStyle:new oa({thickness:1,fillStyle:new uo({color:i.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:ho,mapChartOutlierRegionStrokeStyle:new oa({thickness:1,fillStyle:h}),mapChartSeparateRegionFillStyle:nt,mapChartSeparateRegionStrokeStyle:ht,dataGridBackgroundFillStyle:i.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:_r,dataGridTitleFont:l,dataGridTitleFillStyle:i.titleFillStyle,dataGridTitleShadow:a,dataGridTextFont:c,dataGridTextFillStyle:et,dataGridCellBackgroundFillStyle:new uo({color:i.uiBackgroundColor}),dataGridBorderStrokeStyle:new oa({thickness:.4,fillStyle:new uo({color:i.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:_r,dataGridScrollBarFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ht,dataGridScrollBarButtonFillStyle:i.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ht,dataGridScrollBarButtonArrowFillStyle:new uo({color:i.legendButtonDefaultColor}),dataGridScrollBarThickness:20,dataGridCellPadding:5,sparkLineChartStrokeStyle:b(0),sparkPointChartFillStyle:m(0),sparkBarChartFillStyle:m(0),sparkBarChartStrokeStyle:M(0),sparkAreaChartFillStyle:_(0),sparkAreaChartStrokeStyle:M(0),sparkPieChartFillStyle:m,sparkPieChartStrokeStyle:ht,sparkChartBandFillStyle:q,sparkChartBandStrokeStyle:tt,sparkChartConstantLineStrokeStyle:it,dataGridTextShadow:a,textSeriesShadow:a,spiderChartBackgroundFillStyle:i.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:_r,spiderChartTitleFont:l,spiderChartTitleFillStyle:i.titleFillStyle,spiderChartTitleShadow:a,spiderChartSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:A,spiderChartWebStyle:new oa({thickness:2,fillStyle:h}),spiderChartScaleLabelFillStyle:i.axisLabelMajorFillStyle,spiderChartScaleLabelFont:c,spiderChartAxisLabelFillStyle:i.axisTitleFillStyle,spiderChartAxisLabelFont:u,spiderChartAxisStrokeStyle:new oa({thickness:2,fillStyle:n}),spiderChartAxisNibStrokeStyle:new oa({thickness:2,fillStyle:r}),spiderSeriesFillStyle:F,spiderSeriesStrokeStyle:M,spiderSeriesPointFillStyle:m,spiderChartScaleLabelShadow:a,pieChartBackgroundFillStyle:i.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:_r,pieChartTitleFont:l,pieChartTitleFillStyle:i.titleFillStyle,pieChartTitleShadow:a,pieChartSliceFillStylePalette:m,pieChartSliceStrokeStyle:ht,pieChartSliceLabelFont:v,pieChartSliceLabelFillStyle:i.uiTextFillStyle,pieChartConnectorStrokeStyle:ut,pieChartSliceLabelShadow:a,funnelChartBackgroundFillStyle:i.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:_r,funnelChartTitleFont:l,funnelChartTitleFillStyle:i.titleFillStyle,funnelChartTitleShadow:a,funnelChartSliceFillStylePalette:m,funnelChartSliceStrokeStyle:ht,funnelChartSliceLabelFont:v,funnelChartSliceLabelFillStyle:i.uiTextFillStyle,funnelChartConnectorStrokeStyle:ut,funnelChartSliceLabelShadow:a,pyramidChartBackgroundFillStyle:i.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:_r,pyramidChartTitleFont:l,pyramidChartTitleFillStyle:i.titleFillStyle,pyramidChartTitleShadow:a,pyramidChartSliceFillStylePalette:m,pyramidChartSliceStrokeStyle:ht,pyramidChartSliceLabelFont:v,pyramidChartSliceLabelFillStyle:i.uiTextFillStyle,pyramidChartConnectorStrokeStyle:ut,gaugeChartValueLabelFont:v.setSize(60),gaugeChartUnitLabelFont:v.setSize(40),gaugeChartTickFont:v.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:i.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:_r,gaugeChartUnitLabelFillStyle:i.uiTextFillStyle,gaugeChartValueLabelFillStyle:i.uiTextFillStyle,gaugeChartBarColor:e,gaugeChartGlowColor:me(255,255,64),gaugeChartNeedleFillStyle:new uo({color:e}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new oa({thickness:2,fillStyle:new uo({color:s})}),pyramidChartSliceLabelShadow:a,gaugeChartBackgroundFillStyle:i.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:_r,gaugeChartTitleFont:l,gaugeChartTitleFillStyle:i.titleFillStyle,gaugeChartTitleShadow:a,treeMapChartBackgroundFillStyle:i.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:_r,treeMapChartParentColor:i.treeMapChartParentColor,treeMapChartNodeColors:i.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new oa({thickness:1,fillStyle:new uo({color:Se("000")})}),treeMapChartTitleFillStyle:i.titleFillStyle,treeMapChartTitleShadow:a,treeMapChartTitleFont:l,treeMapChartPathLabelFillStyle:rt,treeMapChartPathLabelFont:v,treeMapChartLabelHeaderFillStyle:i.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:l,treeMapChartLabelFillStyle:i.treeMapChartLabelFillStyle,treeMapChartLabelFont:v,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:i.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:_r,zoomBandChartDefocusOverlayFillStyle:ft,zoomBandChartSplitterStrokeStyle:vt,zoomBandChartKnobFillStyle:i.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:i.zoomBandChartKnobSize,onScreenMenuBackgroundColor:me(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:i.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:_r,parallelCoordinateChartTitleFont:l,parallelCoordinateChartTitleFillStyle:i.titleFillStyle,parallelCoordinateChartTitleShadow:a,parallelCoordinateChartSeriesBackgroundFillStyle:i.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:A,parallelCoordinateChartSeriesColor:t=>i.dataColorPalette[t%i.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:i.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:S[0],parallelCoordinateAxisTitleFont:u,parallelCoordinateAxisTitleFillStyle:i.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:X,parallelCoordinateAxisDateTimeTicks:Z,parallelCoordinateAxisTimeTicks:K,parallelCoordinateAxisStrokeStyle:E,parallelCoordinateAxisRangeSelectorFillStyle:i.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:ht,parallelCoordinateAxisBackgroundFillStyle:new Oe({angle:90,stops:[{offset:0,color:i.isDark?me(0,0,0,0):me(255,255,255,0)},{offset:1,color:i.isDark?me(0,0,0,255):me(255,255,255,180)}]}),uiButtonFillStyle:ot,uiButtonFillStyleHidden:at,uiButtonStrokeStyle:i.isDark?_r:new oa({thickness:1,fillStyle:new uo({color:s})}),uiButtonSize:10,uiBackgroundFillStyle:nt,uiBackgroundStrokeStyle:ht,uiTextFillStyle:rt,uiTextFillStyleHidden:lt,uiTextFont:v,uiTextPadding:5,legendTitleFillStyle:rt,legendTitleFont:f,legendBorderRadius:5,legendPadding:5,legendLUTLabelMargin:7,legendLUTUnitLabelMargin:7,legendLUTCornerRadius:5,legendLUTLengthHorizontal:160,legendLUTThicknessHorizontal:15,legendLUTLengthVertical:140,legendLUTThicknessVertical:25,cursorTickMarkerXBackgroundFillStyle:nt,cursorTickMarkerXBackgroundStrokeStyle:ht,cursorTickMarkerXTextFillStyle:rt,cursorTickMarkerXTextFont:v,cursorTickMarkerYBackgroundFillStyle:nt,cursorTickMarkerYBackgroundStrokeStyle:ht,cursorTickMarkerYTextFillStyle:rt,cursorTickMarkerYTextFont:v,cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:t.PointShape.Circle,cursorPointMarkerFillStyle:ct.getFillStyle(),cursorPointMarkerStrokeStyle:_r,cursorDynamicBehavior:{pointMarkerFill:t=>new uo({color:er(t,i.isDark?s:e,.2,230)}),pointMarkerStroke:t=>new oa({thickness:2,fillStyle:new uo({color:er(t,i.isDark?e:s,i.isDark?.8:.6,204)})}),pointMarkerSize:t=>({x:t+3,y:t+3})},cursorResultTableFillStyle:i.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new oa({thickness:1,fillStyle:i.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:rt,cursorResultTableTextFont:v,cursorResultTableHeaderBackgroundFillStyle:i.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:ct,cursorGridStrokeStyleY:ct,cursor3DGridStrokeStyleX:dt,cursor3DGridStrokeStyleY:dt,cursor3DGridStrokeStyleZ:dt,cursor3DTickStrokeStyleX:H.tickStyle,cursor3DTickStrokeStyleY:H.tickStyle,cursor3DTickStrokeStyleZ:H.tickStyle,cursor3DTickLabelFillStyleX:rt,cursor3DTickLabelFillStyleY:rt,cursor3DTickLabelFillStyleZ:rt,cursor3DTickLabelFontX:v,cursor3DTickLabelFontY:v,cursor3DTickLabelFontZ:v,cursor3DTickLabelBackgroundFillStyleX:At,cursor3DTickLabelBackgroundFillStyleY:At,cursor3DTickLabelBackgroundFillStyleZ:At,cursor3DTickLabelBackgroundStrokeStyleX:ht,cursor3DTickLabelBackgroundStrokeStyleY:ht,cursor3DTickLabelBackgroundStrokeStyleZ:ht,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return i.overrideThemeProperties&&(yt={...yt,...i.overrideThemeProperties}),yt})(i),r={...s,header1Font:e.xAxisTitleFont,header2Font:e.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:e.uiTextFont,mainDataColor:i.dataColorPalette[0].stroke};return{...e,examples:r}},oy="Segoe UI, -apple-system, Verdana, Helvetica",ay=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},ly=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:er(i[e%i.length].stroke,me(255,255,255),.5);return new De({stops:[{color:er(r,me(255,255,255),.5*s).setA(100),offset:0},{color:r.setA(100),offset:.5},{color:er(r,me(30,30,30),.5*s).setA(100),offset:1}]})},uy=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:er(i[e%i.length].stroke,me(255,255,255),.2);return new De({stops:[{color:er(r,me(255,255,255),.2*s),offset:0},{color:r,offset:.5},{color:er(r,me(0,0,0),.2*s),offset:1}]})},cy=(t,i,s)=>e=>{const r=!0===t?i[e%i.length].stroke:er(i[e%i.length].stroke,me(255,255,255),.2);return new Oe({angle:90,stops:[{color:er(r,me(255,255,255),.5*s),offset:0},{color:r,offset:.35},{color:er(r,me(30,30,30),.5*s),offset:1}]})},dy=(t,i,s)=>(()=>{const s=new Map;return e=>{const r=s.get(e);if(r)return r;const n=(s=>{const e=!0===t?i[s%i.length].stroke:er(i[s%i.length].stroke,me(255,255,255),.3);return new Oe({angle:90,stops:[{color:er(e,me(255,255,255),.5),offset:0},{color:e,offset:.35},{color:er(e,me(30,30,30),.5),offset:1}]})})(e);return s.set(e,n),n}})(),fy=Gn((()=>{const i=me(255,255,255),s=new uo({color:i}),e=!0,r=new ya({spread:1,blur:9,offset:{x:0,y:0},color:me(0,0,0,150)}),n=new De({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(50,51,52)},{offset:.5,color:me(14,15,16)},{offset:1,color:me(0,0,0)}]}),h=new uo({color:me(45,45,45)}),o=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(120,120,120,100)},{offset:1,color:me(0,0,0,50)}]}),a=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(30,30,30,200)},{offset:1,color:me(0,0,0,255)}]}),l=oy,u=new uo({color:me(255,255,220)}),c=new uo({color:me(255,255,166)}),d=new uo({color:me(255,255,220)}),f=new uo({color:me(255,255,200)}),v=f,A=v,g=new Oe({angle:45,stops:[{offset:0,color:me(230,230,230)},{offset:1,color:me(150,150,150)}]}),y=new uo({color:me(220,220,220)}),p=new uo({color:me(200,200,200,50)}),m=new uo({color:me(200,200,200,150)}),S=new uo({color:me(200,200,200,20)}),b=new uo({color:me(220,220,220)}),x=new Oe({angle:0,stops:[{offset:0,color:me(10,10,10,220)},{offset:1,color:me(30,30,30,220)}]}),M=s,w=me(255,255,200),_=new uo({color:me(0,0,0,224)}),k=new uo({color:me(166,166,166)}),C=new uo({color:me(49,53,58)}),T=me(20,20,20),F=me(0,0,0),I=i,L=me(150,150,150),P=me(50,50,50),B=me(50,50,50),D=me(100,100,100),E=me(200,200,200),R=[me(255,255,91,255),me(255,205,91,255),me(255,155,91,255),me(255,196,188,255),me(255,148,184,255),me(219,148,198,255),me(235,196,224,255),me(169,148,198,255),me(148,226,198,255),me(148,255,176,255),me(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),O=i.setA(20),z=me(176,255,157,255),V=me(255,112,76,255),N={mapChartFillStyle:new Oe({angle:135,stops:[{color:me(255,255,91,255),offset:0},{color:me(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:ly(e,R,.5),pieChartSliceFillStylePalette:uy(e,R,1),funnelChartSliceFillStylePalette:cy(e,R,1),pyramidChartSliceFillStylePalette:cy(e,R,1),rectangleSeriesFillStyle:dy(e,R),gaugeChartBarColor:me(255,255,91,255),gaugeChartGlowColor:me(255,255,91,64)},G=new uo({color:me(176,255,157,255)}),$=new uo({color:me(255,146,146,255)}),U=new uo({color:me(176,255,157,255)}),j=new uo({color:me(230,63,63,255)}),Y=new uo({color:me(176,255,157,120)}),H=new uo({color:me(229,63,63,180)}),W=new uo({color:me(27,37,36,255)}),X=new uo({color:me(62,27,27,255)}),Z=[me(255,0,0),me(255,255,0),me(0,255,0)],J=[me(10,10,255),me(10,190,255),me(251,255,0),me(255,38,0)],Q=[me(255,255,0),me(255,204,0),me(255,128,0),me(255,0,0)],K=[me(0,0,0),me(167,4,69,255),me(255,0,0),me(252,252,168,255)],q=new De({stops:[{color:me(61,61,80,100),offset:0},{color:me(44,44,55,30),offset:1}]}),tt=new uo({color:me(148,148,198,255)}),it=Y.getColor().setA(255),st=me(100,100,100),et=[me(255,241,149,200),me(255,230,65,200),me(238,211,32,200),me(238,176,32,200),me(255,159,13,200),me(254,120,37,200),me(253,91,56,200),me(253,75,84,200),me(254,95,124,200),me(227,56,160,200),me(226,53,134,200),me(216,90,166,200),me(254,151,206,200),me(237,151,254,200),me(243,177,255,200),me(233,133,252,200),me(210,101,230,200),me(178,61,200,200),me(193,81,156,200),me(217,95,145,200)];return hy({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:n,dashboardSplitterFillStyle:h,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:l,fontScaler:1,titleFillStyle:u,axisTitleFillStyle:c,axisLabelMajorFillStyle:d,uiTitleFillStyle:f,uiTextFillStyle:v,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:m,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:k,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:E,dataColorPalette:R,dataColorPaletteInverted:[{area:me(190,50,50,100),border:me(210,80,80)}],dataHighlightOverlayColor:O,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new uo({color:me(0,0,0,180)}),zoomBandChartSplitterColor:me(251,251,90),zoomBandChartKnobFillStyle:i=>new xr({source:ay(i,"zoomBandChart/darkgold-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:me(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:me(24,30,33),treeMapChartNodeColors:et,treeMapChartLabelFillStyle:new uo({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new uo({color:me(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:$,positiveFillStyle:U,negativeFillStyle:j,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:X,badGoodColorPalette:Z,coldHotColorPalette:J,intensityColorPalette:Q,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:i,highlightDataGridColor:it,unfocusedDataColor:st})})),vy=Gn((()=>{const i=me(255,255,255),s=new uo({color:i}),e=!0,r=new ya({spread:0,blur:9,offset:{x:0,y:0},color:me(105,255,236,40)}),n=new uo({color:me(2,21,30)}),h=new De({stops:[{color:me(19,40,66,150),offset:0},{color:me(0,0,0,150),offset:1}]}),o=new uo({color:me(0,5,8,150)}),a=oy,l=s,u=s,c=s,d=s,f=s,v=f,A=new uo({color:me(20,224,250,255)}),g=s,y=new uo({color:me(61,94,110,100)}),p=new uo({color:me(61,94,110,255)}),m=new uo({color:me(61,94,110,40)}),S=s,b=new uo({color:me(0,18,23,255)}),x=s,M=i,w=new uo({color:me(0,0,0,225)}),_=s,k=new uo({color:me(18,66,75)}),C=me(0,38,48,220),T=me(0,0,0),F=i,I=me(150,150,150),L=me(19,78,93),P=me(50,50,50),B=me(0,36,48),D=me(200,200,200),E=[me(45,253,253,255),me(44,172,247,255),me(46,100,248,255),me(96,84,199,255),me(184,104,245,255),me(98,160,218,255),me(43,238,245,255),me(38,140,206,255),me(112,96,224,255),me(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=i.setA(50),O=me(3,217,194,255),z=me(230,63,63,255),V={mapChartFillStyle:new Oe({angle:135,stops:[{color:me(118,248,231,255),offset:0},{color:me(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:ly(e,E,1),pieChartSliceFillStylePalette:uy(e,E,1),funnelChartSliceFillStylePalette:cy(e,E,1),pyramidChartSliceFillStylePalette:cy(e,E,1),rectangleSeriesFillStyle:dy(e,E),gaugeChartBarColor:me(3,217,194,255),gaugeChartGlowColor:me(3,217,194,120)},N=new uo({color:me(45,253,253,255)}),G=new uo({color:me(255,146,146,255)}),$=new uo({color:me(45,253,253,255)}),U=new uo({color:me(230,63,63,255)}),j=new uo({color:me(1,190,164,120)}),Y=new uo({color:me(229,63,63,180)}),H=new uo({color:me(1,53,57,255)}),W=new uo({color:me(62,27,27,255)}),X=[me(1,104,119,255),me(0,165,144,255),me(0,246,214,255)],Z=[me(0,87,95,255),me(0,125,124,255),me(1,209,182,255),me(0,255,221,255),me(218,112,112,255),me(172,47,47,255)],J=[me(126,255,253,255),me(50,233,230,255),me(0,196,193,255),me(62,138,178,255),me(139,88,191,255),me(162,55,143,255)],Q=[me(13,31,52,255),me(101,50,118,255),me(1,142,172,255),me(2,196,170,255),me(0,255,221,255)],K=new De({stops:[{color:me(122,103,254,70),offset:0},{color:me(178,168,255,10),offset:1}]}),q=new uo({color:me(122,103,254,255)}),tt=j.getColor().setA(255),it=me(15,83,83),st=[me(139,252,252,150),me(60,239,239,150),me(2,201,201,150),me(26,159,159,150),me(15,146,187,150),me(65,168,200,150),me(67,146,207,150),me(64,108,209,150),me(189,64,233,150),me(219,84,238,150),me(192,55,212,150),me(212,98,229,150),me(248,110,211,150),me(251,154,225,150),me(251,154,184,150),me(233,105,144,150),me(255,133,170,150),me(249,110,135,150),me(245,72,101,150),me(210,57,84,150)];return hy({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:r,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new xr({source:ay(i,"themes/turquoiseHexagon.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:v,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:m,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:me(170,60,210,100),border:me(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:O,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new uo({color:me(0,0,0,180)}),zoomBandChartSplitterColor:me(43,244,244),zoomBandChartKnobFillStyle:i=>new xr({source:ay(i,"zoomBandChart/turquoise-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:me(255,255,255,24),overrideThemeProperties:V,treeMapChartParentColor:me(0,35,41),treeMapChartNodeColors:st,treeMapChartLabelFillStyle:new uo({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new uo({color:me(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:$,negativeFillStyle:U,positiveAreaFillStyle:j,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:W,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:Q,bollingerFillStyle:K,bollingerBorderFillStyle:q,highlightPointColor:i,highlightDataGridColor:tt,unfocusedDataColor:it})})),Ay=Gn((()=>{const i=!1,s=new ya({spread:0,blur:6,offset:{x:2,y:-2},color:me(0,0,0,30)}),e=new De({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(255,255,255)},{offset:1,color:me(255,255,255)}]}),r=new uo({color:me(219,227,233,255)}),n=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,200)},{offset:1,color:me(240,244,246,200)}]}),h=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,255)},{offset:1,color:me(255,255,255,255)}]}),o=oy,a=new uo({color:me(33,43,49)}),l=new uo({color:me(33,43,49)}),u=new uo({color:me(33,43,49)}),c=new uo({color:me(33,43,49)}),d=c,f=d,v=new Oe({angle:45,stops:[{offset:0,color:me(225,225,225)},{offset:1,color:me(225,225,225)}]}),A=new uo({color:me(150,150,150,255)}),g=new uo({color:me(150,150,150,170)}),y=new uo({color:me(150,150,150,150)}),p=new uo({color:me(150,150,150,100)}),m=new uo({color:me(60,70,80)}),S=new Oe({angle:0,stops:[{offset:0,color:me(255,255,255,240)},{offset:1,color:me(255,255,255,240)}]}),b=new uo({color:me(168,186,199)}),x=me(150,150,150),M=new uo({color:me(255,255,255,230)}),w=new uo({color:me(168,186,199)}),_=new uo({color:me(228,235,243)}),k=me(255,255,255,255),C=me(168,168,199,255),T=me(168,186,199,255),F=me(168,186,199,255),I=me(168,186,199,255),L=me(168,186,199,255),P=me(100,100,100),B=me(200,200,200),D=[me(28,181,140,255),me(255,132,0,255),me(240,39,39,255),me(86,121,251,255),me(2,181,213,255),me(13,212,158,255),me(22,167,3,255),me(234,103,232,255),me(62,183,179,255),me(140,93,3,255),me(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=me(150,150,150,80),R=me(46,182,120,255),O=me(255,66,66,255),z=new oa({thickness:2,fillStyle:new uo({color:me(168,186,199,255)})}),V={mapChartFillStyle:new Oe({angle:-45,stops:[{color:me(2,181,213,255),offset:0},{color:me(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:ly(i,D,.8),pieChartSliceFillStylePalette:uy(i,D,.8),funnelChartSliceFillStylePalette:cy(i,D,.5),pyramidChartSliceFillStylePalette:cy(i,D,.5),rectangleSeriesFillStyle:dy(i,D),gaugeChartBarColor:me(46,182,120,255),gaugeChartGlowColor:me(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new uo({color:me(0,88,64,255)})},N=new uo({color:me(4,146,108,255)}),G=new uo({color:me(240,39,39,255)}),$=new uo({color:me(28,181,140,255)}),U=new uo({color:me(230,88,88,255)}),j=new uo({color:me(28,181,140,180)}),Y=new uo({color:me(230,88,88,180)}),H=new uo({color:me(229,243,228)}),W=new uo({color:me(232,225,216)}),X=[me(193,48,48,255),me(240,234,60,255),me(45,191,55,255)],Z=[me(10,19,255,255),me(15,191,250,255),me(249,255,2,255),me(253,133,0,255),me(255,24,0,255)],J=[me(50,99,213),me(8,179,77),me(255,246,0),me(255,126,0),me(189,36,30)],Q=[me(16,64,176),me(8,179,77),me(255,246,0),me(255,126,0),me(168,6,0)],K=new uo({color:me(185,198,207,255)}),q=new De({stops:[{color:me(151,190,220,10),offset:0},{color:me(151,190,220,50),offset:1}]}),tt=j.getColor().setA(255),it=me(150,150,150),st=[me(255,243,136,125),me(254,237,99,125),me(255,216,109,125),me(255,172,100,125),me(255,133,101,125),me(255,113,142,125),me(230,103,129,125),me(242,126,219,125),me(255,155,235,125),me(255,181,240,125),me(203,143,255,125),me(208,154,255,125),me(171,188,255,125),me(197,209,255,125),me(171,187,255,125),me(84,167,239,125),me(38,196,214,125),me(38,214,196,125),me(69,225,141,125),me(36,191,88,125)];return hy({isDark:i,highlightColorOffset:me(-60,-60,-60,60),highlightColorOffsetAxisOverlay:me(0,0,0,40),effect:s,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:h,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:v,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:m,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:_,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:B,dataColorPalette:D,dataColorPaletteInverted:[{area:me(190,50,50,100),border:me(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new uo({color:me(255,255,255,180)}),zoomBandChartSplitterColor:me(80,93,101),zoomBandChartKnobFillStyle:i=>new xr({source:ay(i,"zoomBandChart/light-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:me(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:me(217,217,217),treeMapChartNodeColors:st,treeMapChartLabelFillStyle:new uo({color:me(0,0,0)}),treeMapChartLabelHeaderFillStyle:new uo({color:me(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:$,negativeFillStyle:U,positiveAreaFillStyle:j,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:W,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:Q,bollingerFillStyle:q,bollingerBorderFillStyle:K,highlightPointColor:me(0,0,0),highlightDataGridColor:tt,unfocusedDataColor:it})})),gy=Gn((()=>{const i=!1,s=new De({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:me(255,255,255)},{offset:1,color:me(255,255,255)}]}),e=new uo({color:me(214,236,216,255)}),r=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(233,244,231,70)},{offset:1,color:me(233,244,231,200)}]}),n=new De({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:me(255,255,255,255)},{offset:1,color:me(255,255,255,255)}]}),h=oy,o=new uo({color:me(1,61,53)}),a=new uo({color:me(1,61,53)}),l=new uo({color:me(1,61,53)}),u=new uo({color:me(1,61,53)}),c=u,d=c,f=new Oe({angle:45,stops:[{offset:0,color:me(225,225,225)},{offset:1,color:me(225,225,225)}]}),v=new uo({color:me(188,211,186,255)}),A=new uo({color:me(188,211,186,150)}),g=new uo({color:me(188,211,186,50)}),y=new uo({color:me(188,211,186,50)}),p=new uo({color:me(104,148,111,255)}),m=new Oe({angle:0,stops:[{offset:0,color:me(255,255,255,240)},{offset:1,color:me(255,255,255,240)}]}),S=new uo({color:me(104,148,111)}),b=me(150,150,150),x=new uo({color:me(255,255,255,230)}),M=new uo({color:me(104,148,111)}),w=new uo({color:me(226,236,224)}),_=me(255,255,255,255),k=me(179,201,183,255),C=me(188,211,186,255),T=me(188,211,186,255),F=me(188,211,186,255),I=me(188,211,186,255),L=me(100,100,100),P=me(200,200,200),B=[me(138,195,142,255),me(193,161,114,255),me(178,99,99,255),me(142,156,210,255),me(154,209,219,255),me(164,212,199,255),me(104,156,97,255),me(196,147,195,255),me(92,190,187,255),me(126,100,51,255),me(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=me(150,150,150,80),E=me(46,182,84,255),R=me(232,96,96,255),O=new oa({thickness:2,fillStyle:new uo({color:me(188,211,186,255)})}),z={mapChartFillStyle:new Oe({angle:-45,stops:[{color:me(118,160,121,255),offset:0},{color:me(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:ly(i,B,.8),pieChartSliceFillStylePalette:uy(i,B,.8),pyramidChartSliceFillStylePalette:cy(i,B,.5),funnelChartSliceFillStylePalette:cy(i,B,.5),rectangleSeriesFillStyle:dy(i,B),gaugeChartBarColor:me(46,182,84,255),gaugeChartGlowColor:me(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:O,chart3DSeriesBackgroundStrokeStyle:O,polarChartSeriesBackgroundStrokeStyle:O,spiderChartSeriesBackgroundStrokeStyle:O,dataGridTextFillStyle:new uo({color:me(77,66,21,255)})},V=new uo({color:me(93,151,97,255)}),N=new uo({color:me(178,99,99,255)}),G=new uo({color:me(138,195,142,255)}),$=new uo({color:me(178,99,99,255)}),U=new uo({color:me(138,195,142,180)}),j=new uo({color:me(178,99,99,180)}),Y=new uo({color:me(224,240,237)}),H=new uo({color:me(251,227,227)}),W=[me(178,99,99,255),me(215,224,111,255),me(80,186,88,255)],X=[me(62,64,142,255),me(66,131,77,255),me(250,250,135,255),me(202,161,78,255),me(179,53,53,255)],Z=[me(64,86,138),me(123,192,205),me(255,252,149),me(220,155,92),me(184,78,74)],J=[me(64,86,138),me(123,192,205),me(255,252,149),me(220,155,92),me(132,60,57)],Q=new uo({color:me(185,198,207,255)}),K=new De({stops:[{color:me(151,190,220,10),offset:0},{color:me(151,190,220,50),offset:1}]}),q=U.getColor().setA(255),tt=me(150,150,150),it=[me(242,239,210,150),me(243,238,183,150),me(210,222,136,150),me(204,217,148,150),me(157,190,124,150),me(143,178,72,150),me(198,147,88,150),me(216,148,71,150),me(229,142,103,150),me(225,174,152,150),me(219,149,203,150),me(216,188,209,150),me(109,198,189,150),me(172,206,202,150),me(164,223,217,150),me(174,215,233,150),me(203,225,235,150),me(220,227,243,150),me(207,213,227,150),me(171,182,209,150)];return hy({isDark:i,highlightColorOffset:me(-60,-60,-60,60),highlightColorOffsetAxisOverlay:me(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:h,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:v,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:m,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:_,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:P,dataColorPalette:B,dataColorPaletteInverted:[{area:me(210,70,70,100),border:me(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:E,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new uo({color:me(255,255,255,180)}),zoomBandChartSplitterColor:me(68,106,64),zoomBandChartKnobFillStyle:i=>new xr({source:ay(i,"zoomBandChart/lightnature-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:me(0,0,0,24),overrideThemeProperties:z,treeMapChartParentColor:me(239,247,238),treeMapChartNodeColors:it,treeMapChartLabelFillStyle:new uo({color:me(0,0,0)}),treeMapChartLabelHeaderFillStyle:new uo({color:me(33,33,33)})},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:$,positiveAreaFillStyle:U,negativeAreaFillStyle:j,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:H,badGoodColorPalette:W,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:J,bollingerFillStyle:K,bollingerBorderFillStyle:Q,highlightPointColor:me(0,0,0),highlightDataGridColor:q,unfocusedDataColor:tt})})),yy=Gn((()=>{const i=me(255,255,255),s=new uo({color:i}),e=!0,r=new ya({spread:1,blur:9,offset:{x:0,y:0},color:me(255,255,255,30)}),n=new uo({color:me(6,15,36)}),h=new De({stops:[{color:me(46,13,87,50),offset:0},{color:me(0,0,0,150),offset:1}]}),o=new uo({color:me(0,5,8,150)}),a=oy,l=s,u=s,c=s,d=s,f=s,v=f,A=new Oe({angle:45,stops:[{offset:0,color:me(241,133,255,255)},{offset:1,color:me(115,207,238,255)}]}),g=s,y=new uo({color:me(61,94,110,100)}),p=new uo({color:me(61,94,110,255)}),m=new uo({color:me(61,94,110,40)}),S=s,b=new uo({color:me(0,18,23,255)}),x=s,M=me(115,207,238,255),w=new uo({color:me(0,0,0,224)}),_=s,k=new uo({color:me(68,31,78)}),C=me(0,38,48,255),T=me(0,0,0),F=i,I=me(150,150,150),L=me(19,57,93),P=me(50,50,50),B=me(0,17,48),D=me(200,200,200),E=[me(20,211,237,255),me(98,147,252,255),me(164,73,250,255),me(129,117,253,255),me(95,134,252,255),me(22,133,212,255),me(35,200,242,255),me(104,121,233,255),me(137,69,232,255),me(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=i.setA(50),O=me(3,217,194,255),z=me(243,21,110,255),V={mapChartFillStyle:new Oe({angle:135,stops:[{color:me(118,248,231,255),offset:0},{color:me(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:ly(e,E,.5),pieChartSliceFillStylePalette:uy(e,E,2),funnelChartSliceFillStylePalette:cy(e,E,1),pyramidChartSliceFillStylePalette:cy(e,E,1),rectangleSeriesFillStyle:dy(e,E),gaugeChartBarColor:me(3,217,194,255),gaugeChartGlowColor:me(3,217,194,150)},N=new uo({color:me(20,211,237,255)}),G=new uo({color:me(253,145,178,255)}),$=new uo({color:me(20,211,237,255)}),U=new uo({color:me(239,68,121,255)}),j=new uo({color:me(20,211,237,120)}),Y=new uo({color:me(239,68,121,180)}),H=new uo({color:me(1,53,57,255)}),W=new uo({color:me(94,19,42,255)}),X=[me(174,51,132,255),me(204,107,218,255),me(189,215,253,255)],Z=[me(0,63,95,255),me(0,149,255,255),me(0,225,255,255),me(255,154,254,255),me(204,98,170,255),me(139,39,84,255)],J=[me(197,241,255,255),me(70,210,255,255),me(0,164,217,255),me(90,99,222,255),me(138,75,192,255),me(151,27,162,255)],Q=[me(13,31,52,255),me(129,54,130,255),me(131,108,176,255),me(7,162,213,255),me(26,247,255,255)],K=new De({stops:[{color:me(219,42,235,60),offset:0},{color:me(237,73,252,10),offset:1}]}),q=new uo({color:me(237,73,252,255)}),tt=j.getColor().setA(255),it=me(8,70,100),st=[me(149,230,255,150),me(93,213,243,150),me(20,189,223,150),me(5,151,181,150),me(2,138,198,150),me(2,113,198,150),me(97,148,236,150),me(93,111,230,150),me(151,120,223,150),me(128,87,227,150),me(153,52,230,150),me(179,92,245,150),me(248,110,211,150),me(255,155,228,150),me(251,88,207,150),me(255,0,162,150),me(214,73,177,150),me(209,71,159,150),me(238,101,169,150),me(210,57,134,150)];return hy({isDark:e,highlightColorOffset:me(60,60,60,60),highlightColorOffsetAxisOverlay:me(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new xr({source:ay(i,"themes/cyberSpace.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:v,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:m,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:me(41,130,255,100),border:me(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:O,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new uo({color:me(0,0,0,180)}),zoomBandChartSplitterColor:me(219,119,255),zoomBandChartKnobFillStyle:i=>new xr({source:ay(i,"zoomBandChart/cyberspace-selector.png"),fitMode:t.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:me(255,255,255,24),overrideThemeProperties:V,treeMapChartParentColor:me(30,30,59),treeMapChartNodeColors:st,treeMapChartLabelFillStyle:new uo({color:me(33,33,33)}),treeMapChartLabelHeaderFillStyle:new uo({color:me(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:$,negativeFillStyle:U,positiveAreaFillStyle:j,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:W,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:Q,bollingerFillStyle:K,bollingerBorderFillStyle:q,highlightPointColor:i,highlightDataGridColor:tt,unfocusedDataColor:it})})),py={};Object.defineProperty(py,"darkGold",{get:fy,enumerable:!0}),Object.defineProperty(py,"turquoiseHexagon",{get:vy,enumerable:!0}),Object.defineProperty(py,"light",{get:Ay,enumerable:!0}),Object.defineProperty(py,"lightNature",{get:gy,enumerable:!0}),Object.defineProperty(py,"cyberSpace",{get:yy,enumerable:!0});const my=py,Sy=my.darkGold;class by extends $d{constructor(i,s,e,r,n,h){var o,a,l,u;let c;super(i,s,e,s._g("dataGrid bg",0),r,s.Ki.rs.dataGridBackgroundFillStyle,s.Ki.rs.dataGridBackgroundStrokeStyle,s.Ki.rs.dataGridTitleFont,s.Ki.rs.dataGridTitleFillStyle,s.Ki.rs.dataGridTitleShadow,h),this.PT=[],this.BT=[],this.DT=[],this.ET=new Map,this.RT=!0,this.OT=!0,this.zT=!0,this.VT=!0,this.NT=!0,this.GT=!0,this.$T=!0,this.UT=!0,this.jT=!0,this.YT=!0,this.HT=!0,this.WT=!0,this.XT=!0,this.ZT=!0,this.JT=!0,this.QT=!0,this.KT=new Set,this.qT=new Set,this.tF=!0,this.iF=!0,this.sF=(t,i)=>{t.borders=void 0===i?_y:{...t.borders,...i},this.eF(t),this.WT=!0,this.Ki.fe()},this.eF=t=>{t.borders&&(!1===t.borders.top&&this.rF(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.nF,bottom:!1}})),!1===t.borders.bottom&&this.rF(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.nF,top:!1}})),!1===t.borders.left&&this.rF(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.nF,right:!1}})),!1===t.borders.right&&this.rF(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.nF,left:!1}})),!0===t.borders.top&&this.rF(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.nF,bottom:!0}})),!0===t.borders.bottom&&this.rF(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.nF,top:!0}})),!0===t.borders.left&&this.rF(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.nF,right:!0}})),!0===t.borders.right&&this.rF(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.nF,left:!0}})))},this.hF={x:0,y:0},this.cells=new Ar,this._t=new Ar,this.Ki.ul(jl.Qo),this._n.Eh("Data Grid"),this.oF=e.d2({scaleXYConstructor:He}),this.oF.x.Fv=Ug,this.aF=e.d2({scaleXYConstructor:He}),this.lF={x:0,y:0},this.uF=this.rs.dataGridTextFont,this.cF=this.rs.dataGridTextFillStyle,this.nF={top:!0,bottom:!0,left:!0,right:!0},this.dF=this.rs.dataGridCellBackgroundFillStyle,this.fF=this.rs.dataGridBorderStrokeStyle,this.vF="left-center",this.AF={left:null!==(o=this.rs.dataGridCellPadding)&&void 0!==o?o:5,right:null!==(a=this.rs.dataGridCellPadding)&&void 0!==a?a:5,bottom:null!==(l=this.rs.dataGridCellPadding)&&void 0!==l?l:5,top:null!==(u=this.rs.dataGridCellPadding)&&void 0!==u?u:5},this.gF=s.vS("dataGrid grid bg",0),this.yF=s.vS("dataGrid cell bg",1),this.pF=s.AS("dataGrid cell content",0),this.mF=s.AS("dataGrid scrollbar bg",1),this.SF=s.AS("dataGrid scrollbar fg",2),this.bF=this.gF.od(this.aF).Er(this.rs.dataGridBackgroundFillStyle).Dr(_r).setPointerEvents(!1),this.xF=this.pF.iA(this.oF).setPointerEvents(!1),this.MF=new Td((()=>{const t=this.yF.Rr(this.oF).setPointerEvents(!0);return this.cells.Ms(t,{getExtraData:()=>this.ET.get(t),continueIfNotPrevented:(t,i,s)=>{const e=wo(this.getUserInteractions().scroll,"wheel",i,i.shiftKey,i.ctrlKey,i.altKey);if(e&&"wheel"===t&&i instanceof WheelEvent){un(i),this.wF({x:!0===e.x?Math.sign(i.deltaY):0,y:!0===e.y?Math.sign(i.deltaY):0});const t=e.on;t&&t({event:i})}}}),t})),this._F=new Td((()=>this.pF.Rr(this.oF).setPointerEvents(!1))),this.kF=new Td((()=>this.pF.no(this.oF,!1).setPointerEvents(!1))),this.CF=new Td((()=>this.pF._y(this.oF,{},[Wd.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.TF=new Td((()=>this.pF.Wr(this.oF).setPointerEvents(!1))),this.FF=new Td((()=>this.pF.yf(this.oF).gf(ho).Hr(_r).setPointerEvents(!1))),this.IF=new Td((()=>this.pF.Rr(this.oF).setPointerEvents(!1))),this.LF=new Td((()=>this.pF.LM(this.oF).setPointerEvents(!1))),this.PF=new Td((()=>this.pF.ef(this.oF).setPointerEvents(!1))),this.BF={background:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarBackgroundFillStyle).Dr(this.rs.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.SF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarFillStyle).Dr(this.rs.dataGridScrollBarStrokeStyle),button1:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarButtonFillStyle).Dr(this.rs.dataGridScrollBarButtonStrokeStyle),button2:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarButtonFillStyle).Dr(this.rs.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.SF.yf(this.aF).setPointerEvents(!1).Hr(_r).Af(this.rs.dataGridScrollBarButtonArrowFillStyle).pf(t.PointShape.Triangle),buttonIcon2:this.SF.yf(this.aF).setPointerEvents(!1).Hr(_r).Af(this.rs.dataGridScrollBarButtonArrowFillStyle).pf(t.PointShape.Triangle)},this.DF={background:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarBackgroundFillStyle).Dr(this.rs.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.SF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarFillStyle).Dr(this.rs.dataGridScrollBarStrokeStyle),button1:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarButtonFillStyle).Dr(this.rs.dataGridScrollBarButtonStrokeStyle),button2:this.mF.Rr(this.aF).setPointerEvents(!0).Er(this.rs.dataGridScrollBarButtonFillStyle).Dr(this.rs.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.SF.yf(this.aF).setPointerEvents(!1).Hr(_r).Af(this.rs.dataGridScrollBarButtonArrowFillStyle).pf(t.PointShape.Triangle),buttonIcon2:this.SF.yf(this.aF).setPointerEvents(!1).Hr(_r).Af(this.rs.dataGridScrollBarButtonArrowFillStyle).pf(t.PointShape.Triangle)},this.BF.scrollbar.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Vertical,c)})),this.BF.scrollbar.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.BF.scrollbar.addEventListener("pointerdown",(t=>{un(t);let i=t;const s=t=>{const s=t.clientY-i.clientY;i=t,this.EF({x:0,y:-s})},e=i=>{i.pointerId===t.pointerId&&(Or.removeEventListener("pointermove",s),Or.removeEventListener("pointerup",e))};Or.addEventListener("pointermove",s),Or.addEventListener("pointerup",e)})),this.BF.scrollbar.addEventListener("wheel",(t=>{un(t),this.wF({x:0,y:Math.sign(t.deltaY)})})),this.BF.background.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Vertical,c)})),this.BF.background.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.BF.background.addEventListener("click",(t=>{un(t);const i=this.Ki.El(t),s=Je({x:i.engineX,y:i.engineY},this.Ki.ji,this.aF);this.wF({x:0,y:s.y>this.BF.scrollbar.yu().y?-1:1})})),this.BF.background.addEventListener("wheel",(t=>{un(t),this.wF({x:0,y:Math.sign(t.deltaY)})})),this.BF.button1.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Point,c)})),this.BF.button1.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.BF.button1.addEventListener("click",(t=>{un(t),this.wF({x:0,y:1})})),this.BF.button2.addEventListener("click",(t=>{un(t),this.wF({x:0,y:-1})})),this.BF.button2.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Point,c)})),this.BF.button2.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.DF.scrollbar.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Horizontal,c)})),this.DF.scrollbar.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.DF.scrollbar.addEventListener("pointerdown",(t=>{un(t);let i=t;const s=t=>{const s=t.clientX-i.clientX;i=t,this.EF({x:s,y:0})},e=i=>{i.pointerId===t.pointerId&&(Or.removeEventListener("pointermove",s),Or.removeEventListener("pointerup",e))};Or.addEventListener("pointermove",s),Or.addEventListener("pointerup",e)})),this.DF.scrollbar.addEventListener("wheel",(t=>{un(t),this.wF({x:Math.sign(t.deltaY),y:0})})),this.DF.background.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Horizontal,c)})),this.DF.background.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.DF.background.addEventListener("click",(t=>{un(t);const i=this.Ki.El(t),s=Je({x:i.engineX,y:i.engineY},this.Ki.ji,this.aF);this.wF({x:s.x<this.DF.scrollbar.yu().x?-1:1,y:0})})),this.DF.background.addEventListener("wheel",(t=>{un(t),this.wF({x:Math.sign(t.deltaY),y:0})})),this.DF.button1.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Point,c)})),this.DF.button1.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.DF.button1.addEventListener("click",(t=>{un(t),this.wF({x:-1,y:0})})),this.DF.button2.addEventListener("click",(t=>{un(t),this.wF({x:1,y:0})})),this.DF.button2.addEventListener("pointerenter",(i=>{c=this.engine.setMouseStyle(t.MouseStyles.Point,c)})),this.DF.button2.addEventListener("pointerleave",(t=>{c=this.engine.restoreMouseStyle(c)})),this.wg(n,this.uiScale),this.addEventListener("resize",(()=>{this.RT=!0,this.Ki.fe(),this.oF.zt(this.Rv.li()),this.aF.zt(this.Rv.li())})),this.RF=this.Ks.Gv([this.bF])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}tg(){return[]}dispose(){return super.dispose(),this.gF.It(),this.yF.It(),this.pF.It(),this.mF.It(),this.SF.It(),Nd(this.oF),Nd(this.aF),this.kF.xA(),this.MF.xA(),this._F.xA(),this.CF.xA(),this.TF.xA(),this.FF.xA(),this.IF.xA(),this.LF.xA(),this.PF.xA(),this}Dt(){return super.Dt(),this.oF.Dt(),this.aF.Dt(),this}Et(){return super.Et(),this.oF.Et(),this.aF.Et(),this}setBackgroundEffect(t){return this.RF.de(t),this.Ki.fe(),this}getBackgroundEffect(){return this.RF.ve()}setUserInteractions(t){return this.Ur=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return Er({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.Ur)}setGridBackgroundFillStyle(t){return this.bF.Er(t),this.Ki.fe(),this}getGridBackgroundFillStyle(){return this.bF.Qn()}setCellContent(t,i,s,e,r){if("number"==typeof s&&void 0!==e&&void 0!==r){const n=s,h=e,o=r;let a=[];for(let s=t;s<t+n;s+=1)for(let t=i;t<i+h;t+=1){const i=this.rF(s,t);i&&a.push(i)}a=On(a);let l={highlight:0};for(const t of a){const i=this.PT.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.PT.splice(i,1))}const u={...l,column:t,row:i,columnSpan:n,rowSpan:h,content:o};this.PT.push(u),this.VT=!0,"string"==typeof u.content||"number"==typeof u.content?this.OT=!0:this.zT=!0,this.Ki.fe()}else this.OF(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.OF(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.OF(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.OF(e,s,i)}return this}setColumnWidth(t,i){let s=this.BT.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.BT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.BT.splice(this.BT.indexOf(s),1):(s.min=i,s.max=i),this.GT=!0,this.Ki.fe(),this}setRowHeight(t,i){let s=this.DT.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.DT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.DT.splice(this.DT.indexOf(s),1):(s.min=i,s.max=i),this.GT=!0,this.Ki.fe(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=d(i,i,i,i)),this.zF(t,(t=>this.VF(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=d(i,i,i,i)),this.NF(t,(t=>this.VF(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=d(s,s,s,s)),this.rF(t,i,(t=>this.VF(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=d(t,t,t,t)),this.AF={...this.AF,...t},this.GF((t=>this.VF(t,this.AF))),this}setCellBorders(t,i,s){return this.rF(t,i,(t=>this.sF(t,s))),this}setRowBorders(t,i){return this.NF(t,(t=>this.sF(t,i))),this}setColumnBorders(t,i){return this.zF(t,(t=>this.sF(t,i))),this}setCellsBorders(t){return this.nF=void 0===t?_y:t,this.GF((t=>this.sF(t,this.nF))),this}setCellsBorderStrokeStyle(t){return this.fF="function"==typeof t?t(this.fF):t,this.ZT=!0,this.Ki.fe(),this}setColumnTextFillStyle(t,i){return this.zF(t,(t=>this.$F(t,i))),this}setRowTextFillStyle(t,i){return this.NF(t,(t=>this.$F(t,i))),this}setCellTextFillStyle(t,i,s){return this.rF(t,i,(t=>this.$F(t,s))),this}setCellsTextFillStyle(t){return this.cF="function"==typeof t?t(this.cF):t,this.GF((t=>this.$F(t,this.cF))),this}setColumnTextFont(t,i){return this.zF(t,(t=>this.UF(t,i))),this}setRowTextFont(t,i){return this.NF(t,(t=>this.UF(t,i))),this}setCellTextFont(t,i,s){return this.rF(t,i,(t=>this.UF(t,s))),this}setCellsTextFont(t){return this.uF="function"==typeof t?t(this.uF):t,this.GF((t=>this.UF(t,this.uF))),this}setColumnContentAlignment(t,i){return this.zF(t,(t=>this.jF(t,i))),this}setRowContentAlignment(t,i){return this.NF(t,(t=>this.jF(t,i))),this}setCellContentAlignment(t,i,s){return this.rF(t,i,(t=>this.jF(t,s))),this}setCellsContentAlignment(t){return this.vF=t,this.GF((t=>this.jF(t,this.vF))),this}setCellBackgroundFillStyle(t,i,s){return this.rF(t,i,(t=>this.YF(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.zF(t,(t=>this.YF(t,i))),this}setRowBackgroundFillStyle(t,i){return this.NF(t,(t=>this.YF(t,i))),this}setCellsBackgroundFillStyle(t){return this.dF="function"==typeof t?t(this.dF):t,this.GF((t=>this.YF(t,this.dF))),this}setCellHighlight(t,i,s){return this.rF(t,i,(t=>{t.highlight=Vn(s)})),this.XT=!0,this.Ki.fe(),this}setColumnHighlight(t,i){const s=Vn(i);return this.zF(t,(t=>{t.highlight=s})),this.XT=!0,this.Ki.fe(),this}setRowHighlight(t,i){const s=Vn(i);return this.NF(t,(t=>{t.highlight=s})),this.XT=!0,this.Ki.fe(),this}removeCell(t,i){return this.rF(t,i,(t=>this.PT.splice(this.PT.indexOf(t),1))),this.NT=!0,this.Ki.fe(),this}removeRow(t){return this.NF(t,(t=>this.PT.splice(this.PT.indexOf(t),1))),this.PT.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.NT=!0,this.Ki.fe(),this}removeColumn(t){return this.zF(t,(t=>this.PT.splice(this.PT.indexOf(t),1))),this.PT.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.NT=!0,this.Ki.fe(),this}removeCells(){return this.PT.splice(0),this.NT=!0,this.Ki.fe(),this}getColumnMax(){return 0===this.PT.length?0:this.PT.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.PT.length?0:this.PT.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Or(t){var i;super.Or(t),Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo),super.Mg();const s=Math.round(this.fF.Is()),e=s/2;let r=this.OT||this.zT||this.VT||this.NT||this.GT||this.$T||this.HT||this.WT||this.ZT||this.QT;if(r){this.PT.forEach((t=>{this.qT.add(t.column)})),this.PT.forEach((t=>{this.KT.add(t.row)}));const t=this.kF.pA(),i=this.HF(e,t);t.finishPlot();const n=this.WF(this.qT.size,i),h=this.XF(this.KT.size,i),o=n.reduce(ch,0)+s,a=h.reduce(ch,0)+s,l=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(h.length+1).fill(0).map(((t,i)=>h.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.ZF){const t=this.ZF.columnWidths.every(((t,i)=>t===n[i])),i=this.ZF.rowHeights.every(((t,i)=>t===h[i]));t&&i&&(r=!1)}this.ZF={columnWidths:n,rowHeights:h,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:i}}const n=r||this.zT||this.VT||this.NT||this.UT||this.jT||this.YT||this.WT||this.XT||this.ZT||this.RT||this.QT;if((n||this.JT)&&this.ZF){const t=this.Rv.getInnerIntervalPixels(),r=Ud.Bg(this._n,this.kg),h=[this.xo.left+e,this.xo.right+e],o=[this.xo.bottom+e,this.xo.top+r+e],a={x:t.x-h[0]-h[1],y:t.y-o[0]-o[1]},l=[this.xo.left,this.xo.right],u=[this.xo.bottom,this.xo.top+r],c={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-u[0]-u[1])},d={x:Math.ceil(e),y:Math.floor(c.y-e)};this.aF.Ei(h).Ri(o).Oi(0,a.x).zi(0,a.y);const f=null!==(i=this.rs.dataGridScrollBarThickness)&&void 0!==i?i:20,v={x:Math.min(a.x,this.ZF.dataGridWidth+f)-f,y:Math.min(a.y,this.ZF.dataGridHeight+f)-f};0===this.hF.x&&0===this.hF.y||(this.lF.y+=this.ZF.dataGridHeight*this.hF.y/v.y,this.lF.x+=this.ZF.dataGridWidth*this.hF.x/v.x,this.hF.x=0,this.hF.y=0),this.lF.y=jr(this.lF.y,a.y-this.ZF.dataGridHeight-f,0),this.lF.x=jr(this.lF.x,0,this.ZF.dataGridWidth-a.x+f);const A=this.lF;this.oF.Ei(l).Ri(u).Oi(A.x,c.x+A.x).zi(A.y,c.y+A.y);const g={x:this.oF.x.ni(),y:this.oF.y.ni()+f,width:this.oF.x.oi()+s-f,height:this.oF.y.oi()+s-f};this.pF.hS(g),this.yF.hS(g);const y=this.ZF,p=[{x:this.oF.x.getInnerStart(),y:this.oF.y.getInnerStart()},{x:this.oF.x.getInnerEnd(),y:this.oF.y.getInnerStart()},{x:this.oF.x.getInnerEnd(),y:this.oF.y.getInnerEnd()},{x:this.oF.x.getInnerStart(),y:this.oF.y.getInnerEnd()}];y.cellsContentSizes.forEach((t=>{var i;const s={x:d.x+y.columnWidthsCumulative[t.cell.column],y:d.y-y.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+y.columnWidths[t.cell.column],y:s.y+y.rowHeights[t.cell.row]},r=ah([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],p);null===(i=t.text)||void 0===i||i.setVisible(r)})),n&&this.JF(d,this.ZF,s);const m=a.y-f<this.ZF.dataGridHeight;this.BF.background.setVisible(m).zr({x:v.x,y:f}).zt({x:f,y:v.y}),this.BF.scrollbar.setVisible(m).zr({x:v.x,y:f+v.y-f+-(v.y-2*f)*(-this.lF.y/this.ZF.dataGridHeight)}).zt({x:f,y:-(v.y-2*f)*(v.y/this.ZF.dataGridHeight)}),this.BF.button1.setVisible(m).zr({x:v.x,y:f}).zt({x:f,y:f}),this.BF.buttonIcon1.setVisible(m)._f(.5*f).Sf(0).vf((new Nu).appendSample({x:v.x+f/2,y:1.5*f}),{x:"x",y:"y"}),this.BF.button2.setVisible(m).zr({x:v.x,y:v.y}).zt({x:f,y:f}),this.BF.buttonIcon2.setVisible(m)._f(.5*f).Sf(180).vf((new Nu).appendSample({x:v.x+f/2,y:v.y+f/2}),{x:"x",y:"y"});const S=a.x-f<this.ZF.dataGridWidth,b=Math.max(a.y-this.ZF.dataGridHeight-f,0);this.DF.background.setVisible(S).zr({x:0,y:b}).zt({x:v.x,y:f}),this.DF.scrollbar.setVisible(S).zr({x:f+(v.x-2*f)*(this.lF.x/this.ZF.dataGridWidth),y:b}).zt({x:(v.x-2*f)*(v.x/this.ZF.dataGridWidth),y:f}),this.DF.button1.setVisible(S).zr({x:0,y:b}).zt({x:f,y:f}),this.DF.buttonIcon1.setVisible(S)._f(.5*f).Sf(90).vf((new Nu).appendSample({x:f/2,y:b+f/2}),{x:"x",y:"y"}),this.DF.button2.setVisible(S).zr({x:v.x-f,y:b}).zt({x:f,y:f}),this.DF.buttonIcon2.setVisible(S)._f(.5*f).Sf(270).vf((new Nu).appendSample({x:v.x-f/2,y:b+f/2}),{x:"x",y:"y"}),this.bF.Nu([d,{x:d.x+v.x+(m?f:0),y:d.y},{x:d.x+v.x+(m?f:0),y:d.y-v.y},{x:d.x+v.x,y:d.y-v.y},{x:d.x+v.x,y:d.y-v.y-(S?f:0)},{x:d.x,y:d.y-v.y-(S?f:0)}])}this.RT=!1,this.OT=!1,this.zT=!1,this.VT=!1,this.NT=!1,this.GT=!1,this.$T=!1,this.UT=!1,this.jT=!1,this.YT=!1,this.HT=!1,this.WT=!1,this.XT=!1,this.ZT=!1,this.JT=!1,this.QT=!1}HF(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.PT){const{content:r}=t,n={...this.AF,...t.padding};let h,o,a,l={x:0,y:0};if("string"==typeof r||"number"==typeof r){const s=String(r);h=i.add(),l=h.Eh(s).ih(t.textFont||this.uF).Sh().td()}if(jg(r)&&(o=r,l={x:200,y:50}),Aa(r)){const t=this.Ki.QF(r);t.KF()?(a=r,l=a.li()):t.qF((()=>{this.QT=!0,this.Ki.fe()}))}if(h||o||a){n.top=Math.round(n.top),n.left=Math.round(n.left),n.right=Math.round(n.right),n.bottom=Math.round(n.bottom);const i={x:Math.round(l.x+n.left+n.right+e.left+e.right),y:Math.round(l.y+n.top+n.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:h,sparkChart:o,icon:a,cellPadding:n,cellMargin:e})}}return s}JF(i,s,e){const{cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:h,rowHeights:o,rowHeightsCumulative:a}=s;this.xF.Hr(this.fF),this.ET.clear();const l={cellBackground:this.MF.pA(),cellIconRect:this._F.pA(),lineSet:this.CF.pA(),line:this.TF.pA(),pointSet:this.FF.pA(),rect:this.IF.pA(),junction:this.LF.pA(),arc:this.PF.pA()},u=[];for(const s of r){const{cell:r,text:c,sparkChart:d,icon:f,cellPadding:v,cellMargin:A}=s,g={column:r.column,row:r.row},y={x:i.x+h[r.column],y:i.y-a[r.row+r.rowSpan]},p={x:y.x+A.left,y:y.y+A.bottom},m={x:p.x+v.left,y:p.y+v.bottom},S={x:new Array(r.columnSpan).fill(0).reduce(((t,i,s)=>t+n[r.column+s]),0),y:new Array(r.rowSpan).fill(0).reduce(((t,i,s)=>t+o[r.row+s]),0)},b={x:S.x-A.left-A.right,y:S.y-A.top-A.bottom},x={x:b.x-v.left-v.right,y:b.y-v.top-v.bottom};if(c){const t=wy(m,x,r.contentAlignment||this.vF);c.zr(t[0]).Cu({x:t[1],y:t[2]}).Er(this.tI(r.textFillStyle||this.cF,r.content,this.cF)).vs(r.highlight).Dh(this.rs.dataGridTextShadow)}const M=this.tI(r.backgroundFillStyle||this.dF,r.content);if(M!==ho){const t=l.cellBackground.add();t.zr(y).zt(S).Er(M).Dr(_r).vs(r.highlight),this.ET.set(t,g)}const w=r.borders||this.nF;if(w&&My(y,S,w,e,u),d){const t=m,i=x;Yg(d,l,this.oF,t,i,this.rs,this.ug,r.highlight)}if(f){const i=f.li(),s=wy(m,x,r.contentAlignment||this.vF);l.cellIconRect.add().zr({x:s[0].x+i.x*(-.5-s[1]/2),y:s[0].y+i.y*(-.5-s[2]/2)}).zt(i).Er(new xr({source:f.Fe,fitMode:t.ImageFitMode.Stretch})).Dr(_r).vs(r.highlight)}}this.xF.ws();for(const t of u)this.xF._a().eA(t[0],t[1]);l.cellBackground.finishPlot(),l.cellIconRect.finishPlot(),l.lineSet.finishPlot(),l.line.finishPlot(),l.pointSet.finishPlot(),l.rect.finishPlot(),l.junction.finishPlot(),l.arc.finishPlot()}WF(t,i){const s=new Array(t).fill(0);for(const t of this.qT.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),r=this.BT.find((i=>i.column===t)),n=r?jr(e,void 0!==r.min?r.min:eh,void 0!==r.max?r.max:sh):e;s[t]=n}return s}XF(t,i){const s=new Array(t).fill(0);for(const t of this.KT.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),r=this.DT.find((i=>i.row===t)),n=r?jr(e,void 0!==r.min?r.min:eh,void 0!==r.max?r.max:sh):e;s[t]=n}return s}tI(t,i,s){if(yo(t)){try{const s=Number(i);return new uo({color:t.getPalette().getColors(s,void 0)})}catch(t){}return s||ho}return t}$F(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.cF):i,this.YT=!0,this.Ki.fe()}UF(t,i){t.textFont="function"==typeof i?i(t.textFont||this.uF):i,this.HT=!0,this.Ki.fe()}YF(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.dF):i,this.jT=!0,this.Ki.fe()}jF(t,i){t.contentAlignment=i,this.UT=!0,this.Ki.fe()}VF(t,i){t.padding={...t.padding,...i},this.$T=!0,this.Ki.fe()}OF(t,i,s){let e=this.rF(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.PT.push(e),this.VT=!0),"string"==typeof e.content||"number"==typeof e.content?this.OT=!0:this.zT=!0,this.Ki.fe()}GF(t){this.PT.forEach((i=>t(i)))}rF(t,i,s){const e=this.PT.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}zF(t,i){const s=this.PT.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}NF(t,i){const s=this.PT.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}wF(t){var i,s,e,r,n,h;if(this.ZF){if(0!==t.y){const r=null!==(s=null===(i=this.ZF.rowHeightsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>-this.lF.y+(t.y>0?1:0)>=i.value)))||void 0===i?void 0:i.index)&&void 0!==s?s:0,n=null!==(e=this.ZF.rowHeightsCumulative[r+t.y])&&void 0!==e?e:0;this.lF.y=-n,this.JT=!0,this.Ki.fe()}if(0!==t.x){const i=null!==(n=null===(r=this.ZF.columnWidthsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>this.lF.x+(t.x>0?1:0)>=i.value)))||void 0===r?void 0:r.index)&&void 0!==n?n:0,s=null!==(h=this.ZF.columnWidthsCumulative[i+t.x])&&void 0!==h?h:0;this.lF.x=s,this.JT=!0,this.Ki.fe()}}}EF(t){this.ZF&&(this.hF.x+=t.x,this.hF.y+=t.y,this.JT=!0,this.Ki.fe())}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}var xy;t.DataGridCellContentAlignmentOptions=void 0,(xy=t.DataGridCellContentAlignmentOptions||(t.DataGridCellContentAlignmentOptions={})).Center="center",xy.RightCenter="right-center",xy.LeftCenter="left-center",xy.RightTop="right-top",xy.LeftTop="left-top",xy.RightBottom="right-bottom",xy.LeftBottom="left-bottom",xy.CenterTop="center-top",xy.CenterBottom="center-bottom";const My=(t,i,s,e,r)=>{const n={x:t.x,y:t.y},h={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&r.push([h,a]),s.bottom&&r.push([n,o]),s.left&&r.push([n,h]),s.right&&r.push([o,a])},wy=(t,i,s)=>{const r=t.x,n=t.x+i.x,h=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[e(r,l),-1,0];case"right-center":return[e(n,l),1,0];case"center":return[e(h,l),0,0];case"left-bottom":return[e(r,a),-1,-1];case"right-bottom":return[e(n,a),1,-1];case"center-bottom":return[e(h,a),0,-1];case"left-top":return[e(r,o),-1,1];case"right-top":return[e(n,o),1,1];case"center-top":return[e(h,o),0,1]}return Nn(0,`Unidentified DataGrid cell content alignment option: ${s}`)},_y={top:!1,bottom:!1,left:!1,right:!1};class ky extends Il{constructor(t,i,s,e,r,n){super(t,{Hh(){},Yh(){},Xh(){}},e,i,s,{numeric:i.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this._t=new Ar,this.chart=t,this.Ks=n,this.ke=r,this.Ln=r.no(t.iI).ih(this.rs.barChartCategoryAxisTitleFont||this.rs.xAxisTitleFont).Er(this.rs.barChartCategoryAxisTitleFillStyle||this.rs.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ce.getWidth({x:0,y:-90})),this.hh=this.Ks.Gv([this.Ln]).de(i.effectsText),this.sI=r.Wr(t.iI).Hr(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Hv=t,this.Wv=t):"object"==typeof t&&(this.Hv=t.min,this.Wv=t.max),this.chart.Ki.fe(),this}getThickness(){return{min:this.Hv,max:this.Wv}}setStrokeStyle(t){return this.sI.Hr(t),this.chart.Ki.fe(),this}getStrokeStyle(){return this.sI.Ho()}Or(t){const i=this.getInterval(),s=this.chart.valueAxis.getInterval();this.sI.Zr(this.chart.Ce.toPoint(i.start,s.start)).Xr(this.chart.Ce.toPoint(i.end,s.start)).setVisible(this.Xi),this.Ln.zr(this.chart.Ce.toPoint(.5*(i.start+i.end),this.chart.valueAxis.ji.Bi(s.start,-t.Zv))).Cu(this.chart.Ce.toPoint(0,1)).setVisible(this.Xi),t.ticksInfo.forEach(((t,i)=>{i.ph.zr(t.labelPosition).Cu(t.labelAlignment).eh(t.labelRotation).Su(t.labelOffset.x,t.labelOffset.y)}))}_h(t){return{}}Fh(t,i,s,e){return{keyValue:t,tickLevel:i,labelText:s,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}Rh(t,i){return new Ll(i,t,this.ke,this.chart.iI)}Ph(t,i,s){const e=t.Zv,r=this.chart.Ce.getHeight(this.Ln.Sh().td());return{Jv:r,Jf:jr(this.sI.Ho().Is()/2+e+r,void 0!==this.Hv?this.Hv:0,void 0!==this.Wv?this.Wv:sh),ticksInfo:i,updatedTicks:s}}Bn(){return this.chart.uiScale}Jh(t,i){return i}qh(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}}class Cy extends Il{constructor(t,i,s,e,r,n,h){super(t,{Hh:()=>{var i;if(t.eI){if("positive"===t.rI||"bipolar"===t.rI){if("after-bar"===(null===(i=t.nI)||void 0===i?void 0:i.position)){const i=this.ji.oi();return this.ji.Bi(t.eI.max,Math.min(this.chart.Ce.getHeight(this.chart.hI())+t.nI.labelMargin,.3*i))}return t.eI.max}return t.oI?jr(-1,-1e-6,t.eI.max):0}},Yh:()=>{var i;if(t.eI){if("negative"===t.rI||"bipolar"===t.rI){if("after-bar"===(null===(i=t.nI)||void 0===i?void 0:i.position)){const i=this.ji.oi();return this.ji.Bi(t.eI.min,-Math.min(this.chart.Ce.getHeight(this.chart.hI())+t.nI.labelMargin,.3*i))}return t.eI.min}return t.oI?jr(1,1e-6,t.eI.min):0}},Xh:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},h),this._t=new Ar,this.chart=t,this.Ks=n,this.ke=r,this.Ln=r.no(t.iI).ih(this.rs.barChartValueAxisTitleFont||this.rs.yAxisTitleFont).Er(this.rs.barChartValueAxisTitleFillStyle||this.rs.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ce.getHeight({x:0,y:-90})),this.hh=this.Ks.Gv([this.Ln]).de(i.effectsText),this.sI=r.Wr(t.iI).Hr(i.barChartValueAxisStrokeStyle||this.rs.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Hv=t,this.Wv=t):"object"==typeof t&&(this.Hv=t.min,this.Wv=t.max),this.chart.Ki.fe(),this}getThickness(){return{min:this.Hv,max:this.Wv}}setStrokeStyle(t){return this.sI.Hr(t),this.chart.Ki.fe(),this}getStrokeStyle(){return this.sI.Ho()}setTickStrategy(t,i){return super.jn(t,i)}Or(t){const i=this.getInterval();this.sI.Zr(this.chart.Ce.toPoint(-.5,this.Yn)).Xr(this.chart.Ce.toPoint(-.5,this.Hn)).setVisible(this.Xi);const s="logarithmic"===this.$n.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Ce.toPoint(this.chart.categoryAxis.ji.Bi(-.5,t.Zv*this.chart.Ce.aI),s),r=this.chart.Ce.toPoint(this.chart.Ce.lI,0);this.Ln.zr(e).Cu(r).setVisible(this.Xi),t.ticksInfo.forEach(((i,s)=>{s.ph.zr(i.labelPosition).Cu(i.labelAlignment).eh(i.labelRotation).Su(i.labelOffset.x,i.labelOffset.y);const e=s.ho.un;e.tickStyle!==_r&&0!==e.tickLength&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.tickStyle}),e.gridStrokeStyle!==_r&&e.gridStrokeLength>0&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionGridlineEnd]},{lineStyle:e.gridStrokeStyle})}))}_h(t){return{}}Fh(t,i,s,e,r){const n=i.un,h=this.chart.Ce.toPoint(-.5,t),o=this.chart.iI.Bi(h,this.chart.Ce.toPoint(n.getTickLength()*this.chart.Ce.aI,0)),a=this.chart.iI.Bi(h,this.chart.Ce.toPoint(n.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ce.aI,0));return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.chart.iI.Bi(o,this.chart.Ce.toPoint(n.getTickPadding()*this.chart.Ce.aI,0)),labelAlignment:this.chart.Ce.toPoint(this.chart.Ce.lI,n.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:i.un.labelRotation,positionTicklineStart:h,positionTicklineEnd:o,positionGridlineEnd:a}}Rh(t,i){return new Ll(i,t,this.ke,this.chart.iI)}Ph(t,i,s){let e=0;for(const t of this.fn.values())for(const i of t.values()){const t=i.ho.un,s=this.chart.Ce.getWidth(i.ph.Sh().td()),r=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,r)}const r=e+this.sI.Ho().Is()/2,n=this.chart.Ce.getWidth(this.Ln.Sh().td());return{Zv:r,Jv:n,Jf:jr(r+n,void 0!==this.Hv?this.Hv:0,void 0!==this.Wv?this.Wv:sh),ticksInfo:i,updatedTicks:s}}Bn(){return this.chart.iI}Jh(t,i){return"linear"===this.$n.type?Fo(t,i,this.ji):Io(t,i,this.ji)}qh(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}}class Ty extends mv{constructor(t,i,s,e,r,n,h){super(t,i,s,e),this.ss=Wn(),this.S=0,this.uI=!1,this._t=new Ar,this.chart=t,this.chart=t,this.category=r,this.subCategory=n,this.At=r,this.Lr=Bn(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,h),this.Pr=Bn(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,h),this.addEventListener("visiblechange",(()=>this.chart.cI())),this.addEventListener("dispose",(()=>{this.chart.cI(),this.chart.dI.delete(this.category),this.chart.fI.delete(this)}))}Es(t,i,s){const e=this.chart.Ki.El(i);return{cursorPosition:{pointMarker:{x:e.engineX,y:e.engineY},pointMarkerScale:this.chart.Ki.ji,resultTable:{x:e.engineX,y:e.engineY},resultTableScale:this.chart.Ki.ji},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.uI=!0,this.S=t,this.chart.cI(),this.chart.Ki.fe(),this.chart.dI.delete(this.category),this.chart.fI.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Lr="function"==typeof t?t(this.Lr):t,this.chart.cI(),this}getFillStyle(){return this.Lr}setStrokeStyle(t){return this.Pr="function"==typeof t?t(this.Pr):t,this.chart.cI(),this}getStrokeStyle(){return this.Pr}qg(){return this.Og}setEffect(t){return this.chart.setBarsEffect(t),this}Vr(){return{fill:this.Lr,lutValue:this.value}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Fy=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class Iy extends cf{constructor(t,i,s,e,r,n,h){var o,a;let l;super(t,i,s,i._g("barChart bg",0),e,i.Ki.rs.barChartBackgroundFillStyle||i.Ki.rs.chartXYBackgroundFillStyle,i.Ki.rs.barChartBackgroundStrokeStyle||i.Ki.rs.chartXYBackgroundStrokeStyle,i.Ki.rs.barChartTitleFont||i.Ki.rs.chartXYTitleFont,i.Ki.rs.barChartTitleFillStyle||i.Ki.rs.chartXYTitleFillStyle,i.Ki.rs.barChartTitleShadow||i.Ki.rs.chartXYTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.coordsBars="barChart",this.vI=Ly.Descending,this.AI=this.rs.barChartCategoryLabels,this.nI=this.rs.barChartValueLabelsAfterBars,this.gI=!0,this.zx=Yn(),this.dI=new Map,this.fI=new Map,this.rI="positive",this.yI="columns",this.pI=!0,this.mI=new Map,this.SI={speed:1},this.Jk={speed:1},this.bI=.08,this.xI=[],this.MI=new Map,this.wI=!1,this._I={left:2,right:2,top:2,bottom:2},this.kI=[],this.qa=t=>{this.iI.zt(t.engineWidth,t.engineHeight),this.wI=!0},this._t=new Ar,this.Ki.ul(jl.sa),this.CI=this.rs.barChartCornerRadius,this.Ce="horizontal"===(null==h?void 0:h.type)?By:Py,this._n.Eh("Bar Chart"),this.TI=i.AS("barChart plotting 1",0),this.FI=i.AS("barChart plotting 2",1),this.oI="logarithmic"===(null===(a=null==h?void 0:h.valueAxis)||void 0===a?void 0:a.type),this.oI?"horizontal"===this.Ce.X?(l=s.d1({scale1DConstructor:Ue,dimension:"y"}),this.iI=(new We).Di(s.d1({scale1DConstructor:Uh,dimension:"x"}),l)):(l=s.d1({scale1DConstructor:Ue,dimension:"x"}),this.iI=(new We).Di(l,s.d1({scale1DConstructor:Uh,dimension:"y"}))):(this.iI=s.d2({scaleXYConstructor:He}),l=this.Ce.getWidth(this.iI)),this.II=this.Ks.Gv(),this.Nx=new Jd((()=>this.zx.N(this.TI.Qd(this.iI).Nl(0))),((t,i,s)=>(t.Er(s.fillStyle).Dr(s.strokeStyle),i.map((i=>{const s=i.existingMember||t._a();return s.if(i.x1,i.y1,i.x2,i.y2).tf(i.rounding),this.zx.Rs(s,i.bar),i.bar.ae([s]),s})))),(()=>{this.zx.ws()}),(t=>{this.II.he(t)})),this.ip=this.ag.Rr(this.iI).Er(this.rs.barChartSeriesBackgroundFillStyle||ho).Dr(_r),this.sp=this.ag.Rr(this.iI).Er(ho).Dr(this.rs.barChartSeriesBackgroundStrokeStyle||_r).setPointerEvents(!1),super.tp(this.ip,this.sp),this.categoryAxis=new ky(this,this.rs,!1!==(null==h?void 0:h.animationsEnabled),l,this.FI,this.Ks),this.categoryAxis.setInterval(this.Ce.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const u=To(null==h?void 0:h.valueAxis);this.valueAxis=new Cy(this,this.rs,!1!==(null==h?void 0:h.animationsEnabled),this.Ce.getHeight(this.iI),this.FI,this.Ks,u.type),this.LI=new Td((()=>this.FI.no(this.iI).ro(Hn).eo(Hn).Nl(1))),this.BI=new Jd((()=>this.ag.iA(this.iI).setPointerEvents(!1)),((t,i,s)=>(t.Hr(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t._a()).eA(i[0],i[1]))))));const c=i.xS(),d=Hr(h?h.cursorBuilder:void 0,$f);this.MS=rp(this,c,d.Wm(c,this.uiScale,this.uiScale,$r,this.rs),this,"show-pointed",Dy,(()=>0)),this.addEventListener("resize",this.qa),this.wg(r,this.iI),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),void 0!==(null==h?void 0:h.legend)&&this.legend.setOptions(h.legend)}getSeries(){return this.Jy}setCornerRadius(t){return this.CI=t,this.gI=!0,this.Ki.fe(),this}getCornerRadius(){return this.CI}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=$f){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}setBarsMargin(t){return this.bI=jr(t,0,.49),this.gI=!0,this.Ki.fe(),this}getBarsMargin(){return this.bI}setBarsEffect(t){return this.II.de(t),this.Ki.fe(),this}getBarsEffect(){return this.II.ve()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.DI("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:r}=i;r.forEach(((i,r)=>{const n=t[r];s.push({category:n,subCategory:e,value:i})}))})),this.DI("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:r}=i;r.forEach(((i,r)=>{const n=t[r];s.push({category:n,subCategory:e,value:i})}))})),this.DI("groups",s),this}DI(t,i){this.Jy.length>0&&this.Ki.ul(jl.Aa),this.yI=t,this.kI=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.EI(i);const s=On(i.map((t=>t.category))),e=s.length,r=On(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((i=>{let e=this.Jy.find((t=>t.category===i.category&&t.subCategory===i.subCategory));if(!e){const n=s.indexOf(i.category),h=void 0!==i.subCategory&&r.includes(i.subCategory)?r.indexOf(i.subCategory):void 0;e=new Ty(this,this.Ky,this.rs,this.Ki.Ks,i.category,i.subCategory,Hr(h,n)),this.ep(e,"groups"===t||"stacks"===t?{legend:null}:void 0),this.mI.set(e,{category:n,valueStart:this.oI?1e-6:0,valueEnd:void 0!==i.value?i.value:0})}void 0!==i.value&&e.setValue(i.value)})),this.Jy.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.mI.delete(t))})),this.categoryAxis.setInterval(this.Ce.getWidth({x:{start:-.5,end:Math.max(e,1)-.5},y:{start:Math.max(e,1)-.5,end:-.5}})),this.eI=0===this.Jy.length?void 0:"stacks"!==t?this.Jy.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:sh,max:eh}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.eI&&(this.rI=this.eI.min>=0?"positive":this.eI.max<=0?"negative":"bipolar",("bipolar"===this.rI||"negative"===this.rI)&&this.oI))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.RI&&this.RI(),"groups"===t||"stacks"===t){const t=r.map((t=>(t=>{let i=!1;const s=new Array;return t.forEach((e=>{const r=s=>{i||(i=!0,t.forEach((t=>e!==t?t.setHighlight(s.highlight):void 0)),i=!1)};e.addEventListener("highlightchange",r),s.push((()=>e.removeEventListener("highlightchange",r)))})),t.forEach((i=>{const e=()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)};i.addEventListener("dispose",e),s.push((()=>i.removeEventListener("dispose",e)))})),()=>{s.forEach((t=>t()))}})(this.Jy.filter((i=>i.subCategory===t)))));this.RI=()=>t.forEach((t=>t()))}const n=new Set(r);for(const t of this.MI.keys())n.has(t)||(this.ge.forEach((i=>{if(i.KA()){const s=i.getEntries(),e=this.MI.get(t),r=s.find((t=>t.component===e));e&&r&&i.remove(e)}})),this.MI.delete(t));this.ge.forEach((t=>{t.KA()&&t.add(this)})),this.EI(this.Jy),this.dI.clear(),this.fI.clear(),this.gI=!0,this.Ki.fe()}setCategoryLabels(t){const i="function"==typeof t?this.AI?t(this.AI):this.AI:t;return this.AI=i?{...this.rs.barChartCategoryLabels,...i}:void 0,this.dI.clear(),this.Ki.fe(),this.wI=!0,this}getCategoryLabels(){return this.AI}setValueLabels(t){var i;const s="function"==typeof t?this.nI?t(this.nI):this.nI:t,e=(null==s?void 0:s.position)||(null===(i=this.nI)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.nI={...this.rs.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.nI={...this.rs.barChartValueLabelsInsideBars,...s}):this.nI=void 0,this.fI.clear(),this.Ki.fe(),this.wI=!0,this}getValueLabels(){return this.nI}setLabelFittingEnabled(t){return this.pI=t,this.Ki.fe(),this}getLabelFittingEnabled(){return this.pI}setLabelFittingMargins(t){return this._I="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:Hn,this.wI=!0,this.Ki.fe(),this}getLabelFittingMargins(){return this._I}getBar(t,i){if(("groups"===this.yI||"stacks"===this.yI)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.Jy.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.Jy}setSorting(t){this.vI=t;const i=this.Jy.slice();return this.Jy.length=0,this.Jy.push(...zn(this.kI.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.EI(this.Jy),this.Ki.fe(),this.gI=!0,this}getSorting(){return this.vI}setAnimationCategoryPosition(t,i=1){return this.SI=t?{speed:i}:void 0,this.Ki.fe(),this}setAnimationValues(t,i=1){return this.Jk=t?{speed:i}:void 0,this.Ki.fe(),this}translateCoordinate(t,i,s){if(s&&xo(t)&&bo(i))return super.translateCoordinate(t,i,s);const e=i;let r;if(So(t))r=this.Ki.El(t);else if(xo(t)){const i=Je(t,this.Rv,this.Ki.ji);r={engineX:i.x,engineY:i.y}}else{if(!Fy(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=Je(this.Ce.toPoint(t.iCategory,t.value),this.iI,this.Ki.ji);r={engineX:i.x,engineY:i.y}}}if(mo(e))return this.Ki.Rl(r);if("barChart"===e){const t=Je({x:r.engineX,y:r.engineY},this.Ki.ji,this.iI);return{iCategory:this.Ce.getWidth(t),value:this.Ce.getHeight(t)}}if(bo(e))return Je({x:r.engineX,y:r.engineY},this.Ki.ji,this.Rv);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}tg(){if("columns"===this.yI)return this.Jy;const t=On(zn(this.Jy.map((t=>t.subCategory))));return zn(t.map((t=>{if(this.MI.has(t))return this.MI.get(t);const i=this.Jy.filter((i=>i.subCategory===t)),s=i[0];if(!s)return;const e={Me:()=>{},getVisible:()=>s.getVisible(),setVisible:t=>{i.forEach((i=>i.setVisible(t)))},getName:()=>t,Vr:()=>s.Vr()};return this.MI.set(t,e),e})))}Or(t){var i,s,e;super.Or(t);const r=this.LI.pA(),n=this.BI.pA(),h=this.Jy.filter((t=>t.getVisible()&&t.uI)),o=On(h.map((t=>t.category))),a=On(zn(h.map((t=>t.subCategory)))),l=5e-4*t*((null===(i=this.SI)||void 0===i?void 0:i.speed)||0),u=.003*t*((null===(s=this.SI)||void 0===s?void 0:s.speed)||0),c=this.valueAxis.ji,d=c instanceof Ue?(t,i)=>{var s;return Fo(t,i,c,(null===(s=this.Jk)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return Io(t,i,c,(null===(s=this.Jk)||void 0===s?void 0:s.speed)||0)};let f;const v=null!==(e="positive"===this.rI&&this.eI?Math.min(this.eI.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.eI.max-this.eI.min):"negative"===this.rI&&this.eI?Math.max(this.eI.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.eI.max-this.eI.min):void 0)&&void 0!==e?e:0;"columns"===this.yI?f=h.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.oI?1e-6:v,valueEnd:t.value}}))):"groups"===this.yI?f=h.map((t=>{const i=o.indexOf(t.category),s=a.indexOf(t.subCategory),e=1/(a.length+2*(a.length+1)*this.bI),r=this.bI*e;return{bar:t,position:{category:i+(s-(a.length-1)/2)*(e+r),valueStart:this.oI?1e-6:v,valueEnd:t.value}}})):(f=[],o.forEach((t=>{const i=h.filter((i=>i.category===t));let s=this.oI?1e-6:0;i.forEach((i=>{f.push({bar:i,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+i.value}}),s+=i.value}))}))),f.forEach((t=>{const{bar:i,position:s}=t;let e,r,n=this.mI.get(i);void 0===n&&(n=s);const h=s.valueStart;if(this.SI&&n.category!==s.category){const t=Math.sign(s.category-n.category);e=n.category+l*t+u*(s.category-n.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Jk&&n.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-n.valueEnd);r=d(n.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-r)&&(r=s.valueEnd)}else r=s.valueEnd;this.mI.set(i,{category:e,valueStart:h,valueEnd:r}),e===s.category&&r===s.valueEnd||this.Ki.fe(!0),e===n.category&&r===n.valueEnd||(this.gI=!0)}));const A=[...this.Jy];(this.xI.length!==A.length||this.xI.some(((t,i)=>t!==A[i])))&&(this.ge.forEach((t=>t.qA(this.Jy))),this.xI=A);const g=Ud.Bg(this._n,this.kg),y=this.ge.reduce(((t,i)=>{const s=i.Sh(g,this.xo);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,y);const p=h.length>0;this.categoryAxis.Zh(),this.valueAxis.Zh();const{labelMarginBeforeCategoryAxisPixels:m,labels:S}=p?this.OI(o,a,h,r,n):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},b=this.categoryAxis.Sh({physicalAxisSize:this.categoryAxis.ji.oi(),Zv:m}),x=this.valueAxis.Sh({plotLines:n,physicalAxisSize:this.valueAxis.ji.oi(),oppositeAxisSize:this.Ce.getWidth(this.iI).oi()});this.iI.Ri([this.Zt.bottom+this.xo.bottom+y.bottom+("vertical"===this.Ce.X?b.Jf:0),this.Zt.top+this.xo.top+g+y.top+("horizontal"===this.Ce.X?x.Jf:0)]),this.iI.Ei([this.Zt.left+this.xo.left+y.left+this.Ce.getHeight({x:b.Jf,y:x.Jf}),this.Zt.right+this.xo.right+y.right]),this.TI.hS({x:this.iI.x.ni(),y:this.iI.y.ni(),width:this.iI.x.oi(),height:this.iI.y.oi()}),this.rg&&this.rg();const M={x:Math.min(this.iI.x.getInnerStart(),this.iI.x.getInnerEnd()),y:Math.min(this.iI.y.getInnerStart(),this.iI.y.getInnerEnd())},w=Math.max(this.iI.x.getInnerStart(),this.iI.x.getInnerEnd()),_=Math.max(this.iI.y.getInnerStart(),this.iI.y.getInnerEnd()),k={x:w-M.x,y:_-M.y};if(this.ip.zr(M),this.ip.zt(k),this.sp.zr(M),this.sp.zt(k),this.categoryAxis.Or(b),this.valueAxis.Or(x),super.Mg(),this.MS.Or(!1,this.Jy,void 0),(this.gI||this.wI)&&this.pI){const t=S.map((t=>{const i=t.setVisible(!0).Sh().Qc();if(0!==this._I.bottom||0!==this._I.left||0!==this._I.right||0!==this._I.top){const s=Math.sign(this.iI.x.Pt-this.iI.x.Lt),e=Math.sign(this.iI.y.Pt-this.iI.y.Lt),r=e>0?i.min.y:i.max.y,n=e>0?i.max.y:i.min.y,h=s>0?i.min.x:i.max.x,o=s>0?i.max.x:i.min.x,a=t.ji.Bi({x:h,y:r},{x:-this._I.left,y:-this._I.bottom}),l=t.ji.Bi({x:o,y:n},{x:this._I.right,y:this._I.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return i}));for(let i=0;i<S.length;i+=1){if(!S[i].getVisible())continue;const s=t[i];let e;do{e=S.findIndex(((e,r)=>r!==i&&S[r].getVisible()&&oh(s,t[r]))),e>=0&&S[e].setVisible(!1)}while(e>=0)}}if(this.gI){const t=this.Nx.pA(),i="groups"===this.yI?1/(a.length+2*(a.length+1)*this.bI):1-2*this.bI;h.forEach((s=>{const e=this.mI.get(s);if(void 0===e)return;const r=e.category-.5*i,n=e.category+.5*i,h=this.Ce.toPoint(r,e.valueStart),o=this.Ce.toPoint(n,e.valueEnd);let l;this.CI&&(l={extent:this.CI,c_x1_y2:"vertical"===this.Ce.X,c_x2_y2:"vertical"===this.Ce.X||"horizontal"===this.Ce.X,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Ce.X},"stacks"===this.yI&&s.subCategory&&a.indexOf(s.subCategory)!==a.length-1&&(l=void 0)),t.add({ss:s.ss,bar:s,x1:h.x,y1:h.y,x2:o.x,y2:o.y,rounding:l},{fillStyle:s.Lr,strokeStyle:s.Pr})})),t.finishPlot()}r.finishPlot(),n.finishPlot(),this.gI=!1,this.wI=!1,this.ge.forEach((t=>t.Or(g,this.xo)))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.FI.It(),this.TI.It(),this.MS.It(),super.dispose()}EI(t){const i=this.vI;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}OI(t,i,s,e,r){let n=0;const h=this.AI,o=this.nI,a=this.valueAxis.getInterval(),l=[];if(h&&h.labelFillStyle!==ho){const i=h.tickLength+h.labelMargin,o=this.Ce.toPoint(h.labelAlignment,1),u={Nf:t.map(((t,e)=>{const r=s.reduce(((i,s)=>s.category!==t?i:i+s.value),0),n=h.formatter(t,r);if(!n)return;const l=e;return void 0!==l?{text:n,position:this.Ce.toPoint(l,this.valueAxis.ji.Bi(a.start,-i)),alignment:o,rotation:h.labelRotation,sizePixels:this.zI(t,r)}:void 0})),Do:h.labelFont,ji:this.iI};u.Nf.forEach((t=>{t&&l.push(e.add().Eh(t.text).zr(t.position).Cu(t.alignment).eh(t.rotation).Er(h.labelFillStyle).ih(h.labelFont).Dh(h.labelShadow))})),h.tickStyle!==_r&&0!==h.tickLength&&u.Nf.forEach((t=>{if(!t)return;const i=this.Ce.getWidth(t.position);r.add({positions:[this.Ce.toPoint(i,this.valueAxis.ji.getInnerStart()),this.Ce.toPoint(i,this.valueAxis.ji.Bi(a.start,-h.tickLength))]},{lineStyle:h.tickStyle})})),n=u.Nf.reduce(((t,i)=>i?Math.max(t,this.Ce.getHeight(i.sizePixels)):t),0)+h.tickLength+h.labelMargin}if(o&&o.labelFillStyle!==ho){const r={Nf:[],Do:o.labelFont,ji:this.iI};"stacks"===this.yI&&o.displayStackedSum&&r.Nf.push(...t.map(((t,e)=>{const r=s.reduce(((i,s)=>i+(s.category===t?s.value:0)),0),n=o.formatter({chart:this,bar:void 0,category:t,value:r,subCategory:void 0});if(!n)return;const h=s.filter((i=>i.category===t)).sort(((t,s)=>{var e,r;return i.indexOf(null!==(e=t.subCategory)&&void 0!==e?e:"")-i.indexOf(null!==(r=s.subCategory)&&void 0!==r?r:"")})),a=h[h.length-1],l=this.mI.get(a);return void 0!==l?{text:n,position:this.Ce.toPoint(l.category,this.valueAxis.ji.Bi(l.valueEnd,o.labelMargin*Math.sign(l.valueEnd))),alignment:this.Ce.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:o.labelRotation,sizePixels:this.Ki.En.ln(n,o.labelFont,o.labelRotation)}:void 0}))),"after-bar"!==o.position||"stacks"===this.yI&&!o.displayStackedIndividuals?"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||r.Nf.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.mI.get(t);if(void 0===e)return;const r="bipolar"===this.rI?Math.sign(e.valueEnd):"negative"===this.rI?-1:1,n=this.Ce.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*r:"inside-bar-centered"===o.position?0:-1*r);return{text:s,position:this.Ce.toPoint(e.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.ji.Bi(e.valueEnd,-o.labelMargin*r):"inside-bar-centered"===o.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ji.Bi(e.valueStart,o.labelMargin*r)),alignment:n,rotation:o.labelRotation,sizePixels:this.VI(t)}}))):r.Nf.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.mI.get(t);return void 0!==e?{text:s,position:this.Ce.toPoint(e.category,this.valueAxis.ji.Bi(e.valueEnd,o.labelMargin*Math.sign(e.valueEnd))),alignment:this.Ce.toPoint(o.labelAlignment,-1*Math.sign(e.valueEnd)),rotation:o.labelRotation,sizePixels:this.VI(t)}:void 0}))),r&&r.Nf.forEach((t=>{t&&l.push(e.add().Eh(t.text).zr(t.position).Cu(t.alignment).eh(t.rotation).Er(o.labelFillStyle).ih(o.labelFont).Dh(o.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:n,labels:l}}zI(t,i){if(!this.AI||this.AI.labelFillStyle===ho)return{x:0,y:0};const s=this.dI.get(t);if(s)return s;const e=this.AI.formatter(t,i),r=this.Ki.En.ln(e,this.AI.labelFont,this.AI.labelRotation);return r.isEstimate?this.Ki.fe(!0):this.dI.set(t,r),r}VI(t){if(!this.nI||this.nI.labelFillStyle===ho)return{x:0,y:0};const i=this.fI.get(t);if(i)return i;const s=this.Ki.En.ln(this.nI.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.nI.labelFont,this.nI.labelRotation);return s.isEstimate?this.Ki.fe(!0):this.fI.set(t,s),s}hI(){return this.Jy.reduce(((t,i)=>{const s=this.VI(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}cI(){this.gI=!0,this.Ki.fe()}Dt(){return super.Dt(),this.iI.Dt(),this}Et(){return super.Et(),this.iI.Et(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Ly={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Py={...zc,X:"vertical",aI:-1,lI:1},By={...Vc,X:"horizontal",aI:1,lI:-1},Dy=(t,i,s)=>{const e=[[{component:i.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],r=t.valueAxis.getTitle();return r&&e.push([r]),i.subCategory?e.push([i.subCategory,"",{text:Co(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:Co(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},Ey=(t,i)=>Math.abs(t)+Math.abs(i);function Ry(t,i){const s=t.reduce(Ey,0),e=(r=t,Math.max(...r.map((t=>t))));var r;const n=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*n))}const Oy=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},zy=({data:t,dimensions:i})=>{const{x:s,y:e,width:r,height:n}=i,h=t.map((t=>t.value)).reduce(Ey,0),o=t.map((t=>t.animatedValue)).reduce(Ey,0),a=t.map((t=>t.animatedValue*n*r/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:h,animatedValue:o,x:s,y:e,width:r,height:n,nodeIndex:-1,userNode:{name:"Main Rectangle",value:h}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else Ny(c,Oy(d).value,t,d);return d.children},Vy=(t,i,s,e,r)=>{const n=t.reduce(Ey,0)/i;t.forEach(((t,i)=>{const h=Math.abs(t)/n,{x:o,y:a,children:l}=r,u=e[l.length],c={...u,x:o,y:a,width:s?n:h,height:s?h:n,userNode:{...u.userNode,value:u.value}};s?r.y-=h:r.x+=h,l.push(c)})),s?(r.x+=n,r.y+=i,r.width-=n):(r.x-=i,r.y-=n,r.height-=n)},Ny=(t,i,s,e)=>{const r=[{children:t,width:i,row:[]}];for(;r.length>0;){const t=r.pop();if(!t)continue;const{children:i,width:n,row:h}=t;let o=0;const a=[...h];for(;o<i.length;){const t=[...a,i[o]],h=Ry(a,n),l=Ry(t,n);if(!(0===a.length||h>l)){Vy(a,n,Oy(e).vertical,s,e),r.push({children:i.slice(o),width:Oy(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&Vy(a,n,Oy(e).vertical,s,e)}};class Gy extends $d{constructor(i,s,e,r,n,h,o){var a;if(super(i,s,e,s._g("treeMapChart bg",0),r,s.Ki.rs.treeMapChartBackgroundFillStyle||s.Ki.rs.chartXYSeriesBackgroundFillStyle,s.Ki.rs.treeMapChartBackgroundStrokeStyle||s.Ki.rs.chartXYBackgroundStrokeStyle,s.Ki.rs.treeMapChartTitleFont||s.Ki.rs.chartXYTitleFont,s.Ki.rs.treeMapChartTitleFillStyle||s.Ki.rs.chartXYTitleFillStyle,s.Ki.rs.treeMapChartTitleShadow||s.Ki.rs.chartXYTitleShadow,o,null===(a=null==h?void 0:h.legend)||void 0===a?void 0:a.customLegend),this.NI=new Map,this.GI=[],this.$I={},this.UI=u([]),this.Jk={speed:1},this.jI=sh,this.YI="Go Back",this.HI=[],this.WI=this.rs.treeMapChartPathLabelFillStyle||this.rs.uiTextFillStyle,this.XI=this.rs.treeMapChartPathLabelFont||this.rs.uiTextFont,this.ZI=this.rs.treeMapChartLabelHeaderFillStyle||this.rs.uiTextFillStyle,this.JI=this.rs.treeMapChartLabelHeaderFont||this.rs.uiTextFont,this.QI=this.rs.treeMapChartLabelFillStyle||this.rs.uiTextFillStyle,this.KI=this.rs.treeMapChartLabelFont||this.rs.uiTextFont,this.GS=!0,this.BA=!1,this.qI=this.rs.treeMapChartParentColor||_e,this.tL=this.rs.treeMapChartNodeStrokeStyle||this.rs.uiBackgroundStrokeStyle,this.iL=Hn,this.Ox=this.rs.treeMapChartCornerRadius,this.US=()=>{this.Ki.fe(),this.BA=!0},this.sL=(i,s)=>{var e;const{collectionMember:r}=s,n=this.eL(r);n&&(this.nb=this.rL(n,i),this.GS&&this.Ki.ee.pe(r,!0),(null===(e=this.getUserInteractions().drillDown)||void 0===e?void 0:e.click)&&this.engine.setMouseStyle(t.MouseStyles.Point),this.Ki.fe())},this.nL=(i,s)=>{const{collectionMember:e}=s;this.eL(e)&&(this.nb=void 0,this.GS&&this.Ki.ee.pe(e,!1),this.engine.setMouseStyle(t.MouseStyles.Default),this.Ki.fe())},this.hL=(i,s)=>{var e;const{collectionMember:r}=s,n=this.eL(r);n&&(this.nb=this.rL(n,i),this.GS&&this.Ki.ee.pe(r,!0),(null===(e=this.getUserInteractions().drillDown)||void 0===e?void 0:e.click)&&this.engine.setMouseStyle(t.MouseStyles.Point),this.Ki.fe())},this.oL=(t,i)=>{var s;if(t.defaultPrevented)return;const{collectionMember:e}=i,r=this.eL(e);if(r){if(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click){const i=(null==r?void 0:r.children.length)?r:r.parentID?this.$I[r.parentID]:void 0;i&&(this.UI._([i]),this.nb=void 0,this._t.kt("viewchange",{nodes:this.UI.C().map((t=>t.userNode))}),this.BA=!0),t&&un(t)}this.Ki.fe()}},this.aL=t=>{const i=this.$I[this.HI[t].id]?[this.$I[this.HI[t].id]]:this.GI;this.UI._(i),this._t.kt("viewchange",{nodes:i.map((t=>t.userNode))}),this.BA=!0,this.Ki.fe()},this.nodes=new Ar,this._t=new Ar,this.rs.treeMapChartNodeColors)this.lL=this.rs.treeMapChartNodeColors;else{const t=this.rs.pointSeriesFillStyle,i=t=>co(t)?t.getColor():_e;this.lL="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.Ki.ul(jl.pa),this.uC=s.vS("TreeMapChart plotting",0),this.cC=s.vS("TreeMap UI plotting",1),this.addEventListener("resize",this.US),this._n.Eh("TreeMap Chart");const l=s.xS(),c=Hr(h?h.cursorBuilder:void 0,jf);this.MS=rp(this,l,c.Wm(l,this.uiScale,this.uiScale,$r,this.rs),void 0,"show-pointed",$y,(()=>0)),this.uL=this.Ks.Gv(),this.wg(n,this.uiScale),this.Yf=this.uC.Qd(this.Rv).Er(new fo).Dr(this.tL),this.cL=this.Ki.ee.wa(this,{animationEnabled:!1!==(null==h?void 0:h.animationsEnabled)}),this.dL=new Td((()=>this.cC.no(this.Rv).setPointerEvents(!1))),this.fL=new Td((()=>this.cC.no(this.uiScale))),this.Yf.setPointerEvents(!0),this.nodes._s(this.Yf,(t=>{const i=this.eL(t);if(i)return i.userNode})),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.Yf.addEventListener("pointerenter",this.sL),this.Yf.addEventListener("pointerleave",this.nL),this.Yf.addEventListener("click",this.oL),this.Yf.addEventListener("pointermove",this.hL),void 0!==(null==h?void 0:h.legend)&&this.legend.setOptions(h.legend)}setCornerRadius(t){return this.Ox=t,this.BA=!0,this.Ki.fe(),this}getCornerRadius(){return this.Ox}setData(t){t=Array.isArray(t)?t.slice():[t];const{vL:i}=(()=>{let t=0;return{vL:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),r=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:n,parent:h}=i;t+=1;const o={id:t,parentID:null==h?void 0:h.id,name:n.name,value:Number(n.value)||0,animatedValue:Number(n.value)||0,children:[],nodeIndex:h?h.nodeIndex:-1,userNode:n};h?h.children.push(o):r.push(o),null===(s=n.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const n=t=>{t.children.forEach(n),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};r.forEach(n);const h=1===i.length?r[0].children:r;return h.sort(((t,i)=>i.animatedValue-t.animatedValue)),h.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),r}}})(),s=i(t);return s.forEach((t=>{const i=this.$I[t.id];i&&this.AL(t,i)})),this.nb=void 0,this.UI._(s),this.GI=s,this.$I=this.gL(s),this.BA=!0,this.Ki.fe(),this}setAnimationValues(t,i=1){return this.Jk=t?{speed:i}:void 0,this.Ki.fe(),this}setInitPathButtonText(t){return this.YI=t,this.BA=!0,this.Ki.fe(),this}setDisplayedLevelsCount(t){return this.jI=t,this.BA=!0,this.Ki.fe(),this}setDrillDownNode(t){var i,s;if(this.nb=void 0,void 0===t)this.UI._(this.GI);else{const e=[...this.GI];for(;e.length>0;){const r=e.pop();if(r){if(void 0!==r.value&&r.userNode===t||r.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.$I[r.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=r.children.length?r:r.parentID?this.$I[r.parentID]:this.GI[0];this.UI._([t]);break}if(r.children)for(let t=r.children.length-1;t>=0;t-=1)e.push(r.children[t])}}}return this._t.kt("viewchange",{nodes:this.UI.C().map((t=>t.userNode))}),this.BA=!0,this.Ki.fe(),this}setNodeColoring(t){return t instanceof Array?(this.Yf.Er(new fo),this.lL=t):(this.Yf.Er(t),this.ge.forEach((t=>{t.KA()&&t.add(this)}))),this.ge.forEach((t=>t.ye())),this.BA=!0,this.Ki.fe(),this}setParentNodeColor(t){return this.qI=t,this.BA=!0,this.Ki.fe(),this}setPathLabelFillStyle(t){return this.WI="function"==typeof t?t(this.WI):t,this.BA=!0,this.Ki.fe(),this}getPathLabelFillStyle(){return this.WI}setPathLabelFont(t){return Fe(t)?this.XI=t:this.XI=t(this.XI),this.BA=!0,this.Ki.fe(),this}getPathLabelFont(){return this.XI}setHeaderFont(t){return Fe(t)?this.JI=t:this.JI=t(this.JI),this.BA=!0,this.Ki.fe(),this}getHeaderFont(){return this.JI}setHeaderFillStyle(t){return this.ZI="function"==typeof t?t(this.ZI):t,this.BA=!0,this.Ki.fe(),this}getHeaderFillStyle(){return this.ZI}setLabelFont(t){return Fe(t)?this.KI=t:this.KI=t(this.KI),this.BA=!0,this.Ki.fe(),this}getLabelFont(){return this.KI}setLabelFillStyle(t){return this.QI="function"==typeof t?t(this.QI):t,this.BA=!0,this.Ki.fe(),this}getLabelFillStyle(){return this.QI}setNodeBorderStyle(t){return this.Yf.Dr(t),this.BA=!0,this.Ki.fe(),this}getNodeBorderStyle(){return this.Yf.Il()}setNodeEffect(t){return this.uL.de(t),this.Ki.fe(),this}getNodeEffect(){return this.uL.ve()}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=jf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}setAnimationHighlight(t){return this.cL.Ca(t),this}getAnimationHighlight(){return this.cL.Ta()}setHighlightOnHover(t){return this.GS=t,this}getHighlightOnHover(){return this.GS}rL(t,i){const s=this.Ki.El(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.Ki.ji,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.Ki.ji},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}tg(){return[this]}Or(i){super.Or(i),super.Mg();const s=Ud.Bg(this._n,this.kg),e=this.ge.reduce(((t,i)=>{const e=i.Sh(s,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});if(e.bottom===this.iL.bottom&&e.right===this.iL.right&&e.top===this.iL.top&&e.left===this.iL.left||(this.BA=!0,this.iL=e),Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,e),this.BA&&this.UI.C().length){this.Yf.ws(),this.NI.clear(),this.cL.ka(),this.gn&&this.yL(i);const r=zy({data:this.UI.C(),dimensions:{x:0+this.xo.left+e.left,y:this.Rv.y.getInnerEnd()-s-this.xo.top-e.top,width:this.Rv.x.getInnerEnd()-this.xo.right-this.xo.left-e.right-e.left,height:this.Rv.y.getInnerEnd()-s-this.xo.top-this.xo.bottom-e.top-e.bottom}}),n=this.dL.pA();this.pL(r,n),n.finishPlot(),this.mL(),this.GI!==this.UI.C()&&this.GI.length>1&&this.HI.unshift({name:this.YI,id:0});let h=0;const o=this.fL.pA(),a=this.XI;this.HI.forEach(((i,s)=>{const e=o.add(),r=this.Ki.En.ln(i.name,a,0);let n;e.Eh(` ${i.name}`).ih(a).zr({x:0,y:100}).Cu({x:-1,y:1}).eo({left:this.xo.left+h,top:this.xo.top,right:0,bottom:0}).Er(this.WI),e.addEventListener("click",(()=>this.aL(s))),e.addEventListener("pointerenter",(()=>{n=this.engine.setMouseStyle(t.MouseStyles.Point,n)})),e.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(n)})),h+=r.x+25})),o.finishPlot(),this.UI.C().every((t=>t.value===t.animatedValue))?this.BA=!1:this.Ki.fe(!0)}return this.MS.Or(!1,[],void 0,{explicitTarget:this.nb}),this.ge.forEach((t=>t.Or(s,this.xo))),this}dispose(){return this.cC.It(),this.uC.It(),this.MS.It(),this.Yf.dispose(),this.NI.clear(),this.dL.xA(),this.fL.xA(),super.dispose()}Dt(){return super.Dt(),this}Et(){return super.Et(),this}Me(){return In(this.Yf.Qn(),this.Yf.ls())}pL(t,i,s=!1,e=0){const r=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e}))),n=this.Ox?{extent:this.Ox,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;r.length>0;){const t=r.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:h}=t,{x:o,y:a,height:l,width:u,children:c,animatedValue:d,name:f,nodeIndex:v}=s,A=this.lL,g=0===e&&1===this.UI.C().length?this.qI:A[v%A.length],y=this.Yf._a().if(o,a,o+u,a-l).SL(g.setA(g.getA()*((null!=h?h:255)/255))).rb(d).tf(n);this.NI.set(y,s),this.cL._a(y,(t=>y.vs(t)));const p=o+5,m=a+25+5,S=Math.max(l-25-5,0),b=Math.max(u-5-5,0);if(c&&c.length&&e<this.jI&&b>15&&S>15){const t=zy({data:c,dimensions:{x:b>0?p:o,y:S>0?a-25:m,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(255-(c.length>7?50:150))/(c.length-1),o=1===s.id&&1===this.GI.length||this.GI===this.UI.C()?255:h?h/(e+1):255-i*n;r.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.UI.C().length?this.ZI:this.QI,M=0===e?this.JI:this.KI,w=this.bL(f,u-25,M),_=this.Ki.En.ln(w,M,0),k=i.add();u-25>_.x&&l>25?k.Eh(w).zr({x:o+5,y:a-2.5}).Cu({x:-1,y:1}).Er(x).ih(M):k.Eh("")}}gL(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}eL(t){if(!this.BA&&t)return this.NI.get(t)}mL(){this.HI=[];const t=this.UI.C()[0].id;let i=this.$I[t].parentID;for(;i;)this.HI.push({name:this.$I[i].name,id:i}),i=this.$I[i].parentID;return this.HI.reverse()}bL(t,i,s){let e=this.Ki.En.ln(t,s,0).x;if(e<=i)return t;const r=t.split(" ");let n=t;for(;r.length>1&&e>i;)r.pop(),n=`${r.join(" ")}...`,e=this.Ki.En.ln(n,s,0).x;if(e>i)for(n=`${r[0]}...`,e=this.Ki.En.ln(n,s,0).x;n.length>3&&e>i;)n=`${n.substring(0,n.length-4)}...`,e=this.Ki.En.ln(n,s,0).x;return n.length<=3&&e>i?"":n}yL(t){var i;const s=[...this.GI];for(;s.length>0;){const e=s.pop();if(!e)continue;const r=e.value-e.animatedValue;if(Math.abs(r)<.0015*e.value||void 0===this.Jk)e.animatedValue=e.value;else{const s=r/255*((null===(i=this.Jk)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(r>0&&e.animatedValue>e.value||r<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}AL(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.gn?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const r=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const n=r.get(t.id);s.push({current:t,previous:n||e})}))}}setUserInteractions(t){return this.Ur=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return Er({drillDown:{click:!0}},this.Ur)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const $y=(t,i,s)=>[[{text:i.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class Uy extends $d{constructor(t,i,s,e,r,n,h){var o;super(t,i,s,i._g("gaugeChart bg",0),e,i.Ki.rs.gaugeChartBackgroundFillStyle,i.Ki.rs.gaugeChartBackgroundStrokeStyle,i.Ki.rs.gaugeChartTitleFont,i.Ki.rs.gaugeChartTitleFillStyle,i.Ki.rs.gaugeChartTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.xc=this.rs.gaugeChartStartAngle,this.Mc=this.rs.gaugeChartEndAngle,this.xL={start:0,end:100},this.S=0,this.ML=[],this.wL=this.rs.gaugeChartBarThickness,this._L=this.rs.gaugeChartValueIndicatorThickness,this.kL=this.rs.gaugeChartNeedleLength,this.CL=this.rs.gaugeChartNeedleThickness,this.TL=this.rs.gaugeChartNeedleFillStyle,this.FL=this.rs.gaugeChartNeedleStrokeStyle,this.qd=this.rs.gaugeChartRoundedEdges,this.IL=!0,this.LL=!0,this.PL=!0,this.BL=[],this.DL=[],this.EL=!0,this.RL=!0,this.Wk=this.S,this.OL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.zL=this.rs.gaugeChartBarGradient,this.VL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.NL=this.rs.gaugeChartTickFont,this.GL=this.rs.gaugeChartValueLabelFont,this.$L=this.rs.gaugeChartValueLabelFillStyle,this.UL=this.rs.gaugeChartUnitLabelFont,this.jL=this.rs.gaugeChartUnitLabelFillStyle,this.YL=this.rs.gaugeChartTickFillStyle,this.HL=this.rs.gaugeChartBarColor,this.WL=this.rs.gaugeChartGlowColor,this.XL=this.rs.gaugeChartGlowColor.getA(),this.ZL=1,this.JL=1,this.QL=this.rs.gaugeChartNeedleAlignment,this.KL=!1,this.qL=this.rs.gaugeChartGapBetweenBarAndValueIndicators,this.tP=this.rs.gaugeChartBarStrokeStyle,this.iL=Hn,this.iP=!1,this._t=new Ar,this.Ki.ul(jl.ra),this._n.Eh("Gauge Chart"),this.wg(r,this.Rv),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.sP=this.HL,this.eP=this.WL,this.rP=me(0,0,0,0),this.nP=this.Ks.Gv(),this.hP=this.Ks.Gv().de(this.rs.effectsText),this.oP=this.ag.od(this.Rv).Dr(this.tP).setPointerEvents(!1),this.aP=this.ag.ef(this.Rv).Pc(0).Xr(360).Rc(0).Dr(_r).setPointerEvents(!1),this.lP=this.Tg.Wr(this.Rv).Hr(this.rs.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.uP=this.Tg.Wr(this.Rv).Hr(new oa({thickness:this.CL,fillStyle:this.TL})).setPointerEvents(!1),this.cP=this.Tg.no(this.Rv).ih(this.GL).Er(this.$L).setPointerEvents(!1),this.Hf=this.Tg.no(this.Rv).ih(this.UL).Er(this.jL).Eh("").setPointerEvents(!1),this.dP=this.ag.no(this.Rv).ih(this.NL).Er(this.YL).setPointerEvents(!1),this.fP=this.ag.no(this.Rv).ih(this.NL).Er(this.YL).setPointerEvents(!1),this.nP.he([this.oP]),this.hP.he([this.cP,this.Hf,this.dP,this.fP]),this.vP(),this.addEventListener("resize",(()=>{this.KL=!0}));const a={backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(a)}vP(){this.uP.Hr((t=>t.setThickness(this.CL))),this.lP.Hr((t=>t.setThickness(2*this.FL.getThickness()+this.CL)))}setAnimationsEnabled(t){return this.gn=t,this.RL=t,this.EL=t,this}setInterval(t,i){return this.xL={start:t,end:i},this.KL=!0,this.Ki.fe(),this}getInterval(){return this.xL}setTickFillStyle(t){return this.YL="function"==typeof t?t(this.YL):t,this.DL.forEach((i=>{i.start.Er(t),i.end.Er(t)})),this.dP.Er(t),this.fP.Er(t),this.KL=!0,this.Ki.fe(),this}getTickFillStyle(){return this.YL}setTickFont(t){return this.NL="function"==typeof t?t(this.NL):t,this.DL.forEach((i=>{i.start.ih(t),i.end.ih(t)})),this.dP.ih(t),this.fP.ih(t),this.KL=!0,this.Ki.fe(),this}getTickFont(){return this.NL}setTickFormatter(t){return this.OL=t,this.KL=!0,this.Ki.fe(),this}getTickFormatter(){return this.OL}setValueLabelFillStyle(t){return this.$L="function"==typeof t?t(this.$L):t,this.cP.Er(t),this.KL=!0,this.Ki.fe(),this}getValueLabelFillStyle(){return this.cP.Qn()}setValueLabelFont(t){return this.GL="function"==typeof t?t(this.GL):t,this.cP.ih(t),this.KL=!0,this.Ki.fe(),this}getValueLabelFont(){return this.cP.th()}setValueFormatter(t){return this.VL="string"==typeof t?i=>t:t,this.KL=!0,this.Ki.fe(),this}getValueLabel(){return this.cP.zh()||this.VL}setUnitLabelFillStyle(t){return this.jL="function"==typeof t?t(this.jL):t,this.Hf.Er(t),this.KL=!0,this.Ki.fe(),this}getUnitLabelFillStyle(){return this.Hf.Qn()}setUnitLabelFont(t){return this.UL="function"==typeof t?t(this.UL):t,this.Hf.ih(t),this.KL=!0,this.Ki.fe(),this}getUnitLabelFont(){return this.Hf.th()}setUnitLabel(t){return this.Hf.Eh(t),this.KL=!0,this.Ki.fe(),this}getUnitLabel(){return this.Hf.zh()}setNeedleFillStyle(t){return this.TL="function"==typeof t?t(this.TL):t,this.uP.Hr((i=>i.setFillStyle(t))),this.KL=!0,this.Ki.fe(),this}getNeedleFillStyle(){return this.uP.Ho().getFillStyle()}setNeedleThickness(t){return this.CL=t,this.vP(),this.KL=!0,this.Ki.fe(),this}getNeedleThickness(){return this.CL}setNeedleStrokeStyle(t){return this.FL="function"==typeof t?t(this.FL):t,this.lP.Hr(t),this.vP(),this.KL=!0,this.Ki.fe(),this}getNeedleStrokeStyle(){return this.lP.Ho()}setNeedleLength(t){return this.kL=t,this.KL=!0,this.Ki.fe(),this}getNeedleLength(){return this.kL}setBarColor(t){return this.HL=t,this.KL=!0,this.Ki.fe(),this}getBarColor(){return this.sP}setBarGradient(t){return this.zL=t,this.KL=!0,this.Ki.fe(),this}getBarGradient(){return this.zL}setBarStrokeStyle(t){return this.tP="function"==typeof t?t(this.tP):t,this.oP.Dr(t),this.KL=!0,this.Ki.fe(),this}getBarStrokeStyle(){return this.oP.Il()}setBarThickness(t){return this.wL=t,this.KL=!0,this.Ki.fe(),this}getBarThickness(){return this.wL}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.xc=t,this.Mc=i,this.KL=!0,this.Ki.fe(),this}getAngleInterval(){return{start:this.xc,end:this.Mc}}setValue(t){return this.iP&&this.Ki.ul(jl.Aa),this.iP=!0,this.S=t,this.EL||(this.Wk=this.S),this.KL=!0,this.Ki.fe(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.EL=t,this.ZL=Math.max(0,i),this.KL=!0,this.Ki.fe(),this}setColorAnimation(t,i=1){return this.RL=t,this.JL=Math.max(0,i),this.KL=!0,this.Ki.fe(),this}setRoundedEdges(t){return this.qd=t,this.KL=!0,this.Ki.fe(),this}getRoundedEdges(){return this.qd}setValueIndicators(t){return this.ML=t,this.BL.forEach((t=>{t.dispose()})),this.BL.length=0,this.DL.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.DL.length=0,this.ML.forEach((t=>{const i=new uo({color:t.color}),s=this.ag.od(this.Rv).Dr(_r).Er(i).setPointerEvents(!1);this.BL.push(s);const e=this.ag.no(this.Rv).ih(this.NL).Er(this.YL).setPointerEvents(!1),r=this.ag.no(this.Rv).ih(this.NL).Er(this.YL).setPointerEvents(!1);this.DL.push({start:e,end:r})})),this.nP.he([this.oP,...this.BL]),this.hP.he([this.cP,this.Hf,this.dP,this.fP,...this.DL.map((t=>[t.start,t.end])).flat()]),this.KL=!0,this.Ki.fe(),this}getValueIndicators(){return this.ML}setValueIndicatorThickness(t){return this._L=t,this.KL=!0,this.Ki.fe(),this}getValueIndicatorThickness(){return this._L}setAutomaticBarColoring(t){return this.PL=!!t,this.KL=!0,this.Ki.fe(),this}getAutomaticBarColoring(){return this.PL}setGlowColor(t){return void 0===t?(this.IL=!1,this.eP=void 0):"object"==typeof t&&"auto"in t?(this.LL=t.auto,t.auto&&(this.eP=void 0),void 0!==t.alpha&&(this.XL=t.alpha),this.IL=!0):(this.eP=t,this.XL=t.getA(),this.LL=!1,this.IL=!0),this.KL=!0,this.Ki.fe(),this}getAutomaticGlowColoring(){return this.LL}setNeedleAlignment(t){return this.QL=t,this.KL=!0,this.Ki.fe(),this}getNeedleAlignment(){return this.QL}setGapBetweenBarAndValueIndicators(t){return this.qL=t,this.KL=!0,this.Ki.fe(),this}getGapBetweenBarAndValueIndicators(){return this.qL}setBarEffect(t){return this.nP.de(t),this.Ki.fe(),this}getBarEffect(){return this.nP.ve()}setLabelEffect(t){return this.hP.de(t),this.Ki.fe(),this}getLabelEffect(){return this.hP.ve()}Or(i){var s;if(super.Or(i),super.Mg(),this.Wk!==this.S){if(this.EL){const t=5e-4*i,s=.003*i,e=Math.sign(this.S-this.Wk);this.Wk=this.Wk+t*e+s*this.ZL*(this.S-this.Wk),e!==Math.sign(this.S-this.Wk)?this.Wk=this.S:this.Ki.fe(!0)}else this.Wk=this.S;this.KL=!0}let e=this.ML.find((t=>this.Wk>=t.start&&this.Wk<=t.end));if(e||(this.Wk<this.xL.start?e=this.ML.find((t=>t.start===this.xL.start)):this.Wk>this.xL.end&&(e=this.ML.find((t=>t.end===this.xL.end)))),this.sP=this.PL&&e?e.color:this.HL,this.RL){if(this.rP!==this.sP){const t=this.rP.getR(),s=this.rP.getG(),e=this.rP.getB(),r=this.sP.getR(),n=this.sP.getG(),h=this.sP.getB(),o=Math.sign(r-t),a=Math.sign(n-s),l=Math.sign(h-e),u=.005*i,c=.003*i;this.rP=me(t+u*o+c*this.JL*(r-t),s+u*a+c*this.JL*(n-s),e+u*l+c*this.JL*(h-e));const d=Math.abs(r-this.rP.getR()),f=Math.abs(n-this.rP.getG()),v=Math.abs(h-this.rP.getB());d<1&&f<1&&v<1?this.rP=this.sP:this.Ki.fe(!0),this.KL=!0}}else this.rP=this.sP;const r=Ud.Bg(this._n,this.kg),n=this.ge.reduce(((t,i)=>{const s=i.Sh(r,this.xo);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(n.right===this.iL.right&&n.bottom===this.iL.bottom&&n.top===this.iL.top&&n.left===this.iL.left||(this.KL=!0,this.iL=n),this.KL){let i=sh,h=eh,o=sh,a=eh;if(new Array(100).fill(0).forEach(((t,s,e)=>{const r=this.xc+s/e.length*(this.Mc-this.xc),n=Math.sin(r*Math.PI/180),l=Math.cos(r*Math.PI/180);n<i&&(i=n),n>h&&(h=n),l<o&&(o=l),l>a&&(a=l)})),this.zL?this.oP.Er(new De({stops:[{offset:0,color:Se("#000000")},{offset:1,color:this.rP}],position:{x:.5,y:.5}})):this.oP.Er(new uo({color:this.rP})),this.IL){const i=this.LL&&e?this.rP:null!==(s=this.eP)&&void 0!==s?s:this.WL;this.aP.Er(new De({stops:[{offset:0,color:i.setA(this.XL)},{offset:1,color:i.setA(0)}],position:{x:.5,y:.5},extent:t.GradientExtent.farthestSide}))}else this.aP.Er(ho);const l=this.OL(this.xL.start),u=this.OL(this.xL.end);let c=0,d=0;const f=this.Ki.En.ln(l,this.dP.th(),this.dP.rh()),v=this.Ki.En.ln(u,this.fP.th(),this.fP.rh());f.x>c&&(c=f.x),f.y>d&&(d=f.y),v.x>c&&(c=v.x),v.y>d&&(d=v.y),this.DL.forEach(((t,i)=>{if(i>=this.ML.length)return;const s=this.ML[i],e=this.OL(s.start),r=this.OL(s.end),n=this.Ki.En.ln(e,t.start.th(),t.start.rh()),h=this.Ki.En.ln(r,t.end.th(),t.end.rh());n.x>c&&(c=n.x),n.y>d&&(d=n.y),h.x>c&&(c=h.x),h.y>d&&(d=h.y)}));const A=this.ML.length>0?this._L:0,g=this.Rv.getInnerIntervalPixels();Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,n);const y={x:g.x-(this.xo.left+this.xo.right),y:g.y-(this.xo.bottom+this.xo.top)-r},p={x:y.x-n.left-n.right,y:y.y-n.top-n.bottom},m={x:this.xo.left+(y.x+n.left-n.right)/2,y:this.xo.bottom+(y.y+n.bottom-n.top)/2},S=A+2*this.qL+this.wL/2,b=c+S,x=d+S,M=x+r,w=p.y-(M+x),_=p.x-(b+b),k=Math.max(0,w<_?w:_),C=.5*k,T=.5*C,F=(i+h)*T,I=(o+a)*T,L={x:m.x-I,y:m.y-F},P=k>0;if(this.oP.setVisible(P),this.BL.forEach((t=>t.setVisible(P))),this.uP.setVisible(P),this.lP.setVisible(P),this.aP.setVisible(P),this.Hf.setVisible(P),this.cP.setVisible(P),this.dP.setVisible(P),this.fP.setVisible(P),this.DL.forEach((t=>{t.start.setVisible(P),t.end.setVisible(P)})),!P)return;const B={x:m.x-.5*I,y:m.y-.5*F};this.aP.zr(m).Bc(.5*Math.min(p.x,g.y)),this.cP.zr(B).Eh(this.VL(this.Wk));let D=this.cP.td(),E=this.Hf.td();0===D.y&&(D=this.Ki.En.ln(this.cP.zh(),this.cP.th(),this.cP.rh())),0===E.y&&(E=this.Ki.En.ln(this.Hf.zh(),this.Hf.th(),this.Hf.rh())),this.Hf.zr({x:B.x,y:B.y-D.y-E.y/4});const R=Hy(this.xL,this.xc,this.Mc,this.Wk,L,C+this.QL*(this.kL/2+this.wL/2)),O=R.angle*(Math.PI/180),z=.5*this.kL,V=Math.cos(O),N=Math.sin(O);this.uP.Zr({x:R.x+z*V,y:R.y+z*N}).Xr({x:R.x-z*V,y:R.y-z*N}),this.lP.Zr({x:R.x+z*V,y:R.y+z*N}).Xr({x:R.x-z*V,y:R.y-z*N});const G=jy(L,C,this.xc,this.Mc,this.wL,this.qd,!1,!1);this.oP.Nu(G).ds({min:{x:L.x-C,y:L.y-C},max:{x:L.x+C,y:L.y+C}});const $=L.y+C,U=L.y-C,j=L.x+C,Y=L.x-C,[H,W]=this.xL.start<this.xL.end?[this.xL.start,this.xL.end]:[this.xL.end,this.xL.start],X=C+.5*this.wL+A/2+this.qL,Z=X+A/2;this.ML.forEach(((t,i)=>{var s,e;const r=t.start>=H&&t.end<=W;this.BL[i].setVisible(r),this.DL[i].start.setVisible(r),this.DL[i].end.setVisible(r);const n=Hy(this.xL,this.xc,this.Mc,t.start,L,Z),h=Hy(this.xL,this.xc,this.Mc,t.end,L,Z),o=jy(L,X,n.angle,h.angle,this._L,this.qd,!(0===i),!(i===this.ML.length-1));this.BL[i].Nu(o);const a=this.xL.start===t.start||this.xL.end===t.start,l=this.xL.start===t.end||this.xL.end===t.end||this.ML.some((i=>i.start===t.end&&i!==t));this.DL[i].start.zr({x:n.x,y:n.y}).Cu({x:Math.min(1,Math.max(-1,2*(n.x-j)/(Y-j)-1)),y:Math.min(1,Math.max(-1,2*(n.y-$)/(U-$)-1))}).Eh(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.OL(t.start)),this.DL[i].end.zr({x:h.x,y:h.y}).Cu({x:Math.min(1,Math.max(-1,2*(h.x-j)/(Y-j)-1)),y:Math.min(1,Math.max(-1,2*(h.y-$)/(U-$)-1))}).Eh(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.OL(t.end))}));const J=this.ML.some((t=>t.start<t.end?this.xL.start>=t.start&&this.xL.start<=t.end:this.xL.start<=t.start&&this.xL.start>=t.end)),Q=Hy(this.xL,this.xc,this.Mc,this.xL.start,L,J?Z:X-this.qL);this.dP.zr({x:Q.x,y:Q.y}).Cu({x:Math.min(1,Math.max(-1,2*(Q.x-j)/(Y-j)-1)),y:Math.min(1,Math.max(-1,2*(Q.y-$)/(U-$)-1))}).Eh(l);const K=this.ML.some((t=>t.start<t.end?this.xL.end>=t.start&&this.xL.end<=t.end:this.xL.end<=t.start&&this.xL.end>=t.end)),q=Hy(this.xL,this.xc,this.Mc,this.xL.end,L,K?Z:X-this.qL);this.fP.zr({x:q.x,y:q.y}).Cu({x:Math.min(1,Math.max(-1,2*(q.x-j)/(Y-j)-1)),y:Math.min(1,Math.max(-1,2*(q.y-$)/(U-$)-1))}).Eh(u),this.KL=!1}this.ge.forEach((t=>t.Or(r,this.xo)))}getMinimumSize(){return{x:150,y:150}}tg(){return[]}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const jy=(t,i,s,e,r,n=!0,h=!0,o=!0)=>{const a=[],l=.5*r,u=s>e,c=Math.sign(s-e),d=-1*c;if(n){const t=l/(2*Math.PI*i)*360+.1;h&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=Yy(t,i+l,s,e,u);if(a.push(...f),n){const r={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let n;n=s>e?Yy(r,l,e+180,e+360,u):Yy(r,l,e-180,e-360,u),a.push(...n)}const v=Yy(t,i-l,e,s,!u);if(a.push(...v),n){const r={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let n;n=s>e?Yy(r,l,s-180,s-360,u):Yy(r,l,s+180,s+360,u),a.push(...n)}return a},Yy=(t,i,s,e,r)=>{s<e&&([s,e]=[e,s]);const n=[],h=r?-2:2,o=r?t=>t>e:t=>t<s;for(let a=r?s:e;o(a);a+=h){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),r=t.y+i*Math.sin(s);n.push({x:e,y:r})}const a=(r?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return n.push({x:l,y:u}),n},Hy=(t,i,s,e,r,n)=>{const[h,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(h,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:r.x+n*Math.cos(c),y:r.y+n*Math.sin(c),angle:Math.round(u)}};class Wy extends Xd{constructor(t,i,s,e,r,n,h,o,a,l,u){super(t,i,s,e,r,n,h,o,a,l),this.AP=u}setLabelAlignment(t){return this.AP=t,this.fe(),this}getLabelAlignment(){return this.AP}}class Xy extends Il{constructor(i,s,e,r,n,h,o){let a;super(i,{Hh:()=>i.gP?i.gP[this.key].max:void 0,Yh:()=>i.gP?i.gP[this.key].min:void 0,Xh:()=>{}},h,s,e,{numeric:s.parallelCoordinateAxisNumericTicks||s.yAxisNumericTicks,datetime:s.parallelCoordinateAxisDateTimeTicks||s.yAxisDateTimeTicks,time:s.parallelCoordinateAxisTimeTicks||s.yAxisTimeTicks},{type:"linear"}),this.yP=[],this.dv=[],this.pP=8,this.Wi=!1,this._t=new Ar,this.chart=i,this.key=r,this.userID=n,this.Ks=this.chart.Ki.Ks.qs(this,{}),this.ke=o,this.mP=o.Rr(i.SP).Er(this.rs.parallelCoordinateAxisBackgroundFillStyle||ho).Dr(_r).setPointerEvents(!1),this.Ln=o.no(i.SP).ih(this.rs.parallelCoordinateAxisTitleFont||this.rs.yAxisTitleFont).Er(this.rs.parallelCoordinateAxisTitleFillStyle||this.rs.yAxisTitleFillStyle).setPointerEvents(!1).eo(Hn).ro(Hn),this.hh=this.Ks.Gv([this.Ln]).de(s.effectsText),this.sI=o.Wr(i.SP).Hr(s.parallelCoordinateAxisStrokeStyle||s.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(t=>{i.bP(this,t.start,t.end)})),this.sI.addEventListener("pointerenter",(()=>{var i,s;(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(a=this.chart.engine.setMouseStyle(t.MouseStyles.Point))})),this.sI.addEventListener("pointerleave",(()=>{a=this.chart.engine.restoreMouseStyle(a)})),this.sI.addEventListener("dblclick",(t=>{var i,s;t.defaultPrevented||(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(this.addRangeSelector(),un(t))})),this.setTitle(r)}setBackgroundFillStyle(t){return this.mP.Er(t),this.ke.fe(),this}getBackgroundFillStyle(){return this.mP.Qn()}setStrokeStyle(t){const i="function"==typeof t?t(this.sI.Ho()):t,s=i.getFillStyle();return yo(s)?(this.xP=s.lut,this.chart.MP=!0):this.xP=void 0,this.sI.Hr(i),this.chart.Ki.fe(),this}getStrokeStyle(){return this.sI.Ho()}setTickStrategy(t,i){return super.jn(t,i)}getTickStrategy(){return this.dn}addRangeSelector(){const i=this.bh(),s=this.ke.Rr(this.chart.SP).Er(this.rs.parallelCoordinateAxisRangeSelectorFillStyle||this.rs.dataGridScrollBarFillStyle).Dr(this.rs.parallelCoordinateAxisRangeSelectorStrokeStyle||this.rs.dataGridScrollBarStrokeStyle);let e;const r=i=>{var s,r;(null===(r=null===(s=this.chart.getUserInteractions().rangeSelectors)||void 0===s?void 0:s.move)||void 0===r?void 0:r.drag)&&(e=this.chart.engine.setMouseStyle(t.MouseStyles.Vertical,e))},n=t=>{e=this.chart.engine.restoreMouseStyle(e)};s.addEventListener("pointermove",r),s.addEventListener("pointerleave",n),s.addEventListener("pointerdown",(t=>{var i,o;if(!(null===(o=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===o?void 0:o.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const u=this.chart.Ki.El(t),c=Je({x:u.engineX,y:u.engineY},this.chart.Ki.ji,this.chart.SP),d=this.chart.SP.y.Bi(s.Bs(),10),f=this.chart.SP.y.Bi(s.Ds(),-10);l=c.y<=d?"scaleMin":c.y>=f?"scaleMax":"move",un(t);let v=t;const A=t=>{if(void 0===this.wP)return;const i=.05*Math.abs(this.Hn-this.Yn),s=(t.clientX,v.clientX,t.clientY-v.clientY);if(v=t,"move"===l){const t=h.max-h.min,i=this.chart._P(h.max,this.wP,this).y,e=this.chart.SP.y.Bi(i,-s),r=this.chart.kP(e,this.wP,this);h.max=jr(r,Math.max(this.Yn,this.Hn),Math.min(this.Yn,this.Hn)+t),h.min=h.max-t}else if("scaleMax"===l){const t=this.chart._P(h.max,this.wP,this).y,e=this.chart.SP.y.Bi(t,-s),r=this.chart.kP(e,this.wP,this);h.max=jr(r,h.min+i,Math.max(this.Yn,this.Hn))}else if("scaleMin"===l){const t=this.chart._P(h.min,this.wP,this).y,e=this.chart.SP.y.Bi(t,-s),r=this.chart.kP(e,this.wP,this);h.min=jr(r,h.max-i,Math.min(this.Yn,this.Hn))}this.chart.CP(),un(t)},g=i=>{i.pointerId===t.pointerId&&(this.chart.setCursorMode(a),s.addEventListener("pointermove",r),s.addEventListener("pointerleave",n),Or.removeEventListener("pointermove",A),Or.removeEventListener("pointerup",g),e=this.chart.engine.restoreMouseStyle(e))};s.removeEventListener("pointermove",r),s.removeEventListener("pointerleave",n),Or.addEventListener("pointermove",A),Or.addEventListener("pointerup",g)})),s.addEventListener("dblclick",(t=>{var i,s;if(!(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.dispose)||void 0===s?void 0:s.doubleClick))return;const e=this.yP.indexOf(h);e>=0&&this.yP.splice(e,1),h.shape.dispose(),this.chart.CP(),un(t)}));const h={min:i.min+.25*(i.max-i.min),max:i.max-.25*(i.max-i.min),shape:s};this.yP.push(h),this.chart.CP();const o={setInterval:(t,i)=>(h.min=Math.min(t,i),h.max=Math.max(t,i),this.chart.CP(),o),setPointerEvents:t=>(s.setPointerEvents(t),o),dispose:()=>{const t=this.yP.indexOf(h);return t>=0&&(this.yP.splice(t,1),this.chart.CP()),o}};return o}addCustomTick(){const t=new Wy((()=>this.chart.Ki.fe()),(()=>{const i=this.dv.indexOf(t);i>=0&&this.dv.splice(i,1)}),(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.tickStyle,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.tickLength,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.tickPadding,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.labelRotation,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.rs.parallelCoordinateAxisNumericTicks||this.rs.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.dv.push(t),this.chart.Ki.fe(),t}getCustomTicks(){return[...this.dv]}Or(t){this.wP=t.parallelAxisIndex;const i=Math.min(this.Yn,this.Hn),s=Math.max(this.Yn,this.Hn);for(const[i,s]of this.fn)for(const[,e]of s){const s=t.ticksInfo.get(e);s&&(t.plotAxisLines.add({positions:[s.positionTicklineStart,s.positionTicklineEnd]},{lineStyle:i.un.tickStyle}),e.ph.zr(s.labelPosition).Cu(s.labelAlignment).eh(s.labelRotation).Su(s.labelOffset.x,s.labelOffset.y))}this.dv.forEach((e=>{if(!e.Xi||e.S<i||e.S>s)return;const r=this.TP(t.parallelAxisIndex,t.halfAxisThickness,e.S,e.sy,e.ny,e.AP);t.plotAxisLines.add({positions:[r.positionTicklineStart,r.positionTicklineEnd]},{lineStyle:e.iy}),t.plotAxisText.add().zr(r.labelPosition).Cu(r.labelAlignment).Er(e.hy).ih(e.oy).Eh(e.Yo(e.S)).eh(e.Uf).setPointerEvents(e.Hi)})),this.sI.Zr({x:t.parallelAxisIndex,y:0}).Xr({x:t.parallelAxisIndex,y:1}),this.Ln.zr({x:t.parallelAxisIndex,y:this.chart.SP.y.Bi(0,-(t.halfAxisThickness+this.pP))}).eh(this.getTitleRotation()).Cu({x:0,y:1});const e=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.SP.x.Bi(t.parallelAxisIndex,-1.2*t.Zv);this.mP.zr({x:e,y:0}).zt({x:t.parallelAxisIndex-e,y:1});const r=this.chart.SP.$i();this.yP.forEach((i=>{const s=this.chart._P(i.min,t.parallelAxisIndex,this),e=this.chart._P(i.max,t.parallelAxisIndex,this),n={x:t.parallelAxisIndex-10*r.x*.5,y:s.y},h=t.parallelAxisIndex+10*r.x*.5,o=e.y;i.shape.zr(n).zt({x:h-n.x,y:o-n.y})}))}It(){this.mP.dispose(),this.Ln.dispose(),this.sI.dispose(),this.yP.forEach((t=>t.shape.dispose())),this.yP.length=0,this.oh(),this.Lh(),this.Wi=!0,this._t.kt("dispose",{})}isDisposed(){return this.Wi}TP(t,i,s,e,r,n){const h=this.chart.SP.Bi({x:t,y:(s-this.Yn)/(this.Hn-this.Yn)},{x:0-i,y:0}),o=this.chart.SP.Bi(h,{x:-e,y:0});return{positionTicklineStart:h,positionTicklineEnd:o,labelPosition:this.chart.SP.Bi(o,{x:-r,y:0}),labelAlignment:{x:1,y:n}}}_h(t){const i=this.sI.Ho();return{halfAxisThickness:aa(i)?i.getThickness()/2:0}}Fh(t,i,s,e,r){const n=i.un,h=this.getInterval();return{...this.TP(e.parallelAxisIndex,r.halfAxisThickness,t,n.getTickLength(),n.getTickPadding(),2*(t-h.start)/(h.end-h.start)-1),keyValue:t,tickLevel:i,labelText:s,labelRotation:n.labelRotation,labelOffset:{x:0,y:0}}}Rh(t,i){return new Ll(i,t,this.ke,this.chart.SP)}Ph(t,i,s){const e=this.Ln&&this.Ln.zh().length>0&&this.getTitleFillStyle()!==ho?this.Ln.Sh().td():{x:0,y:0};let r=0;this.fn.forEach(((t,i)=>{const s=i.un.tickLength+i.un.tickPadding;t.forEach((t=>{if(!t.ph.getVisible())return void(r=Math.max(r,s));const i=s+t.ph.Sh().td().x;r=Math.max(r,i)}))}));const n=this.dv.reduce(((t,i)=>Math.max(t,i.Xi?this.chart.Ki.En.ln(i.Yo(i.S),i.oy,i.Uf).x+i.sy+i.ny:0)),0);r=Math.max(r,n);const h=e.y+this.pP;r=Math.max(r,e.x/2);const o=r;return{Zv:r,FP:h,IP:e.x,Jf:o,ticksInfo:i,updatedTicks:s}}Bn(){return this.chart.SP}Jh(t,i){return Fo(t,i,this.ji)}qh(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}setPointerEvents(t){return this._t.setPointerEvents(t),this}getPointerEvents(){return this._t.getPointerEvents()}}class Zy extends mv{constructor(t,i,s,e,r){super(t,i,s,e),this.At="Parallel Coordinate Series",this.LP=!1,this._t=new Ar,this.chart=t;const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.PP=Bn(this.rs.parallelCoordinateChartSeriesColor,n)||(()=>{const t=Bn(this.rs.lineSeriesStrokeStyle,n).getFillStyle();return(co(t)?t.getColor():void 0)||me(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this.chart.BP()})),this.addEventListener("dispose",(t=>{this.chart.BP()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.DP;return this.DP=this.chart.EP(t),i&&this.chart.RP(),this}getData(){return this.DP}setColor(t){const i="function"==typeof t?t(this.PP):t;return i===this.PP||(this.PP=i,this.chart.Ki.fe(),this.chart.OP(this)),this}getColor(){return this.PP}qg(){return this.getAutoScrollingEnabled()}jg(){}Or(){}Yg(){}Vr(){return{fill:new uo({color:this.PP})}}Gg(){return super.Gg()&&!this.LP}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}class Jy extends cf{constructor(t,i,s,e,r,n,h){var o,a,l;super(t,i,s,i._g("parallelAxisChart bg",0),e,i.Ki.rs.parallelCoordinateChartBackgroundFillStyle||i.Ki.rs.chartXYBackgroundFillStyle,i.Ki.rs.parallelCoordinateChartBackgroundStrokeStyle||i.Ki.rs.chartXYBackgroundStrokeStyle,i.Ki.rs.parallelCoordinateChartTitleFont||i.Ki.rs.chartXYTitleFont,i.Ki.rs.parallelCoordinateChartTitleFillStyle||i.Ki.rs.chartXYTitleFillStyle,i.Ki.rs.parallelCoordinateChartTitleShadow||i.Ki.rs.chartXYTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.axes=[],this.zP=!0,this.VP=Yn(),this.NP=new Map,this.GP=this.rs.parallelCoordinateChartSeriesColorUnselected||me(255,255,255,30),this.$P=u({resolution:32}),this.MP=!1,this.UP=!1,this.jP=!0,this.YP=!1,this.HP=!1,this.WP=!1,this.XP=!1,this.qa=t=>{this.SP.zt(t.engineWidth,t.engineHeight)},this._t=new Ar,this.zk=i.AS("parallelAxisChart series",0),this.ZP=i.AS("parallelAxisChart labels",1),this._n.Eh("Parallel Coordinate Chart"),this.Ki.ul(jl.ma),this.SP=this.cg.d2({scaleXYConstructor:He}).zi(0,1),this.wg(r,this.SP),this.ip=this.ag.Rr(this.SP).zr({x:0,y:0}).zt({x:0,y:1}).Er(this.rs.parallelCoordinateChartSeriesBackgroundFillStyle||this.rs.chartXYSeriesBackgroundFillStyle).Dr(_r).setPointerEvents(!0),this.sp=this.ag.Rr(this.SP).zr({x:0,y:0}).zt({x:0,y:1}).Er(ho).Dr(this.rs.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.rs.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.tp(this.ip,this.sp),this.setSeriesBackgroundEffect(!1),this.JP=new oa({thickness:null!==(a=this.rs.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new fo}),this.QP=new oa({thickness:null!==(l=this.rs.parallelCoordinateChartSeriesLineThickness)&&void 0!==l?l:2,fillStyle:new uo({color:this.rs.parallelCoordinateChartSeriesColorUnselected})}),this.KP=this.VP.N(this.zk.iA(this.SP)).Hr(this.JP),this.KP.Yc=5e4,this.qP=this.zk.iA(this.SP).Hr(this.rs.parallelCoordinateChartPointedSeriesLineStyle||Bn(this.rs.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.tB=new Td((()=>this.ZP.no(this.SP))),this.iB=new Jd((()=>this.ZP.iA(this.SP).setPointerEvents(!1)),((t,i,s)=>(t.ws().Hr(s.lineStyle),i.map((({positions:i})=>t._a().eA(i[0],i[1]))))));const c=i.xS(),d=Hr(h?h.cursorBuilder:void 0,Wf);this.MS=rp(this,c,d.Wm(c,this.uiScale,this.uiScale,$r,this.rs),this,"show-nearest",Qy,(()=>0)),this.addEventListener("resize",this.qa),void 0!==(null==h?void 0:h.legend)&&this.legend.setOptions(h.legend)}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Wf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}setUnselectedSeriesColor(t){return this.GP="function"==typeof t?t(this.GP):t,this.QP=new oa({thickness:this.getSeriesStrokeThickness(),fillStyle:new uo({color:this.GP})}),this.Ki.fe(),this}getUnselectedSeriesColor(){return this.GP}setPointedSeriesStrokeStyle(t){return this.qP.Hr(t),this.Ki.fe(),this}getPointedSeriesStrokeStyle(){return this.qP.Ho()}setSpline(t,i){return t?this.$P._({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.$P._(void 0),this.Ki.fe(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.sB(),s=new Xy(this,this.rs,!this.gn,t.key,t.id,i,this.ZP),e=()=>{this.jP=!0};s.addEventListener("visiblechange",e),s.addEventListener("dispose",(()=>s.removeEventListener("visiblechange",e))),this.axes.push(s)})),e.forEach((t=>{t.It();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this.jP=!0,this.gP=void 0,this.Ki.fe(),this}getAxis(t){const i=this.eB(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.eB(t)}addSeries(t){var i,s;const e=new Zy(this,this.Ky,this.rs,this.Ki.Ks,t);return super.ep(e,{...t,legend:{...null==t?void 0:t.legend,show:null!==(s=null===(i=null==t?void 0:t.legend)||void 0===i?void 0:i.show)&&void 0!==s&&s}}),this.HP=!0,this.gP=void 0,this.Ki.fe(),e}setSeriesStrokeThickness(t){return this.JP=this.JP.setThickness(t),this.QP=this.QP.setThickness(t),this.KP.Hr(this.JP),this.Ki.fe(),this}getSeriesStrokeThickness(){return this.JP.getThickness()}setLUT(t){return this.qf=t,this.qf&&0===this.qf.lut.units.length&&(this.qf.lut=this.qf.lut.setUnits(this.qf.axis.getTitle())),this.ge.forEach((t=>{t.KA()&&t.add(this)})),this.XP=!0,this.ge.forEach((t=>t.ye())),this.Ki.fe(),this}Or(t){super.Or(t);const i=this.axes.filter((t=>t.getVisible()));this.SP.Oi(0,i.length-1),this.ip.zt({x:i.length-1,y:1}),this.sp.zt({x:i.length-1,y:1});const s=void 0===this.gP;if(!this.gP){const t={};i.forEach((i=>{t[i.key]={min:sh,max:eh}})),this.Jy.forEach((i=>{i.DP&&Object.entries(i.DP).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.gP=t}if(this.WP||this.YP||this.HP){const t=i.map(((t,i)=>t.yP));this.Jy.forEach((s=>{const e=s.DP;if(!e)return;let r=!1;for(let s=0;s<i.length;s+=1){const n=i[s],h=t[s],o=void 0!==h.find((t=>fh(e[n.key],t.min,t.max)));if(h.length>0&&!o){r=!0;break}}s.LP=r}));const s=this.Jy.filter((t=>!t.LP));this._t.kt("seriesselect",{selectedSeries:s})}for(const t of this.Jy)t.jg();for(const t of this.Jy)t.Or();super.Mg();const e=this.Ki.xe(this.ip)||void 0!==this.Jy.find((t=>t.getPointed()))?this.rB():void 0;this.MS.Or(!1,this.Jy,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.Ki.ll();if(t.length>1&&i){const t=this.Ki.El(i);this.MS.J_.Om({x:t.engineX,y:t.engineY},this.Ki.ji)}}});const r=Ud.Bg(this._n,this.kg),n=this.ge.reduce(((t,i)=>{const s=i.Sh(r,this.xo);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,n),i.length>=2){const t=this.tB.pA(),e=this.iB.pA(),h=i.map(((i,s)=>(i.Zh(),i.Sh({plotAxisLines:e,plotAxisText:t,physicalAxisSize:this.SP.y.oi(),parallelAxisIndex:s}))));this.SP.Ei([this.Zt.left+this.xo.left+h[0].Jf+n.left,this.Zt.right+this.xo.right+h[h.length-1].IP/2+n.right]),this.SP.Ri([this.Zt.bottom+this.xo.bottom+h.reduce(((t,i)=>Math.max(t,i.FP)),0)+n.bottom,this.Zt.top+this.xo.top+r+n.top]),h.forEach(((t,s)=>i[s].Or(t))),t.finishPlot(),e.finishPlot(),(s||this.MP)&&i.forEach(((t,i)=>{if(!t.xP)return;const s=t.xP.steps.map((s=>({...s,value:this._P(s.value,i,t).y}))),e=t.xP.setSteps(s);t.sI.Hr((t=>t.setFillStyle(new go({lookUpProperty:"y",lut:e}))))}));const o=this.jP||this.YP||this.zP||this.$P.o;o&&(this.KP.ws(),this.VP.ws(),this.NP.clear(),this.Jy.forEach((t=>{const s=t.DP;if(!t.getVisible()||!s)return;const e=this.nB(t,s,i,this.KP,this.VP);this.NP.set(t,e),t.ae(e)}))),(o||this.WP||this.XP||this.YP)&&this.hB(this.Jy),!o&&this.HP&&this.Jy.forEach((t=>{if(t.Xs.length>0)return;const s=t.DP;if(!t.getVisible()||!s)return;const e=this.nB(t,s,i,this.KP,this.VP);this.NP.set(t,e),t.ae(e),this.hB([t])})),this.Jy.find((t=>t.DP&&Object.keys(t.DP).length>0))&&(this.UP=!0)}const h=1===(null==e?void 0:e.length)?e[0]:void 0;(h!==this.oB||this.YP)&&(this.qP.ws(),h&&h.series.DP?(this.nB(h.series,h.series.DP,i,this.qP,void 0),this.KP.Hr(this.QP)):this.KP.Hr(this.JP));const o=l(this.SP.x.ni(),this.SP.y.ni(),this.SP.x.oi(),this.SP.y.oi());this.zk.hS(o),this.ge.forEach((t=>t.Or(r,this.xo)));for(const t of this.Jy)t.Yg();this.zP=!1,this.WP=!1,this.jP=!1,this.YP=!1,this.HP=!1,this.XP=!1,this.$P.o=!1,this.MP=!1,this.oB=h}hB(t){const i=this.qf&&{lut:this.qf.lut,key:this.qf.axis.key};t.forEach((t=>{const s=t.DP,e=this.NP.get(t);if(!s||!e)return;let r;if(t.LP)r=this.GP;else if(i){const t=s[i.key],e=this.gP&&this.gP[i.key];r=i.lut.getColors(t,e)}else r=t.PP;e.forEach((t=>t.SL(r)))}))}BP(){this.YP=!0,this.Ki.fe()}RP(){this.UP&&this.Ki.ul(jl.Aa),this.YP=!0,this.Ki.fe()}eB(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}sB(){return Xe.d1({scale1DConstructor:Ue,dimension:"x"}).Rt(0,1)}EP(t){if(this.gP=void 0,this.Ki.fe(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const r=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!r)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[r]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}bP(t,i,s){this.zP=!0,this.Ki.fe()}_P(t,i,s){return{x:i,y:(t-s.ji.Lt)/(s.ji.Pt-s.ji.Lt)}}kP(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}OP(t){this.XP=!0,this.Ki.fe()}CP(){this.WP=!0,this.Ki.fe()}getSeries(){return this.Jy}tg(){return[this]}Me(){return this.qf?{lut:this.qf.lut}:void 0}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.It())),this.MS.It(),this.zk.It(),this.ZP.It(),this}nB(t,i,s,e,r){const n=[];let h;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],u=this._P(l,o,a),c=this.$P.C();if(c){if(void 0!==h){const i=c.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,c=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:h.x+a*(u.x-h.x),y:h.y+s*(u.y-h.y)},o={x:h.x+l*(u.x-h.x),y:h.y+c*(u.y-h.y)},d=e._a();r&&r.Rs(d,t),n.push(d),d.eA(i,o)}s=c}}}else if(void 0!==h){const i=e._a();r&&r.Rs(i,t),n.push(i),i.eA(h,u)}h=u}return n}rB(){const t=this.getCursorMode(),i=this.Ki.ll();if(t&&i){const s=this.Ki.El(i),e=Je({x:s.engineX,y:s.engineY},this.Ki.ji,this.SP),r=Math.round(e.x),n=this.axes.filter((t=>t.getVisible()))[r];if(!n)return;const h=n.key,o=zn(this.Jy.map((t=>{if(!t.DP||!t.Gg())return;const i=t.DP[h],s=this._P(i,r,n);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.SP,resultTable:s,resultTableScale:this.SP},value:i,series:t,axis:n}})));return"show-nearest"===t?[o.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Or.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}setUserInteractions(t){return this.Ur=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return Er({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.Ur)}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const Qy=(t,i,s)=>{if(s.length>1)return[[{text:s[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...zn(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return tp(t,[[t.series,"",Co(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],r=[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const n=s[i.key];if(void 0===n)return;const h=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};r.push([{text:i.getTitle(),font:h},"",{text:i.formatValue(n),font:h}])})),r};class Ky extends Gd{constructor(i,s,e,r,n,h,o){var a;super(i,s,e,r,n,h),this.legend=new zd(Fd,this,this.gg,this.Rv),this.legend.setOptions({position:t.LegendPosition.LeftTop,autoHideThreshold:1,...o}),null===(a=this.ge)||void 0===a||a.push(this.legend)}add(t){return t instanceof _p?(t.getCells().forEach((t=>{t.panel instanceof $d&&this.add(t.panel)})),this.Ki.fe(),this):(this.legend.add(t),this.Ki.fe(),this)}getMinimumSize(){return super.getMinimumSize()}}const qy=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,tp=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},ip=t=>{var i,s;const e="series"in t?t.series:"slice"in t?t.slice:"bar"in t?t.bar:void 0,r=e&&Dd(e)&&e.Me(),n="x"in t&&t.x,h="y"in t&&t.y,o="z"in t&&t.z,a="color"in t&&t.color,l=null!==(s=null!==(i="lookupValue"in t?t.lookupValue:void 0)&&void 0!==i?i:"intensity"in t?t.intensity:void 0)&&void 0!==s?s:"value"in t?t.value:void 0;if(void 0!==l&&r&&"value"===r.lookUpProperty)return r.lut.getColors(l,r.valueRange);if(void 0!==n&&!1!==n&&r&&"x"===r.lookUpProperty)return r.lut.getColors(n,sp(e)?{min:e.getXMin(),max:e.getXMax()}:void 0);if(void 0!==h&&!1!==h&&r&&"y"===r.lookUpProperty)return r.lut.getColors(h,sp(e)?{min:e.getYMin(),max:e.getYMax()}:void 0);if(void 0!==o&&!1!==o&&r&&"z"===r.lookUpProperty)return r.lut.getColors(o,ep(e)?{min:e.getZMin(),max:e.getZMax()}:void 0);if(a)return"number"==typeof a?xe(a):a;if(e){const t=e.Vr(),i=Fn(e.chart.getTheme(),!0,t);if(co(i))return i.getColor()}},sp=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),ep=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),rp=(t,i,s,e,r,n,h)=>{let o,a,l,u=r,c=t.getTheme().cursorDynamicBehavior,d=n,f=null,v=!0;e&&(v=!1,e.seriesBackground.addEventListener("pointerenter",(()=>{var i;v=!0,t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(i=g[3])&&void 0!==i?i:{}))?A():t.Ki.fe())})),e.seriesBackground.addEventListener("pointerleave",(()=>{var i;v=!1,t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(i=g[3])&&void 0!==i?i:{}))?A():t.Ki.fe())})),e.seriesBackground.addEventListener("pointermove",(()=>{var i;v=!0,t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(i=g[3])&&void 0!==i?i:{}))?A():t.Ki.fe())})),e.addEventListener("seriesadd",(i=>{const s=i.series;s.addEventListener("pointerenter",((i,e)=>{var r;s.Gg()&&(a||t.Ki.fe(),o=e||void 0),t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(r=g[3])&&void 0!==r?r:{}))?A():t.Ki.fe())})),s.addEventListener("pointermove",((i,e)=>{var r;s.Gg()&&(a||t.Ki.fe(),o=e||void 0),t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(r=g[3])&&void 0!==r?r:{}))?A():t.Ki.fe())})),s.addEventListener("pointerleave",(i=>{var e;s.Gg()&&(a||t.Ki.fe(),o=void 0),t.getCursorMode()&&(a&&g&&!("explicitTarget"in(null!==(e=g[3])&&void 0!==e?e:{}))?A():t.Ki.fe())}))})));const A=()=>{if(l&&(Or.cancelAnimationFrame(l),l=void 0),!g)return;const t=g;l=Or.requestAnimationFrame((()=>y.Or(...t)))};let g;const y={setCursor:i=>(i(s),t),getCursor:()=>s,setCursorMode:i=>(u=i,t.Ki.fe(),t),getCursorMode:()=>u,setCustomCursor:t=>{a=t},PS:i=>{c=i,t.Ki.fe()},setCursorFormatting:i=>(d=i,t.Ki.fe(),t),getCursorFormatting:()=>d,It:()=>{s.dispose(),i.It()},Or:(i,e,r,n)=>{l&&(Or.cancelAnimationFrame(l),l=void 0),g=[i,e,r,n];const A=t.Ki.ll();let y=[];if((null==n?void 0:n.explicitTarget)&&u)y=Array.isArray(n.explicitTarget)?n.explicitTarget:[n.explicitTarget];else if(!i&&u){const t=e.find((t=>t.getPointed())),i=A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.ue?t.ue(A):void 0;if(o=i||o,o&&"show-all"!==u&&"show-all-interpolated"!==u)y=[o];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((v||void 0!==t)&&A&&r){for(const t of e){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const i=r(t,A,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>h(t,A)-h(i,A))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&r){const i=r(t,A,u);i&&(y=[i])}}y=zn(y.map((t=>Jn(t))));const p=(null==n?void 0:n.overrideCursorPositions)||((t,i)=>i),m=y[0],S=y.length>0?y:void 0;if(m!==f&&A&&(a&&a({hit:m,hits:S,mouseLocation:A}),t._t.kt("cursortargetchange",{hit:m,hits:S,mouseLocation:A}),f=m),a)s.getVisible()&&(s.setVisible(!1),s.Sh().Or());else{let i=!1;if(y&&y.length>0){const e=d(t,y[0],y);s.setVisible(!0).setPosition(...p(y,y.map((t=>{const i=t.cursorPosition;if(c){const s=ip(t);void 0!==s&&(i.pointMarkerFillStyle=c.pointMarkerFill&&c.pointMarkerFill(s),i.pointMarkerStrokeStyle=c.pointMarkerStroke&&c.pointMarkerStroke(s));const e=(t=>{if(sr(t))return void 0!==t.size?t.size:t.series instanceof yA?t.series.getPointSize():void 0})(t);if(void 0!==e&&(i.pointMarkerSize=c.pointMarkerSize&&c.pointMarkerSize(e)),!1!==c.matchPointMarkerShape){const s=(t=>{const i=sr(t)&&t.series instanceof yA?t.series.getPointShape():void 0;return void 0===i||Aa(i)?void 0:i})(t);void 0!==s&&(i.pointMarkerShape=s)}}return i})))).setResultTable((t=>t.setContent(e))),i=!0}else s.getVisible()&&(s.setVisible(!1).setPosition().setResultTable((t=>t.setContent([]))),i=!0);(null==n?void 0:n.afterCursorPointedAt)&&n.afterCursorPointedAt(y),i&&(s.Sh(),s.Or())}},solveNearest:(i,s,e,r)=>{const n=i||t.Ki.ll();if(!n)return[];let o=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=r(t,n,s);i&&o.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(o.sort(((t,i)=>h(t,n)-h(i,n))),o.length=1)}return o=zn(o.map((t=>Jn(t)))),o},J_:s};return y},np=(t,i,s)=>Lh(i,Ih(Nh(.5*(t.kc()+t.ki())*Math.PI/180),s)),hp=(t,i,s,e,r,n)=>{const h=t.length;let o=90;for(let a=0;a<h;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===h)l.BC.zr(s);else{const t=Lh(s,Ih(Nh(.5*(o+u)*Math.PI/180),n*c));l.BC.zr(t)}l.BC.Pc(o).Xr(u).Dc(e).Ec(e).Rc(r),o=u}};class op extends $d{constructor(t,i,s,e,r,n,h){var o;super(t,i,s,i._g("pieChart bg",0),e,i.Ki.rs.pieChartBackgroundFillStyle,i.Ki.rs.pieChartBackgroundStrokeStyle,i.Ki.rs.pieChartTitleFont,i.Ki.rs.pieChartTitleFillStyle,i.Ki.rs.pieChartTitleShadow,n,null===(o=null==h?void 0:h.legend)||void 0===o?void 0:o.customLegend),this.Kk=[],this.qk=ig.SortByName,this.mc=0,this.dC=this.rs.pieChartSliceFillStylePalette,this.fC=this.rs.pieChartSliceStrokeStyle,this.tC=!0,this.vC=this.rs.pieChartSliceLabelFont,this.AC=this.rs.pieChartSliceLabelFillStyle,this.iC=this.rs.pieChartSliceLabelShadow,this.sC=0,this.aB=!1,this.lB=20,this.hC=!0,this.lC=!0,this.oC=t=>{const i=this.Kk.indexOf(t);i>=0&&(this.Kk.splice(i,1),this.aC())},this._t=new Ar,this.Ki.ul(jl.ea),this.uC=i.AS("pieChart bottom",0),this.cC=i.AS("pieChart top",1),this._n.Eh("Pie Chart"),this.wg(r,this.Rv),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let i=0;i<t.length;i+=1)t[i].setExploded(!1)})()}));const a=i.xS(),l=Hr(h?h.cursorBuilder:void 0,Uf);this.MS=rp(this,a,l.Wm(a,this.uiScale,this.uiScale,$r,this.rs),void 0,"show-pointed",ap,(()=>0)),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled));const u={backgroundVisible:!0,...null==h?void 0:h.legend};this.legend.setOptions(u)}setCursor(t){return this.MS.setCursor(t),this}getCursor(){return this.MS.getCursor()}setCursorMode(t){return this.MS.setCursorMode(t),this}getCursorMode(){return this.MS.getCursorMode()}setCustomCursor(t){return this.MS.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.MS.PS(t),this}setCursorFormatting(t){return this.MS.setCursorFormatting(t),this}getCursorFormatting(){return this.MS.getCursorFormatting()}addCursor(t=Uf){const i=this.vg(),s=t.Wm(i,this.uiScale,this.uiScale,this.lg(i),this.rs);return this.xg(s),s}addSlice(t,i){const s=new gg(this.sC,this.uC,this.cC,this,this.Rv,this.oC,this.rs,this.Ki.Ks);this.sC+=1,s.setName(t);const e=this.gn;return this.gn=!1,s.setValue(i),this.gn=e,s.setEffect(this.hC),this.yC(s),this.Kk.push(s),this.aC(),s.setHighlightOnHover(this.tC),this.ge.forEach((t=>{t.KA()&&t.tc(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Kk}setMultipleSliceExplosion(t){return this.aB=t,this}getMultipleSliceExplosion(){return this.aB}setInnerRadius(t){return this.mc=t,this.Ki.fe(),this}getInnerRadius(){return this.mc}setSliceExplosionOffset(t){return this.lB=t,this.Ki.fe(),this}getSliceExplosionOffset(){return this.lB}setLUT(t){return this.qf=t,this.Ki.fe(),this}setSliceFillStyle(t){this.dC=t;for(let t=0;t<this.Kk.length;t+=1)this.yC(this.Kk[t]);return this.Ki.fe(),this}getSliceFillStyle(){return this.dC}setSliceStrokeStyle(t){this.fC="function"==typeof t?t(this.fC):t;for(let t=0;t<this.Kk.length;t+=1)this.yC(this.Kk[t]);return this.Ki.fe(),this}getSliceStrokeStyle(){return this.fC}setSliceEffect(t){return this.hC=t,this.Kk.forEach((i=>i.Ks.ie.de(t))),this.Ki.fe(),this}getSliceEffect(){return this.hC}setSliceSorter(t){return this.qk=t,this.Kk=this.Kk.sort(this.qk),this.Ki.fe(),this}getSliceSorter(){return this.qk}setLabelFillStyle(t){this.AC="function"==typeof t?t(this.AC):t;for(let t=0;t<this.Kk.length;t+=1)this.yC(this.Kk[t]);return this.Ki.fe(),this}getLabelFillStyle(){return this.AC}setLabelShadow(t){return this.iC=t,this.Ki.fe(),this}getLabelShadow(){return this.iC}setLabelFont(t){this.vC="function"==typeof t?t(this.vC):t;for(let t=0;t<this.Kk.length;t+=1)this.yC(this.Kk[t]);return this.Ki.fe(),this}getLabelFont(){return this.vC}setLabelEffect(t){return this.lC=t,this.Kk.forEach((i=>i.Ks.te.de(t))),this.Ki.fe(),this}getLabelEffect(){return this.lC}setLabelFormatter(t){return this.gC=t,this.Ki.fe(),this}getLabelFormatter(){return this.gC}setSliceHighlightOnHover(t){return this.tC=t,this.Kk.forEach((i=>i.setHighlightOnHover(t))),this}Or(t){super.Or(t),super.Mg();const i=Ud.Bg(this._n,this.kg),s=this.ge.reduce(((t,s)=>{const e=s.Sh(i,this.xo);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});Ud.Dg(this._n,this.kg,this.uiScale.$i(),this.xo,s);const r=e(this.Rv.x.getInnerInterval()-(this.xo.left+this.xo.right),this.Rv.y.getInnerInterval()-(this.xo.bottom+this.xo.top+i)),n=e(r.x-s.left-s.right,r.y-s.top-s.bottom),h=e(this.xo.left+(r.x+s.left-s.right)/2,this.xo.bottom+(r.y+s.bottom-s.top)/2);if(this.qf){const t=this.qf;this.Kk.forEach((i=>{this.yC(i,new uo({color:t.getColors(i.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.Kk.length;t+=1){const i=Math.abs(this.Kk[t].getAnimatedValue())>0;this.Kk[t].BC.setVisible(i),this.Kk[t].ph.setVisible(i)}this.Kk=this.Kk.sort(this.qk);const o=this.Kk.filter((t=>Math.abs(t.getAnimatedValue())>0));let a=0;for(let t=0;t<o.length;t+=1)a+=Math.abs(o[t].getAnimatedValue());const l=[];for(let t=0;t<o.length;t+=1)l.push((u=Math.abs(o[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<o.length;t+=1){const i=o[t];i.ph.Eh(this.gC(i,l[t])).Sh()}this.MS.Or(!1,this.Kk,((t,i,s)=>{const e=l[o.indexOf(t)]||0,r=this.Ki.El(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.Ki.ji,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.Ki.ji},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.ge.forEach((t=>t.Or(i,this.xo))),this.pC(o,l,h,n)}yC(t,i=this.dC(t.index,t)){t.setStyle(i,this.fC,this.AC,this.vC,this.iC)}aC(){this.Kk=this.Kk.sort(this.qk),this.Ki.fe()}tg(){return this.Kk}dispose(){return super.dispose(),this.Kk.slice().forEach((t=>t.dispose())),this.MS.It(),this.cC.It(),this.uC.It(),this}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const ap=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class lp extends op{constructor(t,i,s,e,r,n,h){super(t,i,s,e,r,n,h),this.gC=sg.NamePlusValue,this.wC=[],this.uB=40,this.cB=5,this.dB=10,this._C=this.rs.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this._C=t;for(let t=0;t<this.wC.length;t+=1)this.wC[t].Hr(this._C);return this.Ki.fe(),this}getLabelConnectorStyle(){return this._C}setLabelSliceOffset(t){return this.uB=t,this.Ki.fe(),this}getLabelSliceOffset(){return this.uB}setLabelConnectorGapStart(t){return this.cB=t,this.Ki.fe(),this}getLabelConnectorGapStart(){return this.cB}setLabelConnectorEndLength(t){return this.dB=t,this.Ki.fe(),this}getLabelConnectorEndLength(){return this.dB}pC(t,i,s,r){const n=this.vC.getSize(),h=this.uB,o=this.dB,a=this.cB,l=Math.min(this.lB,h-a);let u=0;if(1===t.length)u=t[0].ph.td().x;else for(let i=0;i<t.length;i+=1)u=Math.max(u,t[i].ph.td().x);const c=Math.max(.5*(Math.min(r.x-2*u-2*o,r.y-2*n)-2*h),0);if(c<50){const e=Math.max(.5*Math.min(r.x,r.y-2*n),0);hp(t,i,s,e,this.mc,l),t.forEach((t=>t.ph.setVisible(!1))),this.wC.forEach((t=>t.setVisible(!1)))}else{hp(t,i,s,c,this.mc,l);let r=90;const n=t.map(((t,e)=>{const n=360*i[e],a=r-n,l=Nh(zh(.5*(r+a))),u=l.x>=0?-1:1,d=Lh(Lh(s,Ih(l,c+h)),{x:u*-o,y:0});r=a;const f={x:u,y:0};t.ph.zr(d).Cu(f),t.ph.Sh();const v=t.ph.Qc();return{position:d,alignment:f,shape:t.ph,boundaries:v,sliceAngleVec:l,slice:t}})),u=[];for(let t=0;t<n.length;t+=1){const i=n[t],s=u[u.length-1];s&&!1!==uh([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(u.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.wC.length;t+=1)this.wC[t].setVisible(!1);u.forEach(((t,i)=>{const r=t.slice.BC,n=np(r,s,c+a+l*t.slice.getAnimatedExplosion()),h=((t,i,s)=>{const r=(s.y-i.y)/(s.x-i.x),n=i.x+(t-i.y)/r;return e(n,t)})(t.position.y,n,s),o=t.position;this.kC([n,h,o])}))}}getMinimumSize(){return e(500,300)}kC(t){let i;for(let t=0;t<this.wC.length;t+=1)if(!this.wC[t].getVisible()){i=this.wC[t].setVisible(!0);break}void 0===i&&(i=this.cC._y(this.Rv,void 0,[Wd.InternalUI]).Hr(this._C).setPointerEvents(!1),this.wC.push(i)),i.ws().tc(t)}}class up extends op{constructor(){super(...arguments),this.gC=sg.Name,this.fB=.5}pC(t,i,s,e){const r=this.lB,n=Math.max(0,.5*Math.min(e.x,e.y)-r);hp(t,i,s,n,this.mc,r);for(let i=0;i<t.length;i+=1){const e=t[i],h=e.BC,o=e.ph,a=this.mc/100,l=((1-a)*this.fB+a)*n+e.getAnimatedExplosion()*r,u=np(h,s,l);o.zr(u).xu(0)._u(0)}}getMinimumSize(){return e(200,200)}setLabelPosition(t){return this.fB=t,this.Ki.fe(),this}getLabelPosition(){return this.fB}}const cp={LabelsOnSides:lp,LabelsInsideSlices:up},dp=100001,fp=200002,vp=300002,Ap=400001,gp=510001,yp=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),r=Math.floor(99998/i),n=Math.floor(99998/i),h=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=gp+i*o;let l=0;return{vB:()=>{const i=t.AB("dashboard ui",a+l);return l+=1,i},gB:()=>t.AB("dashboard legend",51e4),yB:i=>{const a=1+i*s,l=dp+i*e,u=fp+i*r,c=vp+i*n,d=Ap+i*h,f=gp+i*o;let v=0;return{Ki:t,_g:(i,s)=>{const e=a+s;return t.AB(i,e)},vS:(i,s)=>{const e=l+s;return t.AB(i,e)},U_:(i,s)=>{const e=u+s;return t.AB(i,e)},AS:(i,s)=>{const e=c+s;return t.AB(i,e)},fS:(i,s,e)=>{const r=c+s;return t.pB(i,r,e)},Fg:(i,s)=>{const e=d+s;return t.AB(i,e)},Ag:i=>{const s=f+v,e=t.AB(i,s);return v+=1,e},yg:()=>t.AB("panel legend",500002+i),xS:()=>t.AB("panel cursor",600001+i)}}}};class pp extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,pp.prototype)}}class mp extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Or.alert(e),Object.setPrototypeOf(this,mp.prototype)}}class Sp extends mp{constructor(t){super(t),Object.setPrototypeOf(this,Sp.prototype)}}class bp{constructor(t){this._t=new Ar,this.S=t}_(t){return this.S=t,this._t.kt("change",{value:t}),this}C(){return this.S}Ct(t,i,s){this._t.addEventListener(t,i,s)}Ft(t,i){this._t.removeEventListener(t,i)}}const xp=(t,i)=>i?t.x:t.y,Mp=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),wp=(t,i,s,e,r,n)=>{const h=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=h-1;t+=1)a.push(xp(r,n)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<h;i+=o){const e=t.filter((t=>Mp(t,o,n,i))).reduce(((t,i)=>Math.max(t,xp(i.panel.getMinimumSize()||{x:0,y:0},n))),20),h=a[i-1];if(1===o&&c>xp(r,n)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?h>c:h<c))break;u[i-1]=c-h,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/xp(r,n)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class _p{constructor(t,i,s,e,r,n){this.coordsRelative="relative",this.coordsClient="client",this.Wi=!1,this.PT=new Array,this.mB=[],this.SB=void 0,this.bB=!0,this.xB=!0,this.MB=!0,this.ng=!1,this.wB=!0,this._B=()=>{this.wB=!0,this.Ki.fe()},this.kB=[],this.CB=t=>{for(let i=0;i<this.PT.length;i+=1)if(this.PT[i].panel===t){this.PT.splice(i,1),this.bB=!0,this.Ki.fe();break}},this.TB=t=>{const i=this.mB.indexOf(t);i>=0&&this.mB.splice(i,1)},this.FB=(t,i,s,e,r)=>{if(this.IB(i,s,e,r)){const n={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:r};return this.PT.push(n),this.LB(n),this.bB=!0,t}throw new pp("Out of dashboard range.")},this._t=new Ar,this.PB=i.numberOfRows,this.BB=i.numberOfColumns,this.ug=t,this.DB=i,this.EB=e;const h=this.BB*this.PB;this.RB={x:new bp(new Array(this.BB).fill(1)),y:new bp(new Array(this.PB).fill(1))},this.rs=s.rs,this.OB=this.rs.dashboardSplitterStyle,this.gn=!1!==(null==i?void 0:i.animationsEnabled),this.zB=yp(s,h),this.VB=s.AB("dashboard splitters",500001),this.NB=()=>this.zB.vB(),this.gg=this.zB.gB(),this.Ks=s.Ks.qs(this,{GB:{}}),this.Ks.GB.de(this.rs.effectsDashboardSplitters);const o=s.li();this.uiScale=Xe.d2({scaleXYConstructor:He}).Oi(0,100).zi(0,100).zt(o),this.Rv=Xe.d2({scaleXYConstructor:He}).Oi(0,this.uiScale.x.getCellSize()).zi(0,this.uiScale.y.getCellSize()).zt(o),this.$B=s.UB.bind(s),this.jB=s.YB.bind(s),this.HB=s.WB.bind(s),this.XB=s.ZB.bind(s),this._l=s._l.bind(s),this.Cl=s.Cl.bind(s),this.engine=s.dg,this.Ki=s.sd,s.Ct("resize",this._B),s.fe();const a=t=>{this.ng=t.isInView,this._t.kt("inviewchange",{isInView:this.ng})};s.Ct("inviewchanged",a),this.bg=()=>{s.Ft("inviewchanged",a)},this.JB(),this.setAnimationsEnabled(this.gn),this.createChartXY=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new LA(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new Gg(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new XA(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=kp(t,this.DB,this.gn),s=i&&i.type?i.type:lp;return this.FB(new s(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new Uy(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=kp(t,this.DB,this.gn),s=i&&i.type?i.type:ug;return this.FB(new s(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=kp(t,this.DB,this.gn),s=t&&t.type?t.type:_g;return this.FB(new s(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new Gd(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendPanel=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new Ky(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,t.legend),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new zA(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=kp(t,this.DB,this.gn);return this.FB(new cv(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=kp(t,this.DB,this.gn),s=new Rf(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i);return this.FB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=kp(t,this.DB,this.gn),s=new by(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this);return this.FB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=kp(t,this.DB,this.gn),s=new Iy(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i);return this.FB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=kp(t,this.DB,this.gn),s=new Jy(this.ug,this.zB.yB(this.QB(t.columnIndex,t.rowIndex)),this.KB(i,this.RB),this.CB,n,this,i);return this.FB(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}QB(t,i){return t+i*this.BB}KB(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.BB:this.PB,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).Gi({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.BB,y:this.PB},i),d3:()=>new Ve({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.BB,y:this.PB},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.$B(t[0]),this.jB(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.HB(t[0]),this.XB(t[1]),this}getWidth(){return this._l()}getHeight(){return this.Cl()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.VB.fe(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.VB.fe(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.rs}setSplitterStyle(t){const i=this.OB;return this.OB="function"==typeof t?t(this.OB):t,this.qB(i),this}getSplitterStyle(){return this.OB}setSplitterEffect(t){return this.Ks.GB.de(t),this.Ki.fe(),this}getSplitterEffect(){return this.Ks.GB.ve()}setAnimationHighlight(t){return this.MB=t,this.kB.forEach((i=>this.Ki.ee.me(i.line,t))),this}getAnimationHighlight(){return this.MB}qB(t){for(const t of this.kB)t.line.Hr(this.OB);this.JB()}setColumnWidth(t,i){const s=this.RB.x.C();return t>=0&&t<s.length&&(s[t]=i,this.RB.x._(s)),this._B(),this}getColumnWidth(t){const i=this.RB.x.C();if(t>=i.length)throw new pp("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.RB.y.C();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.RB.y._(s)),this._B(),this}getRowHeight(t){const i=this.RB.y.C();if(t>=i.length)throw new pp("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.Rv.getInnerIntervalPixels()}tD(t,i,s){if(s&&Math.abs(t.x)>0)this.iD(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.sD(i,t.y)}for(const t of this.PT)t.panel.Et();this._B()}sD(t,i){const s=wp(this.PT,this.RB.y.C(),t,i,this.Rv.li(),!1);this.RB.y._(s),this._B()}iD(t,i){const s=wp(this.PT,this.RB.x.C(),t,i,this.Rv.li(),!0);this.RB.x._(s),this._B()}eD(){this.kB.forEach((t=>t.line.dispose())),this.kB.length=0;for(let i=1;i<=this.BB-1;i+=1)for(let s=0;s<=this.PB-1;s+=1)if(void 0!==this.PT.find((t=>fh(s,t.rowIndex,t.rowIndex+t.rowSpan-1)&&(i===t.columnIndex||i===t.columnIndex+t.columnSpan)))){const e=this.VB.Wr(this.Rv).Hr(this.OB);e.addEventListener("pointerenter",(s=>{this.kB.forEach((t=>{"vertical"===t.alignment&&t.column===i&&(this.Ki.ee.pe(t.line,1),this.VB.rD(t.line))})),this.SB=this.engine.setMouseStyle(t.MouseStyles.ResizeColumn,this.SB),this.Ki.fe()})),e.addEventListener("pointerleave",(t=>{this.kB.forEach((t=>{"vertical"===t.alignment&&t.column===i&&this.Ki.ee.pe(t.line,0)})),this.SB=this.engine.restoreMouseStyle(this.SB),this.Ki.fe()})),e.addEventListener("pointerdown",(s=>{un(s);let e=s;const r=s=>{un(s),this.SB=this.engine.setMouseStyle(t.MouseStyles.ResizeColumn,this.SB),this.kB.forEach((t=>{"vertical"===t.alignment&&t.column===i&&(this.Ki.ee.pe(t.line,1),this.VB.rD(t.line))}));const r={x:s.clientX-e.clientX,y:s.clientY-e.clientY};e=s,this.tD(r,i,!0)},n=t=>{t.pointerId===s.pointerId&&(this.kB.forEach((t=>{"vertical"===t.alignment&&t.column===i&&this.Ki.ee.pe(t.line,0)})),this.SB=this.engine.restoreMouseStyle(this.SB),Or.removeEventListener("pointermove",r),Or.removeEventListener("pointerup",n))};Or.addEventListener("pointermove",r),Or.addEventListener("pointerup",n)})),this.Ki.ee.se(e,(t=>e.vs(t)),{animationEnabled:this.MB}),this.kB.push({row:s,column:i,line:e,alignment:"vertical"})}for(let i=1;i<=this.PB-1;i+=1)for(let s=0;s<=this.BB-1;s+=1)if(void 0!==this.PT.find((t=>fh(s,t.columnIndex,t.columnIndex+t.columnSpan-1)&&(i===t.rowIndex||i===t.rowIndex+t.rowSpan)))){const e=this.VB.Wr(this.Rv).Hr(this.OB);e.addEventListener("pointerenter",(s=>{this.kB.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&(this.Ki.ee.pe(t.line,1),this.VB.rD(t.line))})),this.SB=this.engine.setMouseStyle(t.MouseStyles.ResizeRow,this.SB),this.Ki.fe()})),e.addEventListener("pointerleave",(t=>{this.kB.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&this.Ki.ee.pe(t.line,0)})),this.SB=this.engine.restoreMouseStyle(this.SB),this.Ki.fe()})),e.addEventListener("pointerdown",(s=>{un(s);let e=s;const r=s=>{un(s),this.SB=this.engine.setMouseStyle(t.MouseStyles.ResizeRow,this.SB),this.kB.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&(this.Ki.ee.pe(t.line,1),this.VB.rD(t.line))}));const r={x:s.clientX-e.clientX,y:-(s.clientY-e.clientY)};e=s,this.tD(r,i,!1)},n=t=>{t.pointerId===s.pointerId&&(this.kB.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&this.Ki.ee.pe(t.line,0)})),this.SB=this.engine.restoreMouseStyle(this.SB),Or.removeEventListener("pointermove",r),Or.removeEventListener("pointerup",n))};Or.addEventListener("pointermove",r),Or.addEventListener("pointerup",n)})),this.Ki.ee.se(e,(t=>e.vs(t)),{animationEnabled:this.MB}),this.kB.push({row:i,column:s,line:e,alignment:"horizontal"})}this.Ks.GB.he(this.kB.map((t=>t.line)))}nD(){const t=this.Rv.li(),i=this.RB.x.C(),s=i.reduce(((t,i)=>t+i)),r=this.RB.y.C(),n=r.reduce(((t,i)=>t+i));this.kB.forEach((h=>{if("vertical"===h.alignment){const o=e(t.x*i.slice(0,h.column).reduce(((t,i)=>t+i),0)/s,t.y*r.slice(0,h.row).reduce(((t,i)=>t+i),0)/n),a=e(o.x,t.y*r.slice(0,h.row+1).reduce(((t,i)=>t+i),0)/n);h.line.Zr(o).Xr(a)}else{const o=e(t.x*i.slice(0,h.column).reduce(((t,i)=>t+i),0)/s,t.y*r.slice(0,h.row).reduce(((t,i)=>t+i),0)/n),a=e(t.x*i.slice(0,h.column+1).reduce(((t,i)=>t+i),0)/s,o.y);h.line.Zr(o).Xr(a)}}))}setAnimationsEnabled(t){return this.gn=t,this.getCells().filter((t=>t.panel instanceof $d)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.gn),this}getAnimationsEnabled(){return this.gn}getCells(){return this.PT.slice()}dispose(){return this.Wi||(this.bg&&this.bg(),this.PT.slice().forEach((t=>t.panel.dispose())),this.mB.slice().forEach((t=>t.dispose())),this.Wi=!0,this.EB(),this._t.kt("dispose",{})),this}isDisposed(){return this.Wi}getIsInView(){return this.ng}saveToFile(t,i,s,e){return wd(this.engine,t,i,s,e),this}ed(t){if(this.wB){const t=this.Ki.ji.li(),i=t.x,s=t.y;this.uiScale.zt(i,s),this.Rv.zt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.Rv.Oi(0,e.x).zi(0,e.y),this._t.kt("resize",{width:e.x,height:e.y,engineWidth:i,engineHeight:s}),this.xB=!0}this.bB&&(this.eD(),this.bB=!1,this.xB=!0),this.xB&&(this.nD(),this.xB=!1);for(const i of this.PT)i.panel.Or(t);return this.mB.forEach((t=>t.Sh())),this.mB.forEach((t=>t.Or())),this.wB=!1,this}Dt(){for(const t of this.PT)t.panel.Dt();return this.Rv.x.Dt(),this.Rv.y.Dt(),this.uiScale.x.Dt(),this.uiScale.y.Dt(),this}Et(){for(const t of this.PT)t.panel.Et();return this.Rv.x.Et(),this.Rv.y.Et(),this.uiScale.x.Et(),this.uiScale.y.Et(),this}translateCoordinate(t,i,s){return Cd(t,i,s,this.Rv,this.Ki)}addUIElement(t=mc,i=this.uiScale){i=kd(i,this.Rv);const s=_d(t,this.NB(),this.uiScale,i,this.TB,this.rs);return this.mB.push(s),s}IB(t,i,s,e){return i>=0&&t>=0&&i+e<=this.PB&&t+s<=this.BB}LB(t){const i=this.OB,s=i===_r?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.PB-1?s:0,right:t.columnIndex<this.BB-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.eo(e)}JB(){this.uiScale.x.ri([0,0]),this.uiScale.y.ri([0,0]),this.Rv.x.ri([0,0]),this.Rv.y.ri([0,0]);for(const t of this.PT)this.LB(t);this.Ki.fe()}addEventListener(t,i,s){this._t.addEventListener(t,i,s)}removeEventListener(t,i){this._t.removeEventListener(t,i)}}const kp=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var r,n;return e.rowIndex=(r=e.rowIndex,n=e.rowSpan,i.numberOfRows-(r+n)),e},Cp=(i,s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",e)=>{let r,n=0,h=0;const o=[],a=i=>{const s=new Or.Image;s.src=i,s.onload=()=>{o.forEach((i=>{var e;const r=new xr({source:s,fitMode:t.ImageFitMode.Stretch});null===(e=i.Kd)||void 0===e||e.Er(r),n=s.width,h=s.height,c(i)}))}};a(s);const l=t=>{a(t.logoDataURI)};let u;if(i.cl.addEventListener("logochange",l),new Or.Image instanceof Or.HTMLImageElement){const i=new Or.Image;i.src=s,u=new xr({source:i,fitMode:t.ImageFitMode.Stretch})}else if(Or.lcjs_setup){const i=new Or.Image;i.src=s;const e=Or.lcjs_setup(i.naturalWidth,i.naturalHeight);e.getContext("2d").drawImage(i,0,0),u=new xr({source:e,fitMode:t.ImageFitMode.Stretch})}else u=new uo({color:Se("#f00")});const c=t=>{if(t.Kd){const i=t.ji.Bi({x:t.ji.x.getInnerEnd(),y:t.ji.y.getInnerStart()},{x:-(3+n),y:3}),s=t.ji.Bi({x:t.ji.x.getInnerEnd(),y:t.ji.y.getInnerStart()},{x:-3,y:3+h}),e={x:s.x-i.x,y:s.y-i.y};t.Kd.zr(i).zt(e)}r&&r.fe()};return r=i.AB("logo",Number.MAX_SAFE_INTEGER),s=>{const n={ji:s};return(s=>{const n=e&&"cGx1Z2lu"in e&&"cHl0aG9u"===e.cGx1Z2lu?Fp:Tp;if(s.Kd&&s.Kd.dispose(),r){let e;s.Kd=r.Rr(s.ji).Er(u).setPointerEvents(!0).Dr(_r),s.Kd.addEventListener("pointerenter",(()=>{e=i.yo(t.MouseStyles.Point)})),s.Kd.addEventListener("pointerleave",(()=>{e=i.po(e)})),s.Kd.addEventListener("click",n),c(s)}})(n),o.push(n),{Sh:()=>c(n),It:()=>(t=>{t.Kd&&(t.Kd.dispose(),t.Kd=void 0);const s=o.indexOf(t);s>=0&&o.splice(s,1),o.length<=0&&i.cl.removeEventListener("logochange",l)})(n)}}},Tp=()=>Or.open("https://lightningchart.com/lightningchart-js/"),Fp=()=>Or.open("https://lightningchart.com/python-charts/");class Ip{constructor(){this.hD=this.oD.bind(this),Or.addEventListener("scroll",this.hD,{passive:!0})}It(){this.hD&&Or.removeEventListener("scroll",this.hD),this.hD=void 0}}class Lp{constructor(t,i){this.q=t,this.Bt=i,this.aD=!0,this.lD=null,this.uD=null}}class Pp{constructor(t){this.cD=!1,this.dD=1,this.fD=t,this.vD={q:e(0,0),Bt:e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),aD:!0,lD:null,uD:null},this.AD=e(64,64),this.gD=new Uint8ClampedArray(this.AD.x*this.AD.y*this.dD)}yD(t,i){if(!t.aD)return null;if(t.lD&&t.uD){const s=this.yD(t.lD,i);return null!==s?s:this.yD(t.uD,i)}const s=r(t.Bt.x,t.Bt.y);if(t.q.x+t.Bt.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.AD.x-t.q.x-1),t.q.y+t.Bt.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.AD.y-t.q.y-1),t.Bt.x===i.x&&t.Bt.y===i.y)return t.aD=!1,t;if(s.x<i.x||s.y<i.y)return null;let n,h;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.Bt.x>t.Bt.y)),l?(n=new Lp(Lh(t.q,{x:0,y:1}),e(t.Bt.x,i.y)),h=new Lp(Lh(t.q,{x:0,y:i.y+1}),e(t.Bt.x,t.Bt.y-1-i.y))):(n=new Lp(Lh(t.q,{x:1,y:0}),e(i.x,t.Bt.y)),h=new Lp(Lh(t.q,{x:i.x+1,y:0}),e(t.Bt.x-1-i.x,t.Bt.y))),t.lD=n,t.uD=h,this.yD(t.lD,i)}pD(t,i){const s={mD:!1,q:null};let r=this.yD(this.vD,i);if(null===r)for(;null===r&&this.AD.x<this.fD&&this.AD.y<this.fD;){if(!this.SD(e(2*this.AD.x,2*this.AD.y)))return this.cD=!0,null;s.mD=!0,r=this.yD(this.vD,i)}if(null===r)return this.cD=!0,null;for(let s=0;s<i.y;s+=1)for(let e=0;e<i.x;e+=1){const n=r.q.y+s,h=r.q.x+e;this.gD[n*this.dD*this.AD.x+h*this.dD+0]=t[s*this.dD*i.x+e*this.dD+0]}return s.q=r.q,s}SD(t){if(t.x>this.fD||t.y>this.fD)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.dD);for(let s=0;s<this.AD.y;s+=1)for(let e=0;e<this.AD.x;e+=1)i[s*t.x*this.dD+e*this.dD+0]=this.gD[s*this.AD.x*this.dD+e*this.dD+0];return this.AD=t,this.gD=i,!0}}class Bp{constructor(t){this.bD=new Map,this.fD=t,this.bD.set(this.bD.size,new Pp(this.fD))}xD(t){return this.bD.get(t)}pD(t,i){let s=-1;const e=Array.from(this.bD.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.cD){s=t;break}}-1===s&&(s=this.bD.size,this.bD.set(this.bD.size,new Pp(this.fD)));const r=this.bD.get(s);if(!r)return null;let n=r.pD(t,i);if(!n&&r.cD){const e=this.bD.size,r=new Pp(this.fD);this.bD.set(e,r),s=e,n=r.pD(t,i)}return n?{MD:s,...n}:null}}var Dp;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(Dp||(Dp={}));const Ep=Ln("font-texture");class Rp{constructor(t){this.wD=new Map,this._D=new Map,this.ss=Ep(),this.kD=t,this.CD=new Bp(this.kD.TD||4096)}rd(){return this._D.forEach((t=>{this.kD.FD(t)})),this._D.clear(),this}ID(t,i){const s=this.wD.get(i);if(s)return s.get(t)}LD(t,i,s){let e=this.wD.get(i);if(e||(e=new Map,this.wD.set(i,e)),e.has(t.glyph))return Dp.Success;const r=this.CD.pD(s,t.size);if(!r||!r.q)return Dp.Fail;r.mD&&this.PD();const n=this.CD.xD(r.MD);if(!n)return Dp.Fail;let h=this._D.get(r.MD);if(!h){const t=this.kD.gl.createTexture();if(!t)throw new mp("Failed to create texture for font!");h=t,this._D.set(r.MD,t)}const o=r.q,a=n.AD.x,l=n.AD.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,v=o.x/a,A=(o.y+t.size.y)/l,g=(o.x+t.size.x)/a,y=o.y/l,p=[v,A,g,A,v,y,v,y,g,A,g,y],m=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:m,texCoords:p,packerId:r.MD,texture:h};e.set(t.glyph,S);const b=this.kD.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,h),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,n.AD.x,n.AD.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.kD.BD?n.gD:new Uint8Array(n.gD)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),r.mD?Dp.Resize:Dp.Success}PD(){this.wD.forEach((t=>{t.forEach(((i,s)=>{const e=this.CD.xD(i.packerId);if(!e)return;const r=i.origin,n=e.AD.x,h=e.AD.y,o=r.x/n,a=(r.y+i.size.y)/h,l=(r.x+i.size.x)/n,u=r.y/h,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const Op=t=>(i,s)=>s%2?i:i+t;class zp{constructor(t){this.DD=new Map,this.ED=Ln("font"),this.RD=new Map,this.OD=new Set,this.kD=t}rd(t=!1){return(t||0===this.OD.size)&&(this.DD.forEach(((t,i)=>{t.rd(),this.DD.delete(i)})),this.OD.clear()),this}Pd(t){this.OD.add(t)}zD(t){this.OD.delete(t)}VD(t,i,s,e){const r=Or.devicePixelRatio,n=`${e?"dark":"light"} - ${iu(i,r).id}`,h=this.RD.get(n),o=this.DD.get(h);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*r,v=Math.round(1*i.size*r);let A=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.ID(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(v-1))}u+=f,A=!0}}const g=Sa(u/r,(l-a+1)/r,s);return{x:g.x,y:g.y,isEstimate:A}}ND(t,i,s){const r=`${s?"dark":"light"} - ${i.id}`;let n=this.RD.get(r);n||(n=this.ED(),this.DD.set(n,new Rp(this.kD)),this.RD.set(r,n));const h=this.DD.get(n);if(!h)throw new mp("Failed to get font texture!");let o=0,l=0,u=0;const c=t.split(""),d=new Map;let f=0;const v=i.properties.size;for(let t=0;t<c.length;t+=1){const e=c[t],r=Math.ceil(f);let n=h.ID(e,v);if(!n){const r=this.kD.GD(e,i.properties,i.dpr,s);if(!r)continue;const a=h.LD(r[1],v,r[0]);if(a===Dp.Resize){this.OD.forEach((t=>{t.Kl.o=!0})),t=-1,f=0,l=0,o=0,d.clear(),this.kD.Ki.fe(!0);continue}if(a===Dp.Fail)throw new mp("Failed to create glyph");if(n=h.ID(e,v),!n)throw new mp("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(Op(r))),t.texCoords.push(...n.texCoords),l=Math.max(l,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}u=f;const A=a(e(0,o),e(u,l)),g=[];return d.forEach(((t,i)=>{g.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[g,A]}}const Vp={roundUnsigned:{$D:"roundUnsigned",UD:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{$D:"linearStep",UD:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},dither:{$D:"dither",UD:"\nconst mat4x4 bayerMatrix4x4 = mat4x4(\n    0.0,  8.0,  2.0, 10.0,\n    12.0, 4.0,  14.0, 6.0,\n    3.0,  11.0, 1.0, 9.0,\n    15.0, 7.0,  13.0, 5.0\n) / 16.0;\n\nvec4 dither(vec2 pos, vec4 c0, vec4 c1, float s0, float s1, float mixVal)\n{\n    float step = linearStep(s0, s1, mixVal);\n    int x = int(pos.x) % 4;\n    int y = int(pos.y) % 4;\n    float threshold = bayerMatrix4x4[y][x];\n    vec4 color = mix(c0, c1, step * 0.95 + threshold * 0.05);\n    return color;\n}"},decodeUbyteRGBAEncodedFloat:{$D:"decodeUbyteRGBAEncodedFloat",UD:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{$D:"texelFetchWithFallback",UD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{$D:"texelFetchWithFallback",UD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{$D:"texelFetchUnsignedWithFallback",UD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{$D:"texelFetchUnsignedWithFallback",UD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{$D:"modulus",UD:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{$D:"computeScreenSpaceWireframe",UD:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},Np="posAxis",Gp="posWorld",$p="normal",Up="colorFragment",jp="antiAliasFactor",Yp="mousePickingIdOffset",Hp="uRatioPxClip",Wp="uRatioNwuWu",Xp="uColorTexture",Zp="uSizePixels",Jp="uOffsetAlignment",Qp="uMaskTexture",Kp="aNormal",qp="Rot";class tm{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>im(t)));for(const s of i)t=s(t);return`${On(this.modifiers.filter((t=>em(t)))).map((t=>t.UD)).join("\n")}\n${t}`}}const im=t=>"function"==typeof t,sm={$D:"ratioPxClip",UD:`uniform vec2 ${Hp};`},em=t=>t&&"object"==typeof t&&"$D"in t,rm=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},nm=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),hm=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},om=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),r=new RegExp(`(.*${t}.*)`),n=s.replace(r,`${e}\n$1`);return i.forEach((i=>{if(!n.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${n}\n)`)})),n},am=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const r=e.join("\n"),n=s.lastIndexOf(t),h=s.substring(n),o=h.indexOf("\n"),a=h.substring(o),l=`${s.substring(0,n+o)}\n${r}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},lm=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},um=(t,i)=>s=>{let e,r;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=rm(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=rm(t)(s),r=i.split(" ")[2].replace(";","")}else r=i;return lm(`\t${r} = ${e};`)(s)},cm=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},dm=(t,i)=>{const s=i.steps,e=s.length-1,r=[rm("uniform vec4 uFallbackColor")],n=[],h=[];for(let t=0;t<i.steps.length;t+=1)n.push(`uniform float uLUTValue${t}`),h.push(`uniform vec4 uLUTColor${t}`);return r.push(rm(...n,...h),i.percentageValues&&rm("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?r.push(am(`${Up} =`,"vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${Tr}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),`${Up} = colorLookup`)):r.push(am(`${Up} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${Tr}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,`${Up} = colorLookup`)),r},fm=[rm(`uniform sampler2D ${Qp}`),rm("varying vec2 vMaskTextureCoord"),am(`${jp} =`,`vec4 maskTextureSample = texture2D(${Qp}, vMaskTextureCoord)`,`${jp} = maskTextureSample.r`)],vm=[rm(`uniform sampler2D ${Qp}`),rm("varying vec2 vMaskTextureCoord"),am(`${jp} =`,`vec4 maskTextureSample = texture2D(${Qp}, vMaskTextureCoord)`,`${jp} = maskTextureSample.a`)],Am=[rm("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),am(`${Up} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${Up}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${Up} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${Up}.a)`)],gm=(t,...i)=>{var s,e;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const r=i[0];return{vertexShaderModifiers:[rm("varying vec4 d"),lm(`d = vec4(${i[0]}.x, ${i[0]}.y, ${null!==(s=i[1])&&void 0!==s?s:r}.x, ${null!==(e=i[1])&&void 0!==e?e:r}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[rm("varying vec4 d"),lm("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class ym extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const pm=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const r=Object.keys(e).sort();for(const s of r){const r=e[s];"object"==typeof r&&r.__proto__===Object.prototype||Array.isArray(r)?t.push({prefix:s,obj:r}):i+=`${s}=${String(r)},`}}}return i},mm=t=>void 0!==t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.YD})),Sm=t=>void 0!==t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.HD})),bm=(t,i,...s)=>{const e=[],r=i?"vec3":"vec2",{axisWorldTranslation:n,scaling:h,translation:o,flipXY:a,flipXZ:l,offsets:u,splitPosAttribute:c,normalSource:d}=t,f=[];"attribute"===d&&e.push(rm(`attribute vec3 ${Kp}`),hm(`vec3 ${$p} = ${Kp}`)),"linear-highPrecision"!==n?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?f.push(`${r} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${r} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):s.forEach((i=>{!0!==t.splitPosAttribute?f.push(`${r} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`,`${r} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`):f.push(`${r} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`,`${r} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`)}));const v=(t=>{if(t)for(const s of t){const t=(null==(i=s)?void 0:i.rotation)&&i.rotation.dataType;if(void 0!==t&&!1!==t)return t}var i})(u);if("attribute-deg"===v&&e.push(rm("attribute float aRotDeg"),rm("uniform float uBaseRotDeg")),"attribute"===v&&e.push(rm("attribute vec2 aRot")),"uniform"===v&&e.push(rm("uniform vec2 uRot")),null==u||u.forEach((t=>{if(t&&t.rotation){const i=t.rotation.dataType,s="uniform"===i?"u":"a";if("attribute-deg"===i){const i=t.directionVar,s=`c${qp}`;e.push(hm(`vec2 ${t.directionVar}Rot = vec2(${i}.x * ${s}.y + ${i}.y * ${s}.x, ${i}.y * ${s}.y - ${i}.x * ${s}.x)`))}else{const i=`${s}${qp}`,r=t.directionVar;e.push(hm(`vec2 ${t.directionVar}Rot = vec2(${r}.x * ${i}.y + ${r}.y * ${i}.x, ${r}.y * ${i}.y - ${r}.x * ${i}.x)`))}}})),null==u?void 0:u.find((t=>(null==t?void 0:t.rotation)&&"attribute-deg"===t.rotation.dataType))){const t=`c${qp}`;e.push(hm(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`))}if(u&&u.forEach((t=>{t&&!0!==t.skipAddDefinition&&e.push(rm(`attribute ${r} ${t.directionVar}`))})),!0===a){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===l){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(h){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===h.dataType?"a":"u")+"Scaling",r=i?"vec3":"vec2";e.push(rm(`${h.dataType} ${r} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",r=i?"vec3":"vec2";e.push(rm(`${o.dataType} ${r} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(null==u||u.forEach((t=>{if(t&&"axis"===t.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const h=("attribute"===t.dataType?"a":"u")+"OffsetAxis",o=!0===t.symmetric?"float":r;e.push(rm(`${t.dataType} ${o} ${h}`));const a=t.halved?" * 0.5":"",l=t.rotation?`${t.directionVar}Rot`:t.directionVar,u="offsetGeometry";f.push(`${r} ${u} = ${h} * ${l}${a} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${r} ${$p} = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}})),void 0===n||"linear"===n)e.push(rm(`uniform ${r} uDisp`,`uniform ${r} uScale`)),s.forEach((t=>{f.push(`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===n)e.push(rm(`uniform ${r} uDisp`,`uniform ${r} uScale`,`uniform ${r} uScaleStart_highpart`,`uniform ${r} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${r} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${r} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===n)e.push(rm("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===n)e.push(rm("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===n[0]){e.push(rm(`uniform ${r} uScaleStart`,`uniform ${r} uScaleStartLog`,`uniform ${r} uScaleInterval`,`uniform ${r} uScaleIntervalLog`,`uniform ${r} uViewportStart`,`uniform ${r} uViewportSize`));const t=i?["x","y","z"]:["x","y"],h=[];t.forEach((t=>{const i=n[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Yh(t).toFixed(1)})`;h.includes(s)||h.push(s)}})),e.push(rm(...h)),s.forEach(((i,s)=>{const e=`${s}`,h=[];t.forEach((t=>{const s=t.toUpperCase(),r=n[1][t];if(void 0===r)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const n=r.base,h="e"===n;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${h?"":` * cLog${n}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}h.push(`posPercent${s}${e}`)})),f.push(`${r} ${i.variableNameWorldCoord} = uViewportStart + ${r}(${h.join(", ")}) * uViewportSize`)}))}return null==u||u.forEach((t=>{if(t&&"px"===t.sizeUnit){e.push(sm);let i="vec2(0.0, 0.0)";if(t.useAlignment&&(e.push(rm(`uniform vec2 ${Jp}`)),i=Jp),s.find((t=>t.overrideOffsetPixels)))s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${Hp}`)}));else{const n=`${t.directionVar}Amount`,h=!0===t.symmetric?"float":r;e.push(rm(`${t.dataType} ${h} ${n}`));const o=t.halved?" * 0.5":"";let a;if(!1!==t.useGeometry){const s=t.rotation?`${t.directionVar}Rot`:t.directionVar;a=`(${s} + ${i}) * ${n}${o} * ${Hp}`}else a=`${n}${o} * ${Hp}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${a}`)}))}}if(t&&"scale"===t.sizeUnit){e.push(sm),e.push(rm(`uniform vec2 ${Zp}`));let i="vec2(0.0, 0.0)";t.useAlignment&&(e.push(rm(`uniform vec2 ${Jp}`)),i=Jp);const r=("uniform"===t.dataType?"u":"a")+"OffsetScale";e.push(rm(`${t.dataType} float ${r}`));const n=`(${t.rotation?`${t.directionVar}Rot`:t.directionVar} + ${i}) * ${r} * ${Zp} * ${Hp}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${n}`)}))}if(t&&"wu"===t.sizeUnit){const n=("attribute"===t.dataType?"a":"u")+"OffsetWU",h=!0===t.symmetric?"float":r;e.push(rm(`${t.dataType} ${h} ${n}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${r} ${l} = ${n} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${r} ${$p} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(t&&"nwu"===t.sizeUnit){e.push(rm(`uniform float ${Wp}`));const n=("attribute"===t.dataType?"a":"u")+"OffsetNWU",h=!0===t.symmetric?"float":r;e.push(rm(`${t.dataType} ${h} ${n}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${r} ${l} = ${n} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${r} ${$p} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${Wp}`)}))}})),t.snapToNearestPixel&&(e.push(rm("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(om("gl_Position =",...f)),e},xm=(t,i,s,e)=>{const r=[],n=t.axisWorldTranslation,h=i?"vec3":"vec2";if("linear"===n)r.push(am(s,`${h} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===n)r.push(am(s,`${h} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==n[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${h} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),r=n[1][i];if(void 0===r)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const n=r.base,h="e"===n?"1.0":`cLog${n}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${h})`)}})),t.push(`${h} ${e} = ${h}(posXBack, posYBack${i?", posZBack":""})`),r.push(am(s,...t))}}return r},Mm=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.WD})))(t)?[nm("attribute vec4 aColor"),nm("vColor = aColor"),rm("attribute vec4 aColorA"),rm("attribute vec4 aColorB"),lm("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],wm=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.XD})))(t)?[nm("attribute float aLookupValue"),nm("vLookupValue = aLookupValue"),rm("attribute float aLookupValueA"),rm("attribute float aLookupValueB"),lm("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],_m={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",jD:{YD:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${pm(t)}`,idFragment:void 0,vertexShaderModifiers:[rm(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),lm(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:i=>{const s=i&&i.dataType,e=i&&i.maskTextureText,r=i&&i.maskTexture,n=i&&i.overrideOpacity;return{idFeature:"Color",jD:{HD:!(!Array.isArray(i.dataType)||"value"===i.dataType[1])||void 0,XD:!(!Array.isArray(i.dataType)||"value"!==i.dataType[1])||void 0,WD:"attribute"===i.dataType||void 0},apply:(h,o)=>{let a,l=`Color:${pm(i)}`;const u=[];let c="FragmentShader";const d=[];if("uniform"===s)d.push(rm("uniform vec4 uColor"),am(`${Up} =`,`${Up} = uColor`),...e?fm:[],...r?vm:[]);else if("attribute"===s)a="colorAttribute",u.push(um("attribute vec4 aColor","varying vec4 vColor")),d.push(rm("varying vec4 vColor"),am(`${Up} =`,`${Up} = vColor`),...e?fm:[],...r?vm:[]);else if("texture"===s)a="colorTexCoord",u.push(um("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),d.push(rm("varying vec2 vTextureCoord"),rm(`uniform sampler2D ${Xp}`),rm("uniform vec4 uColor"),am(`${Up} =`,`${Up} = texture2D(${Xp}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${Up} = uColor;\n                    }`),...e?fm:[],...r?vm:[]);else if("texture-coord-calc-gpu"===s)a="colorTexCoord",c="Empty",u.push(rm("attribute vec2 aTextureCoord"),rm("varying vec2 vTextureCoord"),lm("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),d.push(rm("varying vec2 vTextureCoord"),rm(`uniform sampler2D ${Xp}`),hm(`vec4 ${Up} = texture2D(${Xp}, vTextureCoord)`,`gl_FragColor = ${Up};`));else if(Array.isArray(s)&&"image"===s[0])a="colorTexCoord",u.push(um("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),s[1].fitMode===t.ImageFitMode.Tile?d.push(rm(`uniform sampler2D ${Xp}`),rm("varying vec2 vTextureCoord"),am(`${Up} =`,`${Up} = texture2D(${Xp}, vTextureCoord);`)):d.push(rm(`uniform sampler2D ${Xp}`),rm("varying vec2 vTextureCoord"),rm("uniform vec4 uColor"),am(`${Up} =`,`${Up} = texture2D(${Xp}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${Up} = uColor;\n                            }`));else if(Array.isArray(s)&&"lookup"===s[0]){const t=s[1];if("value"===t)a="lookup:value",u.push(um("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${Np}.${t}`;a=`lookup:${t}`,u.push(um(i,"varying float vLookupValue"))}d.push(rm("varying float vLookupValue"),...dm("vLookupValue",s[2]),...e?fm:[],...r?vm:[])}else if(Array.isArray(s)&&"gradient"===s[0]){const t=s[1],i=t.getColorStops();if(Ee(t)){const s="webgl2"===o&&!!((f=t)&&"object"==typeof f&&"type"in f&&"fillstyle"===f.type&&"fillType"in f&&"radial-gradient"===f.fillType&&!0===f.ditheringEnabled);l=`rgradient${i.length},${r},${e},${s}`,d.push(rm("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),rm(...Yr(i.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),Vp.linearStep,s?Vp.dither:void 0,am(`${Up} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)",s?"vec4 color = dither(gl_FragCoord.xy, color_0, color_1, stop_0, stop_1, mixVal)":"vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...i.map(((t,i)=>i<2?"":s?`color = dither(gl_FragCoord.xy, color, color_${i}, stop_${i-1}, stop_${i}, mixVal);`:`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),`${Up} = color`),...e?fm:[],...r?vm:[])}else ze(t)&&(l=`lgradient${i.length},${r},${e}`,d.push(rm("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),rm(...Yr(i.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),Vp.linearStep,am(`${Up} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...i.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),`${Up} = color`),...e?fm:[],...r?vm:[]))}var f;if(e||r){const t="maskTexture";a=a?`${a} ${t}`:`Color:${t}`,u.push(um("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return n&&d.push(rm("uniform float uOpacity"),am(`${Up} =`,`${Up}.a *= uOpacity`)),{vertexShaderModifiers:u,fragmentShader:c,fragmentShaderModifiers:d,idVertex:a,idFragment:l}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let r=s;const n=`ColorShaded3D:${pm(t)}`;return{idFeature:"ColorShaded3D",jD:{HD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,XD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,h)=>{const o=[],a=[];if(o.push("phong"===s&&um($p,"varying vec3 vNormal"),um(Gp,"varying vec3 vPosWorld")),"uniform"===i)a.push(rm("uniform vec4 uColorDiffuse"),am(`${Up} =`,`${Up} = uColorDiffuse`));else if("attribute"===i)r+=",per-vertex-color",o.push(um("attribute vec4 aColor","varying vec4 vColor")),a.push(rm("varying vec4 vColor"),am(`${Up} =`,`${Up} = vColor`));else if(Array.isArray(i)){const t=i[1];if("value"===t)r+=",lookup:value",o.push(um("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${Np}.${t}`;r+=`,lookup:${t}`,o.push(um(i,"varying float vLookupValue"))}a.push(rm("varying float vLookupValue"),...dm("vLookupValue",i[2]))}return e&&(r+=",wireframe",o.push(um("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(rm("varying vec3 vTriangleBary"),rm("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Vp.computeScreenSpaceWireframe,am(`${Up} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${Up} = mix(${Up}, uWireframeColor, edge)`))),"phong"===s&&a.push(...Am),{idVertex:r,idFragment:n,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=gm(t.axisWorldTranslation,"posAxis_hprecision"),e=[],r=mm(i),n=t.coordType?t.coordType:r?"vec3":"vec2";return t.isInstanceRectangleRendering?e.push(rm("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),hm("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(rm(`attribute ${n} aPos`)):e.push(rm("attribute float aPosX"),rm("attribute float aPosY"),r&&rm("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(rm("attribute float aPos_highpartX"),rm("attribute float aPos_lowpartX"),rm("attribute float aPos_highpartY"),rm("attribute float aPos_lowpartY")):e.push(rm(`attribute ${n} aPos_highpart`),rm(`attribute ${n} aPos_lowpart`)),e.push(...bm(t,r,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:Np,variableNameWorldCoord:Gp})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${pm(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(rm("attribute vec3 aGeoPos"),rm("uniform mat4 uModelRotation"),rm("uniform mat4 uModelRotationNormals"),rm("uniform vec3 uLocationAxis"),rm("uniform vec3 uModelAlignment"),rm("uniform vec3 uModelScale"),rm("uniform vec3 uModelSize"),...bm({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),om("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&am(`vec3 ${$p} =`,` ${$p} = (uModelRotationNormals * vec4(${$p}, 1.0)).xyz;`),...Sm(i)?xm({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,Gp,Np):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${pm(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=gm(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision"),s=t.offsets&&t.offsets[0];return{idFeature:"LineInstanced2D",apply:e=>({idVertex:`LineInstanced2D:${pm(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[rm("uniform float uThicknessPixels"),sm,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[rm("attribute vec2 aLocationA"),rm("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[rm("attribute vec2 aLocationA_highpart"),rm("attribute vec2 aLocationB_highpart"),rm("attribute vec2 aLocationA_lowpart"),rm("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[rm("attribute float aLocationAX"),rm("attribute float aLocationAY"),rm("attribute float aLocationBX"),rm("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[rm("attribute float aLocationA_highpartX"),rm("attribute float aLocationA_highpartY"),rm("attribute float aLocationB_highpartX"),rm("attribute float aLocationB_highpartY"),rm("attribute float aLocationA_lowpartX"),rm("attribute float aLocationA_lowpartY"),rm("attribute float aLocationB_lowpartX"),rm("attribute float aLocationB_lowpartY")]:[],rm("attribute vec2 aSegmentPosition"),rm("attribute float aSegmentSide"),s&&rm(`attribute vec2 ${s.directionVar}A`,`attribute vec2 ${s.directionVar}B`),...bm({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:s?`${s.directionVar}A`:void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:s?`${s.directionVar}B`:void 0}),t.ensureMinimumSegmentLength&&rm("uniform vec2 uMinSegmentPixelVector"),am("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${Gp} = offset + thicknessDirection * uThicknessPixels * ${Hp}`),...wm(e),...Mm(e),...Sm(e)?xm({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,Gp,Np):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=gm(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${pm(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[rm("attribute vec2 aLocationA"),rm("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[rm("attribute vec2 aLocationA_highpart"),rm("attribute vec2 aLocationB_highpart"),rm("attribute vec2 aLocationA_lowpart"),rm("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[rm("attribute float aLocationAX"),rm("attribute float aLocationAY"),rm("attribute float aLocationBX"),rm("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[rm("attribute float aLocationA_highpartX"),rm("attribute float aLocationA_highpartY"),rm("attribute float aLocationB_highpartX"),rm("attribute float aLocationB_highpartY"),rm("attribute float aLocationA_lowpartX"),rm("attribute float aLocationA_lowpartY"),rm("attribute float aLocationB_lowpartX"),rm("attribute float aLocationB_lowpartY")]:[],rm("attribute float aCurveOrBaseline"),rm("attribute float aSegmentSide"),...bm(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),am("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${Gp} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...wm(i),...Mm(i),...Sm(i)?xm(t,!1,Gp,Np):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${pm(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[rm("uniform float uOffsetWU"),rm("attribute vec3 aLocationA"),rm("attribute vec3 aLocationB"),rm("attribute float aSegmentPosition"),rm("attribute float aPerpendHorizontal"),rm("attribute float aPerpendVertical"),...bm({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},mm(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),am("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${$p} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${Gp} = worldA + aSegmentPosition * directionBasis + ${$p} * uOffsetWU * 0.5`),...Sm(i)?xm({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,Gp,Np):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[rm("attribute vec3 aEdge"),rm("uniform float uEdgeRoundness"),am(`${Gp} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${Gp} = ${Gp} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian,r=t.aggregation;return{idFeature:"ColorGrid2D",apply:(n,h)=>({idVertex:void 0,idFragment:`ColorGrid2D:${pm(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[rm("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues",r&&"uniform vec2 uAggregationWindowSize"),"ubyte"===s&&Vp.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?hm("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):hm("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",...r?[`float intensityP = ${"max"===r?"-":""}340282346638528859811704183484516925440.0`,`for (float dy = -uAggregationWindowSize.y; dy <= uAggregationWindowSize.y; dy++) {\n                                            for (float dx = -uAggregationWindowSize.x; dx <= uAggregationWindowSize.x; dx++) {\n                                                vec2 offset = vec2(dx, dy) / uTileDimensions;\n                                                vec2 coord = ${i?"offset":"vec2(offset.y, offset.x)"} + ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"};\n                                                vec4 sample0 = texture2D(uTileIntensityValues, coord);\n                                                float intensity0 = ${"float"===s?"sample0.x;":`decodeUbyteRGBAEncodedFloat(sample0, ${e};`}\n                                                intensityP = ${"max"===r?"max":"min"}(intensityP, intensity0);\n                                            }\n                                        }`]:[`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)]),...dm("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,r=t.heightmapTextureType,n=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(h,o)=>{const a=[],l=[];return a.push(rm("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&Vp.roundUnsigned,Vp.modulus,Vp.texelFetchWithFallback[o],"ubyte"===r&&Vp.decodeUbyteRGBAEncodedFloat,hm(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(rm("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),hm("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${pm(t)}`,idFragment:`DrawToNormalTexture:${pm(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,r=t.shadingStyle,n=t.wireframe,h=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",jD:{ZD:!0},apply:(u,c)=>{const d=[],f=[];return d.push(rm("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),Vp.modulus,Vp.texelFetchWithFallback[c],"ubyte"===o&&Vp.decodeUbyteRGBAEncodedFloat,hm("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...bm({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:Np,variableNameWorldCoord:Gp})),"phong"===r&&d.push(um(Gp,"varying vec3 vPosWorld"),..."uint"===h?[Vp.texelFetchUnsignedWithFallback[c],lm("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[lm("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],lm("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),rm("varying vec3 vNormal",..."uint"===h?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(rm("varying vec3 vTriangleBary")),"uniform"===i?f.push(rm("uniform vec4 uColorDiffuse"),am(`${Up} =`,`${Up} = uColorDiffuse`)):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(um(`${Np}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(rm("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&Vp.decodeUbyteRGBAEncodedFloat,"bilinear"===s?hm("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):hm("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...dm("intensityP",i[2]))):(d.push(um(`${Np}.${i[1]}`,"varying float vLookupValue")),f.push(rm("varying float vLookupValue"),...dm("vLookupValue",i[2])))),"phong"===r&&f.push(...Am),n&&(d.push(rm("attribute vec3 aTriangleBary"),um("aTriangleBary","varying vec3 vTriangleBary")),f.push(rm("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Vp.computeScreenSpaceWireframe,am(`${Up} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?`if (edge > 0.0) {\n                                    ${Up} = vec4(mix(${Up}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${Up}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${Up} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${pm(t)}`,idFragment:`SurfaceGrid:${pm(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${pm(t)}`,idFragment:`DebugSurfaceGridNormals:${pm(t)}`,vertexShaderModifiers:[rm("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),Vp.roundUnsigned,Vp.modulus,Vp.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&Vp.decodeUbyteRGBAEncodedFloat,hm(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[Vp.texelFetchUnsignedWithFallback[s]]:[],...bm({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:Np,variableNameWorldCoord:Gp}),am("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[lm("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[rm("uniform vec3 uCameraLoc"),am("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[rm("attribute float aSegmentInside"),rm("varying float vSegmentInside"),rm("varying float vSegmentSide"),am("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[cm("#extension GL_OES_standard_derivatives : enable"),rm("uniform float uAALimit"),rm("varying float vSegmentInside"),rm("varying float vSegmentSide"),am(`${jp} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${jp} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,r=t.firstPass,n=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);n.push(r?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${pm(t)}`,idFragment:`Glow1D:${pm(t)}`,vertexShaderModifiers:[um("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[rm("uniform sampler2D uTexture"),rm("varying vec2 vTextureCoord"),rm("uniform vec2 uTextureSize"),r&&rm("uniform vec2 uOffsetPx"),!r&&rm("uniform sampler2D uTextureFirstGlowPass"),!r&&rm("uniform vec4 uGlowColor"),am(`${jp} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...r?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${jp} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${jp} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...r?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...n.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${Up} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map(((t,i)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${Up} = pixelGlowColor`])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),r=!i&&!s&&!e;return{idFeature:"MousePicking",jD:{ZD:r,JD:s},apply:(n,h)=>{const o="webgl2"===h?"flat":"",a="webgl2"===h?"int":"float";return{idVertex:`MousePicking:${pm(t)}`,idFragment:`MousePicking:${pm(t)}`,vertexShaderModifiers:[...r?[rm(`${o} varying ${a} vPickingIdOffset`),lm(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[rm(`${o} varying ${a} vPickingIdOffset`),lm(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[rm("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),lm(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[rm("uniform int uFirstId"),...i?[]:[rm(`${o} varying ${a} vPickingIdOffset`),hm(`int ${Yp} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],am(`${Up} =`,`int remainder = ${Yp} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${Up} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${jp})`,`if (${jp} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[um("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[rm("attribute vec2 aLengthSoFar"),rm("varying float vLengthSoFar"),rm("uniform vec2 uStippleCount"),lm("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[rm("uniform sampler2D uStippleTexture"),rm("uniform float uStippleScale"),rm("varying float vLengthSoFar"),"webgl1"===i&&rm("uniform float uStippleTextureWidthLimiter"),am(`${jp} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${jp} *= stippleAA;\n                    if (${jp} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[rm("attribute vec2 aLengthSoFarA"),rm("attribute vec2 aLengthSoFarB"),rm("varying float vLengthSoFar"),rm("uniform vec2 uStippleCount"),lm("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[rm("uniform sampler2D uStippleTexture"),rm("uniform float uStippleScale"),rm("varying float vLengthSoFar"),"webgl1"===i&&rm("uniform float uStippleTextureWidthLimiter"),am(`${jp} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${jp} *= stippleAA;\n                    if (${jp} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,r="interpolation"in t?t:void 0,n=r?r.flipXY:void 0,h="bilinear"===(null==r?void 0:r.interpolation),o=null==r?void 0:r.intensityTextureType,a=null==r?void 0:r.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${pm(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[rm("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",r&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),Vp.texelFetchWithFallback[s],"ubyte"===o&&Vp.decodeUbyteRGBAEncodedFloat,hm("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),r&&am("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",n&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",n&&"cellStart = ivec2(cellStart.y, cellStart.x)",n&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&am(`${Up} =`,`${Up} = uColor`),r&&am("cellEnd","vec2 tileDimensions = "+(n?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),h&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",h&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",h&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",h&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",h&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),h&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),h&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),h&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),h&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",h&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",h&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",h&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!h&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!h&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...r?dm("intensityP",r.lut):[]]}}})},km={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Cm={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${Up} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${jp} = 1.0;\n    vec4 fragColorEnd = ${Up};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${jp});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class Tm{constructor(t,i,s,e,r){if(this.id=t,this.shader=s,this.gl=e,this.info=r,!i||!s)throw new Sp(`Could not find ${this.QD()} ${this.KD()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}QD(){return this.id.toString()}KD(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Fm extends Tm{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Im extends Tm{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Lm{constructor(t,i,s,e){this.qD=new Map,this.tE=new Map,this.iE=s,this.sE=s.createProgram(),this.eE=`${t.QD()} vertex`,this.rE=`${i.QD()} fragment`,s.attachShader(this.sE,t.shader),s.attachShader(this.sE,i.shader),s.bindAttribLocation(this.sE,0,"aPos"),s.linkProgram(this.sE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}nE(t){return Dn(0,(()=>En()))}hE(t){const i=this.oE(t);if(void 0===i)throw this.nE(`Could not get ${t} uniform from ${this.eE} and ${this.rE} shaders.`);return i}oE(t){const i=this.qD.get(t);if(i)return i;const s=this.iE.getUniformLocation(this.sE,t);return s?(this.qD.set(t,s),s):void 0}aE(t){const i=this.lE(t);if(void 0===i)throw this.nE(`Could not get ${t} attribute from ${this.eE} and ${this.rE} shaders.`);return i}lE(t){const i=this.tE.get(t);if(i||0===i)return i;const s=this.iE.getAttribLocation(this.sE,t);return s>=0?(this.tE.set(t,s),s):void 0}It(){this.iE.deleteProgram(this.sE)}}const Pm=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Bm=t=>{let i;try{i=Or.getComputedStyle(t)}catch(t){return null}return i};
/**
     * stacking-order by Rich Harris
     * https://github.com/Rich-Harris/stacking-order
     *
     * @license MIT
     *
     * Converted to TypeScript and edited to match LCJS requirements.
     */function Dm(t){const i=Bm(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=Bm(zm(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!Pm.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function Em(t){let i=t.length;for(;i--;)if(Dm(t[i]))return t[i];return null}function Rm(t){var i;return t&&Number((null===(i=Bm(t))||void 0===i?void 0:i.zIndex)||0)||0}function Om(t){const i=[];for(;t;)i.push(t),t=zm(t);return i}function zm(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}const Vm=t=>t&&"resize"in t;class Nm extends Ip{constructor(t){if(super(),this.uE=new Map,this.cE=new Map,this.dE=new Map,this.fE=!0,this.vE=null,this.AE=null,this.gE=null,this.yE=null,this.pE=0,this.mE=0,this.SE=0,this.bE=!1,this.xE=!0,this.Wi=!1,this.ME=Ln(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.Bt={x:100,y:100},this.wE=()=>{this._E&&clearTimeout(this._E),this._E=setTimeout((()=>this.Da()),12)},this.kE=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.uE.get(s);if(t){const e=t.CE();t.TE(i),i?this.cE.set(s,t):this.cE.delete(s),e!==i&&t.fe()}}},this.FE=(t,i,s,e,r)=>{const n=r[0],h=this.gl;if(h.bindFramebuffer(null==h?void 0:h.FRAMEBUFFER,null),h.useProgram(this.AE.sE),h.clear(h.COLOR_BUFFER_BIT),n.mo.getBoundingClientRect()){const t=n.IE();h.viewport(0,0,t.x,t.y),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,n.LE),h.uniform1i(this.pE,0),h.uniformMatrix4fv(this.mE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h.bindBuffer(h.ARRAY_BUFFER,this.gE),h.enableVertexAttribArray(0),h.vertexAttribPointer(this.SE,2,h.FLOAT,!1,0,0),h.drawArrays(h.TRIANGLES,0,6),h.bindFramebuffer(h.FRAMEBUFFER,null),n.PE&&(n.PE.clearRect(0,0,n.PE.canvas.width,n.PE.canvas.height),n.PE.drawImage(this.BE,0,this.BE.height-t.y,t.x,t.y,0,0,n.PE.canvas.width,n.PE.canvas.height))}},this.DE=(t,i,s,e,r)=>{const n=this.gl;n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.AE.sE),n.clear(n.COLOR_BUFFER_BIT),r.forEach((s=>{const r=s.mo.getBoundingClientRect();if(r){const s=r.right-r.left,h=r.bottom-r.top,o=r.left,a=e-r.bottom;n.viewport(o*this.EE-t*this.EE,a*this.EE+i*this.EE,s*this.EE,h*this.EE)}n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s.LE),n.uniform1i(this.pE,0),n.uniformMatrix4fv(this.mE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.gE),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.SE,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6)})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.RE=(t,i,s,e,r)=>{const n=r[0],h=this.gl2.ctx;h.bindFramebuffer(h.DRAW_FRAMEBUFFER,null),h.clear(h.COLOR_BUFFER_BIT);const o=n.IE();h.bindFramebuffer(h.READ_FRAMEBUFFER,n.OE[1]),h.blitFramebuffer(0,0,o.x,o.y,0,this.BE.height-o.y,o.x,this.BE.height,h.COLOR_BUFFER_BIT,h.LINEAR),n.PE&&(n.PE.clearRect(0,0,n.PE.canvas.width,n.PE.canvas.height),n.PE.drawImage(this.BE,0,0)),h.bindFramebuffer(h.FRAMEBUFFER,null)},this.zE=(t,i,s,e,r)=>{const n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT),r.forEach((s=>{const r=s.mo.getBoundingClientRect();if(r){const h=r.right-r.left,o=r.bottom-r.top,a=r.left,l=e-r.bottom,u=s.IE();n.bindFramebuffer(n.READ_FRAMEBUFFER,s.OE[1]),n.blitFramebuffer(0,0,u.x,u.y,a*this.EE-t*this.EE,l*this.EE+i*this.EE,(a-t+h)*this.EE,(l+i+o)*this.EE,n.COLOR_BUFFER_BIT,n.LINEAR)}})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this._E=void 0,this.fl=t,!Or.requestAnimationFrame||!Or.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.VE)i=!0===t.VE?Or.devicePixelRatio||1:t.VE||1;else{const t=Or.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=Or.devicePixelRatio||1)}this.EE=i,t.vl=!0===t.vl,this.xE=!1!==t.NE,this.GE=!1!==t.$E,this.UE=t.UE||!1;let s=!1;if(t.BE)if("string"==typeof t.BE){const i=Or.document.getElementById(t.BE);if(!i)throw new Error(`Canvas "${t.BE}" doesn't exist.`);this.BE=i,s=!0}else this.BE=t.BE,s=!0;else this.BE=Or.document.createElement("canvas");const r={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.jE&&t.jE){const i=this.BE.getContext("webgl",{...r,antialias:!!t.NE})||this.BE.getContext("experimental-webgl",{...r,antialias:!!t.NE});this.gl=i,this.YE=!1}else{const t=this.BE.getContext("webgl2",r);this.gl2={ctx:t},this.gl=t,this.YE=!0}if(!this.gl)throw new mp("No WebGL context available."+((null==t?void 0:t.jE)?`\nSelected explicit target: WebGL ${t.jE}`:""));const n=[];if(this.HE={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.HE).forEach((t=>{null===this.HE[t]&&n.push(t)})),this.YE)this.WE=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.fE=!1),Object.keys(t).forEach((i=>{null===t[i]&&n.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.WE=!!i.OES_texture_float,this.gl1={ctx:this.gl,HE:t,optional:i}}const h=n;if(h.length>0&&!1!==t.vl){const t=Or.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=Or.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Or.document.body.appendChild(t),t.appendChild(i),Or.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",h.join(", "))}if(this.XE=this.UE?this.ZE(this.YE?this.RE.bind(this):this.FE.bind(this)).bind(this):this.JE(this.YE?this.zE.bind(this):this.DE.bind(this)).bind(this),Or.ResizeObserver){const t=t=>{for(const i of t)i.target===this.BE&&this.QE()};this.ml=new Or.ResizeObserver(t.bind(this)),this.ml.observe(this.BE)}if(this.KE=((t,i)=>{const s=t,e=new Map,r=new Map,n=new Map,h={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const r=[],n=[],h={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&n.push(...i),t=t.replace(/#extension.*/g,"")}else if(r.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&r.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return n&&r.push(...n),r.push("precision highp float;"),r.push("precision highp int;"),{source:t=`${r.join("\n")}\n${t}`,info:h}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,v,A,g,y;try{const i=Or.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),r=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),n=`vert: ${e} frag: ${r}`;let h,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(h=t.defaultVertexShader)),t.vertexShader){if(h&&o&&h!==t.vertexShader)throw new ym(`Conflicting vertex shader templates ${h} vs ${t.vertexShader}`,n,t);h=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new ym(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,n,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!!t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.ZD}))&&("webgl1"===i?l.push(rm("attribute float aInstanceID"),hm("int iInstance = int(aInstanceID)")):l.push(hm("int iInstance = gl_InstanceID"))),!!t.find((t=>{var i;return null===(i=t.jD)||void 0===i?void 0:i.JD}))&&("webgl1"===i?l.push(rm("attribute float aVertexID"),hm("int iVertex = int(aVertexID)")):l.push(hm("int iVertex = gl_VertexID"))),!h)throw new ym("No vertex shader template defined",n);if(!u)throw new ym("Fragment shader not defined",n);return{id:n,vertexShader:{id:e,template:h,modifiers:l},fragmentShader:{id:r,template:u,modifiers:c},hints:d}})(l,a);const p=n.get(u.id);if(c="new",p)return c="existing",v=p.vertexShaderSrc,A=p.fragmentShaderSrc,p;const m=u.vertexShader.id;let S=e.get(m);if(S)v=S.src,d="existing";else{d="new";const t=new tm(u.vertexShader.modifiers).build(km[u.vertexShader.template]),{source:i,info:r}=o(t,"vertex");v=i,g=r,S=new Fm(m,i,s,r),e.set(m,S),h.vertexShaders+=1}const b=u.fragmentShader;let x;const M=b.id;if(x=r.get(M),x)A=x.src,f="existing";else{f="new";const t=Cm[b.template],i=new tm([...b.modifiers]).build(t),{source:e,info:n}=o(i,"fragment",u.hints);A=e,y=n,x=new Im(M,e,s,n),r.set(M,x),h.fragmentShaders+=1}const w=new Lm(S,x,s,u);return n.set(u.id,w),h.programs+=1,h.totalMs+=Or.performance.now()-i,w}catch(t){throw Dn(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Or.alert(t),new Error(t)}))}}})(this.gl,!this.YE),this.GD=(()=>{const t=Or.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new mp("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,r,n,h)=>{const o=`${r.style} ${r.weight} ${r.size*n}px ${r.family}`;i.font=o,i.textBaseline="alphabetic",i.textAlign="left";const a=i.measureText(s);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(r.size*n),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=l>0?l:u,t.height=2*c,i.font=o,i.textBaseline="alphabetic",i.textAlign="left",h?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let v=0,A=0;const g=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<g;i+=1)if(0!==f.data[t*g*4+4*i+3]){v=t;break}if(0!==v)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<g;i+=1)if(0!==f.data[t*g*4+4*i+3]){A=t;break}if(0!==A)break}const y=i.canvas.height/2-v,p=A-v+1,m=g,S=new Uint8ClampedArray(m*p*1);for(let t=0;t<p;t+=1)for(let i=0;i<m;i+=1)S[1*t*m+1*i+0]=f.data[(t+v)*m*4+4*i+3];return[S,{advance:u,offsetX:d,baseline:y,glyph:s,size:e(m,p)}]}})(),t.qE||(this.UE?this.BE.style.display="none":(this.BE.style.position="absolute",this.BE.style.top="0",this.BE.style.left="0",this.BE.style.right="0",this.BE.style.bottom="0",this.BE.style.width="100%",this.BE.style.height="100%",this.BE.style.boxSizing="content-box",this.BE.style.display="block",this.BE.style.pointerEvents="none")),this.BE.classList.add("lcjs-canvas"),t.tR&&this.BE.setAttribute("data-lcjs-id",t.tR),s||Or.document.body.appendChild(this.BE),Or.IntersectionObserver&&(this.iR=new Or.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.kE(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),Or.addEventListener("resize",this.wE,{passive:!0}),!this.YE){if(this.AE=this.KE(_m["2DCompose"],_m.Color({dataType:"texture-coord-calc-gpu"}),_m.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.AE.sE)throw new mp("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this.AE.sE,"uColorTexture");if(!i)throw new mp("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this.AE.sE,"uMatrix");if(!s)throw new mp("Unable to setup composition shader! Failed to find uMatrix");this.pE=i,this.mE=s,this.SE=t.getAttribLocation(this.AE.sE,"aPos"),this.gE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.yE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.yE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}ZE(t){return i=>{this.vE=null;const s=this.gl.canvas,e=Array.from(this.cE.values());this.bE=!1,e.forEach((e=>{const r=e.IE();(this.Bt.x<r.x||this.Bt.y<r.y)&&(this.Bt.x=Math.max(this.Bt.x,r.x),this.Bt.y=Math.max(this.Bt.y,r.y),s instanceof HTMLCanvasElement&&(s.width=this.Bt.x,s.height=this.Bt.y)),e.Na&&e.sR(i),t(0,0,0,0,[e])})),this.bE&&this.QE()}}JE(t){return i=>{this.vE=null,"style"in this.gl.canvas&&!this.fl.eR&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.BE.clientHeight,r=this.BE.clientWidth;let n=0,h=0;if(s instanceof HTMLCanvasElement){s.width===r*this.EE&&s.height===e*this.EE||(s.width=r*this.EE,s.height=e*this.EE);const t=s.getBoundingClientRect();n=t.x,h=t.y}const o=Array.from(this.cE.values());this.bE=!1,o.sort(((t,i)=>t.rR()-i.rR())).forEach((t=>{t.Na&&t.sR(i)})),t(n,h,r,e,o),this.bE&&this.QE()}}QE(t){return Vm(this.gl)||(!this.bE&&t&&(this.bE=!0),this.vE||this.Wi||(this.vE=Or.requestAnimationFrame(this.XE))),this}nR(t){const i=this.ME();return t.mo.setAttribute("data-lcjs-engine-id",i),this.uE.set(i,t),t.hR(this.uE.size-1),t.TE(!0),this.cE.set(i,t),this.iR&&this.iR.observe(t.mo),this._E&&clearTimeout(this._E),this._E=setTimeout((()=>this.Da()),0),this}oR(t){const i=t.mo.getAttribute("data-lcjs-engine-id");return i?(this.uE.delete(i),this.cE.delete(i),this.iR&&this.iR.unobserve(t.mo),t.mo.removeAttribute("data-lcjs-engine-id"),this):this}Da(){if(this.iR){const t=this.iR.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.kE(s)}}return!this.UE&&this.GE&&Array.from(this.uE.values()).sort(((t,i)=>function(t,i){if(t===i)return 0;const s={a:Om(t),b:Om(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const r=Rm(Em(s.a)),n=Rm(Em(s.b));if(r===n&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let r=t.length;for(;r--;){const s=t[r];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(r-n)}(t.mo,i.mo))).forEach(((t,i)=>t.hR(i))),this.QE(!0),this}oD(){return this.QE(),this}aR(){this.Wi||this.uE.forEach((t=>t.dg.layout()))}It(){var t;if(this.Wi)return;this.Wi=!0,super.It(),this.vE&&(Or.cancelAnimationFrame(this.vE),this.vE=null),this.bE=!1,this.ml&&(this.ml.disconnect(),this.ml=void 0),this.iR&&(this.iR.disconnect(),this.iR=void 0),Or.removeEventListener("resize",this.wE),this.wE=void 0,this.uE.forEach((t=>{t.It()})),this.uE.clear(),Array.from(this.dE.values()).forEach((t=>{t.rd(!0)})),this.dE.clear();const i=this.gl;i.deleteBuffer(this.gE),i.deleteBuffer(this.yE),this.BE&&!this.fl.BE?(this.BE.width=1,this.BE.height=1,null===(t=this.BE.parentElement)||void 0===t||t.removeChild(this.BE),this.BE=void 0):this.BE=void 0,this.KE=void 0,this.GD=void 0,this.XE=()=>{},this.HE.WEBGL_lose_context&&this.HE.WEBGL_lose_context.loseContext()}}const Gm=(t,i,s,e)=>r=>{const n={theme:Sy,...s,...r},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new _p(h.fl,r,h,h.It.bind(h),n,o);return h.Pl((t=>a.ed(t))).Ll((()=>a.Dt())).fe(),a},$m=(t,i)=>{t.Pl((t=>{i.Or(t)})).Ll((()=>i.Dt())).fe()},Um=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Gd(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,null==r?void 0:r.legend);return $m(h,a),a},jm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new LA(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r);return $m(h,a),a},Ym=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Gg(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r);return $m(h,a),a},Hm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new XA(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r);return $m(h,a),a},Wm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:lp)(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},Xm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Uy(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},Zm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:ug)(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},Jm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new(r&&r.type?r.type:_g)(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},Qm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new cv(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r,void 0);return $m(h,a),a},Km=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Rf(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},qm=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new by(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0);return $m(h,a),a},tS=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Iy(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},iS=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new zA(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r);return $m(h,a),a},sS=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i||e?Cp(h,e,null==s?void 0:s.licenseInformation):void 0,a=new Gy(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,r);return $m(h,a),a},eS=(t,i,s,e)=>r=>{const n={...s,...r,theme:(null==r?void 0:r.theme)||Sy},h=t(n),o=i?Cp(h,e):void 0,a=new Jy(h.fl,yp(h,1).yB(0),Xe,h.It.bind(h),o,void 0,r);return $m(h,a),a},rS={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>rS.multiply(t,rS.translation(i,s,e)),xRotate:(t,i)=>rS.multiply(t,rS.xRotation(i)),yRotate:(t,i)=>rS.multiply(t,rS.yRotation(i)),zRotate:(t,i)=>rS.multiply(t,rS.zRotation(i)),rotateXYZ(t,i){let s=rS.xRotate(t,i.x);return s=rS.yRotate(s,i.y),s=rS.zRotate(s,i.z),s},scale:(t,i,s,e)=>rS.multiply(t,rS.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],r=i[2],n=i[3],h=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],v=i[12],A=i[13],g=i[14],y=i[15],p=t[0],m=t[1],S=t[2],b=t[3],x=t[4],M=t[5],w=t[6],_=t[7],k=t[8],C=t[9],T=t[10],F=t[11],I=t[12],L=t[13],P=t[14],B=t[15],D=[];return D[0]=s*p+e*x+r*k+n*I,D[1]=s*m+e*M+r*C+n*L,D[2]=s*S+e*w+r*T+n*P,D[3]=s*b+e*_+r*F+n*B,D[4]=h*p+o*x+a*k+l*I,D[5]=h*m+o*M+a*C+l*L,D[6]=h*S+o*w+a*T+l*P,D[7]=h*b+o*_+a*F+l*B,D[8]=u*p+c*x+d*k+f*I,D[9]=u*m+c*M+d*C+f*L,D[10]=u*S+c*w+d*T+f*P,D[11]=u*b+c*_+d*F+f*B,D[12]=v*p+A*x+g*k+y*I,D[13]=v*m+A*M+g*C+y*L,D[14]=v*S+A*w+g*T+y*P,D[15]=v*b+A*_+g*F+y*B,D},inverse(t){const i=[],s=t[0],e=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],v=t[12],A=t[13],g=t[14],y=t[15],p=d*y,m=g*f,S=a*y,b=g*l,x=a*f,M=d*l,w=r*y,_=g*n,k=r*f,C=d*n,T=r*l,F=a*n,I=u*A,L=v*c,P=h*A,B=v*o,D=h*c,E=u*o,R=s*A,O=v*e,z=s*c,V=u*e,N=s*o,G=h*e,$=p*o+b*c+x*A-(m*o+S*c+M*A),U=m*e+w*c+C*A-(p*e+_*c+k*A),j=S*e+_*o+T*A-(b*e+w*o+F*A),Y=M*e+k*o+F*c-(x*e+C*o+T*c),H=1/(s*$+h*U+u*j+v*Y);return i[0]=H*$,i[1]=H*U,i[2]=H*j,i[3]=H*Y,i[4]=H*(m*h+S*u+M*v-(p*h+b*u+x*v)),i[5]=H*(p*s+_*u+k*v-(m*s+w*u+C*v)),i[6]=H*(b*s+w*h+F*v-(S*s+_*h+T*v)),i[7]=H*(x*s+C*h+T*u-(M*s+k*h+F*u)),i[8]=H*(I*l+B*f+D*y-(L*l+P*f+E*y)),i[9]=H*(L*n+R*f+V*y-(I*n+O*f+z*y)),i[10]=H*(P*n+O*l+N*y-(B*n+R*l+G*y)),i[11]=H*(E*n+z*l+G*f-(D*n+V*l+N*f)),i[12]=H*(P*d+E*g+L*a-(D*g+I*a+B*d)),i[13]=H*(z*g+I*r+O*d-(R*d+V*g+L*r)),i[14]=H*(R*a+G*g+B*r-(N*g+P*r+O*a)),i[15]=H*(N*d+D*r+V*a-(z*a+G*d+E*r)),i},projectionPerspective(t,i,s,e){const r=1/Math.tan(t*Math.PI/180/2),n=1/(s-e);return[r/i,0,0,0,0,r,0,0,0,0,(s+e)*n,-1,0,0,s*e*n*2,0]},projectionOrthographic:(t,i,s,e,r,n)=>[2/(i-t),0,0,0,0,2/(e-s),0,0,0,0,2/(r-n),0,(t+i)/(t-i),(s+e)/(s-e),(r+n)/(r-n),1],quaternionToRotationMatrix(t){const i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]),s=[t[0]/i,t[1]/i,t[2]/i,t[3]/i],e=s[0]+s[0],r=s[1]+s[1],n=s[2]+s[2],h=s[0]*e,o=s[0]*r,a=s[0]*n,l=s[1]*r,u=s[1]*n,c=s[2]*n,d=s[3]*e,f=s[3]*r,v=s[3]*n;return[1-(l+c),o-v,a+f,0,o+v,1-(h+c),u-d,0,a-f,u+d,1-(h+l),0,0,0,0,1]}};function nS(i,s,e,r,n,h){let o=s.x.pi(i.max.x),a=s.x.pi(i.min.x),l=s.y.pi(i.max.y),u=s.y.pi(i.min.y),c=o-a,d=l-u;if(c<1){const t=(a+o)/2;a=t-.5,o=t+.5,c=1}if(d<1){const t=(u+l)/2;u=t-.5,l=t+.5,d=1}const f=c/d,v=c*e.x,A=d*e.y,g=c-v,y=d-A,p=v>g?[g,v]:[v,g],m=A>y?[y,A]:[A,y];let S,b,x=1,M=1;switch(r){default:case t.GradientExtent.closestSide:if(S=p[0]/c,b=m[0]/d,n===t.GradientShape.circle){const t=Math.min(S*f,b);x=t,M=t}else x=S*f,M=b;break;case t.GradientExtent.farthestSide:if(S=p[1]/c,b=m[1]/d,n===t.GradientShape.circle){const t=Math.max(S*f,b);x=t,M=t}else x=S*f,M=b;break;case t.GradientExtent.closestCorner:if(b=m[0]/d,n===t.GradientShape.circle){S=p[0]/c*f;const t=Math.sqrt(S*S+b*b);x=t,M=t}else{S=p[0]/c;const t=Math.sqrt(S*S+b*b);x=t*f,M=t}break;case t.GradientExtent.farthestCorner:if(b=m[1]/d,n===t.GradientShape.circle){S=p[1]/c*f;const t=Math.sqrt(S*S+b*b);x=t,M=t}else{S=p[1]/c;const t=Math.sqrt(S*S+b*b);x=t*f,M=t}}return{bounds:[a*h,u*h,c*h,d*h],center:[e.x*f,e.y],distance:[Math.max(x,1e-4),Math.max(M,1e-4)],aspectRatio:f}}function hS(t,i,s,r){const n=i.x.pi(t.max.x),h=i.x.pi(t.min.x),o=i.y.pi(t.max.y),a=i.y.pi(t.min.y),l=n-h,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=e(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=e(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[h*r,a*r,l*r,u*r],startPoint:[d.x*r,d.y*r],endPoint:[f.x*r,f.y*r]}}class oS{constructor(t){this.kD=t}}class aS{constructor(){this.lR=new Array,this.uR=t=>(this.lR.push(t),t),this.cR=this.uR(new Map),this.dR=this.uR(new Map),this.fR=this.uR(new Map),this.vR=this.uR(new Map),this.AR=this.uR(new Map),this.gR=this.uR(new Map),this.yR=this.uR(new Map),this.pR=this.uR(new Map)}mR(){this.lR.forEach((t=>{t.forEach((t=>t.mR())),t.clear()}))}}const lS=(t,i,s=void 0)=>()=>{t.SR=i,s&&s()},uS=(i,s,e,r,n)=>{const h=Math.min(e/i,r/s),o=i*h,a=s*h,l=e/o,u=r/a,c=o/e,d=a/r;let f=0,v=1,A=0,g=1;switch(n){case t.ImageFitMode.Fill:u<l?(f=0,v=1,A=.5+-c/2,g=.5+c/2):(A=0,g=1,f=.5+-d/2,v=.5+d/2);break;case t.ImageFitMode.Fit:u<l?(A=0,g=1,f=.5+-l/2,v=.5+l/2):(f=0,v=1,A=.5+-u/2,g=.5+u/2);break;case t.ImageFitMode.Center:{const t=e/i,n=r/s;f=.5+-t/2,v=.5+t/2,A=.5+-n/2,g=.5+n/2}break;case t.ImageFitMode.Tile:f=0,v=e/i,A=0,g=r/s;break;case t.ImageFitMode.Stretch:default:f=0,v=1,A=0,g=1}return new Float32Array([f,g,v,g,v,A,f,A])};class cS{constructor(t,i){if(this.bR=0,this.xR=0,this.MR=!1,this.SR=!1,this.wR=!1,this._R=!1,this.kR=!1,this.CR=new Set,this.TR=new Set,this.Fe=i,this.iE=t,this.FR=null,this.MR=i instanceof Or.HTMLVideoElement,this.Fe instanceof Or.HTMLImageElement)this.Fe.addEventListener("load",(()=>{this._R=!0,this.IR()})),this.Fe.addEventListener("error",(()=>{this.kR=!0})),this.Fe.complete&&(this._R=!0,this.IR());else if(this.Fe instanceof Or.HTMLVideoElement){const t=this;this.Fe.addEventListener("canplay",(function(){t.xR=this.videoHeight,t.bR=this.videoWidth,t._R=!0,t.IR()}),!0),this.Fe.addEventListener("play",lS(this,!0,(()=>this.IR()))),this.Fe.addEventListener("playing",lS(this,!0,(()=>this.IR()))),this.Fe.addEventListener("pause",lS(this,!1)),this.Fe.addEventListener("ended",lS(this,!1)),this.Fe.readyState>=1&&(this.bR=this.Fe.videoWidth,this.xR=this.Fe.videoHeight,this.SR=!this.Fe.paused,this._R=!0,this.IR())}else this._R=!0,this.IR()}Pd(t){0===this.TR.size&&this._R&&this.IR(),this.TR.add(t)}zD(t){this.TR.delete(t),0===this.TR.size&&this.unbindResources()}LR(t){this.CR.add(t),this.wR&&(t(),this.PR(t))}PR(t){this.CR.delete(t)}IR(){if(this.kR||this.wR||!this._R)return;const t=this.iE.gl;if(!this.FR&&this.Fe&&t){this.FR=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.FR),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,r=t.UNSIGNED_BYTE,n=this.Fe,h=this.bR>0?this.bR:n.width,o=this.xR>0?this.xR:n.height;t.texImage2D(t.TEXTURE_2D,i,s,e,r,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.bR=h,this.xR=o,t.bindTexture(t.TEXTURE_2D,null)}this.wR=!0,this.CR&&this.CR.forEach((t=>{t(),this.PR(t)}))}Sh(){const t=this.iE.gl;if(!this.kR&&this.wR&&this.FR){const i=0,s=t.RGBA,e=t.RGBA,r=t.UNSIGNED_BYTE,n=this.Fe;n&&(t.bindTexture(t.TEXTURE_2D,this.FR),t.texImage2D(t.TEXTURE_2D,i,s,e,r,n))}}BR(){return this.FR}unbindResources(){return this.wR&&(this.FR&&(this.iE.FD(this.FR),this.FR=null),this.wR=!1),this}}class dS extends dr{constructor(t,i,s){super(t.Ki,i,s),this.zg=!0,this.Eg=u(Wo),this.ke=t,this.ji=t.ji}DR(){var t;return this.Eg.o&&this.Eg.C().type!==(null===(t=this.ER)||void 0===t?void 0:t.type)}Ug(t){return this.zg=t,this}}const fS=(t,i,s,e)=>{const r=t.RR(),n=Math.round(Math.min(s.spread,10)*r),h=Math.round(Math.min(s.blur,10)*r),o=Math.round(s.offset.x*r),a=Math.round(s.offset.y*r),l=t.OR(),u=t.zR(),c=t.VR(),d=t.NR(),f=t.GR();t.$R("disabled"),t.Ug(!1),t.UR(!1);const v=t.Ki.Ea.YE,A=i.jR(),g=n+h/2,y=((t,i,s,e)=>{const r=t.gl,n=t.RR(),h=t.YR();t.HR(r.FRAMEBUFFER,e.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,e.depthBuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.clearDepth(1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.WR(0,0,o.x,o.y);const a=[],l=t.Ki.Ea.YE;return i.forEach((i=>{let e;if(i instanceof lu){e=i.Ys||i.ke.Pg();let t=!1;if(!e){const s=i.ke.XR(i);s&&s.max.x-s.min.x>0&&s.max.y-s.min.y>0&&(e={x:s.min.x,y:s.min.y,width:s.max.x-s.min.x,height:s.max.y-s.min.y},t=!0)}e&&(e.width>0&&e.height>0?(t&&(e.x-=s.left/n,e.y-=s.top/n,e.width+=(s.left+s.right)/n,e.height+=(s.top+s.bottom)/n),a.push({x:e.x,y:e.y,width:e.width,height:e.height})):e=void 0)}else i instanceof dS&&(e=i.ke.nS());if(e){const i=e.x+(l?0:s.left),r=e.y+(l?0:s.bottom),h=Math.max(e.width-(l?0:s.left+s.right),0),o=Math.max(e.height-(l?0:s.bottom+s.top),0);t.ZR(i*n,r*n,h*n,o*n)}else t.UR(!1);i.ed(2,0)})),t.HR(r.FRAMEBUFFER,h),r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),t.UR(!1),a})(t,e,{left:g+(o<0?-o:0),top:g+(a>0?a:0),right:g+(o>0?o:0),bottom:g+(a<0?-a:0)},A),p=A,m=n+h+5,S=((t,i,s,e)=>{const r=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,r=t[s];do{const t=i.findIndex((t=>oh(r,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),r=bh(r,e))}while(e);i.push(r)}return i})(i.map((t=>{const i=t instanceof lu||t instanceof dS?t.ke.XR(t):rh;if(Rn(i))return rh;const r={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return r.max.x<=r.min.x||r.max.y<=r.min.y?rh:r})).filter((t=>!Rn(t)))),n=6*r.length,h=new Float32Array(4*n);let o=0;return r.forEach((t=>{const i=Dh(t.min,e),s=Dh(t.max,e),r=i,n=s;h[o+0]=i.x,h[o+1]=i.y,h[o+2]=r.x,h[o+3]=r.y,h[o+4]=s.x,h[o+5]=i.y,h[o+6]=n.x,h[o+7]=r.y,h[o+8]=s.x,h[o+9]=s.y,h[o+10]=n.x,h[o+11]=n.y,h[o+12]=s.x,h[o+13]=s.y,h[o+14]=n.x,h[o+15]=n.y,h[o+16]=i.x,h[o+17]=s.y,h[o+18]=r.x,h[o+19]=n.y,h[o+20]=i.x,h[o+21]=i.y,h[o+22]=r.x,h[o+23]=r.y,o+=24})),{vertexBuffer:t.JR(h),vertexCount:n}})(t,e,{left:m+(o<0?-o:0),top:m+(a>0?a:0),right:m+(o>0?o:0),bottom:m+(a<0?-a:0)},i.QR()),b=i.jR(p),x=t.KE(_m["2D"],_m.Glow1D({spreadPx:n,blurPx:h,firstPass:!0}),_m.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,r,n)=>{const h=t.gl,o=t.YR();t.HR(h.FRAMEBUFFER,s.frameBuffer),h.bindRenderbuffer(h.RENDERBUFFER,s.depthBuffer),h.bindTexture(h.TEXTURE_2D,s.texture),h.clearDepth(1),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),t.WR(0,0,s.sizeDpr.x,s.sizeDpr.y),t.KR(e,((o,a,l,u)=>(t.Pd(e),n&&n(o),t.sO(o("uIsHighlighted"),0).SL(o("uHighlightColorOffset"),we).sO(o("uRenderEffectMask"),0).iO(o("uTexture"),i.texture,0).tO(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).tO(o("uScale"),s.uniforms.eO()).tO(o("uDisp"),s.uniforms.rO()).tO(o("uScaling"),[s.size.x,s.size.y]).tO(o("uTranslationAxis"),[0,0]).qR(r.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).pC(h.TRIANGLES,r.vertexCount,0),!0))),t.HR(h.FRAMEBUFFER,o),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)})(t,p,b,x,S,((i,s,e,r)=>(t.tO(i("uOffsetPx"),[o+1,a+1]),!0))),t.UR(u),t.nO(f),v&&(((t,i)=>{if(void 0===i||i.length<1)return;const s=t.gl,e=6*i.length*2,r=[e];let n=0;for(let t=0;t<i.length;t+=1){const s=i[t];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.x+s.width,r[n+3]=s.y,r[n+4]=s.x,r[n+5]=s.y+s.height,r[n+6]=s.x+s.width,r[n+7]=s.y,r[n+8]=s.x+s.width,r[n+9]=s.y+s.height,r[n+10]=s.x,r[n+11]=s.y+s.height,n+=12}const h=t.JR(r,!0),o={x:t.Ki.li().x,y:t.Ki.li().y},a=Xe.d2({scaleXYConstructor:He}).zt(o).Oi(0,o.x).zi(0,o.y),l=new yS;l.hO(a);const u=t.KE(_m["2D"],_m.VertexLocation({scaling:{dataType:"uniform"},translation:void 0,axisWorldTranslation:"linear",normalSource:void 0}),_m.Color({dataType:"uniform"}));t.oO(!0),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,1,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),t.Pd(u).lO(u.aE("aPos"),h).tO(u.hE("uDisp"),l.rO()).tO(u.hE("uScaling"),[1,1]).tO(u.hE("uScale"),l.eO()).aO(u.hE("uColor"),[1,1,1,1]).pC(s.TRIANGLES,e/2),t.uO(h),s.colorMask(!0,!0,!0,!0)})(t,y),t.gl.stencilFunc(t.gl.EQUAL,1,255),t.gl.stencilOp(t.gl.KEEP,t.gl.KEEP,t.gl.KEEP),t.oO(!0));const M=t.KE(_m["2D"],_m.Glow1D({spreadPx:n,blurPx:h,firstPass:!1}),_m.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,r)=>{const n=t.gl,h={x:t.Ki.li().x,y:t.Ki.li().y};t.WR(0,0,h.x*t.RR(),h.y*t.RR());const o=Xe.d2({scaleXYConstructor:He}).zt(h).Oi(0,h.x).zi(0,h.y),a=new yS;a.hO(o),t.KR(s,((o,l,u,c)=>(t.Pd(s),r&&r(o),t.sO(o("uIsHighlighted"),0).SL(o("uHighlightColorOffset"),we).sO(o("uRenderEffectMask"),0).iO(o("uTexture"),i.texture,0).tO(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).tO(o("uScale"),a.eO()).tO(o("uDisp"),a.rO()).tO(o("uScaling"),[h.x,h.y]).tO(o("uTranslationAxis"),[0,0]).qR(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).pC(n.TRIANGLES,e.vertexCount,0),!0)))})(t,A,M,S,((i,e,r,n)=>(t.iO(i("uTextureFirstGlowPass"),b.texture,1).SL(i("uGlowColor"),s.color),!0))),t.WR(l.x,l.y,l.width,l.height),t.$R(c),t.Ug(d),t.uO(S.vertexBuffer),v&&t.oO(!1)};class vS{constructor(t){this.cO=[],this.kD=t}dO(t,i){fS(this.kD,this,i,t)}QR(){const t=this.kD.Ki.li();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}jR(...t){const i=this.cO,s=this.QR(),e={x:Math.ceil(s.x*this.kD.RR()),y:Math.ceil(s.y*this.kD.RR())},r=this.kD.gl,n=i.find((i=>!t.includes(i)));if(n)return n.sizeDpr.x===e.x&&n.sizeDpr.y===e.y||(n.size=s,n.sizeDpr=e,r.bindTexture(r.TEXTURE_2D,n.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.x,e.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,n.depthBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.x,e.y),r.bindTexture(r.TEXTURE_2D,null),r.bindRenderbuffer(r.RENDERBUFFER,null),n.scale.zt(s).Oi(0,s.x).zi(0,s.y),n.uniforms.hO(n.scale)),n;const h=r.createTexture(),o=this.kD.fO(),a=this.kD.vO();r.bindTexture(r.TEXTURE_2D,h),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.x,e.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.kD.YR();this.kD.HR(r.FRAMEBUFFER,o),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),r.bindRenderbuffer(r.RENDERBUFFER,a),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.x,e.y),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,a),r.bindTexture(r.TEXTURE_2D,null),this.kD.HR(r.FRAMEBUFFER,l),r.bindRenderbuffer(r.RENDERBUFFER,null);const u=Xe.d2({scaleXYConstructor:He}).zt(s).Oi(0,s.x).zi(0,s.y),c=new yS;c.hO(u);const d={size:s,sizeDpr:e,texture:h,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}It(){[this.cO].forEach((t=>{t.forEach((t=>{this.kD.AO(t.depthBuffer),this.kD.gO(t.frameBuffer),this.kD.FD(t.texture)})),t.length=0}))}}class AS{constructor(i,s,e,r,n=!0){this.yO=new aS,this.pO=new Map,this.mO=new Map,this.SO=[],this.VE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(Or.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.zg=!1,this.bO=!1,this.tO=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.xO=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.aO=(t,[i,s,e,r])=>(void 0===t||this.gl.uniform4f(t,i,s,e,r),this),this.MO=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.wO=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this._O=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.SL=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.sO=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.kO=(t,i)=>(this.gl.uniform1i(t,i),this),this.iO=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new mp("Could not bind a texture.")},this.CO=i=>(((i,s)=>{s===t.ImageFitMode.Tile?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE))})(this.gl,i),this),this.JR=(t,i=!1,s,e=Float32Array)=>{const r=t.length,n=this.TO(r,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),n)return n;throw new mp("Could not create vertex buffer")},this.FO=(t,i,s,e=Float32Array)=>{const r=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,t*e.BYTES_PER_ELEMENT,this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new mp("Could not create vertex buffer")},this.IO=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.LO=(t,i,s,e,r)=>{if(e&&t&&(t.usedSize=0),!t){const t=i.length+s,e=new r(t);return e.set(i),{buffer:this.FO(t,e,void 0,r),dataCache:e,preallocSize:t,usedSize:i.length}}if(t.usedSize+i.length>t.preallocSize){const e=t.usedSize+i.length+s,n=new r(e);return n.set(t.dataCache),n.set(i,t.usedSize),{buffer:this.FO(e,n,t.buffer,r),dataCache:n,preallocSize:e,usedSize:t.usedSize+i.length}}return t.dataCache.set(i,t.usedSize),this.IO(t.buffer,t.usedSize,i,r),t.usedSize+=i.length,t},this.PO=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.BO=(t,i)=>{const s=t.length,e=this.TO(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new mp("Could not create index buffer")},this.DO=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new mp("Could not create float buffer")},this.lO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.EO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.qR=(t,i,...s)=>{var e;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const r=s.length;let n=0;for(let t=0;t<r;t+=1)n+=s[t].size;for(let t=0;t<r;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let h=0;for(let t=0;t<r;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT+(null!==(e=i.extraOffset)&&void 0!==e?e:0)),h+=i.size}if(void 0!==i)for(let t=0;t<r;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.RO(e,i)}return this},this.OO=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.zO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.VO=(t,i,s,e=0)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,e),this.gl.enableVertexAttribArray(t),void 0!==s&&this.RO(t,s)),this),this.NO=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.GO=null,this.pC=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.$O=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.UO=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.HE.ANGLE_instanced_arrays)return Or.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.HE.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.jO=(t,i,s,e,r=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,r,s,e),this.gl1)){if(!this.gl1.HE.ANGLE_instanced_arrays)return Or.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.HE.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,r,s,e)}return this},this.RO=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.HE.ANGLE_instanced_arrays)return Or.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.HE.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.YO=(t,i,s,e=0)=>{const r=this.gl.TEXTURE0+e;this.gl.activeTexture(r);const n=this.YR();this.HR(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const h=this.zR();h&&this.UR(!1),t(),h&&this.UR(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.HR(this.gl.FRAMEBUFFER,n)},this.ws=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.HO=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.Pd=t=>(this.gl.useProgram(t.sE),this),this.WO=!1,this.XO=[],this.Ki=i,this.ug=s,this.Ki=i,this.gl=e.ctx,this.ZO=e.antialias,this.JO=!!this.Ki.Ea.fE&&e.lineAntialias,this.WE=this.Ki.Ea.WE,this.QO=new Map,this.gl1=this.Ki.Ea.gl1,this.gl2=this.Ki.Ea.gl2,n&&(this.nO(!0),this.KO()),this.HE=this.Ki.Ea.HE,this.TD=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.BD=this.qO(),this.KE=this.Ki.Ea.KE,this.tz=new mS(this),this.GD=this.Ki.Ea.GD,this.iz=new vS(this),this.dE=this.Ki.Ea.dE,this.sz=this.JR([0,0,1,0,1,1,0,1]),this.ez=this.JR([0,0,1,0,0,1,0,1,1,0,1,1])}$R(t){return t!==this.rz&&(this.rz=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}VR(){return this.rz||"disabled"}Ug(t){return t!==this.zg&&(this.zg=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}oO(t){return t!==this.bO&&(this.bO=t,t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST)),this}NR(){return this.zg}nz(t){return this.VE=t,this}RR(){return this.VE}TO(t,i){let s;if(i){const e=this.QO.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.uO(i)}return s||(s=this.gl.createBuffer(),this.QO.set(s,{size:t})),s}jx(t,i=this.gl.RGBA,s=!1,e,r,n=!1,h=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new mp("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),t&&null===r?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,h,t):r&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,r.x,r.y,0,i,h,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}FD(t){this.gl.deleteTexture(t)}fO(){const t=this.gl.createFramebuffer();if(!t)throw new mp("Couldn't reserve Framebuffer.");return t}HR(t,i){this.GO=i,this.gl.bindFramebuffer(t,i)}YR(){return this.GO}gO(t){this.gl.deleteFramebuffer(t)}vO(){const t=this.gl.createRenderbuffer();if(!t)throw new mp("Couldn't reserve Render buffer.");return t}AO(t){this.gl.deleteRenderbuffer(t)}hz(){const t=this.gl;switch(t.checkFramebufferStatus(t.FRAMEBUFFER)){default:case t.FRAMEBUFFER_COMPLETE:Or.console.log("FRAMEBUFFER_COMPLETE");break;case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:Or.console.log("FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:Or.console.log("FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:Or.console.log("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_UNSUPPORTED:Or.console.log("FRAMEBUFFER_UNSUPPORTED")}}WR(t,i,s,e){return this.gl.viewport(t,i,s,e),this.oz&&t===this.oz.x&&i===this.oz.y&&s===this.oz.width&&e===this.oz.height||(this.oz={x:t,y:i,width:s,height:e}),this}OR(){return this.oz||{x:0,y:0,width:0,height:0}}ZR(t,i,s,e){return this.UR(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}UR(t){return t===this.az||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.az=t),this}nO(t){return t!==this.WO&&(this.WO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}GR(){return this.WO}KO(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}zR(){return void 0!==this.az&&this.az}KR(t,i){const s=new SS(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}uO(t){t&&(this.gl.deleteBuffer(t),this.QO.delete(t))}lz(t,i,s){this.tO(t.uniform("uCenter"),i.center).tO(t.uniform("uDistance"),i.distance).aO(t.uniform("uBounds"),i.bounds).sO(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.SL(t.uniform(`color_${i}`),e[i].color).sO(t.uniform(`stop_${i}`),e[i].offset);return this}uz(t,i,s){this.tO(t.uniform("uStartPoint"),i.startPoint).tO(t.uniform("uEndPoint"),i.endPoint).aO(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.SL(t.uniform(`color_${i}`),e[i].color).sO(t.uniform(`stop_${i}`),e[i].offset);return this}th(t){const i=this.dE.get(t);if(!i){const i=new zp(this);return this.dE.set(t,i),i}return i}cz(t){const i=this.pO.get(t);if(!i){const i=new cS(this,t);return this.dz(t,i),i}return i}dz(t,i){this.pO.set(t,i)}qO(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.ug.vl&&Or.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}fz(t,i,s,e){if(s)this.qR(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.lO(s,i),void 0!==e&&this.RO(s,e)}return this}vz(){this.HE.WEBGL_lose_context&&this.HE.WEBGL_lose_context.loseContext()}Az(t){if(this.gz&&this.gz.bufferIdsCount>=t)return this.gz.buffer;this.gz&&(this.uO(this.gz.buffer),this.gz=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.JR(s);return this.gz={buffer:e,bufferIdsCount:i},e}yz(){return this.gl2?void 0:"attribute"}pz(t,i){if("attribute"===this.yz()){const s=this.Az(i);this.qR(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}mz(){return this.gl2?void 0:"attribute"}Sz(t,i){if("attribute"===this.mz()){const s=this.Az(i);this.qR(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}bz(t,i,s,e,r,n,h,o,a){const l=t.createBuffer();return this.XO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,r,n,h,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),gS(t,(()=>this.Ki.Wi),t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.XO.splice(this.XO.indexOf(l),1)}))}xz(t,i,s,e,r,n,h,o){const a=this.gl,l=this.YR();this.HR(a.FRAMEBUFFER,t),a.readPixels(i,s,e,r,n,h,o),this.HR(this.gl.FRAMEBUFFER,l)}Mz(t){const i=this.mO.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new mp("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let r=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(r);r=255===r?0:255}const n=e.length;if(!this.gl2&&(s=e.length)&s-1){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const h={wz:i,_z:n,kz:e.length};return this.mO.set(t,h),h}var s;return i}Cz(t,i,s){const{uniform:e}=t;this.SL(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this.sO(e(`uLUTValue${t}`),i.steps[t].value),this.SL(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return Dn(0,(()=>{})),this;this.sO(e("uMinValue"),s.min),this.sO(e("uMaxValue"),s.max)}return this}Tz(i,s,e,r,n,h){const o=e&&e.getSource()||r&&r.Fe,a=e?e.getFitMode():t.ImageFitMode.Stretch,l=t=>{t.texCoordsBuffer=this.JR(h(t.texture.bR,t.texture.xR,a),!1,t.texCoordsBuffer)};if(o){let t=s;if((!s||o!==s.source)&&o){s&&(s.texture.zD(i),this.uO(s.texCoordsBuffer));const r=this.cz(o);r.Pd(i);const n=e?e.getSourceMissingColor():qa.color;t={texture:r,source:o,texCoordsBuffer:this.JR([]),sourceMissingTexture:this.jx(new Uint8Array([n.getR(),n.getG(),n.getB(),n.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{t&&o&&(l(t),this.Ki.fe())}},r.LR(t.textureReadyCallback),l(t)}return t&&t.texture.wR&&t.texture.MR&&t.texture.SR&&(t.texture.Sh(),this.Ki.fe()),n&&t&&t.texture.wR&&l(t),t}s&&this.Fz(i,s)}Fz(t,i){i&&(i.texture.zD(t),i.texture.PR(i.textureReadyCallback),this.FD(i.sourceMissingTexture),this.uO(i.texCoordsBuffer))}Iz(t,i,s,e){var r,n,h,o;const{uniform:a,uniformOptional:l,attribute:u}=t,c=s.ji,d=this.RR();if(this.SL(a("uHighlightColorOffset"),1===i||2===i?_e:s.es).sO(a("uRenderEffectMask"),2===i?1:0).tO(l("uRatioPxClip"),[2/this.Ki.li().x,2/this.Ki.li().y]).sO(l("uDevicePixelRatio"),d),void 0===e.highlightBuffer)this.sO(a("uIsHighlighted"),1===i||2===i?0:s.Qi);else{if(!e.highlightBuffer)throw new Error("Highlight buffer not supplied for attribute highlighting");this.qR(e.highlightBuffer,null!==(r=e.highlightAttribDivisor)&&void 0!==r?r:void 0,{location:u("aIsHighlighted"),size:1})}c instanceof He||c instanceof pa?this.tO(a("uScale"),e.uniforms.eO()).tO(a("uDisp"),e.uniforms.rO()).tO(l("uScaleStart_highpart"),e.uniforms.Lz()).tO(l("uScaleStart_lowpart"),e.uniforms.Pz()):c instanceof We&&this.tO(l("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).tO(l("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).tO(l("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).tO(l("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).tO(a("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).tO(a("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const f=!0===e.coordsHighPrecision;if(e.coordsX)if(f){const t=u("aPos_highpartX"),i=u("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.VO(u("aPosX"),e.coordsX);if(e.coordsY)if(f){const t=u("aPos_highpartY"),i=u("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.VO(u("aPosY"),e.coordsY);if(1===i){if(this.kO(a("uFirstId"),e.idFirst),void 0!==e.mousePickingOffsetBuffer){if(!e.mousePickingOffsetBuffer)throw new Error("No mouse picking offset buffer for attribute mouse picking");this.VO(u("aPickingIdOffset"),e.mousePickingOffsetBuffer,null!==(n=e.mousePickingOffsetAttribDivisor)&&void 0!==n?n:void 0)}}else{if(e.fillStyleSolid&&this.SL(a("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=u("aLookupValue");this.VO(t,e.lookupValueBuffer,e.lookupValueAttribDivisor,null!==(h=e.lookupValueBufferByteOffset)&&void 0!==h?h:0)}this.Cz(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.uz(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.lz(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=u("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,null!==(o=e.colorBufferByteOffset)&&void 0!==o?o:0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.RO(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.BR();this.SL(l("uColor"),e.fillStyleImage.getSurroundingColor()).iO(a(Xp),t||e.texturedFillGLInfo.sourceMissingTexture,0).qR(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:u("aTextureCoord"),size:2}).CO(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.BR();this.iO(a(Qp),t||e.maskTexture.sourceMissingTexture,0).qR(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:u("aMaskTextureCoord"),size:2})}}return void 0!==e.useInstanceID&&this.Sz(t,e.useInstanceID),void 0!==e.useVertexID&&this.pz(t,e.useVertexID),!0}Bz(t,i,s){if(t)return hS(s||i.fs(),i.ji,t.getAngle(!0),this.RR())}Dz(t,i,s){if(t)return nS(s||i.fs(),i.ji,t.getPosition(),t.getExtent(),t.getShape(),this.RR())}}const gS=async(t,i,s,e,r,n,h,o)=>{const a=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s,e)=>{const r=void 0!==e.flags?e.flags:0,n=void 0!==e.retryTimeout?e.retryTimeout:10;return new Promise(((e,h)=>{const o=()=>{if(s())return e(void 0);const a=t.clientWaitSync(i,r,0);return a===t.WAIT_FAILED?h(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):a!==t.TIMEOUT_EXPIRED?e(void 0):void Or.setTimeout(o,n)};Or.setTimeout(o,0)}))})(t,a,i,{retryTimeout:10}).then((()=>{if(!i())return t.deleteSync(a),t.bindBuffer(s,e),t.getBufferSubData(s,r,n,h,o),t.bindBuffer(s,null),n})).catch((t=>{throw t}))};class yS{hO(t){if(t instanceof He||t instanceof pa){const i=t.Ti();this.Ez=i.x.scaling,this.Rz=-i.x.displacement,this.Oz=i.y.scaling,this.zz=-i.y.displacement;const s=Math.fround(i.x.highPrecisionOffset),e=Math.fround(i.y.highPrecisionOffset);this.Vz=s,this.Nz=i.x.highPrecisionOffset-s,this.Gz=e,this.$z=i.y.highPrecisionOffset-e}else t instanceof We&&(this.MixedScaleXY=t.Ti());return this}rO(){return[this.Rz,this.zz]}eO(){return[this.Ez,this.Oz]}Lz(){return[this.Vz,this.Gz]}Pz(){return[this.Nz,this.$z]}}class pS{constructor(){this.Ez=0,this.Oz=0,this.Uz=0,this.Rz=0,this.zz=0,this.jz=0}Yz(t){return this.Ez=t.$t(),this.Rz=t.getInnerStart()+.5*this.Ez*t.Ut(),this}Wz(t){return this.Oz=t.$t(),this.zz=t.getInnerStart()+.5*this.Oz*t.Ut(),this}Xz(t){return this.Uz=t.$t(),this.jz=t.getInnerStart()+.5*this.Uz*t.Ut(),this}eO(){return[this.Ez,this.Oz,this.Uz]}rO(){return[this.Rz,this.zz,this.jz]}Zz(t,i,s,r,n){const o=e(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),a=rS.multiply(r,[o.x,o.y,n,1]);return h(a[0],a[1],a[2])}}class mS{constructor(t){this.kD=t}ed(t,i,s,e,r,n=0){const h=this.kD,o=void 0===e;if(!(e=e||h.fO()))throw new mp("Could not bind a framebuffer.");const a=h.OR(),l=h.GR();h.nO(!1),h.YO((()=>{h.WR(0,0,s.x,s.y),t()}),e,i,n),o&&h.gO(e),this.kD.HO(r),this.kD.WR(a.x,a.y,a.width,a.height),h.nO(l)}}class SS{constructor(t,i){this.Jz=[],this.Qz=[],this.uniform=t=>{const i=this.shader.hE(t);return this.Qz.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.oE(t);return this.Qz.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.aE(t);return this.Jz.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.Jz)this.glUtils.OO(t.location),this.glUtils.RO(t.location,0)}}class bS extends lu{constructor(t,i,s,e,r){super(t,i,s,e),this.Kz=new Map,this.qz=t,this.tV=i,this.kD=t.iV(),this.sV=r,this.tV=i}rd(){return this}ed(t,i){if(!this.sV||0!==t||0===this.Kz.size)return{};let s=Array.from(this.Kz.values()).map((t=>t.eV.filter((t=>t.rV)).map((t=>t.Js)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(this.Ki.Kc&&(s=s.filter((t=>!(t instanceof pu)))),0===s.length)return{};const e=this.sV;return this.kD.iz.dO(s,e),{}}nd(t,i,s,e,r){return{}}Sh(){return this}Ps(){return 0}Ls(){return 0}Ds(){return 0}Bs(){return 0}$u(){return 0}Uu(){return 0}qs(t,i){const s={eV:[]},e=(t,i)=>{const e={Js:t||[],rV:void 0===i||i};s.eV.push(e);const r={he:t=>(e.Js=t,r),de:t=>(e.rV=t,r),ve:()=>e.rV};return r},r={};Object.keys(i).forEach((t=>{const s=i[t],n=s.shapes||[],h=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(n,h);r[t]=o}));const n={Gv:e,...r};this.Kz.set(t,s);const h=()=>{this.Kz.delete(t),t.removeEventListener("dispose",h)};return Or.requestAnimationFrame((()=>{t.addEventListener("dispose",h)})),n}}function xS(t,i,s,r,n,h=Math.floor(Math.sqrt(r>n?25*r:25*n))){const o=Array(h+2),a=Math.PI;let l=0,u=0;const c=i*a/180,d=(s*a/180-c)/h;for(o[l]=e(t.x,t.y),l+=1;l<=h+1;)o[l]=e(t.x+r*Math.cos(c+u*d),t.y+n*Math.sin(c+u*d)),l+=1,u+=1;return[o,h]}const MS=(t,i,s)=>((t,i,s)=>{const r=[];let n=0;const h=Ih(i,s/2);let o,a,l,u,c=t[t.length-1],d=0;for(let s=0;s<t.length;s+=1){o=t[s],a=s===t.length-1?t[0]:t[s+1],s>0&&(c=t[s-1]),zr(o,c)&&(c=Lh(o,Ch(Ih(Ph(a,o),-1)))),zr(o,a)&&(a=Lh(o,Ch(Ih(Ph(c,o),-1))));const f=Dh(c,i),v=Dh(o,i),A=Dh(a,i),g=Ch(Ph(v,f)),y=Ch(Ph(A,v)),p=Lh(g,y),m=e(-p.y,p.x),S=e(-g.y,g.x),b=1/Rh(m,S),x=Fh(m),M=Ch(Ph(g,y)),w=Math.sign(Rh(m,M))||1,_=Bh(m,Ih(h,b)),k=Bh(m,Ih(h,-b));if(x<1||b===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},l={x:0,y:0};const u=e(-y.y,y.x),f=Math.sign(Rh(g,m))||w,v=Bh(S,Ih(h,f)),A=Bh(u,Ih(h,f));1===w?(t=v,i=k,s=A,l=k):(t=_,i=v,s=_,l=A);const p=4*vh(c,o),x=4*vh(o,a);(b>p||b>x)&&(1===w?(t=v,i=A,s=A,l=v):(t=A,i=v,s=v,l=A));const M=Lh(o,t),C=Lh(o,i),T=Lh(o,s),F=Lh(o,l);r[n]=M,n+=1,r[n]=C,n+=1,r[n]=T,n+=1,r[n]=F,n+=1,d=4}else{const t=Lh(o,_),i=Lh(o,k);r[n]=t,n+=1,r[n]=i,n+=1,d=2}u=l,l=t[s]}return r[n]=r[0],n+=1,r[n]=r[1],n+=1,[r,d,[u,l]]})(t,i,s)[0];class wS extends xu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.qD=new yS,this.nV=rh,this.hV=rh,this.oV=ba({arcStyleSolid:()=>co(this.Lr)&&this.Lr,arcStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,arcStyleLinearGradient:()=>ze(this.Lr)&&this.Lr}),this.qz=t,this.tV=i,this.kD=t.iV()}aV(t,i){let s=0,e=Array(0),r=0;if(void 0!==i){const r=t.length,n=Array(r+i.length);let h=0,o=0;for(;h<r;)n[o]=t[h],n[o+1]=i[h],o+=2,h+=1;e=n,s=this.kD.gl.TRIANGLE_STRIP}else e=t,s=this.kD.gl.TRIANGLE_FAN;const n=dn(e,this.ji.xi());return r=e.length,[e,this.kD.JR(n),r,s]}lV(t,i,s,e){let r=Array(0);if(void 0===i)r=t;else{let s=0,e=0;const n=t.length;for(s=0,e=n,r=Array(n+i.length-2),i.reverse();s<n;)r[s]=t[s],r[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[dn(r,this.ji.xi()),r.length];const n=MS(r,e,s);return[dn(n,this.ji.xi()),n.length]}Sh(){const t=this.Yl(),i=this.Hi.C();if(this.Hl()){const s=Math.abs(this.ct.C()-this.Ac.C());this.qD.hO(this.ji);const r=this.ji.Vi()||t,n=this.ji.$i(),h=this.gc.C(),o=this.yc.C(),[l,u]=xS(this.co.C(),this.Ac.C(),this.ct.C(),this.gc.C(),this.yc.C(),this.Sc.C()),c=this.mc.C(),d=c>0?xS(this.co.C(),this.Ac.C(),this.ct.C(),this.gc.C()*c/100,this.yc.C()*c/100,u)[0]:[this.co.C()],f=l.length-1;if(2===f){const t=(l[f-1].x+l[1].x)/2,i=(l[f-1].y+l[1].y)/2;this.bc=e(t,i)}else{const t=Math.floor(f/2);this.bc=e(l[t].x,l[t].y)}this.xc=l[1];const v=l.length-1;this.Mc=l[v],this.mc.C()&&(l.shift(),d.shift());let A=!1;(this.co.o||this.Ac.o||this.ct.o||this.gc.o||this.yc.o||this.mc.o||this.Sc.o||r)&&(this.hV=a(e(this.yu().x-h,this.yu().y-o),e(this.yu().x+h,this.yu().y+o)),A=!0,this.co.o=!1,this.Ac.o=!1,this.ct.o=!1,this.gc.o=!1,this.yc.o=!1,this.mc.o=!1,this.Sc.o=!1);const g=this.Ul();(A||g)&&this.Lr!==ho&&(this.mc.C()?(this.uV&&this.kD.uO(this.uV),[this.cV,this.uV,this.dV,this.fV]=this.aV(l,d)):(this.uV&&this.kD.uO(this.uV),[this.cV,this.uV,this.dV,this.fV]=this.aV(l,void 0)),Ee(this.Lr)?this.vV=nS(this.hV,this.ji,this.Lr.getPosition(),this.Lr.getExtent(),this.Lr.getShape(),this.kD.RR()):ze(this.Lr)?this.AV=hS(this.hV,this.ji,this.Lr.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0));const y=this.oV.arcStyleSolid(g),p=this.oV.arcStyleLinearGradient(g),m=this.oV.arcStyleRadialGradient(g),S=y||p||m;g&&(this.gV=S?this.kD.KE(_m["2D"],_m.Color({dataType:Ee(this.Lr)||ze(this.Lr)?["gradient",this.Lr]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.Wl(this.Lr));const b=this.Pr;if(aa(b)&&(A||this.Jl(b.getThickness())||r)){this.mc.C()?360===s?(l.pop(),d.pop(),[this.yV,this.pV]=this.lV(l,void 0,b.getThickness(),n),this.mV&&this.yV?this.kD.PO(this.mV,this.yV,!0):!this.mV&&this.yV?this.mV=this.kD.JR(this.yV,!0):this.mV&&!this.yV&&(this.kD.uO(this.mV),this.mV=void 0),[this.SV,this.bV]=this.lV(d,void 0,b.getThickness(),n),this.xV&&this.SV?this.kD.PO(this.xV,this.SV,!0):!this.xV&&this.SV?this.xV=this.kD.JR(this.SV,!0):this.xV&&!this.SV&&(this.kD.uO(this.xV),this.xV=void 0)):([this.yV,this.pV]=this.lV(l,d,b.getThickness(),n),this.mV&&this.yV?this.kD.PO(this.mV,this.yV,!0):!this.mV&&this.yV?this.mV=this.kD.JR(this.yV,!0):this.mV&&!this.yV&&(this.kD.uO(this.mV),this.mV=void 0),this.SV&&(this.xV&&this.kD.uO(this.xV),this.xV=void 0,this.bV=0)):(360===s&&(l.shift(),l.pop()),[this.yV,this.pV]=this.lV(l,void 0,b.getThickness(),n),this.mV&&this.yV?this.kD.PO(this.mV,this.yV,!0):!this.mV&&this.yV?this.mV=this.kD.JR(this.yV,!0):this.mV&&!this.yV&&(this.kD.uO(this.mV),this.mV=void 0));const t=b.getFillStyle();Ee(t)?this.MV=nS(this.hV,this.ji,t.getPosition(),t.getExtent(),t.getShape(),this.kD.RR()):ze(t)?this.wV=hS(this.hV,this.ji,t.getAngle(!0),this.kD.RR()):(this.MV=void 0,this.wV=void 0),this._V=t===ho?void 0:this.kD.KE(_m["2D"],_m.Color({dataType:Ee(t)||ze(t)?["gradient",t]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})),this.Ql(b)}if(A){let t=1,i=1;aa(b)&&(t=b.getThickness()*n.x,i=b.getThickness()*n.y),this.nV=a(e(this.hV.min.x-t,this.hV.min.y-i),e(this.hV.max.x+t,this.hV.max.y+i))}this.kV=i&&S?this.kV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.CV=i&&this.Pr!==_r?this.CV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0}return this}ed(t,i){if(this.Hl()){const s=1===t?this.kV:this.gV,e=this.Lr,r=this.uV;s&&r&&this.kD.Pd(s).KR(s,((s,n,h,o)=>{if(this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(o("uScaleStart_highpart"),this.qD.Lz()).tO(o("uScaleStart_lowpart"),this.qD.Pz()).fz(h,r,this.ji.xi(),void 0).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),1===t)this.kD.kO(s("uFirstId"),i).Sz(h,1);else if(co(e))this.kD.SL(s("uColor"),e.getColor());else if(Ee(e)){if(!this.vV)return!1;this.kD.lz(h,this.vV,e)}else if(ze(e)){if(!this.AV)return!1;this.kD.uz(h,this.AV,e)}return this.kD.pC(this.fV,this.dV),!0}));const n=this.Pr;aa(n)&&(void 0!==this.mV&&this.TV(t,this.mV,this.pV,n,i),void 0!==this.xV&&this.TV(t,this.xV,this.bV,n,i))}return{idCount:1}}nd(t,i,s,e,r){return{}}TV(t,i,s,e,r){const n=1===t?this.CV:this._V,h=e.getFillStyle();n&&this.kD.Pd(n).KR(n,((n,o,a,l)=>{if(this.kD.tO(n("uScale"),this.qD.eO()).tO(n("uDisp"),this.qD.rO()).fz(a,i,this.ji.xi(),void 0).sO(n("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(n("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(n("uRenderEffectMask"),2===t?1:0),1===t)this.kD.kO(n("uFirstId"),r).Sz(a,1);else if(co(h))this.kD.SL(n("uColor"),h.getColor());else if(Ee(h)){if(!this.MV)return!1;this.kD.lz(a,this.MV,h)}else if(ze(h)){if(!this.wV)return!1;this.kD.uz(a,this.wV,h)}const u=e.getThickness(),c=-1===u||1===u;return this.kD.pC(c?this.kD.gl.LINE_LOOP:this.kD.gl.TRIANGLE_STRIP,s),!0}))}rd(){return this.FV&&(this.kD.uO(this.FV),this.FV=void 0),this.IV&&(this.kD.uO(this.IV),this.IV=void 0),this.uV&&(this.kD.uO(this.uV),this.uV=void 0),this.mV&&(this.kD.uO(this.mV),this.mV=void 0),this.xV&&(this.kD.uO(this.xV),this.xV=void 0),this.gV=void 0,this._V=void 0,this.kV=void 0,this.CV=void 0,this}Ps(){return this.hV.max.x}Ls(){return this.hV.min.x}Ds(){return this.hV.max.y}Bs(){return this.hV.min.y}$u(){return $n(this.Pr)}Uu(){return $n(this.Pr)}}class _S{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}LV(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}PV(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}BV(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}DV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.PV(),this}EV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.BV(),this}RV(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.EV(i);return this}OV(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const kS=((t=0)=>(new _S).LV(t))(),CS=(t,i,s,e,r,n,h,o,a,l)=>(void 0===o&&void 0===h||kS.PV(),n.push(t,i),r.push(kS.first,kS.second,kS.third),o=void 0,h=void 0,r.push(kS.third,kS.fourth,kS.second),a=kS.third,kS.BV(),l&&n.push(s,e),[h,o,a]),TS=(t,i,s,e,r,n,h,o,a,l,u)=>{void 0===a&&void 0===o||kS.PV(),h.push(t,i),r.push(kS.first,kS.second,kS.third);const c=Gh(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),h.push(a),n.push(kS.third,kS.fourth,kS.fifth),l=kS.fourth),kS.BV(),u&&h.push(s,e),[o,a,l]},FS=(t,i,s,e,r,n,h,o,a,l)=>(void 0===h&&void 0===n||kS.PV(),r.push(t,i),e.push(kS.first,kS.second,kS.third),n=s,h=void 0,o=kS.third,l?r.push(s):a=!0,[n,h,o,a]),IS=(t,i,s,e,r,n,h,o,a,l,u)=>(0!==n.length?(void 0===o&&void 0===h||kS.PV(),kS.PV()):a>0&&(kS.PV(),u>0&&(u-=1)),n.push(t),r.push(kS.first,kS.second,kS.third),a=kS.second,h=t,o=void 0,l&&n.push(s,e),[h,o,a,u]),LS=(t,i=0)=>{kS.LV(i);const[s,e]=t,r=s.length,n=[],h=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],v=s[c],A=e[c],g=!1,y=u>0?v.y!==A.y?2:1:0;if(r>1)for(;c<r-1;){v=d,A=f,c+=1,d=s[c],f=e[c];const t=c===r-1;v.y>A.y?d.y>f.y?[a,l,u]=CS(v,A,d,f,n,o,a,l,u,t):d.y<f.y?[a,l,u]=TS(v,A,d,f,n,h,o,a,l,u,t):[a,l,u,g]=FS(v,A,d,n,o,a,l,u,g,t):v.y<A.y?d.y<f.y?[a,l,u]=CS(v,A,d,f,h,o,a,l,u,t):d.y>f.y?[a,l,u]=TS(v,A,d,f,h,n,o,a,l,u,t):[a,l,u,g]=FS(v,A,d,h,o,a,l,u,g,t):d.y===f.y?(a=v,g&&(o.push(v),g=!1,kS.PV()),0===o.length&&u>0&&y>0&&(y-=1)):d.y>f.y?[a,l,u,y]=IS(v,0,d,f,n,o,a,l,u,t,y):[a,l,u,y]=IS(v,0,d,f,h,o,a,l,u,t,y)}return[o,new Uint16Array(n),new Uint16Array(h),u,y]};class PS extends bu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.qD=new yS,this.zV=0,this.Ou=Array(),this.VV=0,this.NV=new Uint16Array(0),this.GV=new Uint16Array(0),this.oV=ba({hightFillSolid:()=>co(this.Lr)&&this.Lr,hightFillRadialGradient:()=>Ee(this.Lr)&&this.Lr,hightFillLinearGradient:()=>ze(this.Lr)&&this.Lr,hightFillPaletted:()=>yo(this.Lr)&&this.Lr,lowFillSolid:()=>co(this.Ju)&&this.Ju,lowFillRadialGradient:()=>Ee(this.Ju)&&this.Ju,lowFillLinearGradient:()=>ze(this.Ju)&&this.Ju,lowFillPaletted:()=>yo(this.Ju)&&this.Ju}),this.qz=t,this.tV=i,this.kD=t.iV()}Sh(){const t=this.Yl(),i=this.Hi.C(),s=this.Qu;if(this.Hl()){this.qD.hO(this.ji);const e=s;if(e&&(this.zV=0,this.NV=new Uint16Array(0),this.GV=new Uint16Array(0),this.Ou.length=0,this.VV=0,this.Hu>1)){const[t,i,s,e]=LS([this.ju,this.Yu]);this.zV=e,this.NV=i,this.GV=s,this.Ou=t,this.VV=t.length}if(this.Zu&&this.Xu[0].length>1){const[t,i]=this.Xu,s=t.length,[e,r,n,h,o]=LS([t,i],this.zV);this.zV=h;const a=e.length;for(let t=o;t<a;t+=1)this.Ou[this.VV]=e[t],this.VV+=1;this.NV=$h(this.NV,r),this.GV=$h(this.GV,n);for(let e=o>0||this.Hu>0?1:o;e<s;e+=1)this.ju[this.Hu]=t[e],this.Yu[this.Hu]=i[e],this.Hu+=1;this.Wu=!0,this.Zu=!1,this.Xu=[]}const r=this.Lr,n=this.jl!==r,h=this.oV.hightFillSolid(n),o=this.oV.hightFillRadialGradient(n),a=this.oV.hightFillLinearGradient(n),l=this.oV.hightFillPaletted(n),u=h||o||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,c=this.Ju,d=this.fc!==c,f=this.oV.lowFillSolid(d),v=this.oV.lowFillRadialGradient(d),A=this.oV.lowFillLinearGradient(d),g=this.oV.lowFillPaletted(d),y=f||v||A||g&&["x","y"].includes(g.getLookUpProperty())&&g;if((n||t)&&(this.$V=u?this.kD.KE(_m["2D"],_m.Color({dataType:a?["gradient",a]:o?["gradient",o]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),o?this.vV=nS(this.Ji||this.zu,this.ji,o.getPosition(),o.getExtent(),o.getShape(),this.kD.RR()):a?this.AV=hS(this.Ji||this.zu,this.ji,a.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),(d||t)&&(this.UV=y?this.kD.KE(_m["2D"],_m.Color({dataType:A?["gradient",A]:v?["gradient",v]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),v?this.jV=nS(this.Ji||this.zu,this.ji,v.getPosition(),v.getExtent(),v.getShape(),this.kD.RR()):A?this.YV=hS(this.Ji||this.zu,this.ji,A.getAngle(!0),this.kD.RR()):(this.jV=void 0,this.YV=void 0),(t||this.Wu||e)&&this.Wu||e){const t=this.Ou,i=dn(t,this.ji.xi());this.HV=this.kD.JR(i,!1,this.HV),u&&(this.WV=this.kD.BO(this.NV,this.WV),this.XV=this.NV.length),y&&(this.ZV=this.kD.BO(this.GV,this.ZV),this.JV=this.GV.length),this.Wu=!1}this.kV=i&&(y||u)?this.kV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.Wl(this.Lr),this.vc(this.Ju),this.Qu=!1}return this}ed(t,i){const s=this.Lr,e=this.Ju,r=1===t?this.kV:this.UV;if(r&&this.HV&&this.ZV){const s=this.HV,n=this.ZV;this.kD.Pd(r).KR(r,((r,h,o,a)=>{if(this.kD.fz(o,s,this.ji.xi(),void 0).NO(n).sO(r("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(r("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(r("uRenderEffectMask"),2===t?1:0),this.ji instanceof He||this.ji instanceof pa?this.kD.tO(r("uScale"),this.qD.eO()).tO(r("uDisp"),this.qD.rO()).tO(a("uScaleStart_highpart"),this.qD.Lz()).tO(a("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(a("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(a("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(a("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(a("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(r("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(r("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t)this.kD.kO(r("uFirstId"),i).Sz(o,1);else if(co(e))this.kD.SL(r("uColor"),e.getColor());else if(Ee(e)){if(!this.jV)return!1;this.kD.lz(o,this.jV,e)}else if(ze(e)){if(!this.YV)return!1;this.kD.uz(o,this.YV,e)}else if(yo(e)){const t=xa(e,this,void 0);if(!t&&e.lut.percentageValues)return!1;this.kD.Cz(o,e.lut,t)}return this.kD.$O(this.JV),!0}))}const n=1===t?this.kV:this.$V;if(n&&this.HV&&this.WV){const e=this.HV,r=this.WV;this.kD.Pd(n).KR(n,((n,h,o,a)=>{if(this.kD.fz(o,e,this.ji.xi(),void 0).NO(r).sO(n("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(n("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(n("uRenderEffectMask"),2===t?1:0),this.ji instanceof He||this.ji instanceof pa?this.kD.tO(n("uScale"),this.qD.eO()).tO(n("uDisp"),this.qD.rO()).tO(a("uScaleStart_highpart"),this.qD.Lz()).tO(a("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(a("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(a("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(a("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(a("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(n("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(n("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t)this.kD.kO(n("uFirstId"),i).Sz(o,1);else if(co(s))this.kD.SL(n("uColor"),s.getColor());else if(Ee(s)){if(!this.vV)return!1;this.kD.lz(o,this.vV,s)}else if(ze(s)){if(!this.AV)return!1;this.kD.uz(o,this.AV,s)}else if(yo(s)){const t=xa(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.kD.Cz(o,s.lut,t)}return this.kD.$O(this.XV),!0}))}return{idCount:1}}nd(t,i,s,e,r){return{}}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return 0}Uu(){return 0}$b(t){this.ac()>0&&this.Sh();const[i,s]=this.sc(),e=i.length>2&&i[1].x<i[0].x,r=nr(i,t,rr.NearestX,this.Ku,this.qu,this.ji,this.Ki.ji,this.zu,"x",e);if(void 0===r)return;const n=[i[r],s[r]];return Number.isNaN(n[0].y)||Number.isNaN(n[1].y)?void 0:n}fM(t){this.ac()>0&&this.Sh();const[i,s]=this.sc(),e=i.length;if(0===e)return;const r=this.Ku?1:0,n=e-(this.qu?2:1),h=i.length>2&&i[1].x<i[0].x,o=ur(i,Je(t,this.Ki.ji,this.ji),"x",h,r,n);if(!o)return;const a=[yh(i[o.a],i[o.b],o.lerpAmount),yh(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.ZV&&(this.kD.uO(this.ZV),this.ZV=void 0),this.WV&&(this.kD.uO(this.WV),this.WV=void 0),this.HV&&(this.kD.uO(this.HV),this.HV=void 0),this}rd(){return this.dispose(),this}}class BS extends oS{constructor(t,i){super(t),this.QV=i;const{vertices:s,indices:e,indicesCount:r,drawMode:n}=this.KV();this.qV=t.JR(s),this.tN=t.BO(e),this.iN=r,this.sN=n}Pd(t,i){return this.kD.qR(this.qV,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.kD.NO(this.tN),this}pC(t,i){return this.kD.jO(void 0!==i?i:this.sN,this.iN,0,t,this.kD.gl.UNSIGNED_BYTE),this}KV(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.QV;e+=1){const r=s-e*Math.PI/this.QV;t.push(.5*Math.cos(r),.5*Math.sin(r),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.QV;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.kD.gl.TRIANGLES}}mR(){this.kD.uO(this.qV),this.kD.uO(this.tN)}}const DS=(t,i,s=!0)=>((t,i)=>{let s=t.yO.vR.get(i);return s||(s=new BS(t,i),t.yO.vR.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),ES={eN:(t,i,s,e,r,n,h=1)=>{const{attribute:o}=e,a=i.gl;if(a.bindBuffer(a.ARRAY_BUFFER,s),t){const t=o("aLocationA_highpart"),s=o("aLocationA_lowpart"),e=o("aLocationB_highpart"),l=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),i.RO(t,h),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),i.RO(s,h),a.enableVertexAttribArray(s),a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),i.RO(e,h),a.enableVertexAttribArray(e),a.vertexAttribPointer(l,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),i.RO(l,h),a.enableVertexAttribArray(l)}else{const t=o("aLocationA"),s=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),i.RO(t,h),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),i.RO(s,h),a.enableVertexAttribArray(s)}},rN:(t,i,s,e,r,n,h,o)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,s),a.vertexAttribPointer(e,n,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),t.RO(e,1),a.enableVertexAttribArray(e),a.vertexAttribPointer(r,n,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(o+h)*Float32Array.BYTES_PER_ELEMENT),t.RO(r,1),a.enableVertexAttribArray(r)},nN:(t,i,s,e,r,n)=>{const{attribute:h}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=h("aLocationA_highpart"),s=h("aLocationA_lowpart"),e=h("aLocationB_highpart"),a=h("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),i.RO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),i.RO(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),i.RO(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),i.RO(a,1),o.enableVertexAttribArray(a)}else{const t=h("aLocationA"),s=h("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),i.RO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),i.RO(s,1),o.enableVertexAttribArray(s)}},hN:(t,i,s,e,r,n,h,o,a,l)=>{const u=t.gl;u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(e,n,a,o,2*n*l,h*l),t.RO(e,1),u.enableVertexAttribArray(e),u.vertexAttribPointer(r,n,a,o,2*n*l,(h+n)*l),t.RO(r,1),u.enableVertexAttribArray(r)},ed:(t,i,s,e,r,n,h)=>{const o=t.iV(),{uniform:a,uniformOptional:l}=s,u=1/t.fl.Al,c=(r?Math.max(n,u):Math.max(n,0))+1;o.sO(a("uThicknessPixels"),c).sO(l("uAALimit"),1-(c-1)/c).tO(a("uRatioPxClip"),[2/t.li().x,2/t.li().y]),i.Pd(s,e).pC(h)}},RS={eN:(t,i,s,e,r,n)=>{const{attribute:h}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=h("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=h("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=h("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},rN:(t,i,s,e,r,n)=>{const h=t.gl;h.bindBuffer(h.ARRAY_BUFFER,s),h.vertexAttribPointer(e,r,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(e)},nN:(t,i,s,e,r,n)=>{const{attribute:h}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=h("aPos_highpart"),i=h("aPos_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t),o.vertexAttribPointer(i,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=h("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},oN:(t,i)=>{const s=t.iV();s.pC(s.gl.LINE_STRIP,i,0)},aN:(t,i)=>{const s=t.iV();s.pC(s.gl.LINES,2*i,0)}},OS=(t,i,s,e,r,n,h,o,a,l,u=h,c=0)=>{const d=t.gl;if(s){const s=i.attribute(`${r}A_highpart${n}`),f=i.attribute(`${r}A_lowpart${n}`),v=i.attribute(`${r}B_highpart${n}`),A=i.attribute(`${r}B_lowpart${n}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,h,a,o,2*u*l,2*c*l),d.vertexAttribPointer(f,h,a,o,2*u*l,(u+2*c)*l),t.RO(s,1),t.RO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.vertexAttribPointer(v,h,a,o,2*u*l,(2*u+2*c)*l),d.vertexAttribPointer(A,h,a,o,2*u*l,(3*u+2*c)*l),t.RO(v,1),t.RO(A,1),d.enableVertexAttribArray(v),d.enableVertexAttribArray(A),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const s=i.attribute(`${r}A${n}`),f=i.attribute(`${r}B${n}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,h,a,o,u*l,(0+c)*l),d.vertexAttribPointer(f,h,a,o,u*l,(u+c)*l),t.RO(s,1),t.RO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.bindBuffer(d.ARRAY_BUFFER,null)}};class zS extends Iu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.qD=new yS,this.zu=rh,this.oV=ba({lineStyleSolid:()=>aa(this.zc)&&this.zc,lineStyleDashed:()=>da(this.zc)&&this.zc,strokeFillSolid:()=>{const t=this.zc.getFillStyle();return co(t)&&t},strokeFillLinearGradient:()=>{const t=this.zc.getFillStyle();return ze(t)&&t},strokeFillRadialGradient:()=>{const t=this.zc.getFillStyle();return Ee(t)&&t},strokeFillPaletted:()=>{const t=this.zc.getFillStyle();return yo(t)&&t}}),this.qz=t,this.tV=i,this.kD=t.iV(),this.lN=this.kD.JO}Sh(){const t=this.Xl(),i=this.zc,s=this.oV.lineStyleSolid(t),r=this.oV.lineStyleDashed(t),n=s||r,h=this.oV.strokeFillSolid(t),o=this.oV.strokeFillLinearGradient(t),l=this.oV.strokeFillRadialGradient(t),u=this.oV.strokeFillPaletted(t),c=h||o||l||u&&["x","y"].includes(u.getLookUpProperty())&&u,d=this.Ci(),f=this.ki(),v=this.Hi.C(),A=this.Hi.o,g=i.Is();if(r&&this.ji instanceof We)return Or.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.qD.hO(this.ji),this.Uc&&(this.uN=this.kD.JR(dn([d,f],this.ji.xi()),!1,this.uN),this.zu=a(e(d.x,d.y),e(f.x,f.y))),t||A){const t=this.Hl()&&n&&c&&g>0,i=o?["gradient",o]:l?["gradient",l]:u?["lookup",u.getLookUpProperty(),u.lut]:"uniform";this.cN=t?{type:"triangulated",shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),this.lN?_m.AliasedEdge:void 0,r&&_m.StippleTextureInstanced),mousePickingShader:v?this.kD.KE(_m["2D"],_m.MousePicking(),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),r&&_m.StippleTextureInstanced):void 0,geometry:DS(this.kD,g),thickness:g,lineStyleSolid:s,lineStyleDashed:r,fillStyleSolid:h,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}:void 0}if(l?this.MV=nS(cu(this.zu,{x:this.$u(),y:this.Uu()},this.ji),this.ji,l.getPosition(),l.getExtent(),l.getShape(),this.kD.RR()):o?this.wV=hS(cu(this.zu,{x:this.$u(),y:this.Uu()},this.ji),this.ji,o.getAngle(!0),this.kD.RR()):(this.MV=void 0,this.wV=void 0),r){if(t||this.Uc){const t=[0,0,Math.abs(f.x-d.x),Math.abs(f.y-d.y)];this.dN=this.kD.JR(t,!1,this.dN)}this.fN=this.kD.Mz(r.getPattern())}else this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this.fN=void 0;return this.$c(i),this.Uc=!1,this.Hi.o=!1,this}ed(t,i){var s,e;const r=this.uN;if(!r)return{};const n=this.cN;if(!n)return{};const{fillStyleSolid:h,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l,lineStyleDashed:u,thickness:c}=n,d=1===t?null===(s=this.cN)||void 0===s?void 0:s.mousePickingShader:null===(e=this.cN)||void 0===e?void 0:e.shader;return d?(this.kD.Pd(d).KR(d,((s,e,d,f)=>{if(this.kD.sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),this.ji instanceof He||this.ji instanceof pa?this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(f("uScaleStart_highpart"),this.qD.Lz()).tO(f("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(f("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(f("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(f("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(f("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(s("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(s("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t)this.kD.kO(s("uFirstId"),i).Sz(d,1);else if(h)this.kD.SL(s("uColor"),h.getColor());else if(a){if(!this.MV)return!1;this.kD.lz(d,this.MV,a)}else if(o){if(!this.wV)return!1;this.kD.uz(d,this.wV,o)}else if(l){const t=xa(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.kD.Cz(d,l.lut,t)}if(u){if(!this.dN||!this.fN)return!1;ES.rN(this.kD,d,this.dN,e("aLengthSoFarA"),e("aLengthSoFarB"),2,2,0),this.kD.tO(s("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(f("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(s("uStippleScale"),u.getPatternScale()).iO(s("uStippleTexture"),this.fN.wz,1)}return ES.eN(this.ji.xi(),this.kD,r,d,this.ji.xi()?4:2,0),ES.ed(this.qz,n.geometry,d,this.lN&&1!==t,1===t,c,1),!0})),{idCount:1}):{}}nd(t,i,s,e,r){return{}}dispose(){return super.dispose(),this.cN=void 0,this.uN&&(this.kD.uO(this.uN),this.uN=void 0),this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this.fN=void 0,this}rd(){return this}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return $n(this.zc)}Uu(){return $n(this.zc)}}class VS extends Lu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.vN=[],this.AN=!1,this.gN=!1,this.yN=!1,this.pN=!1,this.mN=!1,this.qD=new yS,this.zu=rh,this.oV=ba({lineStyleSolid:()=>aa(this.zc)&&this.zc,lineStyleDashed:()=>da(this.zc)&&this.zc,lineFillSolid:()=>{const t=this.zc.getFillStyle();return co(t)&&t},lineFillRadialGradient:()=>{const t=this.zc.getFillStyle();return Ee(t)&&t},lineFillLinearGradient:()=>{const t=this.zc.getFillStyle();return ze(t)&&t},lineIndividualPointFill:()=>{const t=this.zc.getFillStyle();return vo(t)&&t}}),this.qz=t,this.tV=i,this.kD=t.iV(),this.lN=this.kD.JO,this.SN=t.fl.pl}_a(){const t={le:i=>this.bN(t,i),vs:i=>this.xN(t,i),eA:(i,s)=>this.MN(t,i,s),SL:i=>this.wN(t,i),ut:{x:0,y:0},ct:{x:0,y:0},Qi:0,PP:void 0,_N:this.vN.length,_A:!0,kN:!0};return this.gN=!0,this.vN.push(t),t}ws(){return this.vN.length=0,this.AN=!0,this.Ki.cs(this),this}CN(){return this.vN.length}C(t){const i=this.vN[t];return[i.ut,i.ct]}yy(){return this.vN}Tf(t){const i=this.vN.indexOf(t);i>=0&&(this.vN.splice(i,1),t.kN||(this.AN=!0),this.Ki.cs(this))}bN(t,i){if(i&&!t._A)t._N=this.vN.length,this.vN.push(t);else if(!i){const i=this.vN.indexOf(t);this.vN.splice(i,1)}return t._A=i,t.kN||(this.pN=!0),t}xN(t,i){return t.Qi=i,t.kN||(this.yN=!0),t}MN(t,i,s){return t.ut=i,t.ct=s,t.kN||(this.AN=!0),t}wN(t,i){return t.PP=i,t.kN||(this.mN=!0),t}Sh(){const t=this.Hi.C(),i=this.Hi.o,s=this.Xl(),e=this.zc,r=this.vN,n=this.yN,h=this.AN,o=this.pN,a=this.mN,l=this.gN,u=this.oV.lineStyleSolid(s),c=this.oV.lineStyleDashed(s),d=u||c,f=this.oV.lineFillSolid(s),v=this.oV.lineIndividualPointFill(s),A=this.oV.lineFillRadialGradient(s),g=this.oV.lineFillLinearGradient(s),y=f||v||g||A,p=e.Is(),m=c?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(c&&this.ji instanceof We)return Or.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.qD.hO(this.ji);const S=this.Yc,b=h||o,x=!b&&l;if(b||x){const t=b?r:r.filter((t=>t.kN)),i=[],s=t.length;let e=sh,n=sh,h=eh,o=eh;for(let r=0;r<s;r+=1){const s=t[r];i.push(s.ut),i.push(s.ct),e=Math.min(e,s.ut.x,s.ct.x),n=Math.min(n,s.ut.y,s.ct.y),h=Math.max(h,s.ut.x,s.ct.x),o=Math.max(o,s.ut.y,s.ct.y)}this.uN=this.kD.LO(this.uN,dn(i,this.ji.xi()),S*(this.ji.xi()?8:4),b,Float32Array),this.zu=x?bh(this.zu,{min:{x:e,y:n},max:{x:h,y:o}}):{min:{x:e,y:n},max:{x:h,y:o}}}if(s||i){const i=f?"uniform":v?"attribute":g?["gradient",g]:A?["gradient",A]:void 0,s=d&&y&&p>0&&i;this.cN=s?"triangulated"===m?{type:"triangulated",shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,snapToNearestPixel:this.SN,ensureMinimumSegmentLength:void 0!==this.jc}),this.lN?_m.AliasedEdge:void 0,c&&_m.StippleTextureInstanced,_m.AttributeHighlight),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,snapToNearestPixel:this.SN,ensureMinimumSegmentLength:void 0!==this.jc}),c&&_m.StippleTextureInstanced,_m.AttributeHighlight)}:void 0,geometry:DS(this.kD,p,!1),thickness:p,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:v,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:{type:"primitive",shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,snapToNearestPixel:this.SN}),_m.AttributeHighlight),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,snapToNearestPixel:this.SN}),_m.AttributeHighlight)}:void 0,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:v,fillStyleLinearGradient:g,fillStyleRadialGradient:A}:void 0}if(c){if(s||b||x){const t=b||s?r:r.filter((t=>t.kN)),i=new Float32Array(4*t.length);let e=0;for(let s=0;s<t.length;s+=1){const r=t[s].ut,n=t[s].ct;i[e]=0,i[e+1]=0,i[e+2]=Math.abs(n.x-r.x),i[e+3]=Math.abs(n.y-r.y),e+=4}this.dN=this.kD.LO(this.dN,i,4*S,b||s,Float32Array)}this.fN=this.kD.Mz(c.getPattern())}else this.dN&&(this.kD.uO(this.dN.buffer),this.dN=void 0),this.fN=void 0;if(n||b||x){const t="triangulated"===m?1:2,i=b||n?r:r.filter((t=>t.kN)),s=new Float32Array(i.length*t);let e=0;i.forEach((i=>{for(let r=0;r<t;r+=1)s[e+r]=i.Qi;e+=t})),this.TN=this.kD.LO(this.TN,s,S*t,b||n,Float32Array)}if((a||b||x||s)&&v){const t=b||a||s?r:r.filter((t=>t.kN)),i=new Uint32Array(2*t.length);let e=0;t.forEach((t=>{const s=(t.PP||v.color).toUint32();for(let t=e;t<e+2;t+=1)i[t]=s;e+=2})),this.FN=this.kD.LO(this.FN,i,2*S,b||a,Uint32Array)}if(t){if(b||x||i){const t="triangulated"===m?1:2,s=b||i?r:r.filter((t=>t.kN)),e=new Float32Array(s.length*t);let n=0;s.forEach((i=>{for(let s=0;s<t;s+=1)e[n+s]=i._N||0;n+=t})),this.IN=this.kD.LO(this.IN,e,S*t,b,Float32Array)}}else this.IN&&(this.kD.uO(this.IN.buffer),this.IN=void 0);A?this.vV=nS(this.Ji||this.zu,this.ji,A.getPosition(),A.getExtent(),A.getShape(),this.kD.RR()):g?this.AV=hS(this.Ji||this.zu,this.ji,g.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),this.$c(e),this.yN=!1,this.pN=!1,this.AN=!1,this.mN=!1,this.Hi.o=!1,this.gN=!1;for(const t of r)t.kN=!1;return this}ed(t,i){var s;const e=this.uN,r=this.TN,n=this.IN;if(!e||!r)return{};const h=this.cN;if(!h)return{};const{type:o,fillStyleSolid:a,fillStyleIndividual:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,lineStyleDashed:d}=h,f=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;return f?(this.kD.Pd(f).KR(f,((s,f,v,A)=>{if(this.ji instanceof He||this.ji instanceof pa?this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(A("uScaleStart_highpart"),this.qD.Lz()).tO(A("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(A("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(A("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(A("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(A("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(s("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(s("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),this.SN&&this.kD.tO(A("uViewportSizePx"),[this.Ki.li().x*this.kD.RR(),this.Ki.li().y*this.kD.RR()]),void 0!==this.jc&&this.kD.tO(s("uMinSegmentPixelVector"),[this.jc.x,this.jc.y]),this.kD.SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.kD.kO(s("uFirstId"),i),!n)return!1;"triangulated"===o?this.kD.qR(n.buffer,1,{location:f("aPickingIdOffset"),size:1}):this.kD.VO(f("aPickingIdOffset"),n.buffer)}else if(a)this.kD.SL(s("uColor"),a.getColor());else if(l){if(!this.FN)return!1;if("triangulated"===o)ES.hN(this.kD,v,this.FN.buffer,f("aColorA"),f("aColorB"),4,0,!0,this.kD.gl.UNSIGNED_BYTE,1);else{const t=f("aColor");this.kD.gl.bindBuffer(this.kD.gl.ARRAY_BUFFER,this.FN.buffer),this.kD.gl.vertexAttribPointer(t,4,this.kD.gl.UNSIGNED_BYTE,!0,0,0),this.kD.gl.enableVertexAttribArray(t)}}else if(c){if(!this.vV)return!1;this.kD.lz(v,this.vV,c)}else if(u){if(!this.AV)return!1;this.kD.uz(v,this.AV,u)}if(d){if(!this.dN||!this.fN)return!1;ES.hN(this.kD,v,this.dN.buffer,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0,!1,this.kD.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),this.kD.tO(s("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(A("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(s("uStippleScale"),d.getPatternScale()).iO(s("uStippleTexture"),this.fN.wz,0)}if("triangulated"===o){const{geometry:i,thickness:s}=h;ES.nN(this.ji.xi(),this.kD,e.buffer,v,this.ji.xi()?4:2,0),this.kD.qR(r.buffer,1,{location:f("aIsHighlighted"),size:1}),ES.ed(this.qz,i,v,this.lN&&1!==t,1===t,s,this.vN.length)}else RS.nN(this.ji.xi(),this.kD,e.buffer,v,this.ji.xi()?4:2,0),this.kD.VO(f("aIsHighlighted"),r.buffer),RS.aN(this.qz,this.vN.length);return!0})),{idCount:this.vN.length}):{}}dispose(){return super.dispose(),this.cN=void 0,this.uN&&(this.kD.uO(this.uN.buffer),this.uN=void 0),this.dN&&(this.kD.uO(this.dN.buffer),this.dN=void 0),this.TN&&(this.kD.uO(this.TN.buffer),this.TN=void 0),this.IN&&(this.kD.uO(this.IN.buffer),this.IN=void 0),this.FN&&(this.kD.uO(this.FN.buffer),this.FN=void 0),this.fN=void 0,this}nd(t,i,s,e,r){return{collectionMember:this.vN.find((s=>i+s._N===t))}}rd(){return this}vs(t){super.vs(t);for(const i of this.vN)i.vs(t);return this}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return $n(this.zc)}Uu(){return $n(this.zc)}}class NS{constructor(t,i){this.LN=!1,this.PN=!1,this.ji=t,this.DN=i,this.DN.hs("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.LN="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.LN="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.PN=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.LN?t[0].x:t[0].y,end:"x"===this.LN?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.LN?"x"===this.LN?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),r=Math.min(t[i-1].x,t[0].x);let n=t[0].y,h=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>n&&(n=i.y),i.y<h&&(h=i.y)}return a(e(r,h),e(s,n))}return rh}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),r=Math.min(t[i-1].y,t[0].y);let n=t[0].x,h=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>n&&(n=i.x),i.x<h&&(h=i.x)}return a(e(h,r),e(n,s))}return rh}(t):mh(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const GS=Math.min(1,1.5);class $S extends NS{constructor(t,i,s){super(t,i),this.EN=!1,this.RN={enabled:!1,totalDataPointsAtTime:0},this.ON=[],this.fe=s,this.zN=t instanceof He?{type:"linear",scale:t}:t instanceof We?{type:"mixed",scale:t}:{type:"unknown"},this.DN.hs("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.EN=!0)}))}VN(t,i=!1){if(this.EN||!this.LN||"linear"!==this.zN.type)return!1;!1===i&&this.NN&&(clearTimeout(this.NN),this.NN=void 0);const s="x"===this.LN?this.zN.scale.x.Fv:this.zN.scale.y.Fv;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const r=t[0],n=t[e-1],h=this.calculateAvgStepBetweenDataPoints("x"===this.LN?r.x:r.y,"x"===this.LN?n.x:n.y,e),o=this.zN.scale,a=Math.abs("x"===this.LN?o.$i().x:o.$i().y),l=a/h,u=Math.floor(l*GS),c=u*h,d=Or.performance.now(),f=!(d-s.Mn<500)&&(s.yn?d-s.xn<1e3:d-s.pn<2e3||s.Sn),v=e>2*this.RN.totalDataPointsAtTime;if(f&&!v)return this.NN=setTimeout((()=>this.GN(t)),1e3),!1;const A=u>=10,g=this.RN.enabled?this.RN.columnWidthAxis/a<1.5:void 0,y=this.RN.enabled&&u>this.RN.dataPointsPerColumn?u/this.RN.dataPointsPerColumn>=2:void 0;let p;!0===this.RN.enabled?g?y&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):p=A?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:A&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const m=!1===i;return p?(m&&(this.RN=p),!0):(m&&(this.RN={...this.RN,totalDataPointsAtTime:e}),!1)}$N(){this.UN=void 0,this.ON.length=0,this.NN&&(clearTimeout(this.NN),this.NN=void 0)}jN(t){if(0===t.length)return t;if(this.EN||!this.LN||"linear"!==this.zN.type||!this.RN.enabled)return t;let i;i=this.ON.length>0?kn(this.ON,t,{canReturnB:!0}):t;const s=i.length,e=[];let r,n,h=void 0===this.UN,o=-1,a=-1,l=0,u=0;if("x"!==this.LN||this.PN)if("x"===this.LN&&this.PN){const t=this.RN.columnWidthAxis;let c=this.UN?this.UN.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!r||s.y>r.y)&&(r=s,o=f),(!n||s.y<n.y)&&(n=s,a=f),u=f):(r&&n&&(h&&e.push(i[0]),o<a?e.push(r,n):e.push(n,r)),h=!1,c=s.x,d=c-t,r=s,o=f,n=s,a=f,l=f,u=f)}}else if("y"!==this.LN||this.PN){if("y"===this.LN&&this.PN){const t=this.RN.columnWidthAxis;let c=this.UN?this.UN.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!r||s.x>r.x)&&(r=s,o=f),(!n||s.x<n.x)&&(n=s,a=f),u=f):(n&&r&&(h&&e.push(i[0]),o<a?e.push(r,n):e.push(n,r)),h=!1,c=s.y,d=c-t,r=s,o=f,n=s,a=f,l=f,u=f)}}}else{const t=this.RN.columnWidthAxis;let c=this.UN?this.UN.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!r||s.x>r.x)&&(r=s,o=f),(!n||s.x<n.x)&&(n=s,a=f),u=f):(n&&r&&(h&&e.push(i[0]),o<a?e.push(r,n):e.push(n,r)),h=!1,c=s.y,d=c+t,r=s,o=f,n=s,a=f,l=f,u=f)}}else{const t=this.RN.columnWidthAxis;let c=this.UN?this.UN.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!r||s.y>r.y)&&(r=s,o=f),(!n||s.y<n.y)&&(n=s,a=f),u=f):(r&&n&&(h&&e.push(i[0]),o<a?e.push(r,n):e.push(n,r)),h=!1,c=s.x,d=c+t,r=s,o=f,n=s,a=f,l=f,u=f)}}if(r||n){const t=i.slice(l,u+1);this.ON=t}else this.ON.length=0;const c=e.length;return c>0&&(this.UN=e[c-1]),e}YN(t){var i,s;if(this.LN&&"linear"===this.zN.type){const e="x"===this.LN?this.zN.scale.x.Fv:this.zN.scale.y.Fv;if(!e)throw new Error("CP helper has no information about Axis state.");if((null===(i=e.Ah)||void 0===i?void 0:i.id)===dl||(null===(s=e.Ah)||void 0===s?void 0:s.id)===fl){const i=Math.abs("x"===this.LN?this.zN.scale.x.getInnerInterval():this.zN.scale.y.getInnerInterval());if(this.RN.enabled)return 2*i/this.RN.columnWidthAxis;const s=t.length,e=t[0],r=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.LN?e.x:e.y,"x"===this.LN?r.x:r.y,s)}}}HN(t,i,s){if(!this.LN)return i;const e=s.length;let r=lr(s,t.min,this.LN,this.PN,0,e-1);void 0===r&&(r=this.PN?e-1:0);let n=lr(s,t.max,this.LN,this.PN,0,e-1);return void 0===n&&(n=this.PN?0:e-1),1+Math.abs(n-r)}WN(){this.NN&&(clearTimeout(this.NN),this.NN=void 0)}GN(t){this.VN(t,!0)&&this.fe()}}class US extends NS{renderVisibleOnly(t,i,s=!1){const e=this.ji.x.getInnerStart(),r=this.ji.x.getInnerEnd(),n=Math.min(e,r),h=Math.max(e,r),o=this.ji.y.getInnerStart(),a=this.ji.y.getInnerEnd(),l=Math.min(o,a),u=Math.max(o,a);t.forEach(((t,e)=>{t.existingCoordinatesCount<=1||!1===s&&(t.boundaries.max.x<n||t.boundaries.min.x>h||t.boundaries.max.y<l||t.boundaries.min.y>u)||i(t)}))}}class jS{constructor(t,i,s){this.XN=i,this.ZN=s,this.JN=t,this.QN=[]}KN(t,i,s,e){const r=t.length;if(0===r)return;let n=t,h=r,o=this.JN[this.JN.length-1];do{const t=this.JN.length;let r;o||(o=this.qN(i,h)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.ZN&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.JN[t-1].lastDataPoint;i?(n.splice(0,0,i),a=1,h+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)r=Math.min(h,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,n.slice(0,r),r,a);else{const t=Math.ceil(i)+a;r=Math.min(t,h);const e={...s(t,n.slice(0,r),r,a),isDropped:!1};this.JN.push(e)}r>0&&(h>r?(n=n.slice(r),h=n.length):(n=[],h=0))}while(h>0);this.tG()}iG(t){const i=t,s=this.JN.indexOf(i);s>=0&&this.JN.splice(s,1),i.droppedTimestamp=Or.performance.now(),this.QN.push(i)}sG(){this.JN.slice().forEach((t=>this.iG(t)))}eG(){this.JN.forEach((t=>this.XN(t))),this.QN.forEach((t=>this.XN(t))),this.JN.length=0,this.QN.length=0}qN(t,i){const s=2*t/3,e=4*t/3,r=this.QN.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(r>=0){const t=this.QN[r];return this.QN.splice(r,1),this.JN.push(t),t}}tG(){if(this.QN.length>5){const t=Or.performance.now();for(let i=0;i<this.QN.length-5;i+=1){const s=this.QN[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.XN(s),this.QN.splice(i,1),i-=1)}}}}class YS extends NS{rG(t,i){if(!i||"object"!=typeof i)return 0;const s=this.ji.x.getInnerStart(),e=this.ji.x.getInnerEnd(),r=Math.min(s,e),n=Math.max(s,e),h=this.ji.y.getInnerStart(),o=this.ji.y.getInnerEnd(),a=Math.min(h,o),l=Math.max(h,o);if("maxDataPointCount"in i)return this.nG(t,i.maxDataPointCount,r,n,a,l);if("minDataPointCount"in i)return this.hG(t,i.minDataPointCount,r,n,a,l);if("progressiveDataCleaningThreshold"in i)return this.oG(t,i.progressiveDataCleaningThreshold,r,n,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}nG(t,i,s,e,r,n){if(void 0===i||i<=0)return 0;const h=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(h<=i)return 0;let o=0,a=h;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}oG(t,i,s,e,r,n){if(void 0===i||!this.LN)return 0;let h=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.PN?"x"===this.LN?a.boundaries.min.x>e:a.boundaries.min.y>n:"x"===this.LN?a.boundaries.max.x<s:a.boundaries.max.y<r;if(!((this.PN?"x"===this.LN?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.LN?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;h+=1}return h}hG(t,i,s,e,r,n){if(void 0===i||0===i)return 0;let h=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.LN){if(this.PN?"x"===this.LN?l.boundaries.min.x>e:l.boundaries.min.y>n:"x"===this.LN?l.boundaries.max.x<s:l.boundaries.max.y<r){h=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<r||l.boundaries.min.y>n?h+=1:h=0;o+=l.existingDataPointsCount}return h}aG(t,i){const s=t.reduce(((t,i)=>bh(t,i.boundaries)),rh);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.LN||this.PN?"x"===this.LN&&this.PN?s.max.x=Math.min(s.max.x,t):"y"!==this.LN||this.PN?"y"===this.LN&&this.PN&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class HS extends Pu{constructor(t,i,s,e,r,n){super(t,i,s,e,r),this.qD=new yS,this.eM=[],this.lG=new US(this.ji,this),this.uG=new $S(this.ji,this,(()=>this.Ki.fe())),this.cG=new jS(this.eM,(t=>{t.coordsBuffer&&this.kD.uO(t.coordsBuffer),t.dN&&this.kD.uO(t.dN)}),!0),this.dG=new YS(this.ji,this),this.fG=0,this.vG=0,this.AG=!1,this.oV=ba({lineStyleSolid:()=>aa(this.zc)&&this.zc,lineStyleDashed:()=>da(this.zc)&&this.zc,strokeFillSolid:()=>{const t=this.zc.getFillStyle();return co(t)&&t},strokeFillLinearGradient:()=>{const t=this.zc.getFillStyle();return ze(t)&&t},strokeFillRadialGradient:()=>{const t=this.zc.getFillStyle();return Ee(t)&&t},strokeFillPaletted:()=>{const t=this.zc.getFillStyle();return yo(t)&&t}}),this.tV=i,this.fl=n,this.cN={type:"none"},this.kD=t.iV(),this.qz=t,this.lN=this.kD.JO;const h=this.ji.xi(),o=!0===(null==n?void 0:n.individualLookupValuesEnabled);let a,l,u,c=0;h||(a=c,c+=2),h&&(l=c,c+=4),o&&(u=c,c+=1);const d=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,r=0;e<i;e+=1){const i=t[e];s[r+0]=i.x,s[r+1]=i.y,s[r+2]=void 0!==i.value?i.value:0,r+=3}return s}const s=t.length,e=new Float32Array(5*s);let r=0;for(let i=0;i<s;i+=1){const s=t[i],n=Math.fround(s.x),h=Math.fround(s.y);e[r+0]=n,e[r+1]=h,e[r+2]=s.x-n,e[r+3]=s.y-h,e[r+4]=void 0!==s.value?s.value:0,r+=5}return e})(i,t):(i,s)=>dn(i,t,Float32Array))(h,o);this.gG={individualLookupValuesEnabled:o,attributesPerVertex:c,attributeOffsetCoordinateLowPrecision:a,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:u,prepareRenderData:(t,i)=>d(t,this.zc.getFillStyle())}}yG(t,i,s){const e=new Float32Array(2*i);let r=0,n=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.fG+=Math.abs(n.x-i.x),this.vG+=Math.abs(n.y-i.y),e[r]=this.fG,e[r+1]=this.vG,r+=2,n=i}return e}Sh(){const t=this.Qu,i=this.zc,s=this.Xl(),e=this.Xu,r=e.length,n=r>0,h=this.Hi.C(),o=this.Hi.o,a=this.oV.lineStyleSolid(s),l=this.oV.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.oV.strokeFillSolid(s),f=this.oV.strokeFillLinearGradient(s),v=this.oV.strokeFillRadialGradient(s),A=this.oV.strokeFillPaletted(s),g=d||f||v||A,y=this.gG.individualLookupValuesEnabled;if(l&&this.ji instanceof We)return Or.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;n&&(this.Hc=kn(this.Hc,e,{canReturnB:!0}),this.Wc+=r);let p=this.Xc.o;const m=this.dG.rG(this.eM,this.Xc.C());if(m>0){let t=0;for(let i=0;i<m;i+=1){const i=this.eM[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=rh,i.lastDataPoint=void 0,this.cG.iG(i)}this.Hc=this.Hc.slice(t),this.Wc=this.Hc.length,p=!0}let S=e,b=!1;(this.uG.VN(this.Hc)||t)&&(b=!0),l&&!this.AG?(b=!0,this.AG=!0,this.cG.eG()):!l&&this.AG&&(this.eM.forEach((t=>{t.dN&&(this.kD.uO(t.dN),t.dN=void 0)})),this.AG=!1),b&&(this.uG.$N(),this.eM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=rh,t.lastDataPoint=void 0})),this.cG.sG(),S=this.Hc,this.fG=0,this.vG=0);const x=this.uG.jN(S),M=x.length;if(M>0){let t=this.uG.YN(this.Hc)||(this.hs("ApplicationType",(t=>"InternalUI"===t.type))?this.Wc:1e5);M/t>10&&(t=M/10),this.cG.KN(x,t,((t,i,s,e)=>{const r=this.lG.calculateUserDataPointsBoundaries(i),n=this.uG.HN(r,s,this.Hc)-e;return this.pG=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:n,existingCoordinatesCount:s,jointPointsCount:e,boundaries:r,coordsBuffer:this.kD.FO(t*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s)),lastDataPoint:i[s-1],dN:this.AG?this.kD.FO(2*t,this.yG(i,s,this.pG)):void 0}}),((t,i,s,e)=>{const r=bh(t.boundaries,this.lG.calculateUserDataPointsBoundaries(i)),n=this.uG.HN(r,t.existingCoordinatesCount+s,this.Hc)-(t.jointPointsCount+e);this.kD.IO(t.coordsBuffer,t.existingCoordinatesCount*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s)),this.AG&&t.dN&&this.kD.IO(t.dN,2*t.existingCoordinatesCount,this.yG(i,s,this.pG)),this.pG=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=n,t.existingCoordinatesCount+=s,t.boundaries=r}))}if(p&&(this.zu=this.dG.aG(this.eM,this.Xc.C())),this.qD.hO(this.ji),v?this.MV=nS(this.Ji||this.zu,this.ji,v.getPosition(),v.getExtent(),v.getShape(),this.kD.RR()):f?this.wV=hS(this.Ji||this.zu,this.ji,f.getAngle(!0),this.kD.RR()):(this.MV=void 0,this.wV=void 0),s||o){if(A&&"value"===A.getLookUpProperty()&&!y){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Or.alert(t),new Error(t)}if(g&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:v?["gradient",v]:A?["lookup",A.getLookUpProperty(),A.lut]:"uniform";this.cN="primitive"===t?{type:t,shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}),l&&_m.StippleTexture),mousePickingShader:h?this.kD.KE(_m["2D"],_m.MousePicking({useVertexId:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}),l&&_m.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:v,fillStylePaletted:A}:"triangulated"===t?{type:t,shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),this.lN?_m.AliasedEdge:void 0,l&&_m.StippleTextureInstanced),mousePickingShader:h?this.kD.KE(_m["2D"],_m.MousePicking(),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),l&&_m.StippleTextureInstanced):void 0,geometry:DS(this.kD,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:v,fillStylePaletted:A}:{type:"none"}}else this.cN={type:"none"}}return this.fN=l?this.kD.Mz(l.getPattern()):void 0,this.$c(i),this.Qu=!1,this.Xu=[],this.Hi.o=!1,this}ed(t,i){const s=this.kD.gl,e=this.cN;if(!e||"none"===e.type)return{};const r=1===t?e.mousePickingShader:e.shader;if(!r)return{};const{lineStyleDashed:n,fillStyleSolid:h,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l}=e;return this.kD.Pd(r).KR(r,((r,u,c,d)=>{let f=!1;if(this.kD.sO(r("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(r("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(r("uRenderEffectMask"),2===t?1:0),this.ji instanceof He||this.ji instanceof pa?this.kD.tO(r("uScale"),this.qD.eO()).tO(r("uDisp"),this.qD.rO()).tO(d("uScaleStart_highpart"),this.qD.Lz()).tO(d("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(d("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(d("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(d("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(d("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(r("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(r("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t);else if(h)this.kD.SL(r("uColor"),h.getColor());else if(a){if(!this.MV)return!1;this.kD.lz(c,this.MV,a)}else if(o){if(!this.wV)return!1;this.kD.uz(c,this.wV,o)}else if(l){const t=xa(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.kD.Cz(c,l.lut,t)}const v=Qn(i);return this.lG.renderVisibleOnly(this.eM,(i=>{const{coordsBuffer:h}=i;if(!h)return;if(1===t){const[t,s]=v.Vs(i.existingDataPointsCount);this.kD.kO(r("uFirstId"),t),"triangulated"===e.type?this.kD.Sz(c,s):this.kD.pz(c,s)}s.bindBuffer(s.ARRAY_BUFFER,h);const o="triangulated"===e.type?ES.eN:RS.eN;if(this.ji.xi()||void 0===this.gG.attributeOffsetCoordinateLowPrecision?this.ji.xi()&&void 0!==this.gG.attributeOffsetCoordinateHighPrecision&&o(!0,this.kD,h,c,this.gG.attributesPerVertex,this.gG.attributeOffsetCoordinateHighPrecision):o(!1,this.kD,h,c,this.gG.attributesPerVertex,this.gG.attributeOffsetCoordinateLowPrecision),n){if(!i.dN||!this.fN)return;"triangulated"===e.type?ES.rN(this.kD,c,i.dN,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0):RS.rN(this.kD,c,i.dN,u("aLengthSoFar"),2,0),this.kD.tO(r("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(d("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(r("uStippleScale"),n.getPatternScale()).iO(r("uStippleTexture"),this.fN.wz,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.gG.attributeOffsetLookUpValue&&1!==t)if("triangulated"===e.type){const t=u("aLookupValueA");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(t,1),s.enableVertexAttribArray(t);const i=u("aLookupValueB");s.vertexAttribPointer(i,1,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.gG.attributeOffsetLookUpValue+this.gG.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(i,1),s.enableVertexAttribArray(i)}else{const t=u("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),s.enableVertexAttribArray(t)}if("triangulated"===e.type){const{thickness:s}=e;ES.ed(this.qz,e.geometry,c,this.lN&&1!==t,1===t,s,i.existingCoordinatesCount-1)}else RS.oN(this.qz,i.existingCoordinatesCount);f=!0}),void 0===this.Ys),s.bindBuffer(s.ARRAY_BUFFER,null),f})),{idCount:this.Wc}}nd(t,i,s,e,r){return{}}tc(t,i){return Array.isArray(t)||(t=[t]),this.Xu=kn(this.Xu,t,{canReturnB:!0}),this.zu=bh(this.zu,i||i||this.lG.calculateUserDataPointsBoundaries(t)),this}ws(){return super.ws(),this.fG=0,this.vG=0,this.pG=void 0,this}dispose(){return super.dispose(),this.cG.eG(),this.uG.WN(),this.cN={type:"none"},this.fN=void 0,this}rd(){return this}$b(t){this.ac()>0&&this.Sh();const i=this.sc(),s=nr(i,t,this.ns(),this.Ku,this.qu,this.ji,this.engine.ji,this.zu,this.lG.LN,this.lG.PN);return void 0!==s?i[s]:void 0}fM(t){this.ac()>0&&this.Sh();const i=this.sc(),s=i.length;if(0===s)return;const e=this.Ku?1:0,r=s-(this.qu?2:1),n=this.ns();if(n===rr.Nearest){let e,r,n=sh;for(let h=0;h<s;h+=1){const s=Je(i[h],this.ji,this.Ki.ji);if(void 0!==r){const i=dh(r,s,t),h=(i.x-t.x)**2+(i.y-t.y)**2;h<n&&(n=h,e=i)}r=s}return void 0!==e?Je(e,this.Ki.ji,this.ji):void 0}if("x"===this.lG.LN&&n===rr.NearestX||"y"===this.lG.LN&&n===rr.NearestY){const s=ur(i,Je(t,this.Ki.ji,this.ji),this.lG.LN,this.lG.PN,e,r);return s?yh(i[s.a],i[s.b],s.lerpAmount):void 0}return this.$b(t)}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return $n(this.zc)}Uu(){return $n(this.zc)}}var WS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},XS={exports:{}};function ZS(t,i,s){s=s||2;var e,r,n,h,o,a,l,u=i&&i.length,c=u?i[0]*s:t.length,d=JS(t,0,c,s,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(t,i,s,e){var r,n,h,o=[];for(r=0,n=i.length;r<n;r++)(h=JS(t,i[r]*e,r<n-1?i[r+1]*e:t.length,e,!1))===h.next&&(h.steiner=!0),o.push(ob(h));for(o.sort(eb),r=0;r<o.length;r++)rb(o[r],s),s=QS(s,s.next);return s}(t,i,d,s)),t.length>80*s){e=n=t[0],r=h=t[1];for(var v=s;v<c;v+=s)(o=t[v])<e&&(e=o),(a=t[v+1])<r&&(r=a),o>n&&(n=o),a>h&&(h=a);l=0!==(l=Math.max(n-e,h-r))?1/l:0}return KS(d,f,s,e,r,l),f}function JS(t,i,s,e,r){var n,h;if(r===Sb(t,i,s,e)>0)for(n=i;n<s;n+=e)h=yb(n,t[n],t[n+1],h);else for(n=s-e;n>=i;n-=e)h=yb(n,t[n],t[n+1],h);return h&&cb(h,h.next)&&(pb(h),h=h.next),h}function QS(t,i){if(!t)return t;i||(i=t);var s,e=t;do{if(s=!1,e.steiner||!cb(e,e.next)&&0!==ub(e.prev,e,e.next))e=e.next;else{if(pb(e),(e=i=e.prev)===e.next)break;s=!0}}while(s||e!==i);return i}function KS(t,i,s,e,r,n,h){if(t){!h&&n&&function(t,i,s,e){var r=t;do{null===r.z&&(r.z=hb(r.x,r.y,i,s,e)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var i,s,e,r,n,h,o,a,l=1;do{for(s=t,t=null,n=null,h=0;s;){for(h++,e=s,o=0,i=0;i<l&&(o++,e=e.nextZ);i++);for(a=l;o>0||a>0&&e;)0!==o&&(0===a||!e||s.z<=e.z)?(r=s,s=s.nextZ,o--):(r=e,e=e.nextZ,a--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;s=e}n.nextZ=null,l*=2}while(h>1)}(r)}(t,e,r,n);for(var o,a,l=t;t.prev!==t.next;)if(o=t.prev,a=t.next,n?tb(t,e,r,n):qS(t))i.push(o.i/s),i.push(t.i/s),i.push(a.i/s),pb(t),t=a.next,l=a.next;else if((t=a)===l){h?1===h?KS(t=ib(QS(t),i,s),i,s,e,r,n,2):2===h&&sb(t,i,s,e,r,n):KS(QS(t),i,s,e,r,n,1);break}}}function qS(t){var i=t.prev,s=t,e=t.next;if(ub(i,s,e)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ab(i.x,i.y,s.x,s.y,e.x,e.y,r.x,r.y)&&ub(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function tb(t,i,s,e){var r=t.prev,n=t,h=t.next;if(ub(r,n,h)>=0)return!1;for(var o=r.x<n.x?r.x<h.x?r.x:h.x:n.x<h.x?n.x:h.x,a=r.y<n.y?r.y<h.y?r.y:h.y:n.y<h.y?n.y:h.y,l=r.x>n.x?r.x>h.x?r.x:h.x:n.x>h.x?n.x:h.x,u=r.y>n.y?r.y>h.y?r.y:h.y:n.y>h.y?n.y:h.y,c=hb(o,a,i,s,e),d=hb(l,u,i,s,e),f=t.prevZ,v=t.nextZ;f&&f.z>=c&&v&&v.z<=d;){if(f!==t.prev&&f!==t.next&&ab(r.x,r.y,n.x,n.y,h.x,h.y,f.x,f.y)&&ub(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,v!==t.prev&&v!==t.next&&ab(r.x,r.y,n.x,n.y,h.x,h.y,v.x,v.y)&&ub(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&ab(r.x,r.y,n.x,n.y,h.x,h.y,f.x,f.y)&&ub(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;v&&v.z<=d;){if(v!==t.prev&&v!==t.next&&ab(r.x,r.y,n.x,n.y,h.x,h.y,v.x,v.y)&&ub(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function ib(t,i,s){var e=t;do{var r=e.prev,n=e.next.next;!cb(r,n)&&db(r,e,e.next,n)&&Ab(r,n)&&Ab(n,r)&&(i.push(r.i/s),i.push(e.i/s),i.push(n.i/s),pb(e),pb(e.next),e=t=n),e=e.next}while(e!==t);return QS(e)}function sb(t,i,s,e,r,n){var h=t;do{for(var o=h.next.next;o!==h.prev;){if(h.i!==o.i&&lb(h,o)){var a=gb(h,o);return h=QS(h,h.next),a=QS(a,a.next),KS(h,i,s,e,r,n),void KS(a,i,s,e,r,n)}o=o.next}h=h.next}while(h!==t)}function eb(t,i){return t.x-i.x}function rb(t,i){if(i=function(t,i){var s,e=i,r=t.x,n=t.y,h=-1/0;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var o=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=r&&o>h){if(h=o,o===r){if(n===e.y)return e;if(n===e.next.y)return e.next}s=e.x<e.next.x?e:e.next}}e=e.next}while(e!==i);if(!s)return null;if(r===h)return s;var a,l=s,u=s.x,c=s.y,d=1/0;e=s;do{r>=e.x&&e.x>=u&&r!==e.x&&ab(n<c?r:h,n,u,c,n<c?h:r,n,e.x,e.y)&&(a=Math.abs(n-e.y)/(r-e.x),Ab(e,t)&&(a<d||a===d&&(e.x>s.x||e.x===s.x&&nb(s,e)))&&(s=e,d=a)),e=e.next}while(e!==l);return s}(t,i),i){var s=gb(i,t);QS(i,i.next),QS(s,s.next)}}function nb(t,i){return ub(t.prev,t,i.prev)<0&&ub(i.next,t,t.next)<0}function hb(t,i,s,e,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*r)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function ob(t){var i=t,s=t;do{(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next}while(i!==t);return s}function ab(t,i,s,e,r,n,h,o){return(r-h)*(i-o)-(t-h)*(n-o)>=0&&(t-h)*(e-o)-(s-h)*(i-o)>=0&&(s-h)*(n-o)-(r-h)*(e-o)>=0}function lb(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==i.i&&s.next.i!==i.i&&db(s,s.next,t,i))return!0;s=s.next}while(s!==t);return!1}(t,i)&&(Ab(t,i)&&Ab(i,t)&&function(t,i){var s=t,e=!1,r=(t.x+i.x)/2,n=(t.y+i.y)/2;do{s.y>n!=s.next.y>n&&s.next.y!==s.y&&r<(s.next.x-s.x)*(n-s.y)/(s.next.y-s.y)+s.x&&(e=!e),s=s.next}while(s!==t);return e}(t,i)&&(ub(t.prev,t,i.prev)||ub(t,i.prev,i))||cb(t,i)&&ub(t.prev,t,t.next)>0&&ub(i.prev,i,i.next)>0)}function ub(t,i,s){return(i.y-t.y)*(s.x-i.x)-(i.x-t.x)*(s.y-i.y)}function cb(t,i){return t.x===i.x&&t.y===i.y}function db(t,i,s,e){var r=vb(ub(t,i,s)),n=vb(ub(t,i,e)),h=vb(ub(s,e,t)),o=vb(ub(s,e,i));return r!==n&&h!==o||!(0!==r||!fb(t,s,i))||!(0!==n||!fb(t,e,i))||!(0!==h||!fb(s,t,e))||!(0!==o||!fb(s,i,e))}function fb(t,i,s){return i.x<=Math.max(t.x,s.x)&&i.x>=Math.min(t.x,s.x)&&i.y<=Math.max(t.y,s.y)&&i.y>=Math.min(t.y,s.y)}function vb(t){return t>0?1:t<0?-1:0}function Ab(t,i){return ub(t.prev,t,t.next)<0?ub(t,i,t.next)>=0&&ub(t,t.prev,i)>=0:ub(t,i,t.prev)<0||ub(t,t.next,i)<0}function gb(t,i){var s=new mb(t.i,t.x,t.y),e=new mb(i.i,i.x,i.y),r=t.next,n=i.prev;return t.next=i,i.prev=t,s.next=r,r.prev=s,e.next=s,s.prev=e,n.next=e,e.prev=n,e}function yb(t,i,s,e){var r=new mb(t,i,s);return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function pb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function mb(t,i,s){this.i=t,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sb(t,i,s,e){for(var r=0,n=i,h=s-e;n<s;n+=e)r+=(t[h]-t[n])*(t[n+1]+t[h+1]),h=n;return r}XS.exports=ZS,XS.exports.default=ZS,ZS.deviation=function(t,i,s,e){var r=i&&i.length,n=r?i[0]*s:t.length,h=Math.abs(Sb(t,0,n,s));if(r)for(var o=0,a=i.length;o<a;o++){var l=i[o]*s,u=o<a-1?i[o+1]*s:t.length;h-=Math.abs(Sb(t,l,u,s))}var c=0;for(o=0;o<e.length;o+=3){var d=e[o]*s,f=e[o+1]*s,v=e[o+2]*s;c+=Math.abs((t[d]-t[v])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[v+1]-t[d+1]))}return 0===h&&0===c?0:Math.abs((c-h)/h)},ZS.flatten=function(t){for(var i=t[0][0].length,s={vertices:[],holes:[],dimensions:i},e=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var h=0;h<i;h++)s.vertices.push(t[r][n][h]);r>0&&(e+=t[r-1].length,s.holes.push(e))}return s};class bb extends yu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.cN={fill:void 0,border:void 0},this.qD=new yS,this.zu=rh,this.mG=!1,this.SG=!1,this.bG=!1,this.xG=!1,this.MG=!1,this.kf=[],this.oV=ba({polygonStyleSolid:()=>co(this.Lr)&&this.Lr,polygonStyleImage:()=>Mr(this.Lr)&&this.Lr,polygonStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,polygonStyleLinearGradient:()=>ze(this.Lr)&&this.Lr,polygonStylePaletted:()=>yo(this.Lr)&&this.Lr,polygonStyleIndividual:()=>vo(this.Lr)&&this.Lr,lineStyleSolid:()=>aa(this.Pr)&&this.Pr,lineStyleDashed:()=>da(this.Pr)&&this.Pr,lineStyleFilled:()=>{const t=this.Pr&&this.Pr.getFillStyle();return co(t)&&t}}),this.qz=t,this.tV=i,this.kD=t.iV(),this.lN=this.kD.JO}_a(){const t={le:i=>this.bN(t,i),vs:i=>this.xN(t,i),Nu:i=>this.wG(t,i),rb:i=>this._G(t,i),SL:i=>this.wN(t,i),Ou:[],S:void 0,kG:void 0,Qi:0,_A:!0,CG:this.kf.length};return this.kf.push(t),t}ws(){return this.kf.length=0,this.mG=!0,this.Ki.cs(this),this}yy(){return this.kf}Tf(t){const i=this.kf.indexOf(t);i>=0&&(this.kf.splice(i,1),this.MG=!0,this.Ki.cs(this,t))}bN(t,i){return t._A=i,this.MG=!0,t._A||this.Ki.cs(this,t),t}xN(t,i){return t.Qi=i,this.xG=!0,t}wG(t,i){return t.Ou=i,this.mG=!0,t}_G(t,i){return t.S=i,this.SG=!0,t}wN(t,i){return t.kG=null==i?void 0:i.toUint32(),this.bG=!0,t}Sh(){const t=this.Hi.C(),i=this.Hi.o,s=this.Ul(),e=this.xG,r=this.mG,n=this.SG,h=this.bG,o=this.MG,a=this.Pr,l=this.Xl(),u=this.kf.filter((t=>t._A&&t.Ou.length>0));if(this.qD.hO(this.ji),(r||o)&&(this.zu=bh(...u.map((t=>mh(t.Ou))))),r||o){const t=u.map((t=>[...t.Ou,t.Ou[0],{x:Number.NaN,y:Number.NaN}])).flat(),i=dn(t,!1,Float64Array),s=this.ji.xi()?dn(t,!0):i;this.uN=this.kD.JR(s,!1,this.uN);let e=[];u.reduce(((t,s)=>{const r=t,n=2*(s.Ou.length+1),h=new Float64Array(i.buffer,r,n),o=XS.exports(h,void 0,2),a=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let t=0;t<o.length;t+=1)o[t]+=a;return e=kn(e,o,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT}),0);const r=new Uint32Array(e);this.TG=this.kD.BO(r,this.TG),this.FG=r.length,this.IG=i.length/2-1}const c=this.oV.polygonStyleSolid(s),d=this.oV.polygonStylePaletted(s),f=this.oV.polygonStyleIndividual(s),v=this.oV.polygonStyleRadialGradient(s),A=this.oV.polygonStyleLinearGradient(s),g=this.oV.polygonStyleImage(s),y=c||d||A||v||g||f,p=this.oV.lineStyleSolid(l),m=this.oV.lineStyleDashed(s),S=p||m,b=this.oV.lineStyleFilled(l),x=b,M=S&&Math.max(S.getThickness(),0);if((s||l||i)&&(this.cN.fill=y?{shader:this.kD.KE(_m["2D"],c&&_m.Color({dataType:"uniform"}),A&&_m.Color({dataType:["gradient",A]}),v&&_m.Color({dataType:["gradient",v]}),d&&_m.Color({dataType:["lookup",d.getLookUpProperty(),d.lut]}),f&&_m.Color({dataType:"attribute"}),g&&_m.Color({dataType:["image",g]}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}),_m.AttributeHighlight),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}),_m.AttributeHighlight)}:void 0,fillStyleSolid:c,fillStyleLinearGradient:A,fillStyleRadialGradient:v,fillStylePaletted:d,fillStyleImage:g,fillStyleIndividual:f}:void 0,this.cN.border=S&&x&&"number"==typeof M&&0!==M?{shader:this.kD.KE(_m["2D"],_m.Color({dataType:"uniform"}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),this.lN?_m.AliasedEdge:void 0,m&&_m.StippleTextureInstanced,_m.AttributeHighlight),geometry:DS(this.kD,M),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0}),m&&_m.StippleTextureInstanced,_m.AttributeHighlight)}:void 0,fillStyleSolid:b,lineStyleDashed:m,thickness:M}:void 0),e||r){const t=u.reduce(((t,i)=>t+i.Ou.length+2),0),i=new Float32Array(t);let s=0;u.forEach((t=>{const e=t.Ou.length+2;for(let r=s;r<s+e;r+=1)i[r]=t.Qi;s+=e})),this.LG=this.kD.JR(i,!0,this.LG)}if(t){if(r){const t=u.reduce(((t,i)=>t+i.Ou.length+2),0),i=new Float32Array(t);let s=0;u.forEach((t=>{const e=t.Ou.length+2;for(let r=s;r<s+e;r+=1)i[r]=t.CG;s+=e})),this.PG=this.kD.JR(i,!1,this.PG)}}else this.PG&&(this.kD.uO(this.PG),this.PG=void 0);if(n||r&&d&&"value"===d.getLookUpProperty()){const t=u.reduce(((t,i)=>t+i.Ou.length+2),0),i=new Float32Array(t);let s=0;const e={min:sh,max:eh};u.forEach((t=>{const r=void 0!==t.S?t.S:Cr,n=t.Ou.length+2;for(let t=s;t<s+n;t+=1)i[t]=r;s+=n,void 0!==t.S&&(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))})),this.BG=e,this.DG=this.kD.JR(i,!1,this.DG)}if(h||r&&f){const t=u.reduce(((t,i)=>t+i.Ou.length+2),0),i=new Uint32Array(t);let s=0;const e=f?f.getFallbackColor().toUint32():we.toUint32();u.forEach((t=>{const r=void 0!==t.kG?t.kG:e,n=t.Ou.length+2;for(let t=s;t<s+n;t+=1)i[t]=r;s+=n})),this.EG=this.kD.JR(i,!1,this.EG,Uint32Array)}if(v?this.vV=nS(this.Ji||this.zu,this.ji,v.getPosition(),v.getExtent(),v.getShape(),this.kD.RR()):A?this.AV=hS(this.Ji||this.zu,this.ji,A.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),m){if(r){const t=u.reduce(((t,i)=>t+i.Ou.length),2*u.length),i=new Float32Array(2*t);let s=0;u.forEach((t=>{let e=t.Ou[0],r=0,n=0;for(const h of t.Ou)r+=Math.abs(h.x-e.x),n+=Math.abs(h.y-e.y),i[s]=r,i[s+1]=n,s+=2,e=h;i[s+0]=r+Math.abs(t.Ou[0].x-e.x),i[s+1]=n+Math.abs(t.Ou[0].y-e.y),i[s+2]=Number.NaN,i[s+3]=Number.NaN,s+=4})),this.dN=this.kD.JR(i,!1,this.dN)}this.fN=this.kD.Mz(m.getPattern())}else this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this.fN=void 0;return this.OG=this.kD.Tz(this,this.OG,g,void 0,r||o||this.ji.Vi(),((t,i,s)=>this.zG(t,i,s,u))),this.xG=!1,this.MG=!1,this.mG=!1,this.SG=!1,this.bG=!1,this.Hi.o=!1,this.Wl(this.Lr),this.Ql(a),this}ls(){return this.BG}ed(t,i){var s,e;const{fill:r,border:n}=this.cN,h=this.uN,o=this.LG,a=this.PG;if(!h||!o)return{};if(r){const{fillStyleSolid:e,fillStyleLinearGradient:n,fillStyleRadialGradient:l,fillStylePaletted:u,fillStyleImage:c,fillStyleIndividual:d}=r,f=this.TG,v=this.FG,A=1===t?null===(s=r.mousePicking)||void 0===s?void 0:s.shader:r.shader;A&&h&&f&&void 0!==v&&this.kD.Pd(A).KR(A,((s,r,A,g)=>{if(this.ji instanceof He||this.ji instanceof pa?this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(g("uScaleStart_highpart"),this.qD.Lz()).tO(g("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(g("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(g("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(g("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(g("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(s("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(s("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),this.kD.fz(A,h,this.ji.xi(),void 0).NO(f).VO(r("aIsHighlighted"),o).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.kD.kO(s("uFirstId"),i),!a)return!1;this.kD.VO(r("aPickingIdOffset"),a)}else if(e)this.kD.SL(s("uColor"),e.getColor());else if(l){if(!this.vV)return!1;this.kD.lz(A,this.vV,l)}else if(n){if(!this.AV)return!1;this.kD.uz(A,this.AV,n)}else if(u){const t=xa(u,this,this.BG);if(!t&&u.lut.percentageValues)return!1;if(this.kD.Cz(A,u.lut,t),"value"===u.getLookUpProperty()){if(!this.DG)return!1;this.kD.VO(r("aLookupValue"),this.DG)}}else if(c){if(!this.OG)return!1;this.kD.SL(g("uColor"),c.getSurroundingColor()).iO(s(Xp),this.OG.texture.BR()||this.OG.sourceMissingTexture,0).qR(this.OG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).CO(c.fitMode)}else if(d){if(!this.EG)return!1;const t=r("aColor");this.kD.gl.bindBuffer(this.kD.gl.ARRAY_BUFFER,this.EG),this.kD.gl.vertexAttribPointer(t,4,this.kD.gl.UNSIGNED_BYTE,!0,0,0),this.kD.gl.enableVertexAttribArray(t)}return this.kD.$O(v,void 0,void 0,this.kD.gl.UNSIGNED_INT),!0}))}if(n){const{geometry:s,fillStyleSolid:r,thickness:l,lineStyleDashed:u}=n,c=this.IG,d=1===t?null===(e=n.mousePicking)||void 0===e?void 0:e.shader:n.shader;d&&h&&c&&this.kD.Pd(d).KR(d,((e,n,d,f)=>{if(this.ji instanceof He||this.ji instanceof pa?this.kD.tO(e("uScale"),this.qD.eO()).tO(e("uDisp"),this.qD.rO()).tO(f("uScaleStart_highpart"),this.qD.Lz()).tO(f("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(f("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(f("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(f("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(f("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(e("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(e("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),this.kD.qR(o,1,{location:n("aIsHighlighted"),size:1}).SL(e("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(e("uRenderEffectMask"),2===t?1:0),1===t){if(this.kD.kO(e("uFirstId"),i),!a)return!1;this.kD.VO(n("aPickingIdOffset"),a,1)}else r&&this.kD.SL(e("uColor"),r.getColor());if(u){if(!this.fN||!this.dN)return!1;ES.rN(this.kD,d,this.dN,n("aLengthSoFarA"),n("aLengthSoFarB"),2,2,0),this.kD.tO(e("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(f("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(e("uStippleScale"),u.getPatternScale()).iO(e("uStippleTexture"),this.fN.wz,1)}return ES.eN(this.ji.xi(),this.kD,h,d,this.ji.xi()?4:2,0),ES.ed(this.qz,s,d,this.lN&&1!==t,1===t,l,c),!0}))}return{idCount:this.kf.length}}zG(t,i,s,e){const r=Je({x:this.zu.min.x,y:this.zu.min.y},this.ji,this.Ki.ji),n=Je({x:this.zu.max.x,y:this.zu.max.y},this.ji,this.Ki.ji),h={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},o=uS(t,i,h.x,h.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.Ou.length+2),0),f=new Float32Array(2*d),v=this.zu.max.x-this.zu.min.x,A=this.zu.max.y-this.zu.min.y,g=l-u,y=c-a;let p=0;for(const t of e){for(const i of t.Ou){const t=u+g*((i.x-this.zu.min.x)/v),s=a+y*((i.y-this.zu.min.y)/A);f[p]=t,f[p+1]=s,p+=2}const i=u+g*((t.Ou[0].x-this.zu.min.x)/v),s=a+y*((t.Ou[0].y-this.zu.min.y)/A);f[p]=i,f[p+1]=s,p+=2,f[p]=Number.NaN,f[p+1]=Number.NaN,p+=2}return f}nd(t,i,s,e,r){return{collectionMember:this.kf.find((s=>i+s.CG===t))}}rd(){return this.TG&&(this.kD.uO(this.TG),this.TG=void 0),this.uN&&(this.kD.uO(this.uN),this.uN=void 0),this.LG&&(this.kD.uO(this.LG),this.LG=void 0),this.PG&&(this.kD.uO(this.PG),this.PG=void 0),this.DG&&(this.kD.uO(this.DG),this.DG=void 0),this.EG&&(this.kD.uO(this.EG),this.EG=void 0),this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this.cN={fill:void 0,border:void 0},this.OG=this.kD.Fz(this,this.OG),this}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return $n(this.Pr)}Uu(){return $n(this.Pr)}}class xb extends mu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.qD=new yS,this.VG=rh,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,fillStyleLinearGradient:()=>ze(this.Lr)&&this.Lr,fillStyleImage:()=>Mr(this.Lr)&&this.Lr,strokeStyleSolid:()=>aa(this.Pr)&&this.Pr,strokeFillSolid:()=>{const t=this.Pr.getFillStyle();return co(t)&&t},strokeFillLinearGradient:()=>{const t=this.Pr.getFillStyle();return ze(t)&&t},strokeFillRadialGradient:()=>{const t=this.Pr.getFillStyle();return Ee(t)&&t}}),this.zG=(t,i,s)=>{const e=Je(this.yu(),this.ji,this.Ki.ji),r=Ph(Je(Lh(this.yu(),this.li()),this.ji,this.Ki.ji),e);return uS(t,i,r.x,r.y,s)},this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i}Sh(){super.Sh();const t=this.Hi.C(),i=this.Ul(),s=this.co.o||this.Bt.o||this.ru.o||this.q.o,r=this.Pr,n=this.Xl(),h=r.getThickness(),o=this.ru.C();this.qD.hO(this.ji);const a=this.ji.Vi();if(s){const t=this.Bt.C();this.Ou=function(t,i,s,r,n){const h=((t,i,s)=>[t,e(t.x+i,t.y),e(t.x+i,t.y+s),e(t.x,t.y+s)])(t,i,s);if(0!==r||r%360!=0){const t=r*Math.PI/180;h[0]=_h(h[0],n,t),h[1]=_h(h[1],n,t),h[2]=_h(h[2],n,t),h[3]=_h(h[3],n,t)}return h}(this.co.C(),t.x,t.y,o,this.q.C());const i=dn(this.Ou,this.ji.xi());this.uV=this.kD.JR(i,!1,this.uV),this.dV=this.Ou.length,this.VG=mh(this.Ou)}const l=this.oV.fillStyleSolid(i),u=this.oV.fillStyleRadialGradient(i),c=this.oV.fillStyleLinearGradient(i),d=this.oV.fillStyleImage(i),f=l||u||c||d;i&&(this.gV=f?this.kD.KE(_m["2D"],l&&_m.Color({dataType:"uniform"}),c&&_m.Color({dataType:["gradient",c]}),u&&_m.Color({dataType:["gradient",u]}),d&&_m.Color({dataType:["image",d]}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),u?this.vV=nS(this.Ji||this.VG,this.ji,u.getPosition(),u.getExtent(),u.getShape(),this.kD.RR()):c?this.AV=hS(this.Ji||this.VG,this.ji,c.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),this.OG=this.kD.Tz(this,this.OG,d,void 0,a||s,this.zG);const v=this.oV.strokeStyleSolid(n),A=this.oV.strokeFillSolid(n),g=this.oV.strokeFillLinearGradient(n),y=this.oV.strokeFillRadialGradient(n),p=v,m=A||g||y;if(p&&(s||n||a&&1!==h)){if(1===h||-1===h)[this.yV,this.NG]=[this.Ou,void 0];else{const t=this.ji;[this.yV,this.NG]=t instanceof We?((t,i,s)=>{const e=t[0],r=t[1],n=t[2],h=t[3],o=i/2;return[[s.Ui(e,r,o,-o),s.Ui(r,e,-o,-o),s.Ui(h,n,-o,-o),s.Ui(n,h,o,-o),s.Ui(e,r,-o,o),s.Ui(r,e,o,o),s.Ui(h,n,o,o),s.Ui(n,h,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Ou,h,t):((t,i,s)=>{const r=t[0],n=t[1],h=t[2],o=t[3],a=e(i.x*s*.5,i.y*s*.5),l=Ch(kh(n,r)),u=Ch(kh(o,r)),c=Eh(l),d=Eh(u);return[[Lh(r,Lh(Ih(c,a.x),Ih(d,a.y))),Lh(n,Lh(Ih(l,a.x),Ih(d,a.y))),Lh(o,Lh(Ih(c,a.x),Ih(u,a.y))),Lh(h,Lh(Ih(l,a.x),Ih(u,a.y))),Lh(r,Lh(Ih(l,a.x),Ih(u,a.y))),Lh(n,Lh(Ih(c,a.x),Ih(u,a.y))),Lh(o,Lh(Ih(l,a.x),Ih(d,a.y))),Lh(h,Lh(Ih(c,a.x),Ih(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Ou,t.$i(),h)}this.mV=this.kD.JR(dn(this.yV,this.ji.xi()),!1,this.mV),this.NG?(this.tN=this.kD.BO(new Uint16Array(this.NG),this.tN),this.pV=this.NG.length):(this.tN&&this.kD.uO(this.tN),this.tN=void 0,this.pV=this.yV.length)}return n&&(this._V=p&&m?this.kD.KE(_m["2D"],_m.Color({dataType:y?["gradient",y]:g?["gradient",g]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),y?this.MV=nS(this.VG,this.ji,y.getPosition(),y.getExtent(),y.getShape(),this.kD.RR()):g?this.wV=hS(this.VG,this.ji,g.getAngle(!0),this.kD.RR()):(this.MV=void 0,this.wV=void 0),this.kV=t&&f?this.kV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.CV=t&&this.Pr!==_r?this.CV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.Wl(this.Lr),this.Ql(r),this.co.o=!1,this.ru.o=!1,this.Bt.o=!1,this.q.o=!1,this}ed(t,i){const s=1===t?this.kV:this.gV,e=this.uV,r=this.dV,n=this.oV.fillStyleSolid(!1),h=this.oV.fillStyleRadialGradient(!1),o=this.oV.fillStyleLinearGradient(!1),a=this.oV.fillStyleImage(!1);s&&e&&r&&this.Lr!==ho&&(this.kD.Pd(s),this.kD.KR(s,((s,l,u,c)=>{if(this.ji instanceof He||this.ji instanceof pa?this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(c("uScaleStart_highpart"),this.qD.Lz()).tO(c("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(c("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(c("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(c("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(c("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(s("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(s("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t)this.kD.kO(s("uFirstId"),i).Sz(u,1);else if(n)this.kD.SL(s("uColor"),n.getColor());else if(h){if(!this.vV)return!1;this.kD.lz(u,this.vV,h)}else if(o){if(!this.AV)return!1;this.kD.uz(u,this.AV,o)}else if(a){if(!this.OG)return!1;const t=this.OG&&this.OG.texture.BR();this.kD.SL(c("uColor"),a.getSurroundingColor()).iO(s(Xp),t||this.OG.sourceMissingTexture,0).qR(this.OG.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).CO(a.fitMode)}return this.kD.sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0).fz(u,e,this.ji.xi(),void 0).pC(this.kD.gl.TRIANGLE_FAN,r),!0})));const l=1===t?this.CV:this._V,u=this.oV.strokeStyleSolid(!1),c=this.oV.strokeFillSolid(!1),d=this.oV.strokeFillLinearGradient(!1),f=this.oV.strokeFillRadialGradient(!1),v=this.mV;return l&&v&&u&&(this.kD.Pd(l),this.kD.KR(l,((s,e,r,n)=>{if(this.ji instanceof He||this.ji instanceof pa?this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(n("uScaleStart_highpart"),this.qD.Lz()).tO(n("uScaleStart_lowpart"),this.qD.Pz()):this.ji instanceof We&&this.kD.tO(n("uScaleStart"),this.qD.MixedScaleXY.uScaleStart).tO(n("uScaleStartLog"),this.qD.MixedScaleXY.uScaleStartLog).tO(n("uScaleInterval"),this.qD.MixedScaleXY.uScaleInterval).tO(n("uScaleIntervalLog"),this.qD.MixedScaleXY.uScaleIntervalLog).tO(s("uViewportStart"),this.qD.MixedScaleXY.uViewportStart).tO(s("uViewportSize"),this.qD.MixedScaleXY.uViewportSize),1===t)this.kD.kO(s("uFirstId"),i).Sz(r,1);else if(c)this.kD.SL(s("uColor"),c.getColor());else if(f){if(!this.MV)return!1;this.kD.lz(r,this.MV,f)}else if(d){if(!this.wV)return!1;this.kD.uz(r,this.wV,d)}return this.kD.sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0).fz(r,v,this.ji.xi(),void 0),this.tN?this.kD.NO(this.tN).$O(this.pV):this.kD.pC(this.kD.gl.LINE_LOOP,this.pV),!0}))),{idCount:1}}nd(t,i,s,e,r){return{}}rd(){return this.tN&&(this.kD.uO(this.tN),this.tN=void 0),this.uV&&(this.kD.uO(this.uV),this.uV=void 0),this.mV&&(this.kD.uO(this.mV),this.mV=void 0),this.OG=this.kD.Fz(this,this.OG),this.gV=void 0,this._V=void 0,this.kV=void 0,this.CV=void 0,this}Ps(){return Math.max(this.co.C().x,this.co.C().x+this.Bt.C().x)}Ls(){return Math.min(this.co.C().x,this.co.C().x+this.Bt.C().x)}Ds(){return Math.max(this.co.C().y,this.co.C().y+this.Bt.C().y)}Bs(){return Math.min(this.co.C().y,this.co.C().y+this.Bt.C().y)}$u(){return $n(this.Pr)}Uu(){return $n(this.Pr)}}class Mb extends Su{constructor(t,i,s,e,r){super(t,i,s,e,r),this.qD=new yS,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStylePaletted:()=>yo(this.Lr)&&this.Lr,fillStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,fillStyleLinearGradient:()=>ze(this.Lr)&&this.Lr,fillStyleImage:()=>Mr(this.Lr)&&this.Lr,strokeLineStyleSolid:()=>aa(this.Pr)&&this.Pr,strokeLineSolidFill:()=>{const t=this.Pr.getFillStyle();return co(t)&&t},strokeLinearGradientFill:()=>{const t=this.Pr.getFillStyle();return ze(t)&&t},strokeRadialGradientFill:()=>{const t=this.Pr.getFillStyle();return Ee(t)&&t}}),this.zG=(t,i,s)=>{const e=Je({x:this.zu.min.x,y:this.zu.min.y},this.ji,this.Ki.ji),r=Je({x:this.zu.max.x,y:this.zu.max.y},this.ji,this.Ki.ji),n={x:Math.abs(e.x-r.x),y:Math.abs(e.y-r.y)},h=uS(t,i,n.x,n.y,s),o=h[1],a=h[4],l=h[6],u=h[7],c=new Float32Array(2*this.Ou.length),d=this.zu.max.x-this.zu.min.x,f=this.zu.max.y-this.zu.min.y,v=a-l,A=u-o;let g=0;for(const t of this.Ou){const i=l+v*((t.x-this.zu.min.x)/d),s=o+A*((t.y-this.zu.min.y)/f);c[g]=i,c[g+1]=s,g+=2}return c},this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i}Jd(t){let i,s=Number.MAX_VALUE;for(const e of this.Ou){const r=vh(Je(e,this.ji,this.Ki.ji),t);r<s&&(s=r,i=e)}return i}Sh(){const t=this.Hi.C(),i=this.Ul(),s=this.Vu,e=this.Ou.length>=3,r=this.Pr,n=this.Xl(),h=r.getThickness(),o=this.Jl(h);this.qD.hO(this.ji),this.Ve=this.ji.$i();const a=this.ji.Vi();if(s&&(this.zu=mh(this.Ou)),s&&e){const t=dn(this.Ou,this.ji.xi());this.uV=this.kD.JR(t,!1,this.uV),this.GG=new Uint16Array(XS.exports(t)),this.$G=this.kD.BO(this.GG,this.$G),this.dV=this.GG.length}const l=this.oV.fillStyleSolid(i),u=this.oV.fillStylePaletted(i),c=this.oV.fillStyleRadialGradient(i),d=this.oV.fillStyleLinearGradient(i),f=this.oV.fillStyleImage(i),v=l||u&&"value"!==u.getLookUpProperty()&&u||d||c||f;if(i&&(this.gV=v?this.kD.KE(_m["2D"],l&&_m.Color({dataType:"uniform"}),d&&_m.Color({dataType:["gradient",d]}),c&&_m.Color({dataType:["gradient",c]}),u&&_m.Color({dataType:["lookup",u.getLookUpProperty(),u.lut]}),f&&_m.Color({dataType:["image",f]}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),c?this.vV=nS(this.Ji||this.zu,this.ji,c.getPosition(),c.getExtent(),c.getShape(),this.kD.RR()):d?this.AV=hS(this.Ji||this.zu,this.ji,d.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),this.OG=this.kD.Tz(this,this.OG,f,void 0,a||s,this.zG),(s||o||a&&1!==h)&&e){const t=1===h||-1===h?this.Ou:MS(this.Ou,this.Ve,h);this.yV=dn(t,this.ji.xi()),this.mV=this.kD.JR(this.yV,!0,this.mV),this.pV=t.length}const A=this.oV.strokeLineStyleSolid(n),g=this.oV.strokeLineSolidFill(n),y=this.oV.strokeLinearGradientFill(n),p=this.oV.strokeRadialGradientFill(n),m=A,S=g||y||p;return n&&(this._V=m&&S?this.kD.KE(_m["2D"],_m.Color({dataType:p?["gradient",p]:y?["gradient",y]:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0),p?this.MV=nS(this.Ji||this.zu,this.ji,p.getPosition(),p.getExtent(),p.getShape(),this.kD.RR()):y?this.wV=hS(this.Ji||this.zu,this.ji,y.getAngle(!0),this.kD.RR()):(this.MV=void 0,this.wV=void 0),this.kV=t&&v?this.kV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.CV=t&&this.Pr!==_r?this.kV||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})):void 0,this.Vu=!1,this.Wl(this.Lr),this.Ql(r),this}ed(t,i){const s=1===t?this.kV:this.gV,e=this.uV,r=this.dV,n=this.oV.fillStyleSolid(!1),h=this.oV.fillStyleRadialGradient(!1),o=this.oV.fillStyleLinearGradient(!1),a=this.oV.fillStylePaletted(!1),l=this.oV.fillStyleImage(!1);s&&e&&r&&this.kD.Pd(s).KR(s,((s,r,u,c)=>{if(this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).tO(c("uScaleStart_highpart"),this.qD.Lz()).tO(c("uScaleStart_lowpart"),this.qD.Pz()).fz(u,e,this.ji.xi(),void 0).NO(this.$G).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),1===t)this.kD.kO(s("uFirstId"),i).Sz(u,1);else if(n)this.kD.SL(s("uColor"),n.getColor());else if(h){if(!this.vV)return!1;this.kD.lz(u,this.vV,h)}else if(o){if(!this.AV)return!1;this.kD.uz(u,this.AV,o)}else if(a){const t=xa(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.kD.Cz(u,a.lut,t)}else if(l){if(!this.OG)return!1;this.kD.SL(c("uColor"),l.getSurroundingColor()).iO(s(Xp),this.OG.texture.BR()||this.OG.sourceMissingTexture,0).qR(this.OG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).CO(l.fitMode)}return this.kD.$O(this.dV),!0}));const u=1===t?this.CV:this._V,c=this.Pr,d=this.mV,f=this.pV;return u&&d&&f&&this.kD.Pd(u).KR(u,((s,e,r,n)=>{this.kD.sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0).tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).fz(r,d,this.ji.xi(),void 0);const h=c.getFillStyle();if(1===t)this.kD.kO(s("uFirstId"),i).Sz(r,1);else if(co(h))this.kD.SL(s("uColor"),h.getColor());else if(Ee(h)){if(!this.MV)return!1;this.kD.lz(r,this.MV,h)}else if(ze(h)){if(!this.wV)return!1;this.kD.uz(r,this.wV,h)}const o=c.getThickness(),a=-1===o||1===o;return this.kD.pC(a?this.kD.gl.LINE_LOOP:this.kD.gl.TRIANGLE_STRIP,this.pV),!0})),{idCount:1}}nd(t,i,s,e,r){return{}}rd(){return this.$G&&(this.kD.uO(this.$G),this.$G=void 0),this.uV&&(this.kD.uO(this.uV),this.uV=void 0),this.mV&&(this.kD.uO(this.mV),this.mV=void 0),this.gV=void 0,this._V=void 0,this.kV=void 0,this.CV=void 0,this.OG=this.kD.Fz(this,this.OG),this}}class wb extends oS{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.KV();this.qV=t.JR(i),this.iN=e,this.sN=s}Pd(t){return this.kD.qR(this.qV,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}pC(t,i,s){return this.kD.UO(void 0!==i?i:this.sN,s||0,this.iN,t),this}KV(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.kD.gl.TRIANGLES,drawSize:6}}mR(){this.kD.uO(this.qV)}}const _b=t=>{let i=t.yO.AR.get(void 0);return i||(i=new wb(t),t.yO.AR.set(void 0,i),i)};class kb extends oS{constructor(t,i,s,e,r){super(t),this.sN=s,this.UG=i.length,this.gD=t.JR(dn(i,!1)),this.jG=e,r&&(this.YG={...r,gD:t.JR(r.JM,!1),UG:r.JM.length/4})}HG(t){return t>1}pC(t,i,s,e,r,n){return"object"==typeof r?i?this.kD.VO(t.attribute("aOffsetScale"),i,1,s*Float32Array.BYTES_PER_ELEMENT).tO(t.uniform(Zp),[r.width,r.height]):this.kD.sO(t.uniform("uOffsetScale"),r.scale).tO(t.uniform(Zp),[r.width,r.height]):n?i?this.kD.VO(t.attribute(`${kb.WG}Amount`),i,1,s*Float32Array.BYTES_PER_ELEMENT):this.kD.sO(t.uniform(`${kb.WG}Amount`),r):this.kD.sO(t.uniform("uPointSize"),r),n?this.kD.qR(this.gD,0,{location:t.attribute(kb.WG),size:2}).UO(this.sN,0,this.UG,e):this.kD.pC(this.kD.gl.POINTS,e),this}XG(t,i,s,e,r,n){return!(!this.YG||!r||(i?this.kD.VO(t.attribute(`${kb.WG}Amount`),i,1):this.kD.sO(t.uniform(`${kb.WG}Amount`),e),this.kD.sO(t.uniform(`${kb.ZG}Amount`),n).qR(this.YG.gD,0,{location:t.attribute(kb.WG),size:2},{location:t.attribute(kb.ZG),size:2}).UO(this.YG.sN,0,this.YG.UG,s),0))}mR(){var t;this.kD.uO(this.gD),this.kD.uO(null===(t=this.YG)||void 0===t?void 0:t.gD)}}kb.WG="aFillOffset",kb.ZG="aBorderOffset";const Cb=(t,i=0)=>{const s=[e(-.5,-.5),e(.5,-.5),e(.5,.5),e(-.5,.5)];return new kb(t,s,t.gl.TRIANGLE_FAN,i,{JM:[-.5,-.5,0,0,-.5,-.5,-1,-1,.5,-.5,0,0,.5,-.5,1,-1,.5,.5,0,0,.5,.5,1,1,-.5,.5,0,0,-.5,.5,-1,1,-.5,-.5,0,0,-.5,-.5,-1,-1],sN:t.gl.TRIANGLE_STRIP})},Tb=(t,i=0)=>{const s=.05,r=[e(-.5,-.05),e(.5,-.05),e(.5,s),e(.5,s),e(-.5,s),e(-.5,-.05),e(-.05,-.5),e(s,-.5),e(s,-.05),e(s,-.05),e(-.05,-.05),e(-.05,-.5),e(-.05,.5),e(s,.5),e(s,s),e(s,s),e(-.05,s),e(-.05,.5)];return new kb(t,r,t.gl.TRIANGLES,i,{JM:[-.05,.5,0,0,-.05,.5,-1,1,s,.5,0,0,s,.5,1,1,s,s,0,0,s,s,1,1,.5,s,0,0,.5,s,1,1,.5,-.05,0,0,.5,-.05,1,-1,s,-.05,0,0,s,-.05,1,-1,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,-.05,0,0,-.05,-.05,-1,-1,-.5,-.05,0,0,-.5,-.05,-1,-1,-.5,s,0,0,-.5,s,-1,1,-.05,s,0,0,-.05,s,-1,1,-.05,.5,0,0,-.05,.5,-1,1],sN:t.gl.TRIANGLE_STRIP})},Fb=(i,s,r)=>{if(Aa(i))return Fb(t.PointShape.Square,s,r);let n=s.yO.cR.get(i);if(i===t.PointShape.Circle||i===t.PointShape.HollowCircle){const e=r<=3?4:r<=5?8:r<=10?16:24;return i===t.PointShape.Circle?(n=s.yO.dR.get(e)||((t,i,s=0)=>{const e=2*Math.PI/i,r=[],n=[];r.push({x:0,y:0});for(let t=0;t<=i;t+=1){const i=t*e,s=Math.cos(i),h=Math.sin(i),o=.5*s,a=.5*h;r.push({x:o,y:a}),n.push(o,a,0,0,o,a,s,h)}return new kb(t,r,t.gl.TRIANGLE_FAN,s,{JM:n,sN:t.gl.TRIANGLE_STRIP})})(s,e),s.yO.dR.set(e,n),n):(n=s.yO.fR.get(e)||((t,i,s=0)=>{const e=[],r=2*Math.PI/i;for(let t=0;t<=i;t+=1){const i=t*r,s=Math.cos(i),n=Math.sin(i);e.push({x:.5*s,y:.5*n}),e.push({x:.3*s,y:.3*n})}return new kb(t,e,t.gl.TRIANGLE_STRIP,s,void 0)})(s,e),s.yO.fR.set(e,n),n)}if(!n){switch(i){case t.PointShape.Triangle:n=((t,i=0)=>{const s=[{x:-.5773502691892515,y:.3333333333333333},{x:0,y:-.6666666666666666},{x:.5773502691892515,y:.3333333333333333}];return new kb(t,s,t.gl.TRIANGLES,i,{JM:[s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y,s[1].x,s[1].y,0,0,s[1].x,s[1].y,2*s[1].x,2*s[1].y,s[2].x,s[2].y,0,0,s[2].x,s[2].y,2*s[2].x,2*s[2].y,s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y],sN:t.gl.TRIANGLE_STRIP})})(s);break;case t.PointShape.Square:n=Cb(s);break;case t.PointShape.Plus:n=Tb(s);break;case t.PointShape.Cross:n=Tb(s,45);break;case t.PointShape.Diamond:n=Cb(s,45);break;case t.PointShape.Arrow:n=((t,i=0)=>{const s=.05,r=[e(-.05,-.5),e(s,-.5),e(s,.45),e(s,.45),e(-.05,.45),e(-.05,-.5),e(-.5,0),e(-.4,0),e(0,.4),e(0,.4),e(0,.5),e(-.5,0),e(.5,0),e(.4,0),e(0,.4),e(0,.4),e(0,.5),e(.5,0)];return new kb(t,r,t.gl.TRIANGLES,i,{JM:[-.5,0,0,0,-.5,0,-2,-1,0,.5,0,0,0,.5,0,1,.5,0,0,0,.5,0,2,-1,.4,0,0,0,.4,0,0,-1,s,.355,0,0,s,.355,1,-2,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,.355,0,0,-.05,.355,-1,-2,-.4,0,0,0,-.4,0,0,-1,-.5,0,0,0,-.5,0,-2,-1],sN:t.gl.TRIANGLE_STRIP})})(s);break;case t.PointShape.Star:n=((t,i=0)=>new kb(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i,{JM:[0,.5,0,0,0,.5,0,1,.1,.1,0,0,.1,.1,1,1,.5,.1,0,0,.5,.1,2,1,.2,-.1,0,0,.2,-.1,1,-1,.3,-.5,0,0,.3,-.5,1,-2,0,-.25,0,0,0,-.25,0,-1,-.3,-.5,0,0,-.3,-.5,-1,-2,-.2,-.1,0,0,-.2,-.1,-1,-1,-.5,.1,0,0,-.5,.1,-2,1,-.1,.1,0,0,-.1,.1,-1,1,0,.5,0,0,0,.5,0,1],sN:t.gl.TRIANGLE_STRIP}))(s);break;case t.PointShape.Minus:n=((t,i=0)=>{const s=.05,r=[e(-.5,-.05),e(.5,-.05),e(.5,s),e(.5,s),e(-.5,s),e(-.5,-.05)];return new kb(t,r,t.gl.TRIANGLES,i,{JM:[-.5,-.05,0,0,-.5,-.05,-1,-1,.5,-.05,0,0,.5,-.05,1,-1,.5,s,0,0,.5,s,1,1,-.5,s,0,0,-.5,s,-1,1,-.5,-.05,0,0,-.5,-.05,-1,-1],sN:t.gl.TRIANGLE_STRIP})})(s);break;default:return Nn(0,"LightningChart JS unidentified point shape")}s.yO.cR.set(i,n)}return n};class Ib extends Fu{constructor(i,s,e,r){super(i,s,e,r,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.JG=ou.fillStyle,this.QG=u("bottom"),this.KG=ou.fillStyle,this.qG=_r,this.t$=u(t.PointShape.Circle),this.i$=u(5),this.s$=u(0),this.e$=u(void 0),this.d_=!0,this.r$={x:0,y:0}}k_(t){this.QG.C()!==t&&this.QG._(t)}gf(t){return this.JG=du(this.JG,t),this}y_(){return this.JG}n$(){return fu(this.h$,this.JG)}o$(){return fu(this.a$,this.KG)}l$(){return this.qG!==this.u$}Af(i){return this.KG=du(this.KG,i),Mr(this.KG)&&(this.pf(t.PointShape.Square),this._f(1)),this}xf(){return this.KG}Mf(t){return this.qG="function"==typeof t?t(this.qG):t,this}wf(){return this.qG}pf(t){return this.t$._(t),Aa(this.t$.C())&&this._f(1),this}mf(){return this.t$.C()}_f(t){return this.i$._(t),this}p_(){return this.i$.C()}Sf(t){return this.s$._(t),this}bf(){return this.s$.C()}MA(t){return this.r$=t,this}m_(){return this.r$}c_(t){return this.e$._(t),this}S_(){return this.e$.C()}}class Lb extends NS{constructor(t,i){super(t,i),this.EN=!1,this.RN={c$:!1,d$:0},this.zN=t instanceof He?{type:"linear",scale:t}:{type:"unknown"},this.DN.hs("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.EN=!0)}))}f$(t,i,s){const e=null==t?void 0:t.Pd(i),r=null==e?void 0:e.Ed,n=null==e?void 0:e.Rd,h=null==t?void 0:t.dd,o=null==t?void 0:t.ud,a=null==t?void 0:t.Ld(i);if(!t||this.EN||!a||"linear"!==this.zN.type||!r||!n||void 0===h||void 0===o||!s){const t=this.RN.c$;return this.RN={c$:!1,d$:null!=h?h:0},{cpStateChanged:t,cpActive:!1}}const l=Oo(a),u=t.Wd(i),c=t.Hd(i),d=u?u[l]:void 0,f=c?c[l]:void 0;if(h<2||void 0===d||void 0===f||f===d){const t=this.RN.c$;return this.RN={c$:!1,d$:null!=h?h:0},{cpStateChanged:t,cpActive:!1}}const v=this.calculateAvgStepBetweenDataPoints(f,d,h),A=this.zN.scale,g=Math.abs(A.$i()[l]),y=g/v,p=Math.floor(.8*y),m=p*v,S=p>=4,b=this.RN.c$?this.RN.v$/g<1.5:void 0,x=this.RN.c$&&p>this.RN.A$?p/this.RN.A$>=2:void 0;let M;return!0===this.RN.c$?b?x&&(M={c$:!0,v$:m,A$:p,d$:h}):M=S?{c$:!0,v$:m,A$:p,d$:h}:{c$:!1,d$:h}:S&&(M={c$:!0,v$:m,A$:p,d$:h}),this.RN=M||{...this.RN,d$:h},!!M&&this.$N(),{cpStateChanged:!!M,cpActive:this.RN.c$}}g$(t,i){var s,e,r;const n=null==t?void 0:t.Pd(i),h=n.dataPattern,o=n.Ed,a=n.Rd,l=t.fd,u=t.dd,c=t.ud,d=t.md;if(this.EN||!this.RN.c$||!o||!a||void 0===h)return;const f=Oo(h),v=zo(h),A="x"===f?o:a,g="x"===f?a:o,y=A.length,p="x"===f?this.ji.x:this.ji.y,m=this.RN.v$,S=Math.min(p.getInnerStart(),p.getInnerEnd()),b=Math.max(p.getInnerStart(),p.getInnerEnd()),x=$u(S,b,A,l,u,c,zo(h)?"progressive":"regressive",1);if(!x)return;const M=A[x.iFirstSampleDataArray];if(this.y$){if(this.y$.p$<x.iFirstSample){const t=Math.min(Math.floor((M-this.y$.q)/m),this.y$.m$);if(t>0)if(this.y$.m$-=t,this.y$.m$>0){this.y$.S$.splice(0,2*t),this.y$.b$.splice(0,2*t),this.y$.x$&&this.y$.x$.splice(0,2*t),this.y$.M$&&this.y$.M$.splice(0,2*t),this.y$.q+=t*m;const i=Uu(this.y$.q,Math.max(l-1-y+1,0),l-1,v,(t=>A[Gu(t,l,y)])),s=Gu(i,l,y);this.y$.p$=A[s]>=this.y$.q?i:i+1}else this.y$=void 0}if(void 0!==(null===(s=this.y$)||void 0===s?void 0:s.w$)&&this.y$.w$>x.iLastSample){const t=A[x.iLastSampleDataArray],i=Math.min(Math.floor((this.y$.q+this.y$.m$*m-t)/m),this.y$.m$);if(i>0)if(this.y$.m$-=i,this.y$.m$>0){for(let t=0;t<2*i;t+=1)this.y$.S$.pop(),this.y$.b$.pop(),this.y$.x$&&this.y$.x$.pop(),this.y$.M$&&this.y$.M$.pop();const t=Uu(this.y$.q+this.y$.m$*m,Math.max(l-1-y+1,0),l-1,v,(t=>A[Gu(t,l,y)])),s=Gu(t,l,y);this.y$.w$=A[s]<=this.y$.q+this.y$.m$*m?t:t-1}else this.y$=void 0}}const w=this.y$||{q:M,m$:0,S$:[],b$:[],x$:n.Od?[]:void 0,M$:n.Nd?[]:void 0,_$:n.Vd?[]:void 0,k$:n.zd?[]:void 0,p$:x.iFirstSample,w$:void 0},_=(t,i,s,e)=>{let r=Math.min(t,t+s*m),n=Math.max(t,t+s*m);const h=[];if(s<0&&r<S||s>0&&n>b)return h;let o=e,a=eh,u=eh,c=-1,f=sh,v=sh,p=-1,M=0;for(;o<=x.iLastSample&&o>=x.iFirstSample;){const e=o%y,x=A[e],_=g[e];if(d&&Number.isNaN(x))o+=i;else if(r<=x&&x<=n)M+=1,d&&Number.isNaN(_)||(_>u&&(a=x,u=_,c=o),_<v&&(f=x,v=_,p=o)),o+=i;else{if(M>0)a=a===eh?Number.NaN:a,u=u===eh?Number.NaN:u,f=f===sh?Number.NaN:f,v=v===sh?Number.NaN:v,c<p?(h.push({iFirst:c,iSecond:p}),i>0?(w.S$.push(a),w.b$.push(u),w.S$.push(f),w.b$.push(v)):(w.S$.unshift(f),w.b$.unshift(v),w.S$.unshift(a),w.b$.unshift(u))):(h.push({iFirst:p,iSecond:c}),i>0?(w.S$.push(f),w.b$.push(v),w.S$.push(a),w.b$.push(u)):(w.S$.unshift(a),w.b$.unshift(u),w.S$.unshift(f),w.b$.unshift(v)));else{const t=i>0?w.w$:w.p$;if(void 0===t)h.push({iFirst:0,iSecond:0}),i>0?(w.S$.push(Number.NaN),w.b$.push(Number.NaN),w.S$.push(Number.NaN),w.b$.push(Number.NaN)):(w.S$.unshift(Number.NaN),w.b$.unshift(Number.NaN),w.S$.unshift(Number.NaN),w.b$.unshift(Number.NaN));else{const s=Gu(t,l,y),e=A[s],o=g[s],a=jr((e+x)/2,r,n),u=jr((a+x)/2,r,n),c=o+(a-e)/(x-e)*(_-o),d=o+(u-e)/(x-e)*(_-o);h.push({iFirst:t,iSecond:t}),i>0?(w.S$.push(a),w.b$.push(c),w.S$.push(u),w.b$.push(d)):(w.S$.unshift(u),w.b$.unshift(d),w.S$.unshift(a),w.b$.unshift(c))}}if(w.m$+=1,i>0?w.w$=o-1:(w.p$=o+1,w.q=s>0?n:r),r=Math.min(t+h.length*s*m,t+(h.length+1)*s*m),n=Math.max(t+h.length*s*m,t+(h.length+1)*s*m),M=0,a=eh,u=eh,c=-1,f=sh,v=sh,p=-1,s<0&&r<S||s>0&&n>b)break}}return h},k=_(w.q+(zo(h)?1:-1)*w.m$*m,1,1*(zo(h)?1:-1),void 0!==(null===(e=this.y$)||void 0===e?void 0:e.w$)?this.y$.w$+1:x.iFirstSample),C=_(w.q,-1,-1*(zo(h)?1:-1),void 0!==(null===(r=this.y$)||void 0===r?void 0:r.p$)?this.y$.p$-1:x.iFirstSample);if(0===C.length&&0===k.length)return;const T=n.Od&&w.x$?[n.Od,w.x$]:void 0,F=n.Nd&&w.M$?[n.Nd,w.M$]:void 0,I=n.Vd&&w._$?[n.Vd,w._$]:void 0,L=n.zd&&w.k$?[n.zd,w.k$]:void 0;if(T||F||I||L){for(const t of k){const i=Gu(t.iFirst,l,y),s=Gu(t.iSecond,l,y);T&&T[1].push(T[0][i],T[0][s]),F&&F[1].push(F[0][i],F[0][s]),I&&I[1].push(I[0][i],I[0][s]),L&&L[1].push(L[0][i],L[0][s])}for(const t of C){const i=Gu(t.iFirst,l,y),s=Gu(t.iSecond,l,y);T&&T[1].unshift(T[0][s],T[0][i]),F&&F[1].unshift(F[0][s],F[0][i]),I&&I[1].unshift(I[0][s],I[0][i]),L&&L[1].unshift(L[0][s],L[0][i])}}return this.y$=w.m$>0?w:void 0,{C$:"x"===f?w.S$:w.b$,T$:"y"===f?w.S$:w.b$,PP:w.x$,F$:w.M$,Bt:w._$,ru:w.k$}}$N(){this.y$=void 0}WN(){}}class Pb extends Ib{constructor(t,i,s,e){super(t,i,s,e),this.qD=new yS,this.uG=new Lb(this.ji,this),this.oV=ba({lineStyleSolid:()=>aa(this.zc)&&this.zc,lineStyleDashed:()=>da(this.zc)&&this.zc,strokeFillSolid:()=>{const t=this.zc.getFillStyle();return co(t)&&t},strokeFillLinearGradient:()=>{const t=this.zc.getFillStyle();return ze(t)&&t},strokeFillRadialGradient:()=>{const t=this.zc.getFillStyle();return Ee(t)&&t},strokeFillIndividual:()=>{const t=this.zc.getFillStyle();return vo(t)&&t},strokeFillPaletted:()=>{const t=this.zc.getFillStyle();return yo(t)&&t},areaFillSolid:()=>co(this.JG)&&this.JG,areaFillLinearGradient:()=>ze(this.JG)&&this.JG,areaFillRadialGradient:()=>Ee(this.JG)&&this.JG,areaFillIndividual:()=>vo(this.JG)&&this.JG,areaFillPaletted:()=>yo(this.JG)&&this.JG,markerFillSolid:()=>co(this.KG)&&this.KG,markerFillLinearGradient:()=>ze(this.KG)&&this.KG,markerFillRadialGradient:()=>Ee(this.KG)&&this.KG,markerFillPaletted:()=>yo(this.KG)&&this.KG,markerFillIndividual:()=>vo(this.KG)&&this.KG,markerFillImage:()=>Mr(this.KG)&&this.KG,markerShapeIcon:()=>{const t=this.t$.C();return Aa(t)&&t},markerStrokeFillSolid:()=>{const t=this.qG.getFillStyle();return co(t)&&t}}),this.ff=u(void 0),this.I$=[],this.Qu=!1,this.L$=[],this.P$=void 0,this.zG=(t,i,s)=>{var e;const r=null===(e=this.B$)||void 0===e?void 0:e.shapeIcon;let n=t,h=i;return r&&(n=r.li().x,h=r.li().y),uS(t,i,n*this.i$.C(),h*this.i$.C(),s)},this.D$=Bb(),this.tV=i,this.cN={type:"none"},this.kD=t.iV(),this.qz=t,this.lN=this.kD.JO}vf(t,i){var s;return this.uG.$N(),this.E$=void 0,this.P$=void 0,t&&i?(this.ff._(Xn(t,this.ff.C(),(()=>({change:t=>{this.I$.push({min:t.iDataStart,max:t.iDataEnd}),this.E$&&this.L$.length>1e3&&Date.now()-this.E$.R$>5e3&&(this.E$=void 0,this.L$.length=0),this.E$&&this.L$.push({min:t.iDataStart,max:t.iDataEnd})},clear:()=>{this.Qu=!0,this.E$=void 0,this.P$=void 0,this.uG.$N()},loop:()=>{this.E$=void 0,this.L$.length=0}})))),this.v_=i,this):(null===(s=this.ff.C())||void 0===s||s.Os(),this.ff._(void 0),this.v_=void 0,this)}Vl(){var t;const i=null===(t=this.ff.C())||void 0===t?void 0:t.zs,s=null==i?void 0:i.Ld(this.v_);return s&&{M_:Oo(s),w_:()=>this.Ey()}}Ey(){var t,i,s,r,n,h,o,a,l,u,c,d,f,v,A,g,y,p,m,S,b,x,M,w,_,k,C,T,F,I,L,P,B;const D=null===(t=this.ff.C())||void 0===t?void 0:t.zs,E=this.ff.o,R=this.v_,O=null==D?void 0:D.Pd(R),z=null==O?void 0:O.Ed,V=null==O?void 0:O.Rd;if(!(D&&z&&V&&R))return;const N=O.dataPattern,G=N&&this.ji[Oo(N)],$=O.Nd,U=O.Od,j=O.Vd,Y=O.zd,H=D.fd,W=D.dd,X=D.ud,Z=E||this.Xl()||this.n$()||this.o$()||this.l$()||this.QG.o,J=this.oV.lineStyleSolid(Z),Q=this.oV.lineStyleDashed(Z),K=J||Q,q=K&&K.getThickness(),tt=this.oV.strokeFillSolid(Z),it=this.oV.strokeFillLinearGradient(Z),st=this.oV.strokeFillRadialGradient(Z),et=this.oV.strokeFillIndividual(Z),rt=this.oV.strokeFillPaletted(Z),nt=tt||it||st||et||rt,ht=this.oV.areaFillSolid(Z),ot=this.oV.areaFillLinearGradient(Z),at=this.oV.areaFillRadialGradient(Z),lt=this.oV.areaFillIndividual(Z),ut=this.oV.areaFillPaletted(Z),ct=ht||ot||at||lt||ut,dt=this.oV.markerFillSolid(Z),ft=this.oV.markerFillLinearGradient(Z),vt=this.oV.markerFillRadialGradient(Z),At=this.oV.markerFillPaletted(Z),gt=this.oV.markerFillIndividual(Z),yt=this.oV.markerFillImage(Z),pt=dt||ft||vt||At||gt||yt,mt=this.oV.markerStrokeFillSolid(Z),St=this.t$.C(),bt=this.t$.o,xt=this.oV.markerShapeIcon(bt),Mt=this.i$.C(),wt=this.i$.o,_t=this.e$.o,kt=this.I$.length>0||_t,Ct=this.Qu||E,Tt=Ct?[D.jd()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.I$),Ft=!!Q,It=this.Hi.C(),Lt=this.Hi.o;E&&Object.entries(R).forEach((([t,i])=>{if(D.Md&&!D.Md[i])throw new Error(`LightningChart JS data supply error - key ${i} does not exist in data set. Mapped to '${t}'`)})),(E||Z)&&((rt&&"value"===rt.lookUpProperty||ut&&"value"===ut.lookUpProperty||At&&"value"===At.lookUpProperty)&&void 0===R.lookupValue&&Or.console.warn('LightningChart JS warning - using PalettedFill with lookUpProperty=value, but there is no data mapping for "lookupValue"'),(et||lt||gt)&&void 0===R.color&&Or.console.warn('LightningChart JS warning - using IndividualPointFill, but there is no data mapping for "color"'));const Pt=this.d_&&(!!K||!!ct),{cpStateChanged:Bt,cpActive:Dt}=this.uG.f$(D,R,Pt);if(N&&Dt&&G&&(Bt||Ct||kt||G.Ht||Z)){const t=this.uG.g$(D,R);if(t){const e=!(Bt||Ct||Z||E);this.O$=Db(this.kD,[t.C$,t.T$],t.PP,t.F$,t.Bt,t.ru,Ft,this.O$,e,N,1e3,this.ji.xi(),(t=>cn(t,this.ji.xi())),D.md),this.z$={min:sh,max:eh};const u="x"===Oo(N)?t.T$:t.C$,c=u.length;for(let t=0;t<c;t+=1){const i=u[t];D.md&&Number.isNaN(i)||(this.z$.min=Math.min(this.z$.min,i),this.z$.max=Math.max(this.z$.max,i))}(null===(i=this.V$)||void 0===i?void 0:i.bufferX)!==this.O$.bufferX&&(this.kD.uO(null===(s=this.V$)||void 0===s?void 0:s.bufferX),this.kD.uO(null===(r=this.V$)||void 0===r?void 0:r.bufferY),this.kD.uO(null===(n=this.V$)||void 0===n?void 0:n.bufferColors),this.kD.uO(null===(h=this.V$)||void 0===h?void 0:h.bufferLengthSoFar),this.kD.uO(null===(o=this.V$)||void 0===o?void 0:o.bufferRotations),this.kD.uO(null===(a=this.V$)||void 0===a?void 0:a.bufferLookupValues),this.kD.uO(null===(l=this.V$)||void 0===l?void 0:l.bufferSizes)),this.V$=void 0}}if(N&&G&&!Dt){if(Bt||Ct||kt||G.Ht||_t||Z){const t=Math.min(G.getInnerStart(),G.getInnerEnd()),i=Math.max(G.getInnerStart(),G.getInnerEnd()),s="x"===Oo(N)?z:V,r="x"===Oo(N)?V:z,n=$u(t,i,s,H,W,X,zo(N)?"progressive":"regressive",1);if(!this.N$||(null==n?void 0:n.iFirstSample)!==this.N$.iFirstSample||n.iLastSample!==this.N$.iLastSample||Ct){const t=this.D$(O,this.N$,n,Ct||Bt,s,r,D.md);this.z$=t.visibleBoundaries,this.G$=t.avgPointGap}if(this.N$=n,void 0===n)this.kD.uO(null===(u=this.O$)||void 0===u?void 0:u.bufferX),this.kD.uO(null===(c=this.O$)||void 0===c?void 0:c.bufferY),this.kD.uO(null===(d=this.O$)||void 0===d?void 0:d.bufferColors),this.kD.uO(null===(f=this.O$)||void 0===f?void 0:f.bufferLengthSoFar),this.kD.uO(null===(v=this.O$)||void 0===v?void 0:v.bufferRotations),this.kD.uO(null===(A=this.O$)||void 0===A?void 0:A.bufferLookupValues),this.kD.uO(null===(g=this.O$)||void 0===g?void 0:g.bufferSizes),this.O$=void 0,this.kD.uO(null===(y=this.V$)||void 0===y?void 0:y.bufferX),this.kD.uO(null===(p=this.V$)||void 0===p?void 0:p.bufferY),this.kD.uO(null===(m=this.V$)||void 0===m?void 0:m.bufferColors),this.kD.uO(null===(S=this.V$)||void 0===S?void 0:S.bufferLengthSoFar),this.kD.uO(null===(b=this.V$)||void 0===b?void 0:b.bufferRotations),this.kD.uO(null===(x=this.V$)||void 0===x?void 0:x.bufferLookupValues),this.kD.uO(null===(M=this.V$)||void 0===M?void 0:M.bufferSizes),this.V$=void 0,this.$$=n;else if(Bt||Ct||!this.$$||n.iFirstSample<this.$$.iFirstSample||n.iLastSample>this.$$.iLastSample||Z){const t=zu({srcLoopArray:z,dataRanges:n.dataRanges,NewArray:O.Bd}),i=zu({srcLoopArray:V,dataRanges:n.dataRanges,NewArray:O.Dd}),s=U?zu({srcLoopArray:U,dataRanges:n.dataRanges,NewArray:Uint32Array}):void 0,r=$?zu({srcLoopArray:$,dataRanges:n.dataRanges,NewArray:Float32Array}):void 0,h=j?zu({srcLoopArray:j,dataRanges:n.dataRanges,NewArray:Float32Array}):void 0,o=Y?zu({srcLoopArray:Y,dataRanges:n.dataRanges,NewArray:Float32Array}):void 0,a=!(Bt||Ct||Z||E),l=Pt||this.hs("ApplicationType",(t=>"InternalUI"===t.type))?1e3:Math.min(null!==(w=D.getMaxSampleCount())&&void 0!==w?w:1e6,1e6);this.V$=Db(this.kD,[t,i],s,r,h,o,Ft,this.V$,a,N,l,this.ji.xi(),(t=>cn(t,this.ji.xi())),D.md);let u=t,c=i,d=s,f=r;const v=this.e$.C();if(v){const n="spline"===v.type?((t,i,s)=>{const r=Oo(s),n="x"===r?t.xValues:t.yValues,h="x"===r?t.yValues:t.xValues,{lookupValues:o,colors:a}=t;if(n.length<=2)return{xValues:Array.from(t.xValues),yValues:Array.from(t.yValues),lookupValues:o?Array.from(o):void 0,colors:a?Array.from(a):void 0};const l=((t,i)=>{const s=1e-5,r=t.length-1,n=Array(r);if(r>1){let h=e(0,0),o=e(0,0),a=e(0,0),l=Ch(Ph({x:t.elementAt(1),y:i.elementAt(1)},{x:t.elementAt(0),y:i.elementAt(0)}));const u=3;let c=0,d=0;for(let f=0;f<r;f+=1){const v=t.elementAt(f),A=t.elementAt(f+1),g=i.elementAt(f),y=i.elementAt(f+1),p=Array(4);p[0]={x:v,y:g},p[1]={x:v,y:g},p[3]={x:A,y:y},p[2]={x:A,y:y},a=l,h=o,Number.isNaN(h.y)&&(h=e(0,0));const m=f+2<i.length?i.elementAt(f+2):Number.NaN;if(f+1<r&&!Number.isNaN(m)){const i=t.elementAt(f+2);l=i===A&&m===y?e(0,0):Ch(Ph({x:i,y:m},{x:A,y:y})),o=Ch(Lh(a,l))}else o=e(0,0);if(y===g)c=0,d=0;else{const t=A-v;c=Math.abs(h.x)>s?Math.abs(t/(u*h.x)):1,d=Math.abs(o.x)>s?Math.abs(t/(u*o.x)):1}p[1]=Lh(Ih(h,c),p[1]),p[2]=Ph(p[2],Ih(o,d)),n[f]=p}}return n.length>0?n:[]})(n,h),u=l.length,c=[],d=[],f=[],v=[];for(let t=0;t<u;t+=1){const s=l[t];for(let t=0;t<i;t+=1){const e=t/(i-1),r=e*e,n=r*e,h=1-e,o=h*h,a=o*h;c.push(a*s[0].x+3*e*o*s[1].x+3*r*h*s[2].x+n*s[3].x),d.push(a*s[0].y+3*e*o*s[1].y+3*r*h*s[2].y+n*s[3].y)}}if(o)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=o.elementAt(s);v[t]=e}if(a)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=a.elementAt(s);f[t]=e}return{xValues:"x"===r?c:d,yValues:"x"===r?d:c,lookupValues:o?v:void 0,colors:a?f:void 0}})({xValues:t,yValues:i,lookupValues:r,colors:s},v.resolution||20,N):"step"===v.type?((t,i,s)=>{const{lookupValues:e,colors:r}=t,n=Oo(s),h="x"===n?t.xValues:t.yValues,o="x"===n?t.yValues:t.xValues,a=[],l=[],u=[],c=[],d=h.length,f="before"===i?0:"after"===i?1:.5;if(d>0){let t=0,i=h.elementAt(0),s=o.elementAt(0);a[t]=i,l[t]=s,t+=1;for(let e=1;e<d;e+=1){const r=h.elementAt(e),n=o.elementAt(e);if(f<=0)a[t]=i,l[t]=n,t+=1;else{const e=i*(1-f)+r*f;a[t]=e,l[t]=s,t+=1,a[t]=e,l[t]=n,t+=1}a[t]=r,l[t]=n,t+=1,i=r,s=n}}if(e)if("before"===i){c[0]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[2*t-1]=i,c[2*t]=i}}else if("middle"===i||"after"===i){c[0]=e.elementAt(0),c[1]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[3*t-1]=i,c[3*t]=i,c[3*t+1]=i}}if(r)if("before"===i){u[0]=r.elementAt(0);for(let t=1;t<d;t+=1){const i=r.elementAt(t);u[2*t-1]=i,u[2*t]=i}}else if("middle"===i||"after"===i){u[0]=r.elementAt(0),u[1]=r.elementAt(0);for(let t=1;t<d;t+=1){const i=r.elementAt(t);u[3*t-1]=i,u[3*t]=i,u[3*t+1]=i}}return{xValues:"x"===n?a:l,yValues:"x"===n?l:a,lookupValues:e?c:void 0,colors:r?u:void 0}})({xValues:t,yValues:i,lookupValues:r,colors:s},null!==(_=v.step)&&void 0!==_?_:"middle",N):void 0;u=n?n.xValues:u,c=n?n.yValues:c,d=(null==n?void 0:n.colors)?n.colors:d,f=(null==n?void 0:n.lookupValues)?n.lookupValues:f}this.O$=u===t&&c===i?this.V$:Db(this.kD,[u,c],d,f,void 0,void 0,Ft,(null===(k=this.O$)||void 0===k?void 0:k.bufferX)===this.V$.bufferX?void 0:this.O$,!(!a||_t||v),N,1e3,this.ji.xi(),(t=>cn(t,this.ji.xi())),D.md),this.$$=n}}}else this.N$=void 0;if(!N&&(Ct||kt||Z)){if(!this.O$||this.O$.bufferSize<D.dd||Ft){const t=void 0!==D.Cd?D.Cd:D.dd;let i,s=0,e=0;if(Ft){const r=Eb(z,V,z[0],V[0],0,0,D.md);i=this.kD.FO(2*t,r[0],null===(C=this.O$)||void 0===C?void 0:C.bufferLengthSoFar,Float32Array),s=r[1],e=r[2]}this.O$={bufferX:this.kD.FO(t*(this.ji.xi()?2:1),cn(z,this.ji.xi()),null===(T=this.O$)||void 0===T?void 0:T.bufferX),bufferY:this.kD.FO(t*(this.ji.xi()?2:1),cn(V,this.ji.xi()),null===(F=this.O$)||void 0===F?void 0:F.bufferY),bufferColors:U?this.kD.FO(t,U,null===(I=this.O$)||void 0===I?void 0:I.bufferColors,Uint32Array):void 0,bufferLookupValues:$?this.kD.FO(t,$,null===(L=this.O$)||void 0===L?void 0:L.bufferLookupValues,Float32Array):void 0,bufferSizes:j?this.kD.FO(t,j,null===(P=this.O$)||void 0===P?void 0:P.bufferSizes,Float32Array):void 0,bufferRotations:Y?this.kD.FO(t,Y,null===(B=this.O$)||void 0===B?void 0:B.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:D.dd}}else{const t=this.O$.bufferX,i=this.O$.bufferY;Tt.forEach((s=>{var e,r,n,h;const o=z.subarray(s.min,s.max+1),a=V.subarray(s.min,s.max+1);if(this.kD.IO(t,s.min*(this.ji.xi()?2:1),cn(o,this.ji.xi())),this.kD.IO(i,s.min*(this.ji.xi()?2:1),cn(a,this.ji.xi())),U&&(null===(e=this.O$)||void 0===e?void 0:e.bufferColors)){const t=U.subarray(s.min,s.max+1);this.kD.IO(this.O$.bufferColors,s.min,t,Uint32Array)}if($&&(null===(r=this.O$)||void 0===r?void 0:r.bufferLookupValues)){const t=$.subarray(s.min,s.max+1);this.kD.IO(this.O$.bufferLookupValues,s.min,t,Float32Array)}if(Y&&(null===(n=this.O$)||void 0===n?void 0:n.bufferRotations)){const t=Y.subarray(s.min,s.max+1);this.kD.IO(this.O$.bufferRotations,s.min,t,Float32Array)}if(j&&(null===(h=this.O$)||void 0===h?void 0:h.bufferSizes)){const t=j.subarray(s.min,s.max+1);this.kD.IO(this.O$.bufferSizes,s.min,t,Float32Array)}})),this.O$.valueCount=D.dd}this.V$=this.O$}if(Z||wt||bt||Lt){if(nt&&K&&!1!==q){const t=-1===q?"primitive":"triangulated",i=rt?["lookup",rt.lookUpProperty,rt.lut]:et?"attribute":it?["gradient",it]:st?["gradient",st]:"uniform";this.cN="primitive"===t?{type:t,shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0}),Q&&_m.StippleTexture),lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:rt,mousePickingShader:It&&this.kD.KE(_m["2D"],_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0}),Q&&_m.StippleTexture,_m.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.kD.KE(_m["2D"],_m.Color({dataType:i}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0}),this.lN?_m.AliasedEdge:void 0,Q&&_m.StippleTextureInstanced),geometry:DS(this.kD,q),thickness:q,lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:rt,mousePickingShader:It&&this.kD.KE(_m["2D"],_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0}),Q&&_m.StippleTextureInstanced,_m.MousePicking())}:{type:"none"}}else this.cN={type:"none"};if(this.U$=ct?{shader:this.kD.KE(_m["2D"],ut&&_m.Color({dataType:["lookup",ut.lookUpProperty,ut.lut]}),lt&&_m.Color({dataType:"attribute"}),ht&&_m.Color({dataType:"uniform"}),ot&&_m.Color({dataType:["gradient",ot]}),at&&_m.Color({dataType:["gradient",at]}),_m.Area2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0,fill:this.QG.C()})),geometry:_b(this.kD),fillStyleSolid:ht,fillStyleLinearGradient:ot,fillStyleRadialGradient:at,fillStyleIndividual:lt,fillStylePaletted:ut,mousePickingShader:It&&this.kD.KE(_m["2D"],_m.Area2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0,fill:this.QG.C()}),_m.MousePicking())}:void 0,pt){const t=!(!yt&&!xt),i=Mt>1||t,s=j?"attribute":"uniform",e=!i&&_m.PointSize("uniform"),r=_m.VertexLocation({offsets:[i&&!t?{directionVar:kb.WG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:Y?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:kb.WG,dataType:s,sizeUnit:"scale",rotation:{dataType:Y?"attribute-deg":"uniform"},useAlignment:!0}:void 0],axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0});this.B$={shader:this.kD.KE(_m["2D"],e,r,dt&&_m.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!xt}),ft&&_m.Color({dataType:["gradient",ft],overrideOpacity:!0,maskTexture:!!xt}),vt&&_m.Color({dataType:["gradient",vt],overrideOpacity:!0,maskTexture:!!xt}),At&&_m.Color({dataType:["lookup",At.getLookUpProperty(),At.getPalette()],overrideOpacity:!0,maskTexture:!!xt}),gt&&_m.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!xt}),yt&&_m.Color({dataType:["image",yt],overrideOpacity:!0,maskTexture:!!xt})),geometry:Fb(St,this.kD,"uniform"===s?Mt:25),fillStyleSolid:dt,fillStyleLinearGradient:ft,fillStyleRadialGradient:vt,fillStylePaletted:At,fillStyleIndividual:gt,fillStyleImage:yt,mousePickingShader:It&&this.kD.KE(_m["2D"],e,r,_m.MousePicking({useVertexId:!i})),shapeIcon:xt,pointSizeAsScale:t,instancedRendering:i,borders:mt&&!t&&{shader:this.kD.KE(_m["2D"],e,_m.VertexLocation({offsets:[i&&!t?{directionVar:kb.WG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:Y?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:kb.WG,dataType:s,sizeUnit:"scale",rotation:{dataType:Y?"attribute-deg":"uniform"},useAlignment:!0}:void 0,{directionVar:kb.ZG,dataType:"uniform",sizeUnit:"px",symmetric:!0,rotation:{dataType:Y?"attribute-deg":"uniform"}}],axisWorldTranslation:ma(this.ji),normalSource:void 0,splitPosAttribute:!0}),_m.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!xt})),fillStyleSolid:mt}}}else this.B$=void 0}if((void 0===this.P$||kt)&&$&&(Ma(rt)||Ma(ut)||Ma(At))){const t=this.P$?Tt:[D.jd()];let i=this.P$?this.P$.max:eh,s=this.P$?this.P$.min:sh;const e=$;t.forEach((t=>{for(let r=t.min;r<=t.max;r+=1){const t=e[r];s=t<s?t:s,i=t>i?t:i}})),this.P$={min:s,max:i}}this.OG=this.kD.Tz(this,this.OG,yt,xt,wt,this.zG),this.fN=Q?this.kD.Mz(Q.getPattern()):void 0,this.$c(this.zc),this.h$=this.JG,this.a$=this.KG,this.u$=this.qG,this.t$.o=!1,this.i$.o=!1,this.I$.length=0,this.Qu=!1,this.e$.o=!1,this.ff.o=!1,this.Hi.o=!1,this.QG.o=!1}Sh(){this.Ey();const t=this.oV.strokeFillLinearGradient(!1),i=this.oV.strokeFillRadialGradient(!1),s=this.oV.areaFillLinearGradient(!1),e=this.oV.areaFillRadialGradient(!1),r=this.oV.markerFillLinearGradient(!1),n=this.oV.markerFillRadialGradient(!1);if(this.qD.hO(this.ji),s||e){let t;const i=this.QG.C();t=cu("bottom"===i||"top"===i?{min:{x:this.Ls(!1),y:Math.min(this.ji.y.getInnerStart(),this.ji.y.getInnerEnd(),this.Bs(!1),this.Ds(!1))},max:{x:this.Ps(!1),y:Math.max(this.ji.y.getInnerStart(),this.ji.y.getInnerEnd(),this.Bs(!1),this.Ds(!1))}}:{min:{x:Math.min(this.ji.x.getInnerStart(),this.ji.x.getInnerEnd(),this.Ls(!1),this.Ps(!1)),y:this.Bs(!1)},max:{x:Math.max(this.ji.x.getInnerStart(),this.ji.x.getInnerEnd(),this.Ls(!1),this.Ps(!1)),y:this.Ds(!1)}},{x:this.$u()/2,y:this.Uu()/2},this.ji),this.j$=this.kD.Bz(s,this,t),this.Y$=this.kD.Dz(e,this,t)}if(t||i||r||n){const s=cu({min:{x:this.Ls(!1),y:this.Bs(!1)},max:{x:this.Ps(!1),y:this.Ds(!1)}},{x:this.$u()/2,y:this.Uu()/2},this.ji);this.H$=this.kD.Bz(t,this,s),this.W$=this.kD.Dz(i,this,s),this.X$=this.kD.Bz(r,this,s),this.Z$=this.kD.Dz(n,this,s)}return this}ed(t,i){var s,e,r,n,h,o,a,l,u,c,d,f,v,A,g,y,p,m,S;const b=this.kD.gl,x=null===(s=this.O$)||void 0===s?void 0:s.bufferX,M=null===(e=this.O$)||void 0===e?void 0:e.bufferY,w=null===(r=this.O$)||void 0===r?void 0:r.bufferColors,_=null===(n=this.O$)||void 0===n?void 0:n.bufferLookupValues,k=null===(h=this.O$)||void 0===h?void 0:h.valueCount,C=null===(o=this.V$)||void 0===o?void 0:o.valueCount,T=null===(a=this.ff.C())||void 0===a?void 0:a.zs,F=null==T?void 0:T.Ld(this.v_),I=Math.max((null===(l=this.O$)||void 0===l?void 0:l.valueCount)||0,(null===(u=this.V$)||void 0===u?void 0:u.valueCount)||0);if(!x||!M||!T)return{};const L=(i,s,e)=>{if(OS(this.kD,i,this.ji.xi(),x,"aLocation","X",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),OS(this.kD,i,this.ji.xi(),M,"aLocation","Y",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),s&&1!==t){if(!w)return!1;OS(this.kD,i,!1,w,"aColor","",4,!0,b.UNSIGNED_BYTE,1,void 0)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!_)return!1;OS(this.kD,i,!1,_,"aLookupValue","",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}return!0},P=1===t?null===(c=this.U$)||void 0===c?void 0:c.mousePickingShader:null===(d=this.U$)||void 0===d?void 0:d.shader;if(this.U$&&P&&void 0!==k&&k>0&&F&&2!==t){const s=this.U$;this.kD.Pd(P).KR(P,((e,r,n,h)=>!!this.kD.Iz(n,t,this,{uniforms:this.qD,idFirst:i,useInstanceID:1===t?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStylePaletted:s.fillStylePaletted,linearGradientInfo:this.j$,radialGradientInfo:this.Y$,lookupValueRange:s.fillStylePaletted?xa(s.fillStylePaletted,this,this.P$):void 0,lookupValueBuffer:null})&&!!L(n,s.fillStyleIndividual,s.fillStylePaletted)&&(null==s||s.geometry.Pd(n).pC(k-1),!0)))}const B="none"===this.cN.type?void 0:1===t?this.cN.mousePickingShader:this.cN.shader;if("none"!==this.cN.type&&B&&void 0!==k&&k>0){const s=this.cN;this.kD.Pd(B).KR(B,((e,r,n,h)=>{var o,a;if(!this.O$)return!1;if(!this.kD.Iz(n,t,this,{uniforms:this.qD,idFirst:i,useInstanceID:1===t&&"triangulated"===s.type?I:void 0,useVertexID:1===t&&"primitive"===s.type?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStylePaletted:s.fillStylePaletted,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStyleIndividual:s.fillStyleIndividual,linearGradientInfo:this.H$,radialGradientInfo:this.W$,lookupValueRange:s.fillStylePaletted?xa(s.fillStylePaletted,this,this.P$):void 0,lookupValueBuffer:"primitive"===s.type?_:null,colorBuffer:"primitive"===s.type?w:null,coordsX:"primitive"===s.type?x:void 0,coordsY:"primitive"===s.type?M:void 0,coordsHighPrecision:this.ji.xi()}))return!1;if(s.lineStyleDashed){if(!this.fN)return!1;this.kD.tO(e("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(h("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(e("uStippleScale"),s.lineStyleDashed.getPatternScale()).iO(e("uStippleTexture"),this.fN.wz,1)}if("primitive"===s.type){if(s.lineStyleDashed){if(!(null===(o=this.O$)||void 0===o?void 0:o.bufferLengthSoFar))return!1;this.kD.lO(r("aLengthSoFar"),this.O$.bufferLengthSoFar)}RS.oN(this.qz,k)}else{if(!L(n,s.fillStyleIndividual,s.fillStylePaletted))return!1;if(s.lineStyleDashed){if(!(null===(a=this.O$)||void 0===a?void 0:a.bufferLengthSoFar))return!1;OS(this.kD,n,!1,this.O$.bufferLengthSoFar,"aLengthSoFar","",2,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}ES.ed(this.qz,s.geometry,n,this.lN&&1!==t,1===t,s.thickness,this.O$.valueCount-1)}return!0}))}const D=null===(f=this.V$)||void 0===f?void 0:f.bufferX,E=null===(v=this.V$)||void 0===v?void 0:v.bufferY,R=null===(A=this.V$)||void 0===A?void 0:A.bufferColors,O=null===(g=this.V$)||void 0===g?void 0:g.bufferLookupValues,z=null===(y=this.V$)||void 0===y?void 0:y.bufferSizes,V=null===(p=this.V$)||void 0===p?void 0:p.bufferRotations,N=1===t?null===(m=this.B$)||void 0===m?void 0:m.mousePickingShader:null===(S=this.B$)||void 0===S?void 0:S.shader,G=this.B$;let $=1;if(F&&(P||B)&&void 0!==this.G$&&!Number.isNaN(this.G$)){const t="x"===Oo(F)?this.ji.x:this.ji.y,i=this.G$,s=t.getInnerInterval()/i,e=this.i$.C(),r=t.oi()/e/1,n=2*r;$=s<=r?1:Math.max(1-(s-r)/(n-r),0)}if(N&&G&&D&&E&&$>0&&void 0!==C&&C>0){const s=G,e=s.instancedRendering?1:0;if(G.borders&&0===t){const r=G.borders;this.kD.Pd(r.shader).KR(r.shader,((n,h,o,a)=>{if(!this.kD.Iz(o,t,this,{uniforms:this.qD,idFirst:i,fillStyleSolid:r.fillStyleSolid}))return!1;if(this.ji.xi()?this.kD.qR(D,e,{location:h("aPos_highpartX"),size:1},{location:h("aPos_lowpartX"),size:1}).qR(E,e,{location:h("aPos_highpartY"),size:1},{location:h("aPos_lowpartY"),size:1}):this.kD.VO(h("aPosX"),D,e).VO(h("aPosY"),E,e),this.kD.sO(n("uOpacity"),$),s.instancedRendering)if(V)this.kD.VO(h("aRotDeg"),V,e).sO(n("uBaseRotDeg"),s.geometry.jG);else{const t=zh(this.s$.C()+s.geometry.jG),i=Math.sin(t),e=Math.cos(t);this.kD.tO(n("uRot"),[i,e])}return this.kD.tO(a("uOffsetAlignment"),[-this.r$.x/2,-this.r$.y/2]),s.geometry.XG(o,z,C,this.i$.C(),s.instancedRendering,this.qG.getThickness())}))}this.kD.Pd(N).KR(N,((r,n,h,o)=>{if(!this.V$)return!1;if(!this.kD.Iz(h,t,this,{uniforms:this.qD,idFirst:i,useInstanceID:s.instancedRendering&&1===t?I:void 0,useVertexID:s.instancedRendering||1!==t?void 0:I,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,linearGradientInfo:this.X$,radialGradientInfo:this.Z$,fillStylePaletted:s.fillStylePaletted,fillStyleIndividual:s.fillStyleIndividual,lookupValueRange:s.fillStylePaletted?xa(s.fillStylePaletted,this,this.P$):void 0,lookupValueBuffer:O,lookupValueAttribDivisor:e,colorBuffer:R,colorAttribDivisor:e,fillStyleImage:s.fillStyleImage,texturedFillGLInfo:this.OG,texCoordAttribDivisor:0,maskTexture:s.shapeIcon&&this.OG,maskTextureCoordsAttribDivisor:0}))return!1;if(this.ji.xi()?this.kD.qR(D,e,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).qR(E,e,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.kD.VO(n("aPosX"),D,e).VO(n("aPosY"),E,e),1!==t&&this.kD.sO(r("uOpacity"),$),s.instancedRendering)if(V)this.kD.VO(n("aRotDeg"),V,e).sO(r("uBaseRotDeg"),s.geometry.jG);else{const t=zh(this.s$.C()+s.geometry.jG),i=Math.sin(t),e=Math.cos(t);this.kD.tO(r("uRot"),[i,e])}return this.kD.tO(o("uOffsetAlignment"),[-this.r$.x/2,-this.r$.y/2]),s.geometry.pC(h,z,0,this.V$.valueCount,s.pointSizeAsScale&&this.OG?{scale:this.i$.C(),width:s.shapeIcon?s.shapeIcon.li().x:this.OG.texture.bR,height:s.shapeIcon?s.shapeIcon.li().y:this.OG.texture.xR}:this.i$.C(),s.instancedRendering),!0}))}return{idCount:I}}ls(){return this.P$}nd(t,i,s,e,r){var n;const h=null===(n=this.ff.C())||void 0===n?void 0:n.zs;if(null==h?void 0:h.Ld(this.v_))return{};const o=t-i;return{info:{dataPoint:null==h?void 0:h.Zd(this.v_,o)}}}dispose(){var t,i,s,e,r,n,h,o,a,l,u,c,d;return super.dispose(),this.kD.uO(null===(t=this.O$)||void 0===t?void 0:t.bufferX),this.kD.uO(null===(i=this.O$)||void 0===i?void 0:i.bufferY),this.kD.uO(null===(s=this.O$)||void 0===s?void 0:s.bufferColors),this.kD.uO(null===(e=this.O$)||void 0===e?void 0:e.bufferLookupValues),this.kD.uO(null===(r=this.O$)||void 0===r?void 0:r.bufferRotations),this.kD.uO(null===(n=this.O$)||void 0===n?void 0:n.bufferSizes),this.kD.uO(null===(h=this.V$)||void 0===h?void 0:h.bufferX),this.kD.uO(null===(o=this.V$)||void 0===o?void 0:o.bufferY),this.kD.uO(null===(a=this.V$)||void 0===a?void 0:a.bufferColors),this.kD.uO(null===(l=this.V$)||void 0===l?void 0:l.bufferLookupValues),this.kD.uO(null===(u=this.V$)||void 0===u?void 0:u.bufferRotations),this.kD.uO(null===(c=this.V$)||void 0===c?void 0:c.bufferSizes),this.cN={type:"none"},this.U$=void 0,this.B$=void 0,this.uG.$N(),null===(d=this.ff.C())||void 0===d||d.Os(),this.O$=void 0,this.V$=void 0,this.H$=void 0,this.W$=void 0,this.j$=void 0,this.Y$=void 0,this.X$=void 0,this.Z$=void 0,this.kD.Fz(this,this.OG),this}rd(){return this.dispose(),this}J$(t){if(!this.v_)return this.E$||rh;if(!this.E$){const i=t.$d(this.v_);if(0===i.xValues.length)return rh;this.E$={min:{x:sh,y:sh},max:{x:eh,y:eh},R$:Date.now()};const s=i.xValues.length;for(let t=0;t<s;t+=1){const s=i.xValues[t],e=i.yValues[t];this.E$.min.x=s<this.E$.min.x?s:this.E$.min.x,this.E$.min.y=e<this.E$.min.y?e:this.E$.min.y,this.E$.max.x=s>this.E$.max.x?s:this.E$.max.x,this.E$.max.y=e>this.E$.max.y?e:this.E$.max.y}return this.L$.length=0,this.E$}const i=t.Pd(this.v_),s=i.Ed,e=i.Rd;if(this.L$.length>0&&s&&e){for(const t of this.L$){for(let i=t.min;i<=t.max;i+=1){const t=s[i],r=e[i];this.E$.min.x=t<this.E$.min.x?t:this.E$.min.x,this.E$.min.y=r<this.E$.min.y?r:this.E$.min.y,this.E$.max.x=t>this.E$.max.x?t:this.E$.max.x,this.E$.max.y=r>this.E$.max.y?r:this.E$.max.y}this.L$.length=0}return this.E$}return this.E$}Ps(t=!0){var i,s,e,r,n;const h=null===(i=this.ff.C())||void 0===i?void 0:i.zs;if(!h)return 0;const o=h.Ld(this.v_);return"ProgressiveX"===o?(null===(s=h.Wd(this.v_))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=h.Hd(this.v_))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(r=this.z$)||void 0===r?void 0:r.max)||0:"RegressiveY"===o&&t?(null===(n=this.z$)||void 0===n?void 0:n.max)||0:this.J$(h).max.x}Ls(t=!0){var i,s,e,r,n;const h=null===(i=this.ff.C())||void 0===i?void 0:i.zs;if(!h)return 0;const o=h.Ld(this.v_);return"ProgressiveX"===o?(null===(s=h.Hd(this.v_))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=h.Wd(this.v_))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(r=this.z$)||void 0===r?void 0:r.min)||0:"RegressiveY"===o&&t?(null===(n=this.z$)||void 0===n?void 0:n.min)||0:this.J$(h).min.x}Ds(t=!0){var i,s,e,r,n;const h=null===(i=this.ff.C())||void 0===i?void 0:i.zs;if(!h)return 0;const o=h.Ld(this.v_);return"ProgressiveX"===o&&t?Hr(null===(s=this.z$)||void 0===s?void 0:s.max,0):"RegressiveX"===o&&t?Hr(null===(e=this.z$)||void 0===e?void 0:e.max,0):"ProgressiveY"===o?Hr(null===(r=h.Wd(this.v_))||void 0===r?void 0:r.y,0):"RegressiveY"===o?Hr(null===(n=h.Hd(this.v_))||void 0===n?void 0:n.y,0):this.J$(h).max.y}Bs(t=!0){var i,s,e,r,n;const h=null===(i=this.ff.C())||void 0===i?void 0:i.zs;if(!h)return 0;const o=h.Ld(this.v_);return"ProgressiveX"===o&&t?Hr(null===(s=this.z$)||void 0===s?void 0:s.min,0):"RegressiveX"===o&&t?Hr(null===(e=this.z$)||void 0===e?void 0:e.min,0):"ProgressiveY"===o?Hr(null===(r=h.Hd(this.v_))||void 0===r?void 0:r.y,0):"RegressiveY"===o?Hr(null===(n=h.Wd(this.v_))||void 0===n?void 0:n.y,0):this.J$(h).min.y}$u(){var t,i;let s=this.i$.C();this.OG&&(s=Math.max(this.OG.texture.bR,this.OG.texture.xR)*this.i$.C());const e=Boolean(null===(t=this.v_)||void 0===t?void 0:t.size),r=Math.max($n(this.zc),e?25:s),n=null===(i=this.ff.C())||void 0===i?void 0:i.zs.Ld(this.v_);return!n||"ProgressiveX"!==n&&"RegressiveX"!==n?r:0}Uu(){var t,i;let s=this.i$.C();this.OG&&(s=Math.max(this.OG.texture.bR,this.OG.texture.xR)*this.i$.C());const e=Boolean(null===(t=this.v_)||void 0===t?void 0:t.size),r=Math.max($n(this.zc),e?25:s),n=null===(i=this.ff.C())||void 0===i?void 0:i.zs.Ld(this.v_);return!n||"ProgressiveY"!==n&&"RegressiveY"!==n?r:0}}const Bb=()=>{const t=1e3,i=(t,i,s,e,r)=>{const n={min:sh,max:eh};let h,o=0,a=0;for(let l=e;l<=r;l+=1){const e=l%t.length,r=t[e],u=i[e];s&&Number.isNaN(u)?h=void 0:(n.min=Math.min(n.min,u),n.max=Math.max(n.max,u),void 0!==h&&(o+=1,a+=Math.abs(r-h)),h=r)}return{visibleBoundaries:n,avgPointGap:a/o,sampleMin:e,sampleMax:r,finitePointPairCount:o}};let s;return(e,r,n,h,o,a,l)=>{if(!n)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};if(n.iLastSample-n.iFirstSample+1<2e3)return i(o,a,l,n.iFirstSample,n.iLastSample);h&&(s=void 0),s||(s={iFirst:n.iFirstSample,chunks:[]});let u=s.iFirst,c=s.iFirst+s.chunks.length*t-1;for(;;){const e=c+1,r=c+t;if(!(n.iLastSample>=r))break;{const t=i(o,a,l,e,r);s.chunks.push(t),c=r}}for(;;){const e=u-1,r=u-t;if(!(n.iFirstSample<=r))break;{const t=i(o,a,l,r,e);s.chunks.unshift(t),s.iFirst=r,u=r}}for(let i=0;i<s.chunks.length&&s.chunks[i].sampleMin<n.iFirstSample;i++)s.chunks.splice(i,1),s.iFirst+=t,i--;for(let t=s.chunks.length-1;t>=0&&s.chunks[t].sampleMax>n.iLastSample;t--)s.chunks.splice(t,1);if(0===s.chunks.length)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};const d={min:sh,max:eh},f=[];for(const t of s.chunks)d.min=Math.min(t.visibleBoundaries.min,d.min),d.max=Math.max(t.visibleBoundaries.max,d.max),f.push(t.avgPointGap);const v=i(o,a,l,n.iFirstSample,s.iFirst-1),A=i(o,a,l,s.chunks[s.chunks.length-1].sampleMax+1,n.iLastSample);return v.finitePointPairCount>0&&(d.min=Math.min(v.visibleBoundaries.min,d.min),d.max=Math.max(v.visibleBoundaries.max,d.max),f.push(v.avgPointGap)),A.finitePointPairCount>0&&(d.min=Math.min(A.visibleBoundaries.min,d.min),d.max=Math.max(A.visibleBoundaries.max,d.max),f.push(A.avgPointGap)),{visibleBoundaries:d,avgPointGap:f.reduce(((t,i)=>t+i/f.length),0)}}},Db=(t,i,s,e,r,n,h,o,a,l,u,c,d,f)=>{const v=Oo(l),A=zo(l),g=Array.isArray(i[0])?zu(i[0]):i[0],y=Array.isArray(i[1])?zu(i[1]):i[1],p=s&&Array.isArray(s)?zu(s):s,m=e&&Array.isArray(e)?zu(e):e,S=r&&Array.isArray(r)?zu(r):r,b=n&&Array.isArray(n)?zu(n):n,x=g.length,M=g.elementAt(0),w=g.elementAt(x-1),_=y.elementAt(0),k=y.elementAt(x-1),C=c?2:1;if(o&&a&&void 0!==o.firstX&&void 0!==o.lastX&&void 0!==o.firstY&&void 0!==o.lastY&&("ProgressiveX"===l&&M>=o.firstX||"RegressiveX"===l&&M<=o.firstX||"ProgressiveY"===l&&_>=o.firstY||"RegressiveY"===l&&_<=o.firstY)){const i="x"===v?g:y,s="x"===v?o.lastX:o.lastY,e=Uu(s,0,x-1,A,(t=>i.elementAt(t)));if(i.elementAt(e)===s){const i=o.bufferSize-o.valueCount,s=e+1,r=x-s;if(0===r)return o;if(i>=r){const i=g.toArray(s,s+r-1),e=y.toArray(s,s+r-1);if(t.IO(o.bufferX,o.valueCount*C,d(i),Float32Array),t.IO(o.bufferY,o.valueCount*C,d(e),Float32Array),p&&o.bufferColors){const i=p.toArray(s,s+r-1);t.IO(o.bufferColors,o.valueCount,i,Uint32Array)}if(m&&o.bufferLookupValues){const i=m.toArray(s,s+r-1);t.IO(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(S&&o.bufferSizes){const i=S.toArray(s,s+r-1);t.IO(o.bufferSizes,o.valueCount,i,Float32Array)}if(b&&o.bufferRotations){const i=b.toArray(s,s+r-1);t.IO(o.bufferRotations,o.valueCount,i,Float32Array)}if(h&&o.bufferLengthSoFar){const[s,r,n]=Eb(i,e,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY,f);t.IO(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=r,o.lengthSoFarY=n}return o.valueCount+=r,o.lastX=w,o.lastY=k,o}}}const T=g.toArray(0,x-1),F=y.toArray(0,x-1),I=x+u,L=t.FO(I*C,d(T),null==o?void 0:o.bufferX,Float32Array),P=t.FO(I*C,d(F),null==o?void 0:o.bufferY,Float32Array),B=p?t.FO(I,p.toArray(0,x-1),null==o?void 0:o.bufferColors,Uint32Array):void 0,D=m?t.FO(I,m.toArray(0,x-1),null==o?void 0:o.bufferLookupValues,Float32Array):void 0,E=S?t.FO(I,S.toArray(0,x-1),null==o?void 0:o.bufferSizes,Float32Array):void 0,R=b?t.FO(I,b.toArray(0,x-1),null==o?void 0:o.bufferRotations,Float32Array):void 0;let O,z=0,V=0;if(h){const i=Eb(T,F,T[0],F[0],0,0,f);O=t.FO(2*I,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),z=i[1],V=i[2]}return{bufferX:L,bufferY:P,bufferColors:B,bufferLookupValues:D,bufferSizes:E,bufferRotations:R,bufferSize:I,bufferLengthSoFar:O,valueCount:x,firstX:M,lastX:w,firstY:_,lastY:k,lengthSoFarX:z,lengthSoFarY:V}},Eb=(t,i,s,e,r,n,h)=>{const o=t.length,a=new Float32Array(2*o);if(0===o)return[a,0,0];let l=0,u=s,c=e,d=r,f=n;if(h)for(let s=0;s<o;s+=1){const e=t[s],r=i[s];Number.isNaN(e)||Number.isNaN(r)||Number.isNaN(u)||Number.isNaN(c)?(d=0,f=0,a[l]=0,a[l+1]=0,l+=2):(d+=Math.abs(u-e),f+=Math.abs(c-r),a[l]=d,a[l+1]=f,l+=2),u=e,c=r}else for(let s=0;s<o;s+=1){const e=t[s],r=i[s];d+=Math.abs(u-e),f+=Math.abs(c-r),a[l]=d,a[l+1]=f,l+=2,u=e,c=r}return[a,d,f]},Rb={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>Rb.multiply(t,Rb.translation(i,s)),rotate:(t,i)=>Rb.multiply(t,Rb.rotation(i)),scale:(t,i,s)=>Rb.multiply(t,Rb.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],v=i[3],A=i[4],g=i[5],y=i[6],p=i[7],m=i[8];return[c*s+d*n+f*a,c*e+d*h+f*l,c*r+d*o+f*u,v*s+A*n+g*a,v*e+A*h+g*l,v*r+A*o+g*u,y*s+p*n+m*a,y*e+p*h+m*l,y*r+p*o+m*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class Ob extends pu{constructor(t,i,s,r,n){super(t,i,s,r,n),this.Q$=[],this.qD=new yS,this.K$=[e(0,0),e(0,0),e(0,0),e(0,0)],this.q$=a(e(0,0),e(0,0)),this.tU=a(e(0,0),e(0,0)),this.iU=e(0,0),this.sU=e(0,0),this.eU=e(0,0),this.rU=0,this.nU=0,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,fillStyleLinearGradient:()=>ze(this.Lr)&&this.Lr}),this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i,this.SN=t.fl.pl}Sh(){const t=this.Hl(),i=this.Yl(),s=this.Hi.C();if(t){const t=this.Ul(),r=this.oV.fillStyleSolid(t),n=this.oV.fillStyleRadialGradient(t),h=this.oV.fillStyleLinearGradient(t),o=r||n||h,a=this.kD,l=this.kD.RR(),u=l!==this.nU;if(this.nU=l,this.qD.hO(this.ji),this.nu.o||u){this.hU&&this.hU.zD(this),this.font._(iu(this.nu.C(),l));const t=this.font.C();this.hU=this.kD.th(t.properties.family),this.hU.Pd(this)}const c=this.font.o||this.Kl.o;if(c&&this.hU){const t=this.font.C();[this.oU,this.tU]=this.hU.ND(this.Kl.C(),t,this.qz.rs.isDark),this.Q$.forEach((t=>{t.texCoordBuff&&a.uO(t.texCoordBuff),t.vertexBuff&&a.uO(t.vertexBuff)})),this.Q$=this.oU.map((t=>({texCoordBuff:a.JR(t.texCoords,!1),texture:t.texture,info:t}))),this.nu.o=!1,this.font.o=!1,this.Kl.o=!1}const d=this.ji.Vi()||i,f=this.co.o||this.su.o||this.iu.o||this.eu.o||this.xo.o||this.Zt.o||c||d,v=this.xo.C(),A=Ih(e(this.su.C()+1,this.iu.C()+1),.5);if(f&&this.oU&&(this.iU=e(-(v.left*l+this.tU.max.x-this.tU.min.x+v.right*l)*A.x,-(v.bottom*l+this.tU.max.y-this.tU.min.y+v.top*l)*A.y)),(f||d||this.ru.o||this.Ul())&&this.Lr!==ho){if(this.oU){const t=Lh(this.co.C(),this.eu.C()),i=Je(t,this.ji,this.Ki.ji),s=Ih(i,l);this.eU=s;const r=zh(this.ru.C());this.rU=r,c&&this.Q$.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=a.JR(i.vertices,!0,t.vertexBuff))}));const n=this.Zt.C(),h=[Lh(_h(e((this.tU.min.x+(-n.left-v.left)*l+this.iU.x)/l,(this.tU.max.y+(n.top+v.top)*l+this.iU.y)/l),this.q,r),i),Lh(_h(e((this.tU.max.x+(n.right+v.right)*l+this.iU.x)/l,(this.tU.max.y+(n.top+v.top)*l+this.iU.y)/l),this.q,r),i),Lh(_h(e((this.tU.max.x+(n.right+v.right)*l+this.iU.x)/l,(this.tU.min.y+(-n.bottom-v.bottom)*l+this.iU.y)/l),this.q,r),i),Lh(_h(e((this.tU.min.x+(-n.left-v.left)*l+this.iU.x)/l,(this.tU.min.y+(-n.bottom-v.bottom)*l+this.iU.y)/l),this.q,r),i)];this.K$=[Je(h[0],this.Ki.ji,this.ji),Je(h[1],this.Ki.ji,this.ji),Je(h[2],this.Ki.ji,this.ji),Je(h[3],this.Ki.ji,this.ji)];const o=mh(h);this.sU=e(-(o.max.x-o.min.x)*l*A.x-o.min.x*l+this.eU.x,-(o.max.y-o.min.y)*l*A.y-o.min.y*l+this.eU.y),this.ln=Ph(o.max,o.min),this.sU={x:this.sU.x/l,y:this.sU.y/l};const u=mh(this.K$),d=this.ji.Bi(u.min,this.sU),f=this.ji.Bi(u.max,this.sU);this.q$=mh([d,f]),this.sU={x:this.sU.x*l,y:this.sU.y*l}}n?this.vV=nS(this.q$,this.ji,n.getPosition(),n.getExtent(),n.getShape(),this.kD.RR()):h?this.AV=hS(this.q$,this.ji,h.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0)}this.Ul()&&(this.sE=o?this.kD.KE(_m["2D"],_m.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.SN}),_m.Color({dataType:n?["gradient",n]:h?["gradient",h]:"uniform",maskTextureText:!0})):void 0),this.aU=!this.pu||this.Lr===ho||r&&0===r.getColor().getA()?void 0:this.aU||this.kD.KE(_m["2D"],_m.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.SN}),_m.Color({dataType:"uniform",maskTextureText:!0})),this.lU=s&&o?this.lU||this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.SN})):void 0,this.co.o=!1,this.su.o=!1,this.iu.o=!1,this.eu.o=!1,this.ru.o=!1,this.Wl(this.Lr)}return this.hu=t,this}ed(t,i){if(this.ql){const t=Math.min(this.K$[0].x,this.K$[1].x),i=Math.max(this.K$[0].x,this.K$[1].x),s=Math.min(this.K$[0].y,this.K$[2].y),e=Math.max(this.K$[0].y,this.K$[2].y);this.ke.Pg();const r=Math.min(this.ji.x.Lt,this.ji.x.Pt),n=Math.max(this.ji.x.Lt,this.ji.x.Pt),h=Math.min(this.ji.y.Lt,this.ji.y.Pt),o=Math.max(this.ji.y.Lt,this.ji.y.Pt);if(!(t<=n&&r<=i&&s<=o&&h<=e))return{idCount:1}}if(this.Hl()){const s=0===t?this.aU:void 0,e=this.pu,r=1===t?this.lU:this.sE;if(!r||0===this.Q$.length)return{};const n=this.oV.fillStyleSolid(!1),h=this.oV.fillStyleRadialGradient(!1),o=this.oV.fillStyleLinearGradient(!1),a=this.Ki.IE(),l=a.x,u=a.y;let c=Rb.projection(l,u,-1);const d=Rb.translation(this.iU.x,this.iU.y),f=Rb.translation(this.sU.x,this.sU.y);c=Rb.translate(c,this.eU.x,this.eU.y),c=Rb.multiply(c,f),c=Rb.rotate(c,this.rU),c=Rb.multiply(c,d),1===t&&(c=Rb.scale(c,this.tU.max.x,this.tU.max.y)),s&&e&&(c=Rb.translate(c,this.tu.x,this.tu.y),this.kD.Pd(s).KR(s,((t,i,s,r)=>(this.kD.wO(t("uMatrix"),c).sO(t("uIsHighlighted"),0).SL(t("uHighlightColorOffset"),_e).sO(t("uRenderEffectMask"),0).SL(t("uColor"),e),this.SN&&this.kD.tO(r("uViewportSizePx"),[a.x*this.kD.RR(),a.y*this.kD.RR()]),this.Q$.forEach((s=>{this.kD.lO(i("aPos"),s.vertexBuff).lO(i("aMaskTextureCoord"),s.texCoordBuff).iO(t("uMaskTexture"),s.texture,0).pC(this.kD.gl.TRIANGLES,s.vertexBuffLen)})),!0))),c=Rb.translate(c,-this.tu.x,-this.tu.y)),this.kD.Pd(r).KR(r,((s,e,r,l)=>{if(this.kD.wO(s("uMatrix"),c).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),this.SN&&this.kD.tO(l("uViewportSizePx"),[a.x*this.kD.RR(),a.y*this.kD.RR()]),1===t)this.kD.kO(s("uFirstId"),i).Sz(r,1);else if(n)this.kD.SL(s("uColor"),n.getColor());else if(h&&this.vV){this.kD.tO(s("uCenter"),this.vV.center).tO(s("uDistance"),this.vV.distance).aO(s("uBounds"),this.vV.bounds).sO(s("uAspect"),this.vV.aspectRatio);const t=h.getColorStops();for(let i=0;i<t.length;i+=1)this.kD.SL(s(`color_${i}`),t[i].color).sO(s(`stop_${i}`),t[i].offset)}else if(o&&this.AV){this.kD.tO(s("uStartPoint"),this.AV.startPoint).tO(s("uEndPoint"),this.AV.endPoint).aO(s("uBounds"),this.AV.bounds);const t=o.getColorStops();for(let i=0;i<t.length;i+=1)this.kD.SL(s(`color_${i}`),t[i].color).sO(s(`stop_${i}`),t[i].offset)}return 1===t&&this.kD.lO(e("aPos"),this.kD.ez).pC(this.kD.gl.TRIANGLES,6),1!==t&&this.Q$.forEach((t=>{this.kD.lO(e("aPos"),t.vertexBuff).lO(e("aMaskTextureCoord"),t.texCoordBuff).iO(s("uMaskTexture"),t.texture,0).pC(this.kD.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return{idCount:1}}nd(t,i,s,e,r){return{}}Qc(){return this.Hl()?mh(this.K$):rh}td(){return this.Hl()&&this.ln?this.ln:e(0,0)}li(){if(this.Hl()&&this.q$){const t=this.q$;return e(t.max.x-t.min.x,t.max.y-t.min.y)}return e(0,0)}rd(){return this.Q$.forEach((t=>{t.texCoordBuff&&this.kD.uO(t.texCoordBuff),t.vertexBuff&&this.kD.uO(t.vertexBuff)})),this.Q$=[],this.hU&&this.hU.zD(this),this.sE=void 0,this.aU=void 0,this.lU=void 0,this}Ps(){return this.q$.max.x}Ls(){return this.q$.min.x}Ds(){return this.q$.max.y}Bs(){return this.q$.min.y}$u(){return 0}Uu(){return 0}}class zb{constructor(t){this.CN=0,this.uU=null,this.st=t}cU(){return this.st}dU(t,i,s,e){for(var r,n,h,o,a,l,u,c,d,f,v=this.uU,A=null,g=null,y=!1,p=!1;v&&(null===A&&(this.fU(t,i,null===(r=v.head)||void 0===r?void 0:r.px,null===(n=v.head)||void 0===n?void 0:n.py)?(A=v,y=!0):this.fU(t,i,null===(h=v.tail)||void 0===h?void 0:h.px,null===(o=v.tail)||void 0===o?void 0:o.py)&&(A=v)),null===g&&(this.fU(s,e,null===(a=v.head)||void 0===a?void 0:a.px,null===(l=v.head)||void 0===l?void 0:l.py)?(g=v,p=!0):this.fU(s,e,null===(u=v.tail)||void 0===u?void 0:u.px,null===(c=v.tail)||void 0===c?void 0:c.py)&&(g=v)),null==g||null==A);)v=v.next;switch((null!=A?1:0)|(null!=g?2:0)){case 0:var m={px:t,py:i,prev:null},S={px:s,py:e,next:null};m.next=S,S.prev=m,A={head:m,tail:S,next:this.uU,prev:null,closed:!1},this.uU&&(this.uU.prev=A),this.uU=A,++this.CN;break;case 1:var b={px:s,py:e};y?(b.next=A.head,b.prev=null,A.head.prev=b,A.head=b):(b.next=null,b.prev=A.tail,A.tail.next=b,A.tail=b);break;case 2:b={px:t,py:i},p?(b.next=g.head,b.prev=null,g.head.prev=b,g.head=b):(b.next=null,b.prev=g.tail,g.tail.next=b,g.tail=b);break;case 3:if(A===g){b={px:null===(d=A.tail)||void 0===d?void 0:d.px,py:null===(f=A.tail)||void 0===f?void 0:f.py,next:A.head,prev:null},A.head.prev=b,A.head=b,A.closed=!0;break}switch((y?1:0)|(p?2:0)){case 0:this.vU(A);case 1:g.tail.next=A.head,A.head.prev=g.tail,g.tail=A.tail,this.AU(A);break;case 3:this.vU(A);case 2:A.tail.next=g.head,g.head.prev=A.tail,A.tail=g.tail,this.AU(g)}}}AU(t){t.prev?t.prev.next=t.next:this.uU=t.next,t.next&&(t.next.prev=t.prev),--this.CN}gU(t,i,s=1e-10){return Math.abs(t-i)<Math.min(Math.abs(t),Math.abs(i))*s}fU(t,i,s,e){return!!(t&&i&&s&&e)&&this.gU(t,s)&&this.gU(i,e)}vU(t){for(var i=t.head;i;){var s=i.next;i.next=i.prev,i.prev=s,i=s}s=t.head,t.head=t.tail,t.tail=s}}class Vb{constructor(t){this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5),this.contours={},t&&(this.yU=t)}pU(t,i,s,e){const r=i.length-1,n=s.length-1;var h=this.h,o=this.sh,a=this.xh,l=this.yh;const u=e.length;this.contours={};for(var c,d,f,v,A,g=function(t,i){return(h[i]*a[t]-h[t]*a[i])/(h[i]-h[t])},y=function(t,i){return(h[i]*l[t]-h[t]*l[i])/(h[i]-h[t])},p=0,m=0,S=0,b=0,x=[0,1,1,0],M=[0,0,1,1],w=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],_=n-1;_>=0;_--)for(var k=0;k<r;k++){let r=t(k,_),n=t(k+1,_),L=t(k,_+1),P=t(k+1,_+1);var C=Math.min(L,r),T=Math.min(P,n);if(v=Math.min(C,T),C=Math.max(L,r),T=Math.max(P,n),!((A=Math.max(C,T))<e[0]&&v>e[u-1]))for(var F=0;F<u;F++)if(e[F]>=v&&e[F]<=A){for(var I=4;I>=0;I--)I>0?(h[I]=t(k+x[I-1],_+M[I-1])-e[F],a[I]=i[k+x[I-1]],l[I]=s[_+M[I-1]]):(h[0]=.25*(h[1]+h[2]+h[3]+h[4]),a[0]=.5*(i[k]+i[k+1]),l[0]=.5*(s[_]+s[_+1])),h[I]>1e-10?o[I]=2:h[I]<-1e-10?o[I]=0:o[I]=1;for(I=1;I<=4;I++)if(d=4!=I?I+1:1,0!=(f=w[o[c=I]][o[0]][o[d]])){switch(f){case 1:p=a[c],S=l[c],m=a[0],b=l[0];break;case 2:p=a[0],S=l[0],m=a[d],b=l[d];break;case 3:p=a[d],S=l[d],m=a[c],b=l[c];break;case 4:p=a[c],S=l[c],m=g(0,d),b=y(0,d);break;case 5:p=a[0],S=l[0],m=g(d,c),b=y(d,c);break;case 6:p=a[d],S=l[d],m=g(c,0),b=y(c,0);break;case 7:p=g(c,0),S=y(c,0),m=g(0,d),b=y(0,d);break;case 8:p=g(0,d),S=y(0,d),m=g(d,c),b=y(d,c);break;case 9:p=g(d,c),S=y(d,c),m=g(c,0),b=y(c,0)}this.yU(p,S,m,b,e[F],F)}}}}yU(t,i,s,e,r,n){let h=this.contours[n];h||(h=this.contours[n]=new zb(r)),h.dU(t,i,s,e)}get mU(){var t=[],i=this.contours;for(var s in i)for(var e=i[s].uU,r=i[s].st;e;){var n=e.head,h=[];for(h.ax=[],h.ay=[],h.level=r,h.k=s;n&&n.px&&n.py;)h.ax.push(n.px),h.ay.push(n.py),n=n.next;t.push(h),e=e.next}return t.sort(((t,i)=>t.length-i.length)),t}}class Nb extends gu{constructor(t,i,s,e,r,n){super(t,i,s,e,r),this.SU=u("bilinear"),this.bU=u(void 0),this.xU=!0,this.ut={x:0,y:0},this.dt={x:1,y:1},this.Ep=ou.lineStyle,this.MU=u(void 0),this.engine=t;const h="columns"===n.dataOrder?n.columns:n.rows,o="columns"===n.dataOrder?n.rows:n.columns;this.fl={...n,primaryDimensionVectorsCount:h,secondaryDimensionVectorsCount:o},this.wU=new Vb}Yp(t){return this.SU._(t),this}Hp(){return this.SU.C()}Kx(t){return this.bU._(t),this}qx(){return this.bU.C()}Vp(t,i){return this.xU=this.ut!=t||this.dt!=i,this.ut=t,this.dt=i,this}Np(){return{start:this.ut,step:this.dt,end:{x:this.ut.x+this.dt.x*this.fl.columns,y:this.ut.y+this.dt.y*this.fl.rows}}}Rp(t){return this.Ep="function"==typeof t?t(this.Ep):t,this}jp(){return this.Ep}Gp(t){return this.MU._(t),this}$p(){return this.MU.C()}}class Gb extends Nb{constructor(t,i,s,e,r,n){super(t,i,s,e,r,n),this.qD=new yS,this.cN={},this._U=[],this.kU=!1,this.Qu=!1,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStylePaletted:()=>yo(this.Lr)&&this.Lr,wireframeStyleLine:()=>aa(this.Ep)&&this.Ep,wireframeStyleFill:()=>{const t=this.Ep&&this.Ep.getFillStyle();return co(t)&&t}}),this.CU=void 0,this.TU=Hv,this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i;const h=Math.min(this.kD.TD,void 0!==n.Wx?n.Wx:2048),o={x:Math.min(h,this.fl.primaryDimensionVectorsCount),y:Math.min(h,this.fl.secondaryDimensionVectorsCount)},a=((t,i,s)=>{const e=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let h;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};e.push(s)})))),h=[],e.forEach((t=>{let i=h.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},h.push(i)),i.tiles.push(t)})),{gridTiles:e,gridTileSizes:h}})(this.fl,o,this.TU),l=a.gridTiles.map((t=>({...t,intensityData:void 0,hasIntensityData:!1}))),u=a.gridTileSizes.map((t=>({...t,tiles:l.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.FU={gridTiles:l,gridTileSizes:u},this.Vp(this.ut,this.dt),this.IU=[],this.LU=new Td((()=>{const t=new Pb(this.qz,this.tV,this.ji,$r);return t.gf(ho).Af(ho),t})),this.PU=[],this.BU=new Td((()=>{const t=new Ob(this.qz,this.tV,this.ji,$r,[]);return t.Cu({x:0,y:0}),t}))}DU(){return this.kD.Ki.Ea.YE}ls(){return this.EU}RU(t){return t.intensityData||(t.intensityData=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary)),t.intensityData}OU(t,i){return 0<=t&&t<i?t:t<0?t%i+i:t%i}zU(t,i){const s=Je(t,this.ji,this.tV.Ki.ji),e=Je(i,this.ji,this.tV.Ki.ji);let r=180*Math.atan2(s.y-e.y,e.x-s.x)/Math.PI;return(r<-90||90<r)&&(r+=180),r}VU(t,i,s,e){const r=Gh(t,i,s,e);if(r){let n=Math.min(t.x,i.x,s.x,e.x),h=Math.max(t.x,i.x,s.x,e.x),o=Math.min(t.y,i.y,s.y,e.y),a=Math.max(t.y,i.y,s.y,e.y);if(r.x<=n||h<=r.x||r.y<=o||a<=r.y)return}return r}NU(t,i,s,e){if(i.length<5)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};void 0===this.CU&&(this.CU=new Ob(this.qz,this.tV,this.ji,this.qi,[]));const r=t.labelFont;let n=this.CU.Eh(e).eh(0).ih(r).Sh().li().x;Number.isNaN(n)&&(this.CU.dispose(),this.CU=new Ob(this.qz,this.tV,this.ji,this.qi,[]),n=this.CU.Eh(e).eh(0).ih(r).Sh().li().x);const h=this.CU,o=this.ji.x.Lt,a=this.ji.x.Pt,l=this.ji.y.Lt,u=this.ji.y.Pt,c={x:o,y:l},d={x:a,y:u},f=[{x:c.x,y:c.y},{x:c.x,y:d.y}],v=[{x:c.x,y:d.y},{x:d.x,y:d.y}],A=[{x:d.x,y:c.y},{x:d.x,y:d.y}],g=[{x:c.x,y:c.y},{x:d.x,y:c.y}];let y={x:i[0],y:s[0]},p={x:i[1],y:s[1]},m=[];const S=c.x,b=d.x,x=c.y,M=d.y,w=(t,i,s,e)=>{const r=wh(t,c,d),n=wh(i,c,d);if(r&&n)return e?(s.push(t),s.push(i),!1):(s.push(i),!1);{if(!r&&!n&&(t.x<S&&i.x<S||t.y<x&&i.y<x||b<t.x&&b<i.x||M<t.y&&M<i.y))return!(0<s.length&&0==isNaN(s[s.length-1].x)&&(s.push({x:NaN,y:NaN}),0));const h=this.VU(f[0],f[1],t,i),o=this.VU(v[0],v[1],t,i),a=this.VU(A[0],A[1],t,i),l=this.VU(g[0],g[1],t,i),u=[];if(h&&u.push(h),o&&u.push(o),a&&u.push(a),l&&u.push(l),1==u.length){if(r)e&&s.push(t),s.push(i),s.push({x:NaN,y:NaN});else if(n)return s.push(t),s.push(i),!1}else 2==u.length&&(0<s.length&&0==isNaN(s[s.length-1].x)&&s.push({x:NaN,y:NaN}),s.push(u[0]),s.push(u[1]),s.push({x:NaN,y:NaN}));return!0}};let _=w(y,p,m,!0);const k=4*this.ji.x.getPixelSize()/2;for(let t=2;t<i.length;t++)p={x:i[t],y:s[t]},k<=Math.abs(p.x-y.x)+Math.abs(p.y-y.y)&&(_=w(y,p,m,_),y=p);const C=m.length;if(C<2)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};y={x:i[i.length-1],y:s[s.length-1]},wh(y,c,d)&&y.x==m[0].x&&y.y==m[0].y&&m.push(m[0]);let T=[];const F=[];let I=0;for(let t=I+1;t<2*C;t++){let i=this.OU(t,C);if(C<t&&n<this.Zf(m[i],m[0]))break;let s=this.OU(I,C);if(isNaN(m[s].x)){0<T.length&&(F.push(T),T=[]),++I,t=I;continue}const e=isNaN(m[i].x);let r=0;if(e){0<T.length&&(F.push(T),T=[]),++t,I=t;continue}const h=0;if(m[i].x<c.x+h||d.x-h<m[i].x||m[i].y<c.y+h||d.y-h<m[i].y)++t,I=t;else if(r=this.Zf(m[i],m[s]),n<r){const e=m[s],r=m[i];let n=Number.MIN_VALUE;const h=0;for(let i=I+1;i<t-1;i++){const t=this.OU(i,C);if(isNaN(m[t].x))break;if(n!=Number.MIN_VALUE&&(m[t].x<c.x+h||d.x-h<m[t].x||m[t].y<c.y+h||d.y-h<m[t].y))continue;const s=gh({x:m[t].x,y:m[t].y},e,r);n<s&&(n=s)}if(n!=Number.MIN_VALUE&&(T.push({x:n,y:s,z:i}),C<=t&&0<=s))break;++I,t=I}else e&&(++I,t=I)}p={x:0,y:0};let L=-1;const P=[],B=[];F.length<1&&0<T.length&&F.push(T);for(let t=0;t<F.length;t++){T=F[t],T.sort(((t,i)=>t.x-i.x)),L=T[0].y;let e=0,n=T[0].z;this.PU.forEach(((t,o)=>{const a=h.zr({x:t.position.x,y:t.position.y}).eh(t.angle).ih(t.font).Sh().Qc();if(isNaN(a.min.x))return;let l=L,u=n;if(m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){let t=this.zU(m[l],m[u]),n=h.zr({x:i[L],y:s[L]}).eh(t).ih(r).Sh().Qc();for(;oh(a,n)&&e<T.length-1;)if(l=T[++e].y,u=T[e].z,m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){const i=(m[l].x+m[u].x)/2,s=(m[l].y+m[u].y)/2;t=this.zU(m[l],m[u]),n=h.zr({x:i,y:s}).eh(t).ih(r).Sh().Qc()}}})),T.length<=e&&(e=0);let o=T[e].y,a=T[e].z,l=0;l=o<a?a-o:C-o+a,3<l&&(l-=2),L=o;let u=Number.NaN,c=Number.NaN;if(m[0].x==m[m.length-1].x&&m[0].y===m[m.length-1].y){L=o;let t=this.OU(o-1,m.length),i=this.OU(o+l,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else if(o<4){L=3,o=L,a=this.OU(o+l+1,m.length);let t=this.OU(o,m.length),i=this.OU(a,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else{for(L=o-1;L<m.length&&isNaN(m[L].x);)++L;if(L==m.length)for(;L<m.length&&isNaN(m[L].x);)++L;let t=this.OU(L,m.length),i=this.OU(L+l+1,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}0<=L&&(y=m[o],p=m[a],P.push({x:u,y:c}),B.push(this.zU(y,p)))}return 0<=P.length?{labelPos:P,labelAngle:B}:{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]}}Zf(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}GU(t,i){if(!this.FU)return this;if(!t)return this.$U(!0),this.UU(!0),this;if(!i)return(this.ji.x.Ai||this.ji.x.Ht||this.ji.y.Ai||this.ji.y.Ht)&&this.jU(t),this;if(!this.FU.gridTiles)return this;if(!this.YU)return this;const s=this.YU.boundaries.min.x,e=this.YU.boundaries.min.y,r=this.YU.boundaries.max.x,n=this.YU.boundaries.max.y;if(null==s||null==e||null==r||null==n)return this;const h=this.fl.columns,o=this.fl.rows,a=(r-s)/h,l=(n-e)/o,u=new Array(h).fill(0,0,h).map(((t,i)=>s+i*a+a/2)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l+l/2));let d=[];t.levels.forEach((t=>{d.push(t.value)}));const f=(t,i)=>"rows"==this.fl.dataOrder?i:t,v=(t,i)=>"rows"==this.fl.dataOrder?t:i;return this.wU.pU(((t,i)=>this.HU(f(t,i),v(t,i))),u,c,d),this.WU(t),this.jU(t),this}WU(t){this.$U();let i=new Map;return t.levels.forEach((t=>{i.set(t.value,t.strokeStyle)})),this.wU.mU.forEach((t=>{let s=t.level;const e=i.get(s),r=this.IU.find((t=>t.lineStyle===e));if(r)r.points.appendSample({xValues:NaN,yValues:NaN}),r.points.appendSamples({xValues:t.ax,yValues:t.ay});else{const i=new Nu({warnings:!1,schema:{xValues:{pattern:null},yValues:{pattern:null}}});i.appendSamples({xValues:t.ax,yValues:t.ay});const s={lineStyle:e,points:i};this.IU.push(s)}})),this}jU(t){this.UU();const i=yo(this.Lr)?this.Lr.lut:void 0;return this.wU.mU.forEach((s=>{var e,r,n;let h=[],o=[];const a=s.k,l=t.levels[a],u=null!==(r=null!==(e=l.label)&&void 0!==e?e:null==i?void 0:i.getFormatter()(l.value,{min:i.min,max:i.max}))&&void 0!==r?r:l.value.toString();if(t.showLabels&&(({labelPos:h,labelAngle:o}=this.NU(t.levels[a],s.ax,s.ay,u)),0<h.length))for(let i=0;i<h.length;i++)this.PU.push({text:u,position:h[i],angle:o[i],font:l.labelFont,fill:l.labelFillStyle,shadow:null!==(n=t.shadows)&&void 0!==n?n:void 0})})),this}Sh(){const t=this._U,i=this.Lr,s=this.Ul(),e=this.Ep,r=e!==this.XU,n=this.oV.wireframeStyleLine(r),h=this.oV.wireframeStyleFill(r),o=n&&h&&!this.ji.xi(),a=this.oV.fillStylePaletted(s),l=this.oV.fillStyleSolid(s),u=this.SU.o,c=this.bU.o,d=this.SU.C(),f=this.Qu,v=this.Hi.C();this.ZU=this.ZU||this.JU();const A=this.ZU,g=Xv(t,A,f?"intensity":void 0,(t=>t.sizeHeatmapDataVectors)),y=this.MU.C(),p=y!==this.QU;this.GU(y,p||g.size>0||this.xU),this.QU=this.MU.C(),this.xU=!1,g.size>0&&(qv(this.kD,g,(t=>this.RU(t.tileData)),(t=>t.intensityDataTexture)),this.kU=!0),this.qD.hO(this.ji);const m=this.cN;if((s||u||c)&&(m.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.kD.KE(_m["2D"],_m.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===d&&"bilinear",flipXY:"rows"===this.fl.dataOrder,intensityTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut,aggregation:this.bU.C()}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}))}:l?{renderMode:"solid",fillStyleSolid:l,shader:this.kD.KE(_m["2D"],_m.Color({dataType:"uniform"}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}))}:void 0),r&&(m.wireframe=o&&n&&h?-1===n.getThickness()?{renderMode:"primitive",shader:this.kD.KE(_m["2D"],_m.Color({dataType:"uniform"}),_m.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.fl.dataOrder,axisWorldTranslation:ma(this.ji),normalSource:void 0})),fillStyleSolid:h}:{renderMode:"triangulated",shader:this.kD.KE(_m["2D"],_m.Color({dataType:"uniform"}),_m.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.fl.dataOrder,axisWorldTranslation:ma(this.ji),normalSource:void 0})),geometry:DS(this.kD,1),solidLine:n,fillStyleSolid:h}:void 0,m.wireframe?this.KU=this.KU||this.qU():this.KU&&(this.kD.uO(this.KU.wireframeCoordinatesBuffer),this.KU=void 0)),m.mousePicking=v?this.cN.mousePicking||{shader:this.kD.KE(_m["2D"],_m.MousePicking(),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}))}:void 0,this.cN=m,void 0===this.EU&&a&&"value"===a.lookUpProperty&&a.lut.percentageValues){let t=sh,i=eh;this.ZU.gridTiles.forEach((s=>{const e=this.RU(s.tileData);for(let s=0;s<e.length;s+=1){const r=e[s];r<t&&(t=r),r>i&&(i=r)}})),this.EU={min:t,max:i}}return this.Qu=!1,this._U.length=0,this.Wl(i),this.XU=e,this.SU.o=!1,this.bU.o=!1,this}JU(){const t=this.FU.gridTiles.map((t=>{const i=Kv(this.kD,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.FU.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.kD.JR(new Float32Array(16)),e=this.kD.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}qU(){const t=this.fl.primaryDimensionVectorsCount+1+this.fl.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.fl.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.fl.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.fl.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.fl.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.kD.JR(i),wireframeSegmentsLength:t}}Vp(t,i){super.Vp(t,i);const s=this.fl,e=a({x:Math.min(this.ut.x,this.ut.x+s.columns*this.dt.x),y:Math.min(this.ut.y,this.ut.y+s.rows*this.dt.y)},{x:Math.max(this.ut.x,this.ut.x+s.columns*this.dt.x),y:Math.max(this.ut.y,this.ut.y+s.rows*this.dt.y)}),r=new Map;return this.FU.gridTiles.forEach((t=>{const i="columns"===this.fl.dataOrder?{x:this.ut.x+this.dt.x*t.iFirstVector.primary,y:this.ut.y+this.dt.y*t.iFirstVector.secondary}:{x:this.ut.x+this.dt.x*t.iFirstVector.secondary,y:this.ut.y+this.dt.y*t.iFirstVector.primary},s="columns"===this.fl.dataOrder?{x:this.dt.x*t.sizeHeatmapDataVectors.primary,y:this.dt.y*t.sizeHeatmapDataVectors.secondary}:{x:this.dt.x*t.sizeHeatmapDataVectors.secondary,y:this.dt.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.fl.dataOrder?{x:this.ut.x+this.dt.x*t.iFirstUniqueVector.primary,y:this.ut.y+this.dt.y*t.iFirstUniqueVector.secondary}:{x:this.ut.x+this.dt.x*t.iFirstUniqueVector.secondary,y:this.ut.y+this.dt.y*t.iFirstUniqueVector.primary},n="columns"===this.fl.dataOrder?{x:this.dt.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.dt.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.dt.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.dt.y*t.sizeUniqueHeatmapDataVectors.primary};r.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:n})})),this.YU={boundaries:e,tilesInfo:r},this}ed(t,i){var s,e;const r=this.ZU,n=this.YU;if(this.bU.C()&&"bilinear"===this.SU.C())return Or.console.warn("LightningChart JS error | heatmap has both bilinear interpolation and aggregation enabled at same time. Disable one of them"),{idCount:0};const h=1===t?null===(s=this.cN.mousePicking)||void 0===s?void 0:s.shader:null===(e=this.cN.tile)||void 0===e?void 0:e.shader;if(this.cN.tile&&h&&r&&n){const s=h,e=this.cN.tile,o={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.dt.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.dt.y)},a={x:o.x/this.fl.columns,y:o.y/this.fl.rows},l=this.ji.$i(),u={x:a.x/l.x,y:a.y/l.y};this.kD.Pd(s).KR(s,((s,h,o,a)=>{let l=!1;if(!this.kD.Iz(o,t,this,{uniforms:this.qD,idFirst:i,fillStyleSolid:"solid"===e.renderMode&&e.fillStyleSolid}))return!1;if("solid"===e.renderMode||1===t){const t=dn([{x:this.ut.x,y:this.ut.y},{x:this.ut.x+this.dt.x*this.fl.columns,y:this.ut.y},{x:this.ut.x,y:this.ut.y+this.dt.y*this.fl.rows},{x:this.ut.x+this.dt.x*this.fl.columns,y:this.ut.y+this.dt.y*this.fl.rows}],this.ji.xi());this.kD.IO(r.rectangleLocationsBuffer,0,t),this.kD.fz(o,r.rectangleLocationsBuffer,this.ji.xi(),void 0).pC(this.kD.gl.TRIANGLE_STRIP,4),l=!0}else if("paletted"===e.renderMode){if(this.kD.Cz(o,e.fillStylePaletted.lut,this.EU),this.bU.C()){const t=u.x<1?Math.max(Math.ceil(.5/u.x),1):0,i=u.y<1?Math.max(Math.ceil(.5/u.y),1):0;this.kD.tO(s("uAggregationWindowSize"),[t,i])}c=t=>{this.kD.tO(s("uTileDimensions"),["columns"===this.fl.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.fl.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const e=n.tilesInfo.get(t.tileData);if(!e)return;let h;const a=this.kD.RR();if("bilinear"===this.SU.C()){const t=(this.ji.x.pi(e.startLocationAxis.x)+u.x/2)*a,i=(this.ji.y.pi(e.startLocationAxis.y)+u.y/2)*a;h=[t,i,(this.ji.x.pi(e.startLocationAxis.x+e.sizeAxis.x)-u.x/2)*a-t,(this.ji.y.pi(e.startLocationAxis.y+e.sizeAxis.y)-u.y/2)*a-i]}else{const t=this.ji.x.pi(e.startLocationAxis.x)*a,i=this.ji.y.pi(e.startLocationAxis.y)*a;h=[t,i,this.ji.x.pi(e.startLocationAxis.x+e.sizeAxis.x)*a-t,this.ji.y.pi(e.startLocationAxis.y+e.sizeAxis.y)*a-i]}const c=dn([{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y}],this.ji.xi());this.kD.IO(r.rectangleLocationsBuffer,0,c),this.kD.aO(s("uTileBounds"),h).iO(s("uTileIntensityValues"),t.intensityDataTexture,1).fz(o,r.rectangleLocationsBuffer,this.ji.xi(),void 0).pC(this.kD.gl.TRIANGLE_STRIP,4),l=!0},r.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))}))}var c,d;return 1===t&&this.kD.Sz(o,1),l}))}const o=this.KU,a=this.cN.wireframe,l=1===t||null==a?void 0:a.shader;if(o&&a&&l&&"primitive"===a.renderMode){const{fillStyleSolid:i}=a;this.kD.Pd(l).KR(l,((s,e,r)=>((this.ji instanceof He||this.ji instanceof pa)&&this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()),this.kD.sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0).SL(s("uColor"),i.getColor()).qR(o.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).tO(s("uScaling"),[this.dt.x,this.dt.y]).tO(s("uTranslationAxis"),[this.ut.x,this.ut.y]).pC(this.kD.gl.LINES,2*o.wireframeSegmentsLength),!0)))}else if(o&&a&&l&&"triangulated"===a.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=a;this.kD.Pd(l).KR(l,((r,n,h)=>((this.ji instanceof He||this.ji instanceof pa)&&this.kD.tO(r("uScale"),this.qD.eO()).tO(r("uDisp"),this.qD.rO()),this.kD.sO(r("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(r("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(r("uRenderEffectMask"),2===t?1:0).SL(r("uColor"),e.getColor()).sO(r("uThicknessPixels"),s.getThickness()).tO(r("uRatioPxClip"),[2/this.Ki.li().x,2/this.Ki.li().y]).qR(o.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).tO(r("uScaling"),[this.dt.x,this.dt.y]).tO(r("uTranslationAxis"),[this.ut.x,this.ut.y]),i.Pd(h,!1).pC(o.wireframeSegmentsLength),!0)))}if(0===t){const i=this.DU()&&this.PU,s=this.kD,e=this.ji.x.Ci(),r=this.ji.x.ki(),n=this.ji.y.Ci(),h=this.ji.y.ki(),o=(t,i,s)=>{const o=i.position;return e<o.x&&o.x<r&&n<o.y&&o.y<h&&(s.add().zr(o).Dh(i.shadow).Eh(i.text).eh(i.angle).ih(i.font).Er(i.fill).Sh().ed(t,0),!0)},a=this.BU.pA();i&&(((t,i)=>{if(void 0===i)return;const s=t.gl;t.oO(!0),s.clearStencil(1),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),i(),s.colorMask(!0,!0,!0,!0)})(s,(()=>{this.PU.forEach((t=>{o(1,t,a)}))})),s.gl.stencilFunc(s.gl.EQUAL,1,255),s.gl.stencilOp(s.gl.KEEP,s.gl.KEEP,s.gl.KEEP),s.oO(!0));const l=this.LU.pA();if(l){const i=l.add();this.IU.forEach((s=>{i.vf(s.points,{x:"xValues",y:"yValues"}),i.Hr(s.lineStyle),i.Sh(),i.ed(t,0)}))}l.finishPlot(),i&&s.oO(!1),this.PU&&this.PU.forEach((i=>{o(t,i,a)})),a.finishPlot()}return{idCount:1}}nd(t,i,s,e,r){return{}}Wp(t){return 0===t.lengthPrimary||0===t.lengthSecondary||(this._U.push(t),Qv(this.FU.gridTiles,t,(t=>(t.hasIntensityData=!0,this.RU(t))),((t,i)=>{t.hasIntensityData=!0,t.intensityData=i})),this.EU=void 0),this}ws(){return this.kU&&(this.FU.gridTiles.forEach((t=>{t.intensityData&&t.intensityData.fill(0),t.hasIntensityData=!1})),this.Qu=!0,this.kU=!1,this.EU=void 0),this}$U(t=!1){return t&&this.LU.xA(),this.IU.length=0,this}UU(t=!1){return t&&(this.BU.xA(),this.CU&&(this.CU.dispose(),this.CU=void 0)),this.PU.length=0,this}dispose(){super.dispose();const t=this.ZU;t&&(t.gridTiles.forEach((t=>{this.kD.FD(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((()=>{})),t.gridTileSizes.length=0,this.kD.uO(t.rectangleLocationsBuffer)),this.ZU=void 0;const i=this.KU;return i&&this.kD.uO(i.wireframeCoordinatesBuffer),this.KU=void 0,this.$U(!0),this.UU(!0),this.cN={},this}rd(){return this.dispose(),this}Jd(t){const i=t,s="columns"===this.fl.dataOrder?i.x:i.y,e="columns"===this.fl.dataOrder?i.y:i.x,r="columns"===this.fl.dataOrder?this.ut.x:this.ut.y,n="columns"===this.fl.dataOrder?this.ut.y:this.ut.x;let h=(s-r)/("columns"===this.fl.dataOrder?this.dt.x:this.dt.y),o=(e-n)/("columns"===this.fl.dataOrder?this.dt.y:this.dt.x);h=Math.floor(jr(h,0,this.fl.primaryDimensionVectorsCount-1)),o=Math.floor(jr(o,0,this.fl.secondaryDimensionVectorsCount-1));const a=this.HU(h,o),l="columns"===this.fl.dataOrder?{x:this.ut.x+(h+.5)*this.dt.x,y:this.ut.y+(o+.5)*this.dt.y}:{x:this.ut.x+(o+.5)*this.dt.x,y:this.ut.y+(h+.5)*this.dt.y},u="columns"===this.fl.dataOrder?h:o,c="columns"===this.fl.dataOrder?o:h;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}Jx(t){const i=this.YU;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.fl.dataOrder?s.x:s.y,r="columns"===this.fl.dataOrder?s.y:s.x,n="columns"===this.fl.dataOrder?this.ut.x:this.ut.y,h="columns"===this.fl.dataOrder?this.ut.y:this.ut.x,o="columns"===this.fl.dataOrder?this.dt.x:this.dt.y,a="columns"===this.fl.dataOrder?this.dt.y:this.dt.x,l=jr((e-n)/o-.5,0,this.fl.primaryDimensionVectorsCount-1),u=jr((r-h)/a-.5,0,this.fl.secondaryDimensionVectorsCount-1),c=jr(Math.ceil(l)-1,0,this.fl.primaryDimensionVectorsCount-1),d=jr(Math.ceil(u)-1,0,this.fl.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.HU(c,d)},v={point:{x:c,y:d+1},value:this.HU(c,d+1)},A={point:{x:c+1,y:d},value:this.HU(c+1,d)},g={point:{x:c+1,y:d+1},value:this.HU(c+1,d+1)},y=No({x:l,y:u},f,v,A,g);if(void 0===y)return;const p=jr(Math.floor(l+.5),0,this.fl.primaryDimensionVectorsCount-1),m=jr(Math.floor(u+.5),0,this.fl.secondaryDimensionVectorsCount-1),S="columns"===this.fl.dataOrder?p:m,b="columns"===this.fl.dataOrder?m:p,x=t;return{x:x.x,y:x.y,column:S,row:b,cellValue:y}}HU(t,i){for(let s=0;s<this.FU.gridTiles.length;s+=1){const e=this.FU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){if(!e.intensityData)return 0;const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,n=s*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData[n]}}return 0}Ps(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.boundaries.max.x)||0}Ls(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.boundaries.min.x)||0}Ds(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.boundaries.max.y)||0}Bs(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.boundaries.min.y)||0}$u(){return 0}Uu(){return 0}Qx(){const t=[];return this.FU.gridTiles.forEach((i=>{if(!i.hasIntensityData||!i.intensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,r=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];r[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class $b extends gu{constructor(t,i,s,e,r,n){super(t,i,s,e,r),this.ut={x:0,y:0},this.dt={x:1,y:1},this.bU=u(void 0),this.Ep=ou.lineStyle,this.Xc=u(void 0),this.SU=u("bilinear"),this.engine=t,this.fl=n}Vp(t,i){return this.ut=t,this.dt=i,this}Np(){return{start:this.ut,step:this.dt}}Kx(t){return this.bU._(t),this}qx(){return this.bU.C()}Rp(t){return this.Ep="function"==typeof t?t(this.Ep):t,this}jp(){return this.Ep}sM(t){return this.Xc._(t),this}tj(){return this.Xc.C()}Yp(t){return this.SU._(t),this}Hp(){return this.SU.C()}}class Ub extends $b{constructor(t,i,s,e,r,n){super(t,i,s,e,r,n),this.ij=0,this.eM=[],this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i,this.zu="columns"===n.scrollDimension?a({x:this.ut.x,y:this.ut.y},{x:this.ut.x,y:this.ut.y+n.resolution*this.dt.y}):a({x:this.ut.x,y:this.ut.y},{x:this.ut.x+n.resolution*this.dt.x,y:this.ut.y}),this.sj={dataPerSegment:2048}}Sh(){this.dG||(this.ts.push({type:"DataPattern",args:{pattern:"columns"===this.fl.scrollDimension?this.dt.x>0?"ProgressiveX":"RegressiveX":this.dt.y>0?"ProgressiveY":"RegressiveY"}}),this.dG=new YS(this.ji,this));const t=this.dG.rG(this.eM,this.Xc.C());if(t>0){for(let i=0;i<t;i+=1)this.eM[0].shape.dispose().rd(),this.eM.shift();"columns"===this.fl.scrollDimension?this.zu.min.x=this.eM.length>0?this.eM[0].boundaries.min.x:sh:this.zu.min.y=this.eM.length>0?this.eM[0].boundaries.min.y:sh}this.eM.forEach((t=>t.shape.Kx(this.bU.C()).Sh()));const i=this.eM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Hr(null===(s=i.shape.EU)||void 0===s?void 0:s.min,sh)),t.max=Math.max(t.max,Hr(null===(e=i.shape.EU)||void 0===e?void 0:e.max,eh)),t}),{min:sh,max:eh});return this.eM.forEach((t=>{t.shape.EU=i})),this.Xc.o=!1,this}ed(t,i){let s=0;return this.eM.forEach((e=>{const{idCount:r}=e.shape.ed(t,i+s);void 0!==r&&(s+=r)})),{idCount:s}}ls(){if(0!==this.eM.length)return this.eM.reduce(((t,i)=>{const s=i.shape.ls();return s?{min:Math.min(s.min,t.min),max:Math.max(s.max,t.max)}:t}),{min:sh,max:eh})}nd(t,i,s,e,r){return{}}Kp(t){if(0===t.length)return this;let i=0;const s=this.sj.dataPerSegment,e=t.length;do{let r=this.eM[this.eM.length-1],n=r?s-(r.existingDataPointsCount+(r.hasJoint?1:0)):0,h=!1;if(!r||0===n){const t={columns:"columns"===this.fl.scrollDimension?s:this.fl.resolution,rows:"rows"===this.fl.scrollDimension?s:this.fl.resolution,heatmapDataType:this.fl.heatmapDataType,dataOrder:this.fl.scrollDimension};let i="columns"===this.fl.scrollDimension?{x:this.ut.x+this.dt.x*this.ij,y:this.ut.y}:{x:this.ut.x,y:this.ut.y+this.dt.y*this.ij};this.eM.length>0&&(i="columns"===this.fl.scrollDimension?{x:i.x-1*this.dt.x,y:i.y}:{x:i.x,y:i.y-1*this.dt.y},h=!0);const e=new Gb(this.qz,this.tV,this.ji,$r,[],t).Yp(this.SU.C()).Er(this.Lr).Rp(this.Ep).Vp(i,this.dt);r={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.ij,hasJoint:!1,boundaries:{min:{x:e.Ls(),y:e.Bs()},max:{x:e.Ps(),y:e.Ds()}}},this.eM.push(r),n=s-(h?1:0)}const o=e-i,a=Math.min(n,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:r.existingDataPointsCount+(r.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.fl.resolution};h&&(u.values.unshift(this.ej),u.lengthPrimary+=1,r.hasJoint=!0),r.shape.Wp(u),r.existingDataPointsCount+=a,r.existingCoordinatesCount+=a+(h?1:0),this.ej=l[l.length-1],this.ij+=a,i+=a}while(i<e);return this.zu.max="columns"===this.fl.scrollDimension?{...this.zu.max,x:this.ut.x+this.ij*this.dt.x}:{...this.zu.max,y:this.ut.y+this.ij*this.dt.y},this}Wp(t,i){if(i.length<=0)return this;const s=t,e=t+i.length-1,r=i[0].length;if(r<=0)return this;this.eM.forEach((t=>{const n=t.dataStartIndex,h=t.dataStartIndex+t.existingDataPointsCount-1;if(e<n||s>h)return;const o=Math.max(s,n),a=Math.min(e,h),l=a-o+1,u=i.slice(o-s,a-s+1),c=s-n+(t.hasJoint?1:0),d={type:"intensity",startSecondary:0,lengthSecondary:r,startPrimary:c,lengthPrimary:l,values:u};t.shape.Wp(d)}));const n=this.ij-1;if(e>n){const t=e-n,s=i.slice(-t);if(s.length<t){const i=this.ej||new Array(r).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.Kp(s)}return this}qp(){return this.ij}ws(){return this.eM.forEach((t=>{t.shape.dispose().rd()})),this.eM.length=0,this.zu="columns"===this.fl.scrollDimension?a({x:this.ut.x,y:this.ut.y},{x:this.ut.x,y:this.ut.y+this.fl.resolution*this.dt.y}):a({x:this.ut.x,y:this.ut.y},{x:this.ut.x+this.fl.resolution*this.dt.x,y:this.ut.y}),this.ij=0,this.ej=void 0,this}Vp(t,i){return super.Vp(t,i),this.eM.forEach(((s,e)=>{const r={x:t.x+("columns"===this.fl.scrollDimension?s.dataStartIndex*i.x:0),y:t.y+("rows"===this.fl.scrollDimension?s.dataStartIndex*i.y:0)};s.shape.Vp(r,i),s.boundaries={min:{x:s.shape.Ls(),y:s.shape.Bs()},max:{x:s.shape.Ps(),y:s.shape.Ds()}}})),this.eM.length>0?this.zu=bh(...this.eM.map((t=>t.boundaries))):this.zu="columns"===this.fl.scrollDimension?a({x:this.ut.x,y:this.ut.y},{x:this.ut.x,y:this.ut.y+this.fl.resolution*this.dt.y}):a({x:this.ut.x,y:this.ut.y},{x:this.ut.x+this.fl.resolution*this.dt.x,y:this.ut.y}),this}Er(t){return super.Er(t),this.eM.forEach((t=>t.shape.Er(this.Lr))),this}Rp(t){return super.Rp(t),this.eM.forEach((t=>t.shape.Rp(this.Ep))),this}Yp(t){return super.Yp(t),this.eM.forEach((i=>i.shape.Yp(t))),this}dispose(){return super.dispose(),this.eM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.eM.forEach((i=>i.shape.setVisible(t))),this}rd(){return this.eM.forEach((t=>t.shape.rd())),this}Jd(t){const i=Je(t,this.ji,this.engine.ji),s=this.eM.reduce(((s,e)=>{const r=e.shape.Jd(t);if(r){const t=Ah(Je(r,this.ji,this.engine.ji),i);if(void 0===s||t<s.distance)return{result:r,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.fl.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.fl.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.fl.scrollDimension&&t>=this.ij||"rows"===this.fl.scrollDimension&&i>=this.ij)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Jx(t){const i=Je(t,this.ji,this.engine.ji),s=this.eM.reduce(((s,e)=>{const r=e.shape.Jx(t);if(r){const t=Ah(Je(r,this.ji,this.engine.ji),i);if(void 0===s||t<s.distance)return{result:r,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.fl.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.fl.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.fl.scrollDimension&&t>=this.ij||"rows"===this.fl.scrollDimension&&i>=this.ij)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return 0}Uu(){return 0}vs(t){return super.vs(t),this.eM.forEach((i=>i.shape.vs(t))),this}}class jb extends gu{constructor(t,i,s,e,r,n){super(t,i,s,e,r),this.SU=u("bilinear"),this.Ep=ou.lineStyle,this.fl=n}Yp(t){return this.SU._(t),this}Hp(){return this.SU.C()}Rp(t){return this.Ep="function"==typeof t?t(this.Ep):t,this}jp(){return this.Ep}}class Yb extends jb{constructor(t,i,s,e,r,n){super(t,i,s,e,r,n),this.qD=new yS,this.cN={},this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStylePaletted:()=>yo(this.Lr)&&this.Lr}),this.qz=t,this.tV=i,this.kD=t.iV(),this.tV=i,this.Xx=new Gb(this.qz,t.rj,t.ji,$r,[],{columns:n.sectors,rows:n.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===n.dataOrder?"rows":"columns",Wx:this.kD.TD}).Rp(_r);const h=2*Math.PI/360,o=new Float32Array(724);let a=0;o[a+0]=0,o[a+1]=0,a+=2;for(let t=0;t<=360;t+=1){const i=t*h,s=Math.cos(i),e=Math.sin(i);o[a+0]=s,o[a+1]=e,a+=2}this.nj={vertexBuffer:this.kD.JR(o),drawMode:this.kD.gl.TRIANGLE_FAN,drawLength:362}}Sh(){const t=this.Ul(),i=this.Lr,s=this.oV.fillStyleSolid(t),e=this.oV.fillStylePaletted(t),r=s||e,n=this.SU.C(),h=this.SU.o,o=this.Hi.C(),a=this.Hi.o;return this.qD.hO(this.ji),this.Xx.Sh(),this.Xx.ZU?((t||h)&&(this.cN.fill=r?{shader:this.kD.KE(_m["2D"],_m.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:ma(this.ji),normalSource:void 0}),e&&_m.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.fl.dataOrder,lut:e.lut}),s&&_m.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.cN.mousePicking=o?{shader:this.kD.KE(_m["2D"],_m.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:ma(this.ji),normalSource:void 0}),_m.MousePicking())}:void 0),this.Wl(i),this.SU.o=!1,this.Hi.o=!1,this):this}ed(t,i){var s;const{vertexBuffer:e,drawLength:r,drawMode:n}=this.nj,h=this.Xx.ZU;if(!this.cN.fill||!h)return{};const{fillStylePaletted:o,fillStyleSolid:a}=this.cN.fill,l=1===t?null===(s=this.cN.mousePicking)||void 0===s?void 0:s.shader:this.cN.fill.shader;if(!l)return{};const u=this.ji.$e(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.fl.amplitudeStart,this.fl.amplitudeStart+(this.fl.annuli-1)*this.fl.amplitudeStep),v=Math.max(this.fl.amplitudeStart,this.fl.amplitudeStart+(this.fl.annuli-1)*this.fl.amplitudeStep);let A;return A=u.end>u.start?Math.min(v,d)-u.start:Math.max(f,c)-u.start,this.kD.Pd(l).KR(l,((s,l,u,c)=>{if(this.kD.tO(s("uScale"),this.qD.eO()).tO(s("uDisp"),this.qD.rO()).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0).tO(c("uViewportSize"),[this.qz.li().x*this.kD.RR()/(1===t?this.Ki.fl.Al:1),this.qz.li().y*this.kD.RR()/(1===t?this.Ki.fl.Al:1)]).tO(s("uScaling"),[A,A]).tO(s("uTranslationAxis"),[0,0]).qR(e,void 0,{location:l("aPos"),size:2}).sO(c("uAngleOffset"),this.ji.We()%(2*Math.PI)).sO(c("uAngleDirection"),this.ji.Ye()?1:-1).sO(c("uSectors"),this.fl.sectors).sO(c("uAnnuli"),this.fl.annuli),1===t)this.kD.kO(s("uFirstId"),i).Sz(u,1);else{if(o){const t=this.Xx.EU;this.kD.sO(s("uAmplitudeStart"),this.fl.amplitudeStart).sO(s("uAmplitudeStep"),this.fl.amplitudeStep).sO(s("uAmplitudeAxisStart"),this.ji.$e().start).sO(s("uAmplitudeAxisEnd"),this.ji.$e().end).Cz(u,o.lut,t).iO(s("uTileIntensityValues"),h.gridTiles[0].intensityDataTexture,0)}a&&this.kD.SL(s("uColor"),a.getColor())}return this.kD.pC(n,r),!0})),{idCount:1}}ls(){return this.Xx.ls()}nd(t,i,s,e,r){return{}}Wp(t){return this.Xx.Wp(t),this}ws(){return this.Xx.ws(),this}dispose(){return super.dispose(),this.Xx.dispose(),this.cN={},this.kD.uO(this.nj.vertexBuffer),this}rd(){return this.dispose(),this}Er(t){return super.Er(t),this.Xx.Er(this.Lr),this}Jd(t){const i=this.fl.amplitudeStart,s=this.fl.amplitudeStart+(this.fl.annuli-1)*this.fl.amplitudeStep,e=Math.min(i,s),r=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>r)&&(t.angle=jr(t.angle,0,360),t.amplitude=jr(t.amplitude,r,r));let n=Math.round((t.angle-0)/360*this.fl.sectors);n>=this.fl.sectors&&(n=0);const h=Math.round((t.amplitude-i)/(s-i)*(this.fl.annuli-1));return{iAnnulus:h,iSector:n,cellValue:this.HU(h,n),angle:n*(360/this.fl.sectors),amplitude:i+h*(s-i)/(this.fl.annuli-1)}}Jx(t){const i=this.fl.amplitudeStart,s=this.fl.amplitudeStart+(this.fl.annuli-1)*this.fl.amplitudeStep,e=Math.min(i,s),r=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>r)&&(t.angle=jr(t.angle,0,360),t.amplitude=jr(t.amplitude,r,r));const n=(t.angle-0)/360*this.fl.sectors,h=(t.amplitude-i)/(s-i)*(this.fl.annuli-1),o=Math.floor(n),a=Math.floor(h),l={point:{x:a,y:o},value:this.HU(a,o)},u={point:{x:a,y:o+1},value:this.HU(a,o+1)},c={point:{x:a+1,y:o},value:this.HU(a+1,o)},d={point:{x:a+1,y:o+1},value:this.HU(a+1,o+1)},f=No({x:h,y:n},l,u,c,d);if(void 0!==f)return{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}}HU(t,i){const s="annuli"===this.fl.dataOrder?t:i,e="annuli"===this.fl.dataOrder?i:t;for(let t=0;t<this.Xx.FU.gridTiles.length;t+=1){const i=this.Xx.FU.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,r=e-i.iFirstVector.secondary,n=t*i.sizeHeatmapDataVectors.secondary+r;return i.intensityData?i.intensityData[n]:0}}return 0}Ps(){return 0}Ls(){return 0}Ds(){return 0}Bs(){return 0}$u(){return 0}Uu(){return 0}}class Hb{constructor(t,i,s){this.Ss=new Set,this.hj=t=>(this.Ss.add(t),t),this.oj=t=>(this.Ss.delete(t),t.rd(),this),this.Ki=t,this._o=i,this.aj=s}rD(t){this.Ss.delete(t)&&this.Ss.add(t)}It(){for(const t of this.Ss)t.rd().dispose();this.Ki.al(this._o)}fe(){return this.Ki.fe(),this}ol(){return this._o}}class Wb extends Hb{constructor(){super(...arguments),this.lj=u(void 0),this.zl=!1}hS(t){return this.lj._(t),this}Pg(){return this.lj.C()}}class Xb extends yu{constructor(t,i,s,e,r){super(t,i,s,e,r),this.cN={fill:void 0,border:void 0},this.qD=new yS,this.zu=rh,this.uj=!1,this.cj=!1,this.dj=!1,this.fj=!1,this.kf=[],this.vj=0,this.oV=ba({rectangleStyleSolid:()=>co(this.Lr)&&this.Lr,rectangleStyleImage:()=>Mr(this.Lr)&&this.Lr,rectangleStyleRadialGradient:()=>Ee(this.Lr)&&this.Lr,rectangleStyleLinearGradient:()=>ze(this.Lr)&&this.Lr,rectangleStylePaletted:()=>yo(this.Lr)&&this.Lr,rectangleStyleIndividual:()=>vo(this.Lr)&&this.Lr,lineStyleSolid:()=>aa(this.Pr)&&this.Pr,lineStyleDashed:()=>da(this.Pr)&&this.Pr,lineStyleFilled:()=>{const t=this.Pr&&this.Pr.getFillStyle();return co(t)&&t}}),this.qz=t,this.tV=i,this.kD=t.iV(),this.lN=this.kD.JO}_a(){const t={le:i=>this.bN(t,i),vs:i=>this.xN(t,i),if:(i,s,e,r)=>this.Aj(t,i,s,e,r),tf:i=>this.gj(t,i),rb:i=>this._G(t,i),SL:i=>this.wN(t,i),yj:0,pj:0,mj:0,Sj:0,S:void 0,kG:void 0,Qi:0,_A:!0,CG:this.kf.length,bj:void 0};return this.kf.push(t),t}ws(){return this.kf.length=0,this.uj=!0,this.Ki.cs(this),this}yy(){return this.kf}Tf(t){const i=this.kf.indexOf(t);i>=0&&(this.kf.splice(i,1),this.uj=!0,this.Ki.cs(this,t))}bN(t,i){return t._A=i,this.uj=!0,t._A||this.Ki.cs(this,t),t}xN(t,i){return t.Qi=i,this.fj=!0,t}Aj(t,i,s,e,r){return t.yj=i,t.pj=s,t.mj=e,t.Sj=r,this.uj=!0,t}gj(t,i){return t.bj=!0===(null==i?void 0:i.c_x1_y1)||!0===(null==i?void 0:i.c_x1_y2)||(null==i?void 0:i.c_x2_y1)||!0===(null==i?void 0:i.c_x2_y2)?i:void 0,this.uj=!0,t}_G(t,i){return t.S=i,this.cj=!0,t}wN(t,i){return t.kG=null==i?void 0:i.toUint32(),this.dj=!0,t}Sh(){const t=this.Hi.C(),i=this.Hi.o,s=this.Ul(),e=this.fj;let r=this.uj;const n=this.cj,h=this.dj,o=this.Pr,a=this.Xl(),l=this.kf.filter((t=>t._A)),u=void 0!==this.kf.find((t=>t.bj)),c=this.ji.Vi();u&&c&&(r=!0);const d=this.oV.rectangleStyleSolid(s),f=this.oV.rectangleStylePaletted(s),v=this.oV.rectangleStyleIndividual(s),A=this.oV.rectangleStyleRadialGradient(s),g=this.oV.rectangleStyleLinearGradient(s),y=this.oV.rectangleStyleImage(s),p=d||f||g||A||y||v,m=this.oV.lineStyleSolid(a),S=this.oV.lineStyleDashed(s),b=m||S,x=this.oV.lineStyleFilled(a),M=x,w=b&&Math.max(b.getThickness(),0);if(this.qD.hO(this.ji),r&&(this.zu=bh(...l.map((t=>mh([{x:t.yj,y:t.pj},{x:t.mj,y:t.Sj}]))))),r||a&&S){const t=[],i=[],s=[];let e=0,r=0;const n=[];let h=0;if(u){const o=this.ji instanceof He?this.ji.$i():{x:1e-4,y:1e-4},a=5;this.vj=4+4*a;const u=Math.sign(this.ji.x.Pt-this.ji.x.Lt),c=Math.sign(this.ji.y.Pt-this.ji.y.Lt);l.forEach((l=>{var d,f,v,A,g;const y=Math.sign(l.mj-l.yj),p=Math.sign(l.Sj-l.pj),m={x:y===u?l.yj:l.mj,y:p===c?l.pj:l.Sj},S={x:y===u?l.mj:l.yj,y:p===c?l.Sj:l.pj},b=e,x=r,M=Math.abs((S.x-m.x)/o.x),w=Math.abs((S.y-m.y)/o.y),_=l.bj&&!0!==l.bj.skipTooSmallCheck&&Math.min(M,w)<2*l.bj.extent;t[b+0]=(l.yj+l.mj)/2,i[b+0]=(l.pj+l.Sj)/2,s[x+0]=0,s[x+1]=0,t[b+1]=Number.NaN,i[b+1]=Number.NaN,s[x+2]=0,s[x+3]=0,e+=2,r+=4;for(let o=0;o<=3;o+=1){const u=0===o||3===o?S.x:m.x,c=0===o||1===o?S.y:m.y,y=u===l.yj&&c===l.pj?null===(d=l.bj)||void 0===d?void 0:d.c_x1_y1:u===l.mj&&c===l.pj?null===(f=l.bj)||void 0===f?void 0:f.c_x2_y1:u===l.yj&&c===l.Sj?null===(v=l.bj)||void 0===v?void 0:v.c_x1_y2:null===(A=l.bj)||void 0===A?void 0:A.c_x2_y2,p=null===(g=l.bj)||void 0===g?void 0:g.extent;if(y&&p&&!_){const l=.5*o*Math.PI;for(let d=0;d<a;d+=1){const f=l+d/(a-1)*.5*Math.PI;let v,A;0===o?(v=Math.cos(f)-1,A=-1+Math.sin(f)):1===o?(v=1+Math.cos(f),A=Math.sin(f)-1):2===o?(v=1+Math.cos(f),A=1+Math.sin(f)):(v=-1+Math.cos(f),A=1+Math.sin(f)),t[e+0]=u,i[e+0]=c,s[r+0]=v*p,s[r+1]=A*p,e>1&&(n[h+0]=b,n[h+1]=e-1,n[h+2]=e,h+=3),e+=1,r+=2}}else for(let o=0;o<a;o+=1)t[e+0]=u,i[e+0]=c,s[r+0]=0,s[r+1]=0,n[h+0]=b,n[h+1]=e-1,n[h+2]=e,h+=3,e+=1,r+=2}n[h+0]=b,n[h+1]=b+2,n[h+2]=e-1,h+=3,t[e+0]=t[b+2],i[e+0]=i[b+2],s[r+0]=s[x+4],s[r+1]=s[x+5],t[e+1]=Number.NaN,i[e+1]=Number.NaN,s[r+2]=0,s[r+3]=0,e+=2,r+=4}))}else this.vj=6,l.forEach((o=>{t[e+0]=o.yj,i[e+0]=o.pj,s[r+0]=0,s[r+1]=0,t[e+1]=o.mj,i[e+1]=o.pj,s[r+2]=0,s[r+3]=0,t[e+2]=o.mj,i[e+2]=o.Sj,s[r+4]=0,s[r+5]=0,t[e+3]=o.yj,i[e+3]=o.Sj,s[r+6]=0,s[r+7]=0,t[e+4]=o.yj,i[e+4]=o.pj,s[r+8]=0,s[r+9]=0,t[e+5]=Number.NaN,i[e+5]=Number.NaN,s[r+10]=0,s[r+11]=0,n[h+0]=e+0,n[h+1]=e+1,n[h+2]=e+3,n[h+3]=e+1,n[h+4]=e+3,n[h+5]=e+2,e+=6,r+=12,h+=6}));if(this.xj=this.kD.JR(cn(t,this.ji.xi()),void 0,this.xj),this.Mj=this.kD.JR(cn(i,this.ji.xi()),void 0,this.Mj),this.wj=this.kD.JR(s,void 0,this.wj),this._j=this.kD.BO(new Uint32Array(n),this._j),this.kj=n.length,this.Cj=e-1,S){const s=new Float32Array(2*t.length);let e=0,r=0,n=0,h=t[0],o=i[0];for(let a=0;a<t.length;a+=1){const l=t[a],u=i[a];Number.isNaN(l)||(r+=Math.abs(l-h),n+=Math.abs(u-o),h=l,o=u),s[e]=r,s[e+1]=n,e+=2}this.dN=this.kD.JR(s,!1,this.dN)}this.Tj=[t,i]}if((s||a||i)&&(this.cN.fill=p?{shader:this.kD.KE(_m["2D"],d&&_m.Color({dataType:"uniform"}),g&&_m.Color({dataType:["gradient",g]}),A&&_m.Color({dataType:["gradient",A]}),f&&_m.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),v&&_m.Color({dataType:"attribute"}),y&&_m.Color({dataType:["image",y]}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),_m.AttributeHighlight),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),_m.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:g,fillStyleRadialGradient:A,fillStylePaletted:f,fillStyleImage:y,fillStyleIndividual:v}:void 0,this.cN.border=b&&M&&"number"==typeof w&&0!==w?{shader:this.kD.KE(_m["2D"],_m.Color({dataType:"uniform"}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),this.lN?_m.AliasedEdge:void 0,S&&_m.StippleTextureInstanced,_m.AttributeHighlight),geometry:DS(this.kD,w),mousePicking:t?{shader:this.kD.KE(_m["2D"],_m.MousePicking({useAttribute:!0}),_m.LineInstanced2D({axisWorldTranslation:ma(this.ji),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),S&&_m.StippleTextureInstanced,_m.AttributeHighlight)}:void 0,fillStyleSolid:x,lineStyleDashed:S,thickness:w}:void 0),e||r){const t=new Float32Array(l.length*this.vj);l.forEach(((i,s)=>{for(let e=0;e<this.vj;e+=1)t[s*this.vj+e]=i.Qi})),this.Fj=this.kD.JR(t,!0,this.Fj)}if(t){if(r||i){const t=new Float32Array(l.length*this.vj);l.forEach(((i,s)=>{for(let e=0;e<this.vj;e+=1)t[s*this.vj+e]=i.CG})),this.Ij=this.kD.JR(t,!1,this.Ij)}}else this.Ij&&(this.kD.uO(this.Ij),this.Ij=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=new Float32Array(l.length*this.vj),i={min:sh,max:eh};l.forEach(((s,e)=>{const r=void 0!==s.S?s.S:Cr;for(let i=0;i<this.vj;i+=1)t[e*this.vj+i]=r;void 0!==s.S&&(i.min=Math.min(i.min,r),i.max=Math.max(i.max,r))})),this.BG=i,this.Lj=this.kD.JR(t,!1,this.Lj)}if(h||r&&v){const t=new Uint32Array(l.length*this.vj),i=v?v.getFallbackColor().toUint32():we.toUint32();l.forEach(((s,e)=>{const r=void 0!==s.kG?s.kG:i;for(let i=0;i<this.vj;i+=1)t[e*this.vj+i]=r})),this.Pj=this.kD.JR(t,!1,this.Pj,Uint32Array)}return A?this.vV=nS(this.Ji||this.zu,this.ji,A.getPosition(),A.getExtent(),A.getShape(),this.kD.RR()):g?this.AV=hS(this.Ji||this.zu,this.ji,g.getAngle(!0),this.kD.RR()):(this.vV=void 0,this.AV=void 0),S?this.fN=this.kD.Mz(S.getPattern()):(this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this.fN=void 0),this.OG=this.kD.Tz(this,this.OG,y,void 0,r||this.ji.Vi(),((t,i,s)=>this.zG(t,i,s,l))),this.fj=!1,this.uj=!1,this.cj=!1,this.dj=!1,this.Hi.o=!1,this.Wl(this.Lr),this.Ql(o),this}ed(t,i){var s,e;const{fill:r,border:n}=this.cN,h=this.xj,o=this.Mj,a=this.wj,l=this._j,u=this.kj,c=this.Cj,d=this.Fj,f=this.Ij;if(!(d&&h&&o&&a))return{};if(r&&l&&u){const e=1===t?null===(s=r.mousePicking)||void 0===s?void 0:s.shader:r.shader;e&&this.kD.Pd(e).KR(e,((s,e,n,c)=>!!this.kD.Iz(n,t,this,{uniforms:this.qD,idFirst:i,fillStyleSolid:r.fillStyleSolid,fillStyleLinearGradient:r.fillStyleLinearGradient,fillStyleRadialGradient:r.fillStyleRadialGradient,fillStylePaletted:r.fillStylePaletted,fillStyleImage:r.fillStyleImage,fillStyleIndividual:r.fillStyleIndividual,linearGradientInfo:this.AV,radialGradientInfo:this.vV,texturedFillGLInfo:this.OG,colorBuffer:this.Pj,lookupValueBuffer:this.Lj,lookupValueRange:this.BG,highlightBuffer:d,coordsX:h,coordsY:o,coordsHighPrecision:this.ji.xi(),mousePickingOffsetBuffer:f})&&(this.kD.qR(a,void 0,{location:e("aGeoAmount"),size:2}).NO(l),this.kD.$O(u,this.kD.gl.TRIANGLES,void 0,this.kD.gl.UNSIGNED_INT),!0)))}if(n&&c){const{geometry:s,thickness:r,lineStyleDashed:l}=n,u=1===t?null===(e=n.mousePicking)||void 0===e?void 0:e.shader:n.shader;u&&this.kD.Pd(u).KR(u,((e,u,v,A)=>{if(!this.kD.Iz(v,t,this,{uniforms:this.qD,idFirst:i,fillStyleSolid:n.fillStyleSolid,highlightBuffer:d,highlightAttribDivisor:1,mousePickingOffsetBuffer:f,mousePickingOffsetAttribDivisor:1}))return!1;if(l){if(!this.fN||!this.dN)return!1;ES.rN(this.kD,v,this.dN,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0),this.kD.tO(e("uStippleCount"),[this.Ki.li().x/this.fN.kz,this.Ki.li().y/this.fN.kz]).sO(A("uStippleTextureWidthLimiter"),this.fN._z/this.fN.kz).sO(e("uStippleScale"),l.getPatternScale()).iO(e("uStippleTexture"),this.fN.wz,1)}return OS(this.kD,v,this.ji.xi(),h,"aLocation","X",1,!1,this.kD.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),OS(this.kD,v,this.ji.xi(),o,"aLocation","Y",1,!1,this.kD.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),OS(this.kD,v,!1,a,"aGeo","",2,!1,this.kD.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),ES.ed(this.qz,s,v,this.lN&&1!==t,1===t,r,c),!0}))}return{idCount:this.kf.length}}zG(t,i,s,e){if(!this.Tj)return new Float32Array;const r=Je({x:this.zu.min.x,y:this.zu.min.y},this.ji,this.Ki.ji),n=Je({x:this.zu.max.x,y:this.zu.max.y},this.ji,this.Ki.ji),h={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},o=uS(t,i,h.x,h.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=this.zu.max.x-this.zu.min.x,f=this.zu.max.y-this.zu.min.y,v=l-u,A=c-a,g=new Float32Array(2*this.Tj[0].length);let y=0;for(let t=0;t<this.Tj[0].length;t+=1){const i=this.Tj[0][t],s=this.Tj[1][t],e=u+v*((i-this.zu.min.x)/d),r=a+A*((s-this.zu.min.y)/f);g[y]=e,g[y+1]=r,y+=2}return g}nd(t,i,s,e,r){return{collectionMember:this.kf.find((s=>i+s.CG===t))}}rd(){return this.xj=this.kD.uO(this.xj),this.Mj=this.kD.uO(this.Mj),this.wj=this.kD.uO(this.wj),this.Fj&&(this.kD.uO(this.Fj),this.Fj=void 0),this.Ij&&(this.kD.uO(this.Ij),this.Ij=void 0),this.Lj&&(this.kD.uO(this.Lj),this.Lj=void 0),this.Pj&&(this.kD.uO(this.Pj),this.Pj=void 0),this.dN&&(this.kD.uO(this.dN),this.dN=void 0),this._j&&(this.kD.uO(this._j),this._j=void 0),this.cN={fill:void 0,border:void 0},this.OG=this.kD.Fz(this,this.OG),this}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}$u(){return $n(this.Pr)}Uu(){return $n(this.Pr)}}class Zb extends Wb{constructor(t,i,s){super(t,i,s),this.qz=t,this.gl=t.iV(),this.Bj=this.Ss}XR(t){const i=t instanceof uu&&t;if(!i)return rh;const s=i.Ls(),e=i.Ps(),r=i.Bs(),n=i.Ds();if(s===sh||e===eh||r===sh||n===eh)return rh;const h=i.$u(),o=i.Uu(),a=cu({min:{x:s,y:r},max:{x:e,y:n}},{x:h,y:o},i.ji),l={min:Je(a.min,i.ji,t.Ki.ji),max:Je(a.max,i.ji,t.Ki.ji)},u=this.lj.C();let c;if(u){if(c={min:{x:Math.min(l.min.x,u.x),y:Math.min(l.min.y,u.y)},max:{x:Math.max(l.max.x,u.x+u.width),y:Math.max(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return rh}else c=l;return c}Wr(t){return this.hj(new zS(this.qz,this,t,this.oj,[]))}iA(t){return this.hj(new VS(this.qz,this,t,this.oj,[]))}_y(t,i,s){return this.hj(new HS(this.qz,this,t,this.oj,s,i))}yf(t){return this.hj(new Pb(this.qz,this,t,this.oj))}no(t,i){return this.Ki.Kc&&!1!==i?this.hj(this.Ki.Kc.no(this.qz,this,t,this.oj)):this.hj(new Ob(this.qz,this,t,this.oj,[]))}od(t,i=Mu.Simple){if(i===Mu.Simple)return this.hj(new Mb(this.qz,this,t,this.oj,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ty(t){return this.hj(new bb(this.qz,this,t,this.oj,[]))}Qd(t){return this.hj(new Xb(this.qz,this,t,this.oj,[]))}Rr(t){return this.hj(new xb(this.qz,this,t,this.oj,[]))}LM(t){return this.hj(new PS(this.qz,this,t,this.oj,[]))}ef(t){return this.hj(new wS(this.qz,this,t,this.oj,[]))}iM(t,i,s){if("intensity"===s.heatmapDataType)return this.hj(new Ub(this.qz,this,t,this.oj,i,s));throw new mp("Unimplemented Heatmap Grid Static type")}Zx(t,i,s){return this.hj(new Gb(this.qz,this,t,this.oj,i,s))}Mk(t,i,s){return this.hj(new Yb(this.qz,this,t,this.oj,i,s))}Dj(t){return this.hj(new bS(this.qz,this,this.oj,[],t))}Sh(){if(this.zl){this.zl=!1;const t=Array.from(this.Ss).sort(((t,i)=>t.Gl()-i.Gl()));this.Ss.clear();for(const i of t)this.Ss.add(i)}for(const t of this.Ss)t.Sh();return this}ed(t,i,s){var e;const r=this.lj.C();let n;if(r){const t=r.x*this.gl.RR()*i,s=r.y*this.gl.RR()*i,e=Math.ceil(t),h=Math.ceil(s);n=[e,h,Math.floor(t+r.width*this.gl.RR()*i)-e,Math.floor(s+r.height*this.gl.RR()*i)-h],this.gl.ZR(n[0],n[1],n[2],n[3])}if(1!==t){for(const s of this.Ss)if(s.getVisible()){if(s.Ys){const t=s.Ys.x*this.gl.RR()*i,e=s.Ys.y*this.gl.RR()*i,r=Math.ceil(t),n=Math.ceil(e),h=Math.floor(t+s.Ys.width*this.gl.RR()*i)-r,o=Math.floor(e+s.Ys.height*this.gl.RR()*i)-n;this.gl.ZR(r,n,h,o)}s.ed(t,0),s.Ys&&n&&this.gl.ZR(n[0],n[1],n[2],n[3])}}else{let r=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const h=Array.from(this.Bj.values());for(let e=0;e<h.length;e+=1){const o=h[e];if(o.getPointerEvents()&&o.getVisible()){if(o.Ys){const t=o.Ys.x*this.gl.RR()*i,s=o.Ys.y*this.gl.RR()*i,e=Math.ceil(t),r=Math.ceil(s),n=Math.floor(t+o.Ys.width*this.gl.RR()*i)-e,h=Math.floor(s+o.Ys.height*this.gl.RR()*i)-r;this.gl.ZR(e,r,n,h)}const{idCount:h}=o.ed(t,r);o.Ys&&n&&this.gl.ZR(n[0],n[1],n[2],n[3]),void 0!==h&&(s.push({entity:o,layer:this,entityIndex:e,idFirst:r,idCount:h,idLast:r+h-1}),r+=h)}}}return this.gl.UR(!1),this}}class Jb extends oS{constructor(t){super(t)}}class Qb extends Jb{constructor(t){super(t),this.Ej="attribute";const{vertices:i,drawSize:s,drawMode:e}=Kb(t.gl);this.gD=t.JR(i),this.iN=s,this.sN=e}pC(t,i,s,e){return this.kD.qR(this.gD,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).UO(this.sN,0,this.iN,i),this}mR(){this.kD.uO(this.gD)}}const Kb=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class qb extends Jb{constructor(t,i){super(t),this.Ej="attribute",this.Rj=i;const{vertices:s,indices:e}=tx();this.gD=t.JR(s),this.tN=t.BO(e),this.iN=e.length,this.sN=t.gl.TRIANGLES}pC(t,i,s,e){return this.kD.qR(this.gD,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).NO(this.tN).sO(t.uniform("uEdgeRoundness"),this.Rj/2).jO(this.sN,this.iN,0,i),this}mR(){this.kD.uO(this.gD),this.kD.uO(this.tN)}Oj(t){return this.Rj=t,this}zj(){return this.Rj}}const tx=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let r=0;for(const n of t){const{normal:t,perpendA:h,perpendB:o}=n,a=ih.multiply(h,-1),l=ih.multiply(o,-1),u=s;i[s]={thicknessDirection:ih.addVec(t,h,o),edge:ih.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:ih.addVec(t,a,o),edge:ih.addVec(h,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:ih.addVec(t,a,l),edge:ih.addVec(h,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:ih.addVec(t,h,l),edge:ih.addVec(a,o),normal:t},s+=1,e[r+0]=d,e[r+1]=u,e[r+2]=f,e[r+3]=d,e[r+4]=c,e[r+5]=u,r+=6;const v=[{A:h,B:o},{A:a,B:o},{A:a,B:l},{A:h,B:l}];for(const e of v){e.thicknessDirection=ih.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const r=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const n of r)for(let r=0;r<8;r+=1){const h=.5*r/7,o=ih.normalize(ih.lerp(t,n.direction,h)),a=Math.PI/2-ih.angle(o,t),l=ih.addVec(ih.multiply(ih.multiply(n.direction,-1),1-Math.cos(a)),ih.multiply(ih.multiply(t,-1),1-Math.sin(a)),ih.multiply(n.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,n.vertices.push({index:u,vertex:c})}}for(let t=0;t<v.length;t+=1){const i=v[t],s=v[t<v.length-1?t+1:0],n=t%2==0?i.stripVerticesB:i.stripVerticesA,h=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<n.length;t+=1){const i=n[t-1],s=h[t-1],o=n[t],a=h[t];e[r+0]=i.index,e[r+1]=s.index,e[r+2]=a.index,e[r+3]=o.index,e[r+4]=i.index,e[r+5]=a.index,r+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],h=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of n){let r=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,r+=1;for(let e=1;e<8.5;e+=1){const n=15===e?Math.PI:e*h,a=1*Math.cos(n)*t.y,l=Math.sin(n);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const n=15===e?0:e*o,h=l*Math.cos(n)*1*t.x,u=l*Math.sin(n)*1*t.z,c={x:h,y:a,z:u},d=ih.normalize({x:h,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,r+=1}}const n=[];for(let t=1;t<=Math.ceil(3.75);t+=1)n.push(a),15===t?n.push(a+1):n.push(a+t+1),n.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let r=0;14===i?(s=l+t*u,r=l+(t+1)*u):(s=l+t*u+i+1,r=l+(t+1)*u+i+1),n.push(l+t*u+i),n.push(s),n.push(e),n.push(e),n.push(s),n.push(r)}e.push.apply(e,t.flipVertexOrder?n.reverse():n),a+=r}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},ix=(t,i)=>{let s=t.yO.pR.get(i);return s||(s=void 0!==i&&i>0?new qb(t,jr(i,0,1)):new Qb(t),t.yO.pR.set(i,s),s)};class sx extends dS{$g(t){return this.ER=this.Eg.C(),this.Eg._(t),this}Zp(t){return this.Vj=t,this}Jp(){return this.Vj}}class ex extends sx{constructor(t,i,s){super(t,i,s),this.Nj=t,this.qz=t.qz,this.kD=this.qz.iV()}}const rx=11;class nx extends ex{constructor(t,i,s){super(t,i,s),this.Vj="cull-back",this.zu=nh,this.Gj={},this.$j=[],this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStyleIndividual:()=>vo(this.Lr)&&this.Lr,fillStylePaletted:()=>yo(this.Lr)&&this.Lr}),this.Lr=ou.fillStyle,this.Eg._(Zo)}Sh(t){const i=this.$j,s=this.Lr,e=s!==ho,r=this.Uj,n=this.Ul()||this.jj!==r,h=this.DR(),o=this.Hi.C(),l=this.Hi.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=this.Yj||0;let e=t;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.Gj[i]||(e+=1)}let r,u=!1,c=!1;if(u=e!==t,c=u,r=!c&&(i.length<100?"chunks":"all"),u){const i=e*rx,s=new Float32Array(i);this.Hj&&s.set(this.Hj),this.Hj=s,this.Wj=i,this.Xj=t*rx}const d=vo(s)?s.getFallbackColor():void 0;for(const t of i){const i=t.id,s=void 0!==i&&this.Gj[i],e=[t.xCenter,t.yCenter,t.zCenter,t.xSize,t.ySize,t.zSize,t.color?t.color.r:d?d.r:void 0,t.color?t.color.g:d?d.g:void 0,t.color?t.color.b:d?d.b:void 0,t.color?t.color.a:d?d.a:void 0,t.value];if(s){for(let t=0;t<rx;t+=1)e[t]=void 0!==e[t]?e[t]:s.buffer[t];s.buffer.set(e)}else{const t=this.Xj,s=new Float32Array(this.Hj.buffer,t*Float32Array.BYTES_PER_ELEMENT,rx);s.set(e),void 0!==i&&(this.Gj[i]={location:t,buffer:s}),this.Xj+=rx}}if(c&&(this.qV=this.kD.JR(this.Hj,!0)),"all"===r)this.kD.IO(this.qV,0,this.Hj);else if("chunks"===r)for(const t of i){const i=t.id;if(void 0!==i){const t=this.Gj[i];this.kD.IO(this.qV,t.location,t.buffer)}}if(n||h||l){const t=this.oV.fillStyleSolid(n),i=this.oV.fillStyleIndividual(n),s=this.oV.fillStylePaletted(n);t||i||s?(this.Zj=ix(this.kD,this.Jj()),this.sE=this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.Eg.C().type}),_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:ma(this.ji),normalSource:this.Zj.Ej}),void 0!==this.Uj&&_m.RoundedEdges3D),this.lU=o?this.kD.KE(_m["3D"],_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:ma(this.ji),normalSource:void 0}),_m.MousePicking(),void 0!==this.Uj&&_m.RoundedEdges3D):void 0):(this.Zj=void 0,this.sE=void 0,this.lU=void 0)}if(i.length>0){const t=a({x:sh,y:sh,z:sh},{x:eh,y:eh,z:eh});for(let i=0;i<this.Xj;i+=rx){const s=this.Hj[i+0],e=this.Hj[i+3]/2,r=s-e,n=s+e,h=this.Hj[i+1],o=this.Hj[i+4]/2,a=h-o,l=h+o,u=this.Hj[i+2],c=this.Hj[i+5]/2,d=u-c,f=u+c;t.min.x=t.min.x<r?t.min.x:r,t.min.y=t.min.y<a?t.min.y:a,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>n?t.max.x:n,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.zu=t}this.Yj=e,this.$j.length=0}return this.Wl(s),this.jj=r,this.Eg.o=!1,this.Hi.o=!1,this}ed(t,i){const s=1===t?this.lU:this.sE,e=this.Zj,r=this.qV,n=this.Lr,h=this.Yj,o=this.Eg.C(),a=h||0;return s&&r&&void 0!==h&&this.kD.KR(s,((l,u,c)=>{let d=!1;const f=u("aPos"),v=u("aOffsetAxis");this.kD.Pd(s).MO(l("uScale"),this.Nj.qD.eO()).MO(l("uDisp"),this.Nj.qD.rO())._O(l("uViewProjectionMatrix"),this.Qj).sO(l("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(l("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(l("uRenderEffectMask"),2===t?1:0);const A={location:f,size:3},g={location:v,size:3},y={location:void 0,size:4},p={location:void 0,size:1};if(1!==t&&"phong"===o.type&&this.kD.MO(l("uCameraLoc"),this.Kj).MO(l("uLightLoc"),this.qj).sO(l("uAmbientReflection"),o.ambientReflection).sO(l("uSpecularReflection"),o.specularReflection).sO(l("uDiffuseReflection"),o.diffuseReflection).sO(l("uShininess"),o.shininess).SL(l("uLightColor"),o.specularColor).SL(l("uAmbientColor"),o.ambientColor),1===t)this.kD.kO(l("uFirstId"),i).Sz(c,a);else if(co(n))this.kD.SL(l("uColorDiffuse"),n.getColor());else if(vo(n)){const t=u("aColor");y.location=t}else if(yo(n)){const t=xa(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.kD.Cz(c,n.lut,t),"value"===n.lookUpProperty&&(p.location=u("aLookupValue"))}return r&&(this.kD.qR(r,1,A,g,y,p),e.pC(c,h,"phong"===o.type&&1!==t,!1),d=!0),d})),{idCount:a}}nd(t,i,s,e,r){const n=(t-i)*rx;if(!this.Hj)return{};const h=this.Hj[n+0],o=this.Hj[n+1],a=this.Hj[n+2],l=this.Hj[n+3],u=this.Hj[n+4],c=this.Hj[n+5],d=Hr(this.Hj[n+6],void 0),f=Hr(this.Hj[n+7],void 0),v=Hr(this.Hj[n+8],void 0),A=Hr(this.Hj[n+9],void 0),g=Hr(this.Hj[n+10],void 0);let y;for(const t of Object.keys(this.Gj))if(this.Gj[t].location===n){y=t;break}return{info:{dataPoint:{x:h,y:o,z:a,xSize:l,ySize:u,zSize:c,r:d,g:f,b:v,a:A,intensity:g,id:y}}}}dispose(){return super.dispose(),this.qV&&(this.kD.uO(this.qV),this.qV=void 0),this.sE=void 0,this}rd(){return this.dispose(),this}Kg(t){this.$j=kn(this.$j,t,{canReturnB:!0})}ws(){this.qV&&(this.kD.uO(this.qV),this.qV=void 0),this.Hj=void 0,this.Wj=0,this.Xj=0,this.Gj={},this.Yj=0,this.$j=[],this.zu=nh}Er(t){return this.Lr=du(this.Lr,t),this}Qn(){return this.Lr}Zg(t){return this.Uj=void 0!==t&&t>0?jr(t,0,1):void 0,this}Jj(){return this.Uj}Ps(){return this.zu.max.x}Ls(){return this.zu.min.x}Ds(){return this.zu.max.y}Bs(){return this.zu.min.y}Qe(){return this.zu.max.z}Je(){return this.zu.min.z}$u(){return 0}Uu(){return 0}Hg(){return 0}Ul(){return fu(this.jl,this.Lr)}Wl(t){this.jl=t}}class hx extends oS{constructor(t,i){super(t),this.Ej="custom",this.QV=i;const{vertices:s,drawSize:e}=this.KV();this.qV=t.JR(s),this.iN=e}Pd(t){return this.kD.qR(this.qV,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}pC(t){return this.kD.UO(this.kD.gl.TRIANGLE_STRIP,0,this.iN,t),this}KV(){const t=this.QV,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const r=2*Math.PI*e/t,n=Math.cos(r),h=Math.sin(r);for(const t of[0,1])i[s+0]=t,i[s+1]=n,i[s+2]=h,s+=3}return{vertices:i,drawSize:s/3}}mR(){this.kD.uO(this.qV)}}const ox=(t,i=16)=>{let s=t.yO.gR.get(i);return s||(s=new hx(t,i),t.yO.gR.set(i,s),s)};class ax extends ex{constructor(t,i,s){super(t,i,s),this.Vj="cull-back",this.tY=nh,this.iY=[],this.sY=!1,this.zc=ou.lineStyle,this.Eg._(Wo)}Sh(t){const i=this.sY,s=this.zc,e=this.Nc!==s,r=this.DR(),n=i;if(i){const t=fn(this.iY);this.eY=this.kD.JR(t,!1,this.eY)}if(n&&(this.tY=Sh(this.iY)),e||r){const t=8,i=aa(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.cN=void 0,co(i)&&("primitive"===e?this.cN={type:e,shader:this.kD.KE(_m["3D"],_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}),_m.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.cN={type:e,shader:this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:"uniform",shadingStyle:this.Eg.C().type}),_m.LineInstanced3D({axisWorldTranslation:ma(this.ji)})),geometry:ox(this.kD,t),fillStyle:i}))}return this.sY=!1,this.Nc=s,this.Eg.o=!1,this}ed(t,i){if(1===t)return{};const s=this.kD.gl,e=this.cN,r=this.eY,n=this.zc,h=this.Eg.C();if(e&&r&&aa(n))switch(e.type){case"instanced":{const i=.5*this.ke.Iy(n.thickness),o=e.fillStyle.getColor(),a=e.shader,l=e.geometry;this.kD.KR(a,((e,n,u)=>{this.kD.Pd(a).MO(e("uScale"),this.Nj.qD.eO()).MO(e("uDisp"),this.Nj.qD.rO())._O(e("uViewProjectionMatrix"),this.Qj).SL(e("uColorDiffuse"),o).sO(e("uOffsetWU"),i).sO(e("uIsHighlighted"),this.Qi).SL(e("uHighlightColorOffset"),2===t?_e:this.es).sO(e("uRenderEffectMask"),2===t?1:0),"phong"===h.type&&this.kD.MO(e("uCameraLoc"),this.Kj).MO(e("uLightLoc"),this.qj).sO(e("uAmbientReflection"),h.ambientReflection).sO(e("uSpecularReflection"),h.specularReflection).sO(e("uDiffuseReflection"),h.diffuseReflection).sO(e("uShininess"),h.shininess).SL(e("uLightColor"),h.specularColor).SL(e("uAmbientColor"),h.ambientColor),s.bindBuffer(s.ARRAY_BUFFER,r);const c=n("aLocationA"),d=n("aLocationB");return s.vertexAttribPointer(c,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(c,1),s.enableVertexAttribArray(c),s.vertexAttribPointer(d,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(d,1),s.enableVertexAttribArray(d),l.Pd(u).pC(this.iY.length/2),!0}));break}case"primitive":{const i=aa(n)?n.getFillStyle():void 0,h=i&&co(i)?i.getColor():void 0;if(h){const i=e.shader;this.kD.KR(i,((e,n)=>(this.kD.Pd(i).MO(e("uScale"),this.Nj.qD.eO()).MO(e("uDisp"),this.Nj.qD.rO())._O(e("uViewProjectionMatrix"),this.Qj).SL(e("uColor"),h).sO(e("uIsHighlighted"),this.Qi).SL(e("uHighlightColorOffset"),2===t?_e:this.es).sO(e("uRenderEffectMask"),2===t?1:0).qR(r,void 0,{location:n("aPos"),size:3}).pC(s.LINES,this.iY.length),!0)))}break}}return{idCount:this.iY.length}}nd(t,i,s,e,r){return{}}tc(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.iY.push(s),this.iY.push(e)}return this.sY=!0,{vs(){return this},le(){return this}}}ws(){return this.iY.length=0,this.sY=!0,this}yy(){return[]}Tf(t){}Hr(t){return this.zc="function"==typeof t?t(this.zc):t,this}Ho(){return this.zc}rd(){return this.eY&&(this.kD.uO(this.eY),this.eY=void 0),this}Ps(){return this.tY.max.x}Ls(){return this.tY.min.x}Ds(){return this.tY.max.y}Bs(){return this.tY.min.y}Qe(){return this.tY.max.z}Je(){return this.tY.min.z}$u(){const t=this.zc;return t===_r?0:t.getThickness()}Uu(){const t=this.zc;return t===_r?0:t.getThickness()}Hg(){const t=this.zc;return t===_r?0:t.getThickness()}}class lx extends oS{constructor(t,i,s){super(t),this.Ej="gpu-calculate",this.rY=i,this.nY=s;const{vertices:e,drawSize:r}=this.KV();this.qV=t.JR(e),this.iN=r}pC(t,i,s,e){return this.kD.qR(this.qV,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).UO(this.kD.gl.TRIANGLES,0,this.iN,i),this}KV(){const t=this.nY,i=this.rY,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const r=2*Math.PI/i,n=Math.PI/t,h=(t,i,h,o,a)=>{const l=i*r,u=Math.PI/2-t*n,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),v=Math.sin(u);s[e]=d,s[e+1]=v,s[e+2]=f,s[e+3]=h,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(h(s,e,1,0,0),h(s,e+1,1,1,0),h(s+1,e,0,0,1)),s<t-1&&(h(s,e+1,1,1,0),h(s+1,e+1,0,1,0),h(s+1,e,0,0,1));return e!==s.length&&Dn(0,(()=>{this.kD.ug.vl&&e>s.length&&Or.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}mR(){this.kD.uO(this.qV)}}const ux=(t,i)=>{const s=Math.round(i);s<3&&Dn(0,$r);const e=s;let r=t.yO.yR.get(Array.from(t.yO.yR.keys()).find((t=>t.sectors===s&&t.stacks===e)));return r||(r=new lx(t,s,e),t.yO.yR.set({sectors:s,stacks:e},r),r)};class cx extends ex{constructor(t,i,s,e){super(t,i,s),this.Vj="cull-back",this.eM=[],this.cN={},this.cG=new jS(this.eM,(t=>t.vertexBuffer&&this.kD.uO(t.vertexBuffer)),!0),this.Hc=[],this.Wc=0,this.Xu=[],this.hY=0,this.zu=nh,this.oY=nh,this.oV=ba({lineStyleSolid:()=>{const t=this.zc;return aa(t)&&t},lineFillSolid:()=>{const t=this.zc.getFillStyle();return co(t)&&t},lineFillPaletted:()=>{const t=this.zc.getFillStyle();return yo(t)&&t},jointStyleTriangulatedPoints:()=>ia(this.jy)&&this.jy,jointSizeTriangulated:()=>{const t=this.jy;return ia(t)&&t.getSize()},jointFillSolid:()=>{const t=this.jy.getFillStyle();return co(t)&&t},jointFillPaletted:()=>{const t=this.jy.getFillStyle();return yo(t)&&t},wireframeLineStyleSolid:()=>{const t=ia(this.jy)&&this.jy.getWireframeStyle();return aa(t)&&t},wireframeFillSolid:()=>{const t=ia(this.jy)&&this.jy.getWireframeStyle(),i=t&&t.getFillStyle();return co(i)&&i}}),this.EU=u(void 0),this.Qu=!1,this.fl=e,this.zc=ou.lineStyle,this.jy=ou.pointStyle3D,this.Eg._(Zo);const r=!0===(null==e?void 0:e.individualLookupValuesEnabled);let n,h=0;h+=3,r&&(n=h,h+=1);const o=vn(!1,!1,r,!1);this.gG={attributeOffsetCoordinate:0,individualLookupValuesEnabled:r,attributesPerVertex:h,attributeOffsetLookUpValue:n,prepareRenderData:(t,i)=>o(t,void 0,this.zc.getFillStyle())}}ls(){return this.EU.C()||this.EU.M}nd(t,i,s,e,r){return{info:{dataPoint:this.Hc[t-i]}}}Sh(t){const i=this.Qu,s=this.Xu,e=this.hY,r=e>0,n=this.zc,h=n!==this.Nc,o=this.jy,a=o!==this.aY,l=this.DR(),u=this.Hi.o,c=this.Hi.C();this.oY&&(this.zu=xh(this.zu,this.oY),this.oY=void 0),r&&(this.Hc=kn(this.Hc,s,{canReturnB:!0}),this.Wc+=e);let d=s,f=e;if(i&&(this.eM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=nh})),this.cG.sG(),d=this.Hc,f=this.Wc),f>0){const t=1e5,i=Math.floor(this.qz.lY/(this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.hs("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=jr(s,t,i);this.cG.KN(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:nh,vertexBuffer:this.kD.FO(t*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s))})),((t,i,s,e)=>{this.kD.IO(t.vertexBuffer,t.existingCoordinatesCount*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}const v=this.oV.lineStyleSolid(h),A=this.oV.lineFillSolid(h),g=this.oV.lineFillPaletted(h),y=A||g;if(h||a||l||u){const t={},i=this.oV.jointStyleTriangulatedPoints(a),s=this.oV.jointSizeTriangulated(a),e=this.oV.jointFillSolid(a),r=this.oV.jointFillPaletted(a),h=e||r,o=this.oV.wireframeLineStyleSolid(a),l=this.oV.wireframeFillSolid(a),u=this.gG.individualLookupValuesEnabled,d=n.getThickness()<0||1===n.getThickness()&&this.hs("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",f=g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";if(g&&"value"===g.getLookUpProperty()&&!u){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Or.alert(t),new Error(t)}if("primitive"===d&&y?t.lines={type:"primitive",fillStyleSolid:A,fillStylePaletted:g,shader:this.kD.KE(_m["3D"],_m.Color({dataType:f}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})),mousePicking:c?{shader:this.kD.KE(_m["3D"],_m.MousePicking({useVertexId:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}))}:void 0}:"instanced"===d&&v&&y&&(t.lines={type:"instanced",lineStyleSolid:v,fillStyleSolid:A,fillStylePaletted:g,shader:this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:f,shadingStyle:this.Eg.C().type}),_m.LineInstanced3D({axisWorldTranslation:ma(this.ji)})),geometry:dx(this.kD,v.getThickness()),mousePicking:c?{shader:this.kD.KE(_m["3D"],_m.MousePicking(),_m.LineInstanced3D({axisWorldTranslation:ma(this.ji)}))}:void 0}),t.markers=void 0,h&&i){const n=wn(i.getShape(),{cube:()=>ix(this.kD),sphere:()=>fx(this.kD,i)});t.markers={geometry:n,pointStyle:i,pointSizeNWU:"number"==typeof s&&s,pointSizeAxis:"object"==typeof s&&s,fillStyleSolid:e,fillStylePaletted:r,shader:this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:r?["lookup",r.getLookUpProperty(),r.lut]:"uniform",shadingStyle:this.Eg.C().type,wireframe:!1!==l}),_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:ma(this.ji),normalSource:n.Ej})),mousePicking:c?{shader:this.kD.KE(_m["3D"],_m.MousePicking(),_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:ma(this.ji),normalSource:void 0}))}:void 0,wireframe:o&&l&&{thickness:o.getThickness(),fillStyleSolid:l}}}this.cN=t}if(void 0===this.EU.C()&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=eh,i=sh;for(let s=0;s<this.Hc.length;s+=1){const e=this.Hc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.EU._({min:i,max:t})}return this.EU.M=void 0,this.Qu=!1,this.Xu=[],this.hY=0,this.Nc=n,this.aY=o,this.Eg.o=!1,this.Hi.o=!1,this}ed(t,i){var s,e;const r=this.kD.gl,{lines:n,markers:h}=this.cN,o=this.Eg.C(),a=this.Wc,l=1===t?null===(s=null==n?void 0:n.mousePicking)||void 0===s?void 0:s.shader:null==n?void 0:n.shader;if(n&&l&&"instanced"===n.type){const s=l,{geometry:e,lineStyleSolid:h,fillStyleSolid:a,fillStylePaletted:u}=n;this.kD.KR(s,((n,l,c)=>{let d=!1;if(this.kD.Pd(s).MO(n("uScale"),this.Nj.qD.eO()).MO(n("uDisp"),this.Nj.qD.rO())._O(n("uViewProjectionMatrix"),this.Qj).sO(n("uOffsetWU"),this.ke.Iy(h.getThickness())).sO(n("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(n("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.kD.MO(n("uCameraLoc"),this.Kj).MO(n("uLightLoc"),this.qj).sO(n("uAmbientReflection"),o.ambientReflection).sO(n("uSpecularReflection"),o.specularReflection).sO(n("uDiffuseReflection"),o.diffuseReflection).sO(n("uShininess"),o.shininess).SL(n("uLightColor"),o.specularColor).SL(n("uAmbientColor"),o.ambientColor),1===t);else if(a)this.kD.SL(n("uColorDiffuse"),a.getColor());else if(u){const t=xa(u,this,this.EU.C());if(!t&&u.lut.percentageValues)return!1;this.kD.Cz(c,u.lut,t)}const f=Qn(i);return this.eM.forEach((i=>{if(1===t){const[t,s]=f.Vs(i.existingDataPointsCount);this.kD.kO(n("uFirstId"),t).Sz(c,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=l("aLocationA"),h=l("aLocationB");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(s,1),r.enableVertexAttribArray(s),r.vertexAttribPointer(h,3,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.gG.attributeOffsetCoordinate+this.gG.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(h,1),r.enableVertexAttribArray(h),u&&"value"===u.getLookUpProperty()&&void 0!==this.gG.attributeOffsetLookUpValue&&1!==t){const t=l("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(t,1),r.enableVertexAttribArray(t)}e.Pd(c).pC(i.existingCoordinatesCount-1),d=!0})),d}))}if(n&&l&&"primitive"===n.type){const s=l,{fillStyleSolid:e,fillStylePaletted:h}=n;this.kD.KR(s,((n,o,a)=>{let l=!1;if(this.kD.Pd(s).MO(n("uScale"),this.Nj.qD.eO()).MO(n("uDisp"),this.Nj.qD.rO())._O(n("uViewProjectionMatrix"),this.Qj).sO(n("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(n("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(n("uRenderEffectMask"),2===t?1:0),1===t);else if(e)this.kD.SL(n("uColor"),e.getColor());else if(h){const t=xa(h,this,this.EU.C());if(!t&&h.lut.percentageValues)return!1;this.kD.Cz(a,h.lut,t)}const u=Qn(i);return this.eM.forEach((i=>{if(1===t){const[t,s]=u.Vs(i.existingDataPointsCount);this.kD.kO(n("uFirstId"),t).pz(a,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=o("aPos");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),r.enableVertexAttribArray(s),h&&"value"===h.getLookUpProperty()&&void 0!==this.gG.attributeOffsetLookUpValue&&1!==t){const t=o("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),r.enableVertexAttribArray(t)}this.kD.pC(r.LINE_STRIP,i.existingCoordinatesCount),l=!0})),l}))}const u=1===t?null===(e=null==h?void 0:h.mousePicking)||void 0===e?void 0:e.shader:null==h?void 0:h.shader;if(h&&u){const s=u,{geometry:e,fillStyleSolid:n,fillStylePaletted:a,pointSizeAxis:l,pointSizeNWU:c,wireframe:d}=h;this.kD.KR(s,((h,u,f,v)=>{let A=!1;if(this.kD.Pd(s).MO(h("uScale"),this.Nj.qD.eO()).MO(h("uDisp"),this.Nj.qD.rO())._O(h("uViewProjectionMatrix"),this.Qj).sO(v("uRatioNwuWu"),this.Nj.uY()).sO(h("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(h("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.kD.MO(h("uCameraLoc"),this.Kj).MO(h("uLightLoc"),this.qj).sO(h("uAmbientReflection"),o.ambientReflection).sO(h("uSpecularReflection"),o.specularReflection).sO(h("uDiffuseReflection"),o.diffuseReflection).sO(h("uShininess"),o.shininess).SL(h("uLightColor"),o.specularColor).SL(h("uAmbientColor"),o.ambientColor),1===t);else if(n)this.kD.SL(h("uColorDiffuse"),n.getColor());else if(a){const t=xa(a,this,this.EU.C());if(!t&&a.lut.percentageValues)return!1;this.kD.Cz(f,a.lut,t)}d&&1!==t&&this.kD.sO(h("uWireframeThickness"),d.thickness).SL(h("uWireframeColor"),d.fillStyleSolid.getColor()),!1!==l&&this.kD.MO(h("uOffsetAxis"),[l.x,l.y,l.z]),!1!==c&&this.kD.sO(h("uOffsetNWU"),c);const g=Qn(i);return this.eM.forEach((i=>{if(1===t){const[t,s]=g.Vs(i.existingDataPointsCount);this.kD.kO(h("uFirstId"),t).Sz(f,s)}r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer);const s=u("aPos");if(r.vertexAttribPointer(s,3,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(s,1),r.enableVertexAttribArray(s),a&&"value"===a.getLookUpProperty()&&void 0!==this.gG.attributeOffsetLookUpValue&&1!==t){const t=u("aLookupValue");r.vertexAttribPointer(t,1,r.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.kD.RO(t,1),r.enableVertexAttribArray(t)}e.pC(f,i.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(d)&&1!==t),A=!0})),A}))}return{idCount:a}}tc(t,i){Array.isArray(t)||(t=[t]),this.Xu=kn(this.Xu,t,{canReturnB:!0}),this.hY+=t.length;const s=i||Sh(t);return this.oY=this.oY?xh(this.oY,s):s,this}Hr(t){return this.zc="function"==typeof t?t(this.zc):t,this}Ho(){return this.zc}wy(t){return this.jy="function"==typeof t?t(this.jy):t,this}cY(){return this.jy}Ps(){return this.oY?Math.max(this.oY.max.x,this.zu.max.x):this.zu.max.x}Ls(){return this.oY?Math.min(this.oY.min.x,this.zu.min.x):this.zu.min.x}Ds(){return this.oY?Math.max(this.oY.max.y,this.zu.max.y):this.zu.max.y}Bs(){return this.oY?Math.min(this.oY.min.y,this.zu.min.y):this.zu.min.y}Qe(){return this.oY?Math.max(this.oY.max.z,this.zu.max.z):this.zu.max.z}Je(){return this.oY?Math.min(this.oY.min.z,this.zu.min.z):this.zu.min.z}$u(){return $n(this.zc)}Uu(){return $n(this.zc)}Hg(){return $n(this.zc)}sc(){return this.Hc}rc(){return this.Xu}oc(){return this.Wc}ac(){return this.hY}ws(){return this.Qu=!0,this.Hc.length=0,this.Wc=0,this.Xu=[],this.hY=0,this.zu=nh,this.oY=void 0,this}dispose(){return super.dispose(),this.cG.eG(),this.cN={},this}rd(){return this.dispose(),this}}const dx=(t,i)=>ox(t,i>50?20:i>20?16:i>10?12:i>5?8:6),fx=(t,i)=>{const s=i.getSize();return ux(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class vx extends ex{constructor(t,i,s){super(t,i,s),this.Vj="disabled",this.dY=!1,this.fY=!1,this.vY={x:1,y:1,z:1},this.nm={x:0,y:0,z:0},this.rm={x:0,y:0,z:0},this.AY={x:0,y:0,z:0},this.om={x:0,y:0,z:0,w:1},this.am={x:1,y:1,z:1},this.gY=me(255,255,255),this.yY=rS.projectionOrthographic(-1,1,-1,1,1,-1),this.pY=rS.projectionOrthographic(-1,1,-1,1,1,-1),this.mY=!1,this.isEulerRotation=!0,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStyleValuePalette:()=>yo(this.Lr)&&"value"===this.Lr.lookUpProperty&&this.Lr}),this.Lr=ou.fillStyle,this.Eg._(Zo)}Sh(t){var i;const s=this.DR(),e=this.Hi.C(),r=this.Hi.o,n=this.Ul();this.oV.fillStyleSolid(n);const h=this.oV.fillStyleValuePalette(n),o=this.AY,a=this.am;if(this.dY&&this.SY&&(this.qV=this.kD.JR(this.SY.vertices,void 0,this.qV),this.tN=this.kD.BO(this.SY.indices,this.tN),this.bY=this.SY.indices.length),"phong"===this.Eg.C().type&&(s||this.dY)&&(null===(i=this.SY)||void 0===i?void 0:i.normals)&&(this.xY=this.kD.JR(this.SY.normals,void 0,this.xY)),!this.MY&&h&&"value"===h.lookUpProperty&&this.SY&&(this.MY=new Float32Array(this.SY.vertices.length/3),this.fY=!0),this.MY&&this.fY&&(this.wY=this.kD.JR(this.MY,void 0,this.wY)),s||n||r){if(h&&"value"!==h.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.sE=this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:h?["lookup","value",h.lut]:"uniform",shadingStyle:this.Eg.C().type,wireframe:!1}),_m.Model3D({normalSource:"phong"===this.Eg.C().type?"attribute":void 0})),this.lU=e?this.kD.KE(_m["3D"],_m.MousePicking({useVertexId:!0}),_m.Model3D({normalSource:void 0})):void 0}if(this.mY){const t=rS.projectionOrthographic(-1,1,-1,1,1,-1);if(this.isEulerRotation)this.pY=rS.rotateXYZ(t,o),this.yY=rS.translate(t,a.x/2,a.y/2,a.z/2),this.yY=rS.rotateXYZ(this.yY,o),this.yY=rS.translate(this.yY,-a.x/2,-a.y/2,-a.z/2);else{const i=[-this.om.x,-this.om.y,-this.om.z,this.om.w];this.pY=rS.quaternionToRotationMatrix(i),this.yY=rS.translate(t,a.x/2,a.y/2,a.z/2),this.yY=rS.multiply(this.yY,this.pY),this.yY=rS.translate(this.yY,-a.x/2,-a.y/2,-a.z/2)}this.mY=!1}return this.Eg.o=!1,this.Wl(this.Lr),this.Hi.o=!1,this.dY=!1,this.fY=!1,this}ed(t,i){var s;const e=1===t?this.lU:this.sE,r=1===t,n=this.tN,h=this.qV,o=this.xY,a=this.wY,l=this.nm,u=this.rm,c=this.vY,d=this.am,f=this.yY,v=this.pY,A=this.oV.fillStyleValuePalette(!1),g=this.oV.fillStyleSolid(!1),y=this.Eg.C(),p={location:void 0,size:1};let m=this.bY;if(!(e&&h&&n&&this.SY))return{};const S=this.SY?null===(s=this.SY)||void 0===s?void 0:s.parts.length:0;if(S<1)return{};const b=this.SY.vertices.length;return this.kD.KR(e,((s,x,M,w)=>{var _;this.kD.Pd(e).MO(s("uScale"),this.Nj.qD.eO()).MO(s("uDisp"),this.Nj.qD.rO())._O(s("uViewProjectionMatrix"),this.Qj).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),this.es).sO(s("uRenderEffectMask"),2===t?1:0)._O(s("uModelRotation"),f).MO(s("uModelScale"),[c.x,c.y,c.z]).MO(s("uLocationAxis"),[l.x,l.y,l.z]).MO(s("uModelAlignment"),[u.x,u.y,u.z]).MO(s("uModelSize"),[d.x,d.y,d.z]).qR(h,0,{location:M.attribute("aGeoPos"),size:3}).NO(n);let k=!1;if(r)this.kD.kO(s("uFirstId"),i).pz(M,b);else{if(this.Lr===ho&&b<1)return!1;if(g)this.kD.SL(s("uColorDiffuse"),g.getColor());else if(A){if(!a)return!1;const t=A.getPalette();p.location=x("aLookupValue"),this.kD.Cz(M,t,void 0).qR(a,void 0,p),k=!0}}"phong"!==y.type||r||(this.kD.MO(s("uCameraLoc"),this.Kj).MO(s("uLightLoc"),this.qj).sO(s("uAmbientReflection"),y.ambientReflection).sO(s("uSpecularReflection"),y.specularReflection).sO(s("uDiffuseReflection"),y.diffuseReflection).sO(s("uShininess"),y.shininess).SL(s("uLightColor"),y.specularColor).SL(s("uAmbientColor"),y.ambientColor)._O(s("uModelRotationNormals"),v),o&&this.kD.qR(o,void 0,{location:M.attribute("aNormal"),size:3}));let C=!1;for(let t=0;t<S;t+=1){m=0;let i=this.gY,e=0,n=0,h=0,o=!0;this.SY&&this.SY.parts&&this.SY.parts[t].material&&(i=this.SY.parts[t].material.specular,m=this.SY.parts[t].count,n=this.SY.parts[t].count,h=this.SY.parts[t].offset,o=this.SY.parts[t].useIndexBuffer,e=this.SY.parts[t].indexStart,r||g||k||this.kD.SL(s("uColorDiffuse"),this.SY.parts[t].material.diffuse)),(m>0||n>0)&&("phong"!==y.type||r||(this.kD.SL(s("uLightColor"),i),v?this.kD._O(s("uModelRotationNormals"),v):this.kD.SL(s("uLightColor"),y.specularColor)),o?this.kD.$O(m,this.kD.gl.TRIANGLES,e,(null===(_=this.SY)||void 0===_?void 0:_.indices)instanceof Uint32Array?this.kD.gl.UNSIGNED_INT:this.kD.gl.UNSIGNED_SHORT):this.kD.pC(this.kD.gl.TRIANGLES,n,h),C=!0)}return C})),{idCount:b}}_Y(t){if(this.kY)return this.kY;const i=this.nm,s=this.rm,e=this.vY,r=this.am,n=this.AY,h=this.om,o=this.Nj.BS(i),a=[],l=rS.projectionOrthographic(-1,1,-1,1,1,-1);let u;if(this.isEulerRotation)u=rS.translate(l,r.x/2,r.y/2,r.z/2),u=rS.rotateXYZ(u,n),u=rS.translate(u,-r.x/2,-r.y/2,-r.z/2);else{const t=[-h.x,-h.y,-h.z,h.w];u=rS.translate(l,r.x/2,r.y/2,r.z/2),u=rS.multiply(u,rS.quaternionToRotationMatrix(t)),u=rS.translate(u,-r.x/2,-r.y/2,-r.z/2)}const c=(s.x+1)*(r.x/2),d=(s.y+1)*(r.y/2),f=(s.z+1)*(r.z/2);for(let i=0;i<t.vertices.length;i+=3){const s=rS.multiply(u,[t.vertices[i],t.vertices[i+1],t.vertices[i+2],1]),r={x:o.x+(s[0]-c)*e.x,y:o.y+(s[1]-d)*e.y,z:o.z+(s[2]-f)*e.z};a.push(r)}return this.kY=a,this.kY}gm(t){const i=this.SY;if(!i)return;const s=this._Y(i),e=t(s);0!==e.length&&(e.length!==s.length&&!0===this.Ki.fl.vl&&Or.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.MY=e instanceof Float32Array?e:new Float32Array(e),this.fY=!0)}nd(t,i,s,e,r){return{info:{iVertex:t-i}}}fm(t,i){const s=this.SY;if(!s||void 0===(null==t?void 0:t.iVertex))return;if(s.indices.length>0){const e=[];for(let i=0;i<s.indices.length;i+=3){const r=s.indices[i],n=s.indices[i+1],h=s.indices[i+2];r!==t.iVertex&&n!==t.iVertex&&h!==t.iVertex||e.push([r,n,h])}const r=this._Y(s),n=this.Ki.Gr(i.clientX,i.clientY),h=e.map((t=>t.map((t=>{const i={x:s.vertices[3*t],y:s.vertices[3*t+1],z:s.vertices[3*t+2]},e=r[t],h=this.Nj.DS(e),o=this.Nj.Py(h);return{index:t,vertex:i,world:e,axis:h,dist:o?Ah(o,n):sh}})))).flat();h.sort(((t,i)=>t.dist-i.dist));const o=h[0];if(!o)return;const a=this.MY?this.MY[o.index]:void 0;return{coordModel:o.vertex,coordAxis:o.axis,index:o.index,value:a}}const e=t.iVertex,r=this.MY?this.MY[e]:void 0,n={x:s.vertices[3*e],y:s.vertices[3*e+1],z:s.vertices[3*e+2]},h=this._Y(s)[e];return{coordModel:n,coordAxis:this.Nj.DS(h),index:e,value:r}}dispose(){return super.dispose(),this.qV&&(this.kD.uO(this.qV),this.qV=void 0),this.tN&&(this.kD.uO(this.tN),this.tN=void 0),this.xY&&(this.kD.uO(this.xY),this.xY=void 0),this.wY&&(this.kD.uO(this.wY),this.wY=void 0),this.sE=void 0,this.lU=void 0,this.SY=void 0,this.MY=void 0,this}rd(){return this.dispose(),this}vm(t){return this.SY=t,this.dY=!0,this.am=t.modelSize,this}Er(t){return this.Lr=du(this.Lr,t),this}Qn(){return this.Lr}ym(t){return this.vY=t,this.kY=void 0,this}eO(){return this.vY}pm(t){return this.nm=t,this.kY=void 0,this}Sm(t){return this.rm=t,this.kY=void 0,this}bm(t){return this.AY=t,this.mY=!0,this.isEulerRotation=!0,this.kY=void 0,this}xm(t){return this.om=t,this.mY=!0,this.isEulerRotation=!1,this.kY=void 0,this}Mm(t){return this.Vj=t,this}wm(){return this.Vj}Ps(){return eh}Ls(){return sh}Ds(){return eh}Bs(){return sh}Qe(){return eh}Je(){return sh}$u(){return 0}Uu(){return 0}Hg(){return 0}Ul(){return fu(this.jl,this.Lr)}Wl(t){this.jl=t}}class Ax extends ex{constructor(t,i,s,e){super(t,i,s),this.Vj="cull-back",this.eM=[],this.cG=new jS(this.eM,(t=>t.vertexBuffer&&this.kD.uO(t.vertexBuffer)),!1),this.Hc=[],this.Wc=0,this.Xu=[],this.hY=0,this.zu=nh,this.oY=nh,this.Qu=!1,this.oV=ba({fillStyleSolid:()=>{const t=this.Wy.getFillStyle();return co(t)&&t},fillStyleIndividual:()=>{const t=this.Wy.getFillStyle();return vo(t)&&t},fillStylePalette:()=>{const t=this.Wy.getFillStyle();return yo(t)&&t},triangulatedPointStyle:()=>{const t=this.Wy;return ia(t)&&t},wireframeLineStyleSolid:()=>{const t=ia(this.Wy)&&this.Wy,i=t&&t.getWireframeStyle();return aa(i)&&i},wireframeFillStyleSolid:()=>{const t=ia(this.Wy)&&this.Wy,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return co(s)&&s}}),this.EU=u(void 0),this.fl=e,this.Wy=ou.pointStyle3D,this.Eg._(Zo);const r=!0===(null==e?void 0:e.individualPointColorEnabled),n=!0===(null==e?void 0:e.individualPointSizeEnabled),h=!0===(null==e?void 0:e.individualLookupValuesEnabled),o=!0===(null==e?void 0:e.individualPointSizeAxisEnabled);let a,l,c,d,f=0;f+=3,r&&(a=f,f+=4),n&&(l=f,f+=1),h&&(c=f,f+=1),o&&(d=f,f+=3);const v=vn(r,n,h,o);this.gG={individualPointColorEnabled:r,individualPointSizeEnabled:n,individualLookupValuesEnabled:h,individualPointSizeAxisEnabled:o,attributesPerVertex:f,attributeOffsetCoordinate:0,attributeOffsetColor:a,attributeOffsetSize:l,attributeOffsetLookUpValue:c,attributeOffsetPointSize3D:d,prepareRenderData:(t,i)=>v(t,this.Wy,this.Wy.fillStyle)}}ls(){return this.EU.C()||this.EU.M}nd(t,i,s,e,r){return{info:{dataPoint:this.Hc[t-i]}}}Sh(t){const i=this.Qu,s=this.Xu,e=this.hY,r=e>0,n=this.Wy,h=this.Wy!==this.CY,o=this.Hi.C(),a=this.Hi.o,l=this.DR();this.oY&&(this.zu=xh(this.zu,this.oY),this.oY=void 0),r&&(this.Hc=kn(this.Hc,s,{canReturnB:!0}),this.Wc+=e);let u=s,c=e;if(i&&(this.eM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=nh})),this.cG.sG(),u=this.Hc,c=this.Wc),c>0){const t=Math.floor(this.qz.lY/(this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=jr(c,1e5,t);this.cG.KN(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:nh,vertexBuffer:this.kD.FO(t*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s))})),((t,i,s)=>{this.kD.IO(t.vertexBuffer,t.existingCoordinatesCount*this.gG.attributesPerVertex,this.gG.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=n.getFillStyle(),f=this.oV.fillStyleSolid(h),v=this.oV.fillStyleIndividual(h),A=this.oV.fillStylePalette(h),g=d===ho&&ho;if(h||l||a){let t;const i=n.getSize(),s=this.gG.individualPointColorEnabled,e=this.gG.individualPointSizeEnabled,r=this.gG.individualPointSizeAxisEnabled,a=this.gG.individualLookupValuesEnabled;if(v&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Or.alert(t),new Error(t)}if(A&&"value"===A.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Or.alert(t),new Error(t)}const l=this.oV.wireframeLineStyleSolid(h),u=this.oV.wireframeFillStyleSolid(h);if(f||v||A||u){const s=v?"attribute":A?["lookup",A.getLookUpProperty(),A.lut]:"uniform",h=e&&"number"==typeof i,a=r&&"object"==typeof i,c=h||a?"attribute":"uniform";if(ia(n)){const r=wn(n.getShape(),{cube:()=>ix(this.kD),sphere:()=>gx(this.kD,n,e)});t={type:"instanced",shader:this.kD.KE(_m["3D"],_m.ColorShaded3D({dataType:s,shadingStyle:this.Eg.C().type,wireframe:!1!==u}),_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:ma(this.ji),normalSource:r.Ej})),pointStyle:n,useIndividualPointSize:h,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:v,fillStylePaletted:A,fillStyleEmpty:g,mousePickingShader:o&&this.kD.KE(_m["3D"],_m.MousePicking(),_m.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:ma(this.ji),normalSource:void 0})),geometry:r,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else ra(n)&&"number"==typeof i&&(t={type:"primitive",shader:this.kD.KE(_m["3D"],_m.PointSize(c),_m.Color({dataType:s}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0})),pointStyle:n,pointSizePixels:i,useIndividualPointSize:h,fillStyleSolid:f,fillStyleIndividual:v,fillStylePaletted:A,mousePickingShader:o&&this.kD.KE(_m["3D"],_m.PointSize(c),_m.MousePicking({useVertexId:!0}),_m.VertexLocation({axisWorldTranslation:ma(this.ji),normalSource:void 0}))})}this.cN=t}if(void 0===this.EU.C()&&A&&"value"===A.lookUpProperty&&A.lut.percentageValues){let t=eh,i=sh;for(let s=0;s<this.Hc.length;s+=1){const e=this.Hc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.EU._({min:i,max:t})}return this.EU.M=void 0,this.Qu=!1,this.Xu=[],this.hY=0,this.CY=n,this.Eg.o=!1,this}ed(t,i){const s=this.kD.gl,e=this.cN,r=this.Wc;if(!e)return{};const n=1===t?e.mousePickingShader:e.shader;if(!n)return{};const h=this.Eg.C(),{fillStyleSolid:o,fillStylePaletted:a,useIndividualPointSize:l}=e,u="instanced"===e.type&&e.useIndividualPointSize3D,c="instanced"===e.type&&e.wireframe;return this.kD.KR(n,((r,d,f,v)=>{let A=!1;if(this.kD.Pd(n).MO(r("uScale"),this.Nj.qD.eO()).MO(r("uDisp"),this.Nj.qD.rO())._O(r("uViewProjectionMatrix"),this.Qj).sO(r("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(r("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(r("uRenderEffectMask"),2===t?1:0),"instanced"===e.type){const{pointSizeAxis:t,pointSizeNWU:i}=e;!1!==t&&!1===u&&this.kD.MO(r("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===l&&this.kD.sO(r("uOffsetNWU"),i).sO(v("uRatioNwuWu"),this.Nj.uY())}else if("primitive"===e.type){const{pointSizePixels:t}=e;l||this.kD.sO(r("uPointSize"),t).sO(r("uDevicePixelRatio"),this.kD.RR())}if(1===t);else if("instanced"===e.type?("phong"===h.type&&this.kD.MO(r("uCameraLoc"),this.Kj).MO(r("uLightLoc"),this.qj).sO(r("uAmbientReflection"),h.ambientReflection).sO(r("uSpecularReflection"),h.specularReflection).sO(r("uDiffuseReflection"),h.diffuseReflection).sO(r("uShininess"),h.shininess).SL(r("uLightColor"),h.specularColor).SL(r("uAmbientColor"),h.ambientColor),c&&this.kD.sO(r("uWireframeThickness"),c.thickness).SL(r("uWireframeColor"),c.fillStyleSolid.getColor()),o&&this.kD.SL(r("uColorDiffuse"),o.getColor()),e.fillStyleEmpty&&this.kD.SL(r("uColorDiffuse"),_e)):"primitive"===e.type&&o&&this.kD.SL(r("uColor"),o.getColor()),a){const t=xa(a,this,this.EU.C());if(!t&&a.lut.percentageValues)return!1;this.kD.Cz(f,a.lut,t)}const g=Qn(i);return this.eM.forEach((i=>{if(1===t){const[t,s]=g.Vs(i.existingDataPointsCount);this.kD.kO(r("uFirstId"),t),"instanced"===e.type?this.kD.Sz(f,s):this.kD.pz(f,s)}s.bindBuffer(s.ARRAY_BUFFER,i.vertexBuffer);const n=d("aPos");if(s.vertexAttribPointer(n,3,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.kD.RO(n,1),s.enableVertexAttribArray(n),e.fillStyleIndividual&&void 0!==this.gG.attributeOffsetColor&&1!==t){const t=d("aColor");s.vertexAttribPointer(t,4,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.kD.RO(t,1),s.enableVertexAttribArray(t)}if(l&&void 0!==this.gG.attributeOffsetSize){"instanced"===e.type?this.kD.sO(v("uRatioNwuWu"),this.Nj.uY()):"primitive"===e.type&&this.kD.sO(r("uDevicePixelRatio"),this.kD.RR());const t=d("instanced"===e.type?"aOffsetNWU":"aPointSize");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.kD.RO(t,1),s.enableVertexAttribArray(t)}if(u&&void 0!==this.gG.attributeOffsetPointSize3D&&"instanced"===e.type){const t=d("aOffsetAxis");s.vertexAttribPointer(t,3,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.kD.RO(t,1),s.enableVertexAttribArray(t)}if(e.fillStylePaletted&&"value"===e.fillStylePaletted.getLookUpProperty()&&void 0!==this.gG.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.gG.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.gG.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.kD.RO(t,1),s.enableVertexAttribArray(t)}"instanced"===e.type?(e.geometry.pC(f,i.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(c)&&1!==t),A=!0):"primitive"===e.type&&(this.kD.pC(s.POINTS,i.existingCoordinatesCount),A=!0)})),A})),{idCount:r}}tc(t,i){Array.isArray(t)||(t=[t]),this.Xu=kn(this.Xu,t,{canReturnB:!0}),this.hY+=t.length;const s=i||Sh(t);return this.oY=this.oY?xh(this.oY,s):s,this.EU._(void 0),this}Xy(t){return this.Wy="function"==typeof t?t(this.Wy):t,this}TY(){return this.Wy}Ps(){return this.oY?Math.max(this.oY.max.x,this.zu.max.x):this.zu.max.x}Ls(){return this.oY?Math.min(this.oY.min.x,this.zu.min.x):this.zu.min.x}Ds(){return this.oY?Math.max(this.oY.max.y,this.zu.max.y):this.zu.max.y}Bs(){return this.oY?Math.min(this.oY.min.y,this.zu.min.y):this.zu.min.y}Qe(){return this.oY?Math.max(this.oY.max.z,this.zu.max.z):this.zu.max.z}Je(){return this.oY?Math.min(this.oY.min.z,this.zu.min.z):this.zu.min.z}$u(){const t=this.Wy,i=t.getSize();return"number"==typeof i?ia(t)?i/2:ra(t)?5:0:0}Uu(){return this.$u()}Hg(){return this.$u()}sc(){return this.Hc}rc(){return this.Xu}oc(){return this.Wc}ac(){return this.hY}ws(){return this.Qu=!0,this.Hc.length=0,this.Wc=0,this.Xu=[],this.hY=0,this.zu=nh,this.oY=void 0,this.EU._(void 0),this}dispose(){return super.dispose(),this.cG.eG(),this.cN=void 0,this}rd(){return this.dispose(),this}}const gx=(t,i,s)=>{const e=i.getSize();return ux(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class yx extends ex{constructor(t,i,s,e){super(t,i,s),this.Vj="disabled",this.Lr=ou.fillStyle,this.Ep=ou.lineStyle,this.SU=u("bilinear"),this.FY=new Qo,this.IY=new Jo.Simple,this.LY=[],this.PY=void 0,this.cN={},this.BY=!1,this.oV=ba({fillStyleSolid:()=>co(this.Lr)&&this.Lr,fillStylePaletted:()=>yo(this.Lr)&&this.Lr,wireframeStyleLine:()=>aa(this.Ep)&&this.Ep,wireframeStyleFill:()=>{const t=this.Ep&&this.Ep.getFillStyle();return co(t)&&t}}),this.MU=u(void 0),this.ut={x:0,z:0},this.dt={x:1,z:1},this.xU=!1,this.Eg._(Wo);const r="columns"===e.dataOrder?e.columns:e.rows,n="columns"===e.dataOrder?e.rows:e.columns;this.fl={...e,primaryDimensionVectorsCount:r,secondaryDimensionVectorsCount:n},this.DY=new Array(this.fl.primaryDimensionVectorsCount).fill(void 0),this.Xx=new Gb(this.qz,t.qz.rj,t.Ki.ji,$r,[],this.fl).Rp(_r),this.Xx.TU=Wv;const h=this.Xx.FU.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,r=t.iFirstUniqueVector,n=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),h={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:r,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:n,normalmapSize:h}})),o=this.Xx.FU.gridTileSizes.map((t=>{const i=h.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),a=h.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,r=s*e;return r>t.cells?{primary:s,secondary:e,cells:r}:t}),{primary:0,secondary:0,cells:0});this.EY={gridTiles:h,gridTileSizes:o,largestGridTileSize:a},this.Vp(this.ut,this.dt),this.wU=new Vb,this.LU=[]}Gp(t){return this.MU._(t),this}$p(){return this.MU.C()}nd(t,i,s,e,r){const n=t-i,h=n%(this.fl.secondaryDimensionVectorsCount-1),o=Math.floor(n/(this.fl.secondaryDimensionVectorsCount-1)),a="columns"===this.fl.dataOrder?o:h,l="rows"===this.fl.dataOrder?o:h,u=[{x:this.ut.x+a*this.dt.x,z:this.ut.z+l*this.dt.z,y:this.RY(o,h),intensity:this.OY(o,h),column:"columns"===this.fl.dataOrder?o:h,row:"columns"===this.fl.dataOrder?h:o},{x:this.ut.x+(a+("columns"===this.fl.dataOrder?1:0))*this.dt.x,z:this.ut.z+(l+("rows"===this.fl.dataOrder?1:0))*this.dt.z,y:this.RY(o+1,h),intensity:this.OY(o+1,h),column:"columns"===this.fl.dataOrder?o+1:h,row:"columns"===this.fl.dataOrder?h:o+1},{x:this.ut.x+(a+1)*this.dt.x,z:this.ut.z+(l+1)*this.dt.z,y:this.RY(o+1,h+1),intensity:this.OY(o+1,h+1),column:"columns"===this.fl.dataOrder?o+1:h+1,row:"columns"===this.fl.dataOrder?h+1:o+1},{x:this.ut.x+(a+("columns"===this.fl.dataOrder?0:1))*this.dt.x,z:this.ut.z+(l+("rows"===this.fl.dataOrder?0:1))*this.dt.z,y:this.RY(o,h+1),intensity:this.OY(o,h+1),column:"columns"===this.fl.dataOrder?o:h+1,row:"columns"===this.fl.dataOrder?h+1:o}],c=u.map((t=>this.Nj.Py(t))).map((t=>void 0===t?sh:Ah(t,{x:e,y:r}))).map(((t,i)=>({i:i,dist:t})));return c.sort(((t,i)=>t.dist-i.dist)),{info:{dataPoint:{...u[c[0].i]}}}}RY(t,i){for(let s=0;s<this.EY.gridTiles.length;s+=1){const e=this.EY.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,n=s*e.sizeHeatmapDataVectors.secondary+r;return e.heightmapData[n]}}return 0}OY(t,i){if(this.Xx.kU)for(let s=0;s<this.Xx.FU.gridTiles.length;s+=1){const e=this.Xx.FU.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,r=i-e.iFirstVector.secondary,n=s*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData?e.intensityData[n]:void 0}}}zY(t){this.VY=t,this.PY=void 0}Vp(t,i){this.xU=this.xU||this.ut!=t||this.dt!=i,this.ut=t,this.dt=i;const s=this.fl,e={min:{x:Math.min(this.ut.x,this.ut.x+(s.columns-1)*this.dt.x),z:Math.min(this.ut.z,this.ut.z+(s.rows-1)*this.dt.z)},max:{x:Math.max(this.ut.x,this.ut.x+(s.columns-1)*this.dt.x),z:Math.max(this.ut.z,this.ut.z+(s.rows-1)*this.dt.z)}},r=new Map;return this.EY.gridTiles.forEach((t=>{const i="columns"===this.fl.dataOrder?{x:this.dt.x*(t.sizeHeatmapDataVectors.primary-1),z:this.dt.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.dt.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.dt.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.fl.dataOrder?{x:this.ut.x+this.dt.x*t.iFirstVector.primary,z:this.ut.z+this.dt.z*t.iFirstVector.secondary}:{x:this.ut.x+this.dt.x*t.iFirstVector.secondary,z:this.ut.z+this.dt.z*t.iFirstVector.primary};r.set(t,{sizeAxis:i,startLocationAxis:s})})),this.YU={NY:e,tilesInfo:r},this}Np(){return{start:this.ut,step:this.dt,end:{x:this.ut.x+this.dt.x*this.fl.columns,z:this.ut.z+this.dt.z*this.fl.rows}}}GU(t,i){if(!this.EY)return this;if(!t)return this.GY(),this;if(!i)return this.LU.forEach((t=>{t.Qj=this.Qj,t.Sh(!0)})),this;if(!this.EY.gridTiles)return this;if(!this.YU)return this;const s=this.YU.NY.min.x,e=this.YU.NY.min.z,r=this.YU.NY.max.x,n=this.YU.NY.max.z;if(null==s||null==e||null==r||null==n)return this;const h=this.fl.columns,o=this.fl.rows,a=(r-s)/(h-1),l=(n-e)/(o-1),u=new Array(h).fill(0,0,h).map(((t,i)=>s+i*a)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l));let d=[];const f=[];t.levels.forEach((t=>{d.push(t.value),f.push({level:t.value,width:t.strokeStyle.getThickness(),fill:t.strokeStyle.getFillStyle()})}));const v=(t,i)=>"rows"==this.fl.dataOrder?i:t,A=(t,i)=>"rows"==this.fl.dataOrder?t:i;let g,y;const p=r-s,m=n-e;switch(t.valueSource){case"y":g=(t,i)=>this.RY(v(t,i),A(t,i)),y=(t,i,s,e)=>{i.push({x:t.ax[s],y:e,z:t.ay[s]})};break;case"intensity":g=(t,i)=>this.OY(v(t,i),A(t,i)),y=(t,i,r,n)=>{const u=t.ax[r],c=t.ay[r],d=Math.floor((u-s)/p*(h-1)),f=Math.floor((c-e)/m*(o-1)),g=s+d*a,y=e+f*l,S=No({x:u,y:c},{point:{x:g,y:y},value:this.RY(v(d,f),A(d,f))},{point:{x:g,y:y+l},value:this.RY(v(d,f+1),A(d,f+1))},{point:{x:g+a,y:y},value:this.RY(v(d+1,f),A(d+1,f))},{point:{x:g+a,y:y+l},value:this.RY(v(d+1,f+1),A(d+1,f+1))});i.push({x:u,y:S,z:c})}}return this.wU.pU(g,u,c,d),this.GY(),this.wU.mU.forEach((i=>{var s,e;const r=[];i.ax.forEach(((t,s)=>{y(i,r,s,i.level)})),i.ax[0]==i.ax[i.ax.length-1]&&i.ay[0]==i.ay[i.ay.length-1]&&y(i,r,i.ax.length-1,i.level);const n=null===(s=t.levels.find((t=>t.value==i.level)))||void 0===s?void 0:s.strokeStyle;if(0<this.LU.length){const t=this.LU.find((t=>t.Ho()===n));if(t)return t.tc({x:Number.NaN,y:Number.NaN,z:Number.NaN}),void t.tc(r)}const h=n.getThickness(),o=new cx(this.Nj,this.qi,this.ts,void 0);1<h?o.wy(new ta({shape:"sphere",size:h,fillStyle:null===(e=f.find((t=>t.level==i.level)))||void 0===e?void 0:e.fill})):o.wy(this.FY),o.Hr(n),o.tc(r),o.$g(this.IY),this.LU.push(o)})),this}Sh(t){const i=this.LY,s=fu(this.jl,this.Lr),e=this.oV.fillStyleSolid(s),r=this.oV.fillStylePaletted(s),n=this.Ep,h=this.Ep!==this.XU,o=this.oV.wireframeStyleLine(h),a=this.oV.wireframeStyleFill(h),l=!1!==a,u=this.SU.o,c=this.SU.C(),d=this.Eg.C(),f=this.DR(),v=this.Hi.C();this.Xx.Sh();const A=this.Xx.ZU;if(!A)return this;this.$Y=this.$Y||this.UY(A);const g=this.$Y;this.jY(g);const y=Xv(i,g,void 0,(t=>t.sizeGeometryDataVectors));if(y.size>0&&(qv(this.kD,y,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.BY=!0),"phong"===d.type&&(y.size>0||f)){const t=this.kD.gl,i=this.kD.KE(_m["2D"],_m.DrawToNormalTexture({flipXZ:"rows"===this.fl.dataOrder,vertexIdSource:this.kD.yz(),normalTextureType:this.kD.gl2?"uint":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN}));g.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var r;const n=e.normalmapTexture,h=null===(r=this.YU)||void 0===r?void 0:r.tilesInfo.get(e.tileData);if(!n||!h)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.kD.tz.ed((()=>{this.kD.KR(i,((r,n,o,l)=>(this.kD.Pd(i).pz(o,a).tO(r("uTileDimensionsXZ"),["columns"===this.fl.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.fl.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).xO(r("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).tO(r("uTileStartLocationAxisXZ"),[h.startLocationAxis.x,h.startLocationAxis.z]).tO(r("uTileSizeAxisXZ"),[h.sizeAxis.x,h.sizeAxis.z]).iO(r("uHeightmapTexture"),e.heightmapDataTexture,1).pC(t.POINTS,a),!0)))}),n,o,void 0,this.Ki.sl(),0)}))}))}const p=this.cN;if(s||h||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?p.surface={shader:this.kD.KE(_m["3D"],_m.SurfaceGrid({axisWorldTranslation:ma(this.ji),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.fl.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.kD.gl2?"uint":"ubyte",intensityTextureType:this.kD.WE?"float":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:r&&"value"===r.getLookUpProperty()?p.surface={shader:this.kD.KE(_m["3D"],_m.SurfaceGrid({axisWorldTranslation:ma(this.ji),fillColor:["lookup","value",r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.fl.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.kD.gl2?"uint":"ubyte",intensityTextureType:this.kD.WE?"float":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:r},wireframe:t}:r?p.surface={shader:this.kD.KE(_m["3D"],_m.SurfaceGrid({axisWorldTranslation:ma(this.ji),fillColor:["lookup",r.getLookUpProperty(),r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.fl.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.kD.gl2?"uint":"ubyte",intensityTextureType:this.kD.WE?"float":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:r},wireframe:t}:l&&(p.surface={shader:this.kD.KE(_m["3D"],_m.SurfaceGrid({axisWorldTranslation:ma(this.ji),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.fl.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.kD.gl2?"uint":"ubyte",intensityTextureType:this.kD.WE?"float":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}p.mousePicking=v?this.cN.mousePicking||{shader:this.kD.KE(_m["3D"],_m.MousePicking(),_m.SurfaceGrid({axisWorldTranslation:ma(this.ji),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.fl.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.kD.gl2?"uint":"ubyte",intensityTextureType:this.kD.WE?"float":"ubyte",heightmapTextureType:this.kD.WE?"float":"ubyte",littleEndian:this.kD.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.cN=p,this.LY.length=0,this.jl=this.Lr,this.XU=n,this.Eg.o=!1;const m=this.MU.C(),S=m!==this.QU;return this.GU(m,S||y.size>0||this.xU),this.xU=!1,this.QU=this.MU.C(),this}UY(t){const i=this.EY.gridTiles.map((i=>{const s=Kv(this.kD,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.EY.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.kD.JR([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),r=this.kD.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:r}}jY(t){var i;if("phong"===this.Eg.C().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let r;const n=null===(i=this.kD.gl2)||void 0===i?void 0:i.ctx;if(n)r=this.kD.jx(null,n.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,n.UNSIGNED_INT,n.RGBA32UI);else{const t=this.kD.gl;r=this.kD.jx(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=r}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.kD.FD(t.normalmapTexture),t.normalmapTexture=void 0)}))}ed(t,i){var s,e,r,n;const h=this.kD.gl,o=this.$Y;if(!o)return{};const l=this.Eg.C(),u=this.cN,c=1===t?null===(s=u.mousePicking)||void 0===s?void 0:s.shader:null===(e=u.surface)||void 0===e?void 0:e.shader;if(!c)return{};const d=1!==t?null===(r=u.surface)||void 0===r?void 0:r.wireframe:void 0,f=1!==t?null===(n=u.surface)||void 0===n?void 0:n.fill:void 0;return this.kD.KR(c,((s,e,r,n)=>{let u=!1;if(this.kD.Pd(c).Sz(r,this.EY.largestGridTileSize.cells).MO(s("uScale"),this.Nj.qD.eO()).MO(s("uDisp"),this.Nj.qD.rO())._O(s("uViewProjectionMatrix"),this.Qj).sO(s("uIsHighlighted"),1===t||2===t?0:this.Qi).SL(s("uHighlightColorOffset"),1===t||2===t?_e:this.es).sO(s("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===l.type&&this.kD.MO(s("uCameraLoc"),this.Kj).MO(s("uLightLoc"),this.qj).sO(s("uAmbientReflection"),l.ambientReflection).sO(s("uSpecularReflection"),l.specularReflection).sO(s("uDiffuseReflection"),l.diffuseReflection).sO(s("uShininess"),l.shininess).SL(s("uLightColor"),l.specularColor).SL(s("uAmbientColor"),l.ambientColor),d)){const{wireframeFillSolid:t,wireframeSolid:i}=d,e=i.getThickness()<0?1:i.getThickness();this.kD.SL(s("uWireframeColor"),t.getColor()).sO(s("uWireframeThickness"),e)}return 1===t||"solid"===(null==f?void 0:f.fillMode)&&this.kD.SL(s("uColorDiffuse"),f.fillStyleSolid.getColor()),o.gridTileSizes.forEach((n=>{this.kD.tO(s("uTileDimensionsXZ"),["columns"===this.fl.dataOrder?n.sizeHeatmapData.primary:n.sizeHeatmapData.secondary,"columns"===this.fl.dataOrder?n.sizeHeatmapData.secondary:n.sizeHeatmapData.primary]).xO(s("uTileDimensions"),[n.sizeHeatmapData.primary,n.sizeHeatmapData.secondary]),n.tiles.forEach((l=>{var c;const v=null===(c=this.YU)||void 0===c?void 0:c.tilesInfo.get(l.tileData);if(!v)return;let A=0,g=(l.sizeHeatmapDataVectors.primary-1)*(l.sizeHeatmapDataVectors.secondary-1);if(this.VY){const t=this.VY.fill.iFirstPrimary,i=this.VY.fill.iFirstPrimary+this.VY.fill.amountPrimary-1,s=l.iFirstVector.primary,e=l.iFirstVector.primary+l.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const r=((t,i,s,e)=>a(Math.max(t,s),Math.min(i,e)))(t,i,s,e);A=(r.min-l.iFirstVector.primary)*(n.sizeGeometryData.secondary-1),g=(r.max-r.min)*(n.sizeGeometryData.secondary-1)}if(!(A<0||g<=0)){if("intensity"===(null==f?void 0:f.fillMode)){const{fillStylePaletted:t}=f,i=this.Xx.EU;this.kD.Cz(r,t.lut,i).iO(s("uTileIntensityValues"),l.intensityDataTexture,2).aO(s("uTileBoundsAxisXZ"),[v.startLocationAxis.x,v.startLocationAxis.z,v.sizeAxis.x,v.sizeAxis.z])}if("xyz"===(null==f?void 0:f.fillMode)){const{fillStylePaletted:t}=f,i="x"===t.getLookUpProperty()?{min:this.Ls(),max:this.Ps()}:"y"===t.getLookUpProperty()?{min:this.Bs(),max:this.Ds()}:"z"===t.getLookUpProperty()?{min:this.Je(),max:this.Qe()}:void 0;if(!i&&t.lut.percentageValues)return;this.kD.Cz(r,t.lut,i)}1!==t&&"phong"===this.Eg.C().type&&l.normalmapTexture&&this.kD.iO(s("uNormalmapTexture"),l.normalmapTexture,3),1===t&&this.kD.kO(s("uFirstId"),i+A),this.kD.qR(o.rectangleLocationsBuffer,0,{location:e("aGeoCellOffset"),size:2},{location:d?e("aTriangleBary"):void 0,size:3}).kO(s("uBaseInstance"),A).tO(s("uTileStartLocationAxisXZ"),[v.startLocationAxis.x,v.startLocationAxis.z]).tO(s("uTileSizeAxisXZ"),[v.sizeAxis.x,v.sizeAxis.z]).iO(s("uHeightmapTexture"),l.heightmapDataTexture,0).UO(o.rectangleLocationsDrawMode,0,o.rectangleLocationsDrawLength,g),u=!0,h.bindBuffer(h.ARRAY_BUFFER,null)}}))})),u})),1!==t&&this.LU.forEach((i=>{i.Qj||(i.Qj=this.Nj.Qj),i.Kj||(i.Kj=[this.Nj.Kj.x,this.Nj.Kj.y,this.Nj.Kj.z]),i.qj||(i.qj=[this.Nj.Kj.x,this.Nj.Kj.y,this.Nj.Kj.z]),i.Sh(!0),i.ed(t,0)})),{idCount:this.fl.columns*this.fl.rows}}ls(){return this.Xx.ls()}GY(){return this.LU.forEach((t=>t.dispose())),this.LU.length=0,this}dispose(){return super.dispose(),this.Xx.dispose(),this.$Y&&(this.$Y.gridTileSizes.forEach((t=>{})),this.$Y.gridTiles.forEach((t=>{this.kD.FD(t.heightmapDataTexture),t.normalmapTexture&&this.kD.FD(t.normalmapTexture)})),this.kD.uO(this.$Y.rectangleLocationsBuffer),this.$Y=void 0),this.GY(),this.cN={},this}rd(){return this.dispose(),this.Xx.rd(),this}Wp(t){return this.Xx.Wp(t),this}Xp(t){this.LY.push(t),Qv(this.EY.gridTiles,t,(t=>t.heightmapData),((t,i)=>{t.heightmapData=i}));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.DY[i]=void 0;return this.PY=void 0,this}Yp(t){return this.SU._(t),this}Hp(){return this.SU.C()}Er(t){return this.Lr=du(this.Lr,t),this.Xx.Er(this.Lr),this}Qn(){return this.Lr}Rp(t){return this.Ep="function"==typeof t?t(this.Ep):t,this}jp(){return this.Ep}Ps(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.NY.max.x)||0}Ls(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.NY.min.x)||0}Ds(){const t=this.PY||this.YY();return this.PY=t,t.max}Bs(){const t=this.PY||this.YY();return this.PY=t,t.min}Qe(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.NY.max.z)||0}Je(){var t;return(null===(t=this.YU)||void 0===t?void 0:t.NY.min.z)||0}$u(){return 0}Uu(){return 0}Hg(){return 0}YY(){if(this.PY)return this.PY;const t=this.VY?this.VY.fill.iFirstPrimary:0,i=this.VY?t+this.VY.fill.amountPrimary-1:this.fl.primaryDimensionVectorsCount-1;let s=sh,e=eh;return this.EY.gridTiles.forEach((r=>{for(let n=Math.max(t,r.iFirstUniqueVector.primary);n<=Math.min(i,r.iFirstUniqueVector.primary+r.sizeUniqueHeatmapDataVectors.primary-1);n+=1){const t=(n-r.iFirstUniqueVector.primary)*r.sizeHeatmapDataVectors.secondary;let i=this.DY[n];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:sh,max:eh},this.DY[n]=i;for(let n=0;n<r.sizeHeatmapDataVectors.secondary;n+=1){const h=r.heightmapData[t+n];s=s<h?s:h,e=e>h?e:h,i.min=Math.min(i.min,h),i.max=Math.max(i.max,h)}}}})),this.PY={min:s,max:e},this.PY}}class px extends ex{constructor(t,i,s,e){super(t,i,s),this.Vj="disabled",this.ij=0,this.ej={},this.HY=new Map,this.ut={x:0,z:0},this.dt={x:1,z:1},this.fl={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.NY={min:{x:this.ut.x,z:this.ut.z},max:{x:"rows"===e.scrollDimension?this.ut.x+(e.columns-1)*this.dt.x:this.ut.x,z:"columns"===e.scrollDimension?this.ut.z+(e.rows-1)*this.dt.z:this.ut.z}};const r=()=>({shape:new yx(this.Nj,$r,this.ts,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this.eM=[r(),r()]}Sh(t){this.eM.forEach((i=>{i.shape.Sh(t)}));const i=this.eM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Hr(null===(s=i.shape.Xx.EU)||void 0===s?void 0:s.min,sh)),t.max=Math.max(t.max,Hr(null===(e=i.shape.Xx.EU)||void 0===e?void 0:e.max,eh)),t}),{min:sh,max:eh}),s=this.eM.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,Hr(null===(s=i.shape.PY)||void 0===s?void 0:s.min,sh)),t.max=Math.max(t.max,Hr(null===(e=i.shape.PY)||void 0===e?void 0:e.max,eh)),t}),{min:sh,max:eh});return this.eM.forEach((t=>{t.shape.Xx.EU=i,t.shape.PY=s})),this}ed(t,i){let s=0,e=i;return this.eM.forEach((i=>{if(!i.hasData)return;i.shape.Qj=this.Qj,i.shape.Kj=this.Kj,i.shape.qj=this.qj;const{idCount:r}=i.shape.ed(t,e);void 0!==r&&(1===t&&this.HY.set(i,{idFirst:e,idCount:r}),s+=r,e+=r)})),{idCount:s}}nd(t,i,s,e,r){const n=Array.from(this.HY).find((i=>fh(t,i[1].idFirst,i[1].idFirst+i[1].idCount-1)));return n?n[0].shape.nd(t,n[1].idFirst,n[1].idCount,e,r):{}}Vp(t,i){return this.ut=t,this.dt=i,this.eM.forEach((t=>{t.shape.Vp("columns"===this.fl.scrollDimension?{x:t.shape.Np().start.x,z:this.ut.z}:{x:this.ut.x,z:t.shape.Np().start.z},this.dt)})),"columns"===this.fl.scrollDimension?(this.NY.min.z=t.z,this.NY.max.z=this.ut.z+(this.fl.rows-1)*this.dt.z):(this.NY.min.x=t.x,this.NY.max.x=this.ut.x+(this.fl.columns-1)*this.dt.x),this}Np(){return{start:this.ut,step:this.dt}}ws(){return this.ij=0,this.ej={},this.NY={min:{x:this.ut.x,z:this.ut.z},max:{x:"rows"===this.fl.scrollDimension?this.ut.x+(this.fl.columns-1)*this.dt.x:this.ut.x,z:"columns"===this.fl.scrollDimension?this.ut.z+(this.fl.rows-1)*this.dt.z:this.ut.z}},this.eM.forEach((t=>{t.shape.setVisible(!1),t.shape.BY=!1,t.hasData=!1})),this}Kp(t){var i;const s=this.eM[0],e=this.eM[1],r=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let n=0;if(!r)return this;do{const i=Math.floor(this.ij/this.fl.scrollDimensionSize)%this.eM.length,h=this.eM[i],o=this.ij%this.fl.scrollDimensionSize,a=this.fl.scrollDimensionSize-o,l=0===o,u=Math.min(a,r),c=o+u,d=o,f=d+1,v=n,A=n+u,g=this.ij>=this.fl.scrollDimensionSize&&c<=this.fl.scrollDimensionSize-1,y=l;l&&(h.shape.Vp("columns"===this.fl.scrollDimension?{x:this.ut.x+(this.ij-1)*this.dt.x,z:this.ut.z}:{x:this.ut.x,z:this.ut.z+(this.ij-1)*this.dt.z},this.dt),h.shape.setVisible(!0));const p=g?0:1,m=c+(g?1:0);h.shape.zY({fill:{iFirstPrimary:p,amountPrimary:m},wireframe:{iFirstPrimary:p,amountPrimary:m,connectNext:!1}});const S=h===s?e:s,b=c+1,x=1+this.fl.scrollDimensionSize-b;S.shape.zY({fill:{iFirstPrimary:b,amountPrimary:x},wireframe:{iFirstPrimary:b,amountPrimary:x-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(v,A);let s=!1;y&&this.ej.yValues&&(s=!0,i.splice(0,0,this.ej.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.fl.staticDimensionSize,values:i,type:"y"};h.shape.Xp(e),h.hasData=!0,M.yValues=Array.from(i[u-1])}if(t.intensityValues){const i=t.intensityValues.slice(v,A);let s=!1;y&&this.ej.intensityValues&&(s=!0,i.splice(0,0,this.ej.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.fl.staticDimensionSize,values:i,type:"intensity"};h.shape.Wp(e),h.hasData=!0,M.intensityValues=Array.from(i[u-1])}this.ij+=u,n+=u,this.ej=M}while(n<r);return"columns"===this.fl.scrollDimension?(this.NY.min.x=this.ut.x+Math.max(this.ij-this.fl.scrollDimensionSize,0)*this.dt.x,this.NY.max.x=this.ut.x+(this.ij-1)*this.dt.x):(this.NY.min.z=this.ut.z+Math.max(this.ij-this.fl.scrollDimensionSize,0)*this.dt.z,this.NY.max.z=this.ut.z+(this.ij-1)*this.dt.z),this}Wp(t){var i;const{iSample:s,yValues:e,intensityValues:r}=t,n=e||r;if(!n)return this;const h=s,o=s+n.length-1,a=n[0].length;this.eM.forEach(((t,i)=>{const s=Math.floor(this.ij/this.fl.scrollDimensionSize)%this.eM.length,n=this.ij%this.fl.scrollDimensionSize;let l,u;if(i===s?0===n?(u=-1,l=-1):(u=this.ij-1,l=u-n+1):(u=this.ij-n-1,l=u-this.fl.scrollDimensionSize+1),o<l||h>u)return;const c=Math.max(h,l),d=Math.min(o,u),f=d-c+1,v=r&&r.slice(c-h,d-h+1),A=e&&e.slice(c-h,d-h+1),g=v&&{type:"intensity",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:v},y=A&&{type:"y",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:A};g&&t.shape.Wp(g),y&&t.shape.Xp(y),d===this.ij-1&&(this.ej={yValues:A?Array.from(A[A.length-1]):void 0,intensityValues:v?Array.from(v[v.length-1]):void 0})}));const l=this.ij-1;if(o>l){const t=o-l,s=e&&e.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),n=r&&r.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),h=s?s.length:null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0;if(h<t){const i=this.ej||new Array(a).fill(0);for(let e=h;e<t;e+=1)s&&i.yValues&&s.unshift(i.yValues),n&&i.intensityValues&&n.unshift(i.intensityValues)}this.Kp({heightMapValues:s,intensityValues:n,lengthPrimary:h,lengthSecondary:a})}return this}qp(){return this.ij}Yp(t){return this.eM.forEach((i=>i.shape.Yp(t))),this}Hp(){return this.eM[0].shape.Hp()}Er(t){return this.eM.forEach((i=>i.shape.Er(t))),this}Qn(){return this.eM[0].shape.Qn()}Rp(t){return this.eM.forEach((i=>i.shape.Rp(t))),this}jp(){return this.eM[0].shape.jp()}rd(){return this.dispose(),this.eM.forEach((t=>t.shape.rd())),this}dispose(){return super.dispose(),this.eM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.eM.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}$g(t){return super.$g(t),this.eM.forEach((i=>i.shape.$g(t))),this}Ps(){return this.NY.max.x}Ls(){return this.NY.min.x}Ds(){return Math.max(this.eM[0].shape.Ds(),this.eM[1].shape.Ds())}Bs(){return Math.min(this.eM[0].shape.Bs(),this.eM[1].shape.Bs())}Qe(){return this.NY.max.z}Je(){return this.NY.min.z}$u(){return 0}Uu(){return 0}Hg(){return 0}vs(t){return super.vs(t),this.eM.forEach((i=>i.shape.vs(t))),this}}class mx extends Hb{constructor(t,i,s,e){super(t,i,s),this.Kj=h(0,0,1),this.WY=h(0,0,-1),this.ZY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Eg=new Ho,this.ji=e}nS(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.ji,e=i.x/s.x,r=i.y/s.y,n=t.x/s.x,h=t.y/s.y,o=this.Ki.li();return{x:n*o.x,y:h*o.y,width:e*o.x,height:r*o.y}}setCameraLocation(t){return this.Kj=t,this}getCameraLocation(){return this.Kj}setCameraDirection(t){return this.WY=ih.normalize(t),this}getCameraDirection(){return this.WY}setLightLocation(t){return this.qj=t,this}getLightLocation(){return this.qj}JY(){return h(this.ZY[0],this.ZY[1],this.ZY[2])}QY(){return h(this.ZY[4],this.ZY[5],this.ZY[6])}}class Sx extends mx{constructor(t,i,s,e){super(t,i,s,e),this.qD=new pS,this.KY=!0,this.qY=()=>{this.KY=!0},this.tH="perspective",this.qz=t,this.gl=t.iV(),this.Bj=this.Ss,this.Ki.Ct("resize",this.qY),e.addEventListener("cellresize",this.qY)}XR(t){const i=t.Ls(),s=t.Bs(),e=t.Je(),r=t.Ps(),n=t.Ds(),h=t.Qe();if(i===sh||r===eh||s===sh||n===eh||e===sh||h===eh)return rh;const o=t.$u(),a=t.Uu(),l=t.Hg(),u=Math.abs(t.ke.Iy(o)*t.ji.x.$t()),c=Math.abs(t.ke.Iy(a)*t.ji.y.$t()),d=Math.abs(t.ke.Iy(l)*t.ji.z.$t()),f=i-u,v=r+u,A=s-c,g=n+c,y=e-d,p=h+d;let m;return[{x:f,y:A,z:y},{x:v,y:A,z:y},{x:f,y:g,z:y},{x:v,y:g,z:y},{x:f,y:A,z:p},{x:v,y:A,z:p},{x:f,y:g,z:p},{x:v,y:g,z:p}].map((i=>t.ke.Py(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};m=m?bh(m,{min:t,max:t}):i})),m||rh}Py(t){if(this.iH(),this.sH(),!this.Qj)return;const i=this.qD.rO(),s=h(i[0],i[1],i[2]),r=this.qD.eO(),n=h(r[0],r[1],r[2]),o=ih.divideVec(ih.subtractVec(t,s),n),a=this.Qj,l=rS.multiply(a,[o.x,o.y,o.z,1]),u=e(l[0]/l[3],l[1]/l[3]),c=this.Ki.li();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}BS(t){const i=this.qD.rO(),s=this.qD.eO(),e=ih.divideVec(ih.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}DS(t){const i=this.qD.rO(),s=this.qD.eO(),e=ih.addVec(ih.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}Iy(t){return t/1e3}uY(){return.001}Sh(){const t=this.Kj,i=this.qj,s=this.ji.x.o||this.ji.y.o||this.ji.z.o;if(!i)throw Dn(0,(()=>En()));const{viewProjectionMatrix:e}=this.iH();this.sH();const r=[t.x,t.y,t.z],n=[i.x,i.y,i.z];return this.Ss.forEach((t=>{t.Qj=e,t.Kj=r,t.qj=n,t.Sh(s)})),this}IS(t){this.tH!==t&&(this.tH=t,this.KY=!0)}LS(){return this.tH}iH(){if(!this.KY&&this.Qj)return{viewProjectionMatrix:this.Qj};const t=this.nS(),i=t.width/t.height;if("perspective"===this.tH)this.eH=rS.projectionPerspective(45,i,.1,100);else{let t,s;const e=.5*ih.length(this.Kj);i>1?(t=e,s=t/i):(s=e,t=s*i),this.eH=rS.projectionOrthographic(-t,t,-s,s,-400,100)}const s=this.Kj;this.ZY[12]=s.x,this.ZY[13]=s.y,this.ZY[14]=s.z;const e=this.WY,r=h(0,1,0),n=ih.multiply(e,-1),o=ih.normalize(ih.cross(r,n)),a=ih.normalize(ih.cross(n,o));this.ZY[0]=o.x,this.ZY[1]=o.y,this.ZY[2]=o.z,this.ZY[4]=a.x,this.ZY[5]=a.y,this.ZY[6]=a.z,this.ZY[8]=n.x,this.ZY[9]=n.y,this.ZY[10]=n.z,this.rH=rS.inverse(this.ZY);const{cellIndex:l,cellSpan:u,cellsAmount:c}=this.ji,d=u.x/c.x,f=u.y/c.y,v=(l.x+u.x/2)/c.x,A=(l.y+u.y/2)/c.y,g=rS.multiply(rS.translation(Vo(-1,1,v),Vo(-1,1,A),0),rS.scaling(d,f,1));return this.Qj=rS.multiply(g,rS.multiply(this.eH,this.rH)),this.nH=rS.inverse(this.Qj),this.KY=!1,{viewProjectionMatrix:this.Qj}}sH(){this.qD.Yz(this.ji.x),this.qD.Wz(this.ji.y),this.qD.Xz(this.ji.z)}ed(t,i,s){var e;const r=this.gl.RR(),n=this.nS(),h={x:n.x*r*i,y:n.y*r*i,width:n.width*r*i,height:n.height*r*i};this.gl.ZR(h.x,h.y,h.width,h.height);let o=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const a=Array.from(this.Bj.values());for(let i=0;i<a.length;i+=1){const e=a[i];if(e.getVisible())if(this.gl.$R(e.Vj),this.gl.Ug(e.zg),1!==t)e.ed(t,0);else if(1===t&&e.getPointerEvents()){const{idCount:r}=e.ed(t,o);void 0!==r&&(s.push({entity:e,layer:this,entityIndex:i,idFirst:o,idCount:r,idLast:o+r-1}),o+=r)}}return this.gl.$R("disabled"),this.gl.Ug(!1),this.gl.UR(!1),this}setCameraLocation(t){return this.Kj.x===t.x&&this.Kj.y===t.y&&this.Kj.z===t.z||(this.KY=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.WY.x===t.x&&this.WY.y===t.y&&this.WY.z===t.z||(this.KY=!0),super.setCameraDirection(t),this}It(){super.It(),this.Ki.Ft("resize",this.qY),this.ji.removeEventListener("cellresize",this.qY)}Zy(t){return this.hj(new Ax(this,this.oj,[],t))}_y(t,i){return this.hj(new cx(this,this.oj,t,i))}Jg(){return this.hj(new nx(this,this.oj,[]))}dm(){return this.hj(new vx(this,this.oj,[]))}iA(){return this.hj(new ax(this,this.oj,[]))}Op(t){return this.hj(new yx(this,this.oj,[],t))}Qp(t){return this.hj(new px(this,this.oj,[],t))}}class bx{constructor(t,i){this.hH=[],this.oH=[],this.aH=(t,i)=>{const s=this.hH.find((i=>i.Zc===t));s&&("pointerenter"!==i.type&&"pointermove"!==i.type||this.Ki.bl(s,!0,i.timeStamp),"pointerleave"===i.type&&this.Ki.bl(s,!1,i.timeStamp))},this.Ki=t,this.qc="init"in i?i.init({engine:t.dg,handleEvent:this.aH}):i,this.lH=0,this.uH=String(Math.round(1e6*Math.random()))}no(t,i,s,e){const r=new Bu(t,i,s,e,`${this.uH}-${this.lH}`);return this.hH.push(r),r.addEventListener("dispose",(()=>{var t;const i=this.hH.indexOf(r);i>=0&&this.hH.splice(i,1),(null===(t=this.Ki.xl)||void 0===t?void 0:t.entity)===r&&this.Ki.bl(void 0,!1,Or.performance.now())})),this.lH+=1,r}La(){const t=this.hH.filter((t=>t.getVisible()&&t.zh().length>0&&co(t.Lr))).map((t=>t.Jc())),i=this.oH;this.qc.update({textList:t,engine:this.Ki.dg,obstructingOverlays:i}),this.oH.length=0}It(){const t=this.hH.filter((t=>t.getVisible()&&t.zh().length>0&&co(t.Lr))).map((t=>t.Jc()));this.qc.dispose&&this.qc.dispose({textList:t,engine:this.Ki.dg})}aA(t){this.oH.push(t)}}class xx extends au{constructor(t,i,s,e=AS){if(super(t,i,s),this.Bt=r(1,1),this.cH=!1,this.dH=0,this.fH=!0,this.vH=0,this.lY=8388608,this.OE=[null,null],this.AH=null,this.gH=null,this.yH=0,this.ng=!1,this.pH=0,this.fe=(t=!1)=>(this.Wi||this.Ha||Vm(this.kD.gl)||(t&&(this.cH=!0),this.Na=!0,this.mH||this.Ea.QE(t)),this),this.mH=!1,this.sR=t=>{if(this.Wi||this.Ha)return;const i=t-this.dH;if(i>=this.Sl||-1===this.Sl){this.mH=!0,this.dH=t,this.cH=!1;const s=i>50?1e3/60:i;this.Ga&&this.Ga(s),this.ee.Sh(i),this.rl(),this.nl(),this.Na=!1,-1!==this.Sl&&this.cH&&(this.Ea.QE(this.cH),this.Na=!0),this.$a&&this.$a(),this.mH=!1,this._t.kt("renderframe",{}),this.Na&&this.fe(this.cH)}else this.Na=!0,this.Ea.QE()},this.SH=new Map,this.iV=()=>this.kD,this.bH=()=>{var t,i;const s=this.ll(),e=this.fH,r=Or.performance.now(),n=null===(t=this.xH)||void 0===t?void 0:t.MH.reduce(((t,i)=>t?i.wH&&t.wH&&i.wH>t.wH?i:t:i),void 0),h=null==n?void 0:n.wH,o=null===(i=this.Ja)||void 0===i?void 0:i.timeStamp,a=this._H;return e?(this.fe(!0),!1):void 0===n||(void 0===n||!n.kH)&&(void 0!==h&&void 0===s?r-h>=1e3:!(void 0!==h&&void 0!==o&&r-o>=2e3&&(void 0===a||r-a>=2e3))||r-h>=1e3)},this.CH=()=>{var t,i;this.TH=void 0;const s=null===(i=null===(t=this.xH)||void 0===t?void 0:t.FH)||void 0===i?void 0:i.IH;void 0===s||s>=this.vH||this.LH()},this.nl=()=>{if(this.Wi||this.Ha)return this;const t=this.kD.gl,i=Or.performance.now();this.kD.HR(t.FRAMEBUFFER,this.Ea.YE?this.OE[0]:null);const s=this.Bt,e=s.x>0&&s.y>0,r=this.kD.RR();if(this.il.o&&this.kD.HO(this.il.C()),this.Ea.UE&&this.PE&&(this.PE.canvas.width=s.x*r,this.PE.canvas.height=s.y*r),t.resize&&e&&t.resize(s.x*r,s.y*r),this.kD.WR(0,0,s.x*r,s.y*r),this.kD.ZR(0,0,s.x*r,s.y*r),this.kD.ws(),e)for(const t of this.Oa.values())t.ed(0,1,[]);if(this.Kc&&this.Kc.La(),this.fl.yl&&e&&(this.TH&&(Or.clearTimeout(this.TH),this.TH=void 0),this.bH()?(this.LH(),this.kD.HR(t.FRAMEBUFFER,this.Ea.YE?this.OE[0]:null)):this.TH=Or.setTimeout(this.CH,500)),this.Dt(),this.Ba(),Array.from(this.Xa.values()).forEach((t=>{t.lastEvent.isLcjsArtificialEvent=!0,this.Za("pointermove",t.lastEvent)})),this.Ea.YE){const i=this.kD.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this.OE[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.OE[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.Bt.x*r,this.Bt.y*r,0,0,this.Bt.x*r,this.Bt.y*r,t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.LE),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.Bt.x*r,this.Bt.y*r,0),t.bindTexture(t.TEXTURE_2D,null);return this.kD.HR(t.FRAMEBUFFER,null),Vm(this.kD.gl)?this.Ea.FE(0,0,this.Bt.x*r,this.Bt.y*r,[this]):this.Ea.QE(),this.fH=!1,this.vH=i,this},this.rl=()=>{if("use-window"===this.PH.mode){const t=Or.devicePixelRatio||1;this.kD.nz(t)}const t=this.Bt;if(0===t.x||0===t.y)return this;this.Fl.zt(t);for(const t of this.Oa.values())t.Sh();return this.Dt(),this},this.Ea=t,this.Ea.UE){this.BH=Or.document.createElement("canvas"),this.BH.style.width="100%",this.BH.style.height="100%",this.BH.style.display="block",this.BH.style.boxSizing="content-box",this.BH.style.position="absolute";const t=this.BH.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new mp("No Canvas context available.");this.PE=t,this.mo.appendChild(this.BH)}this.Ea.nR(this);const n={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let h;if(this.Ea.YE&&t.gl2&&(h=new e(this,this.fl,{type:"webgl2",ctx:t.gl2.ctx,antialias:n.antialias,lineAntialias:n.lineAntialias},this.rs.isDark)),h||this.Ea.YE||(h=new e(this,this.fl,{type:"webgl1",ctx:t.gl,antialias:n.antialias,lineAntialias:n.lineAntialias},this.rs.isDark)),!h)throw new mp("No WebGL context available");if(this.kD=h,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.PH={mode:"fixed",value:i.devicePixelRatio},this.kD.nz(i.devicePixelRatio);else{const t=Or.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=Or.devicePixelRatio||1;this.PH=s?{mode:"use-window"}:{mode:"fixed",value:e},this.kD.nz(e)}const o=i?i.width:void 0,a=i?i.height:void 0;this.kl=this.DH(o),this.Tl=this.DH(a),this.EH(this.kl,this.Tl),this.rj=this.AB("engine offscreen",1e6),this.RH=this.AB("engine bg",0);const l="function"==typeof this.rs.lcjsBackgroundFillStyle?Rr({resourcesBaseUrl:this.fl.Ke,styleFactory:this.rs.lcjsBackgroundFillStyle,apply:t=>this.setBackgroundFillStyle(t)}):this.rs.lcjsBackgroundFillStyle;this.Fl=this.RH.Rr(this.ji).Er(l).Dr(this.rs.lcjsBackgroundStrokeStyle).setPointerEvents(!1).zr({x:0,y:0});const u=this.AB("engine effects",200001).Dj(this.rs.effect);this.Ks=u;const c=this.Ea.YE,d=this.li();c&&(this.OE=[h.fO(),h.fO()]);const f=this.kD.gl;c&&(this.AH=f.createRenderbuffer(),this.gH=f.createRenderbuffer()),this.LE=f.createTexture();const v=d.x*this.kD.RR(),A=d.y*this.kD.RR();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.AH);const t=this.kD.gl2.ctx;this.yH=this.Ea.xE&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.yH,t.RGBA8,v,A),f.bindRenderbuffer(f.RENDERBUFFER,this.gH),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.yH,t.DEPTH24_STENCIL8,v,A)}c&&(this.kD.HR(f.FRAMEBUFFER,this.OE[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.AH),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this.gH)),f.bindTexture(f.TEXTURE_2D,this.LE),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,v,A,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.kD.HR(f.FRAMEBUFFER,this.OE[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.LE,0)),this.kD.HR(f.FRAMEBUFFER,null),this.qa(),this.Ba(),this.dg=su(this),this.sd={rs:this.rs,ee:this.ee,ji:this.ji,fe:t=>this.fe(t),W_:()=>this.Na,ll:()=>this.ll(),ce:t=>(this._H=Or.performance.now(),this.ce({x:t.clientX,y:t.clientY})),QF:t=>this.QF(t),fl:this.fl,ul:t=>this.ul(t),Ks:this.Ks,El:t=>this.El(t),Rl:t=>this.Rl(t),En:{ln:(t,i,s)=>{const e=this.kD.th(i.family).VD(t,i,s,this.rs.isDark);return this.Kc?{x:e.x,y:e.y,isEstimate:!1}:e}},be:()=>this.Xa.size>0,xe:(t,i)=>void 0!==Array.from(this.Xa.values()).find((s=>!(void 0!==t&&s.entity!==t||void 0!==i&&i!==s.collectionMember)))},i.textRenderer&&(this.Kc=new bx(this,i.textRenderer));const g=()=>{this.It()};Or.addEventListener("unload",g),this.Ua.push((()=>{Or.removeEventListener("unload",g)}))}get OH(){return this.Oa}Ra(t,i){let s=this.SH.get(t);if(!s){const i=this.kD.cz(t),e=new Set,r=t=>{e.add(t)},n=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.SH.delete(t))},h=[];s={imageTexture:i,instances:e,handleNewInstance:r,handleInstanceDisposed:n,sharedEngineReference:{KF:()=>i.wR,qF:t=>{i.wR?t():h.push(t)}}},this.SH.set(t,s),i.Pd(this),i.LR((()=>{h.forEach((t=>{t()})),h.length=0}))}const e=new va(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}QF(t){const i=Array.from(this.SH.values()).find((i=>i.instances.has(t)));if(!i)throw Dn(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}ce(t){var i;if(this.xl&&this.xl.entity.getPointerEvents()){if(this.xl.pointed||!(Or.performance.now()-this.xl.timestamp>=50))return{entity:this.xl.entity,collectionMember:void 0,info:void 0};this.xl=void 0}const s=null===(i=this.xH)||void 0===i?void 0:i.FH;if(!s)return;(!this.Ka||Or.performance.now()-this.Ka>100)&&this.Ba();const e=this.Gr(t.x,t.y),r=Math.round(e.x*this.kD.RR()),n=Math.round(e.y*this.kD.RR());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.zH(s,r+t[0]/s.VH,n+t[1]/s.VH))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember,info:i.info}:t}),void 0)}zH(t,i,s){const e=Math.round(i*t.VH),r=Math.round(s*t.VH);if(e<0||e>=t.Bt.x||r<0||r>=t.Bt.y)return;const n=4*(e+r*t.Bt.x),h=t.NH[n+0],o=t.NH[n+1],a=t.NH[n+2],l=t.NH[n+3];if(void 0===h||void 0===o||void 0===a||void 0===l)return;if(0===h&&0===o&&0===a&&0===l)return;const u=16777216*h+65536*o+256*a+l,c=t.GH.find((t=>u>=t.idFirst&&u<=t.idLast));if(!c)return;const{collectionMember:d,info:f}=c.entity.nd(u,c.idFirst,c.idCount,i,s);return{entity:c.entity,collectionMember:d,entityIndex:c.entityIndex,layerIndex:c.layer.ol(),info:f}}Ia(t,i,s,e=1){const r=1!==e,n=this.kD.gl;let h,o=!this.Ea.YE||r||!this.ng;if(this.Kc){const t=this.Kc;this.Kc=void 0;const i=[],s=[];this.Oa.forEach((t=>{t.Ss.forEach((t=>{t.getVisible()&&t instanceof Bu&&s.push(t)}))})),s.forEach((t=>{const s=t.ke.no(t.ji);i.push(s),s.zr(t.yu()).Eh(t.zh()).ih(t.th()).Er(t.Qn()).Cu(t.wu()).eo(t.Tu()).ro(t.Fu()).eh(t.rh()).Dh(t.mu()).Nl(t.Gl()).setPointerEvents(!1)})),h={ctr:t,temporaryWebglTextObjects:i},o=!0}const a=this.Bt;r&&this.qa({x:a.x*e,y:a.y*e}),o&&(r&&this.Ga&&this.Ga(0),this.rl(),this.nl()),this.Ea.YE?(this.kD.HR(n.FRAMEBUFFER,this.OE[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.LE,0)):this.kD.HR(n.FRAMEBUFFER,null);const l=this.IE(),u=l.x,c=l.y,d=new Uint8Array(u*c*4);n.readPixels(0,0,u,c,n.RGBA,n.UNSIGNED_BYTE,d),h&&(h.temporaryWebglTextObjects.forEach((t=>t.dispose())),this.Kc=h.ctr,this.nl());const f=new ImageData(new Uint8ClampedArray(d),u,c),v=document.createElement("canvas"),A=v.getContext("2d");if(!A)throw new Error("Failed to create 2D context for saving image.");v.width=u,v.height=c,A.putImageData(f,0,0),A.translate(0,c),A.scale(1,-1),A.drawImage(v,0,0),this.Ea.YE&&(this.kD.HR(n.FRAMEBUFFER,this.OE[0]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.AH),this.kD.HR(n.FRAMEBUFFER,this.OE[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.LE,0)),this.kD.HR(n.FRAMEBUFFER,null);const g=v.toDataURL(t,i);return r&&this.qa(a),s?g:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=Or.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new Or.Blob([e.buffer],{type:i})})(g)}La(t,i,s=!1){this.qa(e(Math.round(t),Math.round(i))),this.el();const r=this.kD.gl.drawingBufferWidth,n=this.kD.gl.drawingBufferHeight,h=new Uint8Array(r*n*4);if(this.kD.gl.readPixels(0,0,r,n,this.kD.gl.RGBA,this.kD.gl.UNSIGNED_BYTE,h),!s){const t=n/2|0,i=4*r,s=new Uint8Array(4*r);for(let e=0;e<t;e+=1){const t=e*i,r=(n-e-1)*i;s.set(h.subarray(t,t+i)),h.copyWithin(t,r,r+i),h.set(s,r)}}return this.Va={x:0,y:i},h}UB(t){return void 0!==this.kl?this.kl[0]=t:this.kl=[t,void 0],this.mo.style.minWidth=`${this.kl[0]}px`,this.qa(),this}YB(t){return void 0!==this.kl?this.kl[1]=t:this.kl=[void 0,t],this.mo.style.maxWidth=`${this.kl[1]}px`,this.qa(),this}WB(t){return void 0!==this.Tl?this.Tl[0]=t:this.Tl=[t,void 0],this.mo.style.minHeight=`${this.Tl[0]}px`,this.qa(),this}ZB(t){return void 0!==this.Tl?this.Tl[1]=t:this.Tl=[void 0,t],this.mo.style.maxHeight=`${this.Tl[1]}px`,this.qa(),this}EH(t,i){return this.kl=t,this.Tl=i,this.mo.style.minWidth=`${this.kl[0]}px`,this.mo.style.maxWidth=`${this.kl[1]}px`,this.mo.style.minHeight=`${this.Tl[0]}px`,this.mo.style.maxHeight=`${this.Tl[1]}px`,this.qa(),this}TE(t){return this.ng!==t&&(this._t.kt("inviewchanged",{isInView:t}),this.ng=t),this}CE(){return this.ng}hR(t){this.pH=t}rR(){return this.pH}AB(t,i=this.Dl()){const s=this.Bl(i);if(s){if(Dn(0,(()=>{})),!(s instanceof Zb))throw new Error("Unexpected Engine Layer error");return s}return this.hl(new Zb(this,i,t))}pB(t,i,s){const e=this.Bl(i);if(e){if(Dn(0,(()=>{})),!(e instanceof Sx))throw new Error("Unexpected Engine Layer error");return e}return this.hl(new Sx(this,i,t,s))}li(){return this.Bt}IE(){const t=this.kD.RR();return{x:Math.round(this.Bt.x*t),y:Math.round(this.Bt.y*t)}}DH(t){return t instanceof Array||(t=[t,t]),t}$H(){return this.Ea.BE}UH(){return Vm(this.kD.gl)}LH(){var t;const i=this.kD.gl,s=Or.performance.now(),e=this.fl.Al,r={x:Math.ceil(this.Bt.x*this.kD.RR()*e),y:Math.ceil(this.Bt.y*this.kD.RR()*e)};this.xH||(this.xH={VH:e,jH:r,MH:[],FH:void 0});let n=this.xH.MH.find((t=>!t.kH)),h=!1;n||(h=!0,n={kH:!1,Bt:r,wz:i.createTexture(),YH:this.kD.fO(),gH:this.kD.vO(),HH:new Uint8Array,wH:void 0},this.xH.MH.push(n));const o=n;(h||o.Bt.x!==r.x||o.Bt.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,o.wz),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.kD.HR(i.FRAMEBUFFER,o.YH),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o.wz,0),i.bindRenderbuffer(i.RENDERBUFFER,o.gH),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,o.gH),o.HH=new Uint8Array(r.x*r.y*4),o.Bt=r),o.kH=!0,o.wH=s,this.kD.HR(i.FRAMEBUFFER,o.YH),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.kD.WR(0,0,r.x,r.y);const a=[];for(const t of this.Oa.values())t.ed(1,e,a);this.kD.HR(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.kD.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.xH){const t=this.xH.FH;if(t&&t.IH>s)return;this.xH.FH={IH:s,VH:e,Bt:r,NH:o.HH,GH:a}}};l?this.kD.bz(l,o.YH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,o.HH).then((()=>{this.Wi||(o.kH=!1,u())})).catch((t=>{this.Wi||(o.kH=!1,Or.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.kD.xz(o.YH,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,o.HH),o.kH=!1,u())}qa(t){const i=this.kD.RR();if("use-window"===this.PH.mode){const t=Or.devicePixelRatio||1;this.kD.nz(t)}const s=this.Bt.x,e=this.Bt.y,r=t||{x:this.mo.offsetWidth,y:this.mo.offsetHeight},n=this.kD.RR();if(0!==r.x&&0!==r.y&&(r.x!==s||r.y!==e||i!==n)){this.Bt=r,this.ji.x.Rt(0,r.x).zt(r.x),this.ji.y.Rt(0,r.y).zt(r.y);const t=r.x*n,i=r.y*n,s=this.kD.gl,e=this.Ea.YE;if(this.LE&&(s.bindTexture(s.TEXTURE_2D,this.LE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),e){const e=this.kD.gl2.ctx;this.AH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.AH),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.yH,e.RGBA8,t,i)),this.gH&&(s.bindRenderbuffer(s.RENDERBUFFER,this.gH),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.yH,e.DEPTH24_STENCIL8,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this._t.kt("resize",{engineWidth:this.Bt.x,engineHeight:this.Bt.y,width:this.Bt.x,height:this.Bt.y})}}It(){var t;this.Wi||(super.It(),this.Kc&&this.Kc.It(),this.TH&&(Or.clearTimeout(this.TH),this.TH=void 0),Array.from(this.kD.dE.entries()).forEach((([t,i])=>{i.rd(!1),this.kD.dE.delete(t)})),Array.from(this.kD.pO.values()).forEach((t=>{t.unbindResources()})),this.kD.pO.clear(),this.kD.yO.mR(),this.kD.iz.It(),this.kD.uO(this.kD.sz),this.kD.uO(this.kD.ez),this.kD.QO.forEach(((t,i)=>{this.kD.gl.deleteBuffer(i)})),this.kD.QO.clear(),this.kD.gz&&(this.kD.uO(this.kD.gz.buffer),this.kD.gz=void 0),this.kD.gO(this.OE[0]),this.kD.gO(this.OE[1]),this.kD.AO(this.AH),this.kD.FD(this.LE),this.kD.AO(this.gH),this.xH&&(this.xH.MH.forEach((t=>{this.kD.AO(t.gH),this.kD.gO(t.YH),this.kD.FD(t.wz)})),this.xH=void 0),this.kD.XO.forEach((t=>this.kD.uO(t))),this.SH.clear(),this.Ea.oR(this),this.BH&&(null===(t=this.BH.parentElement)||void 0===t||t.removeChild(this.BH),this.BH=void 0),this.PE&&(this.PE=void 0),this.kD.gl=void 0)}}var Mx={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function r(t,i,s){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.IR(t||0,i||10,s||"be"))}var n;"object"==typeof t?t.exports=r:i.BN=r,r.BN=r,r.wordSize=26;try{n=(void 0).Buffer}catch(t){}function h(t,i,e){for(var r=0,n=Math.min(t.length,e),h=0,o=i;o<n;o++){var a,l=t.charCodeAt(o)-48;r<<=4,r|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,h|=a}return s(!(240&h),"Invalid character in "+t),r}function o(t,i,e,r){for(var n=0,h=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;n*=r,h=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&h<r,"Invalid character"),n+=h}return n}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,i){return t.cmp(i)>0?t:i},r.min=function(t,i){return t.cmp(i)<0?t:i},r.prototype.IR=function(t,i,e){if("number"==typeof t)return this.WH(t,i,e);if("object"==typeof t)return this.XH(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===i?this.ZH(t,r):this.JH(t,i,r),"-"===t[0]&&(this.negative=1),this.QH(),"le"===e&&this.XH(this.toArray(),i,e)},r.prototype.WH=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.XH(this.toArray(),i,e)},r.prototype.XH=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,h,o=0;if("be"===e)for(r=t.length-1,n=0;r>=0;r-=3)h=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===e)for(r=0,n=0;r<t.length;r+=3)h=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.QH()},r.prototype.ZH=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,r,n=0;for(s=t.length-6,e=0;s>=i;s-=6)r=h(t,s,s+6),this.words[e]|=r<<n&67108863,this.words[e+1]|=r>>>26-n&4194303,(n+=24)>=26&&(n-=26,e++);s+6!==i&&(r=h(t,i,s+6),this.words[e]|=r<<n&67108863,this.words[e+1]|=r>>>26-n&4194303),this.QH()},r.prototype.JH=function(t,i,s){this.words=[0],this.length=1;for(var e=0,r=1;r<=67108863;r*=i)e++;e--,r=r/i|0;for(var n=t.length-s,h=n%e,a=Math.min(n,n-h)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this.KH(l);if(0!==h){var c=1;for(l=o(t,u,t.length,i),u=0;u<h;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.KH(l)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.qH=function(t){a(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype.tW=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.QH=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.iW()},r.prototype.iW=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var r=0|t.words[0],n=0|i.words[0],h=r*n,o=67108863&h,a=h/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var v=l-f|0;u+=(h=(r=0|t.words[v])*(n=0|i.words[f])+c)/67108864|0,c=67108863&h}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.QH()}r.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var r=0,n=0,h=0;h<this.length;h++){var o=this.words[h],a=(16777215&(o<<r|n)).toString(16);e=0!=(n=o>>>24-r&16777215)||h!==this.length-1?u[6-a.length]+a+e:a+e,(r+=2)>=26&&(r-=26,h--)}for(0!==n&&(e=n.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var v=this.clone();for(v.negative=0;!v.isZero();){var A=v.modrn(f).toString(t);e=(v=v.idivn(f)).isZero()?A+e:u[l-A.length]+A+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},n&&(r.prototype.toBuffer=function(t,i){return this.toArrayLike(n,t,i)}),r.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},r.prototype.toArrayLike=function(t,i,e){this.QH();var r=this.byteLength(),n=e||Math.max(1,r);s(r<=n,"byte array longer than desired length"),s(n>0,"Requested array length <= 0");var h=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,n);return this["_toArrayLike"+("le"===i?"LE":"BE")](h,r),h},r.prototype.sW=function(t,i){for(var s=0,e=0,r=0,n=0;r<this.length;r++){var h=this.words[r]<<n|e;t[s++]=255&h,s<t.length&&(t[s++]=h>>8&255),s<t.length&&(t[s++]=h>>16&255),6===n?(s<t.length&&(t[s++]=h>>24&255),e=0,n=0):(e=h>>>24,n+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},r.prototype.eW=function(t,i){for(var s=t.length-1,e=0,r=0,n=0;r<this.length;r++){var h=this.words[r]<<n|e;t[s--]=255&h,s>=0&&(t[s--]=h>>8&255),s>=0&&(t[s--]=h>>16&255),6===n?(s>=0&&(t[s--]=h>>24&255),e=0,n=0):(e=h>>>24,n+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?r.prototype.rW=function(t){return 32-Math.clz32(t)}:r.prototype.rW=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},r.prototype.nW=function(t){if(0===t)return 26;var i=t,s=0;return 8191&i||(s+=13,i>>>=13),127&i||(s+=7,i>>>=7),15&i||(s+=4,i>>>=4),3&i||(s+=2,i>>>=2),1&i||s++,s},r.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.rW(t);return 26*(this.length-1)+i},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.nW(this.words[i]);if(t+=s,26!==s)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.QH()},r.prototype.ior=function(t){return s(!(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.QH()},r.prototype.iand=function(t){return s(!(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.QH()},r.prototype.ixor=function(t){return s(!(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.tW(i),e>0&&i--;for(var r=0;r<i;r++)this.words[r]=67108863&~this.words[r];return e>0&&(this.words[r]=~this.words[r]&67108863>>26-e),this.QH()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,r=t%26;return this.tW(e+1),this.words[e]=i?this.words[e]|1<<r:this.words[e]&~(1<<r),this.QH()},r.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.iW();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.iW();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)i=(0|s.words[n])+(0|e.words[n])+r,this.words[n]=67108863&i,r=i>>>26;for(;0!==r&&n<s.length;n++)i=(0|s.words[n])+r,this.words[n]=67108863&i,r=i>>>26;if(this.length=s.length,0!==r)this.words[this.length]=r,this.length++;else if(s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this},r.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.iW()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.iW();var s,e,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(s=this,e=t):(s=t,e=this);for(var n=0,h=0;h<e.length;h++)n=(i=(0|s.words[h])-(0|e.words[h])+n)>>26,this.words[h]=67108863&i;for(;0!==n&&h<s.length;h++)n=(i=(0|s.words[h])+n)>>26,this.words[h]=67108863&i;if(0===n&&h<s.length&&s!==this)for(;h<s.length;h++)this.words[h]=s.words[h];return this.length=Math.max(this.length,h),s!==this&&(this.negative=1),this.QH()},r.prototype.sub=function(t){return this.clone().isub(t)};var v=function(t,i,s){var e,r,n,h=t.words,o=i.words,a=s.words,l=0,u=0|h[0],c=8191&u,d=u>>>13,f=0|h[1],v=8191&f,A=f>>>13,g=0|h[2],y=8191&g,p=g>>>13,m=0|h[3],S=8191&m,b=m>>>13,x=0|h[4],M=8191&x,w=x>>>13,_=0|h[5],k=8191&_,C=_>>>13,T=0|h[6],F=8191&T,I=T>>>13,L=0|h[7],P=8191&L,B=L>>>13,D=0|h[8],E=8191&D,R=D>>>13,O=0|h[9],z=8191&O,V=O>>>13,N=0|o[0],G=8191&N,$=N>>>13,U=0|o[1],j=8191&U,Y=U>>>13,H=0|o[2],W=8191&H,X=H>>>13,Z=0|o[3],J=8191&Z,Q=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,rt=0|o[6],nt=8191&rt,ht=rt>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],vt=8191&ft,At=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var gt=(l+(e=Math.imul(c,G))|0)+((8191&(r=(r=Math.imul(c,$))+Math.imul(d,G)|0))<<13)|0;l=((n=Math.imul(d,$))+(r>>>13)|0)+(gt>>>26)|0,gt&=67108863,e=Math.imul(v,G),r=(r=Math.imul(v,$))+Math.imul(A,G)|0,n=Math.imul(A,$);var yt=(l+(e=e+Math.imul(c,j)|0)|0)+((8191&(r=(r=r+Math.imul(c,Y)|0)+Math.imul(d,j)|0))<<13)|0;l=((n=n+Math.imul(d,Y)|0)+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(y,G),r=(r=Math.imul(y,$))+Math.imul(p,G)|0,n=Math.imul(p,$),e=e+Math.imul(v,j)|0,r=(r=r+Math.imul(v,Y)|0)+Math.imul(A,j)|0,n=n+Math.imul(A,Y)|0;var pt=(l+(e=e+Math.imul(c,W)|0)|0)+((8191&(r=(r=r+Math.imul(c,X)|0)+Math.imul(d,W)|0))<<13)|0;l=((n=n+Math.imul(d,X)|0)+(r>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(S,G),r=(r=Math.imul(S,$))+Math.imul(b,G)|0,n=Math.imul(b,$),e=e+Math.imul(y,j)|0,r=(r=r+Math.imul(y,Y)|0)+Math.imul(p,j)|0,n=n+Math.imul(p,Y)|0,e=e+Math.imul(v,W)|0,r=(r=r+Math.imul(v,X)|0)+Math.imul(A,W)|0,n=n+Math.imul(A,X)|0;var mt=(l+(e=e+Math.imul(c,J)|0)|0)+((8191&(r=(r=r+Math.imul(c,Q)|0)+Math.imul(d,J)|0))<<13)|0;l=((n=n+Math.imul(d,Q)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(M,G),r=(r=Math.imul(M,$))+Math.imul(w,G)|0,n=Math.imul(w,$),e=e+Math.imul(S,j)|0,r=(r=r+Math.imul(S,Y)|0)+Math.imul(b,j)|0,n=n+Math.imul(b,Y)|0,e=e+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(p,W)|0,n=n+Math.imul(p,X)|0,e=e+Math.imul(v,J)|0,r=(r=r+Math.imul(v,Q)|0)+Math.imul(A,J)|0,n=n+Math.imul(A,Q)|0;var St=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((n=n+Math.imul(d,tt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(k,G),r=(r=Math.imul(k,$))+Math.imul(C,G)|0,n=Math.imul(C,$),e=e+Math.imul(M,j)|0,r=(r=r+Math.imul(M,Y)|0)+Math.imul(w,j)|0,n=n+Math.imul(w,Y)|0,e=e+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(b,W)|0,n=n+Math.imul(b,X)|0,e=e+Math.imul(y,J)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(p,J)|0,n=n+Math.imul(p,Q)|0,e=e+Math.imul(v,q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(A,q)|0,n=n+Math.imul(A,tt)|0;var bt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(r=(r=r+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((n=n+Math.imul(d,et)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(F,G),r=(r=Math.imul(F,$))+Math.imul(I,G)|0,n=Math.imul(I,$),e=e+Math.imul(k,j)|0,r=(r=r+Math.imul(k,Y)|0)+Math.imul(C,j)|0,n=n+Math.imul(C,Y)|0,e=e+Math.imul(M,W)|0,r=(r=r+Math.imul(M,X)|0)+Math.imul(w,W)|0,n=n+Math.imul(w,X)|0,e=e+Math.imul(S,J)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(b,J)|0,n=n+Math.imul(b,Q)|0,e=e+Math.imul(y,q)|0,r=(r=r+Math.imul(y,tt)|0)+Math.imul(p,q)|0,n=n+Math.imul(p,tt)|0,e=e+Math.imul(v,st)|0,r=(r=r+Math.imul(v,et)|0)+Math.imul(A,st)|0,n=n+Math.imul(A,et)|0;var xt=(l+(e=e+Math.imul(c,nt)|0)|0)+((8191&(r=(r=r+Math.imul(c,ht)|0)+Math.imul(d,nt)|0))<<13)|0;l=((n=n+Math.imul(d,ht)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(P,G),r=(r=Math.imul(P,$))+Math.imul(B,G)|0,n=Math.imul(B,$),e=e+Math.imul(F,j)|0,r=(r=r+Math.imul(F,Y)|0)+Math.imul(I,j)|0,n=n+Math.imul(I,Y)|0,e=e+Math.imul(k,W)|0,r=(r=r+Math.imul(k,X)|0)+Math.imul(C,W)|0,n=n+Math.imul(C,X)|0,e=e+Math.imul(M,J)|0,r=(r=r+Math.imul(M,Q)|0)+Math.imul(w,J)|0,n=n+Math.imul(w,Q)|0,e=e+Math.imul(S,q)|0,r=(r=r+Math.imul(S,tt)|0)+Math.imul(b,q)|0,n=n+Math.imul(b,tt)|0,e=e+Math.imul(y,st)|0,r=(r=r+Math.imul(y,et)|0)+Math.imul(p,st)|0,n=n+Math.imul(p,et)|0,e=e+Math.imul(v,nt)|0,r=(r=r+Math.imul(v,ht)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ht)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((n=n+Math.imul(d,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(E,G),r=(r=Math.imul(E,$))+Math.imul(R,G)|0,n=Math.imul(R,$),e=e+Math.imul(P,j)|0,r=(r=r+Math.imul(P,Y)|0)+Math.imul(B,j)|0,n=n+Math.imul(B,Y)|0,e=e+Math.imul(F,W)|0,r=(r=r+Math.imul(F,X)|0)+Math.imul(I,W)|0,n=n+Math.imul(I,X)|0,e=e+Math.imul(k,J)|0,r=(r=r+Math.imul(k,Q)|0)+Math.imul(C,J)|0,n=n+Math.imul(C,Q)|0,e=e+Math.imul(M,q)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(w,q)|0,n=n+Math.imul(w,tt)|0,e=e+Math.imul(S,st)|0,r=(r=r+Math.imul(S,et)|0)+Math.imul(b,st)|0,n=n+Math.imul(b,et)|0,e=e+Math.imul(y,nt)|0,r=(r=r+Math.imul(y,ht)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ht)|0,e=e+Math.imul(v,at)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(A,at)|0,n=n+Math.imul(A,lt)|0;var wt=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((n=n+Math.imul(d,dt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,G),r=(r=Math.imul(z,$))+Math.imul(V,G)|0,n=Math.imul(V,$),e=e+Math.imul(E,j)|0,r=(r=r+Math.imul(E,Y)|0)+Math.imul(R,j)|0,n=n+Math.imul(R,Y)|0,e=e+Math.imul(P,W)|0,r=(r=r+Math.imul(P,X)|0)+Math.imul(B,W)|0,n=n+Math.imul(B,X)|0,e=e+Math.imul(F,J)|0,r=(r=r+Math.imul(F,Q)|0)+Math.imul(I,J)|0,n=n+Math.imul(I,Q)|0,e=e+Math.imul(k,q)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(C,q)|0,n=n+Math.imul(C,tt)|0,e=e+Math.imul(M,st)|0,r=(r=r+Math.imul(M,et)|0)+Math.imul(w,st)|0,n=n+Math.imul(w,et)|0,e=e+Math.imul(S,nt)|0,r=(r=r+Math.imul(S,ht)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ht)|0,e=e+Math.imul(y,at)|0,r=(r=r+Math.imul(y,lt)|0)+Math.imul(p,at)|0,n=n+Math.imul(p,lt)|0,e=e+Math.imul(v,ct)|0,r=(r=r+Math.imul(v,dt)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,dt)|0;var _t=(l+(e=e+Math.imul(c,vt)|0)|0)+((8191&(r=(r=r+Math.imul(c,At)|0)+Math.imul(d,vt)|0))<<13)|0;l=((n=n+Math.imul(d,At)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(z,j),r=(r=Math.imul(z,Y))+Math.imul(V,j)|0,n=Math.imul(V,Y),e=e+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(R,W)|0,n=n+Math.imul(R,X)|0,e=e+Math.imul(P,J)|0,r=(r=r+Math.imul(P,Q)|0)+Math.imul(B,J)|0,n=n+Math.imul(B,Q)|0,e=e+Math.imul(F,q)|0,r=(r=r+Math.imul(F,tt)|0)+Math.imul(I,q)|0,n=n+Math.imul(I,tt)|0,e=e+Math.imul(k,st)|0,r=(r=r+Math.imul(k,et)|0)+Math.imul(C,st)|0,n=n+Math.imul(C,et)|0,e=e+Math.imul(M,nt)|0,r=(r=r+Math.imul(M,ht)|0)+Math.imul(w,nt)|0,n=n+Math.imul(w,ht)|0,e=e+Math.imul(S,at)|0,r=(r=r+Math.imul(S,lt)|0)+Math.imul(b,at)|0,n=n+Math.imul(b,lt)|0,e=e+Math.imul(y,ct)|0,r=(r=r+Math.imul(y,dt)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,dt)|0;var kt=(l+(e=e+Math.imul(v,vt)|0)|0)+((8191&(r=(r=r+Math.imul(v,At)|0)+Math.imul(A,vt)|0))<<13)|0;l=((n=n+Math.imul(A,At)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,W),r=(r=Math.imul(z,X))+Math.imul(V,W)|0,n=Math.imul(V,X),e=e+Math.imul(E,J)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(R,J)|0,n=n+Math.imul(R,Q)|0,e=e+Math.imul(P,q)|0,r=(r=r+Math.imul(P,tt)|0)+Math.imul(B,q)|0,n=n+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,r=(r=r+Math.imul(F,et)|0)+Math.imul(I,st)|0,n=n+Math.imul(I,et)|0,e=e+Math.imul(k,nt)|0,r=(r=r+Math.imul(k,ht)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ht)|0,e=e+Math.imul(M,at)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(w,at)|0,n=n+Math.imul(w,lt)|0,e=e+Math.imul(S,ct)|0,r=(r=r+Math.imul(S,dt)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,dt)|0;var Ct=(l+(e=e+Math.imul(y,vt)|0)|0)+((8191&(r=(r=r+Math.imul(y,At)|0)+Math.imul(p,vt)|0))<<13)|0;l=((n=n+Math.imul(p,At)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,J),r=(r=Math.imul(z,Q))+Math.imul(V,J)|0,n=Math.imul(V,Q),e=e+Math.imul(E,q)|0,r=(r=r+Math.imul(E,tt)|0)+Math.imul(R,q)|0,n=n+Math.imul(R,tt)|0,e=e+Math.imul(P,st)|0,r=(r=r+Math.imul(P,et)|0)+Math.imul(B,st)|0,n=n+Math.imul(B,et)|0,e=e+Math.imul(F,nt)|0,r=(r=r+Math.imul(F,ht)|0)+Math.imul(I,nt)|0,n=n+Math.imul(I,ht)|0,e=e+Math.imul(k,at)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(C,at)|0,n=n+Math.imul(C,lt)|0,e=e+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,dt)|0)+Math.imul(w,ct)|0,n=n+Math.imul(w,dt)|0;var Tt=(l+(e=e+Math.imul(S,vt)|0)|0)+((8191&(r=(r=r+Math.imul(S,At)|0)+Math.imul(b,vt)|0))<<13)|0;l=((n=n+Math.imul(b,At)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,q),r=(r=Math.imul(z,tt))+Math.imul(V,q)|0,n=Math.imul(V,tt),e=e+Math.imul(E,st)|0,r=(r=r+Math.imul(E,et)|0)+Math.imul(R,st)|0,n=n+Math.imul(R,et)|0,e=e+Math.imul(P,nt)|0,r=(r=r+Math.imul(P,ht)|0)+Math.imul(B,nt)|0,n=n+Math.imul(B,ht)|0,e=e+Math.imul(F,at)|0,r=(r=r+Math.imul(F,lt)|0)+Math.imul(I,at)|0,n=n+Math.imul(I,lt)|0,e=e+Math.imul(k,ct)|0,r=(r=r+Math.imul(k,dt)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,dt)|0;var Ft=(l+(e=e+Math.imul(M,vt)|0)|0)+((8191&(r=(r=r+Math.imul(M,At)|0)+Math.imul(w,vt)|0))<<13)|0;l=((n=n+Math.imul(w,At)|0)+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),r=(r=Math.imul(z,et))+Math.imul(V,st)|0,n=Math.imul(V,et),e=e+Math.imul(E,nt)|0,r=(r=r+Math.imul(E,ht)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ht)|0,e=e+Math.imul(P,at)|0,r=(r=r+Math.imul(P,lt)|0)+Math.imul(B,at)|0,n=n+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,r=(r=r+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,n=n+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(k,vt)|0)|0)+((8191&(r=(r=r+Math.imul(k,At)|0)+Math.imul(C,vt)|0))<<13)|0;l=((n=n+Math.imul(C,At)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,nt),r=(r=Math.imul(z,ht))+Math.imul(V,nt)|0,n=Math.imul(V,ht),e=e+Math.imul(E,at)|0,r=(r=r+Math.imul(E,lt)|0)+Math.imul(R,at)|0,n=n+Math.imul(R,lt)|0,e=e+Math.imul(P,ct)|0,r=(r=r+Math.imul(P,dt)|0)+Math.imul(B,ct)|0,n=n+Math.imul(B,dt)|0;var Lt=(l+(e=e+Math.imul(F,vt)|0)|0)+((8191&(r=(r=r+Math.imul(F,At)|0)+Math.imul(I,vt)|0))<<13)|0;l=((n=n+Math.imul(I,At)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,e=Math.imul(z,at),r=(r=Math.imul(z,lt))+Math.imul(V,at)|0,n=Math.imul(V,lt),e=e+Math.imul(E,ct)|0,r=(r=r+Math.imul(E,dt)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,dt)|0;var Pt=(l+(e=e+Math.imul(P,vt)|0)|0)+((8191&(r=(r=r+Math.imul(P,At)|0)+Math.imul(B,vt)|0))<<13)|0;l=((n=n+Math.imul(B,At)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,ct),r=(r=Math.imul(z,dt))+Math.imul(V,ct)|0,n=Math.imul(V,dt);var Bt=(l+(e=e+Math.imul(E,vt)|0)|0)+((8191&(r=(r=r+Math.imul(E,At)|0)+Math.imul(R,vt)|0))<<13)|0;l=((n=n+Math.imul(R,At)|0)+(r>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Dt=(l+(e=Math.imul(z,vt))|0)+((8191&(r=(r=Math.imul(z,At))+Math.imul(V,vt)|0))<<13)|0;return l=((n=Math.imul(V,At))+(r>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,a[0]=gt,a[1]=yt,a[2]=pt,a[3]=mt,a[4]=St,a[5]=bt,a[6]=xt,a[7]=Mt,a[8]=wt,a[9]=_t,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Lt,a[16]=Pt,a[17]=Bt,a[18]=Dt,0!==l&&(a[19]=l,s.length++),s};function A(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,r=0,n=0;n<s.length-1;n++){var h=r;r=0;for(var o=67108863&e,a=Math.min(n,i.length-1),l=Math.max(0,n-t.length+1);l<=a;l++){var u=n-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),r+=(h=(h=h+(c/67108864|0)|0)+(d>>>26)|0)>>>26,h&=67108863}s.words[n]=o,e=h,h=r}return 0!==e?s.words[n]=e:s.length--,s.QH()}function g(t,i,s){return A(t,i,s)}Math.imul||(v=f),r.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?v(this,t,i):s<63?f(this,t,i):s<1024?A(this,t,i):g(this,t,i)},r.prototype.mul=function(t){var i=new r(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},r.prototype.mulf=function(t){var i=new r(null);return i.words=new Array(this.length+t.length),g(this,t,i)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,h=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=h>>>26,this.words[r]=67108863&h}return 0!==e&&(this.words[r]=e,this.length++),i?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,r=s%26;i[s]=t.words[e]>>>r&1}return i}(t);if(0===i.length)return new r(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var n=s.sqr();e<i.length;e++,n=n.sqr())0!==i[e]&&(s=s.mul(n));return s},r.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,r=(t-e)/26,n=67108863>>>26-e<<26-e;if(0!==e){var h=0;for(i=0;i<this.length;i++){var o=this.words[i]&n,a=(0|this.words[i])-o<<e;this.words[i]=a|h,h=o>>>26-e}h&&(this.words[i]=h,this.length++)}if(0!==r){for(i=this.length-1;i>=0;i--)this.words[i+r]=this.words[i];for(i=0;i<r;i++)this.words[i]=0;this.length+=r}return this.QH()},r.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,i,e){var r;s("number"==typeof t&&t>=0),r=i?(i-i%26)/26:0;var n=t%26,h=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=e;if(r-=h,r=Math.max(0,r),a){for(var l=0;l<h;l++)a.words[l]=this.words[l];a.length=h}if(0===h);else if(this.length>h)for(this.length-=h,l=0;l<this.length;l++)this.words[l]=this.words[l+h];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var c=0|this.words[l];this.words[l]=u<<26-n|c>>>n,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.QH()},r.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,r=1<<i;return!(this.length<=e||!(this.words[e]&r))},r.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var r=67108863^67108863>>>i<<i;this.words[this.length-1]&=r}return this.QH()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.KH(t)},r.prototype.KH=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},r.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.QH()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype.hW=function(t,i,e){var r,n,h=t.length+e;this.tW(h);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+e])+o;var a=(0|t.words[r])*i;o=((n-=67108863&a)>>26)-(a/67108864|0),this.words[r+e]=67108863&n}for(;r<this.length-e;r++)o=(n=(0|this.words[r+e])+o)>>26,this.words[r+e]=67108863&n;if(0===o)return this.QH();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.QH()},r.prototype.oW=function(t,i){var s=(this.length,t.length),e=this.clone(),n=t,h=0|n.words[n.length-1];0!=(s=26-this.rW(h))&&(n=n.ushln(s),e.iushln(s),h=0|n.words[n.length-1]);var o,a=e.length-n.length;if("mod"!==i){(o=new r(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().hW(n,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[n.length+c])+(0|e.words[n.length+c-1]);for(d=Math.min(d/h|0,67108863),e.hW(n,d,c);0!==e.negative;)d--,e.negative=0,e.hW(n,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.QH(),e.QH(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},r.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(n=o.div.neg()),"div"!==i&&(h=o.mod.neg(),e&&0!==h.negative&&h.iadd(t)),{div:n,mod:h}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(n=o.div.neg()),{div:n,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(h=o.mod.neg(),e&&0!==h.negative&&h.isub(t)),{div:o.div,mod:h}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this.oW(t,i);var n,h,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),r=t.andln(1),n=s.cmp(e);return n<0||1===r&&0===n?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},r.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return i?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.QH(),i?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var n=new r(1),h=new r(0),o=new r(0),a=new r(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;!(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(n.isOdd()||h.isOdd())&&(n.iadd(u),h.isub(c)),n.iushrn(1),h.iushrn(1);for(var v=0,A=1;!(e.words[0]&A)&&v<26;++v,A<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o),h.isub(a)):(e.isub(i),o.isub(n),a.isub(h))}return{a:o,b:a,gcd:e.iushln(l)}},r.prototype.aW=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var n,h=new r(1),o=new r(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;!(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)h.isOdd()&&h.iadd(a),h.iushrn(1);for(var c=0,d=1;!(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),h.isub(o)):(e.isub(i),o.isub(h))}return(n=0===i.cmpn(1)?h:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var r=i.cmp(s);if(r<0){var n=i;i=s,s=n}else if(0===r||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,r=1<<i;if(this.length<=e)return this.tW(e+1),this.words[e]|=r,this;for(var n=r,h=e;0!==n&&h<this.length;h++){var o=0|this.words[h];n=(o+=n)>>>26,o&=67108863,this.words[h]=o}return 0!==n&&(this.words[h]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.QH(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var r=0|this.words[0];i=r===t?0:r<t?-1:1}return 0!==this.negative?0|-i:i},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],r=0|t.words[s];if(e!==r){e<r?i=-1:e>r&&(i=1);break}}return i},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new M(t)},r.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).lW(t)},r.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype.lW=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.lW(t)},r.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.uW(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.uW(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.cW(this),this.red.sqr(this)},r.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.cW(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.cW(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.cW(this),this.red.invm(this)},r.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.cW(this),this.red.neg(this)},r.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.cW(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function p(t,i){this.name=t,this.p=new r(i,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this.dW()}function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=r.fW(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.aW(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p.prototype.dW=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.QH(),s},p.prototype.split=function(t,i){t.iushrn(this.n,0,i)},p.prototype.imulK=function(t){return t.imul(this.k)},e(m,p),m.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),r=0;r<e;r++)i.words[r]=t.words[r];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(i.words[i.length++]=n&s,r=10;r<t.length;r++){var h=0|t.words[r];t.words[r-10]=(h&s)<<4|n>>>22,n=h}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(S,p),e(b,p),e(x,p),x.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,r=67108863&e;e>>>=26,t.words[s]=r,i=e}return 0!==i&&(t.words[t.length++]=i),t},r.fW=function(t){if(y[t])return y[t];var i;if("k256"===t)i=new m;else if("p224"===t)i=new S;else if("p192"===t)i=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new x}return y[t]=i,i},M.prototype.cW=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.uW=function(t,i){s(!(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).lW(this):(a(t,t.umod(this.m).lW(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).lW(this)},M.prototype.add=function(t,i){this.uW(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.lW(this)},M.prototype.iadd=function(t,i){this.uW(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.uW(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.lW(this)},M.prototype.isub=function(t,i){this.uW(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.cW(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.uW(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.uW(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var n=this.m.subn(1),h=0;!n.isZero()&&0===n.andln(1);)h++,n.iushrn(1);s(!n.isZero());var o=new r(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new r(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),v=h;0!==f.cmp(o);){for(var A=f,g=0;0!==A.cmp(o);g++)A=A.redSqr();s(g<v);var y=this.pow(c,new r(1).iushln(v-g-1));d=d.redMul(y),c=y.redSqr(),f=f.redMul(c),v=g}return d},M.prototype.invm=function(t){var i=t.aW(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new r(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new r(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var n=s[0],h=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;n!==s[0]&&(n=this.sqr(n)),0!==c||0!==h?(h<<=1,h|=c,(4==++o||0===e&&0===u)&&(n=this.mul(n,s[h]),o=0,h=0)):o=0}a=26}return n},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},r.mont=function(t){return new w(t)},e(w,M),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},w.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.lW(this)},w.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new r(0).lW(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=s.isub(e).iushrn(this.shift),h=n;return n.cmp(this.m)>=0?h=n.isub(this.m):n.cmpn(0)<0&&(h=n.iadd(this.m)),h.lW(this)},w.prototype.invm=function(t){return this.imod(t.aW(this.m).mul(this.r2)).lW(this)}}(Mx,WS);var wx=Mx.exports;function _x(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),r=e>>8,n=255&e;r?s.push(r,n):s.push(n)}return s}const kx=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const r=1<<i+1,n=t.clone();for(let t=0;t<e.length;t++){let i;const s=n.andln(r-1);n.isOdd()?(i=s>(r>>1)-1?(r>>1)-s:s,n.isubn(i)):i=0,e[t]=i,n.iushrn(1)}return e},Cx=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,r=0;for(;t.cmpn(-e)>0||i.cmpn(-r)>0;){let n,h,o=t.andln(3)+e&3,a=i.andln(3)+r&3;if(3===o&&(o=-1),3===a&&(a=-1),1&o){const i=t.andln(7)+e&7;n=3!==i&&5!==i||2!==a?o:-o}else n=0;if(s[0].push(n),1&a){const t=i.andln(7)+r&7;h=3!==t&&5!==t||2!==o?a:-a}else h=0;s[1].push(h),2*e===n+1&&(e=1-e),2*r===h+1&&(r=1-r),t.iushrn(1),i.iushrn(1)}return s};class Tx{constructor(t,i){this.type=t,this.p=new wx(i.p,16),this.red=i.prime?wx.red(i.prime):wx.mont(this.p),this.zero=new wx(0).toRed(this.red),this.one=new wx(1).toRed(this.red),this.two=new wx(2).toRed(this.red),this.n=i.n&&new wx(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.vW=new Array(4),this.AW=new Array(4),this.gW=new Array(4),this.yW=new Array(4),this.pW=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.mW=!0,this.redN=this.n.toRed(this.red))}SW(t,i){const s=t.bW(),e=kx(i,1,this.pW);let r=(1<<s.step+1)-(s.step%2==0?2:1);r/=3;const n=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let r=t+s.step-1;r>=t;r--)i=(i<<1)+e[r];n.push(i)}let h=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=r;t>0;t--){for(let i=0;i<n.length;i++){const e=n[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}h=h.add(o)}return h.toP()}xW(t,i){let s=4;const e=t.MW(s);s=e.wnd;const r=e.points,n=kx(i,s,this.pW);let h=this.jpoint(null,null,null);for(let s=n.length-1;s>=0;s--){for(let t=0;s>=0&&0===n[s];s--)t++;if(s>=0&&i++,h=h.dblp(i),s<0)break;const e=n[s];h="affine"===t.type?e>0?h.mixedAdd(r[e-1>>1]):h.mixedAdd(r[-e-1>>1].neg()):e>0?h.add(r[e-1>>1]):h.add(r[-e-1>>1].neg())}return"affine"===t.type?h.toP():h}wW(t,i,s,e,r){const n=this.vW,h=this.AW,o=this.gW;let a=0;for(let s=0;s<e;s++){const e=i[s].MW(t);n[s]=e.wnd,h[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,r=t;if(1!==n[e]||1!==n[r]){o[e]=kx(s[e],n[e],this.pW),o[r]=kx(s[r],n[r],this.pW),a=Math.max(o[e].length,a),a=Math.max(o[r].length,a);continue}const l=[i[e],null,null,i[r]];0===i[e].y.cmp(i[r].y)?(l[1]=i[e].add(i[r]),l[2]=i[e].toJ().mixedAdd(i[r].neg())):0===i[e].y.cmp(i[r].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[r]),l[2]=i[e].add(i[r].neg())):(l[1]=i[e].toJ().mixedAdd(i[r]),l[2]=i[e].toJ().mixedAdd(i[r].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=Cx(s[e],s[r]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[r]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[r][t]=0,h[e]=l}}let l=this.jpoint(null,null,null);const u=this.yW;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=h[t][i-1>>1]:i<0&&(s=h[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)h[t]=null;return r?l:l.toP()}decodePoint(t,i){t=_x(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Fx{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}_W(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this._W(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.MW(8),i.doubles=this.bW(4,t),i.beta=this.kW(),this.precomputed=i,this}TW(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}bW(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let r=0;r<i;r+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}MW(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}kW(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Ix extends Tx{constructor(t){super("short",t),this.a=new wx(t.a,16).toRed(this.red),this.b=new wx(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.FW(t),this.IW=new Array(4),this.LW=new Array(4)}pointFromJSON(t,i){return Lx.fromJSON(this,t,i)}FW(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new wx(t.beta,16).toRed(this.red);else{const t=this.PW(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new wx(t.lambda,16);else{const t=this.PW(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new wx(t.a,16),b:new wx(t.b,16)}))):this.BW(s),{beta:i,lambda:s,basis:e}}PW(t){const i=t===this.p?this.red:wx.mont(t),s=new wx(2).toRed(i).redInvm(),e=s.redNeg(),r=new wx(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(r).fromRed(),e.redSub(r).fromRed()]}BW(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,r,n,h,o,a,l,u,c=t,d=this.n.clone(),f=new wx(1),v=new wx(0),A=new wx(0),g=new wx(1),y=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=A.sub(t.mul(f));const h=g.sub(t.mul(v));if(!r&&l.cmp(i)<0)s=a.neg(),e=f,r=l.neg(),n=u;else if(r&&2==++y)break;a=l,d=c,c=l,A=f,f=u,g=v,v=h}h=l.neg(),o=u;const p=r.sqr().add(n.sqr());return h.sqr().add(o.sqr()).cmp(p)>=0&&(h=s,o=e),r.negative&&(r=r.neg(),n=n.neg()),h.negative&&(h=h.neg(),o=o.neg()),[{a:r,b:n},{a:h,b:o}]}DW(t){const i=this.endo.basis,s=i[0],e=i[1],r=e.b.mul(t).divRound(this.n),n=s.b.neg().mul(t).divRound(this.n),h=r.mul(s.a),o=n.mul(e.a),a=r.mul(s.b),l=n.mul(e.b);return{k1:t.sub(h).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new Lx(this,t,i,s)}pointFromX(t,i){(t=new wx(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const r=e.fromRed().isOdd();return(i&&!r||!i&&r)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),r=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(r).cmpn(0)}EW(t,i,s){const e=this.IW,r=this.LW;let n=0;for(n=0;n<t.length;n++){const s=this.DW(i[n]);let h=t[n],o=h.kW();s.k1.negative&&(s.k1.ineg(),h=h.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*n]=h,e[2*n+1]=o,r[2*n]=s.k1,r[2*n+1]=s.k2}const h=this.wW(1,e,r,2*n,s);for(let t=0;t<2*n;t++)e[t]=null,r[t]=null;return h}jpoint(t,i,s){return new Px(this,t,i,s)}}class Lx extends Fx{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new wx(i,16),this.y=new wx(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new Lx(this,t,i,s)}kW(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function r(i){return t.point(i[0],i[1],s)}const n=i[2];return e.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[e].concat(n.doubles.points.map(r))},naf:n.naf&&{wnd:n.naf.wnd,points:[e].concat(n.naf.points.map(r))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),r=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),n=r.redSqr().redISub(this.x.redAdd(this.x)),h=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,h)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new wx(t,16),this.isInfinity()?this:this.TW(t)?this.curve.SW(this,t):this.curve.endo?this.curve.EW([this],[t]):this.curve.xW(this,t)}mulAdd(t,i,s){const e=[this,i],r=[t,s];return this.curve.endo?this.curve.EW(e,r):this.curve.wW(1,e,r,2)}jmulAdd(t,i,s){const e=[this,i],r=[t,s];return this.curve.endo?this.curve.EW(e,r,!0):this.curve.wW(1,e,r,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Px extends Fx{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new wx(0)):(this.x=new wx(i,16),this.y=new wx(s,16),this.z=new wx(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new Px(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),r=t.x.redMul(s),n=this.y.redMul(i.redMul(t.z)),h=t.y.redMul(s.redMul(this.z)),o=e.redSub(r),a=n.redSub(h);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(n.redMul(u)),v=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,v)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),r=this.y,n=t.y.redMul(i).redMul(this.z),h=s.redSub(e),o=r.redSub(n);if(0===h.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=h.redSqr(),l=a.redMul(h),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(r.redMul(l)),f=this.z.redMul(h);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const r=this.y;let n=this.z,h=n.redSqr().redSqr(),o=r.redAdd(r);for(let s=0;s<t;s++){const r=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=r.redAdd(r).redIAdd(r).redIAdd(i.redMul(h)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let v=u.redMul(f);v=v.redIAdd(v).redISub(l);const A=o.redMul(n);s+1<t&&(h=h.redMul(l)),e=d,n=A,o=v}return this.curve.jpoint(e,o.redMul(s),n)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.RW():this.curve.threeA?this.OW():this.zW()}RW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let h=this.x.redAdd(r).redSqr().redISub(e).redISub(n);h=h.redIAdd(h);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(h).redISub(h);let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(h.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let h=this.x.redAdd(r).redSqr().redISub(e).redISub(n);h=h.redIAdd(h);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(h).redISub(h),i=o.redMul(h.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}OW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let h=this.x.redAdd(r).redSqr().redISub(e).redISub(n);h=h.redIAdd(h);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(h).redISub(h);t=a;let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(h.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),r=this.y.redSqr(),n=this.x.redMul(r);let h=this.x.redSub(e).redMul(this.x.redAdd(e));h=h.redAdd(h).redIAdd(h);let o=n.redIAdd(n);o=o.redIAdd(o);const a=o.redAdd(o);t=h.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(r).redISub(e);let l=r.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=h.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}zW(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,r=e.redSqr().redSqr(),n=i.redSqr(),h=s.redSqr(),o=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(r));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(h),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=h.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),v=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,v)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),r=t.redAdd(t).redIAdd(t),n=r.redSqr();let h=this.x.redAdd(i).redSqr().redISub(t).redISub(e);h=h.redIAdd(h),h=h.redAdd(h).redIAdd(h),h=h.redISub(n);const o=h.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=r.redIAdd(h).redSqr().redISub(n).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(h.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(h).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new wx(t,i),this.curve.xW(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),r=s.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),r=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(r),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Bx{constructor(t){this.curve=new Ix(t),this.g=this.curve.g,this.n=this.curve.n}}const Dx={};var Ex,Rx;Dx.PresetCurve=Bx,Ex="secp256k1",Rx={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Dx,Ex,{configurable:!0,enumerable:!0,get(){const t=new Bx(Rx);return Object.defineProperty(Dx,Ex,{configurable:!0,enumerable:!0,value:t}),t}});class Ox{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.VW(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Ox?i:new Ox(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}VW(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function zx(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let r=0,n=i.place;for(let i=0;i<e;i++,n++)r<<=8,r|=t[n],r>>>=0;return!(r<=127)&&(i.place=n,r)}class Vx{constructor(){this.place=0}}class Nx{constructor(t,i){if(t instanceof Nx)return t;this.NW(t,i)||(this.r=new wx(t.r,16),this.s=new wx(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}NW(t,i){t=_x(t,i);const s=new Vx;if(48!==t[s.place++])return!1;const e=zx(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const r=zx(t,s);if(!1===r)return!1;let n=t.slice(s.place,r+s.place);if(s.place+=r,2!==t[s.place++])return!1;const h=zx(t,s);if(!1===h)return!1;if(t.length!==h+s.place)return!1;let o=t.slice(s.place,h+s.place);if(0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new wx(n),this.s=new wx(o),this.recoveryParam=null,!0}}class Gx{constructor(t){if(!(this instanceof Gx))return new Gx(t);"string"==typeof t&&(t=Dx[t]),t instanceof Dx.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Ox.fromPublic(this,t,i)}GW(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.GW(new wx(t,16)),s=this.keyFromPublic(s,e);const r=(i=new Nx(i,"hex")).r,n=i.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;const h=n.invm(this.n),o=h.mul(t).umod(this.n),a=h.mul(r).umod(this.n);if(!this.curve.mW){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(r)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(r)}}var $x,Ux={exports:{}},jx={exports:{}};jx.exports=($x=$x||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==WS&&WS.crypto&&(s=WS.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),n={},h=n.lib={},o=h.Base={extend:function(t){var i=r(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=h.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,r=t.sigBytes;if(this.clamp(),e%4)for(var n=0;n<r;n++){var h=s[n>>>2]>>>24-n%4*8&255;i[e+n>>>2]|=h<<24-(e+n)%4*8}else for(var o=0;o<r;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=r,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=n.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],r=0;r<s;r++){var n=i[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16)),e.push((15&n).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],r=0;r<s;r++){var n=i[r>>>2]>>>24-r%4*8&255;e.push(String.fromCharCode(n))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=h.BufferedBlockAlgorithm=o.extend({reset:function(){this.JM=new a.init,this.$W=0},UW:function(t){"string"==typeof t&&(t=d.parse(t)),this.JM.concat(t),this.$W+=t.sigBytes},jW:function(i){var s,e=this.JM,r=e.words,n=e.sigBytes,h=this.blockSize,o=n/(4*h),l=(o=i?t.ceil(o):t.max((0|o)-this.YW,0))*h,u=t.min(4*l,n);if(l){for(var c=0;c<l;c+=h)this.HW(r,c);s=r.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.JM=this.JM.clone(),t},YW:0});h.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.WW()},update:function(t){return this.UW(t),this.jW(),this},finalize:function(t){return t&&this.UW(t),this.XW()},blockSize:16,ZW:function(t){return function(i,s){return new t.init(s).finalize(i)}},JW:function(t){return function(i,s){return new v.HMAC.init(t,s).finalize(i)}}});var v=n.algo={};return n}(Math),$x);var Yx={exports:{}};!function(t){var i;t.exports=(i=jx.exports,function(t){var s=i,e=s.lib,r=e.WordArray,n=e.Hasher,h=s.algo,o=[],a=[];!function(){function i(i){for(var s=t.sqrt(i),e=2;e<=s;e++)if(!(i%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,r=0;r<64;)i(e)&&(r<8&&(o[r]=s(t.pow(e,.5))),a[r]=s(t.pow(e,1/3)),r++),e++}();var l=[],u=h.SHA256=n.extend({WW:function(){this.QW=new r.init(o.slice(0))},HW:function(t,i){for(var s=this.QW.words,e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var v=l[f-15],A=(v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3,g=l[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[f]=A+l[f-7]+y+l[f-16]}var p=e&r^e&n^r&n,m=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),S=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=h+S|0,h=n,n=r,r=e,e=S+(m+p)|0}s[0]=s[0]+e|0,s[1]=s[1]+r|0,s[2]=s[2]+n|0,s[3]=s[3]+h|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},XW:function(){var i=this.JM,s=i.words,e=8*this.$W,r=8*i.sigBytes;return s[r>>>5]|=128<<24-r%32,s[14+(r+64>>>9<<4)]=t.floor(e/4294967296),s[15+(r+64>>>9<<4)]=e,i.sigBytes=4*s.length,this.jW(),this.QW},clone:function(){var t=n.clone.call(this);return t.QW=this.QW.clone(),t}});s.SHA256=n.ZW(u),s.HmacSHA256=n.JW(u)}(Math),i.SHA256)}(Yx);var Hx=Yx.exports;!function(t){var i,s,e,r,n,h;t.exports=(s=(i=h=jx.exports).lib.WordArray,e=i.algo,r=e.SHA256,n=e.SHA224=r.extend({WW:function(){this.QW=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},XW:function(){var t=r.XW.call(this);return t.sigBytes-=4,t}}),i.SHA224=r.ZW(n),i.HmacSHA224=r.JW(n),h.SHA224)}(Ux);var Wx=Ux.exports,Xx={exports:{}};!function(t){t.exports=jx.exports.enc.Hex}(Xx);var Zx=Xx.exports,Jx={exports:{}};!function(t){t.exports=jx.exports.enc.Utf8}(Jx);var Qx=Jx.exports,Kx={exports:{}};!function(t){var i,s,e;t.exports=(e=(s=i=jx.exports).lib.WordArray,s.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.et;t.clamp();for(var r=[],n=0;n<s;n+=3)for(var h=(i[n>>>2]>>>24-n%4*8&255)<<16|(i[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|i[n+2>>>2]>>>24-(n+2)%4*8&255,o=0;o<4&&n+.75*o<s;o++)r.push(e.charAt(h>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;r.length%4;)r.push(a);return r.join("")},parse:function(t){var i=t.length,s=this.et,r=this.KW;if(!r){r=this.KW=[];for(var n=0;n<s.length;n++)r[s.charCodeAt(n)]=n}var h=s.charAt(64);if(h){var o=t.indexOf(h);-1!==o&&(i=o)}return function(t,i,s){for(var r=[],n=0,h=0;h<i;h++)if(h%4){var o=s[t.charCodeAt(h-1)]<<h%4*2|s[t.charCodeAt(h)]>>>6-h%4*2;r[n>>>2]|=o<<24-n%4*8,n++}return e.create(r,n)}(t,i,r)},et:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)}({exports:{}});!function(t){var i;t.exports=(i=jx.exports,function(t){var s=i,e=s.lib,r=e.WordArray,n=e.Hasher,h=s.algo,o=[];!function(){for(var i=0;i<64;i++)o[i]=4294967296*t.abs(t.sin(i+1))|0}();var a=h.MD5=n.extend({WW:function(){this.QW=new r.init([1732584193,4023233417,2562383102,271733878])},HW:function(t,i){for(var s=0;s<16;s++){var e=i+s,r=t[e];t[e]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var n=this.QW.words,h=t[i+0],a=t[i+1],f=t[i+2],v=t[i+3],A=t[i+4],g=t[i+5],y=t[i+6],p=t[i+7],m=t[i+8],S=t[i+9],b=t[i+10],x=t[i+11],M=t[i+12],w=t[i+13],_=t[i+14],k=t[i+15],C=n[0],T=n[1],F=n[2],I=n[3];C=l(C,T,F,I,h,7,o[0]),I=l(I,C,T,F,a,12,o[1]),F=l(F,I,C,T,f,17,o[2]),T=l(T,F,I,C,v,22,o[3]),C=l(C,T,F,I,A,7,o[4]),I=l(I,C,T,F,g,12,o[5]),F=l(F,I,C,T,y,17,o[6]),T=l(T,F,I,C,p,22,o[7]),C=l(C,T,F,I,m,7,o[8]),I=l(I,C,T,F,S,12,o[9]),F=l(F,I,C,T,b,17,o[10]),T=l(T,F,I,C,x,22,o[11]),C=l(C,T,F,I,M,7,o[12]),I=l(I,C,T,F,w,12,o[13]),F=l(F,I,C,T,_,17,o[14]),C=u(C,T=l(T,F,I,C,k,22,o[15]),F,I,a,5,o[16]),I=u(I,C,T,F,y,9,o[17]),F=u(F,I,C,T,x,14,o[18]),T=u(T,F,I,C,h,20,o[19]),C=u(C,T,F,I,g,5,o[20]),I=u(I,C,T,F,b,9,o[21]),F=u(F,I,C,T,k,14,o[22]),T=u(T,F,I,C,A,20,o[23]),C=u(C,T,F,I,S,5,o[24]),I=u(I,C,T,F,_,9,o[25]),F=u(F,I,C,T,v,14,o[26]),T=u(T,F,I,C,m,20,o[27]),C=u(C,T,F,I,w,5,o[28]),I=u(I,C,T,F,f,9,o[29]),F=u(F,I,C,T,p,14,o[30]),C=c(C,T=u(T,F,I,C,M,20,o[31]),F,I,g,4,o[32]),I=c(I,C,T,F,m,11,o[33]),F=c(F,I,C,T,x,16,o[34]),T=c(T,F,I,C,_,23,o[35]),C=c(C,T,F,I,a,4,o[36]),I=c(I,C,T,F,A,11,o[37]),F=c(F,I,C,T,p,16,o[38]),T=c(T,F,I,C,b,23,o[39]),C=c(C,T,F,I,w,4,o[40]),I=c(I,C,T,F,h,11,o[41]),F=c(F,I,C,T,v,16,o[42]),T=c(T,F,I,C,y,23,o[43]),C=c(C,T,F,I,S,4,o[44]),I=c(I,C,T,F,M,11,o[45]),F=c(F,I,C,T,k,16,o[46]),C=d(C,T=c(T,F,I,C,f,23,o[47]),F,I,h,6,o[48]),I=d(I,C,T,F,p,10,o[49]),F=d(F,I,C,T,_,15,o[50]),T=d(T,F,I,C,g,21,o[51]),C=d(C,T,F,I,M,6,o[52]),I=d(I,C,T,F,v,10,o[53]),F=d(F,I,C,T,b,15,o[54]),T=d(T,F,I,C,a,21,o[55]),C=d(C,T,F,I,m,6,o[56]),I=d(I,C,T,F,k,10,o[57]),F=d(F,I,C,T,y,15,o[58]),T=d(T,F,I,C,w,21,o[59]),C=d(C,T,F,I,A,6,o[60]),I=d(I,C,T,F,x,10,o[61]),F=d(F,I,C,T,f,15,o[62]),T=d(T,F,I,C,S,21,o[63]),n[0]=n[0]+C|0,n[1]=n[1]+T|0,n[2]=n[2]+F|0,n[3]=n[3]+I|0},XW:function(){var i=this.JM,s=i.words,e=8*this.$W,r=8*i.sigBytes;s[r>>>5]|=128<<24-r%32;var n=t.floor(e/4294967296),h=e;s[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),s[14+(r+64>>>9<<4)]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),i.sigBytes=4*(s.length+1),this.jW();for(var o=this.QW,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=n.clone.call(this);return t.QW=this.QW.clone(),t}});function l(t,i,s,e,r,n,h){var o=t+(i&s|~i&e)+r+h;return(o<<n|o>>>32-n)+i}function u(t,i,s,e,r,n,h){var o=t+(i&e|s&~e)+r+h;return(o<<n|o>>>32-n)+i}function c(t,i,s,e,r,n,h){var o=t+(i^s^e)+r+h;return(o<<n|o>>>32-n)+i}function d(t,i,s,e,r,n,h){var o=t+(s^(i|~e))+r+h;return(o<<n|o>>>32-n)+i}s.MD5=n.ZW(a),s.HmacMD5=n.JW(a)}(Math),i.MD5)}({exports:{}});!function(t){var i,s,e,r,n,h,o,a;t.exports=(s=(i=a=jx.exports).lib,e=s.WordArray,r=s.Hasher,n=i.algo,h=[],o=n.SHA1=r.extend({WW:function(){this.QW=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},HW:function(t,i){for(var s=this.QW.words,e=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)h[l]=0|t[i+l];else{var u=h[l-3]^h[l-8]^h[l-14]^h[l-16];h[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+h[l];c+=l<20?1518500249+(r&n|~r&o):l<40?1859775393+(r^n^o):l<60?(r&n|r&o|n&o)-1894007588:(r^n^o)-899497514,a=o,o=n,n=r<<30|r>>>2,r=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+r|0,s[2]=s[2]+n|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},XW:function(){var t=this.JM,i=t.words,s=8*this.$W,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.jW(),this.QW},clone:function(){var t=r.clone.call(this);return t.QW=this.QW.clone(),t}}),i.SHA1=r.ZW(o),i.HmacSHA1=r.JW(o),a.SHA1)}({exports:{}});!function(t){var i,s,e;t.exports=(s=(i=jx.exports).lib.Base,e=i.enc.Utf8,void(i.algo.HMAC=s.extend({init:function(t,i){t=this.qW=new t.init,"string"==typeof i&&(i=e.parse(i));var s=t.blockSize,r=4*s;i.sigBytes>r&&(i=t.finalize(i)),i.clamp();for(var n=this.tX=i.clone(),h=this.iX=i.clone(),o=n.words,a=h.words,l=0;l<s;l++)o[l]^=1549556828,a[l]^=909522486;n.sigBytes=h.sigBytes=r,this.reset()},reset:function(){var t=this.qW;t.reset(),t.update(this.iX)},update:function(t){return this.qW.update(t),this},finalize:function(t){var i=this.qW,s=i.finalize(t);return i.reset(),i.finalize(this.tX.clone().concat(s))}})))}({exports:{}}),function(t){var i,s,e,r,n,h,o,a;t.exports=(e=(s=(i=a=jx.exports).lib).Base,r=s.WordArray,h=(n=i.algo).MD5,o=n.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:h,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,n=e.hasher.create(),h=r.create(),o=h.words,a=e.keySize,l=e.iterations;o.length<a;){s&&n.update(s),s=n.update(t).finalize(i),n.reset();for(var u=1;u<l;u++)s=n.finalize(s),n.reset();h.concat(s)}return h.sigBytes=4*a,h}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},a.EvpKDF)}({exports:{}});!function(t){var i;t.exports=void((i=jx.exports).lib.Cipher||function(){var t=i,s=t.lib,e=s.Base,r=s.WordArray,n=s.BufferedBlockAlgorithm,h=t.enc;h.Utf8;var o=h.Base64,a=t.algo.EvpKDF,l=s.Cipher=n.extend({cfg:e.extend(),createEncryptor:function(t,i){return this.create(this.sX,t,i)},createDecryptor:function(t,i){return this.create(this.eX,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.rX=t,this.nX=i,this.reset()},reset:function(){n.reset.call(this),this.WW()},process:function(t){return this.UW(t),this.jW()},finalize:function(t){return t&&this.UW(t),this.XW()},keySize:4,ivSize:4,sX:1,eX:2,ZW:function(){function t(t){return"string"==typeof t?p:g}return function(i){return{encrypt:function(s,e,r){return t(e).encrypt(i,s,e,r)},decrypt:function(s,e,r){return t(e).decrypt(i,s,e,r)}}}}()});s.StreamCipher=l.extend({XW:function(){return this.jW(!0)},blockSize:1});var u=t.mode={},c=s.BlockCipherMode=e.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.hX=t,this.oX=i}}),d=u.CBC=function(){var t=c.extend();function i(t,i,s){var e,r=this.oX;r?(e=r,this.oX=undefined):e=this.aX;for(var n=0;n<s;n++)t[i+n]^=e[n]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.hX,r=e.blockSize;i.call(this,t,s,r),e.encryptBlock(t,s),this.aX=t.slice(s,s+r)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.hX,r=e.blockSize,n=t.slice(s,s+r);e.decryptBlock(t,s),i.call(this,t,s,r),this.aX=n}}),t}(),f=(t.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,n=e<<24|e<<16|e<<8|e,h=[],o=0;o<e;o+=4)h.push(n);var a=r.create(h,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};s.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.rX==this.sX?t=e.createEncryptor:(t=e.createDecryptor,this.YW=1),this.lX&&this.lX.uX==t?this.lX.init(this,s&&s.words):(this.lX=t.call(e,this,s&&s.words),this.lX.uX=t)},HW:function(t,i){this.lX.processBlock(t,i)},XW:function(){var t,i=this.cfg.padding;return this.rX==this.sX?(i.pad(this.JM,this.blockSize),t=this.jW(!0)):(t=this.jW(!0),i.unpad(t)),t},blockSize:4});var v=s.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),A=(t.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(o)},parse:function(t){var i,s=o.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),v.create({ciphertext:s,salt:i})}},g=s.SerializableCipher=e.extend({cfg:e.extend({format:A}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var r=t.createEncryptor(s,e),n=r.finalize(i),h=r.cfg;return v.create({ciphertext:n,key:s,iv:h.iv,algorithm:t,mode:h.mode,padding:h.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.cX(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},cX:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),y=(t.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var n=a.create({keySize:i+s}).compute(t,e),h=r.create(n.words.slice(i),4*s);return n.sigBytes=4*i,v.create({key:n,iv:h,salt:e})}},p=s.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(t,i,s,e){var r=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=r.iv;var n=g.encrypt.call(this,t,i,r.key,e);return n.mixIn(r),n},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.cX(i,e.format);var r=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=r.iv,g.decrypt.call(this,t,i,r.key,e)}})}())}({exports:{}}),function(t){var i;t.exports=(i=jx.exports,function(){var t=i,s=t.lib.BlockCipher,e=t.algo,r=[],n=[],h=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var v=e^e<<1^e<<2^e<<3^e<<4;v=v>>>8^255&v^99,r[s]=v,n[v]=s;var A=t[s],g=t[A],y=t[g],p=257*t[v]^16843008*v;h[s]=p<<24|p>>>8,o[s]=p<<16|p>>>16,a[s]=p<<8|p>>>24,l[s]=p,p=16843009*y^65537*g^257*A^16843008*s,u[v]=p<<24|p>>>8,c[v]=p<<16|p>>>16,d[v]=p<<8|p>>>24,f[v]=p,s?(s=A^t[t[t[y^A]]],e^=t[t[e]]):s=e=1}}();var v=[0,1,2,4,8,16,32,64,128,27,54],A=e.AES=s.extend({WW:function(){if(!this.dX||this.fX!==this.nX){for(var t=this.fX=this.nX,i=t.words,s=t.sigBytes/4,e=4*((this.dX=s+6)+1),n=this.vX=[],h=0;h<e;h++)h<s?n[h]=i[h]:(l=n[h-1],h%s?s>6&&h%s==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=v[h/s|0]<<24),n[h]=n[h-s]^l);for(var o=this.AX=[],a=0;a<e;a++){if(h=e-a,a%4)var l=n[h];else l=n[h-4];o[a]=a<4||h<=4?l:u[r[l>>>24]]^c[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,i){this.gX(t,i,this.vX,h,o,a,l,r)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.gX(t,i,this.AX,u,c,d,f,n),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},gX:function(t,i,s,e,r,n,h,o){for(var a=this.dX,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,v=1;v<a;v++){var A=e[l>>>24]^r[u>>>16&255]^n[c>>>8&255]^h[255&d]^s[f++],g=e[u>>>24]^r[c>>>16&255]^n[d>>>8&255]^h[255&l]^s[f++],y=e[c>>>24]^r[d>>>16&255]^n[l>>>8&255]^h[255&u]^s[f++],p=e[d>>>24]^r[l>>>16&255]^n[u>>>8&255]^h[255&c]^s[f++];l=A,u=g,c=y,d=p}A=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],g=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],y=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],p=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=A,t[i+1]=g,t[i+2]=y,t[i+3]=p},keySize:8});t.AES=s.ZW(A)}(),i.AES)}(Kx);var qx=Kx.exports,tM={exports:{}};!function(t){var i,s,e;t.exports=((e=jx.exports).mode.CTR=(s=(i=e.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.hX,e=s.blockSize,r=this.oX,n=this.yX;r&&(n=this.yX=r.slice(0),this.oX=void 0);var h=n.slice(0);s.encryptBlock(h,0),n[e-1]=n[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=h[o]}}),i.Decryptor=s,i),e.mode.CTR)}(tM);var iM=tM.exports,sM={exports:{}};!function(t){var i;t.exports=(i=jx.exports,function(){if("function"==typeof ArrayBuffer){var t=i.lib.WordArray,s=t.init,e=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],r=0;r<i;r++)e[r>>>2]|=t[r]<<24-r%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=t}}(),i.lib.WordArray)}(sM);var eM=sM.exports,rM={exports:{}};!function(t){var i;t.exports=((i=jx.exports).pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding)}(rM);var nM=rM.exports;const hM="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",oM=9e5,aM={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAyNTExMjU="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vcHl0aG9uLWNoYXJ0cy8="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI=","aG9zdA==","dG9w"],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Q2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ==","dW5leHBlY3RlZA==","ZXJyb3I="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA==","aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vcGx1Z2lu"]},lM=Or,uM=(...t)=>t.slice(1).reduce(((i,s)=>i+lM.atob(aM[t[0]][s].toString())),"");let cM,dM,fM,vM=new Uint8Array([]);const AM=t=>t&&"cGx1Z2lu"in t&&"cHl0aG9u"===t.cGx1Z2lu?uM(-2,3):uM(-2,2);class gM{set e(t){cM=t}get e(){dM={Zo:!1,Jo:!1,Qo:!1,Ko:!1,qo:!1,ta:!1,ia:!1,sa:!1,ea:!1,ra:!1,na:!1,ha:!1,oa:!1,aa:!1,la:!1,ua:!1,ca:!1,da:!1,fa:!1,va:!1,Aa:!1,ga:!1,ya:!1,pa:!1,ma:!1,Sa:!1,ba:!1};const t=vM.length,i=t>=1?vM[0]:void 0,s=t>=2?vM[1]:void 0,e=t>=3?vM[2]:void 0,r=t>=4?vM[3]:void 0;return void 0!==i&&(dM.Zo=!!(1&i),dM.Jo=!!(2&i),dM.Qo=!!(4&i),dM.Ko=!!(8&i),dM.qo=!!(16&i),dM.ta=!!(32&i),dM.ia=!!(64&i),dM.sa=!!(128&i)),void 0!==s&&(dM.ea=!!(1&s),dM.ra=!!(2&s),dM.na=!!(4&s),dM.ha=!!(8&s),dM.oa=!!(16&s),dM.aa=!!(32&s),dM.la=!!(64&s),dM.ua=!!(128&s)),void 0!==e&&(dM.ca=!!(1&e),dM.da=!!(2&e),dM.fa=!!(4&e),dM.va=!!(8&e),dM.Aa=!!(16&e),dM.ga=!!(32&e),dM.ya=!!(64&e),dM.pa=!!(128&e)),void 0!==r&&(dM.ma=!!(1&r),dM.Sa=!!(2&r),dM.ba=!!(4&r)),dM.ta}set l(t){fM=t}get l(){return fM}}let yM=!1;const pM=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},mM=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},SM=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),bM=t=>{const i={},s=t.split("-");if(3!==s.length)return{pX:uM(0,0,1,7,1,12,5)};let e=0;const r=Uint8Array.from(lM.atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const n=r.subarray(e,e+=20),h=new DataView(r.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(h));for(let t=0;t<h;t+=1)o[t]=r[t+e]^n[t%n.byteLength];const a=new DataView(o.buffer);i.mX=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),vM=new Uint8Array(l);const u=mM(o.subarray(e,e+=4)),c=uM(-3,0);if(!u)return{pX:uM(0,0,1,7,1,12,5)};if(u<c)return{pX:uM(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=mM(o.subarray(e,e+=4)),i=SM(new Date);if(!t)return{pX:uM(0,0,1,7,1,12,5)};if(t<i)return{pX:uM(0,0,1,2,1,3,1,4,5),SX:AM()}}i.bX=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(lM.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return wM(d,f)?i:{pX:uM(0,0,1,7,1,12,5)}},xM=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(pM(s,2)),i=t.slice(36,40),e=new Uint8Array(4),r=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return~e>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,r,!0);const n=t.slice(28,34);let h=0;for(let t=n.length-1;t>0;t-=1)h+=n[t]*2**(8*t);const o=new Date(h);if(SM(o)<uM(-3,0))return{pX:uM(0,0,1,2,1,3,1,4,5),SX:AM()};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return bM(t);default:return{pX:uM(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{pX:uM(0,0,1,2,1,7,1,12,5)}},MM=t=>{if(!t)return{pX:uM(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[uM(-1,9)]||t[uM(-1,37)]).map((t=>(t||"").trim())),s=lM[uM(-1,41)];try{if(s&&i.indexOf(s[uM(-1,6)][uM(-1,7)])>-1)return{xX:!0}}catch(t){}if(i.indexOf(lM[uM(-1,6)][uM(-1,7)])>-1)return{xX:!0};const e=i.filter((t=>t.indexOf("*")>-1));try{if(s&&FM(s[uM(-1,6)][uM(-1,7)],e))return{xX:!0}}catch(t){}if(FM(lM[uM(-1,6)][uM(-1,7)],e))return{xX:!0};const r=t[uM(-1,8)]||t[uM(-1,38)];if(""!==r&&null!=r){try{if(s&&FM(s[uM(-1,6)][uM(-1,7)],[r]))return{xX:!1}}catch(t){}if(FM(lM[uM(-1,6)][uM(-1,7)],[r]))return{xX:!1};try{if(s&&r===s[uM(-1,6)][uM(-1,7)])return{xX:!1}}catch(t){}if(r===lM[uM(-1,6)][uM(-1,7)])return{xX:!1}}return{pX:uM(0,14,1,20,5),SX:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},wM=(t,i)=>{const s=new Gx("secp256k1").keyFromPublic(uM(-4,0),"hex"),e=Wx(t).toString();return s.verify(e,i)},_M=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],r=i[2],n=i[3];if(!wM(r,n))return{pX:uM(0,21,1,2,1,7,1,12,5)};const h=Zx.parse(r);s=qx.decrypt({ciphertext:Zx.parse(e)},h,{mode:iM,padding:nM,iv:Zx.parse("00000000000000000000000000000001")}).toString(Qx)}catch(t){return{pX:uM(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{pX:uM(0,21,1,2,1,7,1,12,5)}}if(void 0===i[uM(-1,5)]||null===i[uM(-1,4)]||!i[uM(-1,9)])return{pX:uM(0,21,1,2,1,7,1,12,5)};const e=parseInt(uM(-3,0),10)||Number(parseInt(uM(-3,0),10));return i[uM(-1,5)]<e?{pX:uM(0,21,1,2,1,3,1,4,5)}:MM(i)})(t);case"0002":return(t=>{const i=bM(t),s=i.mX,e=i.bX;if(i.pX||void 0===s||void 0===e)return i;let r,n="";try{const t=s.slice(i.bX,e+16),r=new DataView(t.buffer),h=new Int32Array(4);for(let t=0;t<h.length;t+=1)h[t]=r.getInt32(4*t,!1);const o=eM.create(Array.from(h)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=eM.create(Array.from(c)),f=qx.decrypt({ciphertext:d},o,{mode:iM,padding:nM,iv:Zx.parse("00000000000000000000000000000001")});n=lM.atob(f.toString(Qx))}catch(t){return{pX:uM(0,21,1,2,1,7,1,12,5)}}try{r=JSON.parse(n)}catch(t){return{pX:uM(0,21,1,2,1,7,1,12,5)}}return r[uM(-1,37)]?MM(r):{pX:uM(0,21,1,2,1,7,1,12,5)}})(t);default:return{pX:uM(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},kM=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{pX:uM(0,39,1,40,1,41,5),SX:hM};const s=t.split("-"),e=s[1].slice(1),r=s[2],n=s[3];if(!wM(`${e}-${r}`,n))return{pX:uM(0,21,1,2,1,7,1,12,5)};const h=Uint8Array.from(pM(r,2));let o=0;for(let t=h.length-1;t>0;t-=1)o+=h[t]*2**(8*t);if(o<(parseInt(uM(-3,0),10)||Number(parseInt(uM(-3,0),10))))return{pX:uM(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(pM(e,8)),l=Hx(i[uM(-1,31)]).toString(Zx),u=Int32Array.from(pM(l,8)),c=Hx(i[uM(-1,32)]).toString(Zx),d=Int32Array.from(pM(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{pX:uM(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{pX:uM(0,39,1,40,1,41,5),SX:hM};const s=bM(t),e=s.mX,r=s.bX;if(s.pX||void 0===e||void 0===r)return s;const n=e.slice(r,e.length),h=new DataView(n.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=h.getInt32(4*t,!1);const a=Hx(i[uM(-1,31)]).toString(Zx),l=Int32Array.from(pM(a,8)),u=Hx(i[uM(-1,32)]).toString(Zx),c=Int32Array.from(pM(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{pX:uM(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{pX:uM(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},CM=(t,i,s=!0,e)=>{yM=!1,i.wl();const r=i.mo,n=!!r&&(r===Or.document.body||Or.document.body.contains(r)),h=r&&n?r:document.body;if(void 0===Array.from(h.children).find((t=>"lcjs-error"===t.id))){const r=Or.document.createElement("div");r.id="lcjs-error",h.append(r),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="black",r.style.boxSizing="border-box",r.style.padding="20px",r.style.font="Arial",r.style.fontSize="20px";let n,o=(t||"LICENSE_ERROR").split("_").join(" ");if(o=(s?uM(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1),e){const t=Or.document.createElement("a");t.href=e,n=t}else n=Or.document.createElement("p1");r.append(n),n.innerHTML=o,n.style.color="red",i.UH()&&lM.console.error(o)}},TM=(t,i,s)=>{i?(t[uM(-1,17)](uM(-1,19),s),t[uM(-1,17)](uM(-1,20),s),t[uM(-1,17)](uM(-1,21),s),t[uM(-1,17)](uM(-1,22),s)):(t[uM(-1,18)](uM(-1,19),s),t[uM(-1,18)](uM(-1,20),s),t[uM(-1,18)](uM(-1,21),s),t[uM(-1,18)](uM(-1,22),s))},FM=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const r=i.findIndex((t=>"*"===t)),n=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(r>s.length-1||!n)}))},IM=new Map;return t.AbstractCursor=Cf,t.Animation=pr,t.AnimationEasings=yr,t.Animator=mr,t.AreaRangeSeries=nA,t.Axis=Ec,t.Axis3D=Qd,t.AxisScrollStrategies=vl,t.AxisTickStrategies=Al,t.Band=al,t.BarChart=Iy,t.BarChartBar=Ty,t.BarChartCategoryAxis=ky,t.BarChartSorting=Ly,t.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},t.BarChartValueAxis=Cy,t.BorderedPicture=Eu,t.BoxFigure=Iv,t.BoxSeries=Dv,t.BoxSeries3D=Yd,t.Button=bc,t.Chart=$d,t.Chart3D=Rf,t.ChartComponent=Bo,t.ChartWithSeries=cf,t.ChartXY=LA,t.Color=ye,t.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return me(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return me(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,r=t/60,n=e*(1-Math.abs(r%2-1));let h=[];isNaN(t)?h=[0,0,0]:r<=1?h=[e,n,0]:r<=2?h=[n,e,0]:r<=3?h=[0,e,n]:r<=4?h=[0,n,e]:r<=5?h=[n,0,e]:r<=6&&(h=[e,0,n]);const o=s-.5*e;return[Math.round(255*(h[0]+o)),Math.round(255*(h[1]+o)),Math.round(255*(h[2]+o))]})(i[0],i[1],i[2]);return me(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?Se(t):Se((t=>{const i=Me[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),Se("#fff")},t.ColorHEX=Se,t.ColorHSV=be,t.ColorPalettes=Go,t.ColorRGBA=me,t.ColorShadingStyles=Jo,t.ColorUint32=xe,t.ConstantLine=ll,t.Cursor2D=zf,t.Cursor3D=If,t.CursorBuilder2D=Vf,t.CursorBuilder3D=Lf,t.CursorBuilderXY=fA,t.CursorBuilders=ry,t.CursorXY=dA,t.CustomTick=$l,t.Dashboard=_p,t.DashedLine=ca,t.DataGrid=by,t.DataSetXY=Nu,t.DateTimeTickStrategy=Ad,t.EllipseFigure=Ev,t.EllipseSeries=Rv,t.EmptyFill=no,t.EmptyTickStrategy=kl,t.EmptyUIElement=Ql,t.Eventer=Ar,t.Figure=Fv,t.FigureSeries=Bv,t.FontSettings=Te,t.FormattingFunctions=Jh,t.FunnelChart=hg,t.FunnelChartTypes=dg,t.FunnelChartWithLabelsInsideSlices=cg,t.FunnelChartWithLabelsOnSides=ug,t.FunnelSlice=KA,t.GaugeChart=Uy,t.GenericAxis=Il,t.GlowEffect=ya,t.HeatmapGridSeries=tA,t.HeatmapGridSeriesIntensityValues=iA,t.HeatmapScrollingGridSeries=sA,t.HeatmapScrollingGridSeriesIntensityValues=eA,t.Highlighter=Do,t.Icon=va,t.ImageFill=xr,t.IndividualPointFill=fo,t.LUT=io,t.Legend=zd,t.LegendEntryClickBehaviors=Od,t.LineAndPointSeries3D=rf,t.LineSeries3D=nf,t.LinearGradientFill=Oe,t.LinearGradientFillPalette=(t,i,s,e)=>{const r=t(i+1,e);return t=>new Oe({stops:[{offset:0,color:r(t).getDarker()},{offset:.5,color:r(t)},{offset:1,color:r(t).getDarker()}],angle:s||90})},t.MapChart=cv,t.MapRegions=ev,t.MapRegionsAfrica=Xf,t.MapRegionsAsia=Zf,t.MapRegionsAustralia=Jf,t.MapRegionsCanada=Qf,t.MapRegionsEurope=Kf,t.MapRegionsNorthAmerica=iv,t.MapRegionsSouthAmerica=sv,t.MapRegionsUSA=tv,t.MapRegionsWorld=qf,t.MapTypes=rv,t.MeshModel3D=wf,t.NumericTickStrategy=Md,t.OHLCSeries=hA,t.OHLCSeriesBars=aA,t.OHLCSeriesCandlesticks=oA,t.OHLCSeriesTypes=lA,t.OnScreenMenu=gA,t.OnScreenMenuAnimationsButton=Wa,t.OnScreenMenuButton=Va,t.OnScreenMenuControlBase=_a,t.OnScreenMenuCustomButton=Za,t.OnScreenMenuOsmToggleButton=Ja,t.OnScreenMenuToggleButton=Na,t.OnScreenMenuZoomInButton=Ga,t.OnScreenMenuZoomInXButton=$a,t.OnScreenMenuZoomInYButton=Ua,t.OnScreenMenuZoomOutButton=ja,t.OnScreenMenuZoomOutXButton=Ya,t.OnScreenMenuZoomOutYButton=Ha,t.OnScreenMenuZoomToFitButton=Xa,t.PalettedFill=go,t.Panel=Vd,t.ParallelCoordinateAxis=Xy,t.ParallelCoordinateChart=Jy,t.ParallelCoordinateSeries=Zy,t.PhongShadingStyle=Xo,t.Picture=Du,t.PieChart=op,t.PieChartTypes=cp,t.PieChartWithLabelsInsideSlices=up,t.PieChartWithLabelsOnSides=lp,t.PieSlice=Ag,t.PixelatedPoints3D=ea,t.PointCloudSeries3D=lf,t.PointLineAreaSeries=yA,t.PointLineSeries3D=hf,t.PointSeries3D=af,t.PointSeriesTypes3D=uf,t.PointStyle3D=na,t.PolarAreaSeries=kv,t.PolarAreaSeriesInterior=Cv,t.PolarAxis=vv,t.PolarAxisAmplitude=gv,t.PolarAxisTick=Av,t.PolarChart=XA,t.PolarHeatmapSeries=GA,t.PolarLineSeries=Tv,t.PolarPointLineSeries=VA,t.PolarPointSeries=NA,t.PolarPolygon=pv,t.PolarPolygonSeries=_v,t.PolarSector=WA,t.PolarSeries=Sv,t.PolygonFigure=Ov,t.PolygonSeries=zv,t.PyramidChart=bg,t.PyramidChartTypes=Cg,t.PyramidChartWithLabelsInsideSlices=kg,t.PyramidChartWithLabelsOnSides=_g,t.PyramidSlice=yg,t.RadialGradientFill=De,t.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new De({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},t.RangeSeries=rA,t.RectangleFigure=Vv,t.RectangleSeries=Nv,t.SegmentFigure=Gv,t.SegmentSeries=$v,t.Series2D=mv,t.Series3D=jd,t.SeriesXY=Lv,t.SimpleShadingStyle=Ho,t.Slice=QA,t.SliceLabelFormatters=sg,t.SliceSorters=ig,t.SolidFill=uo,t.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new uo({color:e(t)})},t.SolidLine=oa,t.SpiderAxis=Ig,t.SpiderChart=Gg,t.SpiderSeries=Bg,t.StipplePatterns=la,t.SurfaceGridSeries3D=gf,t.SurfaceScrollingGridSeries3D=yf,t.TextFigure=jv,t.TextSeries=Yv,t.Themes=my,t.Tick=Dc,t.TickStyle=$c,t.TimeFormattingFunctions=qc,t.TimeTickStrategy=id,t.TreeMapChart=Gy,t.TriangulatedPoints3D=ta,t.UIBackgrounds=_f,t.UICircle=tc,t.UIColumnGrid=class extends oc{constructor(){super(...arguments),this.kf=[]}addColumn(){return this.addElement(dc,void 0)}getColumn(t,i=!1){return i&&this.kf.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.kf[t]}},t.UIDiamond=ic,t.UIElementBuilders=Bc,t.UIElementColumn=ac,t.UIElementLine=hc,t.UIElementRow=oc,t.UIElementWithBackground=Vl,t.UIEmptyBackground=Kl,t.UILabel=Qu,t.UILayoutBuilders=ny,t.UILayoutGap=nc,t.UILegendPanel=Ky,t.UIObject=Ol,t.UIOrigins=Ka,t.UIPanel=Gd,t.UIPoint=ec,t.UIPointer=sc,t.UIPolygon=Ru,t.UIRectangle=qu,t.UIRowGrid=uc,t.VisibleFill=lo,t.ZoomBandChart=zA,t.MX=Je,t.contoursFromLUT=(t,i)=>{const s=null!=i?i:t=>t;return{levels:t.steps.map((t=>s({value:t.value},t)))}},t.defaultAxisIntervalRestrictionsXY=Oc,t.defaultOsmBackgroundColor=hl,t.disableTextShadows=t=>{var i,s,e;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(i=t.parallelCoordinateAxisTimeTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(s=t.parallelCoordinateAxisNumericTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(e=t.parallelCoordinateAxisDateTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0)))}},t.disableThemeEffects=t=>({...t,effect:void 0}),t.emptyFill=ho,t.emptyLine=_r,t.emptyPoints3D=Ko,t.emptyTick=jc,t.formatLUTValue=eo,t.formatLongitudeLatitude=dv,t.formatNumberAsUnicodeSuperscript=Qh,t.htmlTextRenderer=wa,t.interpolateColor=er,t.isArtificialLCJSEvent=t=>!0===t.isLcjsArtificialEvent,t.isColor=pe,t.isCoordinate3D=mf,t.isCoordinateBarChart=Fy,t.isCoordinateClient=So,t.isCoordinatePolar=HA,t.isCoordinateXY=xo,t.isDashedLine=da,t.isEmptyFill=oo,t.isEmptyTick=Yc,t.isFontSettings=Fe,t.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),t.isHitBox=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,t.isHitBox3D=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,t.isHitEllipse=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,t.isHitHeatmap=Ke,t.isHitMeshModel=ir,t.isHitOHLC=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,t.isHitPolarHeatmap=tr,t.isHitPolygon=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,t.isHitRectangle=t=>t&&"object"==typeof t&&"figure"in t&&"positionAndSize"in t,t.isHitSampleXY=sr,t.isHitSegment=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,t.isHitSurface=qe,t.isIcon=Aa,t.isImageFill=Mr,t.isIndividualPointFill=vo,t.isLUT=so,t.isLinearGradientFill=ze,t.isPalettedFill=yo,t.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),t.isPixelatedPoints3D=ra,t.isRadialGradientFill=Ee,t.isSeriesSupportedByZoomBandChart=t=>t instanceof nA||t instanceof iA||t instanceof hA||t instanceof yA,t.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),t.isSolidFill=co,t.isSolidLine=aa,t.isTickStyle=Uc,t.isTriangulatedPoints3D=ia,t.lightningChart=(t,i)=>{let s="object"==typeof t?t.license:t;s&&(s=s.trim());const e="object"==typeof t?t.licenseInformation:i,r="object"==typeof t?t:void 0,n=new gM;n.e=s;let h=IM.get(s||"E");return h||(h=((t,i)=>{let s,e,r=!1,n=!1,h=!1,o=!1,a="",l=!1,u=!1,c=!1;try{if(cM){const e=(t=>{if(!t)return;const i=t.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";case"P001":return"P001";default:return}})(cM),a=t&&"cGx1Z2lu"in t;if("0001"===e){vM=new Uint8Array([2]);const i=(t=>{if(!t)return;const i=t.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})(cM);if(1===i){const t=_M(cM);h=!t.xX,s=t,r=!0}else 2===i?(s=kM(cM,t),n=!0):(yM=!0,s=xM(cM),o=!0);a&&(s={pX:uM(0,0,1,7,1,12,5)})}else if("0002"===e){const i=(t=>{if(!t)return;const i=t.split("-");return i.length>=2?Uint8Array.from(lM.atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})(cM);if(104===i)yM=!0,s=xM(cM),o=!0;else if(189===i){const t=_M(cM);h=!t.xX,s=t,r=!0}else 159===i?(s=kM(cM,t),n=!0):s={pX:uM(0,0,1,7,1,12,5)};const e=vM.length>3&&2&vM[3];(e&&!a||!e&&a||e&&a&&"cHl0aG9u"!==t.cGx1Z2lu)&&(s={pX:uM(0,0,1,7,1,12,5)})}else if("T001"===e){const e=((t,i)=>{const s=t.split("-");if(3!==s.length)return{pX:uM(0,0,1,7,1,12,5)};const e=`${s[1]}`,r=Array.prototype.reduce.call(lM.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!wM(e,r))return{pX:uM(0,0,1,7,1,12,5)};let n=0;const h=Uint8Array.from(lM.atob(s[1]),(t=>t.charCodeAt(n))),o=h.subarray(n,n+=20),a=new DataView(h.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=h[t+n]^o[t%o.byteLength];n=0;const u=new DataView(l.buffer),c=mM(l.subarray(n,n+=4)),d=uM(-3,0);if(!c)return{pX:uM(0,0,1,7,1,12,5)};if(c<d)return{pX:uM(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,v=new Date;f.setDate(f.getDate()+1),v.setDate(v.getDate()-1);const A=SM(v),g=SM(f);if(c<A||c>g)return{pX:uM(0,0,1,2,1,3,1,4,5)};const y=u.getUint16(n,!0),p=l.subarray(n+=2,n+y);if(vM=new Uint8Array(p),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{wX:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&wM(t[0],t[2])?{wX:t[0]}:{pX:uM(0,0,1,7,1,12,5)}}return{pX:uM(0,0,1,7,1,12,5)}})(cM,t);s=e;const n=e.wX;n&&i?("string"==typeof n&&(i.l=n),r=!0):s={pX:uM(0,0,1,7,1,12,5)}}else"P001"===e?(s=((t,i)=>{const s=t.split("-");if(3!==s.length)return{pX:uM(0,0,1,7,1,12,5)};const e=`${s[0]}-${s[1]}`,r=Array.prototype.reduce.call(lM.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!wM(e,r))return{pX:uM(0,0,1,7,1,12,5)};let n=0;const h=Uint8Array.from(lM.atob(s[1]),(t=>t.charCodeAt(0)));n+=1;const o=h.subarray(n,n+=20),a=new DataView(h.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=h[t+n]^o[t%o.byteLength];n=0;const u=new DataView(l.buffer).getUint16(n,!0);n+=2;const c=l.subarray(n,u+n),d=new TextDecoder("utf-8").decode(c);return i&&"cGx1Z2lu"in i&&d===lM.atob(i.cGx1Z2lu)?(vM=new Uint8Array([38]),{}):{pX:uM(0,0,1,7,1,12,5)}})(cM,t),!s.pX&&i&&(r=!0,u=!0)):s={pX:uM(0,0,1,7,1,12,5)}}else{const i=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(lM[uM(-1,6)][uM(-1,7)])||i.test(lM[uM(-1,6)][uM(-1,7)])?s={pX:uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),SX:AM(t)}:lM[uM(-1,6)][uM(-1,40)]===lM.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,l=!1,vM=new Uint8Array([38]),s={}):(c=!0,l=!0,vM=new Uint8Array([38]),s={})}}catch(t){s={pX:uM(0,0,1,7,1,12,5,1,70,1,71,5)}}try{o&&(e=lM[uM(-1,34)][uM(-1,35)](uM(-1,39))||void 0)}catch(t){lM.console.error(t)}let d=!1;if(e){const t=e.split("-");if(2===t.length&&wM(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(d=!0)}}const f=!(c||l||u||s.pX||r||n||d),v=(()=>{const t=new(lM[uM(-1,0)]);return t.open(uM(0,26),uM(-2,0)),t.setRequestHeader(uM(-1,24),uM(-1,25)),t.withCredentials=!0,t})(),A=new Ar;if(f){let t;try{t=parseInt(cM?cM.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());a=(t^i).toString();const s={};let e="",r="",n="";cM=cM||"";const h=uM(-4,0);for(let t=0;t<cM.length;t+=1){const i=cM.charCodeAt(t)^h.charCodeAt(t);e+=String.fromCharCode(i)}const o=uM(-3,0);for(let t=0;t<o.length;t+=1)r+=String.fromCharCode(o.charCodeAt(t)^h.charCodeAt(t));for(let t=0;t<a.length;t+=1)n+=String.fromCharCode(a.charCodeAt(t)^h.charCodeAt(t));s[uM(-1,3)]=lM.btoa(e),s[uM(-1,4)]=lM.btoa(r),s.h=lM.btoa(n),s.v=3,s.s=lM[uM(-1,34)][uM(-1,35)](uM(-1,33))||void 0,v.send(JSON.stringify(s))}return(r,n)=>{const o=[],c={ul:t=>{o.indexOf(t)>=0||(o.push(t),d(),dM&&dM.ba&&A.kt("logochange",{logoDataURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAAhCAYAAAAbDs+XAAAACXBIWXMAAAsSAAALEgHS3X78AAAIiUlEQVR4nO2bTWwkVxHHf5uEoHFAkIz5zAxIiIwDSNlBQgibQIKcC8i+ILW3L611TmGXC9LeVssp0t583YjbLC1E4z7aByTwAUWyxc1GIJE5wKEHASJDxAEP7IHNoaqma9rd4xl7vNll5y+N3P36vXrVrz5fvfal+/fvM8fjgyc+aAbmeLB4qqwxTtIFYBVoAsdAfwZz1fXXjcJgZwb05jgDLhVdugr7GrAThUF31hPGSdpGlOmtKAyOdb5WFAaHs57rIhAnaT0Kg1kYwAeCMoFvAIcXIWw3Rxto620b2IrCIKvou6p9+srXYZykrUn5i5P0OpBN6lXiJK0DC54fbbsN3ARuALtRGOxPQu9hQ5nAr0dhcOciJtOFMwHWgR4i7OOK/ivAVeAIeBcYICFmA9jS8Y0oDLrqKey6DqwA+6iAgENyJTtU79JSmjVHYwMJZR0TuiroJiLwdhQG+zpHW2n1dWwbqLm2ps7XNAVx4/qAKe0IX9Ov7OQYieG6AKWWNg3iJP0BkHrXFyfpD4GXXLcBY4StqGm/d8gX8ba2rQMHwBoiiBawGSfpHUTIA30G8A/EQg2rrh/AIE7SPeTd24hS+bVo6nUL2IiTNHNjN+Ik3UYUrK5t68CPgFuOfgvYAX6s9AfA28C33LhV4M0x63FuzDxLj5P0+8BXEYuwtm8yKuxdYG8CbT4A9pCFuK2L1kWEvwU0ECuHXECvocqk4wE+hyjPsf4aiBAHwF2gA6xpHlFDrHvP8WHzmuDXtX0LUbZMaRr9WpykL2sfo78MPEuuxPvAvcK4xinrcW6cWeDOXfm2V4FX9bYVJ2krTtJngZddt+0psvRVZDF39b6JWMOxusZFoK5xfpXcRYIIabnQ1tXfXaWVqattAj33TgsFPryFe3oWOj6m930kdGwD/wP6LtYPgP/q3BkSOj7t+DrUZxeKqQUeJ+kLcZLeAl4vtK8ArwAfds0hYnHP6/2gYDnj5rFt3CYSx7uIxe4gi9xGLOcYETbIQpoyrSOLnOm4LqIATSQf8MIz4VvfTRO+8lFTOk03xzG5F/uT0moBS+QW3/P09fkauSL+0vG1pHxdKEaSNnWZS2UWGCfpp4BvI+7aYs5Njasr2v5ScRzwT+A5vd6LwmBb6a3P9+MPHqWFF484SZ9BLOorwBcYteB2nKQD4MuIhpbhOXd9UNFnjgeESoGroC8jQn5e/xbxHeCPwOcZVYQy9Kr22hXzNxFX2vPJnXP1/XEFkKrx09Ao9D1BZ1o4ngx9JF+ozaruYVvNqrUuE/iTcZJ+DXgReBL4IvDJCvqfAP5T8vyvwGcKbdMWKq4hC30TiZeGdSTmvcX4ku8GUsF7o+TZChJLT6MBcAVR/C1GE7aJ4fbxtcKju0j+0QDK+Jx2niayXTwCSmspZQJ/EfgI8Azixk+z3GK23gP+rDQ+6tonLp1qEaOOaGpRIMfIwmeF/sMtjVpLi3z/O7ROvbdCx4LLzE0YRau3+Xo6dvieZRbvPAKIMtUR5YU88bTkrIckpP0in2eEzVvpScsE/gSyXXjhDBMOEM36BvIyX9L2oynrzya8MsZXAVyyuMGo5fS0qIK23wCIk7Sre/cbru9VRAB1REHQvn1kL24ZdF8rc34scZIOK4Vxkm5qX49dcoPYLSapTtnqRT5VAUbmQ9bxTskzq9rZ/Gtxkq6Zd7N5ojDIygT+WeBDJe2Ge8DTFc92VBC/Aj5OnuRNezBiCeCIwNV6ALr60lcRJbN9+hry8raQtu9eRuoCdcSNX0MU8hfa36p3e8jiLwNLcZLa1H1n3Uazpb+GuuzlkmcZebWvLKQN36eEzz4SRtD3WQUuq/BsfXYRb9VQ3pt6bXt9VBGbSO0iG+7DldAVxgs7A35f8axre+woDO4Bvwb+hrjlaeO3d4keTdf+ml531HKsb+b67RWeLZDnA1khUbIDFs/ror2bo3mo/UwZ7Sh5EIXBVsGKhwpb4eHG8dlEhLlOHoJAvNaQF0TQu5qk1XSu/SgMMpVpXd+5Dgx84cU0pQq/1Rf/N1Ix8hggRZAhojD4O1IrrlKQcfCCrWo3N24C9PGrOL6uPFU+I0/IltzzhrsuxsdiVc57I5vPnyUUq3eQhxEb6xV9E0ku/SELiGcavo8Kd8eN932HglY6Ne/SfUJSxEEUBh3VmFeAvzC6Tdsp0+AoDN6Ok/R3Y+hWwRZ6M07SQ2XWu+p33PUV7WPxK2NUwJCfzEEuoJbmAEVvYvfvFmjata+e2cGO0bvu5reFP0Ky/NvuXUA8SVExjM8GuqUs8DXQfMFX8YARharHSboO7Gt49bH9wFt4nXIcRGHQUcYyZN/tLXzoyssQhcG/lKFmIcstRaFPTZm1cqTx2EPKm2aFa4wuXgNdcEfPL3SfvNZuimOZs9EZunHnGWzBF5S3TOfb1rGXyWO2zddRfv27rCGKN1QMx2em/U3wa46muWlPH+XxGFGuuvYfaHsnCoM39Lc/LK3GSfoTTmIobEOcpE8D3wO+q0TfPKUAsk5e7+7qIu2dt7RaKGIs6Uue4PeiUdwSIjG3hWTvF/YRyVnxFJywKkPp4kVhcC9O0t8AX0eSjUm3W3YkWFWCnRa3Cvdm9Q8aLfJ9Nmi2/zAKG/J9+GKhfaylRGHwXpykP4vC4A8TzpMhLmhxhgcmW+763GXPcyDzvDysgjaYwH38PprELU4hbEMHuBEnqR1DngsPy8Kqh3tkPmo0gZtL7zGjM1k7atXbJSS27SDbv2EmPceDhWXpTfSDQmCxYs84LQZIVrpMvqVaJ/9aZRZzzDElLv3059sLSF3WasImmM5FxMU4/+698yh/3/2owgRONHrm3EQOJTKmr4NXYQEJHYtIoebccXyO6XHiu3SPkgP78+LUDw7muFiMFfgc/3+Y//foY4a5wB8zvA/xX9auz5FT8QAAAABJRU5ErkJggg=="}))},dl:A},d=()=>{o.forEach((t=>{const i=y(t);if(!i)return;const{_X:s,kX:e}=i,r=e?uM(-2,1):void 0,n=`${uM(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${r?uM(0,5,1,63,1,64,1,59,1,65,1,41,5):""}`;CM(n,p,!1,r)}))},g=t=>lM.atob(t),y=t=>{const i=Object.values(jl).includes(t)?t:void 0;if(i){switch(t){case jl.Qo:return dM.Zo||dM.Qo?void 0:{_X:g(i),kX:!0};case jl.ia:return dM.Zo||dM.ia?void 0:{_X:g(i),kX:!0};case jl.sa:return dM.Zo||dM.Jo||dM.sa?void 0:{_X:g(i),kX:!0};case jl.Jo:return dM.Zo||dM.Jo?void 0:{_X:g(i),kX:!0};case jl.oa:return dM.Zo||dM.Jo||dM.oa?void 0:{_X:g(i),kX:!0};case jl.ua:return dM.Zo||dM.Jo||dM.ua?void 0:{_X:g(i),kX:!0};case jl.va:return dM.Zo||dM.Jo||dM.va?void 0:{_X:g(i),kX:!0};case jl.ga:return dM.Zo||dM.Jo||dM.ga?void 0:{_X:g(i),kX:!0};case jl.ya:return dM.Zo||dM.Jo||dM.ya?void 0:{_X:g(i),kX:!0};case jl.Aa:return dM.Zo||dM.Jo||dM.Aa?void 0:{_X:g(i),kX:!0};case jl.ra:return dM.Zo||dM.Jo||dM.ra?void 0:{_X:g(i),kX:!0};case jl.la:return dM.Zo||dM.Jo||dM.la?void 0:{_X:g(i),kX:!0};case jl.ha:return dM.Zo||dM.Jo||dM.ha?void 0:{_X:g(i),kX:!0};case jl.ca:return dM.Zo||dM.Jo||dM.ca?void 0:{_X:g(i),kX:!0};case jl.fa:return dM.Zo||dM.Jo||dM.fa?void 0:{_X:g(i),kX:!0};case jl.da:return dM.Zo||dM.Jo||dM.da?void 0:{_X:g(i),kX:!0};case jl.ea:return dM.Zo||dM.Jo||dM.ea?void 0:{_X:g(i),kX:!0};case jl.na:return dM.Zo||dM.Jo||dM.na?void 0:{_X:g(i),kX:!0};case jl.aa:return dM.Zo||dM.Jo||dM.aa?void 0:{_X:g(i),kX:!0};case jl.pa:return dM.Zo||dM.Jo||dM.pa?void 0:{_X:g(i),kX:!0};case jl.ma:return dM.Zo||dM.Jo||dM.ma?void 0:{_X:g(i),kX:!0};case jl.Zo:case jl.Ko:case jl.ta:case jl.qo:case jl.Sa:case jl.ba:return}return Nn(0,"")}},p=new xx(n,r,c);Array.from(p.mo.children).forEach((t=>{"lcjs-error"===t.id&&p.mo.removeChild(t)})),(null==s?void 0:s.pX)&&CM(s.pX,p,void 0,s.SX);const m=t=>{if("error"===(null==t?void 0:t.type)&&e){const t=e.split("-");if(2===t.length&&wM(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+oM>s)return yM=!1,void TM(v,!1,S)}}if(v.readyState===lM[uM(-1,0)].DONE)if(200===v.status){const t=JSON.parse(v[uM(-1,23)]);if(!wM(a+uM(-3,0),t.h)){const t=uM(0,0,1,27,1,28,1,29,1,30,1,31,5);CM(t,p)}lM[uM(-1,34)][uM(-1,36)](uM(-1,39),t.t),lM[uM(-1,34)][uM(-1,36)](uM(-1,33),t.s),yM=!1}else{let i=uM(0,0,1,2,1,7,1,12,5);try{i=t&&"loadend"!==t.type?uM(0,0,1,23,1,32,1,24,5):JSON.parse(v[uM(-1,23)]).message,TM(v,!1,S)}catch(t){console.error(t)}CM(i,p,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},S=t=>{m(t)};if(TM(v,!0,S),f?setTimeout((()=>{if(yM){let t=!0;if(e){const i=e.split("-");if(2===i.length&&wM(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+oM>e&&(t=!1)}}t&&CM(uM(0,25,1,23,1,32,1,24,5),p)}}),1e4):TM(v,!1,S),l){const s=(()=>{const t=new(lM[uM(-1,0)]);return t.open(uM(0,26),uM(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),e=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),r=r=>{if("error"===(null==r?void 0:r.type)){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,n)}if(s.readyState===lM.XMLHttpRequest.DONE){const r=s.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==s.status||r&&"1"!==r){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,n)}else{const r=JSON.parse(s.responseText);if(!wM(e,r.s)){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,n)}void 0!==i&&(i.l=r.l),A.kt("logochange",{logoDataURI:r.l})}}else{const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,n)}},n=t=>{r(t)};TM(s,!0,n),s.send(e),setTimeout((()=>{if(s.readyState<2){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,n)}}),1e4)}if(u){const s=(()=>{const t=new(lM[uM(-1,0)]);return t.open(uM(0,26),uM(1,1)),t.setRequestHeader(uM(-1,24),uM(-1,25)),t.withCredentials=!0,t})();let e;try{e=parseInt(cM?cM.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(t){e=Math.floor(1e6*Math.random())}const r=Math.floor(1e6*Math.random());a=(e^r).toString();const n={};let h="",o="";cM=cM||"";const l=uM(-4,0);for(let t=0;t<cM.length;t+=1){const i=cM.charCodeAt(t)^l.charCodeAt(t);h+=String.fromCharCode(i)}for(let t=0;t<a.length;t+=1)o+=String.fromCharCode(a.charCodeAt(t)^l.charCodeAt(t));n[uM(-1,3)]=lM.btoa(h),n.h=lM.btoa(o),n.v=1,s.send(JSON.stringify(n));const u=e=>{var r;if("error"===(null==e?void 0:e.type)){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,c)}if(s.readyState===lM.XMLHttpRequest.DONE)if(200===s.status){const e=JSON.parse(s.responseText);if(!wM(a,e.h)){const i=uM(0,0,1,7,1,12,5);CM(i,p,!1,AM(t)),TM(v,!1,c)}const r=e.l.split("-"),n=r[0],h=r[1];if(wM(n,h))void 0!==i&&(i.l=n,A.kt("logochange",{logoDataURI:n}));else{const i=uM(0,0,1,7,1,12,5);CM(i,p,!1,AM(t))}const o=e.f,l=Uint8Array.from(lM.atob(o),(t=>t.charCodeAt(0)));let u=0;const f=l.subarray(u,u+=20),g=new DataView(l.buffer).getUint16(u,!0);u+=2;const y=Uint8Array.from(Array(g));for(let t=0;t<g;t+=1)y[t]=l[t+u]^f[t%f.byteLength];const m=new DataView(y.buffer);u=0;const S=Uint8Array.from(Array(m.getUint16(u,!0)));u+=2,S.set(y.subarray(u,u+=S.byteLength)),vM=new Uint8Array(S),i&&i.e&&d()}else{const i=null!==(r=JSON.parse(s.responseText).message)&&void 0!==r?r:uM(0,0,1,7,1,12,5);CM(i,p,!1,AM(t)),TM(v,!1,c)}else{const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,c)}},c=t=>{u(t)};TM(s,!0,c),setTimeout((()=>{if(s.readyState<2){const i=uM(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);CM(i,p,!1,AM(t)),TM(v,!1,c)}}),1e4)}return h?(t=>{let i;yM=!1;const s=()=>{i&&(t.al(i.ol()),i=void 0);const s=t.li();i=t.AB("deployment test"),i.no(t.ji).Eh(uM(0,34,1,33)).zr({x:s.x/2,y:s.y/2}).lu(50).eh(13).Er(new uo({color:me(128,128,128,100)})).ou("Arial").cu(500).setPointerEvents(!1),t.rl().nl()};t.Ct("resize",(()=>{s()})),setTimeout(s,0),setInterval((()=>{i&&i.ol()<t.Dl()-1?s():i||s()}),1e3)})(p):v.readyState===lM[uM(-1,0)].DONE&&m(),p}})(e,n)),((t,i,s,e)=>{var r,n,h,o,a,l,u,c;let d;if(s&&s.license){const t=s.license.split("-");d=t[t.length-1]}const f=null===(r=null==s?void 0:s.webgl)||void 0===r?void 0:r.version,v={BE:null===(n=null==s?void 0:s.sharedContextOptions)||void 0===n?void 0:n.canvas,vl:null==s?void 0:s.warnings,jE:"webgl1"===f?1:"webgl2"===f?2:void 0,NE:!1!==(null===(h=null==s?void 0:s.sharedContextOptions)||void 0===h?void 0:h.antialias),VE:(null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.devicePixelRatio)||void 0,qE:(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.noCanvasStyles)||void 0,eR:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.noCanvasTransform)||void 0,$E:!1!==(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.useStackingOrder),UE:!1!==(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.useIndividualCanvas),tR:d||void 0},A=new Nm(v),g=i=>t({...i,textRenderer:i.textRenderer?i.textRenderer:void 0,textPixelSnappingEnabled:void 0!==(null==i?void 0:i.textPixelSnappingEnabled)?i.textPixelSnappingEnabled:!(null==i?void 0:i.textRenderer)&&void 0},A);return{Dashboard:Gm(g,i,s,e),ChartXY:jm(g,i,s,e),Spider:Ym(g,i,s,e),Polar:Hm(g,i,s,e),Pie:Wm(g,i,s,e),UIPanel:Um(g,i,s,e),Gauge:Xm(g,i,s,e),Funnel:Zm(g,i,s,e),Pyramid:Jm(g,i,s,e),Chart3D:Km(g,i,s,e),Map:Qm(g,i,s,e),DataGrid:qm(g,i,s,e),BarChart:tS(g,i,s,e),ParallelCoordinateChart:eS(g,i,s,e),ZoomBandChart:iS(g,i,s,e),TreeMapChart:sS(g,i,s,e),dispose:A.It.bind(A),layout:A.aR.bind(A)}})(h,n.e,r,n.l)},t.onScreenMenuControlBaseHeight=il,t.onScreenMenuControlBaseWidth=sl,t.onScreenMenuControlOpacity=el,t.onScreenMenuDefaultButtonShape=nl,t.onScreenMenuSpriteURL=rl,t.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const r=null==e?void 0:e.formatLabels,n=null==e?void 0:e.alpha;return s.map(((e,h)=>{const o=t+h/(s.length-1)*(i-t);return{color:void 0!==n?e.setA(n):e,value:o,label:r?r(o):void 0}}))},t.saveToFile=wd,t.scaleTheme=(t,i)=>{const s=Object.fromEntries(Object.entries(t).map((([t,s])=>{if(Fe(s))return[t,s.setSize(s.getSize()*i)];if("panelPadding"===t||"chartXYPadding"===t)return[t,s*i];if("polarRadialAxisTickStyle"===t){const e=s;return[t,e.setTickLength(e.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(e.getTickPadding()*i)]}if("object"==typeof s&&"setTickStyle"in s)return[t,s.setTickStyle((t=>t.setTickLength(t.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(t.getTickPadding()*i)))];if("barChartValueLabelsAfterBars"===t||"barChartValueLabelsInsideBars"===t||"barChartCategoryLabels"===t){const e=s;return[t,{...e,labelFont:e.labelFont.setSize(e.labelFont.getSize()*i)}]}return[t,s]})));[["uiButtonSize",10],["chartXYTitleMargin",5],["legendPadding",5],["uiTextPadding",5],["legendLUTLabelMargin",7],["legendLUTUnitLabelMargin",7],["legendLUTLengthHorizontal",160],["legendLUTLengthVertical",140],["legendLUTThicknessHorizontal",15],["legendLUTThicknessVertical",25],["dataGridCellPadding",5],["dataGridScrollBarThickness",20],["gaugeChartBarThickness",40],["gaugeChartValueIndicatorThickness",10],["gaugeChartNeedleLength",40],["gaugeChartNeedleThickness",10],["gaugeChartGapBetweenBarAndValueIndicators",10]].forEach((t=>{var e;const r=t[0],n=t[1];s[r]=(null!==(e=s[r])&&void 0!==e?e:n)*i})),s.cursorPointMarkerSize={x:s.cursorPointMarkerSize.x*i,y:s.cursorPointMarkerSize.y*i};const e=s.cursorDynamicBehavior;return e&&(s.cursorDynamicBehavior={...e,pointMarkerSize:e.pointMarkerSize?t=>{if(!e.pointMarkerSize)return{x:0,y:0};const s=e.pointMarkerSize(t);return{x:s.x*i,y:s.y*i}}:void 0}),s},t.synchronizeAxisIntervals=Qe,t.transparentFill=qa,t.transparentLine=tl,t.uint32ColorFromObject=t=>ke(255*t.r,255*t.g,255*t.b,255*t.a),t.uint32ColorFromRGBA=ke,t.useCursorDataPointColor=ip,t.useCursorFormatterSeriesOverride=tp,t.vec3Utils=ih,t.xDimensionStrategy=zc,t.yDimensionStrategy=Vc,Object.defineProperty(t,"CX",{value:!0}),t}({});
