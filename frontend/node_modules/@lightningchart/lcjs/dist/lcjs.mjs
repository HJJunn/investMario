/* LightningChart JS v8.1.1 */
import*as t from"immutable";import{Record as i}from"immutable";import s from"earcut";class e{constructor(){this.o=!0}u(){return this.o}}class h extends e{constructor(t,i){super(),this.S=t,this.M=t,this.o=i}_(t){return t!==this.S&&(this.M=this.S,this.S=t,this.o=!0),this}C(){return this.S}u(){return super.u()}}const r=(t,i)=>({x:t,y:i}),n=(t,i)=>({x:t,y:i}),o=(t,i,s)=>({position:t,high:i,low:s}),a=(t,i,s)=>({x:t,y:i,z:s}),l=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(r(t.position,t.high)),s.push(r(t.position,t.low))})),[i,s]},u=(t,i)=>({min:t,max:i}),c=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),d=(t,i=!0)=>new h(t,i),f=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),A=f,g=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),v=i({type:"color",r:1,g:1,b:1,a:1});class y extends v{constructor(t){super(t)}toUint32(){return void 0!==this.T||(this.T=F(this.getR(),this.getG(),this.getB(),this.getA())),this.T}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.F||(this.F=new y({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.F}getLighter(){return this.I||(this.I=new y({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.I}getDarker(){return this.L||(this.L=new y({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.L}toRGBAString(){return`rgba(${(255*this.r).toFixed(0)},${(255*this.g).toFixed(0)},${(255*this.b).toFixed(0)},${this.a})`}}const p=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),m=(t,i,s,e=255)=>new y({r:t/255,g:i/255,b:s/255,a:e/255}),S=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},b=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new y({r:e,g:h,b:r})},x=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return m(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?S(t):S(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),S("#fff")},M=t=>m(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=_[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},C=new y({}),T=m(0,0,0,0),F=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,I=t=>F(255*t.r,255*t.g,255*t.b,255*t.a),L=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class P extends L{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const B=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),D=new P;var E,R;!function(t){t.circle="circle",t.ellipse="ellipse"}(E||(E={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(R||(R={}));const O=i({type:"fillstyle",fillType:"radial-gradient",ditheringEnabled:!0,stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],position:r(.5,.5),shape:E.ellipse,extent:R.farthestCorner});class z extends O{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.ditheringEnabled},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`radial-gradient(${this.shape} ${this.extent} at ${100*this.position.x}% ${100*this.position.y}%, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}setDitheringEnabled(t){return this.set("ditheringEnabled",t)}getDitheringEnabled(){return this.get("ditheringEnabled")}}const V=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),N=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],angle:0});class G extends N{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}toCSS(){return`linear-gradient(${this.angle}deg, ${this.stops.map((t=>`${t.color.toString()} ${100*t.offset}%`)).join(", ")})`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?te(this.get("angle")):this.get("angle")}}const $=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class U{constructor(t,i,s,e){this.P=new Pt,this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new Y,this.y=new Y,this.z=new Y;const h={...t},r={...i};if(e){const t=t=>{const i=t.value;this.cellsAmount.x=i.reduce(Cs,0),this.cellIndex.x=i.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=i.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.P.D("cellresize",{})};e.x.R("change",t),t({value:e.x.C()});const i=t=>{const i=t.value;this.cellsAmount.y=i.reduce(Cs,0),this.cellIndex.y=i.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=i.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.P.D("cellresize",{})};e.y.R("change",i),i({value:e.y.C()}),this.O=()=>{e.x.V("change",t),e.y.V("change",i)}}}N(){return this.O&&(this.O(),this.O=void 0),this}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Y extends e{constructor(){super(...arguments),this.G=0,this.$=10,this.U=1}Y(){return this.o=!1,this}j(){return this.o=!0,this}getInnerStart(){return this.G}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}H(t,i){return this.G=t,this.$=i,this.W(),this}X(t){return this.U=t,this.W(),this}Z(t){return t/this.U}W(){const t=this.Z(this.$-this.G),i=this.U;void 0!==this.J&&!1!==ni(t,this.J)||(this.o=!0,this.K=i,this.J=t)}q(){return this.J}tt(){return this.K}it(){return this.$<this.G}st(t,i){return!0}}class j{constructor(){this.et=!0}getInnerStart(){return this.G}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.G)}H(t,i){return this.et=t!==this.G||i!==this.$,this.G=t,this.$=i,this}Y(){return this.et=!1,this}j(){return this.et=!0,this}}class H extends j{constructor(t,i,s,e){if(super(),this.ht=!0,this.rt=!0,this.nt=[0,0],this.ot=!0,this.ut=t,this.ct=i,this.dt=s,this.ft=t,this.At=i,e){const t=t=>{this.vt(t.value)};e.R("change",t),this.vt(e.C()),this.yt=()=>e.V("change",t)}}X(t){return this.U=t,this.rt=!0,this}St(t){return this.nt=t.map(Math.abs),this.ot=!0,this}bt(){return this.ut/this.dt*this.U+this.nt[0]}xt(){return(this.ut+this.ct)/this.dt*this.U-this.nt[1]}Mt(){return this.getCellSize()-this.wt()}_t(){return this.U}getCellSize(){return this.kt(this.U)}wt(){return this.nt[0]+this.nt[1]}Ct(){return this.nt}vt(t){this.dt=t.reduce(Cs,0),this.ut=t.reduce(((t,i,s)=>s>=this.ft?t:t+i),0),this.ct=t.reduce(((t,i,s)=>s>=this.ft&&s<this.ft+this.At?t+i:t),0),this.ht=!0,this.Tt()}kt(t){return t*this.ct/this.dt}Y(){return super.Y(),this.rt=!1,this.ot=!1,this.ht=!1,this}j(){return super.j(),this.rt=!0,this.ot=!0,this.ht=!0,this}}class W extends H{constructor(t,i,s,e){super(t,i,s,e),this.Ft=!1,this.It=!1,this.Lt=0,this.U=1e3,this.H(0,10),this.W()}Pt(){return this.It}st(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Ft){const s=Ri(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}Tt(){this.W()}Bt(t){return this.bt()+(t-this.G)/(this.$-this.G)*(this.xt()-this.bt())}Dt(t){return this.G+(t-this.bt())/(this.xt()-this.bt())*(this.$-this.G)}H(t,i){return super.H(t,i),this.W(),this}St(t){return super.St(t),this.W(),this}X(t){return super.X(t),this.Et=X(this.$-this.G,this.nt,this.U,this.ct,this.dt),this.W(),this}Rt(){return this.Ft=!0,this}Ot(){return this.Ft}zt(){return Math.abs(this.Vt)}Nt(){return this.zt()/this.Et}Gt(){return this.$t}Ut(){return this.Yt}getPixelSize(){return this.Et}jt(){return this.Ht}j(){return super.j(),this.It=!0,this}Y(){return super.Y(),this.It=!1,this}Wt(t,i=de.Numeric){return i(t,{start:this.G,end:this.$})}Xt(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Zt(t){return X(t,this.nt,this.U,this.ct,this.dt)}W(){let t=this.G,i=this.$,s=0;this.Ft&&(t=0,i=this.$-this.G,s=this.G);const e=i-t,h=X(e,this.nt,this.U,this.ct,this.dt);this.Yt=t-this.nt[0]*h,this.$t=i+this.nt[1]*h;const r=this.$t-this.Yt,n=r-this.Vt,o=Math.abs(n/h),a=e-this.Lt,l=Math.abs(a/h);(!this.Ht||o>=.4||l>=.4)&&(this.Lt=e,this.Vt=r,this.Et=h,this.It=!0);const u=this.Vt*this.dt/(2*this.ct),c=-(this.Yt-this.Vt*this.ut/this.ct)-u,d=2*this.bt()/this.U-1,f=2*this.xt()/this.U-1-d;this.Ht={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Jt(t,i){return t+this.Et*i}}const X=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Z{Qt(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Y(){return this.x.Y(),this.y.Y(),this}j(){return this.x.j(),this.y.j(),this}X(t,i){return"object"==typeof t?(this.x.X(t.x),this.y.X(t.y)):(this.x.X(t),this.y.X(i)),this}_t(){return r(this.x._t(),this.y._t())}Kt(t){return this.x.St(t),this}qt(t){return this.y.St(t),this}wt(){return r(this.x.wt(),this.y.wt())}ti(t,i){return this.x.H(t,i),this}ii(t,i){return this.y.H(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.wt(),y:i-this.y.wt()}}si(){return this.x.Pt()||this.y.Pt()}}class J extends Z{constructor(){super(...arguments),this.ei="LinearScaleXY"}hi(t,i,s,e){return this.x=new W(t.x,i.x,s.x,e?e.x:void 0),this.y=new W(t.y,i.y,s.y,e?e.y:void 0),this}Ot(){return this.x.Ot()||this.y.Ot()}ri(){return r(this.x.getPixelSize(),this.y.getPixelSize())}jt(){return{x:this.x.jt(),y:this.y.jt()}}Jt(t,i){const s=this.ri();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ni(t,i,s,e){const h=this.ri(),r=Ys(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Q extends Z{constructor(){super(...arguments),this.ei="MixedScaleXY"}Ot(){return!1}Jt(t,i){const s=this.x.Bt(t.x),e=this.y.Bt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.Dt(h.x),y:this.y.Dt(h.y)}}ni(t,i,s,e){const h={x:this.x.Bt(t.x),y:this.y.Bt(t.y)},r={x:this.x.Bt(i.x),y:this.y.Bt(i.y)},n=Us(Xs(r,h)),o=Ys(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.Dt(a.x),y:this.y.Dt(a.y)}}jt(){const t=this.x.jt(),i=this.y.jt();return{uScaleStart:[this.x.G,this.y.G],uScaleInterval:[this.x.$-this.x.G,this.y.$-this.y.G],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const K={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).hi({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new U({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},q=(t,i,s)=>i===s?t:s.Dt(i.Bt(t)),tt=(t,i,s)=>{if(i===s)return t;const e=i instanceof Z?i.x:i.x instanceof Z?i.x.x:i.x.oi,h=i instanceof Z?i.y:i.y instanceof Z?i.y.y:i.y.oi,r=s instanceof Z?s.x:s.x instanceof Z?s.x.x:s.x.oi,n=s instanceof Z?s.y:s.y instanceof Z?s.y.y:s.y.oi;return{...t,x:q(t.x,e,r),y:q(t.y,h,n)}},it=(t,i,s)=>{const e=t(i,s);return t=>new ke({color:e(t)})},st=(t,i,s)=>{const e=t(i+1,s);return t=>new z({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},et=(t,i,s,e)=>{const h=t(i+1,e);return t=>new G({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},ht=(...t)=>{if(0===t.length)return{remove:ri};let i=!1;const s=t.map((s=>{const e=e=>{((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.ai(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,e.start,e.end)};return s.addEventListener("intervalchange",e),e}));let e=!1;const h=t.map((i=>{const s=s=>{((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,s.isStopped)};return i.addEventListener("stoppedchange",s),s}));return{remove:()=>{t.forEach(((t,i)=>{t.removeEventListener("intervalchange",s[i]),t.removeEventListener("stoppedchange",h[i])}))}}},rt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},nt=(t,i)=>{const s=null!=i?i:t=>t;return{levels:t.steps.map((t=>s({value:t.value},t)))}},ot=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,at=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,lt=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,ut=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,ct=t=>t&&"object"==typeof t&&"index"in t,dt=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,ft=t=>t&&"object"==typeof t&&"figure"in t&&"positionAndSize"in t,At=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,gt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,vt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,yt=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,pt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,mt=t=>!0===t.isLcjsArtificialEvent,St=(t,i,s,e)=>s<0?t:s>1?i:m(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),void 0===e?t.getA()+s*(i.getA()-t.getA()):e);var bt;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(bt||(bt={}));const xt=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===bt.Nearest)return Mt(t,i,r,n,c,d);if(s===bt.NearestX||s===bt.NearestY){if("boolean"==typeof l&&("x"===a&&s===bt.NearestX||"y"===a&&s===bt.NearestY))return kt(t,tt(i,n,r),a,l,c,d);if(s===bt.NearestX)return wt(t,tt(i,n,r),o,c,d);if(s===bt.NearestY)return _t(t,tt(i,n,r),o,c,d)}},Mt=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=tt(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},wt=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},_t=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},kt=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(i))return g;v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):ps,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):ps,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=y}},Ct=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=y}};let Tt=0;class Ft{constructor(t,i,s){this.li=d(!0),this.ui=!1,this.ci=!0,this.di=!1,this.fi=void 0,this.Ai=0,this.P=new Pt,this.gi=t,this.yi=i,this.pi=s,this.mi=Tt,Tt+=1,this.Si=t.bi.highlightColorOffset}xi(){let t;return this.Mi("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?bt.NearestX:"ProgressiveY"===t||"RegressiveY"===t?bt.NearestY:bt.Nearest}wi(){}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}D(t,i,s,e){this.P.D(t,i,{collectionMember:s,info:e})}removeEventListener(t,i){this.P.removeEventListener(t,i)}_i(t){return void 0!==this.pi.find((i=>i.type===t))}Mi(t,i){var s;return!!this._i(t)&&!0===i(null===(s=this.pi.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.ui||(this.gi.ki(this),this.ui=!0,this.yi(this),this.P.D("dispose",{})),this}isDisposed(){return this.ui}setVisible(t){const i=this.ci;return this.ci=t,!t&&i&&this.li.C()&&this.gi.ki(this),this}getVisible(){return this.ci}setPointerEvents(t){const i=this.li.C();return this.li._(t),t||i&&this.gi.ki(this),this}getPointerEvents(){return this.li.C()}Ci(t){return this.fi=t,this}Ti(){return this.fi?this.fi:It}Fi(t){return this.Ai=t,this}Ii(){return this.Ai}Li(t){return this.Si=t,this}Pi(){return this.Si}}const It=u(r(0,0),r(0,0)),Lt={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class Pt{constructor(){this.Bi=new Array,this.Di=[],this.li=!0,this.Ei=!1,this.Ri=new Map}setPointerEvents(t){this.li=t,this.Di.forEach((i=>i.setPointerEvents(t)))}getPointerEvents(){return this.li}addEventListener(t,i,s){this.Bi.push({listener:i,key:t,options:s||{}})}removeEventListener(t,i){const s=this.Bi.findIndex((t=>t.listener===i));s>=0&&this.Bi.splice(s,1)}set draggable(t){this.Ei=t,this.Di.forEach((i=>{i.di=t}))}get draggable(){return this.Ei}D(t,i,s=void 0){const e=this.Bi.slice();for(let h=e.length-1;h>=0;h-=1){const r=e[h];r.key===t&&(r.listener(i,s),!0===r.options.once&&this.removeEventListener(t,r.listener))}}Oi(t,i){const s=[];Object.keys(Lt).forEach((e=>{const h=(t,s)=>{const h=Bt(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,r=(null==i?void 0:i.getExtraData)&&void 0!==h.clientX?i.getExtraData(h,s.collectionMember,s.info):{};this.D(e,t,r),!t.defaultPrevented&&(null==i?void 0:i.continueIfNotPrevented)&&i.continueIfNotPrevented(e,t,r)};t.addEventListener(e,h),s.push((()=>t.removeEventListener(e,h)))})),this.Di.push(t);const e=()=>{const i=this.Di.indexOf(t);i>=0&&this.Di.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.Ri.set(t,(()=>{s.forEach((t=>t()))})),t.di=this.Ei,t.setPointerEvents(this.li)}zi(){this.Ri.forEach((t=>t())),this.Ri.clear(),this.Di.length=0}Vi(t,i){const s=[];Object.keys(Lt).forEach((e=>{const h=(t,s)=>{const h=i(s.collectionMember);h&&this.D(e,t,h)};t.addEventListener(e,h),s.push((()=>t.removeEventListener(e,h)))})),this.Di.push(t);const e=()=>{const i=this.Di.indexOf(t);i>=0&&this.Di.splice(i,1)};t.addEventListener("dispose",e),s.push((()=>t.removeEventListener("dispose",e))),this.Ri.set(t,(()=>{s.forEach((t=>t()))})),t.setPointerEvents(this.li),t.di=this.Ei}Ni(t){Object.keys(Lt).forEach((i=>{t.addEventListener(i,((t,s)=>{this.D(i,t,s)}))})),t.setPointerEvents(this.li),t.draggable=this.Ei}}const Bt=t=>!(!t||"object"!=typeof t||!("touches"in t)),Dt={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=zi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class Et{constructor(t,i,s,e=Dt.linear,h){this.delta=0,this.nextAnimations=new Array,this.Gi=!1,this.easing=Dt.linear,this.isOver=()=>(this.delta===this.duration||this.Gi)&&0===this.nextAnimations.length,this.P=new Pt,this.values=t,this.action=i,this.duration=s,this.easing=e,this.$i=h,this.eases=t.map((([t,i])=>e(t,i,s)))}Ui(){this.P.D("start",{})}start(){return this.$i.includes(this)||this.$i.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new Et(t,i,s,e,this.$i);return this.nextAnimations.push(h),h}finish(t=!0){if(this.Gi=!0,this.$i.splice(this.$i.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&this.P.Bi.forEach((t=>{"allAnimationEnd"===t.key&&i.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&i.addEventListener("everyAnimationEnd",t.listener)})),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.P.D("end",{nextAnimation:i}),this.P.D("everyAnimationEnd",{nextAnimation:i})),i}t&&(this.P.D("end",{nextAnimation:void 0}),this.P.D("everyAnimationEnd",{nextAnimation:void 0}),this.P.D("allAnimationEnd",{}))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(ei):this.values.map(ei)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Rt=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.Ui(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=ti.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Dt.linear)=>(h,r,o=t)=>{const a=new Et(h,r,o,i,s).start();return e||(e=ti.requestAnimationFrame(n)),a}};var Ot;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(Ot||(Ot={}));const zt=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:m(0,0,0,0),sourceMissingColor:m(0,0,0,0),fitMode:Ot.Fill});class Vt extends zt{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return p(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return p(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}toCSS(){return`url(${this.getSource().src})`}}const Nt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Gt=i({type:"linestyle",lineType:"empty"}),$t=new class extends Gt{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Yi(){return 0}setFillStyle(t){return this}getFillStyle(){return xe}},Ut=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),Yt=-34028234663852886e22,jt="-340282346638528859811704183484516925440.0";var Ht,Wt,Xt,Zt;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Ht||(Ht={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Wt||(Wt={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(Xt||(Xt={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Zt||(Zt={}));const Jt=t=>"getHighlight"in t&&"setHighlight"in t,Qt=(t,i,s)=>void 0===t||"number"==typeof t?t:Array.isArray(t)?t.slice(i,s):t.subarray(i,s),Kt=(...t)=>{const i=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,s)=>s?(Object.keys(s).forEach((e=>{const h=t[e],r=s[e];i(h)&&i(r)?t[e]=Kt(h,r):t[e]=r})),t):t),{})},qt=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=Nt(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{rs(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${ti.location.origin}/resources`,s=t.styleFactory(i);if(Nt(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=Nt(s)&&s.getSource(),h=e&&e instanceof Image?e:void 0;ti.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==h||h.addEventListener("load",(()=>{t.apply(s)})),null==h||h.addEventListener("error",(()=>{rs(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},ti="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},ii=(t,i)=>t.x===i.x&&t.y===i.y,si=t=>t!==ps&&t!==ms&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,ei=t=>t[1],hi=t=>t.dispose(),ri=()=>{},ni=(t,i)=>t===i,oi=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),ai=t=>Array.prototype.concat.apply([],t),li=(t,i)=>void 0===t||Number.isNaN(t)?i:t,ui=t=>t.ji(),ci=t=>t.Hi(),di=t=>t.Wi(),fi=t=>t.Xi(),Ai=t=>t.min.x,gi=t=>t.max.x,vi=t=>t.min.y,yi=t=>t.max.y,pi=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},mi=r(0,1),Si=r(1,0),bi=r(0,-1),xi=r(-1,0),Mi=r(0,0),wi=t=>{switch(t){case Zt.Up:return mi;case Zt.Right:return Si;case Zt.Down:return bi;case Zt.Left:return xi;default:return Mi}},_i=t=>t===Zt.Left||t===Zt.Right,ki=t=>{t.stopPropagation(),t.preventDefault()},Ci=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Ti=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},Fi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},Ii=(t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,l=new Float32Array(a*o);let u=0,c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=i.x,l[c+1]=i.y,l[c+2]=i.z,c+=o}if(u+=3,t){const t=n&&Fe(n)&&n.getFallbackColor()||C;c=u;for(let i=0;i<a;i+=1){const s=h[i].color||t;l[c+0]=s.r,l[c+1]=s.g,l[c+2]=s.b,l[c+3]=s.a,c+=o}u+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;l[c+0]=e,c+=o}u+=1}if(s){c=u;for(let t=0;t<a;t+=1){const i=h[t];l[c+0]=void 0!==i.value?i.value:Yt,c+=o}u+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=u;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;l[c+0]=e,l[c+1]=r,l[c+2]=n,c+=o}u+=3}return l}:(t,i,s)=>Li(t,i):(t,i,s)=>Di(t):(t,i,s)=>Bi(t,i):(t,i,s)=>Pi(t,s):(t,i,s)=>Fi(t),Li=(t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r},Pi=(t,i)=>{const s=i&&Fe(i)&&i.getFallbackColor()||C,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h},Bi=(t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r},Di=t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:Yt,h+=4}return s},Ei=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},Ri=(t,i,s)=>{const e=((t,i)=>{if(i<ps&&i>ms&&t<ps&&t>ms){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s},Oi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},zi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},Vi=zi(Math.E),Ni=(t,i)=>{const s=i[t];return s?s():void 0},Gi=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>ie(Xs(t,s))-ie(Xs(i,s))))},$i=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Ui=t=>255===t.getA()?t:t.setA(255),Yi=(()=>{const t=m(0,0,0);return i=>(i=Ui(i),new G({angle:180,stops:[{offset:0,color:i},{offset:1,color:St(i,t,.5)}]}))})(),ji=(()=>{const t=(t,i)=>{var s;if(t){if(Ce(t)){if(0===t.getColor().getA())return;return t.getColor()}if(V(t)||$(t)){const i=t.getColorStops();return 2===i.length?i[1].color:null===(s=i[0])||void 0===s?void 0:s.color}return Pe(t)&&void 0!==i?t.lut.getColors(i,void 0):void 0}};return(i,s,e)=>{var h;const r=[];if(e.fill&&r.push(e.fill),e.fill2&&r.push(e.fill2),e.stroke){const t=e.stroke.getFillStyle();t!==xe&&("stroke"===(null===(h=e.behavior)||void 0===h?void 0:h.priority)?r.unshift(t):r.push(t))}if(e.point3D){const t=e.point3D;r.push(t.getFillStyle())}let n;if(e.behavior&&!0===e.behavior.colorStep){const[s,h]=r.reduce(((i,s)=>{if(i[0]&&i[1])return i;const h=t(s,e.lutValue);return h&&(void 0===i[0]?i[0]=h:i[1]=h),i}),[void 0,void 0]);n=s&&h?(o=s)===(a=h)||o.getR()===a.getR()&&o.getG()===a.getG()&&o.getB()===a.getB()?Yi(o):(o=Ui(o),a=Ui(a),new G({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:o},{offset:1,color:o}]})):i.uiButtonFillStyle}else{const h=r.reduce(((i,s)=>i||t(s,e.lutValue)),void 0);n=h?s?new ke({color:h}):Yi(h):i.uiButtonFillStyle}var o,a;return n}})(),Hi=(t,i)=>{const s=t;if(Pe(s))return{lut:s.getPalette(),lookUpProperty:s.getLookUpProperty(),valueRange:i}},Wi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Xi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Zi=(t,i)=>"function"==typeof t?t(i):t,Ji=(t,i)=>i(),Qi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"),Ki=t=>t===Ss||t.min.x===Ss.min.x&&t.max.x===Ss.max.x&&t.min.y===Ss.min.y&&t.max.y===Ss.max.y,qi=t=>Array.from(new Set(t)),ts=t=>t.filter((t=>void 0!==t)),is=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,ss=(t,i)=>{throw new Error(i)},es=t=>{let i;return()=>i||(i=t(),i)},hs=t=>{if(t===$t)return 0;const i=t.getThickness();return i<0?1:1*i},rs=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw ti.alert(h),new Error(h);ti.console.warn(h)},ns=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},os=()=>{const t=new Map;return{Zi:i=>(Object.keys(Lt).forEach((s=>{i.addEventListener(s,((i,e)=>{const h=e.collectionMember&&t.get(e.collectionMember);if(!h)return;const r=Bt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:i,n=h.Ji(e.info,r,e.collectionMember);h.P.D(s,i,n)}))})),i),Qi:(i,s)=>{t.set(i,s)},zi:()=>{t.clear()}}},as={left:0,right:0,top:0,bottom:0},ls=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),us=(t,i,s)=>{i&&i.Ki();const e=s();return Object.keys(e).forEach((i=>{const s=i,h=e[s];t.addEventListener(s,h)})),{qi:t,Ki:()=>{Object.entries(e).forEach((([i,s])=>{const e=i,h=s;t.removeEventListener(e,h)}))}}},cs=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},ds=t=>{if(t)return"resolve"in t?t.resolve():t},fs=t=>{let i=t;return{ts:t=>{const s=i;return i=s+t,[s,t]}}},As=t=>{const i=Date.now();ti.document.body.addEventListener(t,(t=>{Date.now()-i>500||(t.stopPropagation(),t.preventDefault())}),{once:!0,capture:!0})},gs=()=>{const t=ti.performance.now();ti.document.body.addEventListener("contextmenu",(i=>{ti.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},vs=()=>{const t=ti.performance.now();ti.document.body.addEventListener("touchstart",(i=>{ti.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},ys={add:(t,i)=>a(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>a(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>a(t.x*i,t.y*i,t.z*i),divide:(t,i)=>a(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>ys.divide(t,ys.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>a(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(ys.dot(t,i)/(ys.length(t)*ys.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=ys.dot(i,t),n=ys.cross(i,t);return ys.addVec(ys.multiply(t,e),ys.addVec(ys.multiply(i,(1-e)*r),ys.multiply(n,h)))},lerp:(t,i,s)=>(s=oi(s,0,1),ys.addVec(ys.multiply(t,1-s),ys.multiply(i,s))),equals:(t,i)=>ni(t.x,i.x)&&ni(t.y,i.y)&&ni(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},ps=Number.MAX_VALUE,ms=-Number.MAX_VALUE,Ss=u(r(ps,ps),r(ms,ms)),bs=u(a(ps,ps,ps),a(ms,ms,ms)),xs=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Ms=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ws=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),_s=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),ks=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Ms(t[s],t[e]))return!0;return!1},Cs=(t,i)=>i+t,Ts=(t,i,s)=>{const e=Xs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const n=Xs(s,t),o=(n.x*e.x+n.y*e.y)/h;return o<=0?t:o>=1?i:r(t.x+o*e.x,t.y+o*e.y)},Fs=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Is=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ls=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Ps=(t,i,s)=>{let e=s.x-i.x,h=s.y-i.y;const r=e*e+h*h;if(r<.01)return Number.MAX_VALUE;const n=((t.x-i.x)*e+(t.y-i.y)*h)/r,o=i.x+n*e,a=i.y+n*h;return e=t.x-o,h=t.y-a,e*e+h*h},Bs=(t,i,s)=>Ws(t,Hs(Xs(i,t),s)),Ds=(t,i,s)=>ys.addVec(t,ys.multiply(ys.subtractVec(i,t),s));function Es(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,n=t[0].y;for(let r=1;r<i;r+=1){const i=t[r];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<n&&(n=i.y)}return u(r(e,n),r(s,h))}return Ss}function Rs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return u(a(e,r,o),a(s,h,n))}return bs}const Os=(...t)=>{const i={min:{x:ps,y:ps},max:{x:ms,y:ms}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},zs=(t,i)=>u(a(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),a(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Vs(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}const Ns=(t,i,s)=>!(t.x>s.x||t.y>s.y||t.x<i.x||t.y<i.y);function Gs(t,i,s){return r(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function $s(t,i){return r(t.x-i.x,t.y-i.y)}function Us(t){const i=js(t);return 0===i?r(0,0):r(t.x/i,t.y/i)}function Ys(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Us(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function js(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Hs(t,i){return r(t.x*i,t.y*i)}function Ws(t,i){return r(t.x+i.x,t.y+i.y)}function Xs(t,i){return r(t.x-i.x,t.y-i.y)}function Zs(t,i){return r(t.x*i.x,t.y*i.y)}function Js(t,i){return r(t.x/i.x,t.y/i.y)}function Qs(t){return Hs(t,-1)}function Ks(t,i){return t.x*i.x+t.y*i.y}const qs=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return r(t,h)};function te(t){return t*Math.PI/180}function ie(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function se(t){return r(Math.cos(t),Math.sin(t))}const ee=(t,i,s,e)=>{let h,n,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(e.y-s.y)/(e.x-s.x),a=n*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),n=(e.y-s.y)/(e.x-s.x),o=(s.y-n*s.x+h*t.x-t.y)/(h-n),a=h*(o-t.x)+t.y),r(o,a)},he=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class re extends H{constructor(t,i,s,e){super(t,i,s,e),this.ss={internal:10,function:ne(10),number:10},this.U=1e3,this.H(1,1e3),this.Ht=this.es()}st(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<ae,n=Math.max(t,i)>le;return!r&&!n||!!h&&(i>t?{start:r?ae:t,end:n?le:i}:{start:n?le:t,end:r?ae:i})}Bt(t){const i=this.bt(),s=this.xt(),e=Math.max(t,ae);return i+(this.ss.function(e)-this.Ht.scaleStartLog)/this.Ht.scaleIntervalLog*(s-i)}Dt(t){const i=this.bt(),s=(t-i)/(this.xt()-i),e=this.Ht.scaleStartLog+s*this.Ht.scaleIntervalLog;return this.ss.number**e}Tt(){this.ss&&this.es()}H(t,i){return super.H(t,i),this.ss&&this.es(),this}St(t){return super.St(t),this.ss&&this.es(),this}X(t){return super.X(t),this.ss&&this.es(),this}hs(t){return this.ss={internal:t,function:ne(t),number:oe(t)},this}rs(){return this.ss.internal}Jt(t,i){const s=this.Bt(t)+i;return this.Dt(s)}Pt(){return this.rt||this.et||this.ot||this.ht}es(){const t=this.ss.function(this.G),i=this.ss.function(this.$)-t,s=2*this.bt()/this.U-1,e=2*this.xt()/this.U-1-s;return this.Ht={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.Ht}jt(){return this.Ht}}const ne=t=>"e"===t?Vi:zi(t),oe=t=>"e"===t?Math.E:t,ae=.9*10**-20,le=1.1*10**25,ue=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],ce=(t,i,s)=>{const e=Math.abs(s-i);if(0===e)return t.toFixed(0);const h=Math.max(2-xs(e,10),0);return t.toFixed(h)},de={Numeric:(t,i)=>{const{start:s,end:e}=i;return ce(t,s,e)},NumericUnits:(t,i)=>{const{start:s,end:e}=i,h=Math.abs(e-s),r=t<0;t=Math.abs(t);let n="",o="";if(h>=1e3&&t>1e3){let i="";for(const s of ue){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),o=s.prefix;break}}n=(r?"-":"")+i}else{let i=String(Math.floor(t));const s=xs(t,1e3);for(let t=1;t<=s;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}n=(r?"-":"")+i+(h<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-xs(h,10)):"")}return n+=o,n},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=ne(e)(t);return`${e}${fe(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=ne(e),r=Math.floor(h(t)),n=t/oe(e)**r;return`${Math.round(n)}×${e}${fe(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=ne(e),r=Math.floor(h(t));return`${(t/oe(e)**r).toFixed(2)}×${e}${fe(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=ne(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const{start:s,end:e}=i,h=Math.max(Math.abs(s),Math.abs(e)),r=Math.floor(Math.log10(h));return 0===t?`0.00e${r<0?"":"+"}${r}`:t.toExponential(2)}},fe=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join(""),Ae=(t,i)=>t.value-i.value,ge=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:m(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1,formatter:(t,i)=>ce(t,i.min,i.max)}),ve=t=>{const{steps:i}=t,s=i.length;i.sort(Ae);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class ye extends ge{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,formatter:t.formatter,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,ve(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(ve({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}setFormatter(t){return this.set("formatter",t)}getFormatter(){return this.get("formatter")}getColors(t,i){if(Array.isArray(t)){if(Array.isArray(t[0])){const s=t,e=s.length,h=s[0].length,r=[...Array(e)].map((()=>Array(h)));for(let t=0;t<e;t+=1)for(let e=0;e<h;e+=1)r[t][e]=this.ns(s[t][e],i);return r}const s=t,e=s.length,h=Array(e);for(let t=0;t<e;t+=1)h[t]=this.ns(s[t],i);return h}return this.ns(t,i)}ns(t,i){const{steps:s}=this,e=s.length;if(0===e)return this.getFallbackColor();if(1===e)return s[0].color||this.color;if(this.percentageValues,this.percentageValues&&i&&(t=Math.max(Math.min((t-i.min)/(i.max-i.min),1),0)),this.interpolate){for(let i=0;i<e-1;i+=1){const e=s[i],o=s[i+1],a=Math.min(e.value,o.value),l=Math.max(e.value,o.value);if(t>=a&&t<=l){if(a===l)return e.color;const i=(t-e.value)/(o.value-e.value);return h=e.color,r=o.color,n=i,new y({r:h.r+(r.r-h.r)*n,g:h.g+(r.g-h.g)*n,b:h.b+(r.b-h.b)*n,a:h.a+(r.a-h.a)*n})}}return t<s[0].value?s[0].color:s[e-1].color}var h,r,n;for(let i=e-1;i>=0;i-=1)if(t>=s[i].value)return s[i].color;return s[0].color}}const pe=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),me=(t,i)=>t.formatter(i,{min:t.min,max:t.max,percentageValues:t.percentageValues}),Se=i({type:"fillstyle",fillType:"empty"});class be extends Se{toString(){return"emptyFill"}toCSS(){return"transparent"}}const xe=new be,Me=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),we=i({type:"fillstyle",fillType:"solid",color:m(255,255,255)});class _e extends we{}class ke extends _e{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}toCSS(){return this.color.toRGBAString()}setColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Ce=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class Te extends _e{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}toCSS(){return this.getFallbackColor().toRGBAString()}setFallbackColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Fe=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),Ie=i({type:"fillstyle",fillType:"palette",lut:new ye({steps:[]}),lookUpProperty:"value"});class Le extends Ie{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}toCSS(){return`linear-gradient(${this.lut.getSteps().map((t=>t.color.toRGBAString())).join(", ")})`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Pe=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Be=(t,i)=>t instanceof re||i instanceof re?(new Q).Qt(t,i):(new J).Qt(t,i),De=t=>"client"===t,Ee=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Re=t=>"relative"===t,Oe=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),ze=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0},Ve=(t,i,s,e,h,r)=>{if(!t)return;let n=t;const o="button"in s?s:void 0;if(o&&"wheel"!==s.type)if(0===o.button){if(!1===t.lmb)return;void 0!==t.lmb&&(n=Kt(n,t.lmb))}else if(1===o.button){if(!1===t.mmb)return;void 0!==t.mmb&&(n=Kt(n,t.mmb))}else if(2===o.button){if(!1===t.rmb)return;void 0!==t.rmb&&(n=Kt(n,t.rmb))}if(e){if(!1===t.shift)return;n=Kt(n,t.shift)}if(h){if(!1===t.ctrl)return;n=Kt(n,t.ctrl)}if(r){if(!1===t.alt)return;n=Kt(n,t.alt)}if(!i)return n;const a=n[i];return a?!0===a?n:Kt(n,a):void 0},Ne=t=>{const i=[];return{push:t=>{i.push(t)},end:()=>{i.length>1&&t&&ti.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),i.forEach((t=>t()))}}},Ge=(t,i,s)=>{if(t){const t={x:s.x.bt(),y:s.y.bt(),width:s.x.Mt(),height:s.y.Mt()};i.forEach((i=>{i.ls=t}))}else i.forEach((t=>{t.ls=void 0}))},$e=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.us)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},Ue=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},Ye=(t,i,s,e=1)=>oi(t+.1*e*(i-t)+.5*e*Math.abs(s.getPixelSize())*Math.sign(i-t),t,i),je=(t,i,s,e=1)=>{const h=s.Bt(t),r=s.Bt(i);return oi(s.Dt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var He,We;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover",t[t.onHoverIndividual=2]="onHoverIndividual"}(He||(He={}));class Xe{constructor(t,i,s,e){this.cs=He.onHover,this.ui=!1,this.ci=!0,this.ds=[],this.chart=t,this.fs=i,this.bi=s,this.As=new Map,this.gs=e,this.vs=this.gs.ys(this,{ps:{themeEffectEnabled:this.bi.effectsText},Ss:{}}),this.chart.gi.xs.bs(this,(t=>{this.As.forEach(((i,s)=>s.Fi(t))),this.ds.forEach((i=>i.Fi(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),ti.requestAnimationFrame((()=>{this.ui||(this.addEventListener("pointerenter",(()=>{this.cs===He.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.cs===He.onHover&&this.setHighlight(!1)})))}))}Ms(){}ws(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.pointerEventsDisabled)&&i.pointerEventsDisabled,h=void 0!==(null==i?void 0:i.isText)&&i.isText;this.As.set(t,{isText:h,pointerEventsDisabled:e});const r=Array.from(this.As);this.vs.ps._s(r.filter((t=>t[1].isText)).map((t=>t[0]))),this.vs.Ss._s(r.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.ci).Fi(this.chart.gi.xs.ks(this,!0)),ti.requestAnimationFrame((()=>{this.ui||t.isDisposed()||(t.setPointerEvents(!0!==(null==i?void 0:i.pointerEventsDisabled)&&this.getPointerEvents()),s&&this.P.Oi(t,{getExtraData:(t,i,s)=>this.Ji(s,t,i)}))}));const n=i=>{t.removeEventListener("dispose",n),this.As.delete(t)};t.addEventListener("dispose",n)}Cs(t){this.ds=t;const i=this.chart.gi.xs.ks(this,!0);t.forEach((t=>{t.Fi(i).Ts(this.ci)}))}Ji(t,i,s){}Fs(t){const i=this.chart.gi.Is(t);if(i&&Array.from(this.As.keys()).includes(i.entity))return this.Ji(i.info,t,i.collectionMember)}setEffect(t){return this.vs.ps.Ls(t&&this.bi.effectsText),this.vs.Ss.Ls(t),this.chart.gi.Ps(),this}getEffect(){return this.vs.ps.Bs()||this.vs.Ss.Bs()}setIcon(t){return this.Ds=t,this.chart.gi.Ps(),this}getIcon(){return this.Ds}setName(t){return this.Es=t,this}getName(){return this.Es||"Component"}dispose(){return this.ui||(this.ui=!0,this.As.forEach(((t,i)=>i.dispose())),this.fs(this),this.P.D("dispose",{}),this.chart.legend.remove(this),this.chart.gi.Ps()),this}setVisible(t){return t===this.ci||(this.ci=t,this.As.forEach(((i,s)=>s.setVisible(t))),this.ds.forEach((i=>i.Ts(t))),this.P.D("visiblechange",{isVisible:t}),this.chart.Rs.forEach((t=>t.Os())),this.chart.gi.Ps()),this}getVisible(){return this.ci}setHighlight(t){return this.chart.gi.xs.zs(this,t),this.P.D("highlightchange",{highlight:is(t)}),this}getHighlight(){return this.chart.gi.xs.ks(this)}setAnimationHighlight(t){return this.chart.gi.xs.Vs(this,t),this}getAnimationHighlight(){return this.chart.gi.xs.Ns(this)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}getPointed(){if(!this.chart.gi.Gs())return!1;for(const t of this.As)if(this.chart.gi.$s(t[0]))return!0;for(const t of this.ds)if(this.chart.gi.$s(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.cs="boolean"==typeof t?t?He.onHover:He.noHighlighting:t,this.cs===He.noHighlighting&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==He.noHighlighting}Us(){}Ys(){return this.Ds}isDisposed(){return this.ui}set draggable(t){this.P.draggable=t}get draggable(){return this.P.draggable}}class Ze extends Xe{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.js=!0,this.Hs=t,this.axis=e,this.oi=h,this.Ws=r,ti.requestAnimationFrame((()=>this.Xs()))}setClipping(t){return this.js=t,this.Hs.Ps(),this}getClipping(){return this.js}}!function(t){t[t.Other=0]="Other",t[t.CursorResultTable=1]="CursorResultTable",t[t.CursorTickMarker=2]="CursorTickMarker",t[t.ChartTitle=3]="ChartTitle",t[t.AxisTitle=4]="AxisTitle"}(We||(We={}));const Je=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Qe;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(Qe||(Qe={}));const Ke=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",qe=t=>"ProgressiveX"===t||"ProgressiveY"===t,th=(t,i,s)=>t*(1-s)+i*s,ih=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=th(s.value,h.value,r),c=th(i.value,e.value,o);return th(c,u,l)},sh={warm:t=>i=>b(60/(t-1)*i,.8,.8),cold:t=>i=>b(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>b(360/t*i,.8,.8),reverseSpectrum:t=>i=>b(360/t*(t-i),.8,.8),flatUI:t=>i=>b(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return b(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return b(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return b(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return b(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return b(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>b(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return b(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return b(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),b(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return b(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,b(l,.8,e)}return b(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>b(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>eh([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>eh([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>eh([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>eh([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>eh([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>eh([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},eh=(t,i,s)=>{const e=rh(i,s),[h,r]=nh(e,t),n=hh(t[h]),o=hh(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:th(n.h,o.h,a),s:th(n.s,o.s,a),v:th(n.v,o.v,a)};return b(l.h,l.s,l.v)},hh=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(S(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},rh=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},nh=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class oh{constructor(){this.type="simple"}}const ah=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),lh=new oh;class uh{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=S("#000"),this.specularColor=S("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const ch=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),dh=new uh,fh={Simple:oh,Phong:uh};class Ah{getFillStyle(){return xe}}const gh=new Ah,vh=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new ke,wireframeStyle:$t});class yh extends vh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const ph=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),mh=i({type:"pixelated-points-3d",size:5,fillStyle:new ke});class Sh extends mh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const bh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),xh={Triangulated:yh,Pixelated:Sh},Mh=i({type:"linestyle",lineType:"solid",fillStyle:new ke({color:m(255,255,255)}),thickness:1});class wh extends Mh{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Yi(){const t=this.getThickness();return t<0?1:t}}const _h=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),kh={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Ch=i({type:"linestyle",lineType:"dashed",pattern:kh.DashedEqual,fillStyle:new ke({color:m(255,255,255)}),thickness:1,patternScale:3});class Th extends Ch{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Yi(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const Fh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),Ih=i({type:"icon",width:void 0,height:void 0,Zs:void 0,Js:ri,Qs:ri});class Lh extends Ih{constructor(t,i,s,e){super({...e,Zs:t,Js:i,Qs:s})}dispose(){return this.Qs(this),this}setWidth(t){const i=this.set("width",t);return this.Js(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.Js(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.Js(s),s}_t(){if(!this.Zs)return{x:0,y:0};const t=this.Zs.width,i=this.Zs.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Ph=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),Bh=i({type:"glow",color:m(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Dh extends Bh{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const Eh=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Rh extends Z{constructor(){super(...arguments),this.ei="RadialScale",this.Ks={start:0,end:1},this.qs=!1,this.te=0,this.U=r(0,0),this.ie=[0,0],this.se=[0,0],this.o=!0,this.It=!0,this.ee=!0,this.he=!0,this.re={x:0,y:0},this.Ht={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}ne(t,i){return t===this.Ks.start&&i===this.Ks.end||(this.Ks={start:t,end:i},this.ee=!0,this.oe()),this}ae(){return this.Ks}le(){return this.Ks.end>=this.Ks.start}ue(t){this.qs=t,this.he=!0}ce(){return!1===this.qs}de(t){this.te=t,this.he=!0}fe(){return this.te}Pt(){return this.It}Ot(){return!1}hi(t,i,s,e){return this.x=new W(t.x,i.x,s.x,e?e.x:void 0),this.y=new W(t.y,i.y,s.y,e?e.y:void 0),this}jt(){return this.Ht}Ae(){return this.ee}ge(){return this.he}ri(){return this.re}Y(){return this.o=!1,this.It=!1,this.ee=!1,this.he=!1,this}j(){return this.o=!0,this.It=!0,this.ee=!0,this.he=!0,this}X(t,i){return"object"==typeof t?(this.U.x=t.x,this.U.y=t.y):(this.U.x=t,this.U.y=i),this.oe(),this}Kt(t){return this.ie=t,this.oe(),this}qt(t){return this.se=t,this.oe(),this}wt(){return r(this.ie[0]+this.ie[1],this.se[0]+this.se[1])}_t(){return this.U}oe(){const t=this.Ks,i=r(this.x.kt(this.U.x),this.y.kt(this.U.y)),s=this.ie[0]+this.ie[1],e=this.se[0]+this.se[1],h=Math.max(i.x-s,0),n=Math.max(i.y-e,0),o=.5*(h>n?n:h),a=[this.ie[0]+Math.max((h-2*o)/2,0),this.ie[1]+Math.max((h-2*o)/2,0)],l=[this.se[0]+Math.max((n-2*o)/2,0),this.se[1]+Math.max((n-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.X(this.U.x).St(a).H(-u,u),this.y.X(this.U.y).St(l).H(-u,u),this.re={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Ht={x:this.x.jt(),y:this.y.jt()},this.j()}Jt(t,i){const s=this.ri();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ni(t,i,s,e){const h=this.ri(),r=Ys(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}const Oh=t=>{if(t instanceof J||t instanceof Rh)return t.Ot()?"linear-highPrecision":"linear";if(t instanceof Q){const i={};return t.x instanceof re&&(i.x={base:t.x.rs()}),t.y instanceof re&&(i.y={base:t.y.rs()}),["logarithmic",i]}return"linear"},zh=(t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}},Vh=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},Nh=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.ji(),max:i.Hi()}:"y"===t.getLookUpProperty()?{min:i.Wi(),max:i.Xi()}:"z"===t.getLookUpProperty()?{min:i.ve(),max:i.ye()}:void 0,Gh=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),$h={init:t=>(t=>{const i=new Map;t.engine.addEventListener("locationchange",(()=>{i.forEach((t=>{t.bounds=void 0}))}));const s=s=>{let e=i.get(s.uid);if(!e){const h=document.createElement("p");h.className="lcjs-text",t.engine.container.append(h),h.style.userSelect="none",h.style.whiteSpace="nowrap",h.style.margin="0px",e={span:h,active:!0},i.set(s.uid,e),h.addEventListener("pointerenter",(i=>t.handleEvent(s,i))),h.addEventListener("pointermove",(i=>t.handleEvent(s,i))),h.addEventListener("pointerleave",(i=>t.handleEvent(s,i)))}if(e.text!==s.text&&(((t,i)=>{const s=t.includes("latex:"),e=!s&&t.includes("tex:");let h=!0;if(s||e)try{ti.MathJax&&s?(h=!1,i.innerHTML=t.replace(/latex:/g,""),ti.MathJax.typesetPromise([i]).catch((t=>ti.console.error(t.message)))):ti.katex&&e&&(h=!1,ti.katex.render(t.replace(/tex:/g,""),i,{throwOnError:!1}))}catch(t){h=!0}h&&(i.innerHTML=t)})(s.text,e.span),e.bounds=void 0),e.font!==s.font&&(e.span.style.font=s.font,e.bounds=void 0),e.position!==s.position&&(e.span.style.position=s.position,e.bounds=void 0),e.color!==s.color&&(e.span.style.color=s.color),e.padding!==s.padding&&(e.span.style.padding=s.padding,e.bounds=void 0),e.rotation!==s.rotation&&(e.span.style.transform=`rotate(${s.rotation}deg)`,e.bounds=void 0),e.span.style.lineHeight="80%",e.text!==s.text||e.left!==s.left||e.top!==s.top||e.alignmentX!==s.alignmentX||e.alignmentY!==s.alignmentY||e.padding!==s.padding||e.rotation!==s.rotation||e.font!==s.font){e.span.style.width="unset",e.span.style.height="unset";const t=e.span.clientWidth,i=e.span.clientHeight,h=zh(t,i,s.rotation),r={x:(h.x-t)/2,y:(h.y-i)/2};e.span.style.left=`${s.left+(-.5*s.alignmentX-.5)*h.x+r.x}px`,e.span.style.top=`${s.top+(.5*s.alignmentY-.5)*h.y+r.y}px`,e.bounds=void 0}return e.text=s.text,e.font=s.font,e.position=s.position,e.color=s.color,e.padding=s.padding,e.rotation=s.rotation,e.left=s.left,e.top=s.top,e.alignmentX=s.alignmentX,e.alignmentY=s.alignmentY,e},e=t=>{const i=s(t);let e=i.bounds;return e||(e=i.span.getBoundingClientRect(),i.bounds=e),e},h="polygon(0 0, 0 0, 0 0, 0 0)";return{update:t=>{i.forEach((t=>t.active=!1)),t.textList.forEach((t=>{const i=s(t);i.active=!0,i.span.style.clipPath="unset",t.identifier,We.Other})),t.obstructingOverlays.forEach((s=>{const r=Math.min(s.p1.clientX,s.p2.clientX)-0,n=Math.min(s.p1.clientY,s.p2.clientY)-0,o=Math.max(s.p1.clientX,s.p2.clientX)+0,a=Math.max(s.p1.clientY,s.p2.clientY)+0;t.textList.forEach((t=>{if(s.blacklist.includes(t.identifier))return;const l=i.get(t.uid),u=e(t);var c,d,f,A,g,v,y,p;if(c=r,d=n,f=o,A=a,g=u.left-0,v=u.top-0,y=u.right+0,p=u.bottom+0,!((c>=f?c:f)<(g<y?g:y)||(c<f?c:f)>(g>=y?g:y)||(d>=A?d:A)<(v<p?v:p)||(d<A?d:A)>(v>=p?v:p))&&l)if(0!==t.rotation)l.span.style.clipPath=h;else{const t=((t,i,s,e,h,r,n,o)=>{const a=t<s?t:s,l=t>=s?t:s,u=i<e?i:e,c=i>=e?i:e,d=h<n?h:n,f=h>=n?h:n,A=r<o?r:o,g=r>=o?r:o;if(d<a&&f>l&&A<u&&g>c)return[];if(d>=a&&f<=l&&A>=u&&g<=c){const t=.5*(c+u);return[{x:a,y:u},{x:l,y:u},{x:l,y:t},{x:f,y:t},{x:f,y:A},{x:d,y:A},{x:d,y:g},{x:f,y:g},{x:f,y:t},{x:l,y:t},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>d&&l<f){if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:d,y:A},{x:d,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(u>A&&u<g&&c>g)return[{x:a,y:u},{x:d,y:u},{x:d,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(A<u&&g>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:a,y:c}];if(A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:d,y:A},{x:d,y:c},{x:a,y:c}]}if(d<a&&f>a&&f<l){if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:g},{x:f,y:g},{x:f,y:A},{x:a,y:A}];if(g>u&&A<u&&g<c)return[{x:l,y:u},{x:l,y:c},{x:a,y:c},{x:a,y:g},{x:f,y:g},{x:f,y:u}];if(A<u&&g>c)return[{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c}];if(A<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:A},{x:a,y:A}]}if(a>d&&l<f){if(A<u&&g>u&&g<c)return[{x:a,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}];if(u<A&&A<c&&g>c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:a,y:A}];if(u<A&&g<c)return[{x:a,y:u},{x:l,y:u},{x:l,y:A},{x:a,y:A},{x:a,y:g},{x:l,y:g},{x:l,y:c},{x:a,y:c}]}if(a<d&&l>f){if(u<A&&c>A)return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:f,y:c},{x:f,y:A},{x:d,y:A},{x:d,y:c},{x:a,y:c}];if(A<u&&g>u&&g<c)return[{x:a,y:u},{x:d,y:u},{x:d,y:g},{x:f,y:g},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}];if(A<u&&A<c&&g>c)return[{x:a,y:u},{x:d,y:u},{x:d,y:c},{x:f,y:c},{x:f,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]}return[{x:a,y:u},{x:l,y:u},{x:l,y:c},{x:a,y:c}]})(u.left-0,u.top-0,u.right+0,u.bottom+0,r,n,o,a);l.span.style.clipPath=0===t.length?h:`polygon(${t.map((t=>`${100*(t.x-u.left)/u.width}% ${100*(t.y-u.top)/u.height}%`)).join(", ")})`}}))})),i.forEach(((t,s)=>{t.active||(t.span.remove(),i.delete(s))}))},measureText:t=>{if(!t.visible)return{x:0,y:0};const i=e(t);return{x:i.width,y:i.height}},getTextBoundingBox:t=>{if(t.visible)return e(t)},dispose:()=>{i.forEach((t=>{t.span.remove()}))}}})(t)};class Uh{constructor(t,i){this.pe=t,this.me=i,this.Se=i.rows*mr,this.be=i.columns*Sr}}var Yh,jh;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(Yh||(Yh={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(jh||(jh={}));const Hh={x:-43,y:0},Wh={x:-65,y:0},Xh={x:-86,y:0},Zh={x:-107,y:-1},Jh={x:-128,y:-3},Qh={x:-150,y:0},Kh={x:-171,y:0},qh={x:-276,y:0},tr={x:-298,y:0},ir={x:0,y:0},sr={x:-21,y:0};class er extends Uh{constructor(t,i,s,e){super(t,s),this.xe=ti.document.createElement("button"),this.Me=ti.document.createElement("div"),this.we=ti.document.createElement("label"),this.me=s,this._e=i,this.ke=e}Ce(t,i,s,e){this.Te(t,e),this.Fe(),this.Ie(i),this.Le(),this.we.textContent=s||"";const h=ti.document.createElement("div");this.Pe(h),this.xe.onclick=this.onClick.bind(this),h.appendChild(this.Me),h.appendChild(this.we),this.xe.appendChild(h)}Le(){this.xe.style.cursor="pointer"}Pe(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Ie(t){"string"==typeof t?(this.Me.style.backgroundImage=`url(${t})`,this.Me.style.backgroundSize="100%",this.Me.style.backgroundRepeat="no-repeat",this.Me.style.backgroundPosition="center",this.Me.style.width="20px",this.Me.style.height="20px"):this.applyStyleForSprite(t),this.Me.style.margin="auto"}Fe(){switch(this._e){case jh.RoundedRectangle:this.xe.style.borderRadius="10px";break;case jh.Rectangle:this.xe.style.borderRadius="0px";break;case jh.Circle:default:this.xe.style.borderRadius="31px"}}Te(t,i){this.xe.style.width=`${this.be.toString()}px`,this.xe.style.height=`${this.Se.toString()}px`,this.xe.style.backgroundColor=t,this.xe.style.opacity=i||br,this.xe.style.alignItems="center",this.xe.style.border="2px solid #707070",this.xe.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Me.style.backgroundImage=`url(${this.pe}/${xr})`,this.Me.style.backgroundPositionX=`${t.x}px`,this.Me.style.backgroundPositionY=`${t.y}px`,this.Me.style.backgroundSize="1600%",this.Me.style.backgroundRepeat="no-repeat",this.Me.style.width="20px",this.Me.style.height="20px"}Be(t){return t.appendChild(this.xe),t}De(){return this.xe}}class hr extends er{constructor(t,i,s,e){super(t,i,s,e),this.Ee="",this.Re="",this.Oe=!1,this.ke=e}ze(){this.Ve(),this.onToggledStateAction()}Ne(){this.Ge(),this.onInitialStateAction()}Ge(){this.$e(this.Ee)}Ve(){this.$e(this.Re)}$e(t){"string"==typeof t?this.Me.style.background=t:(this.Me.style.backgroundImage=`url(${this.pe}/${xr})`,this.Me.style.backgroundPositionX=`${t.x}px`,this.Me.style.backgroundPositionY=`${t.y}px`)}onClick(){this.Oe?this.Ne():this.ze(),this.Oe=!this.Oe}}class rr extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Hh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:-1,y:-1})}}class nr extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Zh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:-1,y:0})}}class or extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Qh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:0,y:-1})}}class ar extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Wh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:1,y:1})}}class lr extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Jh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:1,y:0})}}class ur extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Kh)}onClick(){const t=this.ke.Ue();t&&this.ke.zoom(t,{x:0,y:1})}}class cr extends hr{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ee=qh,this.Re=tr,this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),this.Ee)}onToggledStateAction(){this.ke.setAnimationsEnabled(!1)}onInitialStateAction(){this.ke.setAnimationsEnabled(!0)}}class dr extends er{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.ke=i;const e=this.ke.getTheme();this.Ce(e.onScreenMenuBackgroundColor.toRGBAString(),Xh)}onClick(){this.ke.forEachAxis((t=>{t.fit(!0)}))}}class fr extends er{constructor(t,i,s){super(t,i.shape||Mr,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.Ce(h,r,n,o),this.Ye=i.action}onClick(){this.Ye(this.ke)}}class Ar extends hr{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.ke=s,this.je=e,this.Ee=sr,this.Re=ir,this.Ce(wr,this.Ee)}Ge(){this.$e(this.Ee),this.xe.style.backgroundColor=wr,this.xe.style.border="2px solid #707070",this.xe.style.margin="0px"}Ve(){this.$e(this.Re),this.xe.style.background="#FECC00 0% 0% no-repeat padding-box",this.xe.style.border="10px solid #BCBCBC12",this.xe.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.je)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.je)||void 0===t||t.style.setProperty("display","none")}}var gr;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t.Grab="grab",t.Grabbing="grabbing"}(gr||(gr={}));const vr={LeftBottom:r(-1,-1),CenterBottom:r(0,-1),RightBottom:r(1,-1),LeftCenter:r(-1,0),Center:r(0,0),RightCenter:r(1,0),LeftTop:r(-1,1),CenterTop:r(0,1),RightTop:r(1,1)},yr=new ke({color:m(255,255,255,0)}),pr=new wh({thickness:1,fillStyle:yr}),mr=60,Sr=60,br="1.0",xr="osm/osm-sprite-transparent.png",Mr=jh.Circle,wr="#363636";var _r;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(_r||(_r={}));class kr extends Ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Band",this.He=0,this.We=1,this.Xe=this.bi.bandFillStyle,this.Ze=this.bi.bandStrokeStyle,this.P=new Pt,this.Je=this.Hs.qe(this.oi).Ke(this.Xe).Qe(this.Ze).Fi(this.getHighlight()),this.ws(this.Je)}setValueStart(t){return this.He=t,this.P.D("valuechange",{start:this.He,end:this.We}),this.Hs.Ps(),this}getValueStart(){return this.He}setValueEnd(t){return this.We=t,this.P.D("valuechange",{start:this.He,end:this.We}),this.Hs.Ps(),this}getValueEnd(){return this.We}setFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const i=this.Xe;return this.Je.Ke(i),this.Hs.Ps(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;return this.Je.Qe(i),this.Hs.Ps(),this}getStrokeStyle(){return this.Ze}th(){return this.Je.ih(this.Ws.toVec2(this.He,this.Ws.getHeight(this.oi).getInnerStart())).X(this.Ws.toVec2(this.We-this.He,this.Ws.getHeight(this.oi).getInnerInterval())),Ge(this.js,[this.Je],this.oi),this}eh(){return{fill:this.Xe,stroke:this.Ze}}hh(t,i){t.Fi(i),this.Hs.Ps()}Xs(){let t,i,s;const e=(e,h,r)=>{const n=tt(this.Hs.gi.rh(e.clientX,e.clientY),this.Hs.gi.oi,this.oi),o=this.Ws.getWidth(n),a=this.axis.oi.Bt(this.He),l=this.axis.oi.Bt(this.We),u=(this.axis.oi.Bt(o)-a)/(l-a);t=h&&(!(u<.1||u>.9)||!r),i=r&&!t,i&&(s=u<.5)},h=s=>{const h=this.getUserInteractions(),r=Ve(h.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),n=Ve(h.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);e(s,!!(null==r?void 0:r.drag),!!(null==n?void 0:n.drag));const o=t?gr.Point:i?this.Ws.getWidth({x:gr.Horizontal,y:gr.Vertical}):gr.Default;this.oh=this.chart.engine.setMouseStyle(o,this.oh)},r=t=>{this.oh=this.chart.engine.restoreMouseStyle(this.oh)};this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r);const n=(e,h,r,n)=>{const o=this.Ws.getWidth(e);if(t){this.He=this.axis.oi.Jt(this.He,o),this.We=this.axis.oi.Jt(this.We,o);const t=null==r?void 0:r.on;t&&t({event:h})}else if(i&&s){this.He=this.axis.oi.Jt(this.He,o);const t=null==n?void 0:n.on;t&&t({event:h})}else if(i&&!s){this.We=this.axis.oi.Jt(this.We,o);const t=null==n?void 0:n.on;t&&t({event:h})}ki(h),this.P.D("valuechange",{start:this.He,end:this.We}),this.Hs.Ps()};this.addEventListener("pointerdown",(s=>{const e=this.getUserInteractions(),o=Ve(e.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),a=Ve(e.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);if(!(null==o?void 0:o.drag)&&t)return;if(!(null==a?void 0:a.drag)&&i)return;ki(s);let l=s;const u=t=>{if(t.pointerId!==s.pointerId)return;const i={x:t.clientX-l.clientX,y:l.clientY-t.clientY};n(i,t,o,a),l=t},c=t=>{t.pointerId===s.pointerId&&(this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r),ti.removeEventListener("pointermove",u),ti.removeEventListener("pointerup",c),gs())};this.removeEventListener("pointermove",h),this.removeEventListener("pointerleave",r),ti.addEventListener("pointermove",u),ti.addEventListener("pointerup",c)}))}setUserInteractions(t){return this.ah=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return Kt({move:{drag:!0},scale:{drag:!0}},this.ah)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Cr extends Ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Constant Line",this.S=0,this.Ze=this.bi.constantLineStrokeStyle,this.uh=!0,this.P=new Pt,this.dh=this.Hs.Ah(this.oi).fh(this.Ze).Fi(this.getHighlight()),this.ws(this.dh)}setValue(t){return this.S=t,this.P.D("valuechange",{value:this.S}),this.Hs.Ps(),this}getValue(){return this.S}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;return this.dh.fh(i),this.Hs.Ps(),this}getStrokeStyle(){return this.Ze}th(){return this.dh.ph(this.Ws.toVec2(this.S,this.Ws.getHeight(this.oi).getInnerStart())).gh(this.Ws.toVec2(this.S,this.Ws.getHeight(this.oi).getInnerEnd())),Ge(this.js,[this.dh],this.oi),this}eh(){return{stroke:this.Ze}}hh(t,i){t.Fi(i),this.Hs.Ps()}setUserInteractions(t){return this.ah=void 0===t?{move:!1}:t,this}getUserInteractions(){return Kt({move:{drag:!0}},this.ah)}Xs(){this.addEventListener("pointerenter",(t=>{const i=this.getUserInteractions();if(Ve(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Ws.getWidth({x:gr.Horizontal,y:gr.Vertical});this.oh=this.chart.engine.setMouseStyle(t,this.oh)}})),this.addEventListener("pointerleave",(t=>{this.oh=this.chart.engine.restoreMouseStyle(this.oh)})),this.addEventListener("pointerdown",(t=>{const i=this.getUserInteractions(),s=Ve(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(s){ki(t),gs();let i=t;const e=t=>{const e={x:t.clientX-i.clientX,y:i.clientY-t.clientY};i=t,this.S=this.axis.oi.Jt(this.S,this.Ws.getWidth(e)),this.P.D("valuechange",{value:this.S}),this.Hs.Ps();const h=s.on;h&&h({event:t})},h=i=>{i.pointerId===t.pointerId&&(ti.removeEventListener("pointermove",e),ti.removeEventListener("pointerup",h))};ti.addEventListener("pointermove",e),ti.addEventListener("pointerup",h)}}))}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Tr="fitting",Fr="expansion",Ir="progressive",Lr="regressive",Pr={fitting:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end,e=void 0===(null==t?void 0:t.considerVisibleRangeOnly)||t.considerVisibleRangeOnly;return{id:Tr,init:t=>{t.axis.mh((t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax}))},considerVisibleRangeOnly:e,apply:t=>{if(t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min:t.seriesDataRange.max:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max:t.seriesDataRange.min:t.curEnd,allowIntervalLengthChange:!0}}}},scrolling:t=>{const i=void 0!==(null==t?void 0:t.progressive)&&!t.progressive,s=!0===(null==t?void 0:t.realTime)?{}:null==t?void 0:t.realTime;if(s){const t=void 0!==s.catchUpThresholdMs?s.catchUpThresholdMs:3e3;let e;const h=t=>{t.isStopped&&(e=void 0)};return{id:i?Lr:Ir,init:t=>{t.axis.mh((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax})),t.axis.addEventListener("stoppedchange",h)},dispose:t=>{t.axis.removeEventListener("stoppedchange",h)},considerVisibleRangeOnly:!0,apply:s=>{if(!s.seriesDataRange)return;const h=ti.performance.now();if(void 0!==e){const r=(h-e)*(i?-1:1);let n=s.curStart+r,o=s.curEnd+r;const a=s.axis.Sh({forStart:n,forEnd:o,allowIntervalLengthChange:!1});if(!i&&a&&s.curEnd>s.curStart&&a.end-o>=t){const t=a.end-o;o+=t,n+=t}if(!i&&a&&s.curEnd<s.curStart&&a.start-n>=t){const t=a.start-n;o+=t,n+=t}return e=h,{start:n,end:o,allowIntervalLengthChange:!1,keepScrolling:!0,allowAnimation:!1}}return e=h,{keepScrolling:!0,start:s.curStart,end:s.curEnd,allowIntervalLengthChange:!1,allowAnimation:!1}}}}return{id:i?Lr:Ir,init:t=>{t.axis.mh((t=>i?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax}))},considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange){if(Math.sign(t.curEnd-t.curStart)*Math.sign(i?-1:1)>0){const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{end:s,start:s+(t.curStart-t.curEnd),allowIntervalLengthChange:!1}}{const s=i?t.seriesDataRange.min:t.seriesDataRange.max;return{start:s,end:s+(t.curEnd-t.curStart),allowIntervalLengthChange:!1}}}}}},expansion:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:Fr,considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange)return{start:i?t.curEnd>=t.curStart?t.seriesDataRange.min<t.curStart?t.seriesDataRange.min:t.curStart:t.seriesDataRange.max>t.curStart?t.seriesDataRange.max:t.curStart:t.curStart,end:s?t.curEnd>=t.curStart?t.seriesDataRange.max>t.curEnd?t.seriesDataRange.max:t.curEnd:t.seriesDataRange.min<t.curEnd?t.seriesDataRange.min:t.curEnd:t.curEnd,allowIntervalLengthChange:!0}}}},nextPowerOf10:{id:Tr,start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?10**Math.ceil(Math.log10(e)):10**Math.ceil(Math.log10(s)),allowIntervalLengthChange:!0},fittingStepped:t=>{const i=void 0===(null==t?void 0:t.start)||t.start,s=void 0===(null==t?void 0:t.end)||t.end;return{id:Tr,considerVisibleRangeOnly:!0,apply:t=>{if(void 0===t.seriesDataRange)return;let e,h;if(i)if(t.curEnd>=t.curStart)if(t.seriesDataRange.min<t.curStart)e=t.curStart-(t.curEnd-t.curStart);else{const i=t.curStart+.5*(t.curEnd-t.curStart);e=t.seriesDataRange.min>i?i:t.curStart}else if(t.seriesDataRange.max>t.curStart)e=t.curStart+(t.curStart-t.curEnd);else{const i=t.curStart-.5*(t.curStart-t.curEnd);e=t.seriesDataRange.max<i?i:t.curStart}else e=t.curStart;if(s)if(t.curEnd>=t.curStart)if(t.seriesDataRange.max>t.curEnd)h=t.curEnd+(t.curEnd-t.curStart);else{const i=t.curEnd-.5*(t.curEnd-t.curStart);h=t.seriesDataRange.max<i?i:t.curEnd}else if(t.seriesDataRange.min<t.curEnd)h=t.curEnd-(t.curStart-t.curEnd);else{const i=t.curEnd+.5*(t.curStart-t.curEnd);h=t.seriesDataRange.min>i?i:t.curEnd}else h=t.curEnd;return{start:e,end:h,allowIntervalLengthChange:!0}}}}},Br={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},Dr=t=>void 0!==t.bh,Er=t=>void 0!==t.Mh,Rr=t=>void 0!==t.wh,Or=(t,i,s,e,h,r,n)=>[r,n],zr=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){let r=t+s*n;void 0!==e&&(r=Math.round(r*e)/e),r<i&&h.push(r)}return h},Vr=(t,i,s,e,h)=>{ni(t,0)&&(t=0),ni(i,0)&&(i=0);const r=[],n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;let o=n;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);let a=0;for(;(o-t)/(i-t)<.98;)r.push(o),a+=1,o=n+a*s,void 0!==h&&(o=Math.round(o*h)/h);return r.push(o),r},Nr=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===ni(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Gr=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},$r=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},Ur=i({cursorFormatter:void 0});class Yr extends Ur{_h(t){return{kh:[],Ch:[],Th:this.cursorFormatter?this.cursorFormatter:de.Numeric,Fh:void 0,Ih:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const jr=t=>t&&"function"==typeof t?t():t,Hr=(t,i,s,e,h,r,n,o,a,l,u)=>{let c=a.get(n);if(c||(c=new Map,a.set(n,c)),c.has(t))return c.get(t);if(0===i.length)return Ss;const d=u.Lh(i,n.Ph.labelFont,h),f=o.Jt(s,{x:-(e.x/2+.5)*d.x+r.x-l,y:-(e.y/2+.5)*d.y+r.y-l}),A=o.Jt(f,{x:d.x+l,y:d.y+l}),g={min:{x:Math.min(f.x,A.x),y:Math.min(f.y,A.y)},max:{x:Math.max(f.x,A.x),y:Math.max(f.y,A.y)}};return c.set(t,g),g},Wr=(new Yr)._h({type:"linear"});class Xr{constructor(t,i,s,e,h,r,n){this.Bh=Wr,this.Dh=Br.Empty,this.Eh=new Map,this.Rh=!0,this.Oh=Rt((()=>this.chart.gi.Ps()))(300,Dt.linear),this.zh=!0,this.ci=!0,this.Vh=!1,this.Nh=ms,this.Gh=!1,this.$h=!1,this.Uh=ms,this.Yh=ms,this.jh=ms,this.Hh=!1,this.Wh="",this.Xh=!1,this.Zh=!1,this.Jh=!1,this.Qh=()=>{this.qh.Kh=We.AxisTitle,this.qh.setPointerEvents(!0),this.title.Oi(this.qh),this.Qh=void 0},this.tr=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=this.ir(),d=[],f=t.filter((t=>this.sr(t.keyValue,t.labelText,i))),A=[...f,...a.filter((t=>this.sr(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,g=[];if(this.sr(a.keyValue,a.labelText,i)){const t=Hr(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,i,c,o,u,this.chart.gi.er);g=ts(A.map((i=>i&&i!==a&&Ms(t,Hr(i.keyValue,i.labelText,i.labelPosition,i.labelAlignment,i.labelRotation,i.labelOffset,i.tickLevel,c,o,u,this.chart.gi.er))?i:void 0))),l=g.length>0}else l=!1;if(l){let o=!0;if(o&&g.every((t=>Dr(t.tickLevel)))&&(o=!1),o&&i.hr&&i.hr.rr&&!1===i.hr.rr(a.keyValue,s,e,h,r,n)&&(o=!1),!1===o){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.Bh.Th(t,{start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()}),this.nr=!0,this.ar=!0,this.title=new Pt,this.chart=t,this.lr=i,this.bi=e,this.ur=r,this.oi=s,this.cr=n,"logarithmic"===n.type&&this.setAnimationZoom(Dt.logarithmic(oe(n.base))),this.dr=r.numeric,this.Ar("Numeric"),this.gr=s.getInnerStart(),this.vr=s.getInnerEnd(),this.setAnimationsEnabled(h),this.setScrollStrategy(Pr.fitting)}setUnits(t,i={}){return this.yr=t,this.us=i,this.pr(),this}getUnits(){return this.yr}setDefaultInterval(t,i){return this.mr=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.Hh=!0,this.chart.gi.Ps()),this.Sr=void 0!==(null==i?void 0:i.skipIntervalRestrictions)?i.skipIntervalRestrictions:void 0,this}getDefaultInterval(){return this.mr}getTitle(){return this.Wh}setTitle(t){return this.Wh=t,this.pr(),this}getTitleFillStyle(){return this.qh.br()}setIntervalRestrictions(t){return this.Mr=t,this.Xh=!0,this.chart.gi.Ps(),this}getIntervalRestrictions(){if("function"==typeof this.Mr){const t=this.wr();return this.Mr({curStart:this.gr,curEnd:this.vr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Mr}mh(t){this.Xh||this.Zh||(this.Mr=t)}setTitleFillStyle(t){return this.qh.Ke(t),this.chart.gi.Ps(),this}getTitleFont(){return this.qh._r()}setTitleFont(t){return this.qh.kr(t),this.chart.gi.Ps(),this}setTitleRotation(t){return this.qh.Cr(t),this.chart.gi.Ps(),this.Jh=!0,this}getTitleRotation(){return this.qh.Tr()}setTitleEffect(t){return this.Fr.Ls(t),this.chart.gi.Ps(),this}getTitleEffect(){return this.Fr.Bs()}Ar(t,i){if(this.Eh.size>0&&this.Ir(),"Empty"===t){const s=i||(t=>t);this.dr=s(new Yr),this.Bh=this.dr._h(this.cr),this.Dh=t}else if("Numeric"===t){"Numeric"!==this.Dh&&(this.dr=this.ur.numeric);const s=i||(t=>t);this.dr=s(this.dr),this.Bh=this.dr._h(this.cr),this.Dh=t}else if("DateTime"===t){"DateTime"!==this.Dh&&(this.dr=this.ur.datetime);const s=i||(t=>t);this.dr=s(this.dr),this.Bh=this.dr._h(this.cr),this.Dh=t}else if("Time"===t){"Time"!==this.Dh&&(this.dr=this.ur.time);const s=i||(t=>t);this.dr=s(this.dr),this.Bh=this.dr._h(this.cr),this.Dh=t}return this.chart.gi.Ps(),this}Lr(){return this.Bh}Pr(t,i){this.Bh=t,this.Dh=i,this.chart.gi.Ps()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.Xh||(this.Zh=!0,this.Mr=void 0),this.ai(void 0!==i?i:this.gr,void 0!==s?s:this.vr,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}ai(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n="synchronizedAxis"===h||"setDefaultInterval"===h&&!1!==this.Sr,o="setDefaultInterval"!==h,a=Math.abs(i-t),l=Math.abs(this.vr-this.gr);if(void 0!==this.Bh.Fh&&this.Bh.Fh>a){const s=(i+t)/2,e=(o?this.Bh.Fh/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.Bh.Ih&&this.Bh.Ih<a){const s=(i+t)/2,e=(o?this.Bh.Ih/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}const u=this.oi.st(r.start,r.end,this.gr,this.vr,o);if(!1===u)return this;if(!0===u);else if(r=u,"zoomBandChartOther"===h)return this;let c;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":case"zoomBandChartClick":c=!0;break;case"zoomBandChartOther":case"synchronizedAxis":c=!1;break;default:return ss(0,""),this}if(this.Br&&this.Br.finishAll(!1),this.Oh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.Br||this.Br.isOver()?this.Oh:this.Br.NextAnimation.bind(this);this.Br=i([[this.gr,r.start],[this.vr,r.end]],(([t,i])=>{this.Dr(t,i,{allowIntervalLengthChange:o,skipIntervalRestriction:n})}),t),this.Br.addEventListener("end",(()=>{this.Br=void 0,c&&(this.jh=ti.performance.now())})),this.Br.addEventListener("end",(()=>{this.setStopped(e)}))}else this.Dr(r.start,r.end,{allowIntervalLengthChange:o,skipIntervalRestriction:n}),this.setStopped(e),c&&(this.jh=ti.performance.now());return this}getInterval(){return{start:this.gr,end:this.vr}}setStopped(t){return t===this.Vh||(t&&(this.Br&&this.Br.finishAll(!1),this.Br=void 0),this.Vh=t,this.P.D("stoppedchange",{isStopped:this.Vh}),this.Nh=ti.performance.now(),this.chart.gi.Ps()),this}getStopped(){return this.Vh}fit(t,i){const s=this.wr(),e=this.mr||qr,h="function"==typeof e?e({curStart:this.gr,curEnd:this.vr,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.ai(void 0!==h.start?h.start:this.gr,void 0!==h.end?h.end:this.vr,void 0!==t?t:void 0!==h.animate?h.animate:this.zh,void 0!==i?i:void 0===h.stopAxisAfter||h.stopAxisAfter,this.mr?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){var i,s;return(null===(i=this.Er)||void 0===i?void 0:i.dispose)&&this.Er.dispose({axis:this}),this.Er=jr(t),this.Xh||(this.Mr=void 0),(null===(s=this.Er)||void 0===s?void 0:s.init)&&this.Er.init({axis:this}),this.chart.gi.Ps(),this}getScrollStrategy(){return this.Er}setAnimationScroll(t){return this.Rh=Boolean(t),this.chart.gi.Ps(),this}setAnimationZoom(t,i=300){return this.Br&&(this.Br.finishAll(!1),this.Br=void 0),this.Oh=t?Rt((()=>this.chart.gi.Ps()))(i,t):void 0,this}setAnimationsEnabled(t){return this.zh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Dt.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.zh}setVisible(t){const i=this.ci!==t;return this.ci=t,this.qh.setVisible(t),this.Rr((i=>{i.Or.setVisible(t)})),i&&this.P.D("visiblechange",{isVisible:this.ci}),this}getVisible(){return this.ci}zr(t){return!1}Vr(t){this.Qh&&this.Qh(),this.title.setPointerEvents(this.title.Bi.length>0);const i=this.Nr(),s=i.min,e=i.max;if(!this.zr(t)||!this.Gr||this.Jh){const i=new Map,h=new Map,r=Jr(this.Bh,s,e,this.gr,this.vr,t.physicalAxisSize,Math.min(this.gr,this.vr),Math.max(this.gr,this.vr));this.$r();const n=th(3,20,oi((t.physicalAxisSize-30)/270,0,1)),o={...t,...this.Ur(t)},a=this.Yr(this.Bh,Math.min(s,this.gr,this.vr),Math.max(e,this.gr,this.vr),r,i,o,h,n),l=this.jr(this.Bh,Math.min(s,this.gr,this.vr),Math.max(e,this.gr,this.vr),r,i,o,a,h,n),u=new Map([...a,...l]),c=this.Bh.Hr,d=void 0!==this.Bh.Ch.find((t=>Er(t)&&!Me(t.Ph.labelFillStyle)));if(c&&d&&Array.from(u).reduce(((t,i)=>t+(i[1].labelText.length>0&&!Me(i[0].Or.br())?1:0)),0)<=1){this.$r(),u.clear();const i=[Math.min(this.gr,this.vr),Math.max(this.gr,this.vr)],s={start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()};i.forEach((i=>{const e=this.Wr(i,c,c.Mh(i,s),t,o),h=this.Xr(e.keyValue,c,o,e,e.labelText);u.set(h,e)}))}return this.Zr(),this.Gr={...o,...this.Jr(t,u,!0),min:s,max:e},this.Gr}let h=!1;return this.Eh.forEach((t=>{t.forEach(((i,r)=>{(r<s||r>e)&&(i.dispose(),t.delete(r),h=!0)}))})),{...this.Gr,updatedTicks:h}}Qr(t,i,s){const e=i.Ph;s.length>0?t.Or.Ke(e.getLabelFillStyle()).kr(e.getLabelFont()).qr(s).setVisible(this.getVisible()).Kr(e.getLabelShadow()):t.Or.setVisible(!1)}Xr(t,i,s,e,h){const r=this.Eh.get(i)||new Map;this.Eh.set(i,r);let n=r.get(t);return n||(n=this.tn(t,i,s,e),r.set(t,n)),this.Qr(n,i,h),n.sn=!1,n}Yr(t,i,s,e,h,r,n,o){const a=new Map,l=this.ir(),u=[];for(const c of t.kh){const t=e.get(c).filter((t=>t>=i&&t<=s)),d=t.map((t=>this.Wr(t,c,c.Mh(t,{start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()}),r,r)));for(let i=0;i<t.length;i+=1){const s=t[i],e=d[i],f=this.Xr(s,c,r,e,e.labelText),A=Hr(f.S,f.Or.en(),e.labelPosition,e.labelAlignment,e.labelRotation,{x:0,y:0},c,l,h,o,this.chart.gi.er);u.find(((t,i)=>{const s=d[i];return Ms(A,Hr(t.S,t.Or.en(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},c,l,h,o,this.chart.gi.er))}))&&f.Or.setVisible(!1),f.sn=!1,n.set(f,e),u.push(f),a.set(f,e)}}return a}jr(t,i,s,e,h,r,n,o,a){var l;const u={start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()},c=new Map,d=Array.from(n.values());let f,A=[];for(const g of t.Ch){const v=g===t.Ch[t.Ch.length-1],y=e.get(g);if(!y)break;let p;if(void 0===f)p=[{start:i,end:s,keyValues:y}];else{p=[];for(let t=0;t<f.length-1;t+=1){const e=f[t],h=f[t+1],r={start:e,end:h,keyValues:[]};for(const t of y)t>=e&&t<h&&r.keyValues.push(t);r.end<i||r.start>s||p.push(r)}}if(f=y,Rr(g))continue;let m,S=0,b=!1,x=-1,M=!0,w=[];for(let t=0;t<p.length;t+=1){const i=p[t].keyValues.map((t=>this.Wr(t,g,g.Mh(t,u),r,r)));w=w.concat(i)}if(g.Ph.getLabelFillStyle()!==xe)for(m=[];++x<p.length;){const t=p[x],e=t.start,r=t.end;let o=t.keyValues;if(S>0){if(void 0===g.hr){M=!1;break}if(o=(0,g.hr.hn)(t.keyValues,S-1,e,r,i,s),void 0===o)break}const l=ts(o.map((t=>w.find((i=>i.keyValue===t)))));if(b)m=m.concat(l);else{const t=this.tr(l,g,S,e,r,i,s,h,d,A,a);if(!0===t){S+=1,x=-1,m=[];continue}m=m.concat(t)}t!==p[p.length-1]||n.size+m.reduce(((t,e)=>t+(Fs(e.keyValue,i,s)?1:0)),0)>=2||v||b||(b=!0,S-=1,x=-1,m=[])}else m=w;const _=m.reduce(((t,e)=>t+(Fs(e.keyValue,i,s)?1:0)),0);void 0!==g.rn&&_<g.rn&&(m.length=0);const k=[];for(const t of w){if(t.keyValue<i||t.keyValue>s)continue;const e=m.includes(t);if(!e&&"hide-tick"===(null===(l=g.hr)||void 0===l?void 0:l.nn))continue;t.labelText=e?t.labelText:"";const h=this.Xr(t.keyValue,g,r,t,t.labelText);o.set(h,t),k.push(t),c.set(h,t)}if(A=k,!M)break}return c}Rr(t){for(const i of this.Eh.values())for(const s of i.values())t(s)}an(t,i){for(const s of this.Eh.values())for(const e of s.values())i=t(i,e);return i}Ir(){this.Eh.forEach(((t,i)=>{t.forEach((t=>{t.dispose()}))})),this.Eh.clear()}$r(){for(const t of this.Eh.values())for(const i of t.values())i.sn=!0}Zr(){for(const t of this.Eh.values()){const i=Array.from(t.entries());for(let s=0;s<i.length;s+=1){const[e,h]=i[s];h.sn&&(h.dispose(),t.delete(e))}}}Nr(){const t=this.oi.getInnerStart()<this.oi.getInnerEnd()?this.oi.getInnerStart():this.oi.getInnerEnd(),i=this.oi.getInnerEnd()>this.oi.getInnerStart()?this.oi.getInnerEnd():this.oi.getInnerStart();return u(t,i)}sr(t,i,s){return 0!==i.length&&(!Dr(s)||!0===s.ln)}un(t,i){return"Empty"===this.Dh||(this.Bh.kh.forEach((s=>{i=t(i,s.Ph)})),this.Bh.Ch.forEach((s=>{Er(s)&&(i=t(i,s.Ph))}))),i}getSeriesDataRange(){const t=this.wr();if(t&&!0!==t.emptyBounds)return t}Sh(t){const i=void 0!==t.forStart?t.forStart:this.gr,s=void 0!==t.forEnd?t.forEnd:this.vr,e=this.wr();if(e)return Kr(this.Mr,e,{start:s>i?e.min:e.max,end:s>i?e.max:e.min},{start:i,end:s},!0)}wr(){const t=!this.Er||this.Er.considerVisibleRangeOnly;let i=this.lr.cn(t);const s=this.lr.dn(t);let e;if(void 0!==i&&si(i)&&void 0!==s&&si(s)&&("logarithmic"===this.cr.type&&(0===i&&(i=Math.min(1,s)),Math.sign(i)!==Math.sign(s)&&(i=Math.min(1,s-.1))),e?(e.min=Math.min(e.min,i),e.max=Math.max(e.max,s)):e=u(i,s)),e&&si(e.min)&&si(e.max))return ni(e.min,e.max)?{min:e.min-1,max:e.max+1,emptyBounds:!0}:e}fn(){if(!1===this.nr)return{start:0,end:0};if("object"==typeof this.nr)return this.nr;let t=0;const i=this.lr.An();return i&&(t=Math.max(t,i)),{start:t,end:t}}setScrollMargins(t){return this.nr=void 0!==t&&("number"==typeof t?{start:t,end:t}:t),this.chart.gi.Ps(),this}getScrollMargins(){return this.nr}setAutoRegionsEnabled(t){return this.setScrollMargins(t),this}gn(){const t=this.Gh;let i=!1;if(this.Hh&&this.mr){const t=this.wr();if(t){const i="function"==typeof this.mr?this.mr({curStart:this.gr,curEnd:this.vr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.mr;if("object"==typeof this.mr&&!this.Xh){const s=Kr(this.Mr,t,{start:void 0!==i.start?i.start:this.gr,end:void 0!==i.end?i.end:this.vr},this.getInterval(),!0);s.start===i.start&&s.end===i.end||(this.Zh=!0,this.Mr=void 0)}this.ai(void 0!==i.start?i.start:this.gr,void 0!==i.end?i.end:this.vr,void 0!==i.animate&&i.animate,void 0===i.stopAxisAfter||i.stopAxisAfter,"setDefaultInterval"),this.Hh=!1,this.Sr=void 0}}if(this.Er&&!this.Vh){let t=this.wr();(null==t?void 0:t.emptyBounds)&&this.Er.id===Fr&&(t=void 0);const s=this.gr,e=this.vr,h=this.Er.apply({axis:this,curStart:s,curEnd:e,seriesDataRange:t});if(h){const r=Kr(this.Mr,t,{start:h.start,end:h.end},{start:s,end:e},h.allowIntervalLengthChange);let n=r.start,o=r.end;const a=!1===ni(s,n)||h.keepScrolling,l=!1===ni(e,o)||h.keepScrolling;if(n=a?n:s,o=l?o:e,a||l){let t=!1;if(this.Rh&&!this.ar&&!1!==h.allowAnimation)if(this.Rh){t=!0;const r=a?this.vn(s,n):s,u=l?this.vn(e,o):e;if(!0===this.Dr(r,u,{allowIntervalLengthChange:h.allowIntervalLengthChange,skipIntervalRestriction:!1})&&(a&&!1===ni(r,n)||l&&!1===ni(u,o))||!0===h.keepScrolling){this.chart.gi.Ps(!0),i=!0;let t=Math.abs(o-n)/Math.abs(r-u);t<1&&(t=1/t),this.$h=t>=1.4}}else t=!1;t||(this.Dr(n,o,{allowIntervalLengthChange:h.allowIntervalLengthChange,skipIntervalRestriction:!1}),!0===h.keepScrolling&&this.chart.gi.Ps(!0)),this.ar=!1}}}return i?(this.Gh!==i&&(this.Gh=i,this.Uh=ti.performance.now()),this.yn&&(clearTimeout(this.yn),this.yn=void 0)):!0===t&&void 0===this.yn&&(this.$h=!1,this.yn=setTimeout((()=>{!1!==this.Gh&&(this.Gh=!1,this.Uh=ti.performance.now()),this.yn=void 0,this.chart.gi.Ps()}),200)),this}pn(){const t=this.getInterval(),i=this.wr();return"function"==typeof this.Mr?this.Mr({curStart:t.start,curEnd:t.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):this.Mr}Dr(t,i,s){let e={start:t,end:i};const{allowIntervalLengthChange:h,skipIntervalRestriction:r}=s;let n=!0;if(this.Mr&&!r){const t=this.wr();e=Kr(this.Mr,t,e,{start:this.gr,end:this.vr},h)}const o=Math.abs(i-t),a=Math.abs(this.vr-this.gr);if(void 0!==this.Bh.Fh&&this.Bh.Fh>o){const s=(i+t)/2,r=(h?this.Bh.Fh/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}if(void 0!==this.Bh.Ih&&this.Bh.Ih<o){const s=(i+t)/2,r=(h?this.Bh.Ih/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}let l=this.oi.st(e.start,e.end,this.gr,this.vr,h);if(!1===l)return!1;!0!==l&&(e=l);const u=this.fn(),c=this.mn(e.start,e.end,u);return l=this.oi.st(c.start,c.end,this.gr,this.vr,!1),!!l&&(!0===l?this.oi.H(c.start,c.end):this.oi.H(e.start,e.end),this.gr=e.start,this.vr=e.end,this.P.D("intervalchange",{start:e.start,end:e.end}),this.Yh=ti.performance.now(),this.chart.gi.Ps(),n)}Sn(){return this.Gh}bn(){return void 0!==this.Br}pr(){var t;const i=!1!==(null===(t=this.us)||void 0===t?void 0:t.displayOnAxis);this.qh.qr(this.yr&&i&&this.Wh?`${this.Wh} (${this.yr})`:this.Wh),this.chart.gi.Ps()}}class Zr{constructor(t,i,s,e,h=s.wn(e).Mn(as).xn(as).setPointerEvents(!1)){this.sn=!1,this.ui=!1,this.As=[],this._n=t,this.S=i,this.kn=s,this.Cn=e,this.Or=h,this.As.push(h)}Ts(t){this.As.forEach((i=>i.setVisible(t)))}dispose(){return this.ui||(this.ui=!0,this.As.forEach((t=>t.dispose()))),this}}const Jr=(t,i,s,e,h,r,n,o,a=!1)=>{const l=new Map;for(const a of t.kh){let t=a.Tn(i,s,e,h,r,n,o);t=Qr(t),l.set(a,t)}let u;for(const e of t.Ch){let h;if(void 0===u)h=e.Tn(i,s,i,s,r);else{if(a&&e===t.Ch[t.Ch.length-1])break;let n=[];const o=u.filter((t=>i<=t&&t<=s)).length;if(o>0){const t=r/(o-1);if(void 0!==e.Fn&&e.Fn>t)break}for(let t=0;t<u.length-1;t+=1){const h=e.Tn(u[t],u[t+1],i,s,r);n=n.concat(h)}h=n}h=Qr(h),l.set(e,h),u=h}return l},Qr=t=>Array.from(new Set(t)),Kr=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||ni(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||ni(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||ni(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||ni(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),Math.sign(n.end-n.start)!==Math.sign(s.end-s.start)?{end:n.start,start:n.end}:n},qr=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},tn=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==Xt.notDraggable?i===Xt.draggable?gr.Move:i===Xt.onlyHorizontal?gr.Horizontal:gr.Vertical:void 0};class sn{constructor(){this.ci=!0}set draggable(t){this.P.draggable=t}get draggable(){return this.P.draggable}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}setVisible(t){const i=this.ci!==t;return this.ci=t,i&&this.P.D("visiblechange",{isVisible:this.ci}),this}getVisible(){return this.ci}}class en extends sn{constructor(t,i,s,e,h){super(),this.P=new Pt,this.In=r(50,50),this.origin=r(0,0),this.size=r(0,0),this.ui=!1,this.Ln=void 0,this.Pn=void 0,this.Bn=tn,this.Dn=void 0,this.nt=f(0,0,0,0),this.Hs=t,this.renderingScale=i,this.scale=s,this.yi=e,this.bi=h,this.Hs.Ps(),this.bi=h,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.Bn?this.Bn(this):this.Bn;t&&(this.Pn=this.Hs.gi.En(t))})),this.addEventListener("pointerleave",(()=>{this.Hs.gi.Rn(this.Pn)}));const n=t=>{const i=this.getDraggingMode();if(i===Xt.notDraggable)return;ki(t);let s=t;const e=t=>{const e={x:t.clientX-s.clientX,y:t.clientY-s.clientY};s=t;const h=this.scale.Jt(this.getPosition(),{x:i!==Xt.onlyVertical?e.x:0,y:i!==Xt.onlyHorizontal?-e.y:0}),r=this.scale,n=this.getSize(),o=this.getOrigin(),a=r.Jt({x:r.x.getInnerStart(),y:r.y.getInnerStart()},Zs({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.Jt({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},Zs({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};this.setPosition(u)},h=t=>{this.Hs.gi.On.removeEventListener("pointermove",e),this.Hs.gi.On.removeEventListener("pointerup",h),this.addEventListener("pointerdown",n)};this.removeEventListener("pointerdown",n),this.Hs.gi.On.addEventListener("pointermove",e),this.Hs.gi.On.addEventListener("pointerup",h)};this.addEventListener("pointerdown",n)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}setEffect(t){return this.vs=this.vs||this.Hs.gi.vs.ys(this,{zn:{shapes:this.Vn()}}),this.vs.zn.Ls(t),this}getEffect(){return!!this.vs&&this.vs.zn.Bs()}setAutoDispose(t){return this.Dn=t,this.Hs.Ps(),this}getAutoDispose(){return this.Dn}getSize(t=Ht.Everything){return t===Ht.Everything?r(this.size.x+(this.nt.left+this.nt.right),this.size.y+(this.nt.bottom+this.nt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.nt="object"==typeof t?g(this.nt,t):{left:t,top:t,right:t,bottom:t},this.Hs.Ps(),this}getMargin(){return this.nt}th(){if(this.Dn){const t=this.size,i=this.renderingScale._t(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Dn.type&&s.x>=this.Dn.maxWidth||"max-height"===this.Dn.type&&s.y>=this.Dn.maxHeight)&&this.dispose()}return this}Vr(){return this}dispose(){return this.ui||(this.Hs.Ps(),this.ui=!0,this.yi(this),this.P.D("dispose",{}),this.Vn().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Vn().forEach((i=>i.setVisible(t))),this.Hs.Ps(),this}isDisposed(){return this.ui}setPosition(t){return this.In=t,this.Hs.Ps(),this}getPosition(t=this.origin,i=Ht.Everything){const s=this.getSize(Ht.Everything),e=this.scale.Jt(this.In,Zs({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Ht.Everything)return this.scale.Jt(e,Zs({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.Jt(e,{x:this.nt.left,y:this.nt.bottom}),r=this.getSize(Ht.Content);return this.scale.Jt(h,Zs({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Hs.Ps(),this}getOrigin(){return this.origin}setDraggingMode(t=Xt.notDraggable){return this.Ln=t,this.Hs.Ps(),this}getDraggingMode(){return void 0!==this.Ln?this.Ln:Xt.notDraggable}setMouseStyle(t){return this.Bn=t,this}getMouseStyle(){return this.Bn}}class hn extends en{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Nn=f(),this.Gn=0,this.$n=e,this.backgroundElement=new this.$n(this.Hs,this.renderingScale,this.scale,ri,r),this.P.Ni(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}Vn(){return this.backgroundElement.Vn()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}th(){return super.th(),this.ui||(void 0!==this.Un&&(this.backgroundElement.Un=this.Un-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Ht.PaddedBackground)).th()),this}Vr(){const t=this.getSize(Ht.PaddedContent);return this.backgroundElement.Yn(t).Vr(),super.Vr()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Nn="object"==typeof t?g(this.Nn,t):{left:t,top:t,right:t,bottom:t},this.Hs.Ps(),this}getPadding(){return this.Nn}getSize(t=Ht.Everything){let i=super.getSize(t);return t>=Ht.PaddedContent&&(i=r(i.x+this.Nn.left+this.Nn.right,i.y+this.Nn.bottom+this.Nn.top)),t>=Ht.PaddedBackground&&(i=r(i.x+this.backgroundElement.jn()+this.backgroundElement.Hn(),i.y+this.backgroundElement.Wn()+this.backgroundElement.Xn())),i}getPosition(t=this.origin,i=Ht.Everything){if(i===Ht.Everything)return super.getPosition(t,i);const s=super.getPosition(r(-1,-1),Ht.Everything),e=this.getMargin(),h=this.scale.Jt(s,{x:e.left,y:e.bottom});if(i===Ht.PaddedBackground){const i=this.getSize(Ht.PaddedBackground);return this.scale.Jt(h,Zs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const n=this.scale.Jt(h,{x:this.backgroundElement.jn(),y:this.backgroundElement.Wn()});if(i===Ht.PaddedContent){const i=this.getSize(Ht.PaddedContent);return this.scale.Jt(n,Zs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.Jt(n,{x:o.left,y:o.bottom}),l=this.getSize(Ht.Content);return this.scale.Jt(a,Zs({x:(t.x+1)/2,y:(t.y+1)/2},l))}getHighlight(){return this.Gn}setHighlight(t){return this.Gn=is(t),this.backgroundElement.setHighlight(t),this.P.D("highlightchange",{highlight:this.Gn}),this}}const rn=t=>"setBackground"in t,nn=t=>{const i=t.getPosition({x:-1,y:-1},Ht.PaddedBackground),s=t.getSize(Ht.PaddedBackground),e=t.scale.Jt(i,s),h=tt(i,t.scale,t.Hs.gi.oi),r=tt(e,t.scale,t.Hs.gi.oi),n=t.Hs.gi.Zn(h.x,h.y),o=t.Hs.gi.Zn(r.x,r.y);return{p1:{clientX:n.x,clientY:n.y},p2:{clientX:o.x,clientY:o.y}}};class on extends sn{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.Jn=1,this.Qn=!0,this.Kn=new P,this.qn=!0,this.ui=!1,this.P=new Pt,this.axisScale=e,this.renderingScale=h,this.io=n,this.so=o,this.eo=a,this.yi=l,this.ho=i,this.ro=s,this.no=this.ho.Ah(this.renderingScale),this.P.Oi(this.no),this.bi=u,this.oo=this.eo.setDirection(this.so).ao(this.ro,this.renderingScale,r,ri,this.bi,!1).setOrigin(wi(this.so)),this.P.Ni(this.oo),this.axis=t,this.setPointerEvents(!1),"major"===this.oo.lo?this.no.fh(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.oo.lo?this.no.fh(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.oo.lo&&this.no.fh(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.ro.Ps(),this.P.D("valuechange",{value:this.S}),this}getValue(){return this.S}setTextFormatter(t){return this.uo=t,this.ro.Ps(),this}setTickLength(t){return this.oo.setPointerLength(t),this.ho.Ps(),this}getTickLength(){return this.oo.getPointerLength()}setTickLabelAlignment(t,i){return this.oo.setTickLabelAlignment(t,i),this.ho.Ps(),this}getTickLabelAlignment(){return this.oo.getTickLabelAlignment()}setTickLabelPadding(t){return this.oo.setTickLabelPadding(t),this.ho.Ps(),this}setTickLabelRotation(t){return this.oo.setTextRotation(t),this.ho.Ps(),this}getTickLabelRotation(){return this.oo.getTextRotation()}getTickLabelPadding(){return this.oo.getTickLabelPadding()}setGridStrokeLength(t){return this.Jn=t,this.ho.Ps(),this}getGridStrokeLength(){return this.Jn}setGridStrokeStyle(t){return this.no.fh(t),this.ho.Ps(),this}getGridStrokeStyle(){return this.no.co()}dispose(){return this.ui||(this.ui=!0,this.no.dispose(),this.oo.dispose(),this.yi(this),this.ho.gi.Ps(),this.P.D("dispose",{})),this}setMarkerVisible(t){return this.Qn=t,this.ro.Ps(),this}getMarkerVisible(){return this.Qn}setMarker(t){return t(this.oo),this.ro.Ps(),this}getMarker(){return this.oo}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}setAllocatesAxisSpace(t){return this.qn=t,this.ro.Ps(),this}getAllocatesAxisSpace(){return this.qn}isInScale(){return Fs(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class an extends on{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.do=!1,this.yi=a,this.ho=i,this.ro=s}dispose(){return this.do=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.do=!1;const t=q(this.S,this.axisScale,this.io.getWidth(this.renderingScale));this.no.setVisible(!0).ph(this.io.toPoint(t,i)).gh(this.io.toPoint(t,i-(e+s*this.Jn))),this.Qn?(this.uo&&this.oo.setText(this.uo(this.S,this)),this.oo.setVisible(!0).setPosition(this.io.toPoint(t,h))):this.oo.setVisible(!1)}else this.no.setVisible(!1),this.oo.setVisible(!1);return this.oo.Vr().th(),this}fo(){this.Qn?(this.uo&&this.oo.setText(this.uo(this.S,this)),this.oo.setVisible(!0)):this.oo.setVisible(!1);const t=this.oo.Vr().getSize();return this.io.getHeight(t)}}const ln={Ao:"X0Z1bGxBY2Nlc3M=",vo:"X0Jhc2VDaGFydHM=",yo:"RGF0YSBHcmlk",po:"X0hhc0hhcmRFeHBpcmF0aW9u",mo:"X0lzVHJpYWw=",So:"X0lzQ29tbXVuaXR5",bo:"T0hMQyBTZXJpZXM=",xo:"QmFyIENoYXJ0",Mo:"c2xpY2VkIGNoYXJ0cw==",wo:"R2F1Z2UgQ2hhcnQ=",_o:"U3BpZGVyIENoYXJ0",ko:"UG9sYXIgQ2hhcnQ=",Co:"M0QgQ2hhcnQ=",To:"Wm9vbSBCYW5kIENoYXJ0",Fo:"TWFwIENoYXJ0",Io:"WFkgQ2hhcnQ=",Lo:"WFkgU2VyaWVz",Po:"SGVhdG1hcCBTZXJpZXM=",Bo:"RmlndXJlIFNlcmllcw==",Do:"bG9nYXJpdGhtaWMgYXhpcw==",Eo:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Ro:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",Oo:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",zo:"VHJlZU1hcCBDaGFydA==",Vo:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",No:"X1B5dGhvbkxpY2Vuc2U=",Go:"X1N0dWRlbnRMaWNlbnNl"},un=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),cn=(t,i,s)=>{s&&rn(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},dn={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},fn={background:void 0,setBackground(t){return{...this,background:t}}},An={ao(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return cn(n,h,r),n}},gn={ao(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return cn(n,h,r),n}};class vn extends en{constructor(){super(...arguments),this.$o=!0}th(){return super.th(),this}setPointerEvents(t){return this.$o=t,this}getPointerEvents(){return this.$o}Vn(){return[]}}class yn extends vn{Yn(t){return this.size=t,this}jn(){return 0}Hn(){return 0}Xn(){return 0}Wn(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return xe}setStrokeStyle(){return this}getStrokeStyle(){return $t}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class pn{constructor(t){this.Uo=new Map,this.gi=t}bs(t,i,s){const e=s.animationEnabled;this.Uo.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=()=>{this.Uo.delete(t),t.removeEventListener("dispose",h)};ti.requestAnimationFrame((()=>{t.addEventListener("dispose",h)}))}Yo(t,i){let s=i.animationEnabled;const e=[],h=()=>{e.forEach((t=>{this.Uo.delete(t)})),t.removeEventListener("dispose",h)};return ti.requestAnimationFrame((()=>{t.addEventListener("dispose",h)})),{jo:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Uo.set(t,h)},Ho:()=>{e.forEach((t=>{this.Uo.delete(t)})),e.length=0},Wo:t=>{s=t,e.forEach((t=>{this.Vs(t,s)}))},Xo:()=>s}}zs(t,i){const s=this.Uo.get(t);s&&(s.curUnanimatedHighlightValue=is(i),this.gi.Ps())}ks(t,i=!1){const s=this.Uo.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}Vs(t,i){const s=this.Uo.get(t);s&&(s.animationEnabled=i)}Ns(t){const i=this.Uo.get(t);return!!i&&i.animationEnabled}Vr(t){let i=!1;this.Uo.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.gi.Ps(!0)}}const mn=new Map,Sn=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=mn.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),mn.set(a,l)),l},bn=t=>({container:t.On,setMouseStyle:(i,s)=>t.En(i,s),restoreMouseStyle:i=>t.Rn(i),clearMouseStyle:()=>t.Zo(),captureFrame:(i,s,e,h)=>t.Jo(i,s,e,h),renderFrame:(i,s,e=!1)=>t.Qo(i,s,e),layout:()=>{t.Ko(),t.qo(),t.ia.ta(),t.Ps()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.sa(i,s),addEventListener:(i,s,e)=>t.R(i,s,e),removeEventListener:(i,s)=>t.V(i,s)}),xn=[];let Mn;const wn=()=>{if(void 0!==Mn){const t=ti.getComputedStyle(ti.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Mn.style.height=ti.innerHeight-i+"px",(()=>{for(let t=0;t<xn.length;t+=1)xn[t]()})()}},_n=new ke({color:m(255,255,255)}),kn={font:Sn(D,0),fillStyle:_n,lineStyle:new wh({fillStyle:_n,thickness:1}),pointStyle3D:new xh.Triangulated};class Cn{constructor(t,i,s){this.oi=K.d2({scaleXYConstructor:J}),this.ea=new Map,this.ha=Rt((()=>this.Ps()),60),this.ra=r(0,0),this.na=!1,this.oa=ri,this.aa=()=>{},this.la=[],this.ua=-1,this.ca=[],this.ui=!1,this.da=!1,this.fa=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.Aa=new Map,this.ga=(t,i)=>{var s,e,h;const r=i instanceof PointerEvent&&i,n=Bt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:{clientX:i.clientX,clientY:i.clientY};if(r){if(!r.pointerType)return;this.va=i}const o=this.Is({x:n.clientX,y:n.clientY});if(("pointermove"===t||"pointerenter"===t)&&o&&r){const t=this.Aa.get(r.pointerId);let e=t;e||(e={lastEvent:r,entity:o.entity,collectionMember:o.collectionMember,info:o.info},this.Aa.set(r.pointerId,e));const h=void 0===t||t.entity!==o.entity||t.collectionMember!==o.collectionMember;h&&t&&t.entity.D("pointerleave",i,t.collectionMember,t.info),h&&o&&o.entity.D("pointerenter",i,o.collectionMember,o.info),o&&(o.entity.D("pointermove",i,o.collectionMember,o.info),this.On.draggable=null!==(s=o.entity.di)&&void 0!==s&&s),e.lastEvent=r,e.entity=o.entity,e.collectionMember=o.collectionMember,e.info=o.info}else if("pointerleave"===t&&r){const t=this.Aa.get(r.pointerId);t&&(t.entity.D("pointerleave",i,t.collectionMember,t.info),this.Aa.delete(r.pointerId))}else if("click"===t&&r){const t=(null===(e=this.ya)||void 0===e?void 0:e.event)instanceof PointerEvent&&this.ya.event.pointerId===r.pointerId&&this.ya;t&&t.entity.D("click",r,t.collectionMember,t.info)}else if("dblclick"===t&&i instanceof MouseEvent){const t="click"===(null===(h=this.ya)||void 0===h?void 0:h.event.type)&&this.ya;t&&t.entity.D("dblclick",i,t.collectionMember,t.info)}else{const s=i instanceof PointerEvent?this.Aa.get(i.pointerId):o;null==s||s.entity.D(t,i,s.collectionMember,s.info)}i&&o&&!["touchend"].includes(t)&&(this.ya={...o,event:i})},this.qo=()=>{const{bottom:t,left:i}=this.On.getBoundingClientRect(),s=r(Math.floor(i),Math.floor(t));return s.x===this.ra.x&&s.y===this.ra.y||this.P.D("locationchange",{}),this.ra=s,this.pa=ti.performance.now(),this},this.Ko=()=>{this.ma&&this.ma()},this.En=(t,i)=>{if(void 0!==i){const s=this.ca.find((t=>t[0]===i));return s&&(s[1]=t,this.ca.indexOf(s)===this.ca.length-1&&(this.On.style.cursor=t)),i}const s=this.ua;return this.ua+=1,this.ca.push([s,t]),this.On.style.cursor=t,s},this.Rn=t=>{var i;const s=this.ca.find((i=>i[0]===t));if(s){const t=this.ca.indexOf(s),e=t===this.ca.length-1;if(this.ca.splice(t,1),e){const t=(null===(i=this.ca[this.ca.length-1])||void 0===i?void 0:i[1])||"default";this.On.style.cursor=t}}},this.Sa=t=>(this.ba._(t),this),this.xa=()=>this.ba.C(),this.Ma=()=>{this.oa&&this.oa(1e3/60),this.wa(),this._a(),this.aa&&this.aa()},this.ka=t=>(this.ea.set(t.Ca(),t),this.ea=new Map([...this.ea.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Ta=t=>(this.ea.delete(t),this),this.Y=()=>(this.ba.o=!1,this),this.j=()=>(this.ba.o=!0,this),this.Fa=()=>this.va,this.P=new Pt,this.ia=t,this.bi=i.theme,this.Ia=s.Ia,this.La=s.Pa,this.Ba={pe:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,Da:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,Ea:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),Ra:void 0===(null==i?void 0:i.interactable)||i.interactable,Oa:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const e=i?i.container:void 0;if(e){if("string"==typeof e){const t=ti.document.getElementById(e);if(!t)throw new Error(`Container "${e}" doesn't exist.`);this.On=t}else this.On=e;ti.addEventListener("resize",this.Ko),this.la.push((()=>{ti.removeEventListener("resize",this.Ko)}))}else{if(void 0===Mn){const t=ti.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",ti.document.body.appendChild(t),Mn=t,ti.addEventListener("resize",wn)}let t=1;for(;null!==ti.document.getElementById(`chart-${t}`);)t+=1;this.On=ti.document.createElement("div"),this.On.id=`chart-${t}`,this.On.style.flex="1",this.On.style.height="100%",Mn.appendChild(this.On),wn(),xn.push(this.Ko),this.la.push((()=>{Mn&&Mn.removeChild(this.On),xn.includes(this.Ko)&&xn.splice(xn.indexOf(this.Ko),1),0===xn.length&&Mn&&(ti.document.body.removeChild(Mn),Mn=void 0,ti.removeEventListener("resize",wn))}))}if(ti.ResizeObserver){const t=t=>{for(const i of t)i.target===this.On&&this.Ko()};this.za=new ti.ResizeObserver(t.bind(this)),this.za.observe(this.On)}this.On.style.position="relative",this.On.style.boxSizing="content-box",!1!==this.Ba.Ra&&(this.On.style.touchAction="none"),this.On.style.overflow="hidden",this.On.addEventListener("fullscreenchange",this.Ko),this.On.addEventListener("webkitfullscreenchange",this.Ko),this.On.addEventListener("dragstart",this.fa);const h=i?i.maxFps:void 0;this.Va=h?-1===h?-1:0!==h?1e3/h:0:0,Object.keys(Lt).forEach((t=>{const i=i=>{this.ga(t,i)};this.On.addEventListener(t,i),this.la.push((()=>{this.On.removeEventListener(t,i)}))})),ti.addEventListener("scroll",this.qo,{passive:!0}),this.ba=d(new y({r:0,g:0,b:0,a:0})),this.xs=new pn(this)}Na(t,i,s){this.Ga=t?{entity:t,timestamp:s,pointed:i}:void 0}$a(t,i){const s=Array.from(this.Aa.values()).find((i=>i.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===i.collectionMember)));s&&(s.entity=i.entity,s.collectionMember=i.collectionMember)}ki(t,i=void 0){const s=Array.from(this.Aa.values()).find((s=>s.entity===t&&(void 0===i||i===s.collectionMember)));s&&(t.D("pointerleave",s.lastEvent,s.collectionMember,s.info),this.Aa.delete(s.lastEvent.pointerId))}Ua(){this.da=!0,this.oa=void 0,this.aa=void 0}Zo(){this.ca.length=0,this.On.style.cursor="unset"}Ya(){return this.ja}Ha(){return this.Wa}setBackgroundFillStyle(t){return this.Xa.Ke(t),this.Ps(),this}getBackgroundFillStyle(){return this.Xa.br()}setBackgroundStrokeStyle(t){return this.Xa.Qe(t),this.Ps(),this}getBackgroundStrokeStyle(){return this.Xa.Za()}Ja(t){return this.aa=t,this}Qa(t){return this.oa=t,this}Ka(t){return this.ea.get(t)}qa(){return Array.from(this.ea.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}N(){if(!this.ui){if(this.ui=!0,this.ea)for(const t of this.ea.values())t.N();this.oa=void 0,this.aa=void 0,ti.removeEventListener("scroll",this.qo),this.On.removeEventListener("fullscreenchange",this.Ko),this.On.removeEventListener("webkitfullscreenchange",this.Ko),this.On.removeEventListener("dragstart",this.fa),this.za&&(this.za.disconnect(),this.za=void 0),this.la.forEach((t=>{t()})),this.la.length=0}}rh(t,i){return r(t-this.ra.x,this.ra.y-i)}Zn(t,i){return r(t+this.ra.x,this.ra.y-i)}tl(t){const i=this.rh(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}il(t){const i=this.Zn(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}sl(t,i,s,e){const h=tt(t,s,this.oi),r=tt(i,s,this.oi),n=this.il({engineX:h.x,engineY:h.y}),o=this.il({engineX:r.x,engineY:r.y});return{p1:{clientX:Math.min(n.clientX,o.clientX)-e.left,clientY:Math.min(n.clientY,o.clientY)-e.top},p2:{clientX:Math.max(n.clientX,o.clientX)+e.right,clientY:Math.max(n.clientY,o.clientY)+e.bottom}}}R(t,i,s){this.P.addEventListener(t,i,s)}V(t,i){this.P.removeEventListener(t,i)}}class Tn extends Ft{constructor(t,i,s,e){super(t,s,e),this.Un=0,this.Hs=i,this.Hs.el=!0}hl(){}rl(t){return this.Un===t||(this.Un=t,this.Hs.el=!0),this}nl(){return this.Un}}class Fn extends Tn{constructor(t,i,s,e,h){super(t,i,e,h),this.ol=!0,this.oi=s}}const In=(t,i,s)=>{if(s instanceof J){const e=s.ri(),h=Zs(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return u(r(t.min.x-h.x,t.min.y-h.y),r(t.max.x+h.x,t.max.y+h.y))}return u(s.Jt(r(t.min.x,t.min.y),Hs(i,-1)),s.Jt(r(t.max.x,t.max.y),i))},Ln=(t,i)=>"function"==typeof i?i(t):i,Pn=(t,i)=>!t||t!==i,Bn=(t,i)=>t===xe&&i!==xe,Dn=t=>t!==xe;class En extends Fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xe=kn.fillStyle,this.gi=t}Ke(t){return this.Xe=Ln(this.Xe,t),this}br(){return this.Xe}al(){return Pn(this.ll,this.Xe)}ul(){return Bn(this.ll,this.Xe)}cl(){return Dn(this.Xe)}dl(t){this.ll=t}}class Rn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ze=kn.lineStyle,this.gi=t}Qe(t){return this.Ze="function"==typeof t?t(this.Ze):t,this}Za(){return this.Ze}fl(){return!this.Al||this.Al!==this.Ze}vl(t){return!this.Al||this.Al.getThickness()!==t}cl(){return this.Ze!==$t||super.cl()}ul(){return(this.Ze!==$t||this.Xe!==xe)&&this.Al===$t&&this.ll===xe}yl(t){this.Al=t}}class On extends En{constructor(t,i,s,e,h,n=d(kn.font)){super(t,i,s,e,h),this.pl=d(""),this.ml=!1,this.Sl={x:1,y:-1},this.In=d(r(0,0)),this.bl=d(0),this.xl=d(0),this.Ml=d(r(0,0)),this.wl=d(0),this._l=d(D),this.kl=r(0,0),this.nt=d(f(1,1,1,1)),this.Nn=d(A(4,4,4,4)),this.font=d(kn.font),this.Cl=!1,this.font=n}cl(){return Dn(this.Xe)&&this.pl.C().length>0}ul(){return!1===this.Cl&&this.cl()}qr(t){return this.pl._(t),this}en(){return this.pl.C()}kr(t){return B(t)?this._l._(t):this._l._(t(this._l.C())),this}_r(){return this._l.C()}Tl(t){return this._l._(this._l.C().setFamily(t)),this}Fl(){return this._l.C().getFamily()}Il(t){return this._l._(this._l.C().setSize(t)),this}Ll(){return this._l.C().getSize()}Pl(t){return this._l._(this._l.C().setWeight(t)),this}Bl(){return this._l.C().getWeight()}Dl(t){return this._l._(this._l.C().setStyle(t)),this}El(){return this._l.C().getStyle()}Rl(t){return this._l._(this._l.C().setVariant(t)),this}Ol(){return this._l.C().getVariant()}ih(t){return this.In._(t),this}zl(){return this.In.C()}Cr(t){return this.wl._(t),this}Tr(){return this.wl.C()}Kr(t){return this.Vl=t,this}Nl(){return this.Vl}Gl(t,i){return this.Ml._(r(t,i)),this}$l(){return this.Ml.C()}Ul(t){return this.xl._(t),this}Yl(){return this.xl.C()}jl(){return{x:this.xl.C(),y:this.bl.C()}}Hl(t){return this.bl._(t),this}Wl(){return this.bl.C()}Xl(t){return this.xl._(t.x),this.bl._(t.y),this}xn(t){return this.nt._(t),this}Zl(){return this.nt.C()}Mn(t){return this.Nn._(t),this}Jl(){return this.Nn.C()}}class zn extends Rn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.In=d(r(0,0)),this.U=d(r(100,100)),this.wl=d(0),this.kl=d(r(0,0)),this.Ql=!1}Vr(){return this.Kl(),this}ih(t){const i=this.In.C();return t.x===i.x&&t.y===i.y||(this.In._(t),this.Kl()),this}zl(){return this.In.C()}ql(t){const i=this.In.C();return t!==i.x&&(this.In._(r(t,i.y)),this.Kl()),this}tu(t){const i=this.In.C();return t!==i.y&&(this.In._(r(i.x,t)),this.Kl()),this}X(t){const i=this.U.C();return t.x===i.x&&t.y===i.y||(this.U._(r(t.x,t.y)),this.Kl()),this}_t(){return this.U.C()}iu(t){const i=this.U.C();return t!==i.x&&(this.U._(r(t,i.y)),this.Kl()),this}su(t){const i=this.U.C();return t!==i.x&&(this.U._(r(i.x,t)),this.Kl()),this}Cr(t){return this.wl._(t),this}Tr(){return this.wl.C()}eu(t){const i=this.kl.C();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Ql=!1,this.Kl()):(this.Ql=!0,this.kl._(t))),this}Kl(){if(!this.Ql){const t=this.In.C(),i=this.U.C(),s=r(t.x+i.x/2,t.y+i.y/2),e=this.kl.C();s.x===e.x&&s.y===e.y||this.kl._(s)}}}class Vn extends Rn{constructor(){super(...arguments),this.hu=[],this.In=d(r(0,0)),this.ru=Ss,this.nu=!1}ou(t){return t=Oi(t),this.hu=t,this.nu=!0,this}au(){return this.hu}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return 0}uu(){return 0}}class Nn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.cu=new Array,this.du=new Array,this.ru=Ss,this.fu=0,this.Au=!1,this.gu=[Array(),Array()],this.vu=!1,this.yu=(new ke).setColor(m(42,171,240)),this.pu=!1,this.mu=!1,this.Su=!1}bu(t,i){const s=this.fu-1,e=s>0&&!this.vu;let[h,n]=e?[[this.cu[s]],[this.du[s]]]:[[],[]];if(t instanceof Array){const[i,s]=l(t);h=$i(h,i,{canReturnB:!0}),n=$i(n,s,{canReturnB:!0})}else{const i=t.position;h.push(r(i,t.high)),n.push(r(i,t.low))}return this.vu?(this.gu[0]=$i(this.gu[0],h,{canReturnB:!0}),this.gu[1]=$i(this.gu[1],n,{canReturnB:!0})):(this.gu=[h,n],this.vu=!0),this.ru=Os(this.ru,i||Os(Es(h),Es(n))),this}zi(){return this.pu=!0,this.cu.length=0,this.du.length=0,this.fu=0,this.ru=Ss,this}xu(){return[this.cu,this.du]}Mu(){return[this.gu[0],this.gu[1]]}wu(t){return this.yu="function"==typeof t?t(this.yu):t,this}_u(){return this.yu}ku(){return this.fu-(Number(this.mu)+Number(this.Su))}Cu(){return this.gu.length}Tu(t){return this.mu=t,this}Fu(){return this.mu}Iu(t){return this.Su=t,this}Lu(){return this.Su}ul(){return this.ll===xe&&this.Pu===xe&&(this.Xe!==xe||this.yu!==xe)}Bu(t){this.Pu=t}cl(){return this.yu!==xe||super.cl()}al(){return super.al()||!this.Pu||this.Pu!==this.yu}}class Gn extends Rn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.In=d(r(0,0)),this.Du=d(0),this.$t=d(360),this.Eu=d(100),this.Ru=d(100),this.Ou=d(0),this.zu=d(void 0),this.Vu=r(0,0),this.Nu=r(0,0),this.Gu=r(0,0)}$u(){return this.Eu.C()}Uu(){return this.Ru.C()}zl(){return this.In.C()}Yu(){return this.Du.C()}Gt(){return this.$t.C()}ju(){return this.Ou.C()}Hu(){return this.zu.C()}Wu(){return this.Vu}Xu(){return this.Nu}Zu(){return this.Gu}ih(t){return this.In._(t),this}Ju(t){return this.Du._(t),this}gh(t){return this.$t._(t),this}Qu(t){return this.Ru._(t),this.Eu._(t),this}Ku(t){return this.Eu._(t),this}qu(t){return this.Ru._(t),this}tc(t){return this.Ou._(t<0?0:t),this}sc(t){return this.zu._(void 0!==t&&t<=0?void 0:t),this}}var $n;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}($n||($n={}));const Un=(t,i)=>"function"==typeof i?i(t):i,Yn=(t,i)=>!t||t!==i,jn=(t,i)=>!t||t.getThickness()!==i,Hn=(t,i)=>t===$t&&i!==$t,Wn=t=>t!==$t&&t.getFillStyle()!==xe;class Xn extends Fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.hc=kn.lineStyle,this.engine=t,this.rc=s instanceof Q}fh(t){return this.hc=Un(this.hc,t),this.rc&&Fh(this.hc)&&(ti.console.error("LightningChart JS error | DashedLine is not supported together with logarithmic axis"),this.hc=kn.lineStyle),this}co(){return this.hc}fl(){return Yn(this.nc,this.hc)}oc(t){return jn(this.nc,t)}ul(){return Hn(this.nc,this.hc)}cl(){return Wn(this.hc)}ac(t){this.nc=t}}class Zn extends Xn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Yt=r(0,0),this.$t=r(0,0),this.lc=!1}_({min:t,max:i}){return t.x===this.Yt.x&&t.y===this.Yt.y&&i.x===this.$t.x&&i.y===this.$t.y||(this.lc=!0,this.Yt=t,this.$t=i),this}Ut(){return this.Yt}Gt(){return this.$t}ph(t){return t.x===this.Yt.x&&t.y===this.Yt.y||(this.lc=!0,this.Yt=t),this}gh(t){return t.x===this.$t.x&&t.y===this.$t.y||(this.lc=!0,this.$t=t),this}}class Jn extends Xn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.uc=void 0,this.cc=0}}class Qn extends Xn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dc=[],this.ru=Ss,this.gu=new Array,this.fc=0,this.pu=!1,this.Ac=d(void 0),this.mu=!1,this.Su=!1}Mu(){return this.gu}xu(){return this.dc}zi(){return this.pu=!0,this.dc.length=0,this.fc=0,this.gu=[],this.ru=Ss,this}ku(){return this.fc-(Number(this.mu)+Number(this.Su))}Cu(){return this.gu.length}Tu(t){return this.mu=t,this}Fu(){return this.mu}Iu(t){return this.Su=t,this}Lu(){return this.Su}}class Kn extends On{constructor(t,i,s,e,h){super(t,i,s,e,[]),this.gc={uid:h,text:"",font:"",color:"",position:"absolute",left:0,top:0,padding:"",alignmentX:0,alignmentY:0,rotation:0,identifier:We.Other,visible:!0}}vc(){var t;if(!this.getVisible()||0===this.pl.C().length||Me(this.Xe))return this.gc.visible=!1,this.gc;this.gc.visible=!0;const i=Sn(this._l.C(),devicePixelRatio);this.gc.identifier=null!==(t=this.Kh)&&void 0!==t?t:We.Other,this.gc.text=this.pl.C(),this.gc.font=i.font,this.gc.color=Ce(this.Xe)?`rgba(${255*this.Xe.color.r},${255*this.Xe.color.g},${255*this.Xe.color.b},${this.Xe.color.a})`:this.gc.color;const s=this.In.C(),e=tt(s,this.oi,this.gi.oi),h=Math.round(10*e.x)/10,r=Math.round(10*(this.gi._t().y-e.y))/10;this.gc.top=r,this.gc.left=h,this.gc.alignmentX=this.xl.C(),this.gc.alignmentY=this.bl.C(),this.gc.rotation=this.wl.C();const n=this.nt.C(),o=this.Nn.C();return this.gc.padding=`${n.top+o.top}px ${n.right+o.right}px ${n.bottom+o.bottom}px ${n.left+o.left}px`,this.gc}yc(){var t;this.vc();const i=null===(t=this.gi.mc)||void 0===t?void 0:t.Sc.getTextBoundingBox;if(i){const t=i(this.gc);if(t){const i=this.gi.tl({clientX:t.left,clientY:t.top}),s=this.gi.tl({clientX:t.left+t.width,clientY:t.top+t.height}),e=tt({x:i.engineX,y:i.engineY},this.gi.oi,this.oi),h=tt({x:s.engineX,y:s.engineY},this.gi.oi,this.oi);return{min:{x:Math.min(e.x,h.x),y:Math.min(e.y,h.y)},max:{x:Math.max(e.x,h.x),y:Math.max(e.y,h.y)}}}}return Ss}bc(){var t;this.vc();const i=null===(t=this.gi.mc)||void 0===t?void 0:t.Sc.measureText;if(i){const t=i(this.gc);if(t)return t}return this.gi.xc.er.Lh(this.pl.C(),this._l.C(),this.wl.C())}_t(){if(!(this.oi instanceof J))return{x:0,y:0};const t=this.oi.ri(),i=this.bc();return{x:i.x*t.x,y:i.y*t.y}}Vr(){return this}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}lu(){return 0}uu(){return 0}Mc(t,i){return{}}wc(){return this}_c(t,i,s,e,h){return{}}}class qn extends en{constructor(){super(...arguments),this.Gn=0}getHighlight(){return this.Gn}setHighlight(t){return this.Gn=t,this.Vn().forEach((i=>i.Fi(t))),this.P.D("highlightchange",{highlight:t}),this.Hs.Ps(),this}}class to extends qn{}class io extends to{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.kc=this.Hs.Cc(this.renderingScale,$n.Simple).setVisible(!1).Ke(xe).Qe($t),this.P.Oi(this.kc)}Tc(){const t=this.Fc();if(t.length>2){const i=Es(t),s=r(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=Ws(t,Hs(i.min,-1));return this.scale.Jt(this.In,Ws(e,Zs(Hs(Ws(this.origin,r(1,1)),-.5),s)))})).map((t=>tt(t,this.scale,this.renderingScale)));this.kc.ou(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.kc&&this.kc.setVisible(!1),this.setContentSize(r(0,0))}th(){return super.th(),this.ui||(this.Tc(),void 0!==this.Un&&this.kc.rl(this.Un)),this}Vr(){return this.Tc(),super.Vr()}setVisible(t){return super.setVisible(t),this.kc.setVisible(t),this}}const so=t=>!(!t||"object"!=typeof t||!("elementAt"in t)),eo=t=>{if("srcLoopArray"in t){const{srcLoopArray:i,dataRanges:s,NewArray:e}=t;return{length:s.reduce(((t,i)=>t+i.count),0),elementAt:t=>{let e=0;for(const h of s){if(e+h.count-1>=t){const s=h.offset+(t-e);return i[s]}e+=h.count}return Ji(0,(()=>{})),-1},toArray:(t,h)=>{const r=h-t+1;if(1===s.length){const e=s[0],r=e.offset+t,n=e.offset+h;return i.subarray(r,n+1)}{const n=s[0],o=s[1],a=0,l=a+n.count-1,u=l+1,c=u+o.count-1,d=new e(r);let f=0;if(!(h<a||t>l)){const s=Math.max(a,t),e=Math.min(l,h)-s+1,r=n.offset+(t+f-a);d.set(i.subarray(r,r+e),f),f+=e}if(!(h<u||t>c)){const s=Math.max(u,t),e=Math.min(c,h)-s+1,r=o.offset+(t+f-u);d.set(i.subarray(r,r+e),f),f+=e}return d}}}}return{length:t.length,elementAt:i=>t[i],toArray:(i,s)=>Qt(t,i,s+1)}},ho=(t,i)=>Object.keys(t).length===Object.keys(i).length&&!Object.keys(t).find((t=>void 0===i[t]))&&!Object.entries(t).find((([t,s])=>i[t]!==s));class ro{constructor(t){if(this.Ic=0,this.Lc=0,this.Pc=0,this.Bc=!1,this.Dc=!0,this.Ec=!1,this.Rc={warningDisplayed:!1,expandEvents:[]},this.P=new Pt,this.Dc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,this.Oc=!1!==(null==t?void 0:t.allowInputModification),this.zc=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN,this.Vc=void 0!==(null==t?void 0:t.strictMode)&&t.strictMode,this.Da=void 0===(null==t?void 0:t.warnings)||t.warnings,this.Nc=void 0===(null==t?void 0:t.autoDetectPatterns)||t.autoDetectPatterns,null==t?void 0:t.schema){const i={};Object.entries(t.schema).forEach((([t,s])=>{var e;if(!s)return;let h=void 0!==s.pattern?s.pattern:void 0;s.auto&&(h=("object"==typeof s.auto&&null!==(e=s.auto.step)&&void 0!==e?e:1)>0?"progressive":"regressive");const r={dataStorage:s.storage,Gc:{effective:h,userSpecified:h},auto:s.auto,cache:void 0,ensureNoDuplication:void 0!==s.ensureNoDuplication&&s.ensureNoDuplication};if(this.Vc&&void 0===s.pattern)throw new Error(`LightningChart JS error - DataSetXY property ('${t}') data pattern not specified. This is not allowed when strict mode is enabled.`);i[t]=r})),this.$c=i}if(this.Vc&&!this.$c)throw new Error("LightningChart JS error - DataSetXY schema not defined. This is not allowed when strict mode is enabled.")}appendJSON(t,i,s){if(!Array.isArray(t))return this.appendJSON([t]);const e=t.length;if(0===e)return this;const h=Object.keys(t[0]).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===h.length)return this;const r=t[0],n=Object.fromEntries(h.map((t=>{if("number"!=typeof r[t])return[t,[]];const i=this.$c&&this.$c[t];return[t,new((null==i?void 0:i.dataStorage)||Float64Array)(e)]})));for(let i=0;i<e;i+=1){const s=t[i];for(const t of h)n[t][i]=s[t]}return s&&Object.entries(s).forEach((([t,i])=>{n[t]=i})),this.appendSamples(n,i),this}appendSample(t,i){const s=Object.keys(t).filter((t=>(!(null==i?void 0:i.whitelist)||i.whitelist.includes(t))&&(!(null==i?void 0:i.blacklist)||!i.blacklist.includes(t))));if(0===s.length)return this;const e=Object.fromEntries(s.map((i=>{var s,e;return[i,Ao(t[i],this.$c&&null!==(e=null===(s=this.$c[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),h=this.Uc({appendCount:1,keys:s,parsedDataArrs:e,opts:i});if(!h.incomingDataReplacedCache&&this.Dc){let t=this.Yc(e);if(t=t&&t.filter((t=>this.$c&&this.$c[t].Gc&&!("autoDetectResult"in this.$c[t].Gc))),t&&t.length>0)if(this.Ec);else{t.length>1&&this.Da&&ti.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.$c?this.$c[i]:void 0;if(!(t&&t.Gc&&"autoDetectResult"in t.Gc))return this.jc(i,{parsedDataArrs:Object.fromEntries(h.keys.map((t=>[t,"number"==typeof e[t]?new Array(1).fill(e[t]):e[t]]))),offset:0,count:1}),this}ti.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}for(const t of h.keys){const i=h.buckets[t].cache;if(!i)continue;const s=e[t];i[this.Ic]="number"==typeof s?s:s[0]}return this.P.D("change",{type:"change",iDataStart:this.Ic,iDataEnd:this.Ic}),this.Ic+=1,this.Ic>h.maxSampleCount-1&&void 0!==this.Hc&&(this.Ic=0,this.Bc=!0,this.P.D("loop",{type:"loop"})),this.Lc=Math.min(this.Lc+1,h.maxSampleCount),this.Pc+=1,this}appendSamples(t,i){const s=Object.entries(t).filter((([,t])=>void 0!==t)).map((t=>t[0]));if(0===s.length)return this;const e=Object.entries(t).filter((([,t])=>"object"==typeof t&&"length"in t)).map((t=>t[0])),h=e.reduce(((i,s)=>Math.min(i,t[s].length)),Number.MAX_SAFE_INTEGER);e.forEach((i=>{const s=t[i];s.length>h&&(ti.console.warn(`LightningChart JS warning - insymmetric DataSetXY input (${i}). Extra measurements will be dropped`),Array.isArray(s)?this.Oc?s.length=h:t[i]=s.slice(0,h):t[i]=s.subarray(0,h))}));let r=null==i?void 0:i.offset,n=null==i?void 0:i.count;if(r=void 0!==r?r:0,n=void 0!==n?n:h-r,n<=0)return this;const o=Object.fromEntries(s.map((i=>{var s,e;const h=t[i];return this.$c&&this.$c[i]&&void 0!==this.$c[i].dataStorage||this.Vc||!vo(h)?[i,Ao(t[i],this.$c&&null!==(e=null===(s=this.$c[i])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]:[i,h]}))),a=this.Uc({appendCount:n,keys:s,parsedDataArrs:o,opts:i});if(Object.entries(a.buckets).forEach((([t,i])=>{if(0===this.Lc&&i.ensureNoDuplication){const s=o[t],e=i.cache;if(Array.isArray(s)||e!==s)throw new Error(`LightningChart JS error | DataSetXY ensureNoDuplication check failed for '${t}'`)}})),!a.incomingDataReplacedCache&&this.Dc){let t=this.Yc(o);if(t=t&&t.filter((t=>this.$c&&this.$c[t].Gc&&!("autoDetectResult"in this.$c[t].Gc))),t&&t.length>0)if(this.Ec);else{t.length>1&&this.Da&&ti.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const i of t){const t=this.$c?this.$c[i]:void 0;if(!(t&&t.Gc&&"autoDetectResult"in t.Gc))return this.jc(i,{parsedDataArrs:Object.fromEntries(s.map((t=>[t,"number"==typeof o[t]?new Array(n).fill(o[t]):o[t]]))),offset:r,count:n}),this}ti.console.error(`LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ${t.map((t=>`'${t}'`)).join(", ")}`)}}const l=a.maxSampleCount-this.Ic,u=Math.min(n,l);if(u>0){if(!a.incomingDataReplacedCache)for(const t of a.keys){const i=a.buckets[t].cache,s=o[t];lo(i,s,r,u,this.Ic)}this.P.D("change",{type:"change",iDataStart:this.Ic,iDataEnd:this.Ic+u-1}),this.Ic+=u,this.Ic>a.maxSampleCount-1&&(this.Ic=0,this.Bc=!0,this.P.D("loop",{type:"loop"}))}if(this.Lc=Math.min(this.Lc+u,a.maxSampleCount),this.Pc+=u,n-u>0&&!a.incomingDataReplacedCache){const t={};for(const i of a.keys)t[i]=Qt(o[i],r+u,void 0);this.appendSamples(t,i)}else this.Wc();return this}fill(t){return this.$c?(Object.keys(t).forEach((t=>{this.$c&&!this.$c[t]&&this.Da&&ti.console.warn(`LightningChart JS warning - DataSetXY.fill() tried to fill data property that doesn't exist in schema ("${t}")`)})),Object.entries(this.$c).forEach((([i,s])=>{let e=t[i];s.cache&&void 0!==e&&(p(e)&&(e=e.toUint32()),s.cache.fill(e))})),this.P.D("clear",{type:"clear"}),this):this}setSamples(t,i){return this.clear().appendSamples(t,i)}alterSamplesStartingFrom(t,i,s){var e,h,r;const n=Object.values(i).find((t=>"number"!=typeof t));let o=null==s?void 0:s.offset,a=null==s?void 0:s.count;const l=n?n.length:1;if(o=void 0!==o?o:0,a=void 0!==a?a:l-o,a<=0)return this;const u=Object.keys(i),c=Object.fromEntries(u.map((t=>{var s,e;return[t,Ao(i[t],this.$c&&null!==(e=null===(s=this.$c[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),d=this.Pc-1,f=void 0!==this.Hc?Math.max(this.Pc-this.Hc,0):0,A=t+a-1,g=Math.max(t,f),v=Math.min(A,d),y=v-g+1;if(this.Pc>0&&y>0){const i=this.Uc({appendCount:0,keys:u,parsedDataArrs:c,opts:s}),n=null!==(r=null===(h=null===(e=Object.values(i.buckets).find((t=>t.cache)))||void 0===e?void 0:e.cache)||void 0===h?void 0:h.length)&&void 0!==r?r:0;if(void 0!==this.Hc&&this.Bc&&this.Pc%this.Hc!=0){const s=this.Pc-this.Pc%this.Hc,e=this.Pc-1,h=this.Pc-this.Lc,r=s-1,a=Math.max(g,h),l=Math.min(v,r)-a+1;if(l>0){const s=a-t,e=no(a,this.Pc,n,this.Ic);for(const t of i.keys){const h=i.buckets[t].cache,r=c[t];lo(h,r,o+s,l,e)}}const u=Math.max(g,s),d=Math.min(v,e)-u+1;if(d>0){const s=u-t,e=no(u,this.Pc,n,this.Ic);for(const t of i.keys){const h=i.buckets[t].cache,r=c[t];lo(h,r,o+s,d,e)}}}else{const t=g-f;for(const s of i.keys){const e=i.buckets[s].cache,h=c[s];lo(e,h,o,y,t)}}this.P.D("clear",{type:"clear"})}const p=t+a-1-d;if(p>0){const s=v+1-t;this.appendSamples(i,{offset:o+s,count:p})}return this}alterSamplesByIndex(t,i){var s;if(!this.$c)return this;const e=t.length,h=Object.keys(i),r=Object.fromEntries(h.map((t=>{var s,e;return[t,Ao(i[t],this.$c&&null!==(e=null===(s=this.$c[t])||void 0===s?void 0:s.dataStorage)&&void 0!==e?e:Float64Array)]}))),n=this.Pc-1,o=void 0!==this.Hc?Math.max(this.Pc-this.Hc,0):0;if(e<=0)return this;let a=!1;const l=Object.values(this.$c).find((t=>t.cache)).cache.length;for(let i=0;i<e;i+=1){const e=t[i];if(e<o||e>n)continue;const u=no(e,this.Pc,l,this.Ic);for(const t of h){const e=null===(s=this.$c[t])||void 0===s?void 0:s.cache,h=r[t];e&&(e[u]="number"==typeof h?h:h[i],a=!0)}}return a&&this.P.D("clear",{type:"clear"}),this}alterSamplesByMatch(t,i,s){var e;if(!this.$c)return this;const h=i.length,r=this.Lc,n=this.Pc-1,o=Math.max(n-r+1,0),a=Object.keys(s),l=Object.fromEntries(a.map((t=>{var i,e;return[t,Ao(s[t],this.$c&&null!==(e=null===(i=this.$c[t])||void 0===i?void 0:i.dataStorage)&&void 0!==e?e:Float64Array)]})));if(h<=0)return this;let u=!1;const c=this.$c[t].cache,d=this.Xc(t);if(!c)return this;const f=c.length;for(let s=0;s<h;s+=1){const h=i[s];let r;if(d){const t=ao(h,o,n,!0,(t=>c[no(t,this.Pc,f,this.Ic)]));r=no(t,this.Pc,f,this.Ic)}else for(let t=0;t<f;t+=1)if(c[t]===h){r=t;break}if(void 0!==r){if(c[r]===h)for(const t of a){const i=null===(e=this.$c[t])||void 0===e?void 0:e.cache,h=l[t];i&&(i[r]="number"==typeof h?h:h[s],u=!0)}}else this.Da&&ti.console.warn(`LightningChart JS warning - DataSetXY.alterSamplesByMatch no match found for "${t}=${h}"`)}return u&&this.P.D("clear",{type:"clear"}),this}Wc(t=!1){this.$c&&this.Nc&&Object.entries(this.$c).forEach((([i,s])=>{if(!s.cache)return;let e;if(s.Gc&&"userSpecified"in s.Gc)e=s.Gc.userSpecified;else if(s.Gc&&"autoDetectResult"in s.Gc)e=s.Gc.autoDetectResult;else if(s.cache&&this.Pc>0&&!t){const t=void 0!==this.Hc&&this.Bc?this.Ic:0,h=this.Lc-1,r=void 0!==this.Hc&&this.Bc?0:void 0,n=void 0!==this.Hc&&this.Bc?this.Ic-1:void 0,[o,a]=void 0!==r&&void 0!==n&&Math.abs(n-r)>Math.abs(h-t)?[r,n]:[t,h];if(1+a-o>=5){let t,h=s.cache[o];for(let i=o+1;i<=a;i+=1)if(!1!==t){const e=s.cache[i],r=Math.sign(e-h);0!==r&&t&&t.direction!==r?t=!1:0===r||t||(t={direction:r}),h=e}e=t&&t.direction>0?"progressive":t&&t.direction<0?"regressive":null,s.Gc={autoDetectResult:e,effective:e},this.Da&&ti.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (${i}=${e}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nDefine data patterns in schema when creating series or DataSetXY to clear this warning and improve performance.`)}}}))}Uc(t){var i,s,e,h,r,n,o,a,l;if(this.$c||(this.$c=Object.fromEntries(t.keys.map((i=>[i,{dataStorage:go(t.parsedDataArrs[i]),Gc:void 0}])))),0===this.Lc&&this.$c&&!this.Vc){const i=this.$c;t.keys.forEach((s=>{i[s]||(i[s]={dataStorage:go(t.parsedDataArrs[s])})}))}if((this.Lc>0||this.Vc)&&this.$c){const i=this.$c,s=t.keys.filter((t=>!i[t]));if(s.length>0&&t.appendCount>0){if(this.Vc)throw new Error(`LightningChart JS error - Input data includes data properties that are not defined in schema. This is not allowed when strict mode is enabled. Extra data properties: ${s.map((t=>`'${t}'`)).join(", ")}`);this.Da&&ti.console.warn(`LightningChart JS warning - Input data includes data properties that are not defined in schema. This is OK for data sets that don't yet have data pushed in, but this was not the case. Extra data properties were dropped: ${s.map((t=>`'${t}'`)).join(", ")}`)}s.forEach((i=>{delete t.parsedDataArrs[i]})),t.keys=Object.keys(t.parsedDataArrs)}if(Object.entries(this.$c).forEach((([i,s])=>{s.dataStorage||(s.dataStorage=go(t.parsedDataArrs[i]))})),0===this.Lc&&1===Object.keys(this.$c).length&&!this.Vc){const o=(null!==(s=null===(i=t.opts)||void 0===i?void 0:i.step)&&void 0!==s?s:1)>0?"progressive":"regressive";this.$c._auto={dataStorage:Float64Array,auto:{start:null!==(h=null===(e=t.opts)||void 0===e?void 0:e.start)&&void 0!==h?h:0,step:null!==(n=null===(r=t.opts)||void 0===r?void 0:r.step)&&void 0!==n?n:1},Gc:{userSpecified:o,effective:o}}}Object.entries(this.$c).forEach((([i,s])=>{var e,h,r,n,o,a,l,u;if(!s.auto)return;const c=null!==(r=null!==(h=null===(e=t.opts)||void 0===e?void 0:e.step)&&void 0!==h?h:"object"==typeof s.auto?s.auto.step:void 0)&&void 0!==r?r:1;let d;if(0===this.Lc)d=null!==(a=null!==(o=null===(n=t.opts)||void 0===n?void 0:n.start)&&void 0!==o?o:"object"==typeof s.auto?s.auto.start:void 0)&&void 0!==a?a:0;else if(void 0!==(null===(l=t.opts)||void 0===l?void 0:l.start))d=t.opts.start;else{const t=this.Zc();if(!t)return;d=t[i]+c}const f=new(null!==(u=s.dataStorage)&&void 0!==u?u:Float64Array)(t.appendCount);for(let i=0;i<t.appendCount;i+=1)f[i]=d+i*c;t.parsedDataArrs[i]=f})),t.keys=Object.keys(t.parsedDataArrs);const u=Object.keys(this.$c).filter((i=>!t.keys.includes(i)));if(u.length>0&&t.appendCount>0){if(this.Vc)throw new Error(`LightningChart JS error - Input data is missing keys that were defined in schema. This is not allowed when strict mode is enabled. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`);this.Da&&ti.console.warn(`LightningChart JS warning - Input data is missing keys that were defined in schema. They will be filled with \`0\`. Missing keys: ${u.map((t=>`'${t}'`)).join(", ")}`)}for(const i of u)t.parsedDataArrs[i]=new(null!==(o=this.$c[i].dataStorage)&&void 0!==o?o:Float64Array)(t.appendCount).fill(0);if(t.keys=Object.keys(t.parsedDataArrs),0===this.Lc&&0===Object.values(this.$c).reduce(((t,i)=>t+(i.cache?1:0)),0)&&(void 0===this.Hc||this.Hc===t.appendCount)&&this.Oc&&(0===(null===(a=t.opts)||void 0===a?void 0:a.offset)||void 0===(null===(l=t.opts)||void 0===l?void 0:l.offset)))return Object.entries(this.$c).forEach((([i,s])=>{var e,h;s.cache="number"==typeof t.parsedDataArrs[i]?new(null!==(e=s.dataStorage)&&void 0!==e?e:Float64Array)(t.appendCount).fill(t.parsedDataArrs[i]):uo(t.parsedDataArrs[i],null!==(h=s.dataStorage)&&void 0!==h?h:Float64Array)})),this.Wc(),{maxSampleCount:t.appendCount,buckets:this.$c,incomingDataReplacedCache:!0,keys:t.keys};if(void 0===this.Hc){const i=this.Lc+t.appendCount;if(!Object.values(this.$c).find((t=>t.cache)))return Object.values(this.$c).forEach((t=>{var s;t.cache=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i)})),this.Wc(),{maxSampleCount:i,buckets:this.$c,keys:t.keys};const s=Object.values(this.$c)[0].cache.length;if(s<i){if(!this.Rc.warningDisplayed){const s=ti.performance.now();if(this.Rc.expandEvents=this.Rc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.Rc.expandEvents.push({timestamp:s}),this.Rc.expandEvents.length>5)return this.Da&&ti.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Rc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Uc(t)}return Object.values(this.$c).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e})),this.Ic=this.Lc,this.Wc(),{maxSampleCount:i,buckets:this.$c,keys:t.keys}}return s>4*i?(Object.values(this.$c).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache.subarray(0,this.Lc)),t.cache=e})),this.Wc(),{maxSampleCount:i,buckets:this.$c,keys:t.keys}):(this.Wc(),{maxSampleCount:i,buckets:this.$c,keys:t.keys})}t.appendCount+this.Lc>this.Hc&&this.P.D("maxsamplecountexceed",{type:"maxsamplecountexceed",currentSampleCount:this.Lc,currentMaxSampleCount:this.Hc,newTotalSampleCount:this.Lc+t.appendCount});const c=this.Hc;return Object.values(this.$c).forEach((t=>{var i;t.cache=t.cache||new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(c)})),this.Wc(),{maxSampleCount:c,buckets:this.$c,keys:t.keys}}getSampleCount(){return this.Lc}getNextSampleIndex(){return this.Pc}Xc(t){const i=this.$c&&this.$c[t];if(i)return i.Gc&&"userSpecified"in i.Gc?i.Gc.userSpecified:i.Gc&&"autoDetectResult"in i.Gc?i.Gc.autoDetectResult:void 0}Jc(t){if(!this.$c)return;const i=null==t?void 0:t.x,s=null==t?void 0:t.y,e=void 0!==i?this.$c[i]:void 0,h=void 0!==s?this.$c[s]:void 0;if(e&&e.Gc&&"userSpecified"in e.Gc){if("progressive"===e.Gc.userSpecified)return"ProgressiveX";if("regressive"===e.Gc.userSpecified)return"RegressiveX"}if(h&&h.Gc&&"userSpecified"in h.Gc){if("progressive"===h.Gc.userSpecified)return"ProgressiveY";if("regressive"===h.Gc.userSpecified)return"RegressiveY"}if(e&&e.Gc&&"autoDetectResult"in e.Gc&&e.Gc.autoDetectResult){if("progressive"===e.Gc.autoDetectResult)return"ProgressiveX";if("regressive"===e.Gc.autoDetectResult)return"RegressiveX"}if(h&&h.Gc&&"autoDetectResult"in h.Gc&&h.Gc.autoDetectResult){if("progressive"===h.Gc.autoDetectResult)return"ProgressiveY";if("regressive"===h.Gc.autoDetectResult)return"RegressiveY"}}Qc(t){if(!t||!this.$c)return{dataPattern:void 0,Kc:Float64Array,qc:Float64Array};const i={dataPattern:this.Jc(t)};for(const s of Object.keys(t)){const e=s,h=t[e];if(void 0===h)continue;const r=this.$c[h];r&&r.cache&&("x"===e&&(i.td=r.cache,i.Kc=r.dataStorage),"y"===e&&(i.sd=r.cache,i.qc=r.dataStorage),"color"===e&&(i.ed=r.cache),"rotation"===e&&(i.hd=r.cache),"size"===e&&(i.rd=r.cache),"lookupValue"===e&&(i.nd=r.cache))}return i}setMaxSampleCount(t){if("object"==typeof t){this.od&&this.removeEventListener("maxsamplecountexceed",this.od);const i=t.max,s=t.initial;this.od=t=>{if(void 0!==i&&t.currentMaxSampleCount>=i)return;let s=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==i&&(s=Math.min(s,i)),this.setMaxSampleCount(s)},this.addEventListener("maxsamplecountexceed",this.od),void 0===this.Hc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.Lc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Hc&&this.Hc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.$c||!Object.values(this.$c).find((t=>t.cache)))return this.Hc=i,this;if(i===this.Hc)return this;if(this.Bc&&0!==this.Ic&&this.Ic!==this.getSampleCount())throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Hc=i,this.Lc<i?(this.Ic=this.Lc,this.Bc=!1):(this.Ic=0,this.Bc=!0),Object.values(this.$c).forEach((t=>{var s;const e=new(null!==(s=t.dataStorage)&&void 0!==s?s:Float64Array)(i);e.set(t.cache),t.cache=e}))}return this}getMaxSampleCount(){return this.Hc}clear(){return this.Ic=0,this.Lc=0,this.Pc=0,this.Bc=!1,this.P.D("clear",{type:"clear"}),this}readBack(t){var i;if(!this.$c)return{data:{},iSampleFirst:0};const s=null===(i=Object.values(this.$c).find((t=>t.cache)))||void 0===i?void 0:i.cache;if(!s)return{data:{},iSampleFirst:0};const e=s.length;let h,r=[];if(null==t?void 0:t.onlyInRange){const i=this.$c[t.onlyInRange.key],s=this.Xc(t.onlyInRange.key),e=i.cache;if(!s)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");if(!e)return{data:{},iSampleFirst:0};const n=Math.min(t.onlyInRange.start,t.onlyInRange.end),o=Math.max(t.onlyInRange.start,t.onlyInRange.end),a=oo(n,o,e,this.Pc,this.Lc,this.Ic,s,0);if(!a)return{data:{},iSampleFirst:0};r=a.dataRanges,h=a.iFirstSample}else if(void 0!==this.Hc&&this.Bc&&this.Pc%this.Hc!=0){const t=this.Ic,i=e-t,s=this.Ic-1;r.push({offset:t,count:i}),r.push({offset:0,count:s+1}),h=this.Pc-e}else r.push({offset:0,count:this.Lc}),h=0;const n=r.reduce(((t,i)=>t+i.count),0),o=Object.fromEntries(Object.entries(this.$c).filter((([t,i])=>i.cache)).map((([t,i])=>{var s;const e=i.cache;let h;if(1===r.length&&r[0].count===e.length)h=e;else{h=new(null!==(s=i.dataStorage)&&void 0!==s?s:Float64Array)(n);let t=0;for(const s of r)h.set(i.cache.subarray(s.offset,s.offset+s.count),t),t+=s.count}return[t,h]})));return{data:o,iSampleFirst:h}}ad(t,i){var s,e;const h=this.readBack(i);return{xValues:null!==(s=h.data[t.x])&&void 0!==s?s:new Float64Array,yValues:null!==(e=h.data[t.y])&&void 0!==e?e:new Float64Array,lookupValues:t.lookupValue?h.data[t.lookupValue]:void 0,colors:t.color?h.data[t.color]:void 0,sizes:t.size?h.data[t.size]:void 0,rotations:t.rotation?h.data[t.rotation]:void 0,iSampleFirst:h.iSampleFirst}}ld(t){}ud(){return{min:0,max:void 0!==this.Hc&&this.Bc?this.Hc-1:this.Lc-1}}dd(t){t=Math.min(t,this.Lc),this.Pc-=t,this.Lc-=t,this.Ic-=t,this.Ic<0&&void 0!==this.Hc&&(this.Ic+=this.Hc)}jc(t,i){const s=this.$c;if(!s)return;const e=this.Xc(t),h="progressive"===e,r=s[t].cache,n=i.parsedDataArrs[t],o=Object.keys(i.parsedDataArrs);if(!e||!r||!n)return;const a=i.count,l=n[0];if(this.Yc(Object.fromEntries(o.map((t=>[t,i.parsedDataArrs[t][i.offset+i.count-1]]))))){const t=r.length,e=this.Lc,n=this.Pc-1,u=Math.max(n-e+1,0),c=ao(l,u,n,h,(i=>r[no(i,this.Pc,t,this.Ic)])),d=c-1,f=c+1,A=r[no(c,this.Pc,t,this.Ic)],g=f<=this.Pc-1?r[no(f,this.Pc,t,this.Ic)]:void 0,v=void 0!==g&&(h&&g<l||!h&&g>l)?f+1:h&&A<l||!h&&A>l?c+1:d+1,y=n-v+1,p=Object.fromEntries(o.map((t=>{var i;return[t,new(null!==(i=s[t].dataStorage)&&void 0!==i?i:Float64Array)(y)]})));let m=0;for(let i=v;i<=n;i+=1){const e=no(i,this.Pc,t,this.Ic);for(const t of o)p[t][m]=s[t].cache[e];m+=1}this.dd(y);const S=Object.fromEntries(o.map((t=>{var e;const h=new(null!==(e=s[t].dataStorage)&&void 0!==e?e:Float64Array)(a+y);return h.set(i.parsedDataArrs[t]),h.set(p[t],a),[t,h]})));this.Ec=!0,this.appendSamples(S),this.Ec=!1,this.P.D("clear",{type:"clear"})}else{const s=this.Zc(),e=s?s[t]:0;let h=0;for(let t=0;t<a;t+=1)if(n[t]>e){h=t;break}this.Ec=!0,this.appendSamples(i.parsedDataArrs,{offset:h}),this.Ec=!1}}Yc(t){const i=this.Zc();if(!i||!this.$c)return;const s=Object.keys(t),e=[];for(const h of s){const s=this.Xc(h);if(!s)continue;const r=i[h],n=t[h],o="number"==typeof n?n:n[0];("progressive"===s&&o<r||"regressive"===s&&o>r)&&e.push(h)}return e.length>0?e:void 0}fd(t){const i=this.Qc(t);if(!i.td||!i.sd||0===this.Lc)return;if(void 0===this.Hc)return this.Pc>0?{x:i.td[0],y:i.sd[0]}:void 0;if(!this.Bc)return{x:i.td[0],y:i.sd[0]};let s=this.Ic-this.Lc;return s<0&&(s+=this.Hc),{x:i.td[s],y:i.sd[s]}}Ad(t){const i=this.Qc(t);if(!i.td||!i.sd||0===this.Lc)return;if(void 0===this.Hc){const t=this.Lc-1;return t>=0?{x:i.td[t],y:i.sd[t]}:void 0}let s=this.Ic-1;return s<0&&(s+=this.Hc),{x:i.td[s],y:i.sd[s]}}gd(){if(!this.$c||0===this.Lc)return;let t;if(void 0===this.Hc){if(this.Pc>0)return;t=0}else this.Bc?(t=this.Ic-this.Lc,t<0&&(t+=this.Hc)):t=0;return Object.fromEntries(Object.entries(this.$c).map((([i,s])=>[i,s.cache[t]])))}Zc(){if(!this.$c||0===this.Lc)return;let t;return void 0===this.Hc?t=this.Lc-1:(t=this.Ic-1,t<0&&(t+=this.Hc)),Object.fromEntries(Object.entries(this.$c).map((([i,s])=>[i,s.cache[t]])))}vd(t,i){const s=this.Qc(t);if(!(this.$c&&0!==this.Lc&&s&&s.td&&s.sd))return;const e=s.td.length,h=this.Lc,r=this.Pc-1,n=Math.max(r-h+1,0)+i,o=no(n,this.Pc,e,this.Ic);return{x:s.td[o],y:s.sd[o],lookupValue:s.nd?s.nd[o]:void 0,color:s.ed?s.ed[o]:void 0,size:s.rd?s.rd[o]:void 0,rotation:s.hd?s.hd[o]:void 0,iSample:n,sample:Object.fromEntries(Object.entries(this.$c).map((([t,i])=>[t,i.cache?i.cache[o]:void 0])))}}yd(t,i,s,e,h){if(!t)return;const r=this.$c,n=this.Qc(t),o=n.dataPattern,a=n.td,l=n.sd;if(!a||!l||!r)return;const u=(t,i)=>({x:a[t],y:l[t],lookupValue:n.nd?n.nd[t]:void 0,color:n.ed?n.ed[t]:void 0,size:n.rd?n.rd[t]:void 0,rotation:n.hd?n.hd[t]:void 0,iSample:i,sample:Object.fromEntries(Object.entries(r).map((([i,s])=>[i,s.cache?s.cache[t]:void 0])))}),c=a.length,d=this.Lc,f=this.Pc-1,A=Math.max(f-d+1,0);if(o){const e=qe(o),h=this.fd(t),a=this.Ad(t);if(!(h&&a&&n.td&&n.sd))return;const l="ProgressiveX"===o||"RegressiveX"===o?"x":"y",d="x"===l?"y":"x",g="x"===l?n.td:n.sd,v="x"===d?n.td:n.sd,y=i[l],p=Math.min(h[l],a[l]),m=Math.max(h[l],a[l]);if(y<p||y>m)return;const S=ao(y,A,f,e,(t=>g[no(t,this.Pc,c,this.Ic)])),b=no(S,this.Pc,c,this.Ic);if(!s)return u(b,S);const x=S-1,M=S+1,w=g[b],_=e?y>=w?M<=f?M:void 0:x>=A?x:void 0:y<=w?M<=f?M:void 0:x>=A?x:void 0;if(void 0===_)return;const k=no(_,this.Pc,c,this.Ic),C=S<_?{pos:g[b],val:v[b],iSample:S}:{pos:g[k],val:v[k],iSample:_},T=S>_?{pos:g[b],val:v[b],iSample:S}:{pos:g[k],val:v[k],iSample:_},F=(y-C.pos)/(T.pos-C.pos),I=th(C.val,T.val,F),L=Object.fromEntries(Object.entries(r).map((([t,i])=>[t,i.cache?i.cache[b]:void 0])));return"x"===Ke(o)?{x:y,y:I,iSample:th(C.iSample,T.iSample,F),sample:L}:{y:y,x:I,iSample:th(C.iSample,T.iSample,F),sample:L}}let g,v=Number.MAX_VALUE;const y=tt(i,e,h),p=this.Lc-1;for(let t=0;t<=p;t+=1){const i=a[t],s=l[t];if(!this.zc||!Number.isNaN(i)&&!Number.isNaN(s)){const r=q(i,e.x,h.x),n=q(s,e.y,h.y),o=(r-y.x)**2+(n-y.y)**2;o<v&&(v=o,g=t)}}return void 0===g?void 0:u(g,g)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const no=(t,i,s,e)=>t%s,oo=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a="progressive"===n,l=s.length,u=e-1,c=Math.max(u-h+1,0),d=so(s)?ao(t,c,u,a,(t=>s.elementAt(no(t,e,l)))):ao(t,c,u,a,(t=>s[no(t,e,l)])),f=so(s)?ao(i,c,u,a,(t=>s.elementAt(no(t,e,l)))):ao(i,c,u,a,(t=>s[no(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f);if(A===g&&(0===A||A===u))return;const v=Math.max(A-o,c),y=Math.min(g+o,u),p=no(v,e,l),m=no(y,e,l);return p>m?{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:l-p},{offset:0,count:m+1}]}:{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:m-p+1}]}},ao=(t,i,s,e,h)=>{const r=s;for(;i!==s;){const r=Math.ceil((i+s)/2),n=h(r);e&&t<n||!e&&t>n?s=r-1:i=r}const n=Math.abs(t-h(i));return i<r&&Math.abs(t-h(i+1))<n?i+1:i},lo=(t,i,s,e,h)=>{if("number"==typeof i)t.fill(i,h,h+e);else{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)}},uo=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),co=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,fo=t=>"string"==typeof t&&co.test(t)&&!ti.isNaN(Date.parse(t)),Ao=(t,i)=>{if("number"==typeof t)return t;if(p(t))return t.toUint32();if(t instanceof Date)return t.getTime();if("string"==typeof t){if(fo(t))return new Date(t).getTime();throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings")}const s=t.length,e=t[0]&&t[0]instanceof Date,h=t[0]&&fo(t[0]),r=t[0]&&p(t[0]);if(!h&&t[0]&&"string"==typeof t[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(h){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=new Date(t[i]).getTime();return e}if(e){const e=new i(s);for(let i=0;i<s;i+=1)e[i]=t[i].getTime();return e}if(r){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t},go=t=>{if(t&&Array.isArray(t))return Float64Array;const i="object"==typeof t?Object.getPrototypeOf(t).constructor:void 0;return null!=i?i:Float64Array},vo=t=>!!t&&!Array.isArray(t)&&(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array);class yo extends qn{constructor(t,i,s,e,h){var r;super(t,i,s,e,h),this.pl="label",this.kc=this.Hs.wn(this.renderingScale).qr(this.pl).Ke(xe).xn(as).Mn(as),this.setMargin(null!==(r=h.uiTextPadding)&&void 0!==r?r:5),this.P.Oi(this.kc)}Vn(){return[this.kc]}setFillStyle(t){return this.kc.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.br()}th(){void 0!==this.Un&&this.kc.rl(this.Un);const t=this.getPosition(r(0,0),Ht.Content),i=tt(t,this.scale,this.renderingScale);return this.kc.ih(i),this.kc.Kh=this.Kh,this}Vr(){this.kc.Vr();const t=0===this.pl.length?r(0,0):this.kc.bc();return this.setContentSize(t),super.Vr()}setText(t){return this.pl=t,this.kc.qr(this.pl),this.Hs.Ps(),this}getText(){return this.pl}setFont(t){return this.kc.kr(t),this.Hs.Ps(),this}getFont(){return this.kc._r()}setTextRotation(t){return this.kc.Cr(t),this.Hs.Ps(),this}getTextRotation(){return this.kc.Tr()}}const po={...dn,...An,uiElement:yo};class mo extends to{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Yn.bind(this),this.setSize=this.fitTo,this.kc=this.Hs.pd(i).Ke(xe).Qe($t),this.md=this.kc.jo(),this.P.Oi(this.kc)}Vn(){return[this.kc]}setCornerRadius(t,i){var s,e,h,r;return this.Sd=t,this.md.bd(t?{extent:t,c_x1_y1:null===(s=null==i?void 0:i.bottomLeft)||void 0===s||s,c_x1_y2:null===(e=null==i?void 0:i.topLeft)||void 0===e||e,c_x2_y1:null===(h=null==i?void 0:i.bottomRight)||void 0===h||h,c_x2_y2:null===(r=null==i?void 0:i.topRight)||void 0===r||r,skipTooSmallCheck:!!i}:void 0),this.Hs.Ps(),this}getCornerRadius(){return this.Sd}setFillStyle(t){return this.kc.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.br()}setStrokeStyle(t){return this.kc.Qe(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.Za()}th(){void 0!==this.Un&&this.kc.rl(this.Un);const t=Es([this.getPosition(r(-1,-1),Ht.Content),this.getPosition(r(1,1),Ht.Content)].map((t=>tt(t,this.scale,this.renderingScale))));return this.md.xd(t.min.x,t.min.y,t.max.x,t.max.y),this}Yn(t){return this.setContentSize(t),this.Hs.Ps(),this}jn(){return 0}Hn(){return 0}Xn(){return 0}Wn(){return 0}}class So extends to{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Md=r(0,0),this.kc=t.wd(i).Ju(0).gh(360).Ke(xe).Qe($t),this.P.Oi(this.kc)}Vn(){return[this.kc]}setFillStyle(t){return this.kc.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.br()}setStrokeStyle(t){return this.kc.Qe(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.Za()}th(){void 0!==this.Un&&this.kc.rl(this.Un);const t=this.getSize(Ht.Content).x/2;return this.kc.Ku(t*this.renderingScale.ri().x).qu(t*this.renderingScale.ri().y).ih(tt(this.getPosition(r(0,0),Ht.Content),this.scale,this.renderingScale)).sc(255).Vr(),this}Yn(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(r(2*i,2*i)),this.Md=t,this.Hs.Ps(),this}jn(){return(this.getSize(Ht.Content).x-this.Md.x)/2}Hn(){return(this.getSize(Ht.Content).x-this.Md.x)/2}Xn(){return(this.getSize(Ht.Content).y-this.Md.y)/2}Wn(){return(this.getSize(Ht.Content).y-this.Md.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(r(i,i)),this.Md=t,this}}class bo extends io{constructor(t,i,s,e,h){super(t,i,s,$n.Simple,e,h),this._d=d(r(0,0)),this.kd=!1,this.Tc()}Fc(){const t=this._d.C();if(this.kd){const i=Math.min(t.x,t.y);return[r(0,0),r(i/2,i/2),r(0,i),r(-i/2,i/2)]}const i=2*Math.sqrt(this._d.C().x*this._d.C().x/4+this._d.C().y*this._d.C().y/4),s=r(Math.cos(Math.PI/4)*i,0),e=r(0,Math.sin(Math.PI/4)*i),h=r(0,0),n=Ws(h,Ws(s,e)),o=Ws(n,Ws(e,Hs(s,-1)));return[h,n,o,Xs(o,Ws(s,e))]}Vn(){return[this.kc]}setFillStyle(t){return this.kc.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.br()}setStrokeStyle(t){return this.kc.Qe(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.Za()}Yn(t){return this._d._(t),this.kd=!1,this.Hs.Ps(),this}jn(){return this.kd?0:(this.getSize(Ht.Content).x-this._d.C().x)/2}Hn(){return this.kd?0:(this.getSize(Ht.Content).x-this._d.C().x)/2}Xn(){return this.kd?0:(this.getSize(Ht.Content).y-this._d.C().y)/2}Wn(){return this.kd?0:(this.getSize(Ht.Content).y-this._d.C().y)/2}fitTo(t){return this._d._(t),this.kd=!0,this.Hs.Ps(),this}}class xo extends io{constructor(t,i,s,e,h){super(t,i,s,$n.Simple,e,h),this.Cd=d(r(0,0)),this.Td=d(10),this.Fd=d(void 0),this.so=d(Zt.Right),this.Tc()}Vn(){return[this.kc]}setFillStyle(t){return this.kc.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.br()}setStrokeStyle(t){return this.kc.Qe(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.Za()}setDirection(t){return this.so._(t),this.Hs.Ps(),this}getDirection(){return this.so.C()}setPointerLength(t){return this.Td._(t),this.Hs.Ps(),this}getPointerLength(){return this.Td.C()}setPointerAngle(t){return this.Fd._(t),this.Hs.Ps(),this}getPointerAngle(){let t=this.Fd.C();if(void 0===t){const i=this.Id();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Yn(t){return this.Cd._(t),this.Hs.Ps(),this}Ld(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Pd(){return _i(this.so.C())?this.Cd.C().x:this.Cd.C().y}Id(){return _i(this.so.C())?this.Cd.C().y:this.Cd.C().x}jn(){switch(this.so.C()){case Zt.Right:return 0;case Zt.Left:return this.getPointerLength();case Zt.Up:case Zt.Down:return Math.max(0,this.Ld()-this.Id());default:return 0}}Hn(){switch(this.so.C()){case Zt.Right:return this.getPointerLength();case Zt.Left:return 0;case Zt.Up:case Zt.Down:return Math.max(0,this.Ld()-this.Id());default:return 0}}Xn(){switch(this.so.C()){case Zt.Right:case Zt.Left:return Math.max(0,this.Ld()-this.Id());case Zt.Up:return this.getPointerLength();case Zt.Down:default:return 0}}Wn(){switch(this.so.C()){case Zt.Right:case Zt.Left:return Math.max(0,this.Ld()-this.Id());case Zt.Up:return 0;case Zt.Down:return this.getPointerLength();default:return 0}}Fc(){const t=wi(this.so.C()),i=Ys(r(0,0),t),s=this.getPointerLength(),e=this.Ld(),h=this.Pd(),n=this.Id();if(!(0!==s&&0!==e||0!==h&&0!==n))return[];const o=r(0,0),a=Ws(Ws(o,Hs(t,-s)),Hs(i,e/2)),l=Ws(a,Hs(i,(n-e)/2)),u=Ws(l,Hs(t,-h)),c=Ws(Ws(o,Hs(t,-s)),Hs(i,-e/2)),d=Ws(c,Hs(i,-(n-e)/2)),f=Ws(d,Hs(t,-h));let A;return A=0===h||0===n?[o,a,c]:0===s||0===e?[l,u,f,d]:ni(n,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class Mo extends qn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Yn.bind(this),this.setSize=this.fitTo,this.Bd=new ro,this.kc=this.Hs.Od(i).fh($t).Rd(xe).Ed(xe).Dd(this.Bd,{x:"x",y:"y"}),this.P.Oi(this.kc)}Vn(){return[this.kc]}setShape(t){return this.kc.zd(t),this}getShape(){return this.kc.Vd()}setRotation(t){return this.kc.Nd(t),this}getRotation(){return this.kc.Gd()}setFillStyle(t){return this.kc.Ed(t),this.Hs.Ps(),this}getFillStyle(){return this.kc.$d()}setStrokeStyle(t){return this.kc.Ud(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.Yd()}th(){void 0!==this.Un&&this.kc.rl(this.Un);const t=tt(this.getPosition({x:0,y:0},Ht.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.Bd.clear(),i>0){const s=this.kc.Vd(),e=this.kc.$d(),h=Ph(s)&&s,r=Nt(e)&&e;if(h){const t=i/h._t().y;this.kc.jd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.kc.jd(s)}}else this.kc.jd(i);this.Bd.appendSample(t)}return this}Yn(t){return this.setContentSize(t),this.Hs.Ps(),this}jn(){return 0}Hn(){return 0}Xn(){return 0}Wn(){return 0}}const wo={...dn,...An,uiElement:Mo};class _o extends vn{setSize(t){return this.setContentSize(t),this.Hs.Ps(),this}}class ko extends hn{constructor(){super(...arguments),this.Hd=[],this.Wd=0,this.Xd=t=>{const i=this.Hd.indexOf(t);i>=0&&this.Hd.splice(i,1)}}getMembers(){return this.Hd}getMemberCount(){return this.Hd.length}setMinimumSize(t){return this.Zd=t,this.Hs.Ps(),this}getMinimumSize(){return this.Zd}addElement(t,i=-1){const s=t.ao(this.Hs,this.renderingScale,this.scale,this.Xd,this.bi,!1);return s.setPointerEvents(this.getPointerEvents()),i>=0?this.Hd.splice(i,0,s):this.Hd.push(s),s.setVisible(this.getVisible()),this.P.Ni(s),this.ui&&(Ji(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Hd.slice().forEach(hi),this}th(){super.th(),this.Hd.forEach((t=>{t.Kh=this.Kh}));const t=this.Un;return void 0!==t&&this.Hd.forEach(((i,s)=>{i.Un=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.Hd.forEach((i=>i.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let i=0;i<this.Hd.length;i+=1)this.Hd[i].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.Hd.length;t+=1)if(this.Hd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Hd.length;i+=1){const s=this.Hd[i];Jt(s)&&s.setHighlight(t)}return this}}class Co extends ko{th(){super.th();const t=this.getPosition(r(-1,1),Ht.Content),i=this.Hd.reduce(((t,i)=>t+ +(i instanceof _o)),0),s=i>0?(this.size.x-this.Wd)/i:0;return this.Hd.reduce(((i,e)=>e instanceof _o?this.scale.Jt({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(r(-1,1)).setPosition(r(i,t.y)).th().getPosition(r(1,0)).x),t.x),this}Vr(){for(let t=0;t<this.Hd.length;t+=1){const i=this.Hd[t];i instanceof To&&i.setMinimumSize(0),i.Vr()}const t=this.Hd.reduce(this.Jd.bind(this),n(0,0));this.Wd=t.x;const i=void 0===this.Zd?t:r(Math.max(t.x,this.Zd),t.y);this.setContentSize(i);for(let t=0;t<this.Hd.length;t+=1){const s=this.Hd[t];s instanceof To&&s.setMinimumSize(i.y).Vr()}return super.Vr()}Jd(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(Fo,i).setSize(r(0,t))}}class To extends ko{th(){super.th();const t=this.getPosition(r(-1,1),Ht.Content),i=this.Hd.reduce(((t,i)=>t+ +(i instanceof _o)),0),s=i>0?(this.size.y-this.Wd)/i:0;return this.Hd.reduce(((i,e)=>e instanceof _o?this.scale.Jt({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(r(-1,1)).setPosition(r(t.x,i)).th().getPosition(r(0,-1)).y),t.y),this}Vr(){for(let t=0;t<this.Hd.length;t+=1){const i=this.Hd[t];i instanceof Co&&i.setMinimumSize(0),i.Vr()}const t=this.Hd.reduce(this.Jd.bind(this),n(0,0));this.Wd=t.y;const i=void 0===this.Zd?t:r(t.x,Math.max(t.y,this.Zd));this.setContentSize(i);for(let t=0;t<this.Hd.length;t+=1){const s=this.Hd[t];s instanceof Co&&s.setMinimumSize(i.x).Vr()}return super.Vr()}Jd(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(Fo,i).setSize(r(0,t))}}const Fo={...dn,...An,uiElement:_o};class Io extends Co{constructor(){super(...arguments),this.Hd=[]}addColumn(){return this.addElement(Bo,void 0)}getColumn(t,i=!1){return i&&this.Hd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Hd[t]}}class Lo extends To{constructor(){super(...arguments),this.Hd=[]}addRow(){return this.addElement(Do,void 0)}getRow(t,i=!1){return i&&this.Hd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Hd[t]}}const Po={...dn,...fn,...gn},Bo={...Po,uiElement:To,background:mo},Do={...Po,uiElement:Co,background:mo},Eo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},Ro=(t=>{const i={},s=`stylable${t}s`;return i[s]=[],i[`set${t}FillStyle`]=function(t){return this[s].forEach((i=>i.setFillStyle(t))),this},i[`get${t}FillStyle`]=function(){return this[s][0].getFillStyle()},i[`set${t}Font`]=function(t){return this[s].forEach((i=>i.setFont(t))),this},i[`get${t}Font`]=function(){return this[s][0].getFont()},i[`set${t}Rotation`]=function(t){return this[s].forEach((i=>i.setTextRotation(t))),this},i[`get${t}Rotation`]=function(){return this[s][0].getTextRotation()},i})("Text"),Oo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.P.D("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonStrokeStyle(t){return this.button.setStrokeStyle(t),this},getButtonStrokeStyle(){return this.button.getStrokeStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},zo={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},Vo={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},No={...dn,...fn,background:mo,ao(t,i,s,e,h,r){const n=new Co(t,i,s,this.background,e,h),o=n.addElement(po,void 0),a=Object.assign(n,Eo,{setTextLabel:o},Ro,{stylableTexts:[o]});return cn(a,h,r),this.applyStylers(a,h)}}.addStyler(un),Go={...dn,...fn,background:xo,direction:Zt.Up,setDirection(t){return this.direction=t,this},ao(t,i,s,e,h,r){const n=this.direction,o=new Co(t,i,s,this.background,e,h),a=o.addElement(po,void 0),l=o.getBackground().setDirection(n),u=o.th.bind(o),c=Object.assign(o,Eo,{setTextLabel:a},Ro,{stylableTexts:[a]},Vo,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Zt.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===Zt.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===Zt.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===Zt.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Zt.Up?this.getPadding().top:this.getDirection()===Zt.Down?this.getPadding().bottom:this.getDirection()===Zt.Right?this.getPadding().right:this.getPadding().left},setTickLabelAlignment(t,i){return this},getTickLabelAlignment:()=>0,Kh:void 0,th(){a.Kh=this.Kh,u()}});return c.lo="other",c.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),cn(c,h,r),this.applyStylers(c,h)}};class $o extends en{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Qd=!1,this.Kd=xe,this.qd=xe,this.getOn=()=>this.Qd,this.qd=r.uiButtonFillStyleHidden||r.uiButtonFillStyle,this.tf=new Mo(this.Hs,this.renderingScale,this.scale,ri,r).setShape(e).setFillStyle(this.qd),this.P.Ni(this.tf)}Vn(){return[...this.tf.Vn()]}setOn(t){return this.Qd=t,this.tf.setFillStyle(t?this.Kd:this.qd),this.Hs.Ps(),this}setOffFillStyle(t){return this.qd="function"==typeof t?t(this.qd):t,this.Qd||this.tf.setFillStyle(this.qd),this}getOffFillStyle(){return this.qd}setSize(t){return this.tf.fitTo("number"==typeof t?r(t,t):t),this}getSize(){return this.tf.getSize()}setOnFillStyle(t){return this.Kd="function"==typeof t?t(this.Kd):t,this.Qd&&this.tf.setFillStyle(this.Kd),this}getOnFillStyle(){return this.Kd}setStrokeStyle(t){return this.tf.setStrokeStyle(t),this}getStrokeStyle(){return this.tf.getStrokeStyle()}setButtonShape(t){return this.tf.setShape(t),this.Hs.Ps(),this}getButtonShape(){return this.tf.getShape()}th(){return super.th(),this.tf.Un=this.Un,this.tf.setVisible(this.getVisible()).setPosition(this.getPosition(r(0,0),Ht.Content)).th(),this}Vr(){const t=this.tf.Vr().getSize();return this.setContentSize(t),super.Vr()}dispose(){return super.dispose(),this.tf.dispose(),this}setPointerEvents(t){return this.tf.setPointerEvents(t),this}getPointerEvents(){return this.tf.getPointerEvents()}setHighlight(t){const i=is(t);return this.tf.setHighlight(i),this.P.D("highlightchange",{highlight:i}),this.Hs.Ps(),this}getHighlight(){return this.tf.getHighlight()}}const Uo={...dn,uiElement:$o,buttonShape:Qe.Circle,setButtonShape(t){return{...this,buttonShape:t}},ao(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return cn(n,h,r),n}},Yo={...dn,...fn,background:mo,buttonBuilder:Uo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},ao(t,i,s,e,h,r){var n;const o=new Co(t,i,s,this.background,e,h),a=o.addElement(Bo);a.addGap();const l=a.addElement(this.buttonBuilder);a.addGap();const u=o.addElement(Bo);u.addGap();const c=u.addElement(po);u.addGap(),o.addGap();const d=Object.assign(o,Eo,{setTextLabel:c},Ro,{stylableTexts:[c]},Oo,{button:l},zo);let f;return d.addEventListener("click",(()=>{d.getLocked()||d.setOn(!d.getOn())})),d.addEventListener("pointerenter",(()=>{d.setHighlight(!0)})),d.addEventListener("pointerleave",(()=>{d.setHighlight(!1)})),d.setMouseStyle(gr.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.addEventListener("switch",(t=>{t.state?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:null!==(n=h.uiTextPadding)&&void 0!==n?n:5}),cn(d,h,r),this.applyStylers(d,h)}}.addStyler(un).addStyler(((t,i)=>(t.setButtonOnFillStyle(i.uiButtonFillStyle).setButtonOffFillStyle(i.uiButtonFillStyleHidden).setButtonSize(i.uiButtonSize).setButtonStrokeStyle(i.uiButtonStrokeStyle),t)));class jo extends en{constructor(t,i,s,e,h){super(t,i,s,e,h),this.if=10,this.sf=Zt.Up,this.ef=0,this.lo="major",this.hf=0,this.rf=1,this.pl=t.wn(this.renderingScale).xn(as).Mn(as),this.P.Oi(this.pl),this.dh=t.Ah(this.renderingScale),this.P.Oi(this.dh)}Vn(){return[this.pl]}th(){if(super.th(),this.ui)return this;const t=tt(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.Jt(t,{x:this.sf===Zt.Right?-this.if:this.sf===Zt.Left?this.if:0,y:this.sf===Zt.Up?-this.if:this.sf===Zt.Down?this.if:0}),s=this.renderingScale.Jt(i,{x:this.sf===Zt.Right?-this.ef:this.sf===Zt.Left?this.ef:0,y:this.sf===Zt.Up?-this.ef:this.sf===Zt.Down?this.ef:0});return this.dh.ph(t).gh(i),this.pl.ih(s).Xl(this.sf===Zt.Up?{x:this.hf,y:this.rf}:this.sf===Zt.Down?{x:this.hf,y:-this.rf}:this.sf===Zt.Right?{x:this.rf,y:this.hf}:{x:-this.rf,y:this.hf}),this.pl.Kh=this.Kh,this}Vr(){const t=this.dh.co().getThickness();return this.size=this.sf===Zt.Left||this.sf===Zt.Right?{x:this.if+this.ef+this.pl.Vr().bc().x,y:t}:{y:this.if+this.ef+this.pl.Vr().bc().y,x:t},super.Vr()}dispose(){return super.dispose(),this.pl.dispose(),this.dh.dispose(),this}setVisible(t){return super.setVisible(t),this.pl.setVisible(t),this.dh.setVisible(t),this}setPointerEvents(t){return this.pl.setPointerEvents(t),this.dh.setPointerEvents(t),this}getPointerEvents(){return this.pl.getPointerEvents()}getText(){return this.pl.en()}setTextFillStyle(t){return this.pl.Ke(t),this.Hs.Ps(),this}getTextFillStyle(){return this.pl.br()}setTextFont(t){return this.pl.kr(t),this}setTextRotation(t){return this.pl.Cr(t),this}getTextRotation(){return this.pl.Tr()}getTextFont(){return this.pl._r()}setText(t){return this.pl.qr(t),this.Hs.Ps(),this}setDirection(t){return this.sf=t,this.Hs.Ps(),this}getDirection(){return this.sf}setPointerLength(t){return this.if=t,this.Hs.Ps(),this}getPointerLength(){return this.if}setTickLabelPadding(t){return this.ef=t,this.Hs.Ps(),this}getTickLabelPadding(){return this.ef}setTickStyle(t){return this.dh.fh(t),this.Hs.Ps(),this}getTickStyle(){return this.dh.co()}setTickLabelAlignment(t,i){return this.hf=t,i&&(this.rf=i),this.Hs.Ps(),this}getTickLabelAlignment(){return this.hf}}const Ho={...dn,direction:Zt.Up,setDirection(t){return this.direction=t,this},ao(t,i,s,e,h,r){const n=this.direction,o=new jo(t,i,s,e,h);return cn(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler(un),Wo=Ho.addStyler(((t,i)=>(t.lo="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Xo=Ho.addStyler(((t,i)=>(t.lo="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle))));class Zo extends en{constructor(t,i,s,e,h,r){var n,o,a,l,u,c;super(t,i,s,e,h),this.nf=[],this.af="",this.lf=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:me(i,t.value),this.uf=0,this.cf=!1,this.hf=r,this.df=t.pd(i).Qe($t),this.md=this.df.jo().bd("number"==typeof h.legendLUTCornerRadius?{extent:h.legendLUTCornerRadius,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.P.Oi(this.df),this.ff=t.wn(i).Ke(h.uiTextFillStyle).kr(h.uiTextFont).setPointerEvents(!1),this.P.Oi(this.ff),this.Af=null!==(n=h.legendLUTLabelMargin)&&void 0!==n?n:7,this.gf=null!==(o=h.legendLUTUnitLabelMargin)&&void 0!==o?o:7,"vertical"===r?(this.vf=null!==(a=h.legendLUTLengthVertical)&&void 0!==a?a:140,this.yf=null!==(l=h.legendLUTThicknessVertical)&&void 0!==l?l:25):(this.vf=null!==(u=h.legendLUTLengthHorizontal)&&void 0!==u?u:160,this.yf=null!==(c=h.legendLUTThicknessHorizontal)&&void 0!==c?c:15)}Vn(){return[this.df,this.ff]}pf(t){return this.ff.xn(t),this.nf.forEach((i=>i.xn(t))),this.Hs.Ps(),this}mf(t){this.Sf=t;const i=Ko(t,"vertical"===this.hf?0:90,this.cf);return this.df.Ke(i),this.Hs.Ps(),this}Us(){return this.Sf}bf(t){return this.vf=t,this.Hs.Ps(),this}Xl(t){return this.hf=t,this.Hs.Ps(),this}xf(){return this.vf}Mf(t){return this.yf=t,this.Hs.Ps(),this}wf(){return this.yf}_f(t){return this.af=t,this.Hs.Ps(),this}kf(){return this.af}Cf(t){return this.lf=t,this.Hs.Ps(),this}setLUTDisplayProportionalSteps(t){if(this.cf=t,this.Sf){const t=Ko(this.Sf,"vertical"===this.hf?0:90,this.cf);this.df.Ke(t)}return this.Hs.Ps(),this}getLUTDisplayProportionalSteps(){return this.cf}setFillStyle(t){return this.ff.Ke(t),this.Hs.Ps(),this}getFillStyle(){return this.ff.br()}setFont(t){return this.ff.kr(t),this.Hs.Ps(),this}getFont(){return this.ff._r()}setTextRotation(t){return this.uf=t,this.ff.Cr(t),this.Hs.Ps(),this}getTextRotation(){return this.ff.Tr()}th(){var t,i,s,e;if(super.th(),this.ui||!this.getVisible())return this;const h=this.Sf;if(h){const r=this.renderingScale.ri(),n=h.min,o=h.max;if("vertical"===this.hf){const s=this.getPosition({x:-1,y:-1},Ht.Content),e=Ws(s,{x:this.yf*this.renderingScale.x.getPixelSize()+this.Af*r.x,y:0}),a={x:e.x,y:e.y+(this.af.length>0?this.gf*r.y+this.ff._t().y:0)+.5*((null===(t=this.nf[0])||void 0===t?void 0:t._t().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Ht.Content).y-.5*((null===(i=this.nf[this.nf.length-1])||void 0===i?void 0:i._t().y)||0)};this.md.xd(s.x,a.y,s.x+this.yf*this.renderingScale.x.getPixelSize(),a.y+this.vf*this.renderingScale.y.getPixelSize()),this.ff.Xl({x:-1,y:-1}).ih(e),h.getSteps().forEach(((t,i)=>{const s=Bs(a,l,this.cf?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.nf[i].Xl({x:-1,y:0}).ih(s)}))}else{const t=this.getPosition({x:-1,y:-1},Ht.Content),i=this.getPosition({x:1,y:1},Ht.Content),a=Math.max(this.nf.reduce(((t,i)=>Math.max(t,i._t().y)),0),this.ff.Vr()._t().y),l=Ws(t,{x:.5*((null===(s=this.nf[0])||void 0===s?void 0:s._t().x)||0),y:a}),u={x:i.x,y:l.y},c={x:h.getInterpolation()?u.x-(.5*((null===(e=this.nf[this.nf.length-1])||void 0===e?void 0:e._t().x)||0)+(this.af.length>0?this.gf*r.x+this.ff._t().x:0)):l.x+this.vf*this.renderingScale.x.getPixelSize(),y:l.y},d={x:l.x,y:l.y+this.Af*r.y};this.md.xd(d.x,d.y,d.x+this.vf*this.renderingScale.x.getPixelSize(),d.y+this.yf*this.renderingScale.y.getPixelSize()),this.ff.Xl({x:1,y:1}).ih(u),h.getSteps().forEach(((t,i)=>{const s=Bs(l,c,this.cf?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.nf[i].Xl({x:0,y:1}).ih(s)}))}}return this}Vr(){if(this.Sf&&this.getVisible()){const t=this.Sf.getSteps();for(let i=this.nf.length;i<t.length;i+=1){const t=this.Hs.wn(this.renderingScale).setPointerEvents(!1);this.nf.push(t),this.P.Oi(t)}for(let i=0;i<t.length;i+=1)this.nf[i].Ke(this.ff.br()).kr(this.ff._r()).qr(this.lf(t[i],this.Sf)).Cr(this.uf);for(let i=t.length;i<this.nf.length;i+=1)this.nf[i].dispose();if(this.nf.length=t.length,this.ff.qr(this.af),"vertical"===this.hf){const t=this.yf,i=this.vf,s=t+Math.max(this.nf.reduce(((t,i)=>Math.max(t,i.Vr().bc().x)),0),this.ff.Vr().bc().x),e=(this.af.length>0?this.gf+this.ff.Vr().bc().y:0)+i+.5*this.nf[0].Vr().bc().y+.5*this.nf[this.nf.length-1].Vr().bc().y;this.setContentSize({x:s,y:e})}else{const t=this.vf,i=this.yf,s=Math.max(this.af.length>0?this.gf+this.ff.Vr().bc().x+(this.Sf.getInterpolation()?.5*this.nf[this.nf.length-1].Vr().bc().x:0):0,this.Sf.getInterpolation()?.5*this.nf[this.nf.length-1].Vr().bc().x:0),e=t+.5*this.nf[0].Vr().bc().x+s,h=i+this.Af+Math.max(this.nf.reduce(((t,i)=>Math.max(t,i.Vr().bc().y)),0),this.ff.Vr().bc().y);this.setContentSize({x:e,y:h})}}else this.nf.forEach((t=>t.dispose())),this.nf.length=0,this.ff.setVisible(!1),this.df.setVisible(!1),this.setContentSize({x:0,y:0});return super.Vr()}dispose(){return super.dispose(),this.df.dispose(),this.nf.forEach(hi),this.ff.dispose(),this}setPointerEvents(t){return this.df.setPointerEvents(t),this}getPointerEvents(){return this.df.getPointerEvents()}}const Jo={lutElement:{},setLUT(t){return this.lutElement.mf(t),this},getLUT(){return this.lutElement.Us()},setLUTLength(t){return this.lutElement.bf(t),this},getLUTLength(){return this.lutElement.xf()},setLUTThickness(t){return this.lutElement.Mf(t),this},getLUTThickness(){return this.lutElement.wf()},setLookUpUnit(t){return this.lutElement._f(t),this},getLookUpUnit(){return this.lutElement.kf()},setLUTStepValueFormatter(t){return this.lutElement.Cf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Qo={...dn,...fn,background:mo,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},ao(t,i,s,e,h,r){const n=new To(t,i,s,this.background,e,h),o=n.addElement({ao:()=>new Zo(t,i,s,ri,h,this.alignment)}),a=Object.assign(n,Ro,{stylableTexts:[o]},Jo,{lutElement:o});return cn(a,h,r),this.applyStylers(a,h)}}.addStyler(un),Ko=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new G({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new G({angle:i,stops:n})},qo=Yo.addStyler((t=>t.addEventListener("switch",(i=>!0===i.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),ta={TextBox:No,CheckBox:Yo,ButtonBox:qo,PointableTextBox:Go,AxisTickMajor:Wo,AxisTickMinor:Xo,LUTRange:Qo};class ia extends Zr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Tf=h}}class sa extends Xr{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A,g){var v,y,p;super(l,a,n,f,A,{numeric:a.getWidth({x:f.xAxisNumericTicks,y:f.yAxisNumericTicks}),datetime:a.getWidth({x:f.xAxisDateTimeTicks,y:f.yAxisDateTimeTicks}),time:a.getWidth({x:f.xAxisTimeTicks,y:f.yAxisTimeTicks})},g),this.Ff=new Map,this.If=void 0,this.Lf=0,this.Pf=[],this.Bf=[],this.Df=!0,this.Ef=[],this.Rf=t=>{const i=this.Bf.indexOf(t);i>=0&&this.Bf.splice(i,1)},this.Of=t=>(this.Bf.indexOf(t)<0&&this.Bf.push(t),this.Rf),this.zf=!0,this.Vf=Ei(this.Ef),this.vf={relative:1},this.Nf=(t,i)=>i.getAllocatesAxisSpace()&&Fs(i.getValue(),this.gr,this.vr)?Math.max(t,i.update().fo()):t,this.Gf=t=>{const i=this.Pf.indexOf(t);-1!==i&&this.Pf.splice(i,1)},this.cs=He.onHover,this.P=new Pt,this.ah={},this.$f=n instanceof W?n:void 0,this.isX=this.lr.getWidth({x:!0,y:!1}),this.isY=this.lr.getHeight({x:!0,y:!1}),this.Uf=t,this.Yf=i,this.jf=e,this.Hf=h,this.chart=l,this.Wf=c,this.Xf=s,this.gs=r,"logarithmic"===g.type&&this.chart.gi.Ia(ln.Do),this.Mr=ha,d(this,this.Of),n.Zf=this,this.Jf=u,this.Qf=this.Jf>50?1:-1,this.Kf=(p=this.lr.toPoint(0,-this.Qf),Math.abs(p.x)>=Math.abs(p.y)?p.x>=0?Zt.Right:Zt.Left:p.y>=0?Zt.Up:Zt.Down),this.qf=o,this.tA=this.oi instanceof W?(new J).Qt(this.lr.toVec2(this.oi,this.qf)):(new Q).Qt(this.lr.toVec2(this.oi,this.qf)),this.iA=this.chart.sA,this.eA=(new J).Qt(this.lr.toVec2(this.lr.getWidth(this.iA),this.qf)),this.hA=this.Yf.Ah(this.tA).setPointerEvents(!1),this.rA=this.Xf.qe(this.iA).Ke(a.getWidth({x:f.xAxisOverlayStyle,y:f.yAxisOverlayStyle})).Qe($t).Li(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.nA=this.Xf.qe(this.iA).Ke(a.getWidth({x:f.xAxisZoomingBandFillStyle,y:f.yAxisZoomingBandFillStyle})).Qe(a.getWidth({x:f.xAxisZoomingBandStrokeStyle,y:f.yAxisZoomingBandStrokeStyle})).Li(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.qh=this.Xf.wn(this.tA).setPointerEvents(!1).Cr(this.lr.getTitleTextRotation(this.Qf)).Mn(as).xn(as),this.chart.gi.xs.bs(this.rA,(t=>this.rA.Fi(t)),{animationEnabled:this.zh}),this.P.Oi(this.rA),this.hA.fh(a.getWidth({x:f.xAxisStrokeStyle,y:f.yAxisStrokeStyle})),this.qh.Ke(a.getWidth({x:f.xAxisTitleFillStyle,y:f.yAxisTitleFillStyle})).kr(a.getWidth({x:f.xAxisTitleFont,y:f.yAxisTitleFont})),this.vs=r.ys(this,{}),this.Fr=this.vs.oA([this.qh]).Ls(f.effectsText),this.aA=null!==(v=a.getWidth({x:f.xAxisMarginAfterTicks,y:f.yAxisMarginAfterTicks}))&&void 0!==v?v:7,this.lA=null!==(y=a.getWidth({x:f.xAxisMarginAfterTitle,y:f.yAxisMarginAfterTitle}))&&void 0!==y?y:7}setHighlight(t){return this.chart.gi.xs.zs(this.rA,t),this.P.D("highlightchange",{highlight:is(t)}),this}getHighlight(){return this.chart.gi.xs.ks(this)}Sn(){return this.Gh}bn(){return void 0!==this.Br}setKeepTickLabelsInAxisBounds(t){return this.zf=t,this.chart.gi.Ps(),this}getKeepTickLabelsInAxisBounds(){return this.zf}setTickStrategy(t,i){return super.Ar(t,i)}getTickStrategy(){return this.Dh}addBand(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,h=s?this.Hf:this.jf,r=new kr(h,this.chart,this.Vf,this,this.tA,this.lr,this.bi,this.gs);return e&&this.chart.legend.add(r,e),this.Ef.push(r),r}addConstantLine(t){var i;const s=null===(i=null==t?void 0:t.onTop)||void 0===i||i,e=null==t?void 0:t.legend,h=s?this.Hf:this.jf,r=new Cr(h,this.chart,this.Vf,this,this.tA,this.lr,this.bi,this.gs);return e&&this.chart.legend.add(r,e),this.Ef.push(r),r}uA(t){this.Ef.forEach(t)}cA(t){return this.Ef.map(t)}getHighlighters(){return this.Ef}setThickness(t){return"number"==typeof t?(this.dA=t,this.fA=t):"object"==typeof t?(this.dA=t.min,this.fA=t.max):void 0===t&&(this.dA=void 0,this.fA=void 0),this.Gr=void 0,this.chart.gi.Ps(),this}getThickness(){return{min:this.dA,max:this.fA}}AA(){return this.Bf}Ur(t){return{}}Wr(t,i,s,e,h){var r;const n=i.Ph;return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.lr.toPoint(t,0),labelAlignment:this.lr.toPoint(n.getLabelAlignment(),null!==(r=n.labelAlignmentOpposite)&&void 0!==r?r:-this.Qf),labelOffset:{x:0,y:0},labelRotation:i.Ph.labelRotation}}Jr(t,i,s){if(!this.ci)return{gA:0,vA:0,yA:0,ticksInfo:i,updatedTicks:s};const e=this.qh&&this.qh.en().length>0&&this.getTitleFillStyle()!==xe,h=this.lr.getHeight(e?this.qh.Vr().bc():{x:0,y:0})+(e?this.lA:0);let r=0;this.Eh.forEach(((t,i)=>{const s=i.Ph.tickLength<0||i.Ph.tickPadding<0,e=i.Ph.tickLength+i.Ph.tickPadding;t.forEach((t=>{if(!t.Or.getVisible()||Me(t.Or.br()))return void(s||(r=Math.max(r,e)));const i=e+this.lr.getHeight(t.Or.Vr().bc());s||(r=Math.max(r,i))}))}));const n=this.Pf.reduce(this.Nf,0);r=Math.max(r,n),r+=this.aA;const o=oi(h+r,void 0!==this.dA?this.dA:0,void 0!==this.fA?this.fA:ps);return this.Lf=o,{gA:r,vA:h,yA:o,ticksInfo:i,updatedTicks:s}}tn(t,i){return new ia(i,t,this.Yf,this.tA,this.tA)}ir(){return this.tA}Ir(){if(this.Ff){for(const t of this.Ff)t[1].grid.dispose(),t[1].tick.dispose();this.Ff.clear()}super.Ir()}vn(t,i){return"linear"===this.cr.type||"linear-highPrecision"===this.cr.type?Ye(t,i,this.oi):je(t,i,this.oi)}pA(t,i){return i instanceof W?Ye:je}mn(t,i,s){if("logarithmic"!==this.cr.type){const e=this.oi.Zt(Math.abs(i-t));return{start:t+Math.sign(t-i)*s.start*e,end:i+Math.sign(i-t)*s.end*e}}const e=this.oi,h={start:e.G,end:e.$};e.H(t,i).es();const r={start:e.Jt(t,s.start*Math.sign(t-i)),end:e.Jt(i,s.end*Math.sign(i-t))};return e.H(h.start,h.end).es(),r}zr(t){var i,s;const e=this.Nr(),h=e.min,r=e.max,n=this.Eh.size>0,o=(null===(i=this.Gr)||void 0===i?void 0:i.physicalAxisSize)!==t.physicalAxisSize;let a=(null===(s=this.Gr)||void 0===s?void 0:s.min)!==h||this.Gr.max!==r;if(this.Gr&&this.$f){const t=this.$f.getPixelSize(),i=Math.abs(r-this.Gr.max),s=Math.abs(i/t),e=Math.abs(h-this.Gr.min),n=Math.abs(e/t);a=Math.max(s,n)>=10}return!(!n||o||a||t.anyPreviousAxisUpdated)}th(t){const i=this.getVisible()&&t.mA>0,s=this.oi.getInnerStart()<this.oi.getInnerEnd()?this.oi.getInnerStart():this.oi.getInnerEnd(),e=this.oi.getInnerEnd()>this.oi.getInnerStart()?this.oi.getInnerEnd():this.oi.getInnerStart();i||this.Ir();const h=this.hA.co().getThickness()*this.Qf/2,r=this.qf.getInnerInterval(),n=this.Jf/100*r,o=n+t.SA,a=r*this.Qf,l=o+h;if("Empty"!==this.Dh&&i){const i=this.oi.bt(),s=this.oi.xt(),e=Math.min(i,s),h=Math.max(i,s);for(const[i,s]of this.Eh){let r=this.Ff.get(i);if(!r)if(i.bh)r={grid:this.Uf[0].bA(this.tA).setPointerEvents(!1),tick:this.Uf[0].bA(this.tA).setPointerEvents(!1)};else if("xA"in i){const t=Array.from(this.Eh.keys()).filter((t=>"xA"in t)).reverse().indexOf(i),s=this.Uf[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");r={grid:s.bA(this.tA).setPointerEvents(!1),tick:s.bA(this.tA).setPointerEvents(!1)}}if(!r)continue;r.grid.zi(),r.tick.zi();const u=i.Ph,c=n-a*u.getGridStrokeLength(),d=l+u.getTickLength()*this.Qf,f=d+u.getTickPadding()*this.Qf;for(const[i,n]of s){const i=t.ticksInfo.get(n);if(!i)continue;const s={start:this.lr.toPoint(n.S,o),end:this.lr.toPoint(n.S,c)},a={start:this.lr.toPoint(n.S,l),end:this.lr.toPoint(n.S,d)};let u=0;if(this.zf){const t=n.Or.bc(),s=this.oi.Bt(i.keyValue)+this.lr.getWidth(i.labelOffset)+(-.5*this.lr.getWidth(i.labelAlignment)-.5)*this.lr.getWidth(t),r=s+this.lr.getWidth(t);u=r>h?h-r:s<e?e-s:0}n.Or.ih(this.lr.toPoint(this.oi.Jt(n.S,u),f)).Xl(i.labelAlignment).Cr(i.labelRotation),r.grid.jo().MA(s.start,s.end),r.tick.jo().MA(a.start,a.end)}r.grid.fh(i.Ph.getGridStrokeStyle()),r.tick.fh(i.Ph.getTickStyle()),this.Ff.set(i,r)}}const u=l,c=u+this.Qf*t.yA,d={start:this.lr.toVec2(this.oi.getInnerStart(),u),end:this.lr.toVec2(this.oi.getInnerEnd(),c)},f=tt(d.start,this.tA,this.iA),A=tt(d.end,this.tA,this.iA);this.hA.ph(this.lr.toPoint(s,o)).gh(this.lr.toPoint(e,o)).setVisible(i);let g=this.wA;g||(g="center-chart",("pixels"in this.vf||void 0!==this._A||void 0!==this.kA||1!==t.CA||this.isY)&&(g="center"));const v=o+t.gA*this.Qf;if(this.qh.ih(this.lr.toPoint(this.lr.getWidth(tt("center-chart"===g?{x:.5*this.iA.x.getInnerInterval(),y:.5*this.iA.y.getInnerInterval()}:"center"===g?Hs(Ws(f,A),.5):"start"===g?f:A,this.iA,this.tA)),v)).Xl(this.lr.toPoint("center-chart"===g||"center"===g?0:"start"===g?-1:1,-1*this.Qf)).setVisible(i),this.If){const i=this.Jf/100*r+t.SA,s=-this.Qf*r-t.SA,e={start:this.lr.toVec2(this.If.min,l+this.Qf*this.Lf),end:this.lr.toVec2(this.If.max,i+s)},h=tt(e.start,this.tA,this.iA),n=tt(e.end,this.tA,this.iA);this.nA.ih(h).X(Xs(n,h)).setVisible(!0)}else this.nA.setVisible(!1);this.rA.ih(f).X(Xs(A,f)).setVisible(i);for(const s of this.Pf)if(s.update().plot(i,o,a,t.SA,l),this.Xf.gi.mc&&s.getVisible()&&s.getMarkerVisible()&&s.oo.Kh===We.CursorTickMarker){const t=nn(s.oo);this.Xf.gi.mc.TA({...t,blacklist:[We.CursorResultTable,We.CursorTickMarker]})}for(const t of this.Ef)t.th();return{width:Math.abs(A.x-f.x),height:Math.abs(A.y-f.y),left:Math.min(f.x,A.x),right:this.iA.x.getInnerEnd()-Math.max(f.x,A.x),bottom:Math.min(f.y,A.y),top:this.iA.y.getInnerEnd()-Math.max(f.y,A.y)}}setLength(t){return this.vf=t,this.Gr=void 0,this.chart.gi.Ps(),this}getLength(){return this.vf}setMargins(t,i){return this._A=t,this.kA=i,this.Gr=void 0,this.chart.gi.Ps(),this}getMargins(){var t,i;return{start:null!==(t=this._A)&&void 0!==t?t:0,end:null!==(i=this.kA)&&void 0!==i?i:0}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.FA,...this.chart.IA,...this.chart.LA,...this.chart.PA].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.FA,...this.chart.IA,...this.chart.LA,...this.chart.PA].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}BA(){return this.Lf}DA(t,i){i=i||ta.AxisTickMajor;const s=new an(this,t?this.Uf[0]:this.Xf,this.Xf,this.oi,this.eA,this.eA,this.lr,this.Kf,this.Gf,this.bi,i).setTextFormatter(this.formatValue);return this.Pf.push(s),this.Gr=void 0,"other"===s.oo.lo&&(s.oo.Kh=We.CursorTickMarker),s}EA(t,i){const s=-this.lr.getWidth(i);this.pan(s)}pan(t,i){var s,e;const h=this.gr,r=this.vr,n=this.oi.Jt(h,t),o=this.oi.Jt(r,t);this.Dr(n,o,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1});const a=this.wr();if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(s=this.Er)||void 0===s?void 0:s.id)===Ir&&this.Vh&&a){const t=this.Sh({forStart:n,forEnd:o,allowIntervalLengthChange:!1});t&&(this.vr>this.gr&&this.vr>=t.end||this.vr<this.gr&&this.gr>=t.start)&&this.setStopped(!1)}if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&(null===(e=this.Er)||void 0===e?void 0:e.id)===Lr&&this.Vh&&a){const t=this.Sh({forStart:n,forEnd:o,allowIntervalLengthChange:!1});t&&(this.vr<this.gr&&this.vr<=t.end||this.vr>this.gr&&this.gr<=t.start)&&this.setStopped(!1)}}zoom(t,i){const s=this.oi.Bt(this.gr),e=this.oi.Bt(this.vr),h=this.oi.Bt(t),r=oi((h-s)/(e-s),0,1),n=.2*this.oi.Mt(),o=r*n*-i,a=(1-r)*n*i,l=this.oi.Jt(this.gr,o),u=this.oi.Jt(this.vr,a),c=this.pn();let d=l,f=u;if(void 0!==(null==c?void 0:c.intervalMax)&&Math.abs(f-d)>c.intervalMax){const t=c.intervalMax-Math.abs(f-d);d-=t*r,f+=t*(1-r)}if(void 0!==(null==c?void 0:c.intervalMin)&&Math.abs(f-d)<c.intervalMin){const t=c.intervalMin-Math.abs(f-d);d-=t*r,f+=t*(1-r)}this.Dr(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.DA(!0,t)}getCustomTicks(){return[...this.Pf]}setTitlePosition(t){return this.wA=t,this.chart.gi.Ps(),this}getTitlePosition(){var t;return null!==(t=this.wA)&&void 0!==t?t:"center-chart"}getUiPosition(){return this.Jf}setStrokeStyle(t){return this.hA.fh(t),this.Yf.Ps(),this}getStrokeStyle(){return this.hA.co()}getOverlayStyle(){return this.rA.br()}setOverlayStyle(t){return this.rA.Ke(t),this.Yf.Ps(),this}setAnimationHighlight(t){return this.chart.gi.xs.Vs(this.rA,t),this}getAnimationHighlight(){return this.chart.gi.xs.Ns(this.rA)}getMarginAfterTicks(){return this.aA}setMarginAfterTicks(t){return this.aA=t,this.Gr=void 0,this.Yf.Ps(),this}getMarginAfterTitle(){return this.lA}setMarginAfterTitle(t){return this.lA=t,this.Gr=void 0,this.Yf.Ps(),this}Y(){return this.oi.Y(),this}j(){return this.oi.j(),this}dispose(){var t;(null===(t=this.Er)||void 0===t?void 0:t.dispose)&&this.Er.dispose({axis:this}),this.hA.dispose(),this.rA.dispose(),this.nA.dispose(),this.qh.dispose(),this.Rr(hi);for(const t of this.Ff.values())t.grid.dispose(),t.tick.dispose();return this.Bf.slice().forEach(hi),this.Ef.slice().forEach(hi),this.Wf(this),this.P.D("dispose",{}),this}setVisible(t){this.hA.setVisible(t),this.qh.setVisible(t),this.rA.setVisible(t),this.Rr((i=>{i.Ts(t)}));for(const i of this.Ff.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.Gr=void 0,this.chart.gi.Ps(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.zh),this}setHighlightOnHover(t){return this.cs=t?He.onHover:He.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==He.noHighlighting}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}set draggable(t){this.P.draggable=t}get draggable(){return this.P.draggable}setUserInteractions(t){return this.ah=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.ah}}var ea;!function(t){t.Start="start",t.Center="center",t.End="end",t.CenterChart="center-chart"}(ea||(ea={}));const ha=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},ra={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>r(t,i)},na={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>r(i,t)},oa=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof sa&&"y"in t&&t.y instanceof sa),aa=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new wh,tickLength:7,tickStyle:new wh,tickPadding:0,labelFont:new P,labelFillStyle:new ke,labelAlignment:0,labelAlignmentOpposite:void 0,labelRotation:0,labelShadow:void 0});class la extends aa{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t,i){return this.withMutations((s=>s.set("labelAlignment",t).set("labelAlignmentOpposite",i)))}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const ua=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),ca=new la({labelFillStyle:xe,gridStrokeStyle:$t,tickStyle:$t}),da=t=>ua(t)&&Me(t.labelFillStyle)&&Ut(t.gridStrokeStyle)&&Ut(t.tickStyle),fa=1e6,Aa=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new la,minorTickStyle:new la,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ga=36e5,va=6e4,ya=1e3,pa=1e-6,ma=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=ga?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=ya?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Sa={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ga);i%=ga;const h=Math.floor(i/va);i%=va;const r=Math.floor(i/ya);return`${s}${Xi(e,2)}:${Xi(h,2)}:${Xi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ga);i%=ga;const h=Math.floor(i/va);i%=va;const r=Math.floor(i/ya);i%=ya;const n=Math.floor(i/1);return`${s}${Xi(e,2)}:${Xi(h,2)}:${Xi(r,2)}.${Xi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ga),h=Math.floor(i/va)%60,r=Math.floor(i/ya)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Xi(e,2)}:${Xi(h,2)}:${Xi(r,2)}.${Xi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ga),h=Math.floor(i/va)%60,r=Math.floor(i/ya)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Xi(e,2)}:${Xi(h,2)}:${Xi(r,2)}.${Xi(n,3)}${o}`}},ba={MajorHours12:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,4)},minor:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>zr(t,i,36e5,fa),fitKeyValues:Gr({},2,3,4,6)},defaultValueFormatter:Sa.hhmmss},MajorHours:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>{const h=ga;return t=Math.floor(t/(12*h))*h*12,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,6,12)},minor:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>zr(t,i,3e5,fa),fitKeyValues:Gr({},2,4,6)},defaultValueFormatter:Sa.hhmmss},MajorMinutes15:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/ga)*ga,Vr(t,i,9e5,void 0,fa)),fitKeyValues:Gr({ignore:"first"},2)},minor:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>zr(t,i,6e4,fa),fitKeyValues:Gr({},3,5)},defaultValueFormatter:Sa.hhmmss},MajorMinutes:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>{const h=va;return t=Math.floor(t/6e5)*h*10,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>zr(t,i,5e3,fa),fitKeyValues:Gr({},2,3,4,6)},defaultValueFormatter:Sa.hhmmss},MajorSeconds15:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,4)},minor:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>zr(t,i,1e3,fa),fitKeyValues:Gr({},3,5)},defaultValueFormatter:Sa.hhmmss},MajorSeconds:{major:{format:Sa.hhmmss,getKeyValues:(t,i,s,e)=>{const h=ya;return t=Math.floor(t/1e4)*h*10,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>zr(t,i,100,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmm},MajorMilliseconds100:{major:{format:Sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Vr(t,i,100,void 0,fa)),fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>zr(t,i,10,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmm},MajorMilliseconds10:{major:{format:Sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Vr(t,i,10,void 0,fa)),fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmm,getKeyValues:(t,i,s,e)=>zr(t,i,1,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmm},MajorMilliseconds:{major:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Vr(t,i,1,void 0,fa)),fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>zr(t,i,.1,fa),fitKeyValues:Gr({},2)},defaultValueFormatter:Sa.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Vr(t,i,.1,void 0,fa)),fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>zr(t,i,.01,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>zr(t,i,.001,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>zr(t,i,100*pa,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*pa;return t=Math.floor(t/.001)*h*10,Vr(t,i,h,void 0,fa)},fitKeyValues:Gr({ignore:"first"},2,5)},minor:{format:Sa.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>zr(t,i,10*pa,fa),fitKeyValues:Gr({},2,3,5)},defaultValueFormatter:Sa.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class xa extends Aa{_h(t){const i=this.timeOrigin||0,s=[{Or:"Major ticks",xA:0,Ph:this.majorTickStyle,Mh:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=ma(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ba[h].major.format)(t+i,s,e)},Tn:(t,i,s,e,h)=>{const r=ma(s,e);return(0,ba[r].major.getKeyValues)(t,i,s,e,h)},hr:{hn:(t,i,s,e,h,r)=>{const n=ma(h,r),o=ba[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)},nn:"hide-label"},Fn:void 0}];return ua(this.minorTickStyle)&&s.push({Or:"Minor ticks",xA:1,Ph:this.minorTickStyle,Mh:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=ma(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ba[h].minor.format)(t+i,s,e)},Tn:(t,i,s,e,h)=>{const r=ma(s,e);return(0,ba[r].minor.getKeyValues)(t,i,s,e,h)},hr:{hn:(t,i,s,e,h,r)=>{const n=ma(h,r),o=ba[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)},nn:"hide-tick"},Fn:void 0}),{kh:[],Ch:s,Th:this.cursorFormatter||((t,s,e)=>{const h=ma(Math.min(s.start,s.end),Math.max(s.start,s.end));return ba[h].defaultValueFormatter(t+i,s,e)}),Fh:1e-4,Ih:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Ma=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},wa=(t,i,s,...e)=>Ma(-1,t,i,s,e),_a=(t,i,s,...e)=>Ma(-1,t,i,s,e),ka=(t,i,s,...e)=>Ma(0,t,i,s,e),Ca=(t,i,...s)=>Ma(1,t,i,void 0,s),Ta=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Fa=[{label:"NanoSecond10",unit:1e-5,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"NanoSecond100",unit:1e-4,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>1e-4*Math.floor(t/1e-4)},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MicroSecond1",unit:.001,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.001*Math.floor(t/.001)},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MicroSecond10",unit:.01,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.01*Math.floor(t/.01)},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MicroSecond100",unit:.1,irregular:!1,greatTicks:{getReferenceKeyValue:(t,i)=>t=>.1*Math.floor(t/.1)},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:{getReferenceKeyValue:wa("millis",1,(t=>t.millis%1==0),"millis")},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:wa("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:wa("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Gr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:wa("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:$r(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:Gr(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:wa("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:$r(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:Gr(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:wa("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:$r(3,6,12)},minorTicks:{amount:8,fitFunction:Gr(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:wa("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Gr({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Gr({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Ta(-1),getNextKeyValueIncludingRef:Ta(0),getNextKeyValue:Ta(1),greatTicks:!0,majorTicks:{fitFunction:Gr(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:_a("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ka("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:Ca("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Gr(void 0,2,3,6)},minorTicks:{fitFunction:Gr(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:_a("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ka("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ca("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Gr({ignore:"first"},2,5)},minorTicks:{fitFunction:Gr(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:_a("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ka("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ca("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Gr(void 0,2,4)},minorTicks:{fitFunction:Gr(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:_a("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ka("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ca("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:_a("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ka("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ca("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Ia=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:Fa.length-1;h?t<Fa.length:t>=0;h?t+=1:t-=1){const i=r/Fa[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=Fa[t];break}}return n},La=(t,i,s)=>{let e=Ia(i,s,void 0,2,!0);if(void 0!==e&&0===Fa.indexOf(e)&&(e=Fa[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Fa[Fa.indexOf(e)-h];return void 0===r?Fa[0]:r},Pa=(t,i,s)=>(e,h,r,n)=>{const o=La("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Fa.indexOf(o)<=Fa.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=Nr(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=Vr(e,h,o.unit,s,void 0)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||Fs(d,l,u)?[a]:[d]:void 0!==d&&Fs(d,l,u)?[d]:[u]},Ba=(t,i,s)=>(e,h,r,n)=>{const o=La(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=Nr(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Vr(e,h,o.unit,t,void 0)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;(h-t)/(i-t)<.98;)if(e.push(h),r+=1,h=t+r*s,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=e(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Fa[Fa.indexOf(t)+1]})(o);if(void 0===t)return[];a=zr(e,h,t.unit/o.minorTicks.amount,void 0)}}return a},Da=t=>(i,s,e,h,r,n)=>{const o=La(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Ea=i({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new la,majorTickStyle:new la,minorTickStyle:new la,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Sa.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Sa.hhmmssmmm(t-i.getTime())},formatMicrosecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Sa.hhmmssmmmuuu(t-i.getTime())},formatNanosecondRange:(t,i,s,e)=>{if(e){const t=new Date(e.valueShifted);return t.setHours(0,0,0,0),Sa.hhmmssmmmuuunnn(e.valueShifted-t.getTime())}{const i=new Date(t);return i.setHours(0,0,0,0),Sa.hhmmssmmmuuunnn(t-i.getTime())}},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ra extends Ea{_h(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Fa.map((i=>{const s=((t,i,s)=>{switch(s.label){case"NanoSecond10":case"NanoSecond100":return t.formatNanosecondRange;case"MicroSecond1":case"MicroSecond10":case"MicroSecond100":return t.formatMicrosecondRange;case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;ti.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r,a=r+i;const l=n.start,u=n.end,c=l>u,d=La(t,c?u:l,c?l:u);if(void 0===d)return h(a);if("great"===t){const t=ni(r,"left"===s?l:u);let e;if(e=!1===t?r:!1===d.irregular?"left"===s&&!1===c||"right"===s&&!0===c?d.greatTicks.getReferenceKeyValue(i,this.utc)(r):d.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*d.unit):"left"===s&&!1===c||"right"===s&&!0===c?d.getPrevKeyValue(i,this.utc)(r):d.getNextKeyValue(i,this.utc)(r),o=e,a=e+i,"right"===s&&!0===t)return"";if("right"===s&&"Week"===d.label)return""}const f=e.get(t);if(void 0===f)return h(a,this.locale);const A=f[Fa.indexOf(d)];return void 0===A?"":"function"==typeof A?A(a,n,this.locale,{valueShifted:o,shiftOrigin:this.dateOrigin?this.dateOrigin.getTime():0}):A.format(a)},n=[],o=[{Or:"Great ticks (directive)",xA:0,wh:!0,Tn:Ba("great",i,this.utc),Fn:void 0},{Or:"Major ticks",xA:1,Ph:this.majorTickStyle,Mh:r("major"),Tn:Ba("major",i,this.utc),hr:{hn:Da("major"),nn:"hide-tick"},Fn:void 0}];da(this.greatTickStyle)||n.push({Or:"Great ticks (left)",Ph:this.greatTickStyle.setLabelAlignment(-1),Mh:r("great","left"),Tn:Pa(i,this.utc,"left"),bh:!0,ln:!1}),da(this.minorTickStyle)||o.push({Or:"Minor ticks",xA:2,Ph:this.minorTickStyle,Mh:r("minor"),Tn:Ba("minor",i,this.utc),hr:{hn:Da("minor"),rr:(t,i,s,e,h,r)=>{const n=La("minor",h,r);return!n||"Week"!==n.label},nn:"hide-tick"},Fn:void 0,rn:2});const a=this.cursorFormatter;return{kh:n,Ch:o,Th:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=Ia(Math.min(s.start,s.end),Math.max(s.start,s.end),void 0,1,!0),r=h&&h.unit<=.1,n=h&&h.unit<=100,o=h&&h.unit<=6e4,a=new Date(i+t),l=new Date(i+t);l.setHours(0,0,0,0);const u=r?this.formatNanosecondRange:n?this.formatMicrosecondRange:o?this.formatMillisecondRange:Sa.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(a)} ${u(a.getTime()-l.getTime(),s,this.locale,{valueShifted:t,shiftOrigin:i})}`},Fh:10**-5,Ih:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const Oa=(t,i)=>(s,e,h,r,n)=>{const o=e-s;if(i){let i=5;n<=125?i=2:n<=250?i=3:n<=500&&(i=4);const h=Math.log10(o/i),r=Math.floor(2*h)/2;let a;a=r%1==0?10**(r-t):10**Math.ceil(r)/2;const l=1/a;a=Math.round(a*l)/l;const u=Math.round(Math.floor(s/(10*a))*a*10*l)/l;return Vr(u,e,a,void 0,l)}let a=o/5;const l=1/a;return a=Math.round(a*l)/l,zr(s,e,a,l)},za=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):2===i?t.filter(((t,i)=>i%10==0)):void 0,Va=(t,i,s,e,h,r)=>{},Na=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Ga=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,$a=(t,i)=>{const s=ne(t),e=oe(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ua=i({cursorFormatter:void 0,extremeTickStyle:new la,majorTickStyle:new la,minorTickStyle:new la,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class Ya extends Ua{_h(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>de.LogarithmicNoExponents(i,s,void 0,t.base):de.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>de.LogarithmicNoExponents(i,s,void 0,t.base):de.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>de.LogarithmicNoExponents(i,s,void 0,t.base):de.Numeric),r=[],n=[];da(this.extremeTickStyle)||r.push({Or:"Extreme ticks",Ph:this.extremeTickStyle,Mh:void 0===i?s:(t,e,h)=>s(i+t,e,h),Tn:Or,bh:!0,ln:!0});const o={Or:"Major ticks",xA:0,Ph:this.majorTickStyle,Mh:void 0===i?e:(t,s,h)=>e(i+t,s,h),Tn:"logarithmic"===t.type?$a(t.base,!0):Oa(0,!0),hr:{nn:"hide-label",hn:"logarithmic"===t.type?Na:za},Fn:void 0};if(n.push(o),!da(this.minorTickStyle)){const s="logarithmic"===t.type?$a(t.base,!1):Oa(1,!1);n.push({Or:"Minor ticks",xA:1,Ph:this.minorTickStyle,Mh:void 0===i?h:(t,s,e)=>h(i+t,s,e),Tn:(t,i,e,h,r)=>s(t,i,e,h,r),hr:{nn:"hide-tick",hn:"logarithmic"===t.type?Ga:Va},Fn:80})}const a=this.cursorFormatter?this.cursorFormatter:de.Numeric;return{kh:r,Ch:n,Th:void 0===i?a:(t,s,e)=>a(i+t,s,e),Fh:1e-9,Ih:void 0,Hr:this.fallBackToExtremeTicksAutomatically?o:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==ca?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const ja=(t,i,s="image/png",e,h=1)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const r=t.captureFrame(s,e,void 0,h);if("image/png"!==s&&r.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(ti.navigator.msSaveBlob)ti.navigator.msSaveBlob(r,i);else{const t=ti.document.createElement("a");ti.document.body.appendChild(t);const s=ti.URL.createObjectURL(r);t.href=s,t.download=i,t.click(),setTimeout((()=>{ti.URL.revokeObjectURL(s),ti.document.body.removeChild(t)}),0)}},Ha=(t,i,s,e,h,r)=>{const n=t.ao(i,s,e,h,r,!0);return n.setDraggingMode(Xt.draggable),n},Wa=(t,i)=>{if("relative"===t)return i;if(t instanceof Z)return t;const s=t.x instanceof Xr?t.x.oi:t.x.x,e=t.y instanceof Xr?t.y.oi:t.y.y;return Be(s,e)},Xa=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=oa(n)?n:Re(n)?e:void 0;if(o&&De(s)){const t=tt(r,o,h.oi);return h.il({engineX:t.x,engineY:t.y})}if(o&&Re(s))return tt(r,o,e);if(o&&oa(s))return tt(r,o,s)}else{const s=t;if(Re(i)){const t=h.tl(s);return tt({x:t.engineX,y:t.engineY},h.oi,e)}if(oa(i)){const t=i,e=h.tl(s);return tt({x:e.engineX,y:e.engineY},h.oi,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Za{constructor(t){this.RA=[],this.OA=t}zA(){return this.VA(),{add:()=>this.NA(),finishPlot:()=>{this.GA()}}}NA(){let t=this.RA.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.OA()},this.RA.push(t)),t.isFree=!1,t.shape}VA(){this.RA.forEach((t=>{t.isFree=!0}))}GA(){this.RA.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.RA.splice(this.RA.indexOf(t),1)}))}$A(){this.RA.forEach((t=>t.shape.dispose())),this.RA.length=0}Vn(){return this.RA.map((t=>t.shape))}}const Ja=t=>{const i=t.layer,s=t.scale,e=t.panel,h=t.legend;let r;const n=e.gi.xs,o=new Map,a=(t,i,s,e)=>{var h;o.has(t)||o.set(t,[]),null===(h=o.get(t))||void 0===h||h.push({eventType:i,callback:s}),t.addEventListener(i,s,e)},l=()=>{for(const[t,i]of o.entries())for(const{eventType:s,callback:e}of i)t.removeEventListener(s,e);o.clear()},u=[];let c=[],d=[];const f=new Za((()=>i.wn(s).xn(as).Mn(as))),A=new Za((()=>i.Od(s))),g=i.pd(s).Ke(e.getTheme().uiBackgroundFillStyle).setVisible(!1),v=g.jo().bd({extent:8,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}),y=e.getTheme().uiButtonFillStyle,p=e.getTheme().uiButtonFillStyleHidden,m=e.getTheme().uiTextFillStyle,S=e.getTheme().uiTextFillStyleHidden,b=e.getTheme().uiTextFont,x=e.getTheme().uiBackgroundFillStyle,M=e.getTheme().uiBackgroundStrokeStyle,w=e.getTheme().uiButtonStrokeStyle,_=()=>{g.setVisible(!1),u.forEach((t=>t.setVisible(!1).Vr())),c.forEach((t=>t.setVisible(!1))),d.forEach((t=>t.setVisible(!1)))},k=r=>{var o,c,d,g;l(),r.titleEvents.zi(),r.backgroundEvents.zi(),u.forEach((t=>t.dispose())),u.length=0;const v=f.zA(),x=A.zA(),M=null!==(o=r.marginInner)&&void 0!==o?o:0,_=r.marginOuter,k=r.chartPadding,C={left:_.left+k.left,right:_.right+k.right,top:_.top+k.top,bottom:_.bottom+k.bottom},T=e.getSizePixels();let F,I={x:-1,y:1};if("number"==typeof r.position)switch(r.position){case sl.TopLeft:case sl.TopCenter:case sl.TopRight:case sl.BottomLeft:case sl.BottomCenter:case sl.BottomRight:F={x:T.x-r.chartTitleSpace.left-r.chartTitleSpace.right-C.left-C.right,y:T.y-r.chartTitleSpace.top-r.chartTitleSpace.bottom-C.top-C.bottom};break;default:F={x:T.x-C.left-C.right,y:T.y-C.top-C.bottom}}else r.position.origin&&(I=r.position.origin),F={x:T.x-r.position.x*(I.x+1)/2,y:r.position.y*(I.y+1)/2};const L=void 0!==r.orientation?r.orientation===el.Vertical:"number"==typeof r.position&&r.position<6,B=null!==(c=r.padding)&&void 0!==c?c:{left:5,right:5,top:5,bottom:5},D=B.top+B.bottom,E=B.left+B.right,R=null!==(d=r.entryMargin)&&void 0!==d?d:10,O={left:R,right:R,top:R,bottom:R},z=t.panel.getTheme().uiButtonSize;let V=0,N=0,G=0,$=0;const U=[],Y=r.title?v.add().Xl({x:-1,y:0}).qr(r.title).kr(r.titleFont?new P(r.titleFont):b.setWeight("bold")).Ke(null!==(g=r.titleFillStyle)&&void 0!==g?g:m).xn(O):void 0;if(Y){const t=Y.setVisible(!0).Vr().bc();G=L?t.y:t.x+R,$=L?t.x:t.y,V=t.x,N=t.y,r.titleEvents.Oi(Y)}const j=r.entries.filter((t=>!1!==t.options.show)),H=j.map(((t,r)=>{var o,l;const c=void 0!==t.options.text?t.options.text:t.component&&"getName"in t.component?t.component.getName():"",d=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.textFillStyle?t.options.textFillStyle:m:S:void 0!==t.options.textFillStyle?t.options.textFillStyle:m,f=t.options.textFont?new P(t.options.textFont):b,A=v.add().Xl({x:-1,y:0}).qr(c).Ke(d).kr(f).xn(O),g=void 0!==t.options.buttonShape?t.options.buttonShape:t.component&&t.component.Ys?t.component.Ys():Qe.Circle,M=Ph(g);M&&g.Zs instanceof Image&&a(g.Zs,"load",(()=>{h.Os()}));const _=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.eh?ji(e.getTheme(),t.options.matchStyleExactly||!1,t.component.eh()):y:p:void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.eh?ji(e.getTheme(),t.options.matchStyleExactly||!1,t.component.eh()):y,k=null!==(o=t.options.buttonStrokeStyle)&&void 0!==o?o:w,C=void 0!==t.options.buttonSize?t.options.buttonSize:M?Math.max(g._t().x,g._t().y):c?z:0,T=void 0!==t.options.buttonRotation?t.options.buttonRotation:t.component&&t.component.getPointRotation?t.component.getPointRotation():0,I=x.add().UA({x:-1,y:0}).jd(C).Nd(T);_&&I.Ed(_),void 0!==g&&I.zd(g),I.Ud(k);const B=null===t.options.lut?void 0:t.options.lut?t.options.lut:t.component&&t.component.Us?null===(l=t.component.Us())||void 0===l?void 0:l.lut:void 0;let Y;B&&(Y=new Zo(i,s,s,(()=>{}),e.getTheme(),L?"vertical":"horizontal").mf(B),u.push(Y),Y.mf(B).setVisible(!0).Xl(L?"vertical":"horizontal").setFillStyle(d).setFont(f).setMargin(R).pf(as),t.options.lutLength&&Y.bf(t.options.lutLength),t.options.lutThickness&&Y.Mf(t.options.lutThickness),t.options.lutDisplayProportionalSteps&&Y.setLUTDisplayProportionalSteps(t.options.lutDisplayProportionalSteps),t.options.lutStepValueFormatter&&Y.Cf(t.options.lutStepValueFormatter),B.units&&Y._f(B.units)),n.bs(A,(t=>{A.Fi(t)}),{animationEnabled:!0}),n.bs(I,(t=>{I.Fi(t)}),{animationEnabled:!0});const H=t.component&&Jt(t.component)?t.component:void 0;H&&a(H,"highlightchange",(t=>{const i=t.highlight;A.Fi(i),I.Fi(i),e.gi.Ps()})),[A,I].forEach((i=>{i&&(a(i,"pointerenter",(()=>{!1!==t.options.highlight&&(H&&H.setHighlight(!0),A.Fi(1),I.Fi(1))})),a(i,"pointerleave",(()=>{H&&H.setHighlight(!1),A.Fi(0),I.Fi(0)})))})),[A,I,Y].forEach((i=>{i&&(a(i,"pointerenter",(()=>{e.engine.setMouseStyle(gr.Point)})),a(i,"pointerleave",(()=>{e.engine.clearMouseStyle()})),t.options.events&&Object.entries(t.options.events).forEach((([s,e])=>{a(i,s,(i=>e(i,{entry:t,allEntries:j})))})),a(i,"click",(()=>{h.Os(),e.gi.Ps()})))}));const W=A.setVisible(!0).Vr().bc();let X={length:0,thickness:0};if(Y){const t=Y.Vr().getSize();X=L?{length:t.y,thickness:t.x}:{length:t.x,thickness:t.y}}const Z=L?{width:(C?R+C:0)+Math.max(W.x,X.thickness),height:Math.max(C,W.y)+X.length}:{width:(C?R+C:0)+W.x+X.length,height:Math.max(C,W.y,X.thickness)};return V=Math.max(Z.width,V),N=Math.max(Z.height,N),(L?G+Z.height<F.y-D:G+Z.width<F.x-E)?($=L?Math.max(Z.width,$):Math.max(Z.height,$),G+=L?Z.height:Z.width,r===j.length-1&&U.push(L?{width:$,height:0===U.length?G:F.y-D}:{width:0===U.length?G:F.x-E,height:$})):(U.push(L?{width:$,height:F.y-D}:{width:F.x-E,height:$}),G=L?Z.height:Z.width,r===j.length-1&&U.push(L?{width:Z.width,height:F.y-D}:{width:F.x-E,height:Z.height}),$=L?Z.width:Z.height),{text:c?A:void 0,button:c&&0!==C?I:void 0,buttonSize:C,lut:Y}}));return{entries:H,sectionSizes:U,legendTitle:Y,isVertical:L,availableChartSize:F,horizontalLegendPadding:E,verticalLegendPadding:D,marginInner:M,totalMarginOuter:C,maxEntryWidth:V,maxEntryHeight:N,chartSize:T,legendSpace:{left:0,right:0,top:0,bottom:0},origin:I,legendPadding:B,entryMarginValue:R,shapeProviderText:v,shapeProviderMarker:x}};return{update:t=>{if(!t.visible||t.renderOnTop)return as;const i=k(t);r=i;const{entries:s,sectionSizes:e,isVertical:h,availableChartSize:n,horizontalLegendPadding:o,verticalLegendPadding:a,marginInner:l,totalMarginOuter:u,maxEntryWidth:c,maxEntryHeight:d,legendSpace:f,shapeProviderText:A,shapeProviderMarker:g}=i;if(A.finishPlot(),g.finishPlot(),0===s.length&&0===e.length)return as;const v=Ka(h,e,o,a,n);if(t.autoHideThreshold&&Qa(t.autoHideThreshold,v,n,h,c,d))return as;const y={...f},p=t.chartPadding,m=Math.max(0,u.left-p.left),S=Math.max(0,u.right-p.right),b=Math.max(0,u.top-p.top),x=Math.max(0,u.bottom-p.bottom);switch(t.position){case sl.RightTop:case sl.RightCenter:case sl.RightBottom:y.right=v.width+l+S;break;case sl.LeftTop:case sl.LeftCenter:case sl.LeftBottom:y.left=v.width+l+m;break;case sl.TopLeft:case sl.TopCenter:case sl.TopRight:y.top=v.height+l+b;break;case sl.BottomLeft:case sl.BottomCenter:case sl.BottomRight:y.bottom=v.height+l+x}return y},plot:t=>{var i;if(!t.visible)return void _();const s=r||k(t);r=void 0;const{entries:e,sectionSizes:h,legendTitle:n,isVertical:o,availableChartSize:a,horizontalLegendPadding:l,verticalLegendPadding:u,chartSize:y,maxEntryWidth:p,maxEntryHeight:m,origin:S,legendPadding:b,entryMarginValue:w,shapeProviderText:C,shapeProviderMarker:T,totalMarginOuter:F}=s;if(c=f.Vn(),d=A.Vn(),0===e.length&&0===h.length)return _(),C.finishPlot(),void T.finishPlot();const I=Ka(o,h,l,u,a);if(t.autoHideThreshold&&Qa(t.autoHideThreshold,I,a,o,p,m))return _(),C.finishPlot(),void T.finishPlot();const L=(S.x+1)*I.width/2,P=(S.y+1)*I.height/2;c.forEach((t=>t.setVisible(!0))),d.forEach((t=>t.setVisible(!0)));const B=t.chartTitleSpace;let D={leftBottom:{x:0,y:0},leftTop:{x:0,y:0},rightTop:{x:0,y:0},rightBottom:{x:0,y:0}};switch(t.position){case sl.RightTop:case sl.RightCenter:case sl.RightBottom:D={leftBottom:{x:y.x-I.width-F.right,y:0+F.bottom},leftTop:{x:y.x-I.width-F.right,y:y.y-F.top},rightTop:{x:y.x-F.right,y:y.y-F.top},rightBottom:{x:y.x-F.right,y:0+F.bottom}};break;case sl.LeftTop:case sl.LeftCenter:case sl.LeftBottom:D={leftBottom:{x:0+F.left,y:0+F.bottom},leftTop:{x:0+F.left,y:y.y-F.top},rightTop:{x:I.width+F.left,y:y.y-F.top},rightBottom:{x:I.width+F.left,y:0+F.bottom}};break;case sl.TopLeft:case sl.TopCenter:case sl.TopRight:D={leftBottom:{x:0+F.left,y:y.y-I.height-F.top-B.top},leftTop:{x:0+F.left,y:y.y-F.top-B.top},rightTop:{x:y.x-F.right,y:y.y-F.top-B.top},rightBottom:{x:y.x-F.right,y:y.y-I.height-F.top-B.top}};break;case sl.BottomLeft:case sl.BottomCenter:case sl.BottomRight:D={leftBottom:{x:0+F.left,y:0+F.bottom+B.bottom},leftTop:{x:0+F.left,y:I.height+F.bottom+B.bottom},rightTop:{x:y.x-F.right,y:I.height+F.bottom+B.bottom},rightBottom:{x:y.x-F.right,y:0+F.bottom+B.bottom}};break;default:D={leftBottom:{x:t.position.x-L,y:t.position.y-P},leftTop:{x:t.position.x-L,y:t.position.y-P+I.height},rightTop:{x:t.position.x-L+I.width,y:t.position.y-P+I.height},rightBottom:{x:t.position.x-L+I.width,y:t.position.y-P}}}if(t.backgroundVisible){let i={x:0,y:0};const s=I.width,e=I.height;switch(t.position){case sl.RightTop:i={x:y.x-I.width-F.right,y:y.y-I.height-F.top};break;case sl.RightCenter:i={x:y.x-I.width-F.right,y:y.y/2-I.height/2-F.top/2+F.bottom/2};break;case sl.RightBottom:i={x:y.x-I.width-F.right,y:0+F.bottom};break;case sl.LeftTop:i={x:0+F.left,y:y.y-I.height-F.top};break;case sl.LeftCenter:i={x:0+F.left,y:y.y/2-I.height/2-F.top/2+F.bottom/2};break;case sl.LeftBottom:i={x:0+F.left,y:0+F.bottom};break;case sl.TopLeft:i={x:0+F.left,y:y.y-I.height-F.top-B.top};break;case sl.TopCenter:i={x:y.x/2-I.width/2+F.left/2-F.right/2,y:y.y-I.height-F.top-B.top};break;case sl.TopRight:i={x:y.x-I.width-F.right,y:y.y-I.height-F.top-B.top};break;case sl.BottomLeft:i={x:0+F.left,y:0+F.bottom+B.bottom};break;case sl.BottomCenter:i={x:y.x/2-I.width/2+F.left/2-F.right/2,y:0+F.bottom+B.bottom};break;case sl.BottomRight:i={x:y.x-I.width-F.right,y:0+F.bottom+B.bottom};break;default:i={x:t.position.x-L,y:t.position.y-P}}v.xd(i.x,i.y,i.x+s,i.y+e)}t.backgroundEvents.Oi(g),g.setVisible(null===(i=t.backgroundVisible)||void 0===i||i),g.Ke(void 0!==t.backgroundFillStyle?t.backgroundFillStyle:x),g.Qe(void 0!==t.backgroundStrokeStyle?t.backgroundStrokeStyle:M);let E={x:0,y:0};switch(t.position){case sl.LeftTop:case sl.RightTop:E={x:D.leftTop.x,y:D.leftTop.y};break;case sl.LeftCenter:case sl.RightCenter:E={x:D.leftBottom.x,y:D.leftBottom.y+(D.leftTop.y-D.leftBottom.y)/2+I.height/2};break;case sl.LeftBottom:case sl.RightBottom:E={x:D.leftBottom.x,y:D.leftBottom.y+I.height};break;case sl.TopLeft:case sl.BottomLeft:E={x:D.leftTop.x,y:D.leftTop.y};break;case sl.TopCenter:case sl.BottomCenter:E={x:D.leftBottom.x+(D.rightBottom.x-D.leftBottom.x)/2-I.width/2,y:D.leftTop.y};break;case sl.TopRight:case sl.BottomRight:E={x:D.rightTop.x-I.width,y:D.leftTop.y};break;default:E={x:D.leftTop.x,y:D.leftTop.y}}E={x:E.x+b.left,y:E.y-b.top};const R={...E};let O=0,z=0;const V=[];let N=[];if(n){const t=n.bc();n.ih({...E,y:E.y-t.y/2}),z+=o?t.y:t.x+w,E=o?{...E,y:E.y-t.y}:{...E,x:E.x+t.x+w}}e.forEach((t=>{const i=t.text?t.text.bc():{x:0,y:0},s=t.button?t.buttonSize:0,e=t.lut||void 0,r=qa(i,s,o,w,t.lut);z+r>=(o?h[O].height:h[O].width)&&h.length-1>O&&(V.push(N),N=[],O+=1,z=0),N.push({entry:t,textSize:i,buttonSize:s,lut:e,entryLength:r}),z+=r})),N.length>0&&V.push(N);const G=V.map(((t,i)=>{const s=t.reduce(((t,i)=>t+i.entryLength),0);if(0===i&&n){const t=n.bc();return s+(o?t.y:t.x+w)}return s}));V.forEach(((i,s)=>{let e;const r=G[s],a=V.length>1;if(0===s)if(a)if(o){const t=h[s].height-r;e={x:R.x,y:R.y-t/2}}else{const t=h[s].width-r;e={x:R.x+t/2,y:R.y}}else e={...R};else if(o){const i=h.slice(0,s).reduce(((t,i)=>t+i.width),0),n=h[s].height;let o;if(a){const i=n-r;let s;switch(t.position){case sl.LeftTop:case sl.RightTop:s=D.leftTop.y-b.top;break;case sl.LeftCenter:case sl.RightCenter:s=D.leftBottom.y+(D.leftTop.y-D.leftBottom.y)/2+n/2;break;case sl.LeftBottom:case sl.RightBottom:s=D.leftBottom.y+n+b.bottom;break;default:s=R.y}o=s-i/2}else o=R.y;e={x:R.x+i,y:o}}else{const i=h.slice(0,s).reduce(((t,i)=>t+i.height),0),n=h[s].width;let o;if(a){const i=n-r;let s;switch(t.position){case sl.TopLeft:case sl.BottomLeft:s=D.leftTop.x+b.left;break;case sl.TopCenter:case sl.BottomCenter:s=D.leftBottom.x+(D.rightBottom.x-D.leftBottom.x)/2-n/2;break;case sl.TopRight:case sl.BottomRight:s=D.rightTop.x-n-b.right;break;default:s=R.x}o=s+i/2}else o=R.x;e={x:o,y:R.y-i}}if(0===s&&n){const t=n.bc();o?(n.ih({x:e.x,y:e.y-t.y/2}),e={...e,y:e.y-t.y}):(n.ih({x:e.x,y:e.y-t.y/2}),e={...e,x:e.x+t.x+w})}let l={...e};i.forEach((t=>{tl(l,t.entry.button,t.entry.text,t.lut,t.textSize,t.buttonSize,o,w),l=o?{...l,y:l.y-t.entryLength}:{...l,x:l.x+t.entryLength}}))})),C.finishPlot(),T.finishPlot()},dispose:()=>{l(),f.$A(),A.$A(),g.dispose(),u.forEach((t=>t.dispose()))}}},Qa=(t,i,s,e,h,r)=>(e?Math.ceil(i.width)>=Math.ceil(s.x*t):Math.ceil(i.height)>=Math.ceil(s.y*t))||h>s.x||r>s.y,Ka=(t,i,s,e,h)=>t?{width:i.reduce(((t,i)=>t+i.width),0)+s,height:i.length>1?h.y:i[0].height+e}:{width:i.length>1?h.x:i[0].width+s,height:i.reduce(((t,i)=>t+i.height),0)+e},qa=(t,i,s,e=0,h)=>{if(h){const r=h.Vr().getSize(),n=s?{length:r.y,thickness:r.x}:{length:r.x,thickness:r.y};return s?Math.max(i,t.y)+n.length:(i?e+i:0)+t.x+n.length}return s?Math.max(i,t.y):(i?e+i:0)+t.x},tl=(t,i,s,e,h,r,n,o=0)=>{let a,l;if(h.y>r?(a={x:t.x+(r?o:0),y:t.y-h.y/2},l={x:a.x+r,y:t.y-h.y/2}):(a={x:t.x+(r?o:0),y:t.y-r/2},l={x:a.x+r,y:t.y-r/2}),i&&i.Dd(new ro({schema:{x:{},y:{}}}).appendSample(a),{x:"x",y:"y"}),s&&s.ih(l),e){const i=e.Vr().getSize(),s=n?{length:i.y,thickness:i.x}:{length:i.x,thickness:i.y},o=n?{x:l.x+s.thickness/2,y:t.y-Math.max(r,h.y)-s.length/2}:{x:l.x+h.x+s.length/2,y:t.y-s.thickness/2};e.setPosition(o),e.th()}},il=t=>"Us"in t;var sl,el;!function(t){t[t.RightTop=0]="RightTop",t[t.RightCenter=1]="RightCenter",t[t.RightBottom=2]="RightBottom",t[t.LeftTop=3]="LeftTop",t[t.LeftCenter=4]="LeftCenter",t[t.LeftBottom=5]="LeftBottom",t[t.TopLeft=6]="TopLeft",t[t.TopCenter=7]="TopCenter",t[t.TopRight=8]="TopRight",t[t.BottomLeft=9]="BottomLeft",t[t.BottomCenter=10]="BottomCenter",t[t.BottomRight=11]="BottomRight"}(sl||(sl={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(el||(el={}));const hl={toggleIndividualVisibility:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;const s=i.entry.component.getVisible();i.entry.component.setVisible(!s)},focusClicked:(t,i)=>{if(!i.entry.component||!i.entry.component.getVisible||!i.entry.component.setVisible)return;let s=!1;i.allEntries.forEach((t=>{t.component&&t.component.getVisible&&t.component.getVisible()&&t!==i.entry&&(s=!0)})),i.allEntries.forEach((t=>{t.component&&t.component.setVisible&&t.component.setVisible(!s)})),i.entry.component.setVisible(!0)},doNothing:()=>{}};class rl{constructor(t,i,s,e,h,r){var n;this.YA=[],this.jA=!0,this.In=sl.BottomCenter,this.Wh=void 0,this.HA=!1,this.WA=!1,this.XA=!0,this.ZA=!1,this.JA={left:0,right:0,top:0,bottom:0},this.ui=!1,this.QA=5,this.KA={x:0,y:0},this.qA=!0,this.tg=.5,this.ig=[],this.sg=!1,this.title=new Pt,this.background=new Pt,this.eg=i,this.hg=null!==(n=i.getTheme().panelPadding)&&void 0!==n?n:7,this.rg={events:{click:hl.toggleIndividualVisibility}},t!==Ja&&(this.HA=!0);const o=this.HA?{panel:i}:{panel:i,layer:s,scale:e,legend:this};this.ng=t(o),h&&(this.YA=h),r&&this.setOptions(r),this.eg.gi.Ps();const a=()=>{ti.setTimeout((()=>{this.Os(),this.eg.gi.Ps()}),0)};ti.setTimeout((()=>{this.ui||this.eg.addEventListener("resize",a)}),0),this.og=()=>{this.eg.removeEventListener("resize",a)}}ag(t,i){const s=t&&"number"==typeof t?{...as,top:t}:t&&"number"!=typeof t?t:as;let e={visible:this.YA.length>0&&this.jA,chartTitleSpace:s,marginOuter:this.JA,chartPadding:i,titleEvents:this.title,backgroundEvents:this.background,position:this.In,orientation:this.lg,padding:this.Nn?this.Nn:this.WA?{left:5,right:5,top:5,bottom:5}:as,entryMargin:this.QA,marginInner:this.hg,renderOnTop:this.ZA,title:this.Wh,titleFont:this.ug,titleFillStyle:this.cg,backgroundVisible:this.WA,backgroundFillStyle:this.dg,backgroundStrokeStyle:this.Ag,autoHideThreshold:this.tg,entries:this.YA};if(this.HA){const t=this.eg.getTheme().uiTextFillStyle,i=this.eg.getTheme().uiButtonFillStyle,s=this.eg.getTheme().uiTextFont,h=this.YA.map((e=>{var h,r,n,o,a;return{component:e.component,options:{...e.options,show:null===(h=e.options.show)||void 0===h||h,text:null!==(r=e.options.text)&&void 0!==r?r:e.component&&e.component.getName?e.component.getName():"",textFont:e.options.textFont?e.options.textFont:s,textFillStyle:e.options.textFillStyle?e.options.textFillStyle:t,buttonSize:null!==(n=e.options.buttonSize)&&void 0!==n?n:10,buttonShape:null!==(o=e.options.buttonShape)&&void 0!==o?o:Qe.Circle,buttonRotation:null!==(a=e.options.buttonRotation)&&void 0!==a?a:0,buttonFillStyle:e.component&&e.component.eh?ji(this.eg.getTheme(),e.options.matchStyleExactly||!1,e.component.eh()):i,events:{click:hl.toggleIndividualVisibility,...e.options.events}}}}));e={...e,entries:h}}return e}gg(){let t=!1;const i=this.eg.getSizePixels(),s=this.eg.getMinimumSize(),e=void 0===s||i.x>s.x&&i.y>s.y;return i.x===this.KA.x&&i.y===this.KA.y&&e||(t=!0),this.KA=i,t}vg(){const t=this.YA.map((t=>({entryText:t.component&&t.component.getName?t.component.getName():void 0,buttonShape:t.component&&t.component.Ys?t.component.Ys():void 0,legendStyle:t.component&&t.component.eh?t.component.eh():void 0})));if(this.ig.length!==t.length)return this.ig=t,!0;const i=t.some(((t,i)=>{var s,e,h,r;const n=this.ig[i];if(t.entryText!==n.entryText)return!0;if(t.buttonShape!==n.buttonShape)return!0;if(t.legendStyle&&n.legendStyle){if(t.legendStyle.fill!==n.legendStyle.fill)return!0;if(t.legendStyle.fill2!==n.legendStyle.fill2)return!0;if(t.legendStyle.stroke!==n.legendStyle.stroke)return!0;if(t.legendStyle.point3D!==n.legendStyle.point3D)return!0;if((null===(s=t.legendStyle.behavior)||void 0===s?void 0:s.colorStep)!==(null===(e=n.legendStyle.behavior)||void 0===e?void 0:e.colorStep))return!0;if((null===(h=t.legendStyle.behavior)||void 0===h?void 0:h.priority)!==(null===(r=n.legendStyle.behavior)||void 0===r?void 0:r.priority))return!0;if(t.legendStyle.lutValue!==n.legendStyle.lutValue)return!0}}));return this.ig=t,i}yg(){this.sg||this.In===sl.RightCenter||this.YA.some((t=>{var i;return!!(t.component&&t.component.Us&&(null===(i=t.component.Us())||void 0===i?void 0:i.lut)||pe(t.component)||t.options.lut)}))&&(this.In=sl.RightCenter,this.qA=!0)}Vr(t,i){var s;if(this.ui)return as;if((this.gg()||this.vg())&&(this.qA=!0),this.yg(),!this.qA&&!this.HA)return null!==(s=this.pg)&&void 0!==s?s:as;const e=this.ag(t,i),h=this.ng.update(e);return this.pg=h||as,this.pg}th(t,i){if(!this.ui&&this.qA){const s=this.ag(t,i);this.ng.plot(s),this.qA=!1}}bu(t,i){if(void 0===t||!this.YA.some((i=>i.component===t))){if(this.YA.push({component:t,options:{...this.rg,...i}}),t instanceof Xe){const i=()=>{this.Os(),this.eg.gi.Ps()},s=()=>{t.removeEventListener("dispose",s),t.removeEventListener("visiblechange",i),this.remove(t),this.eg.gi.Ps()};t.addEventListener("visiblechange",i),t.addEventListener("dispose",s)}return this.qA=!0,this}}mg(){return this.XA}Os(){return this.qA=!0,this}Sg(t){const i=(t=Array.isArray(t)?t:[t]).map((t=>il(t)?this.YA.find((i=>i.component===t)):this.YA.find((i=>{var s,e,h;return(null===(s=i.component)||void 0===s?void 0:s.Us)&&(null===(h=null===(e=i.component)||void 0===e?void 0:e.Us())||void 0===h?void 0:h.lut)===t})))).filter((t=>void 0!==t)),s=this.YA.filter((t=>!i.includes(t)));return this.YA=[...i,...s],this.qA=!0,this.eg.gi.Ps(),this}add(t,i){return void 0===t&&void 0===i||(t instanceof ll?t.bg().forEach((t=>this.bu(t,i))):t&&!il(t)?this.bu({Us:()=>({lut:t})},i):this.bu(t,i),this.qA=!0,this.eg.gi.Ps()),this}remove(t){const i=this.YA.find((i=>i.component===t));if(i){const t=this.YA.indexOf(i);this.YA.splice(t,1)}return this.qA=!0,this.eg.gi.Ps(),this}clear(){return this.YA=[],this.qA=!0,this.eg.gi.Ps(),this}dispose(){return this.ui||(this.ui=!0,this.og(),this.ng.dispose&&this.ng.dispose(),this.qA=!0,this.eg.gi.Ps()),this}setOptions(t){var i,s,e,h,r,n,o,a;return void 0!==t.addEntriesAutomatically&&(this.XA=t.addEntriesAutomatically),void 0!==t.position&&(this.In=t.position,this.sg=!0),void 0!==t.orientation&&(this.lg=t.orientation),void 0!==t.padding&&("number"==typeof t.padding?this.Nn={left:t.padding,right:t.padding,top:t.padding,bottom:t.padding}:this.Nn={left:null!==(i=t.padding.left)&&void 0!==i?i:0,right:null!==(s=t.padding.right)&&void 0!==s?s:0,top:null!==(e=t.padding.top)&&void 0!==e?e:0,bottom:null!==(h=t.padding.bottom)&&void 0!==h?h:0}),void 0!==t.marginOuter&&("number"==typeof t.marginOuter?this.JA={left:t.marginOuter,right:t.marginOuter,top:t.marginOuter,bottom:t.marginOuter}:this.JA={left:null!==(r=t.marginOuter.left)&&void 0!==r?r:0,right:null!==(n=t.marginOuter.right)&&void 0!==n?n:0,top:null!==(o=t.marginOuter.top)&&void 0!==o?o:0,bottom:null!==(a=t.marginOuter.bottom)&&void 0!==a?a:0}),void 0!==t.entryMargin&&(this.QA=t.entryMargin),void 0!==t.marginInner&&(this.hg=t.marginInner),void 0!==t.renderOnTop&&(this.ZA=t.renderOnTop),void 0!==t.title&&(this.Wh=t.title),void 0!==t.titleFont&&(this.ug=t.titleFont),void 0!==t.titleFillStyle&&(this.cg=t.titleFillStyle),void 0!==t.visible&&(this.jA=t.visible),void 0!==t.backgroundVisible&&(this.WA=t.backgroundVisible),void 0!==t.backgroundFillStyle&&(this.dg=t.backgroundFillStyle),void 0!==t.backgroundStrokeStyle&&(this.Ag=t.backgroundStrokeStyle),void 0!==t.autoHideThreshold&&(this.tg=t.autoHideThreshold),void 0!==t.entries&&(this.rg={...this.rg,...t.entries},this.YA.forEach((t=>{t.options={...this.rg,...t.options}}))),this.qA=!0,this.eg.gi.Ps(),this}getOptions(){return{addEntriesAutomatically:this.XA,position:this.In,orientation:this.lg,padding:this.Nn,marginOuter:this.JA,entryMargin:this.QA,marginInner:this.hg,renderOnTop:this.ZA,title:this.Wh,titleFont:new P(this.ug),titleFillStyle:this.cg,visible:this.jA,backgroundVisible:this.WA,backgroundFillStyle:this.dg,backgroundStrokeStyle:this.Ag,autoHideThreshold:this.tg,entries:this.rg}}setEntryOptions(t,i){const s=il(t)?this.YA.find((i=>i.component===t)):this.YA.find((i=>{var s,e,h;return(null===(s=i.component)||void 0===s?void 0:s.Us)&&(null===(h=null===(e=i.component)||void 0===e?void 0:e.Us())||void 0===h?void 0:h.lut)===t}));return s&&(s.options={...s.options,...i}),this.qA=!0,this.eg.gi.Ps(),this}getEntryOptions(t){const i=il(t)?this.YA.find((i=>i.component===t)):this.YA.find((i=>{var s,e,h;return(null===(s=i.component)||void 0===s?void 0:s.Us)&&(null===(h=null===(e=i.component)||void 0===e?void 0:e.Us())||void 0===h?void 0:h.lut)===t}));if(i)return i.options}getEntries(){return this.YA}}class nl{constructor(t,i,s,e,h,n,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.xg=[],this.Rs=[],this.Mg=void 0,this.wg=void 0,this._g=void 0,this.nt=f(0,0,0,0),this.kg=!1,this.ui=!1,this.Cg=()=>{this.Tg=!0,this.Fg.Ps()},this.Ig=t=>i=>{const s=this.xg.indexOf(i);-1!==s&&this.xg.splice(s,1),this.gi.Ps(),t.N()},this.Tg=!0,this.background=new Pt,this.Lg=t,this.Pg=s,this.Fg=e,this.removePanel=h,this.bi=i.gi.bi;const u=i.gi._t();this.uiScale=s.d2({scaleXYConstructor:J}).ti(0,100).ii(0,100).X(u),this.sA=s.d2({scaleXYConstructor:J}).ti(0,this.uiScale.x.getCellSize()).ii(0,this.uiScale.y.getCellSize()).X(u),this.engine=i.gi.Bg,this.gi=i.gi.xc,this.vs=this.gi.vs.ys(this,{}),this.Dg=()=>i.Eg("unidentified ui"),this.Rg=i.Og(),this.zg=this.Fg.qe(this.uiScale).ih(r(0,0)).X(r(100,100)).Ke(n).Qe(o),this.background.Oi(this.zg),a?(a.addEventListener("resize",this.Cg),this.Vg=()=>a.removeEventListener("resize",this.Cg)):(i.gi.R("resize",this.Cg),this.Ng=()=>i.gi.V("resize",this.Cg));const c=t=>{this.kg=t.isInView,this.P.D("inviewchanged",{isInView:this.kg})};i.gi.R("inviewchanged",c),this.Gg=()=>i.gi.V("inviewchanged",c),this.Mg=h,this.legend=new rl(null!=l?l:Ja,this,this.Rg,this.sA),this.Rs=[this.legend]}getTheme(){return this.bi}getSizePixels(){return this.sA.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.zg.Ke(t),this.Fg.Ps(),this}getBackgroundFillStyle(){return this.zg.br()}setBackgroundStrokeStyle(t){return this.zg.Qe(t),this.Fg.Ps(),this}getBackgroundStrokeStyle(){return this.zg.Za()}translateCoordinate(t,i,s){return Xa(t,i,s,this.sA,this.gi)}$g(t){return this.xg.push(t),this.gi.Ps(),t}addUIElement(t=No,i=this.uiScale){i=Wa(i,this.sA);const s=this.Dg();return this.$g(Ha(t,s,this.uiScale,i,this.Ig(s),this.bi))}dispose(){return this.ui||(this.ui=!0,this.Ng&&this.Ng(),this.Vg&&this.Vg(),ol(this.uiScale),ol(this.sA),this.Gg&&this.Gg(),this.wg&&this.wg(),this.Fg.N(),this.Rg.N(),this.xg.slice().forEach((t=>{t.dispose()})),this.Rs.forEach((t=>t.dispose())),this.gi.Ps(),this.Mg&&this.Mg(this),this.P.D("dispose",{})),this}isDisposed(){return this.ui}saveToFile(t,i,s,e){return ja(this.engine,t,i,s,e),this}xn(t){this.nt=t,this.Cg()}Y(){return this.sA.Y(),this.uiScale.Y(),this}j(){return this.sA.j(),this.uiScale.j(),this}th(t){if(this.Tg){const t=this.Fg.gi._t(),i=t.x,s=t.y;this.uiScale.X(i,s),this.sA.X(i,s);const e=[this.nt.left,this.nt.right],h=[this.nt.bottom,this.nt.top];this.uiScale.Kt(e),this.uiScale.qt(h);const r=this.uiScale.getInnerIntervalPixels();this.sA.ti(0,r.x).Kt(e).ii(0,r.y).qt(h),this.P.D("resize",{width:r.x,height:r.y,engineHeight:s,engineWidth:i})}this.Tg=!1}Ug(){for(let t=0;t<this.xg.length;t+=1)this.xg[t].Vr().th();this._g&&this._g()}Yg(t,i){if(t){const s=t(i);this.addEventListener("resize",s.Vr.bind(s)),this.wg=s.N.bind(s),this._g=s.Vr.bind(s)}}getIsInView(){return this.kg}}const ol=t=>{t.yt&&t.yt()};class al extends nl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.jg("uipanel bg",0),e,i.gi.bi.uiPanelBackgroundFillStyle,i.gi.bi.uiPanelBackgroundStrokeStyle,r),this.P=new Pt,this.legend.setOptions({position:sl.LeftTop,...n}),this.Yg(h,this.sA)}setMinimumSize(t){return this.Zd=t,this.gi.Ps(),this}getMinimumSize(){return this.Zd}th(t){this.Rs.forEach((t=>t.Vr(0,as))),super.th(t),super.Ug(),this.Rs.forEach((t=>t.th(0,as)))}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class ll extends nl{constructor(t,i,s,e,h,n,o,a,l,u,c,d){super(t,i,s,e,h,n,o,c,d),this.Hg={},this.zh=!0,this.Wg={left:!1,top:!1,right:!1,bottom:!1},this.title=new Pt,this.Xg=i.Zg("chart internal ui",0),this.Nn=void 0!==this.bi.panelPadding?{left:this.bi.panelPadding,right:this.bi.panelPadding,top:this.bi.panelPadding,bottom:this.bi.panelPadding}:{left:7,right:7,top:7,bottom:7},this.Wh=this.Xg.wn(this.uiScale).qr("Chart").ih(r(50,100)).Xl(r(0,1)).kr(a).Ke(l).setPointerEvents(!1).Kr(u),this.Wh.Kh=We.ChartTitle,this.title.Oi(this.Wh),this.Jg=this.vs.oA([this.Wh]).Ls(this.bi.effectsText)}addLegend(t){var i;let s;(t={addEntriesAutomatically:!1,backgroundVisible:!0,...t}).addEntriesAutomatically&&this.legend&&(s=this.legend.getEntries());const e=null!==(i=t.customLegend)&&void 0!==i?i:Ja,h=new rl(e,this,this.Rg,this.sA,s,t);return this.Rs.push(h),this.gi.Ps(),h}setAnimationsEnabled(t){return this.zh=t,this}getAnimationsEnabled(){return this.zh}setTitle(t){return this.Wh.qr(t),this.gi.Ps(),this}getTitle(){return this.Wh.en()}getTitleSize(){return this.Wh.Vr().bc()}setTitleFillStyle(t){return this.Wh.Ke(t),this.Cg(),this}getTitleFillStyle(){return this.Wh.br()}setTitleShadow(t){return this.Wh.Kr(t),this.gi.Ps(),this}getTitleShadow(){return this.Wh.Nl()}setTitleFont(t){return this.Wh.kr(t),this.Cg(),this}getTitleFont(){return this.Wh._r()}setTitleRotation(t){return this.Wh.Cr(t),this.gi.Ps(),this}getTitleRotation(){return this.Wh.Tr()}setTitleEffect(t){return this.Jg.Ls(t),this.gi.Ps(),this}getTitleEffect(){return this.Jg.Bs()}setTitleMargin(t){var i,s;return this.Hg="object"==typeof t?this.Hg?(i=this.Hg,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Cg(),this}getTitleMargin(){return this.Hg}Mn(t,i){const s="object"==typeof t?g(this.Nn,t):{left:t,top:t,right:t,bottom:t};return s.bottom===this.Nn.bottom&&s.left===this.Nn.left&&s.right===this.Nn.right&&s.top===this.Nn.top||(Object.entries(t).forEach((t=>{const s=t[0],e=t[1];void 0===e||!i&&this.Wg[s]||(this.Nn[s]=e,this.Wg[s]=i)})),this.Cg()),this}setPadding(t){return this.Mn("object"==typeof t?t:{left:t,top:t,right:t,bottom:t},!0),this}getPadding(){return this.Nn}Qg(t){const i=t.Kg(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Xg.N(),this}}const ul={qg(t,i){var s,e;return t.br()!==xe&&0!==t.en().length&&t.getVisible()?t.Vr().bc().y+(null!==(s=i.bottom)&&void 0!==s?s:10)+(null!==(e=i.top)&&void 0!==e?e:10):0},tv(t,i,s,e,h){var r;const n=h&&h.left?h.left:0,o=h&&h.right?h.right:0,a={x:50,y:100-s.y*(e.top+(null!==(r=i.top)&&void 0!==r?r:10))};t.ih(a).Xl({x:0,y:1}).xn({top:0,bottom:0,right:e.right+(i.right||0)+o,left:e.left+(i.left||0)+n})}};class cl extends Xe{constructor(t,i,s,e,h){super(t,i,e,h),this.sv=dh,this.ev=!0,this.hv=!0,this.rv=!0,this.chart=t,this.nv=s,this.As=new Map,this.axisX=t.axisX,this.axisY=t.axisY,this.axisZ=t.axisZ}Ji(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.sA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.ev=t,this}getCursorEnabled(){return this.ev}setCursorFormattingOverride(t){return this.ov=t,this}getCursorFormattingOverride(){return this.ov}av(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.hv=t,this.chart.gi.Ps(),this}getAutoScrollingEnabled(){return this.hv}setColorShadingStyle(t){return this.sv=t,this.As.forEach(((i,s)=>s.lv(t))),this.nv.Ps(),this}getColorShadingStyle(){return this.sv}setDepthTestEnabled(t){return this.rv=t,this.As.forEach(((i,s)=>s.uv(t))),this.nv.Ps(),this}getDepthTestEnabled(){return this.rv}cv(){}th(){}dv(){}getXMax(){const t=this.kc;return t?t.Hi():0}getXMin(){const t=this.kc;return t?t.ji():0}getYMax(){const t=this.kc;return t?t.Xi():0}getYMin(){const t=this.kc;return t?t.Wi():0}getZMax(){const t=this.kc;return t?t.ye():0}getZMin(){const t=this.kc;return t?t.ve():0}An(){const t=this.kc;return t?a(t.lu(),t.uu(),t.fv()):a(0,0,0)}}class dl extends cl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Box Series 3D",this.Av=.25,this.gv=!1,this.P=new Pt,this.Xe=Zi(this.bi.boxSeries3DFillStyle,h),this.kc=this.nv.yv().uv(this.rv).Ke(this.Xe).vv(this.Av).Fi(this.getHighlight()),this.ws(this.kc)}pv(){return this.gv}invalidateData(t){const i=t.length;if(0===i)return this;this.gv&&this.chart.gi.Ia(ln.Eo);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.kc.mv(e.slice()),this.chart.gi.Ps(),this.gv=!0,this}clear(){return this.kc.zi(),this.gv=!1,this.chart.gi.Ps(),this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.kc.Ke(t),this.chart.gi.Ps(),this}getFillStyle(){return this.Xe}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Av=void 0!==t?oi(t,0,1):void 0,this.kc.vv(this.Av),this.nv.Ps(),this}getRoundedEdges(){return this.Av}Sv(){return this.hv&&this.getVisible()}hh(t,i){t.Fi(i),this.chart.gi.Ps()}Us(){return Hi(this.Xe,this.kc.wi())}th(){super.th(),this.kc.Vr(!1)}eh(){return{fill:this.Xe}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const fl=t=>{if(_h(t)){const i=t.getThickness(),s=t.getFillStyle();if(Ce(s))return 1===i?gh:new yh({size:i,fillStyle:s,shape:"sphere"})}return gh},Al={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}};class gl{constructor(t,i,s,e,h,r,n,o,a,l){this.S=0,this.ci=!0,this.ui=!1,this.li=!0,this.P=new Pt,this.Ps=t,this.bv=i,this.xv=s,this.Mv=e,this.wv=h,this._v=r,this.uf=n,this.kv=o,this.Cv=a,this.uo=l}setValue(t){return t===this.S||(this.S=t,this.Ps(),this.P.D("valuechange",{value:this.S})),this}getValue(){return this.S}setTickStyle(t){return this.xv="function"==typeof t?t(this.xv):t,this.Ps(),this}getTickStyle(){return this.xv}setTickLength(t){return this.Mv=t,this.Ps(),this}getTickLength(){return this.Mv}setGridStrokeStyle(t){return this.wv="function"==typeof t?t(this.wv):t,this.Ps(),this}getGridStrokeStyle(){return this.wv}setTextPadding(t){return this._v=t,this.Ps(),this}getTextPadding(){return this._v}setTextRotation(t){return this.uf=t,this.Ps(),this}getTextRotation(){return this.uf}setTextFillStyle(t){return this.kv="function"==typeof t?t(this.kv):t,this.Ps(),this}getTextFillStyle(){return this.kv}setTextFont(t){return this.Cv="function"==typeof t?t(this.Cv):t,this.Ps(),this}getTextFont(){return this.Cv}setTextFormatter(t){return this.uo=t,this.Ps(),this}dispose(){return this.ui||(this.ui=!0,this.bv(),this.Ps(),this.P.D("dispose",{})),this}isDisposed(){return this.ui}setVisible(t){const i=this.ci!==t;return this.ci=t,i&&(this.P.D("visiblechange",{isVisible:this.ci}),this.Ps()),this}getVisible(){return this.ci}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.li=t,this.Ps(),this}getPointerEvents(){return this.li}}class vl extends gl{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l),this.dg=u,this.Ag=c,this.Nn=d}setBackgroundFillStyle(t){return this.dg="function"==typeof t?t(this.dg):t,this.Ps(),this}getBackgroundFillStyle(){return this.dg}setBackgroundStrokeStyle(t){return this.Ag="function"==typeof t?t(this.Ag):t,this.Ps(),this}getBackgroundStrokeStyle(){return this.Ag}setPadding(t){return this.Nn="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Nn,...t},this.Ps(),this}getPadding(){return this.Nn}}class yl{constructor(t,i,s,e){this.Tv=[],this.Fv=new Map,this.Iv=t,this.Lv=i,this.Pv=s,this.dv=e}zA(){this.Pv&&this.Pv();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.Tv.slice(),h=[];i.forEach((t=>{let i=e.shift();i||(i=this.Iv(),this.Tv.push(i));const r=[],n=i.Bv().slice();t.instances.forEach((t=>{const i=n.shift();r.push({...t,existingMember:i})}));const o=this.Lv(i,r,t.sharedProperties);s=$i(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({mi:t.instances[s].mi,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Xd(t)}))})),e.forEach((t=>{t.dispose();const i=this.Tv.indexOf(t);i<0?Ji(0,(()=>{})):this.Tv.splice(i,1)})),h.forEach((t=>{const i=this.Fv.get(t.mi);i&&t.collection.gi.$a({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.Fv.clear(),h.forEach((t=>{this.Fv.set(t.mi,t)})),this.dv&&this.dv(this.Tv,s)}}}$A(){this.Tv.forEach((t=>{t.dispose()})),this.Tv.length=0}}class pl extends Xr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Dv({x:t.gi.bi.xAxis3DNumericTicks,y:t.gi.bi.yAxis3DNumericTicks,z:t.gi.bi.zAxis3DNumericTicks}),datetime:i.Dv({x:t.gi.bi.xAxis3DDateTimeTicks,y:t.gi.bi.yAxis3DDateTimeTicks,z:t.gi.bi.zAxis3DDateTimeTicks}),time:i.Dv({x:t.gi.bi.xAxis3DTimeTicks,y:t.gi.bi.yAxis3DTimeTicks,z:t.gi.bi.zAxis3DTimeTicks})},{type:"linear"}),this.Pf=[],this.P=new Pt,this.chart=t,this.nv=h,this.Ev=r,this.Rv=n,this.Ov=this.nv.oi;const l=this.lr.Dv({x:this.bi.xAxis3DStrokeStyle,y:this.bi.yAxis3DStrokeStyle,z:this.bi.zAxis3DStrokeStyle});this.zv=this.nv.Nv([Al.InternalUI],void 0).fh(l).Vv(fl(l)).setPointerEvents(!1),this.qh=this.Ev.wn(this.Rv).setPointerEvents(!1).Ke(i.Dv({x:t.gi.bi.xAxis3DTitleFillStyle,y:t.gi.bi.yAxis3DTitleFillStyle,z:t.gi.bi.zAxis3DTitleFillStyle})).kr(i.Dv({x:t.gi.bi.xAxis3DTitleFont,y:t.gi.bi.yAxis3DTitleFont,z:t.gi.bi.zAxis3DTitleFont})).rl(3),this.Gv=new Za((()=>this.Ev.wn(this.Rv).rl(2).Mn(as).xn(as))),this.$v=new yl((()=>this.Ev.Uv(this.Rv).setPointerEvents(!1).rl(1)),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.jo();return e.ou(i),e}))))),this.Yv=new yl((()=>this.nv.bA().setPointerEvents(!1)),((t,i,s)=>(t.zi().fh(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.bu(i)))))),this.vs=a,this.Fr=this.vs.oA([this.qh]).Ls(e.effectsText),s.Zf=this}setTickStrategy(t,i){return super.Ar(t,i)}getTickStrategy(){return this.Dh}addCustomTick(){const t=new vl((()=>this.chart.gi.Ps()),(()=>{const i=this.Pf.indexOf(t);i>=0&&this.Pf.splice(i,1)}),this.bi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.bi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.bi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),xe,$t,{left:4,right:4,top:4,bottom:4});return this.Pf.push(t),this.chart.gi.Ps(),t}getCustomTicks(){return[...this.Pf]}setStrokeStyle(t){return this.zv.fh(t).Vv(fl(this.zv.co())),this.chart.gi.Ps(),this}getStrokeStyle(){return this.zv.co()}setVisible(t){return super.setVisible(t),this.zv.setVisible(t),!1===t&&(this.Yv.$A(),this.Gv.$A(),this.$v.$A()),this.nv.Ps(),this}AA(){return this.chart.getSeries()}mn(t,i,s){const e=Math.abs(this.oi.Z(Math.abs(i-t))*this.nv.jv(1));return{start:t+s.start*e*Math.sign(t-i),end:i+s.end*e*Math.sign(i-t)}}Ur(t){const i=this.Ov,s=a(i.x.q(),i.y.q(),i.z.q()),{gridlinePositionA:e,gridlinePositionB:h,gridlinePositionC:n}=this.lr.Hv(t.cameraDirection),o=t=>({x:-1===t.x?this.Ov.x.getInnerStart():1===t.x?this.Ov.x.getInnerEnd():0,y:-1===t.y?this.Ov.y.getInnerStart():1===t.y?this.Ov.y.getInnerEnd():0,z:-1===t.z?this.Ov.z.getInnerStart():1===t.z?this.Ov.z.getInnerEnd():0}),l=o(e),u=o(h),c=o(n),d=this.lr.sf,f=Ds(t.start,t.end,.5),A=ys.addVec(f,ys.multiplyVec(ys.multiply(d,-1),s)),g=this.nv.Wv(f)||r(0,0),v=this.nv.Wv(A)||r(0,0);return{center:f,wuSize:s,tickDirection3D:d,tickDirection2D:Us(Xs(tt(g,this.chart.gi.oi,this.Rv),tt(v,this.chart.gi.oi,this.Rv))),gridlinePositionA:l,gridlinePositionB:u,gridlinePositionC:c}}Wr(t,i,s,e,h){return{...this.Xv(h,t,i.Ph.tickLength,i.Ph.tickPadding),keyValue:t,tickLevel:i,labelText:s,labelOffset:{x:0,y:0},labelRotation:i.Ph.labelRotation}}tn(t,i){const s=new ml(i,t,this.Ev,this.Rv,this.nv);return s.Or.rl(0),s}Jr(t,i,s){return{ticksInfo:i,updatedTicks:s}}ir(){return this.Rv}Xv(t,i,s,e){const{wuSize:h,start:n,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.oi.getInnerStart())/(this.oi.getInnerEnd()-this.oi.getInnerStart()),c=ys.addVec(Ds(n,o,u),ys.multiplyVec(ys.multiply(a,this.nv.jv(.5*this.zv.co().getThickness())),h)),d=ys.addVec(c,ys.multiplyVec(ys.multiply(a,this.nv.jv(s)),h)),f=this.nv.Wv(d)||r(0,0);return{labelPosition:Ws(tt(f,this.chart.gi.oi,this.Rv),Hs(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Zv(t,i,s){const{wuSize:e,start:h,end:n,tickDirection3D:o}=i,a=(t-this.oi.getInnerStart())/(this.oi.getInnerEnd()-this.oi.getInnerStart()),l=ys.addVec(Ds(h,n,a),ys.multiplyVec(ys.multiply(o,this.nv.jv(.5*this.zv.co().getThickness())),e)),u=ys.addVec(l,ys.multiplyVec(ys.multiply(o,this.nv.jv(10)),e)),c=this.nv.Wv(l)||r(0,0),d=this.nv.Wv(u)||r(0,0);return this.Ev.Ah(this.Rv).ph(c).gh(d).fh(new wh({fillStyle:new ke({color:b(120*s)}),thickness:1}))}vn(t,i){return Sl(t,i,this.oi)}Jv(t){const i=this.Ov;let s,e;this.Qv()?(s=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),e=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(s=a(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),e=this.lr.Kv(a(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),s));const h=this.nv.Wv(s)||r(0,0),n=this.nv.Wv(e)||r(0,0);return{cameraDirection:t,physicalAxisSize:js(Xs(h,n)),start:s,end:e,start2D:h,end2D:n}}th(t){if(!this.ci)return;const i=Math.min(this.gr,this.vr),s=Math.max(this.gr,this.vr);this.zv.zi().bu([t.start,t.end]);const e=this.Yv.zA();for(const[i,s]of this.Eh)for(const[,h]of s){const s=t.ticksInfo.get(h);if(!s)continue;const r=this.qv(t,s);e.add({mi:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:i.Ph.tickStyle}),r.gridStroke&&e.add({mi:0,positions:r.gridStroke},{lineStyle:i.Ph.gridStrokeStyle}),h.Or.ih(s.labelPosition).Xl(s.labelAlignment).Cr(s.labelRotation).Gl(s.labelOffset.x,s.labelOffset.y)}const h=this.Gv.zA(),n=this.$v.zA(),o={x:0,y:0};this.Pf.forEach((r=>{if(!r.ci||r.S<i||r.S>s)return;const a=this.Xv(t,r.S,r.Mv,r._v),l=this.qv(t,a);if(r.kv!==xe){const t=h.add().ih(a.labelPosition).Xl(a.labelAlignment).Ke(r.kv).kr(r.Cv).qr(r.uo(r.S)).Cr(r.uf).setPointerEvents(r.li);t.Kh=r.Kh;const i=t.Vr()._t();if(o.x=Math.max(o.x,i.x),o.y=Math.max(o.y,i.y),r.dg!==xe){const i=t.yc(),s=[{x:i.min.x-r.Nn.left,y:i.max.y+r.Nn.top},{x:i.max.x+r.Nn.right,y:i.max.y+r.Nn.top},{x:i.max.x+r.Nn.right,y:i.min.y-r.Nn.bottom},{x:i.min.x-r.Nn.left,y:i.min.y-r.Nn.bottom}];n.add({mi:0,positions:s},{fillStyle:r.dg,strokeStyle:r.Ag}),this.Ev.gi.mc&&r.Kh===We.CursorTickMarker&&this.Ev.gi.mc.TA({...this.Ev.gi.sl(i.min,i.max,t.oi,r.Nn),blacklist:[We.CursorTickMarker]})}}e.add({mi:0,positions:[l.tickStroke.start,l.tickStroke.end]},{lineStyle:r.xv}),l.gridStroke&&e.add({mi:0,positions:l.gridStroke},{lineStyle:r.wv})})),h.finishPlot(),n.finishPlot(),e.finishPlot();const a=this.an(((t,i)=>{const s=i.Or.Vr()._t();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:o.x,y:o.y}),l=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.qh.Xl({x:0,y:0}).Cr(180*-l/Math.PI);const u=ys.addVec(t.center,ys.multiplyVec(ys.multiply(t.tickDirection3D,this.nv.jv(.5*this.zv.co().getThickness()+this.un(((t,i)=>Math.max(t,i.tickLength)),0))),t.wuSize)),c=this.nv.Wv(u)||r(0,0),d=Ws(tt(c,this.chart.gi.oi,this.Rv),Ws(Ws(Zs(a,t.tickDirection2D),Hs(t.tickDirection2D,this.un(((t,i)=>Math.max(t)),0))),Zs(Hs(this.qh.Vr()._t(),.5),t.tickDirection2D)));this.qh.ih(d)}qv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return ni(o,0)||ni(o,1)||(a=[this.ty()?{...s,x:r.x}:this.iy()?{...s,y:r.y}:this.Qv()?{...s,z:r.z}:{x:0,y:0,z:0},this.ty()?{...e,x:r.x}:this.iy()?{...e,y:r.y}:this.Qv()?{...e,z:r.z}:{x:0,y:0,z:0},this.ty()?{...h,x:r.x}:this.iy()?{...h,y:r.y}:this.Qv()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}sy(t){const i=this.gr,s=this.vr,e=.01*t*(s-i),h=i+e,r=s+e;this.Dr(h,r,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}ey(t,i,s){if(0===i)return;s<0&&(i*=-1,s*=-1);const e=this.vr-this.gr,h=e*(i>=1?1+.02*s:1-.02*s)-e;"centered"===t?this.Dr(this.gr+h/2,this.vr-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.Dr(this.gr,this.vr-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.Dr(this.gr+h/2,this.vr,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}Ir(){super.Ir(),this.Yv.$A(),this.Gv.$A(),this.$v.$A()}ty(){return this.lr.ty()}iy(){return this.lr.iy()}Qv(){return this.lr.Qv()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}}class ml extends Zr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.hy=h}}const Sl=(t,i,s)=>oi(t+.1*(i-t)+Math.abs(s.q())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),bl=(t,i,s,e)=>({cn:s=>{const e=t();let h;for(const t of e){if(!t.Sv())continue;const e=i(t,s);h=void 0===e?h:void 0!==h?Math.min(h,e):e}return h},dn:i=>{const e=t();let h;for(const t of e){if(!t.Sv())continue;const e=s(t,i);h=void 0===e?h:void 0!==h?Math.max(h,e):e}return h},An:()=>{const i=t();let s;for(const t of i){if(!t.Sv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),xl=t=>({...bl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.An().y)),Dv:t=>t.y,Kv:(t,i)=>({x:i.x,y:t.y,z:i.z}),sf:a(-1,0,0),Hv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,0,i.z),gridlinePositionB:a(i.x,0,-i.z),gridlinePositionC:a(-i.x,0,-i.z)}},ty:()=>!1,iy:()=>!0,Qv:()=>!1}),Ml=t=>({...bl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.An().z)),Dv:t=>t.z,Kv:(t,i)=>({x:i.x,y:i.y,z:t.z}),sf:a(1,0,0),Hv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,-i.y,0),gridlinePositionB:a(i.x,i.y,0),gridlinePositionC:a(-i.x,i.y,0)}},ty:()=>!1,iy:()=>!1,Qv:()=>!0});class wl extends cl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.gv=!1,this.P=new Pt}pv(){return this.getPointAmount()>0}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.kc.fh(i),this.nv.Ps(),this}getStrokeStyle(){return this.hc}add(t){return this.gv&&this.chart.gi.Ia(ln.Eo),this.gv=!0,(t=Array.isArray(t)?t:[t])?(this.kc.bu(t.slice()),this.nv.Ps(),this):this}clear(){return this.kc.zi(),this}getPointAmount(){const t=this.kc;return t.ku()+t.Cu()}Sv(){return this.hv&&this.getPointAmount()>0&&this.getVisible()}hh(t,i){t.Fi(i),this.nv.Ps()}eh(){return{stroke:this.hc}}Us(){return Hi(this.hc.getFillStyle(),this.kc.wi())}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class _l extends wl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,r),this.Es="Line Series 3D",this.hc=Zi(e.lineSeries3DStrokeStyle,h),this.ny=kn.pointStyle3D,this.oy(this.hc);const o={individualLookupValuesEnabled:!1,...n};this.kc=this.nv.Nv([Al.UserSeries],o).uv(this.rv).fh(this.hc).Vv(this.ny).Fi(this.getHighlight()),this.ws(this.kc)}setStrokeStyle(t){super.setStrokeStyle(t),this.oy(this.hc);const i=this.ny;return this.kc.Vv(i),this}oy(t){const i=new xh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.ny=i}}class kl extends wl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,r),this.Es="Point Line Series 3D",this.ny=Zi(e.pointLineSeries3DPointStyle,h),this.hc=Zi(e.lineSeries3DStrokeStyle,h),this.ly();const o={individualLookupValuesEnabled:!1,...n};this.kc=this.nv.Nv([Al.UserSeries],o).uv(this.rv).fh(this.hc).Vv(this.ny).Fi(this.getHighlight()),this.ws(this.kc)}setPointStyle(t){return this.ny="function"==typeof t?t(this.ny):t,this.ly(),this.kc.Vv(this.ny),this.nv.Ps(),this}getPointStyle(){return this.ny}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.hc,s=Math.abs(i.getThickness()),e=this.ny,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.ny=e.setSize(s)),this.ly();const r=this.ny;return this.kc.Vv(r),this.nv.Ps(),this}Us(){return Hi(this.hc.getFillStyle(),this.kc.wi())||Hi(this.ny.getFillStyle(),this.kc.wi())}ly(){const t=this.ny,i=t.getSize();this.ny=t.setSize(i)}hh(t,i){t.Fi(i),this.nv.Ps()}}class Cl extends cl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.gv=!1,this.P=new Pt,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.gi.Ia(ln.Ro)}pv(){return this.getPointAmount()>0}add(t){return this.gv&&this.chart.gi.Ia(ln.Eo),this.gv=!0,(t=Array.isArray(t)?t:[t])?(this.kc.bu(t.slice()),this.nv.Ps(),this):this}clear(){return this.kc.zi(),this}getPointAmount(){const t=this.kc;return t.ku()+t.Cu()}Sv(){return this.hv&&this.getPointAmount()>0&&this.getVisible()}hh(t,i){t.Fi(i),this.nv.Ps()}eh(){return{point3D:this.uy}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Tl extends Cl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Series 3D";const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.uy=Zi(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.kc=this.nv.gy(o).uv(this.rv).Ay(this.uy).Fi(this.getHighlight()),this.ws(this.kc)}setPointStyle(t){this.uy="function"==typeof t?t(this.uy):t;const i=this.uy;return this.kc.Ay(i),this.nv.Ps(),this}getPointStyle(){return this.uy}Us(){return Hi(this.uy.getFillStyle(),this.kc.wi())}}class Fl extends Cl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Cloud Series 3D";const n=this.chart.getSeries().length;this.uy=Zi(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.kc=this.nv.gy(o).Ay(this.uy).Fi(this.getHighlight()),this.ws(this.kc)}setPointStyle(t){this.uy="function"==typeof t?t(this.uy):t;const i=this.uy;return this.kc.Ay(i),this.nv.Ps(),this}getPointStyle(){return this.uy}Us(){return Hi(this.uy.getFillStyle(),this.kc.wi())}}const Il={Triangulated:Tl,Pixelated:Fl};class Ll extends ll{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.vy=[],this.yy=0,this.my=t=>{const i=this.vy.indexOf(t);i>=0&&(this.vy.splice(i,1),this.P.D("seriesdispose",{series:t}))},this.seriesBackground=new Pt,this.Sy=this.vs.oA()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.vy.forEach((i=>i.setAnimationHighlight(t))),this}by(t,i){this.Sy._s([i]),this.seriesBackground.Oi(t)}setSeriesBackgroundFillStyle(t){return this.xy.Ke(t),this.gi.Ps(),this}getSeriesBackgroundFillStyle(){return this.xy.br()}setSeriesBackgroundStrokeStyle(t){return this.My.Qe(t),this.gi.Ps(),this}getSeriesBackgroundStrokeStyle(){return this.My.Za()}setSeriesBackgroundEffect(t){return this.Sy.Ls(t),this.gi.Ps(),this}getSeriesBackgroundEffect(){return this.Sy.Bs()}wy(t,i){this.vy.push(t),void 0!==this._y&&t.setHighlightOnHover(this._y),this.P.D("seriesadd",{series:t}),this.Rs.forEach((s=>{s.mg()&&null!==(null==i?void 0:i.legend)&&s.bu(t,null==i?void 0:i.legend)}))}bg(){return this.vy}setSeriesHighlightOnHover(t){return this._y=t,this.vy.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.vy.slice().forEach(hi),super.dispose()}}const Pl=ys.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Bl{constructor(t,i,s,e){this.ky=!0,this.Cy=!0,this.Ty=2*-Math.PI/2160,this.Fy=2*Math.PI/2160,this.Iy=.1,this.Ly=1*Math.PI/180,this.Py=t,this.By=i,this.Dy=s,this.Wv=e}getDefaultCameraConfiguration(t,i){const s={direction:Pl,location:ys.multiply(Pl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Ey(s,t):"wheel-zoom"===t.type?s=this.Ry(s,t):"rotate+zoom"===t.type?s=this.Oy(s,t):"fixed-rotate"===t.type?s=this.zy(s,t):"move"===t.type&&(s=this.Vy(s,t))})),this.ky?s=this.Ny(t.boundingBox,s):this.Cy&&(s=this.Gy(t.boundingBox,t.projection,s)),s}Ey(t,i){const{rotation:s}=i,e=t.location,h=ys.multiply(ys.normalize(t.location),-1),{Right:r,Up:n}=this.$y(h);let o=e;const a=this.Uy(h),l=s.x*this.Ty*a;o=ys.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.Fy,a-this.Ly);return 0!==u&&(o=ys.rotateAroundAxis(o,r,u)),{location:o,direction:ys.multiply(ys.normalize(o),-1)}}Ry(t,i){const{deltaY:s}=i;this.ky&&this.Yy(!1);const e=t.location,h=ys.multiply(ys.normalize(e),-1),r=s*this.Iy,n=ys.length(e)*-r;return{direction:h,location:ys.addVec(e,ys.multiply(h,n))}}Oy(t,i){const{rotation:s,cameraDistance:e}=i;this.ky&&this.Yy(!1);let h=this.Ey(t,{type:"rotate",rotation:s});const r=h.location,n=ys.multiply(ys.normalize(r),-1),o=ys.multiply(n,-e);return h={direction:ys.multiply(ys.normalize(o),-1),location:o},h}zy(t,i){this.ky&&this.Yy(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.$y(h),o=s.x*this.Ty;let a=ys.normalize(ys.rotateAroundAxis(h,n,o));const l=s.y*this.Fy;return a=ys.normalize(ys.rotateAroundAxis(a,r,l)),{location:e,direction:a}}Vy(t,i){this.ky&&this.Yy(!1),this.Cy=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.$y(r);return{location:ys.addVec(h,ys.multiply(r,.01*e),ys.multiply(n,.01*s)),direction:r}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:ys.multiply(ys.normalize(t.cameraLocation),-1)};return this.ky?this.Ny(t.boundingBox,i):this.Gy(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:ys.multiply(ys.normalize(t.cameraLocation),-1)};return this.ky?this.Ny(t.boundingBox,i):this.Gy(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:ys.multiply(ys.normalize(t.cameraLocation),-1)};if(this.ky)return this.Ny(t.boundingBox,i)}Ny(t,i,s){let e=i;s=void 0!==s?s:0,e=this.jy(t,e,100,20,1,s,5);const h=this.Uy(e.direction);return e=this.Hy(e,this.Wy(t,e,100,1),h),e}jy(t,i,s,e,h,r,n){return Dl(r,n,(t=>({direction:i.direction,location:ys.multiply(i.direction,-t)})),(i=>this.Xy(t,i)),s,h,"linear",e)}Wy(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.$y(i.direction),a=this.Zy(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?El(0,c,(t=>({location:l.location,direction:ys.normalize(ys.lerp(l.direction,o,t))})),(i=>this.Jy(t,i)),0,u,!0,s):El(0,c,(t=>({location:l.location,direction:ys.normalize(ys.lerp(l.direction,n,t))})),(i=>this.Jy(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?El(0,c,(t=>({location:l.location,direction:ys.normalize(ys.lerp(l.direction,r,t))})),(i=>this.Qy(t,i)),0,u,!0,s):El(0,c,(t=>({location:l.location,direction:ys.normalize(ys.lerp(l.direction,h,t))})),(i=>this.Qy(t,i)),0,u,!0,s)),l}Xy(t,i){const s=this.Zy(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}Qy(t,i){const s=this.Zy(t,!1,i);return Math.abs(s.left-s.right)}Jy(t,i){const s=this.Zy(t,!1,i);return Math.abs(s.top-s.bottom)}Zy(t,i,s){const e=Es(this.Ky(t,i,s).map((t=>tt(t,this.Py,this.By))));return{left:e.min.x,right:this.By.x.getInnerEnd()-e.max.x,top:this.By.y.getInnerEnd()-e.max.y,bottom:e.min.y}}Ky(t,i,s){const e=this.Dy,h=a(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=a(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,l=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-l),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=l+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.Wv(t,s))).filter((t=>void 0!==t))}Gy(t,i,s){const e=ys.length(s.location),h=this.qy(t,i);return e<h.min?{direction:s.direction,location:ys.multiply(s.direction,-h.min)}:e>h.max?{direction:s.direction,location:ys.multiply(s.direction,-h.max)}:s}qy(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}$y(t){const i=a(0,1,0),s=ys.normalize(ys.cross(i,ys.multiply(t,-1)));let e=ys.cross(s,t);return e.y=Math.abs(e.y),e=ys.normalize(e),{Right:s,Up:e,Down:ys.multiply(e,-1),Left:ys.multiply(s,-1)}}Uy(t){const i={x:0,y:1,z:0},s=ys.angle(t,i),e=ys.angle(t,ys.multiply(i,-1));return Math.min(s,e)}Hy(t,i,s){return{location:ys.lerp(t.location,i.location,s),direction:ys.normalize(ys.lerp(t.direction,i.direction,s))}}Yy(t){return this.ky=t,this}tp(){return this.ky}}const Dl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},El=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Rl extends cl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.ip={},this.gv=!1,this.P=new Pt,this.sv=lh;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Xe=Zi(this.bi.surfaceGridSeries3DFillStyle,n),this.sp=Zi(this.bi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Ba=o,this.kc=this.nv.hp(o).Ke(this.Xe).ep(this.sp).lv(this.sv).Fi(this.getHighlight()),this.ws(this.kc),this.setHighlightOnHover(!1)}pv(){return this.gv}Ji(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.sA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Pe(this.Xe)?this.Xe.lut:void 0}}eh(){return{fill:this.Xe}}rp(){const t=this.ip.start||{x:0,z:0};let i;i=this.ip.end?{x:(this.ip.end.x-t.x)/this.Ba.columns,z:(this.ip.end.z-t.z)/this.Ba.rows}:this.ip.step?this.ip.step:{x:1,z:1},this.kc.np(t,i),this.chart.gi.Ps()}setStart(t){return this.ip.start=t,this.rp(),this}getStart(){return this.kc.op().start}setStep(t){return this.ip.step=t,this.rp(),this}getStep(){return this.kc.op().step}setEnd(t){return this.ip.end=t,this.rp(),this}getEnd(){return this.kc.op().end}setContours(t){return this.kc.ap(t?{valueSource:t.valueSource,levels:t.levels.map((t=>{var i,s;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.bi.surfaceGridSeriesContourStrokeStyle)&&void 0!==s?s:new wh({thickness:1,fillStyle:new ke({color:m(255,0,0)})})}}))}:void 0),this.nv.Ps(),this}getContours(){return this.kc.lp()}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.kc.Ke(this.Xe),this.nv.Ps(),this}getFillStyle(){return this.Xe}setWireframeStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.kc.ep(this.sp),this.nv.Ps(),this}getWireframeStyle(){return this.kc.up()}setIntensityInterpolation(t){return t=t||"disabled",this.kc.cp(t),this.nv.Ps(),this}getIntensityInterpolation(){return this.kc.dp()}invalidateIntensityValues(t){if(this.gv&&this.chart.gi.Ia(ln.Eo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ba.dataOrder?t.length:t[0].length,rows:"rows"===this.Ba.dataOrder?t.length:t[0].length},s="columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows,e="columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns;if(i.x>s||i.y>e){if(!0===this.chart.Lg.Da){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ba.columns}x${this.Ba.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.kc.fp({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ba.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ba.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ba.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ba.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows)-1,o=("columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.Lg.Da){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ba.columns}x${this.Ba.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.kc.fp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.nv.Ps(),this.gv=!0,this}invalidateHeightMap(t){if(this.gv&&this.chart.gi.Ia(ln.Eo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ba.dataOrder?t.length:t[0].length,rows:"rows"===this.Ba.dataOrder?t.length:t[0].length},s="columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows,e="columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns;if(i.x>s||i.y>e){if(!0===this.chart.Lg.Da){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ba.columns}x${this.Ba.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.kc.Ap({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ba.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ba.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ba.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ba.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows)-1,o=("columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.Lg.Da){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ba.columns}x${this.Ba.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.kc.Ap({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.nv.Ps(),this.gv=!0,this}setCullMode(t){return this.kc.gp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.kc.vp()}Us(){return Hi(this.Xe,this.kc.wi())}cv(){}th(){}dv(){}Sv(){return this.hv&&this.getVisible()}hh(t,i){t.Fi(i),this.nv.Ps()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Ol extends cl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.gv=!1,this.ip={},this.P=new Pt,this.chart.gi.Ia(ln.Eo),this.sv=lh;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Xe=Zi(this.bi.surfaceScrollingGridSeries3DFillStyle,n),this.sp=Zi(this.bi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Ba=o,this.kc=this.nv.yp(o).Ke(this.Xe).ep(this.sp).lv(this.sv).Fi(this.getHighlight()),this.ws(this.kc),this.setHighlightOnHover(!1)}pv(){return this.gv}Ji(t,i,s){const e=null==t?void 0:t.dataPoint;if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.sA,axisLocation:e},...e,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Pe(this.Xe)?this.Xe.lut:void 0}}rp(){const t=this.ip.start||{x:0,z:0};let i;i=this.ip.step?this.ip.step:{x:1,z:1},this.kc.np(t,i),this.chart.gi.Ps()}setStart(t){return this.ip.start=t,this.rp(),this}getStart(){return this.kc.op().start}setStep(t){return this.ip.step=t,this.rp(),this}getStep(){return this.kc.op().step}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.kc.Ke(this.Xe),this.nv.Ps(),this}getFillStyle(){return this.Xe}setWireframeStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.kc.ep(this.sp),this.nv.Ps(),this}getWireframeStyle(){return this.kc.up()}setIntensityInterpolation(t){return t=t||"disabled",this.kc.cp(t),this.nv.Ps(),this}getIntensityInterpolation(){return this.kc.dp()}clear(){return this.kc.zi(),this.nv.Ps(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),this.gv=!0,i){const t=i[0].length,s=0+t-1,e="columns"===this.Ba.scrollDimension?this.Ba.rows:this.Ba.columns;if(s>e-1){if(!0===this.chart.Lg.Da){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Ba.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Ba.scrollDimension?this.Ba.rows:this.Ba.columns;if(i>e-1){if(!0===this.chart.Lg.Da){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Ba.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.Lg.Da){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;ti.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.kc.pp({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.nv.Ps(),this}invalidateValues(t){return this.kc.fp(t),this.chart.gi.Ps(),this}getSampleCount(){return this.kc.mp()}setCullMode(t){return this.kc.gp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.kc.vp()}Us(){return Hi(this.Xe,this.kc.wi())}cv(){}th(){}dv(){}Sv(){return this.hv&&this.getVisible()}hh(t,i){t.Fi(i),this.nv.Ps()}eh(){return{fill:this.Xe}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const zl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof su),Vl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),Nl=(t,i=/\s+/g)=>Array.from(t.split(i).map(parseFloat)),Gl=t=>{if(t.length<=3)return t;const i=new Array;for(let s=1;s<t.length-1;s+=1)i.push(t[0]),i.push(t[s]),i.push(t[s+1]);return i},$l=t=>{const i=t.split(/\s+/g);let s=[],e=[],h=[];for(const t of i){const i=Nl(t.trim(),"/");s.push(i[0]),i.length>1&&!Number.isNaN(i[1])&&h.push(i[1]),i.length>2&&!Number.isNaN(i[2])&&e.push(i[2])}return s=Gl(s),h=Gl(h),e=Gl(e),{vertexIndex:s,textureIndex:h||void 0,normalIndex:e||void 0}},Ul={id:"",ambient:m(0,0,0,0),diffuse:m(254,204,0),emissive:m(0,0,0,0),specular:m(255,255,255),specularCoeff:1,opacity:1};class Yl extends cl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Mesh Model 3D",this.Sp=new Float32Array,this.bp=new Float32Array,this.xp=new Uint16Array,this.oi={x:1,y:1,z:1},this.Mp={x:0,y:0,z:0},this.wp={x:0,y:0,z:0},this._p={x:0,y:0,z:0},this.kp={w:1,x:0,y:0,z:0},this.Cp={x:0,y:0,z:0},this.Tp=new Array,this.Fp=[],this.ru=bs,this.P=new Pt;const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.kc=this.nv.Ip().uv(this.rv).Ke(Zi(this.bi.meshModel3DFillStyle||this.bi.pointSeriesFillStyle,n)).Fi(this.getHighlight()),this.ws(this.kc)}pv(){return this.Sp.length>0}Ji(t,i,s){const e=this.getFillStyle();return cs({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Pe(e)?e.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const s=this.kc.Lp(t,i);if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.sA,axisLocation:s.coordAxis},...s.coordAxis,index:s.index,value:s.value,coordAxis:s.coordAxis,coordModel:s.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Pe(e)?e.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=ms,r=ps,n=ms,o=ps,a=ms,l=ps;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.ru={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.ru.min.x,s[t+1]-=this.ru.min.y,s[t+2]-=this.ru.min.z;this.Cp={x:this.ru.max.x-this.ru.min.x,y:this.ru.max.y-this.ru.min.y,z:this.ru.max.z-this.ru.min.z},this.Sp=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(lh);const u=new Array,c={indexStart:0,count:i.length,useIndexBuffer:!0,offset:0,material:{id:Ul.id,diffuse:Ul.diffuse,specular:Ul.specular,ambient:Ul.ambient,emissive:Ul.emissive,specularCoeff:Ul.specularCoeff,opacity:1}};return u.push(c),this.Fp=u,this.kc.Pp({vertices:this.Sp,normals:this.checkedNormals,indices:i instanceof Uint32Array||i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Cp,parts:this.Fp}),this.chart.gi.Ps(),this}Bp(t){if(!t)return this;this.Tp=[];let i={id:Ul.id,diffuse:Ul.diffuse,specular:Ul.specular,ambient:Ul.ambient,emissive:Ul.emissive,specularCoeff:Ul.specularCoeff,opacity:1};const s=t.split("\n");for(let t of s){if(t=t.trim(),""===t||t.startsWith("#"))continue;const s=t.split(/\s+/g);switch(s[0].trim().toLowerCase()){case"ka":{const s=Nl(t.substring(2).trim()).map((t=>255*t));i.ambient=m(s[0],s[1],s[2])}break;case"ke":{const s=Nl(t.substring(2).trim()).map((t=>255*t));i.emissive=m(s[0],s[1],s[2])}break;case"kd":{const s=Nl(t.substring(2).trim()).map((t=>255*t));i.diffuse=m(s[0],s[1],s[2])}break;case"ks":{const s=Nl(t.substring(2).trim()).map((t=>255*t));i.specular=m(s[0],s[1],s[2])}break;case"d":i.opacity=parseFloat(s[1].trim());break;case"tr":i.opacity=1-parseFloat(s[1].trim());break;case"newmtl":i.diffuse=m(255*i.diffuse.r,255*i.diffuse.g,255*i.diffuse.b,255*i.opacity),i.specular=m(255*i.specular.r,255*i.specular.g,255*i.specular.b,255*i.opacity),i.emissive=m(255*i.emissive.r,255*i.emissive.g,255*i.emissive.b,255*i.opacity),i={id:s[1],diffuse:Ul.diffuse,specular:Ul.specular,ambient:Ul.ambient,emissive:Ul.emissive,specularCoeff:Ul.specularCoeff,opacity:Ul.opacity},this.Tp.push(i)}}return this}setModelMaterial(t){return t?(this.Bp(t),this.setFillStyle(xe),this.Fp?(this.Fp.forEach((t=>{const i=this.Tp.find((i=>i.id.toLowerCase()===t.material.id.toLowerCase()));i&&(t.material=i)})),this.Fp.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.chart.gi.Ps(),this):this):this}setModelFromObj(t){if(!t)return this;const i=new Array,s=new Array,e=new Array,h=new Array,r=new Array,n=new Array,o=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:Ul.id,diffuse:Ul.diffuse,specular:Ul.specular,ambient:Ul.ambient,emissive:Ul.emissive,specularCoeff:Ul.specularCoeff,opacity:Ul.opacity}},l=0,u=0,c=0,d=0,f=0,A=0,g=0,v=ms,y=ps,p=ms,m=ps,S=ms,b=ps;const x=t.replace(/\r/g,"").split("\n");for(let t of x){if(t=t.trim(),""===t||t.startsWith("#"))continue;const x=t.split(/\s+/g);let M=0;switch(x[0].trim().toLowerCase()){case"v":{const s=Nl(t.substring(1).trim()),e=s[0],h=s[1],r=s[2];v=Math.max(v,e),y=Math.min(y,e),p=Math.max(p,h),m=Math.min(m,h),S=Math.max(S,r),b=Math.min(b,r),i.push(...s.slice(0,3)),l+=1,d=l}break;case"vt":{const i=Nl(t.substring(2).trim());s.push(...i),u+=1,f=u}break;case"vn":{const i=Nl(t.substring(2).trim());e.push(...i),c+=1,A=c}break;case"usemtl":{const t=this.Tp.find((t=>t.id.toLowerCase()===x[1].toLowerCase()));g+=o.length>0?a.count:0,a={indexStart:void 0!==a?3*g*2:0,count:0,offset:void 0!==a?1*g:0,useIndexBuffer:!1,material:t||{id:x[1].toLowerCase(),diffuse:Ul.diffuse,specular:Ul.specular,ambient:Ul.ambient,emissive:Ul.emissive,specularCoeff:1,opacity:1}},o.push(a)}break;case"fo":M+=1;case"f":M+=1;{const o=$l(t.substring(M).trim());for(let t=0;t<o.vertexIndex.length;t+=1){let s=o.vertexIndex[t];s<0?s+=d:s-=1,s*=3,h.push(i[s]),h.push(i[s+1]),h.push(i[s+2])}if(a.count+=o.vertexIndex.length,o.textureIndex)for(let t=0;t<o.textureIndex.length;t+=1){let i=o.textureIndex[t];i<0?i+=f:i-=1,i*=3,n.push(s[i]),n.push(s[i+1]),n.push(s[i+2])}if(o.normalIndex)for(let t=0;t<o.normalIndex.length;t+=1){let i=o.normalIndex[t];i<0?i+=A:i-=1,i*=3,r.push(e[i]),r.push(e[i+1]),r.push(e[i+2])}}}}this.ru={min:{x:y,y:m,z:b},max:{x:v,y:p,z:S}};for(let t=0;t<h.length;t+=3)h[t]-=this.ru.min.x,h[t+1]-=this.ru.min.y,h[t+2]-=this.ru.min.z;if(this.Cp={x:this.ru.max.x-this.ru.min.x,y:this.ru.max.y-this.ru.min.y,z:this.ru.max.z-this.ru.min.z},o.length<1&&h.length>0&&(a.count=h.length/3,o.push(a)),this.Fp=o,this.Sp=new Float32Array(h),r.length<1)for(let t=0;t<h.length/9;t+=1){const i={x:h[9*t],y:h[9*t+1],z:h[9*t+2]},s={x:h[9*t+3],y:h[9*t+4],z:h[9*t+5]},e={x:h[9*t+6],y:h[9*t+7],z:h[9*t+8]},n=ys.normalize(ys.cross(ys.subtractVec(i,s),ys.subtractVec(i,e)));for(let t=0;t<3;t+=1)r.push(n.x),r.push(n.y),r.push(n.z)}return this.bp=new Float32Array(r.map(((t,i)=>r[i]))),this.checkedNormals=new Float32Array,this.Tp&&this.Fp.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.kc.Pp({vertices:this.Sp,normals:this.bp,indices:this.xp,modelSize:this.Cp,parts:this.Fp}),this.chart.gi.Ps(),this}setVertexValues(t){return this.kc.Dp(t),this.chart.gi.Ps(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.oi=i,this.kc.Ep(i),this.chart.gi.Ps(),this}getScale(){return this.oi}setModelLocation(t){return this.wp=t,this.kc.Rp(t),this.chart.gi.Ps(),this}getModelLocation(){return this.wp}setModelAlignment(t){return this.Mp=t,this.kc.Op(t),this.chart.gi.Ps(),this}getModelAlignment(){return this.Mp}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this._p}setModelRotationEuler(t){const i={x:te(t.x),y:te(t.y),z:te(t.z)};return this._p=i,this.kc.zp(this._p),this.chart.gi.Ps(),this}getModelRotationEuler(){return this._p}setModelRotationQuaternion(t){return this.kp=t,this.kc.Vp(this.kp),this.chart.gi.Ps(),this}getModelRotationQuaternion(){return this.kp}setBackfaceCullingMode(t){return this.kc.Np(t),this.chart.gi.Ps(),this}getBackfaceCullingMode(){return this.kc.Gp()}setFillStyle(t){return this.kc.Ke(t),this.chart.gi.Ps(),this}getFillStyle(){return this.kc.br()}setColorShadingStyle(t){return this.checkedNormals||t!==dh?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new fh.Simple))}Sv(){return!1}hh(t,i){t.Fi(i),this.chart.gi.Ps()}Us(){return Hi(this.getFillStyle(),this.kc.wi())}eh(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const jl={None:yn,Rectangle:mo,Circle:So,Diamond:bo,Pointer:xo};class Hl extends Lo{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Kn=this.bi.cursorResultTableTextFont,this.uf=0,this.kv=this.bi.cursorResultTableTextFillStyle,this.Un=100,this.Kh=We.CursorResultTable}setContent(t){var i;let s;void 0===t?s=[]:Array.isArray(t)?(s=[],t.forEach((t=>{s.push(Array.isArray(t)?t:[t])}))):s=[[t]];for(let t=0;t<s.length;t+=1){const i=s[t];let e=!1;for(let t=0;t<i.length;t+=1){const s=i[t],h="object"==typeof s&&"text"in s?s.text:"string"==typeof s?s:void 0,r="object"==typeof s&&"icon"in s?s.icon:Ph(s)?s:void 0,n=s instanceof Xe&&s;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(i.unshift(""),i.push(""))}const e=s.length;let h=this.getMembers().length;for(let t=0;t<Math.max(e,h);t+=1){const n=this.getRow(t,!0);if(t>=e)this.getMembers()[t].dispose(),t-=1,h-=1;else{const h=s[t].length;let o=n.getMembers().length;for(let a=0;a<Math.max(h,o);a+=1){const l=s[t][a],u="object"==typeof l&&"font"in l?l.font:void 0,c="object"==typeof l&&"fillStyle"in l?l.fillStyle:void 0,d="object"==typeof l&&"text"in l?l.text:"string"==typeof l?l:void 0,f="object"==typeof l&&"icon"in l?l.icon:Ph(l)?l:void 0,A=l instanceof Xe&&l||("object"==typeof l&&"component"in l?l.component:void 0),g="object"==typeof l&&"componentColor"in l&&l.componentColor,v="object"==typeof l&&"componentFillStyle"in l&&l.componentFillStyle,y="object"==typeof l&&"rowFillStyle"in l?l.rowFillStyle:void 0,p=n.getMembers();if(a>=h)n.getMembers()[a].dispose(),a-=1,o-=1;else if(void 0!==d&&d.length>0||f||A){const s=u?this.Kn.withMutations((t=>{for(const i of Object.keys(u)){const s=u[i];void 0!==s&&t.set(i,s)}return t})):this.Kn,h=c||this.kv,o=p[a];if(d){let t;o&&o instanceof yo?t=o:(o&&o.dispose(),t=n.addElement(po,a)),t.setText(d).setFont(s).setFillStyle(h).setTextRotation(this.uf)}else if(f){let t;o&&o instanceof Mo?t=o:(o&&o.dispose(),t=n.addElement(wo,a)),t.setFillStyle(h).setShape(f).setSize({y:s.size,x:s.size}),t.setMargin(null!==(i=this.bi.uiTextPadding)&&void 0!==i?i:5)}else if(A){let t;o&&"setTextFillStyleHidden"in(r=o)&&"setText"in r?t=o:(o&&o.dispose(),t=n.addElement(Yo.setBackground(jl.None),a).setOn(!0));const i=A.Ys();void 0!==i&&t.setButtonShape(i),t.setText(A.getName()).setTextFont(s).setTextFillStyle(h).setTextRotation(this.uf),g?t.setButtonOnFillStyle(new ke({color:g})):v?t.setButtonOnFillStyle(v):t.setButtonOnFillStyle(ji(A.chart.getTheme(),!1,A.eh()))}y&&n.setBackground((i=>{i.setFillStyle(y);const s=this.getBackground();Je(s)&&i instanceof mo&&i.setCornerRadius(s.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===e-1,bottomRight:t===e-1})}))}else{const t=p[a];t&&t instanceof _o||(t&&t.dispose(),n.addGap(void 0,a))}}}}var r;return this.Hs.Ps(),this}th(){if(super.th(),this.Hs.gi.mc&&this.getVisible()){const t=nn(this);this.Hs.gi.mc.TA({...t,blacklist:[We.CursorResultTable]})}return this}setTextFillStyle(t){this.kv="function"==typeof t?t(this.kv):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof yo&&s.setFillStyle(this.kv)}}return this.Hs.Ps(),this}getTextFillStyle(){return this.kv}setTextFont(t){return B(t)?this.Kn=t:this.Kn=t(this.Kn),this.Hs.Ps(),this}getTextFont(){return this.Kn}setTextRotation(t){return this.uf=t,this.Hs.Ps(),this}getTextRotation(){return this.uf}$p(){for(let t=0;t<this.Hd.length;t+=1)for(let i=0;i<this.Hd[t].getMembers().length;i+=1)this.Hd[t].getMembers()[i].dispose()}Vr(){for(let t=0;t<this.Hd.length;t+=1)this.Hd[t].setMinimumSize(void 0);super.Vr();for(let t=0;t<this.Hd.length;t+=1)this.Hd[t].setMinimumSize(this.size.x);return super.Vr(),this}}class Wl{constructor(t,i,s,e,h,r){this.Yp=[],this.jp=!0,this.Hp=!0,this.kg=!1,this.ci=!0,this.ui=!1,this.Wp=[],this.Xp=!0,this.P=new Pt,this.Hs=t,this.renderingScale=i,this.scale=s,this.Zp=e,this.Jp=h,this.bi=r,this.Qp=new Hl(this.Hs,this.renderingScale,this.scale,this.Jp,ri,r).setPointerEvents(!1).setBackground((t=>t.setFillStyle(r.cursorResultTableFillStyle).setStrokeStyle(r.cursorResultTableStrokeStyle))).setTextFillStyle(r.cursorResultTableTextFillStyle).setTextFont(r.cursorResultTableTextFont),this.Kp=new Zl((t=>this.Qp.setOrigin(t)),(()=>this.Qp.getOrigin())),this.qp=new Zl((t=>this.Qp.setPosition(t)),(()=>this.Qp.getPosition()))}isDisposed(){return this.ui}setPointMarkerVisible(t){return this.jp=t,this.Yp.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Hs.Ps(),this}getPointMarkerVisible(){return this.jp}setPointMarker(t){return this.Yp.forEach((i=>t(i.pointMarker))),this.Wp.push(t),this.Hs.Ps(),this}setResultTableVisible(t){return this.Hp=t,this.Hs.Ps(),this}getResultTableVisible(){return this.Hp}setResultTable(t){return t(this.Qp),this.Hs.Ps(),this}setAutoFit(t){return this.Xp=t,this.Kp.resetValue(),this.qp.resetValue(),this.Hs.Ps(),this}getAutoFit(){return this.Xp}setVisible(t){return this.ci=t,this.Hs.Ps(),this}getVisible(){return this.ci}dispose(){return this.Yp.forEach((t=>t.pointMarker.dispose())),this.Qp.dispose(),this.Wp.length=0,this.Zp(this),this.P.D("dispose",{}),this}tm(){const t=this.Qp,i=this.Hs.gi.oi,s=tt(t.getPosition(r(-1,-1),Ht.PaddedBackground),t.scale,i),e=tt(t.getPosition(r(1,1),Ht.PaddedBackground),t.scale,i),h=s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),n=s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd();return{x:h,y:n,either:h||n,resultTableViewport:this.Qp.Hs.gi.oi,resultTableViewportBounds:{x:{min:Math.min(i.x.getInnerStart(),i.x.getInnerEnd()),max:Math.max(i.x.getInnerStart(),i.x.getInnerEnd())},y:{min:Math.min(i.y.getInnerStart(),i.y.getInnerEnd()),max:Math.max(i.y.getInnerStart(),i.y.getInnerEnd())}}}}th(){if(this.ci){(this.Kp.isAltered()||this.qp.isAltered())&&(this.Kp.resetValue(),this.qp.resetValue(),this.Qp.Vr());let t=this.Xp&&this.tm();if(t&&t.either){const i=t.resultTableViewport;let s=tt(this.Qp.getPosition(r(-1,-1),Ht.PaddedBackground),this.Qp.scale,i),e=tt(this.Qp.getPosition(r(1,1),Ht.PaddedBackground),this.Qp.scale,i);const h=t.resultTableViewportBounds,n=this.Qp.getOrigin();let o={x:0,y:0},a={...n};if(e.y>h.y.max?o.y=h.y.max-e.y:s.y<h.y.min&&(o.y=h.y.min-s.y),(e.x>h.x.max||s.x<h.x.min)&&(a.x*=-1),0!==o.x||0!==o.y||a.x!==n.x||a.y!==n.y){const n=this.Qp.getPosition(),l=tt(n,this.Qp.scale,i);let u={x:l.x+o.x,y:l.y+o.y},c=tt(u,i,this.Qp.scale);this.qp.alter(c),this.Kp.alter(a),this.Qp.Vr(),t=this.tm(),t.x&&(s=tt(this.Qp.getPosition(r(-1,-1),Ht.PaddedBackground),this.Qp.scale,i),e=tt(this.Qp.getPosition(r(1,1),Ht.PaddedBackground),this.Qp.scale,i),e.x>h.x.max?o.x=h.x.max-e.x:s.x<h.x.min&&(o.x=h.x.min-s.x),u={x:l.x+o.x,y:l.y+o.y},c=tt(u,i,this.Qp.scale),this.qp.alter(c),this.Qp.Vr())}}}return this.Yp.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.kg&&this.ci&&this.jp))),this.Yp.forEach((t=>t.pointMarker.th())),this.Qp.th(),this}Vr(){return this.Qp.setVisible(this.kg&&this.ci&&this.Hp),this.Yp.forEach((t=>t.pointMarker.Vr())),this.Qp.Vr(),this}im(t,i){const s=i===this.scale?t:tt(t,i,this.scale);this.Qp.setPosition(s)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Xl=(t,i)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(r(-1,-1)).setMargin(.5*i.cursorPointMarkerSize.x+2).setBackground((t=>{i.cursorResultTableBorderRadius&&Je(t)&&t.setCornerRadius(i.cursorResultTableBorderRadius)}))));class Zl{constructor(t,i){this.sm=t,this.hm=i}alter(t){this.rm=void 0!==this.rm?this.rm:this.hm(),this.nm=t,this.sm(t)}resetValue(){void 0!==this.nm&&(void 0!==this.rm&&this.isAltered()&&this.sm(this.rm),this.rm=void 0,this.nm=void 0)}getNormalValue(){return void 0!==this.rm?this.rm:this.hm()}isAltered(){return void 0!==this.nm&&this.hm()===this.nm}}class Jl extends Wl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.om=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.am=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.lm=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ),this.om.Kh=We.CursorTickMarker,this.am.Kh=We.CursorTickMarker,this.lm.Kh=We.CursorTickMarker}setTickX(t){return t(this.om),this.chart.gi.Ps(),this}setTickY(t){return t(this.am),this.chart.gi.Ps(),this}setTickZ(t){return t(this.lm),this.chart.gi.Ps(),this}setTicks(t){return t(this.om),t(this.am),t(this.lm),this.chart.gi.Ps(),this}dispose(){return super.dispose(),this.om.dispose(),this.am.dispose(),this.lm.dispose(),this}th(){return this.om.setVisible(this.ci&&this.kg),this.am.setVisible(this.ci&&this.kg),this.lm.setVisible(this.ci&&this.kg),super.th()}setPosition(...t){if(0===t.length)return this;const i=t[0];this.kg=!0;const s=this.renderingScale,e=Wa(i.resultTableScale,s),h=e===this.scale?i.resultTable:tt(i.resultTable,e,this.scale);this.Qp.setPosition(h),this.om.setValue(i.axisLocation.x),this.am.setValue(i.axisLocation.y),this.lm.setValue(i.axisLocation.z);let r=this.Yp[0];if(!r){const t=new Mo(this.Hs,this.renderingScale,this.scale,ri,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.Yp.push(r),this.Wp.forEach((i=>i(t)))}return i.pointMarkerShape&&r.pointMarker.setShape(i.pointMarkerShape),i.pointMarkerSize&&r.pointMarker.setSize(i.pointMarkerSize),i.pointMarkerFillStyle&&r.pointMarker.setFillStyle(i.pointMarkerFillStyle),i.pointMarkerStrokeStyle&&r.pointMarker.setStrokeStyle(i.pointMarkerStrokeStyle),r.pointMarker.setPosition(h),this.chart.gi.Ps(),this}}class Ql{constructor(t,i){this.um=[],this.dm=(t,i)=>(this.um.forEach((s=>s(t,i))),t),this.addStyler=t=>new Ql(this.Jp,this.um.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Ql(t,this.um.map((t=>t))),this.fm=(t,i,s,e,h,r)=>this.dm(new Jl(t,i,s,e,this.Jp,h,r),h),this.Jp=t,this.um=i}}const Kl=new Ql(mo,[(t,i)=>{Xl(t,i)}]),ql=(t,i,s,e)=>{t.background.addEventListener(i,s,e),t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.background.removeEventListener(i,s),t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},tu=(t,i,s,e)=>{var h,r,n,o,a,l;vs(),i.camera&&s.Am(),i.x&&t.axisX.fit(null!==(h=i.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=i.stopScroll)&&void 0!==r?r:void 0),i.y&&t.axisY.fit(null!==(n=i.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=i.stopScroll)&&void 0!==o?o:void 0),i.z&&t.axisZ.fit(null!==(a=i.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=i.stopScroll)&&void 0!==l?l:void 0);let u=i.cursor;if(null!==u){u=null!=u?u:gr.ZoomOut;const i=t.engine.setMouseStyle(u);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const c=i.on;c&&ti.requestAnimationFrame((()=>c({event:e})))},iu=(t,i,s,e)=>{vs(),t.restorePreviousZoomState();const h=i.on;h&&ti.requestAnimationFrame((()=>h({event:e})))};class su extends Ll{constructor(t,i,s,e,h,n,o){var l,u;super(t,i,s,i.jg("chart3D bg",0),e,i.gi.bi.chart3DBackgroundFillStyle,i.gi.bi.chart3DBackgroundStrokeStyle,i.gi.bi.chart3DTitleFont,i.gi.bi.chart3DTitleFillStyle,i.gi.bi.chart3DTitleShadow,n,null===(l=null==o?void 0:o.legend)||void 0===l?void 0:l.customLegend),this.gm=1,this.vm=[],this.ym=2,this.pm=!0,this.Sm=!0,this.bm=!0,this.xm=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.la=[],this.Mm=[],this.wm=!1,this._m=()=>{if(this.ui)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.AA().find((t=>t.pv()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.Mm.push(t),this.Mm.length>100&&this.Mm.shift())},this.ma=()=>{const t=this.nv.km();this.Tm.Cm(t),this.Fm.Cm(t);const i=this.Im.viewportChanged(this.Lm());i&&this.Pm(i),this.gi.Ps()},this.P=new Pt,this.gi.Ia(ln.Co),this.Wh.qr("Chart3D"),this.Bm=s.d3(),this.Bm.x.H(-1,1),this.Bm.y.H(-1,1),this.Bm.z.H(-1,1),this.nv=i.Dm("chart3D layer3D",0,this.Bm),this.Tm=i.Em("chart3D series bg",0),this.Fm=i.Rm("chart3D axis ui",1),this.Om={x:new pl(this,(u=()=>this.vy,{...bl(u,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.An().x)),Dv:t=>t.x,Kv:(t,i)=>({x:t.x,y:i.y,z:i.z}),sf:a(0,-1,0),Hv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(0,i.y,i.z),gridlinePositionB:a(0,i.y,-i.z),gridlinePositionC:a(0,-i.y,-i.z)}},ty:()=>!0,iy:()=>!1,Qv:()=>!1}),this.Bm.x,this.bi,this.nv,this.Fm,this.sA,!1,this.vs),y:new pl(this,xl((()=>this.vy)),this.Bm.y,this.bi,this.nv,this.Fm,this.sA,!1,this.vs),z:new pl(this,Ml((()=>this.vy)),this.Bm.z,this.bi,this.nv,this.Fm,this.sA,!1,this.vs)},this.zm=this.nv.Nv([Al.InternalUI],void 0).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this.bi.chart3DBoundingBoxStrokeStyle),this.xy=this.Tm.Cc(this.gi.oi,$n.Simple).Ke(this.bi.chart3DSeriesBackgroundFillStyle).Qe($t).setPointerEvents(!0),this.My=this.Tm.Cc(this.gi.oi,$n.Simple).Ke(xe).Qe(this.bi.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.by(this.xy,this.My),this.Vm({x:1,y:1,z:1},!0),this.Im=new Bl(this.gi.oi,this.sA,this.Bm,((t,i)=>(i&&this.Pm(i),this.nv.Wv(t)))),this.Nm=this.Im.getDefaultCameraConfiguration(this.Gm(this.$m),this.getProjection()),this.Pm(this.Nm);const c=li(o?o.cursorBuilder:void 0,Kl),d=i.Um();this.Ym=IA(this,d,c.fm(d,this.sA,this.sA,ri,this.bi,this),this,"show-pointed",eu,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.addEventListener("resize",this.ma),this.ma(),this.Yg(h,this.sA),this.jm=(t=>{let i=!1,s=!1,e=!1;const h=(t=>{let i=!0,s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled();return{Hm:()=>{i&&(s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled()),i=!1},Am:()=>{t.setCameraLocation(s).setCameraAutomaticFittingEnabled(e),i=!0}}})(t);let n={};const o=()=>Kt({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},n),a=r=>{const n=o();let a=!1,l=!1,u=!1;for(const t of Object.keys(n)){const i=n[t];"object"==typeof i&&(void 0!==i.ctrl&&(a=!0),void 0!==i.shift&&(l=!0),void 0!==i.alt&&(u=!0))}s=r.ctrlKey,i=r.shiftKey,e=r.altKey,("Control"===r.key&&a||"Shift"===r.key&&l||"Alt"===r.key&&u)&&r.preventDefault();const c=Ve(n.restoreDefault,void 0,r,i,s,e);c&&c.code===r.code&&(ki(r),tu(t,c,h,r));const d=Ve(n.restorePrevious,void 0,r,i,s,e);d&&d.code===r.code&&(ki(r),iu(t,d,0,r))},l=t=>{s=t.ctrlKey,i=t.shiftKey,e=t.altKey},u=()=>{s=!1,i=!1,e=!1};ti.addEventListener("keydown",a),ti.addEventListener("keyup",l),ti.addEventListener("blur",u),t.addEventListener("dispose",(()=>{ti.removeEventListener("keydown",a),ti.removeEventListener("keyup",l),ti.removeEventListener("blur",u)}));const c=t=>{},d=n=>{const a=Ne(!1!==t.gi.Ba.Da),l=o(),u=Ve(l.rotate,"drag",n,i,s,e),c=Ve(l.pan,"drag",n,i,s,e);c&&a.push((()=>((t,i,s,e)=>{const h=t.getCursorMode();t.setCursorMode(void 0);let r=i;"mouse"===i.pointerType&&i.preventDefault();const n=e=>{var h,n,o;if(e.pointerId!==i.pointerId)return;ki(e);const a=e.clientX-r.clientX,l=e.clientY-r.clientY;if(r=e,s&&s.x){const i=a+-l;t.axisX.sy(-Math.sign(i)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s&&s.y){const i=-a+l;t.axisY.sy(Math.sign(i)*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s&&s.z){const i=-a+l;t.axisZ.sy(Math.sign(i)*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}const u=null==s?void 0:s.on;u&&ti.requestAnimationFrame((()=>u({event:e})))},o=s=>{s.pointerId===i.pointerId&&(ki(s),t.setCursorMode(h),ti.removeEventListener("pointermove",n),ti.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())},a=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(h),ti.removeEventListener("pointermove",n),ti.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())};ti.addEventListener("pointermove",n),ti.addEventListener("pointerup",o),t.engine.container.addEventListener("pointerdown",a),vs()})(t,n,c,f()))),u&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i,o=!1,a=0;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var r,l;if(e.pointerId!==i.pointerId)return;ki(e);const u={x:e.clientX-n.clientX,y:e.clientY-n.clientY};n=e,a+=js(u),h.Hm(),t.Wm({x:u.x*(null!==(r=s.sensitivity)&&void 0!==r?r:1),y:-u.y*(null!==(l=s.sensitivity)&&void 0!==l?l:1)}),o||(gs(),o=!0);const c=s.on;c&&ti.requestAnimationFrame((()=>c({event:e})))},u=s=>{s.pointerId===i.pointerId&&(ki(s),t.setCursorMode(r),ti.removeEventListener("pointermove",l),ti.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e(),a>=10&&As("click"))},c=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),ti.removeEventListener("pointermove",l),ti.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),e())};ti.addEventListener("pointermove",l),ti.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",c),vs()})(t,n,u,f(),h)));const d=Ve(l.zoom,"drag",n,i,s,e);d&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i;"mouse"===i.pointerType&&i.preventDefault();const o=e=>{var r,o,a,l,u,c,d;if(e.pointerId!==i.pointerId)return;ki(e);const f=e.clientX-n.clientX,A=e.clientY-n.clientY;if(n=e,s.x){const i=f+-A;t.axisX.ey(null!==(r=s.mode)&&void 0!==r?r:"centered",Math.sign(i),null!==(o=s.sensitivity)&&void 0!==o?o:1),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s.y){const i=-f+A;t.axisY.ey(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i),null!==(l=s.sensitivity)&&void 0!==l?l:1),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s.z){const i=-f+A;t.axisZ.ey(null!==(u=s.mode)&&void 0!==u?u:"centered",-Math.sign(i),null!==(c=s.sensitivity)&&void 0!==c?c:1),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}if(s.camera){const i=f+-A;h.Hm(),t.Xm(-.15*Math.sign(i)*(null!==(d=s.sensitivity)&&void 0!==d?d:1))}const g=s.on;g&&ti.requestAnimationFrame((()=>g({event:e})))},a=s=>{s.pointerId===i.pointerId&&(ki(s),t.setCursorMode(r),ti.removeEventListener("pointermove",o),ti.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e())},l=i=>{t.setCursorMode(r),ti.removeEventListener("pointermove",o),ti.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e()};ti.addEventListener("pointermove",o),ti.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),vs()})(t,n,d,f(),h))),a.end();const A=Ve(l.rotate,"pinch",n,i,s,e),g=Ve(l.pan,"pinch",n,i,s,e),v=Ve(l.zoom,"pinch",n,i,s,e);(A||v||g)&&((t,i,s,e,h,n,o)=>{if(!s&&!e&&!h)return;const a=u=>{if(u.pointerId===i.pointerId)return;const c=n();let d;t.engine.container.removeEventListener("pointerdown",a),ti.removeEventListener("pointerup",l);let f,A=u;const g=u,v=t.getCursorMode();t.setCursorMode(void 0);const y=t.getCameraLocation();let p,m,S;const b=[],x=()=>{var n,a,l,c,v,x,w,_;M=void 0;const k=d,C=A;if(b.forEach((t=>{t.pointerId===i.pointerId?d=t:t.pointerId===u.pointerId&&(A=t)})),b.length=0,f=f||d,void 0===d||void 0===k||void 0===f)return;if(!m||!S){const i=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},s=(s,e)=>{const h=t.nv.Wv(s),r=t.nv.Wv(e);if(!h||!r)return{deg:-1,dir:{x:0,y:0}};const n=t.gi.il({engineX:h.x,engineY:h.y}),o=t.gi.il({engineX:r.x,engineY:r.y});return{deg:i(ie(Xs(r,h))),dir:Us(Xs({x:o.clientX,y:o.clientY},{x:n.clientX,y:n.clientY}))}},e=t.axisX.getInterval(),h=t.axisY.getInterval(),r=t.axisZ.getInterval(),n={x:s({x:e.start,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.start}),y:s({x:e.start,y:h.start,z:r.start},{x:e.start,y:h.end,z:r.start}),z:s({x:e.end,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.end})},o=t.gi.tl(f),a=t.gi.tl(g),l=i(ie(Xs({x:a.engineX,y:a.engineY},{x:o.engineX,y:o.engineY})));m=["x","y","z"].reduce(((t,s)=>{const e=Math.abs(n[s].deg-l),h=Math.abs(i(n[s].deg+180)-l),r=Math.min(e,h);return Math.min(r,h)<t.angleDiff?{angleDiff:r,axis:s}:t}),{axis:"x",angleDiff:1e3}).axis,S=n[m].dir}const T=d.clientX-k.clientX,F=d.clientY-k.clientY,I=A.clientX-C.clientX,L=A.clientY-C.clientY,P=Math.sqrt((f.clientX-g.clientX)**2+(f.clientY-g.clientY)**2),B=Math.sqrt((d.clientX-A.clientX)**2+(d.clientY-A.clientY)**2),D=ys.length(y),E=P/B*(null!==(n=null==h?void 0:h.sensitivity)&&void 0!==n?n:1)*D,R=r((null!==(a=null==s?void 0:s.sensitivity)&&void 0!==a?a:1)*(T+I)/2,(null!==(l=null==s?void 0:s.sensitivity)&&void 0!==l?l:1)*-(F+L)/2);o.Hm(),(s||(null==h?void 0:h.camera))&&(t.vm.push({type:"rotate+zoom",rotation:s?R:{x:0,y:0},cameraDistance:(null==h?void 0:h.camera)?E:D}),t.gi.Ps());const O=void 0===p?0:B-js(p)?1:-1,z=p?.25*(null!==(c=null==h?void 0:h.sensitivity)&&void 0!==c?c:1)*(B-js(p)):0;h&&h.x&&("x"===m||void 0===h.y&&void 0===h.z)&&(t.axisX.ey(null!==(v=h.mode)&&void 0!==v?v:"centered",O,z),!1!==h.stopScroll&&t.axisX.setStopped(!0)),h&&h.y&&("y"===m||void 0===h.x&&void 0===h.z)&&(t.axisY.ey(null!==(x=h.mode)&&void 0!==x?x:"centered",O,z),!1!==h.stopScroll&&t.axisY.setStopped(!0)),h&&h.z&&("z"===m||void 0===h.x&&void 0===h.y)&&(t.axisZ.ey(null!==(w=h.mode)&&void 0!==w?w:"centered",O,z),!1!==h.stopScroll&&t.axisZ.setStopped(!0));const V=(k.clientX+C.clientX)/2,N=(k.clientY+C.clientY)/2,G={x:(d.clientX+A.clientX)/2-V,y:(d.clientY+A.clientY)/2-N},$=Ks(Us(G),S),U=js(G)*$*.3*(null!==(_=null==e?void 0:e.sensitivity)&&void 0!==_?_:1);e&&e.x&&("x"===m||void 0===e.y&&void 0===e.z)&&(t.axisX.sy(-U),!1!==e.stopScroll&&t.axisX.setStopped(!0)),e&&e.y&&("y"===m||void 0===e.x&&void 0===e.z)&&(t.axisY.sy(-U),!1!==e.stopScroll&&t.axisY.setStopped(!0)),e&&e.z&&("z"===m||void 0===e.x&&void 0===e.y)&&(t.axisZ.sy(-U),!1!==e.stopScroll&&t.axisZ.setStopped(!0)),p={x:Math.abs(d.clientX-A.clientX),y:Math.abs(d.clientY-A.clientY)};const Y=(null==e?void 0:e.on)||(null==s?void 0:s.on)||(null==h?void 0:h.on);Y&&ti.requestAnimationFrame((()=>Y({event:void 0})))};let M;const w=t=>{t.pointerId!==i.pointerId&&t.pointerId!==u.pointerId||(ki(t),b.push(t),M||(M=ti.requestAnimationFrame(x)))},_=s=>{s.pointerId!==i.pointerId&&s.pointerId!==u.pointerId||(ki(s),t.setCursorMode(v),ti.removeEventListener("pointermove",w),ti.removeEventListener("pointerup",_),c(),M&&ti.cancelAnimationFrame(M))};ti.addEventListener("pointermove",w),ti.addEventListener("pointerup",_),vs()},l=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",a),ti.removeEventListener("pointerup",l))};t.engine.container.addEventListener("pointerdown",a),ti.addEventListener("pointerup",l)})(t,n,A,g,v,f,h)};ql(t,"wheel",(r=>{const n=Ne(!1!==t.gi.Ba.Da),a=o(),l=Ve(a.pan,"wheel",r,i,s,e);l&&n.push((()=>((t,i,s)=>{var e,h,r;ki(i),s.x&&(t.axisX.sy(2*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.sy(2*Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.sy(2*Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0));const n=s.on;n&&ti.requestAnimationFrame((()=>n({event:i})))})(t,r,l)));const u=Ve(a.zoom,"wheel",r,i,s,e);u&&n.push((()=>((t,i,s,e)=>{var h,r,n,o,a,l,u;ki(i),s.x&&(t.axisX.ey(null!==(h=s.mode)&&void 0!==h?h:"centered",-Math.sign(i.deltaY),3*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.ey(null!==(n=s.mode)&&void 0!==n?n:"centered",-Math.sign(i.deltaY),3*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.ey(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i.deltaY),3*(null!==(l=s.sensitivity)&&void 0!==l?l:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),s.camera&&(e.Hm(),t.Xm(.5*Math.sign(i.deltaY)*(null!==(u=s.sensitivity)&&void 0!==u?u:1)));const c=s.on;c&&ti.requestAnimationFrame((()=>c({event:i})))})(t,r,u,h))),n.end()})),ql(t,"dblclick",(r=>{if(r.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),a=o(),l=Ve(a.restoreDefault,void 0,r,i,s,e);l&&l.doubleClick&&(ki(r),tu(t,l,h,r));const u=Ve(a.restorePrevious,void 0,r,i,s,e);u&&u.doubleClick&&(ki(r),iu(t,u,0,r)),n.end()})),ql(t,"click",(r=>{if(r.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),a=o(),l=Ve(a.restoreDefault,void 0,r,i,s,e);l&&l.singleClick&&(ki(r),tu(t,l,h,r));const u=Ve(a.restorePrevious,void 0,r,i,s,e);u&&u.singleClick&&(ki(r),iu(t,u,0,r)),n.end()})),ql(t,"contextmenu",(r=>{if(r.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),a=o(),l=Ve(a.restoreDefault,"rmb",r,i,s,e);l&&l.singleClick&&(ki(r),tu(t,l,h,r));const u=Ve(a.restorePrevious,"rmb",r,i,s,e);u&&u.singleClick&&(ki(r),iu(t,u,0,r)),n.end()}));const f=()=>(A(),g(),()=>{A=ql(t,"pointermove",c),g=ql(t,"pointerdown",d)});let A=ql(t,"pointermove",c),g=ql(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)n={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)n={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?n[i]=t[i]:n[i]={}},getUserInteractions:o}})(this),this.Zm(this.axisX),this.Zm(this.axisY),this.Zm(this.axisZ);const f={position:sl.RightCenter,backgroundVisible:!0,...null==o?void 0:o.legend};this.legend.setOptions(f)}restorePreviousZoomState(t){if(this.Mm.length<=1)return this;this.Mm.pop();const i=this.Mm[this.Mm.length-1];return i?(this.wm=!0,this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ai(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this.wm=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Jm)this.Mm.length=0;else for(;this.Mm.length>1;)this.Mm.unshift();return this}Zm(t){const i=()=>{this.wm||(this.Jm&&ti.clearTimeout(this.Jm),this.Jm=ti.setTimeout((()=>{this._m(),this.Jm=void 0}),300))};ti.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.Mm.forEach((i=>{i.delete(t)}))}))}setUserInteractions(t){return this.jm.setUserInteractions(t),this}getUserInteractions(){return this.jm.getUserInteractions()}setProjection(t){this.nv.Qm(t);const i=this.Im.projectionChanged(this.Lm(),t);return i&&this.Pm(i),this.gi.Ps(),this}getProjection(){return this.nv.Km()}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=Kl){const i=this.Dg(),s=t.fm(i,this.sA,this.sA,this.Ig(i),this.bi,this);return this.$g(s),s}addPointSeries(t){const i=new(t&&t.type||Tl)(this,this.my,this.nv,this.bi,this.gi.vs,t);return this.wy(i,t),i}addLineSeries(t){const i=new _l(this,this.my,this.nv,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs,t);return this.wy(i,t),i}addPointLineSeries(t){const i=new kl(this,this.my,this.nv,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs,t);return this.wy(i,t),i}addSurfaceGridSeries(t){const i=new Rl(this,this.my,this.nv,t,this.bi,this.gi.vs);return this.wy(i,t),i}addSurfaceScrollingGridSeries(t){const i=new Ol(this,this.my,this.nv,t,this.bi,this.gi.vs);return this.wy(i,t),i}addBoxSeries(t){const i=new dl(this,this.my,this.nv,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addMeshModel(t){const i=new Yl(this,this.my,this.nv,this.bi,t,this.gi.vs);return this.wy(i,t),i}translateCoordinate(t,i,s){if(zl(i)||zl(s)||Vl(t)){if(zl(i)&&zl(s)&&Vl(t)){if("axes"===i.id&&"world"===s.id)return this.nv.tS(t);if("world"===i.id&&"axes"===s.id)return this.nv.iS(t);if(i.id===s.id)return t}if(zl(i)&&De(s)&&Vl(t)){const i=this.nv.Wv(t);return i?this.gi.il({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(zl(i)&&Re(s)&&Vl(t)){const i=this.nv.Wv(t);return i?tt(i,this.gi.oi,this.sA):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Xa(t,i,s,this.sA,this.gi)}getDefaultAxisX(){return this.Om.x}getDefaultAxisY(){return this.Om.y}getDefaultAxisZ(){return this.Om.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Om.x,this.Om.y,this.Om.z]}setCameraLocation(t){let i={location:t,direction:ys.normalize(ys.multiply(t,-1))};const s=this.Im.cameraLocationChanged(this.Lm(i));return s&&(i=s),this.Pm(i),this.gi.Ps(),this}getCameraLocation(){return this.nv.getCameraLocation()}getCameraDirection(){return this.nv.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.Im.Yy(t);const i=this.Im.cameraLocationChanged(this.Lm());return i&&this.Pm(i),this}getCameraAutomaticFittingEnabled(){return this.Im.tp()}setBoundingBoxStrokeStyle(t){return this.zm.fh(t).Vv(fl(this.zm.co())),this.nv.Ps(),this}getBoundingBoxStrokeStyle(){return this.zm.co()}setBoundingBox(t){return this.Vm(t,!1),this}Vm(t,i){this.$m=t;const s=this.Gm(t);if(this.Bm.x.X(s.x),this.Bm.y.X(s.y),this.Bm.z.X(-s.z),!i){const t=this.Im.boundingBoxChanged(this.Lm());t&&this.Pm(t)}this.gi.Ps()}getBoundingBox(){return this.$m}th(t){const i=ul.qg(this.Wh,this.Hg);this.Rs.forEach((t=>t.Vr(i,this.Nn)));const s=as;if(ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,s),0!==this.xm){const i=this.xm*t*.006;this.vm.push({type:"wheel-zoom",deltaY:i}),this.xm=Math.sign(this.xm)*Math.max(Math.abs(this.xm)-.01*t,0),0!==this.xm&&this.gi.Ps(!0)}const e=this.getCameraDirection();if(this.vm.length>0){const t=this.Im.applyCameraInteractions(this.Lm(),this.vm);t&&this.Pm(t),this.vm.length=0}this.sS&&ys.equals(this.sS.location,this.Nm.location)&&ys.equals(this.sS.direction,this.Nm.direction)||this.P.D("camerachange",{cameraLocation:this.getCameraLocation()}),this.sS=this.Nm,super.th(t);for(let t=0;t<this.vy.length;t+=1)this.vy[t].cv();for(let t=0;t<this.vy.length;t+=1)this.vy[t].th();this.Om.x.gn(),this.Om.y.gn(),this.Om.z.gn();const h=this.Om.x.Vr(this.Om.x.Jv(e)),r=this.Om.y.Vr(this.Om.y.Jv(e)),n=this.Om.z.Vr(this.Om.z.Jv(e));this.Om.x.th(h),this.Om.y.th(r),this.Om.z.th(n),this.Ym.th(!1,this.vy,void 0),super.Ug();const o=this.Bm,l=a(o.x.getInnerStart(),o.y.getInnerStart(),o.z.getInnerStart()),u=a(o.x.getInnerEnd(),o.y.getInnerEnd(),o.z.getInnerEnd());this.zm.zi().bu([a(u.x,l.y,l.z),a(u.x,u.y,l.z),a(u.x,u.y,u.z),a(u.x,l.y,u.z),a(l.x,l.y,u.z),a(l.x,u.y,u.z),a(u.x,u.y,u.z),a(u.x,u.y,l.z),a(l.x,u.y,l.z),a(l.x,u.y,u.z),a(l.x,l.y,u.z),a(l.x,l.y,l.z)]);const c=[a(l.x,l.y,l.z),a(u.x,l.y,l.z),a(l.x,u.y,l.z),a(u.x,u.y,l.z),a(l.x,l.y,u.z),a(u.x,l.y,u.z),a(l.x,u.y,u.z),a(u.x,u.y,u.z)].map((t=>this.nv.Wv(t))),d=this.nv.Wv(a((l.x+u.x)/2,(l.y+u.y)/2,(l.z+u.z)/2)),f=Gi(c,d),A=[];for(let t=0;t<f.length;t+=1){const i=f[t];Vs(i,d,f[t>0?t-1:f.length-1],f[t<f.length-1?t+1:0])||A.push(i)}const g=Gi(A,d);this.xy.ou(g),this.My.ou(g);for(let t=0;t<this.vy.length;t+=1)this.vy[t].dv();this.Rs.forEach((t=>t.th(i,this.Nn)))}dispose(){return this.la.forEach((t=>{t()})),this.la.length=0,this.Bm.N(),this.nv.N(),this.Fm.N(),this.Tm.N(),this.Ym.N(),super.dispose()}Y(){return this.Bm.x.Y(),this.Bm.y.Y(),this.Bm.z.Y(),super.Y()}j(){return super.j()}Pm(t){this.nv.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ys.addVec(t.location,ys.multiply(t.direction,-this.ym))),this.Nm=t,this.gi.Ps()}Gm(t){return ys.divide(t,ys.length(t)/this.gm)}Lm(t=this.Nm){return{boundingBox:this.Gm(this.$m),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.Om.x),t(this.Om.y),t(this.Om.z),this}getSeries(){return this.vy}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.pm=!!t,this}getAnimationZoom(){return this.pm}Wm(t){this.vm.push({type:"rotate",rotation:t}),this.gi.Ps()}Xm(t){this.pm?Math.sign(this.xm)!==Math.sign(t)?this.xm=t:this.xm+=t:this.vm.push({type:"wheel-zoom",deltaY:t}),this.gi.Ps()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const eu=(t,i,s)=>{var e,h;const r=t.axisX.getTitle()||void 0,n=t.axisY.getTitle()||void 0,o=t.axisZ.getTitle()||void 0;return at(i)?kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...r?[r,""]:[],{text:$e(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...n?[n,""]:[],{text:$e(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:$e(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:$e(i.lut?me(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):ct(i)?kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==i.value?["Value","",{text:$e(i.lut?me(i.lut,i.value):i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...r?[r,""]:[],{text:$e(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[...n?[n,""]:[],{text:$e(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[...o?[o,""]:[],{text:$e(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])};class hu extends Wl{setPosition(...t){const i=this.renderingScale;if(t.length>0){const s=Wa(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:tt(t[0].resultTable,s,this.scale);this.Qp.setPosition(e)}return this.kg=!1,this.Yp.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=Wa(t.pointMarkerScale,i),h=e===this.scale?t.pointMarker:tt(t.pointMarker,e,this.scale);let r=this.Yp[s];if(!r){const t=new Mo(this.Hs,this.renderingScale,this.scale,ri,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.Yp.push(r),this.Wp.forEach((i=>i(t)))}t.pointMarkerShape&&r.pointMarker.setShape(t.pointMarkerShape),t.pointMarkerSize&&r.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&r.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&r.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle),r.pointMarker.setPosition(h),r.targetVisible=((t,i,s=i)=>{const e=i!==s?tt(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),r.targetVisible&&(this.kg=!0)})),this.Hs.Ps(),this}}class ru{constructor(t,i=[]){this.um=[],this.dm=(t,i)=>(this.um.forEach((s=>s(t,i))),t),this.addStyler=t=>new ru(this.Jp,this.um.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new ru(t,this.um.map((t=>t))),this.fm=(t,i,s,e,h)=>this.dm(new hu(t,i,s,e,this.Jp,h),h),this.Jp=t,this.um=i}}const nu=new ru(mo,[Xl]),ou=nu,au=nu,lu=nu,uu=nu,cu=ou,du=new ru(mo,[Xl,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(vr.LeftBottom)))]),fu=nu,Au={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},gu={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},vu={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},yu={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},pu={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},mu={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},Su={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},bu={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},xu={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},Mu={World:mu,USA:Su,NorthAmerica:bu,SouthAmerica:xu,Canada:yu,Europe:pu,Asia:gu,Africa:Au,Australia:vu},wu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},_u=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),ku=(t,i)=>{let s=i.geometry;return s=Cu(t,i,s),s=Tu(t,i,s),s},Cu=(t,i,s)=>{if(t===wu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Tu=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===wu.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=Es(ai(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Fu={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Iu={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Lu extends ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("mapChart bg",0),e,i.gi.bi.mapChartBackgroundFillStyle,i.gi.bi.mapChartBackgroundStrokeStyle,i.gi.bi.mapChartTitleFont,i.gi.bi.mapChartTitleFillStyle,i.gi.bi.mapChartTitleShadow,n,null===(o=null==r?void 0:r.legend)||void 0===o?void 0:o.customLegend),this.eS=[],this.oi=this.Pg.d2({scaleXYConstructor:J}),this.hS=!0,this.rS=this.bi.mapChartSeparateRegionFillStyle,this.nS=this.bi.mapChartSeparateRegionStrokeStyle,this.zh=!0,this.oS=0,this.aS=!0,this.lS=new Map,this.regions=new Pt,this.uS=t=>{this.oi.x.X(t.engineWidth).St([this.nt.left+this.Nn.left,this.nt.right+this.Nn.right]),this.oi.y.X(t.engineHeight).St([this.nt.bottom+this.Nn.bottom,this.nt.top+this.Nn.top+ul.qg(this.Wh,this.Hg)]),this.cS&&this.dS(this.fS,this.oi,this.cS)},this.P=new Pt,this.gi.Ia(ln.Fo),this.zh=!1!==(null==r?void 0:r.animationsEnabled),this.AS=i.Rm("mapChart plotting",0),this.addEventListener("resize",this.uS),this.Wh.qr("Map Chart");const a=i.Um(),l=li(r?r.cursorBuilder:void 0,du);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),void 0,"show-pointed",Bu,(()=>0)),this.gS=this.vs.oA(),this.Yg(h,this.uiScale),this.vS=this.AS.Uv(this.oi).setPointerEvents(this.hS).Ke(this.bi.mapChartFillStyle).Qe(this.bi.mapChartStrokeStyle),this.regions.Vi(this.vS,(t=>{if(!this.yS)return;const i=this.pS(this.yS,t);return i?i.region:void 0})),this.vS.addEventListener("pointermove",((t,i)=>{const s=i.collectionMember;if(!this.yS||!s)return;const e=this.pS(this.yS,s);this.mS(e),this.aS&&e&&this.gi.xs.zs(e.region,!0)})),this.vS.addEventListener("pointerleave",((t,i)=>{const s=i.collectionMember;if(!this.yS||!s)return;const e=this.pS(this.yS,s);this.SS(),this.aS&&e&&this.gi.xs.zs(e.region,!1)})),this.bS=this.AS.Uv(this.oi).setPointerEvents(this.hS).Ke(this.bi.mapChartOutlierRegionFillStyle).Qe(this.bi.mapChartOutlierRegionStrokeStyle);const u=li(r&&r.type,wu.World);this.fS=u,this.xS(u).then((()=>{this.P.D("ready",{})}));const c={renderOnTop:!0,backgroundVisible:!0,...null==r?void 0:r.legend};this.legend.setOptions(c)}setFillStyle(t){return this.vS.Ke(t),this.Rs.forEach((t=>{t.mg()&&t.add(this)})),this.Rs.forEach((t=>t.Os())),this.gi.Ps(),this}getFillStyle(){return this.vS.br()}setStrokeStyle(t){return this.vS.Qe(t),this.gi.Ps(),this}getStrokeStyle(){return this.vS.Za()}setEffect(t){return this.gS.Ls(t),this.gi.Ps(),this}getEffect(){return this.gS.Bs()}setOutlierRegionFillStyle(t){return this.bS.Ke(t),this.gi.Ps(),this}getOutlierRegionFillStyle(){return this.bS.br()}setOutlierRegionStrokeStyle(t){return this.bS.Qe(t),this.gi.Ps(),this}getOutlierRegionStrokeStyle(){return this.bS.Za()}setSeparateRegionFillStyle(t){return this.rS="function"==typeof t?t(this.rS):t,this.eS.forEach((t=>t.Ke(this.rS))),this.gi.Ps(),this}getSeparateRegionFillStyle(){return this.rS}setSeparateRegionStrokeStyle(t){return this.nS="function"==typeof t?t(this.nS):t,this.eS.forEach((t=>t.Qe(this.nS))),this.gi.Ps(),this}getSeparateRegionStrokeStyle(){return this.nS}invalidateRegionValues(t){if(!this.yS||!this.MS)return this.wS=this.wS||[],this.wS.push(t),this;if("function"==typeof t)for(let i=0;i<this.yS.regions.length;i+=1){const s=this.yS.regions[i],e=this.MS[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.MS[i]=h;const t=this.lS.get(s);null==t||t.forEach((t=>{t._S(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.yS.regions.length;t+=1){const s=this.yS.regions[t],e=this.MS[t];if(void 0!==i.value&&i.value!==e&&_u(s,i)){this.MS[t]=i.value;const e=this.lS.get(s);null==e||e.forEach((t=>{t._S(i.value)}))}}return this.Rs.forEach((t=>{t.mg()&&t.add(this)})),this.gi.Ps(),this}setPointerEvents(t){return this.hS=t,this.vS.setPointerEvents(t),this}getPointerEvents(){return this.hS}setHighlight(t){var i;return t=is(t),this.oS=t,null===(i=this.yS)||void 0===i||i.regions.forEach((i=>{this.gi.xs.zs(i,t)})),this.P.D("highlightchange",{highlight:t}),this}getHighlight(){return this.oS}setAnimationHighlight(t){var i;return null===(i=this.yS)||void 0===i||i.regions.forEach((i=>{this.gi.xs.Vs(i,t)})),this}getAnimationHighlight(){var t;return this.gi.xs.Ns(null===(t=this.yS)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.aS=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.aS}async xS(t){const i=await((t,i)=>{let s;if(t===wu.World)s="countries_world.json";else if(t===wu.NorthAmerica)s="countries_northAmerica.json";else if(t===wu.SouthAmerica)s="countries_southAmerica.json";else if(t===wu.Africa)s="countries_africa.json";else if(t===wu.Europe)s="countries_europe.json";else if(t===wu.Asia)s="countries_asia.json";else if(t===wu.USA)s="states_usa.json";else if(t===wu.Canada)s="territoriesProvinces_canada.json";else{if(t!==wu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw ti.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void ti.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${ti.location.origin}/resources${t.fileName}`;ti.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;ti.fetch(s).then((i=>{ti.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>rs(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.Lg.pe);this.MS=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Fu[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.bS.jo().ou(i);if(t===wu.USA){const t=25.8,i=29.7;this.eS.push(this.Fg.qe(this.oi).setPointerEvents(!1).Ke(this.rS).Qe(this.nS).ih({x:-126,y:t}).X({x:10,y:i-t}),this.Fg.qe(this.oi).setPointerEvents(!1).Ke(this.rS).Qe(this.nS).ih({x:-113,y:t}).X({x:7,y:i-t}))}const e=this.gi.xs.Yo(this.vS,{animationEnabled:this.zh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=ku(t,h),n=[];for(const t of r)t.length<3||n.push(this.vS.jo().ou(t));this.lS.set(h,n),e.jo(h,(t=>{n.forEach((i=>i.Fi(t)))}))}if(this.gS._s([this.vS]),this.cS=s,this.dS(t,this.oi,s),this.yS=i,this.wS){for(const t of this.wS)this.invalidateRegionValues(t);this.wS=void 0}this.gi.Ps()}dS(t,i,s){const e=Iu[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.H(n.min.x,n.max.x),i.y.H(n.min.y,n.max.y);const o=this.oi.x.Ct(),a=this.oi.y.Ct();this.P.D("viewchange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}mS(t){this.kS=t,this.gi.Ps()}SS(){this.kS=void 0,this.gi.Ps()}pS(t,i){const s=Array.from(this.lS.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.gi.Fa();if(!h)return;const r=this.gi.tl(h),n=this.MS&&this.MS[s];let o=tt({x:r.engineX,y:r.engineY},this.gi.oi,this.oi);o={x:oi(o.x,this.oi.x.getInnerStart(),this.oi.x.getInnerEnd()),y:oi(o.y,this.oi.y.getInnerStart(),this.oi.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.gi.oi},region:e,value:n,longitude:l,latitude:a,lut:Pe(c)?c.lut:void 0}}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=du){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}setAnimationsEnabled(t){return this.zh=!t,this}getAnimationsEnabled(){return this.zh}getMinimumSize(){}bg(){return[this]}th(t){super.th(t),super.Ug();const i=ul.qg(this.Wh,this.Hg),s=this.Rs.reduce(((t,s)=>{const e=s.Vr(i,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,s);const e=c(this.oi.x.bt()+s.left,this.oi.y.bt()+s.bottom,this.oi.x.Mt()-s.right,this.oi.y.Mt()-s.top);return this.AS.Cm(e),this.Ym.th(!1,[],void 0,{explicitTarget:this.kS}),this.Rs.forEach((t=>t.th(i,this.Nn))),this}dispose(){return this.AS.N(),this.Ym.N(),ol(this.oi),super.dispose()}Y(){return super.Y(),this.oi.Y(),this}j(){return super.j(),this.oi.j(),this}Us(){return Hi(this.getFillStyle(),this.vS.wi())}eh(){return{fill:this.getFillStyle()}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Pu=(t,i)=>{const s=t>0,e=i>0;return`${[Xi(Math.abs(0|t),2),"° ",Xi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Xi(Math.abs(0|i),2),"° ",Xi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},Bu=(t,i,s)=>{var e;const h=[[{text:i.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Pu(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:$e(i.lut?me(i.lut,i.value):i.value.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class Du extends Xr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.CS(s),e,h,{numeric:i.TS({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.TS({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.TS({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.P=new Pt,this.FS=r,this.IS=n,this.LS=o,this.vs=a,this.PS=s,this.BS=i.TS({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.qh=o.wn(s).setPointerEvents(!1).kr(i.TS({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Ke(i.TS({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Fr=this.vs.oA([this.qh]).Ls(e.effectsText)}setTickStrategy(t,i){return super.Ar(t,i)}setStrokeStyle(t){return this.BS="function"==typeof t?t(this.BS):t,this.IS.Ps(),this}getStrokeStyle(){return this.BS}Ur(t){return{}}Wr(t,i,s,e){const h=this.DS(this.PS,t,i.Ph);return{keyValue:t,tickLevel:i,labelText:s,labelPosition:Ws(this.ES(this.PS,t),h.padding),labelAlignment:h.alignment,labelRotation:h.rotation,labelOffset:h.offset}}tn(t,i,s,e){return new Eu(i,t,this.PS,this.LS,this.RS(this.FS,this.PS),this.LS.Ah(this.PS).setPointerEvents(!1))}ir(){return this.PS}th(t){this.OS(this.PS,this.BS,t.yA),this.zS(this.PS,this.qh,t.yA),t.ticksInfo.forEach(((t,i)=>{i.Or.ih(t.labelPosition).Xl(t.labelAlignment).Cr(t.labelRotation).Gl(t.labelOffset.x,t.labelOffset.y),this.VS&&!1===this.VS(i)&&i.Or.setVisible(!1),this.NS(this.PS,i.GS,i.$S,i)}))}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}}class Eu extends Zr{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.GS=h,this.$S=r,h.setPointerEvents(!1),this.As.push(h,r)}}class Ru extends Du{constructor(t,i,s,e,h,r,n,o,a){super(t,Ou((()=>this.AA())),i,s,e,h,r,n,o),this.zv=this.IS.Ah(this.PS).setPointerEvents(!1),this.US=a,this.setScrollStrategy(Pr.expansion),this.setTickStrategy(Br.Numeric),this.setTitle("Amplitude"),this.qh.Kr(s.polarAmplitudeAxisTitleShadow)}AA(){return this.US()}Jr(t,i,s){return{ticksInfo:i,yA:this.an(((t,i)=>{const s=i._n.Ph,e=.5*this.BS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Or.Vr().bc().y);return Math.max(t,e)}),0),updatedTicks:s}}vn(t,i){return Ye(t,i,this.PS.y)}mn(t,i,s){const e=2*Math.abs(i-t),h=this.PS.x.Zt(e);return{start:t+s.start*h*Math.sign(t-i),end:i+s.end*h*Math.sign(i-t)}}ES(t,i){return{x:t.le()?i-t.ae().start:t.ae().start-i,y:0}}RS(t,i){return t.wd(i)}NS(t,i,s,e){const h=e._n.Ph,r=t.le()?e.S-t.ae().start:t.ae().start-e.S;ni(e.S,t.ae().start)||ni(e.S,t.ae().end)?i.setVisible(!1):i.setVisible(!0).Ju(0).gh(360).sc(void 0).tc(0).Qu(r).sc(60).Ke(xe).Qe(h.gridStrokeStyle);const n=.5*this.BS.getThickness();s.ph({x:r,y:-n*t.ri().y}).gh({x:r,y:-(n+h.tickLength)*t.ri().y}).fh(h.tickStyle)}DS(t,i,s){return{alignment:{x:0,y:1},padding:{x:0,y:t.ri().y*-(.5*this.BS.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}OS(t,i,s){const e=t.le()?t.ae().end-t.ae().start:t.ae().start-t.ae().end;this.zv.ph({x:0,y:0}).gh({x:e,y:0}).fh(i)}zS(t,i,s){const e=t.le()?(t.ae().start+t.ae().end)/2-t.ae().start:t.ae().start-(t.ae().start+t.ae().end)/2;i.Xl({x:0,y:1}).ih({x:e,y:-s*t.ri().y})}}const Ou=t=>({...bl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),CS:t=>({getInnerStart:()=>t.ae().start,getInnerEnd:()=>t.ae().end,H:(i,s)=>t.ne(i,s),st:(i,s,e,h,r)=>t.y.st(i,s,e,h,r)}),TS:t=>t.amplitude});class zu{constructor(t,i,s,e){this.YS=!1,this.P=new Pt,this.ke=t,this.jS=i,this.vy=s,this.kc=e}setGeometry(t){return this.HS=t,this.YS=!0,this.ke.gi.Ps(),this}getGeometry(){return this.HS}setPointerEvents(t){return this.kc.setPointerEvents(t),this}dispose(){return this.kc.dispose(),this.jS(this),this.P.D("dispose",{}),this}setVisible(t){const i=this.kc.getVisible()!==t;return this.kc.setVisible(t),i&&this.P.D("visiblechange",{isVisible:t}),this.ke.gi.Ps(),this}getVisible(){return this.kc.getVisible()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Vu extends Xe{constructor(){super(...arguments),this.hv=!0,this.ev=!0}setAutoScrollingEnabled(t){return this.hv=t,this.chart.gi.Ps(),this}getAutoScrollingEnabled(){return this.hv}cv(){}th(){}dv(){}setCursorEnabled(t){return this.ev=t,this}getCursorEnabled(){return this.ev}av(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.ov=t,this}getCursorFormattingOverride(){return this.ov}}class Nu extends Vu{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Hs=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.WS?this.WS.min:void 0}getAmplitudeMax(){return this.WS?this.WS.max:void 0}}const Gu=(t,i)=>{const s=[],e=i.ae().start,h=i.ae().end,r=i.le(),n=i.ce()?1:-1,o=i.fe(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=oi(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},$u=t=>{const i={min:ps,max:ms};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},Uu=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Yu=(t,i)=>{let s=ie(t);for(i.ce()||(s*=-1),s+=180*i.fe()/Math.PI;s<0;)s+=360;s%=360;const e=js(t),h=i.ae(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:th(h.start,h.end,e/r),color:t.color?M(t.color):void 0}};class ju extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Polygon Series",this.XS=[],this.ZS=[],this.JS=t=>{const i=this.ZS.indexOf(t);i>=0&&this.ZS.splice(i,1);const s=this.XS.findIndex((i=>i===t.kc));s>=0&&this.XS.splice(s,1),this.Hs.Ps()},this.P=new Pt,this.Xe=Zi(this.bi.polarPolygonSeriesFillStyle,r),this.Ze=Zi(this.bi.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=ze(e,this.XS,((t,i)=>{const s=t.yd(i);if(s)return tt(s,this.scale,t.gi.oi)}),Is);if(!h)return;const r=tt(h[0],h[1].gi.oi,this.scale);if(!this.QS(h[1]))return;const n=Yu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new zu(this.chart,this.JS,this,this.KS());return this.ZS.push(t),t}setFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const i=this.Xe;for(const t of this.XS)t.Ke(i);return this.Hs.Ps(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const i=this.Ze;for(const t of this.XS)t.Qe(i);return this.Hs.Ps(),this}getStrokeStyle(){return this.Ze}Sv(){return this.hv&&void 0!==this.ZS.find((t=>void 0!==t.qS))&&this.getVisible()}th(){this.ZS.forEach((t=>{(t.YS||this.scale.Ae())&&t.tb&&(t.kc.ou(Gu(t.tb,this.scale)),t.YS=!1,t.kc.Vr())}))}cv(){super.cv();const t=u(ps,ms);this.ZS.forEach((i=>{if(!i.HS)return;const s=!i.YS&&i.tb?i.tb:Uu(i.HS);i.tb=s;const e=!i.YS&&i.qS?i.qS:$u(s);i.qS=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.WS=t}hh(t,i){t.Fi(i),this.Hs.Ps()}eh(){return{fill:this.Xe,stroke:this.Ze}}KS(){const t=this.Hs.Cc(this.scale,$n.Simple).Ke(this.Xe).Qe(this.Ze).Fi(this.getHighlight());return this.XS.push(t),this.ws(t),t}QS(t){return this.ZS.find((i=>i.kc===t))}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Hu extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Area Series",this.ib=[],this.sb=!1,this.eb=!1,this.hb=!1,this.P=new Pt,this.Xe=Zi(this.bi.polarAreaSeriesFillStyle,r),this.Ze=Zi(this.bi.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.ib.length&&this.chart.gi.Ia(ln.Eo);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(ni(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.hb&&(console.warn(`${this.Es} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.hb=!0),this.ib=i.progressivePoints,this.sb=!0,this.WS=$u(this.ib),this.Hs.Ps(),this}getData(){return this.ib}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Hs.Ps(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Hs.Ps(),this}getStrokeStyle(){return this.Ze}setConnectDataAutomaticallyEnabled(t){return this.eb=t,this.Hs.Ps(),this}getConnectDataAutomaticallyEnabled(){return this.eb}Sv(){return this.hv&&this.ib.length>0&&this.getVisible()}eh(){return{fill:this.Xe,stroke:this.Ze}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Wu extends Hu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.rb=this.Hs.Cc(this.scale,$n.Simple).Fi(this.getHighlight()),this.ws(this.rb)}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=this.rb.yd(e);if(!h)return;const r=Yu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}th(){if(this.sb||this.scale.Ae()){const t=this.ib,i=!0===this.eb?Gu(t,this.scale):[...Gu(t,this.scale),{x:0,y:0}];this.rb.ou(i).Ke(this.Xe).Qe(this.Ze),this.sb=!1,this.rb.Vr()}}hh(t,i){t.Fi(i),this.Hs.Ps()}}class Xu extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Line Series",this.ib=[],this.sb=!1,this.eb=!1,this.P=new Pt,this.hc=Zi(this.bi.polarLineSeriesStrokeStyle,r),this.nb=t.Nv(e,void 0,[Al.UserSeries]).fh(this.hc).Fi(this.getHighlight()),this.ws(this.nb)}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=this.nb.ob(e);if(!h)return;const r=Yu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.ib.length&&this.chart.gi.Ia(ln.Eo),this.ib=Uu(t),this.sb=!0,this.WS=$u(this.ib),this.Hs.Ps(),this}getData(){return this.ib}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.nb.fh(i),this.Hs.Ps(),this}getStrokeStyle(){return this.hc}setConnectDataAutomaticallyEnabled(t){return this.eb=t,this.Hs.Ps(),this}getConnectDataAutomaticallyEnabled(){return this.eb}Sv(){return this.hv&&this.ib.length>0&&this.getVisible()}hh(t,i){t.Fi(i),this.Hs.Ps()}th(){if(this.sb||this.scale.Ae()){const t=Gu(this.ib,this.scale),i=Es(t);this.eb?(t.push({...t[0]}),this.nb.Iu(!0)):this.nb.Iu(!1),this.nb.zi().bu(t).Ci(i),this.sb=!1,this.nb.Vr()}}eh(){return{stroke:this.hc}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Zu extends sn{constructor(t,i,s,e,h,r,n,o,a){super(),this.mi=ls(),this.ui=!1,this.P=new Pt,this.ab=e,this.lb=h,this.ub=r,this.cb=n,this.fb=o,this.Hs=t,this.scale=i,this.Ab=s,this.bi=a}gb(t){this.yb=t}setHighlight(t){const i=is(t);return this.pb=i<=0?void 0:i,this.yb&&this.yb.Fi(i),this.P.D("highlightchange",{highlight:i}),this}dispose(){return this.Ab&&this.Ab(this),this.Hs.gi.Ps(),this.P.D("dispose",{}),this.ui=!0,this}setVisible(t){return super.setVisible(t),this.ub(),this.Hs.gi.Ps(),this}isDisposed(){return this.ui}setPointerEvents(t){return this.cb(this,t),this}getPointerEvents(){return this.fb(this)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Ju extends Zu{constructor(t,i,s,e,h,r,n,o,a,l,c,d,f,A,g,v,y,p){super(i,s,e,h,r,n,o,a,p),this.mb=1,this.Sb=1,this.vy=t,this.Hs=i,this.scale=s,this.dimensionStrategy=l,this.start=c,this.end=d,this.lowerExtreme=f,this.lowerQuartile=A,this.median=g,this.upperQuartile=v,this.upperExtreme=y,this.boundaries=u(this.dimensionStrategy.toPoint(c,f),this.dimensionStrategy.toPoint(d,y)),this.bb=this.bi.boxSeriesBodyFillStyle,this.xb=this.bi.boxSeriesBodyStrokeStyle,this.hc=this.bi.boxSeriesStrokeStyle,this.Mb=this.bi.boxSeriesMedianStrokeStyle,this.Vr()}Ji(t,i){const s=this.vy.Ws.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...s,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return this.boundaries}setBodyWidth(t){return this.mb=t,this.Vr(),this}getBodyWidth(){return this.mb}setBodyFillStyle(t){return this.bb="function"==typeof t?t(this.bb):t,this.lb(),this}getBodyFillStyle(){return this.bb}setBodyStrokeStyle(t){return this.xb="function"==typeof t?t(this.xb):t,this.lb(),this}getBodyStrokeStyle(){return this.xb}setTailWidth(t){return this.Sb=t,this.Vr(),this}getTailWidth(){return this.Sb}setStrokeStyle(t){return this.hc="function"==typeof t?t(this.hc):t,this.lb(),this}getStrokeStyle(){return this.hc}setMedianStrokeStyle(t){return this.Mb="function"==typeof t?t(this.Mb):t,this.lb(),this}getMedianStrokeStyle(){return this.Mb}Vr(){this.ab()}getDominantStyle(){return this.getBodyFillStyle()}}class Qu extends Vu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.js=!0,this.As=new Map,this.chart=t,this.Hs=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.scale=Be(e.oi,h.oi),this._b=t.kb,t.kb+=1,this.Cb(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}hl(){const t=Array.from(this.As.keys());for(const i of t){const t=i.hl();if(t)return t}}setClipping(t){return this.js=t,this.Hs.Ps(),this}getClipping(){return this.js}attacheAxis(){this.Tb=this.axisXAttachHandler(this),this.Fb=this.axisYAttachHandler(this)}ws(t,i){super.ws(t,i),t.rl(this._b)}getName(){const t=this.Ms(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Es||i.length>0&&i||"Series"}setDrawOrder(t){return this._b=t.seriesDrawOrderIndex,this.As.forEach(((t,i)=>{i.rl(this._b)})),this.chart.gi.Ps(),this}dispose(){return super.dispose(),this.Tb(this),this.Fb(this),this.chart.legend.remove(this),this}dv(){super.dv(),Ge(this.js,Array.from(this.As.keys()),this.scale)}getXMax(){var t;return null!==(t=this.Ib(!1))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.Lb(!1))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.Pb(!1))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.Bb(!1))&&void 0!==t?t:0}getBoundaries(){return u(r(this.getXMin()||0,this.getYMin()||0),r(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Ku=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}};class qu extends Qu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Db=[],this.Eb=void 0,this.Rb=!1,this.Ab=t=>{const i=this.Db.findIndex((i=>i===t));i>=0&&this.Db.splice(i,1),this.Rb=!0,this.Eb=void 0,this.Hs.Ps()},this.ab=()=>{this.Eb=void 0,this.Rb=!0,this.chart.gi.Ps()},this.lb=()=>{this.Rb=!0,this.chart.gi.Ps()},this.ub=()=>{this.Eb=void 0,this.Rb=!0,this.chart.gi.Ps()},this.cb=(t,i)=>{this.setPointerEvents(i)},this.Ob=t=>this.getPointerEvents(),this.cs=He.onHoverIndividual}getFigures(){return this.Db.slice()}setPointerEvents(t){return super.setPointerEvents(t),this.As.forEach(((i,s)=>s.setPointerEvents(t))),this}pv(){return this.Db.length>0}th(){super.th(),this.Rb&&(this.zb(this.Db),this.Rb=!1)}clear(){return this.Db.slice().forEach(hi),this.Db.length=0,this.Rb=!0,this.Eb=void 0,this.Hs.Ps(),this}Vb(t,i){void 0!==i?this.Db.splice(i,0,t):this.Db.push(t),this.Rb=!0,this.Nb&&this.Nb(t),this.P.Ni(t),this.Hs.Ps(),t.addEventListener("pointerenter",(()=>{this.cs===He.onHoverIndividual&&t.setHighlight(!0)})),t.addEventListener("pointerleave",(()=>{this.cs===He.onHoverIndividual&&t.setHighlight(!1)}))}Sv(){return this.hv&&this.Db.length>0&&this.getVisible()}setDefaultStyle(t){return this.Nb=t,this.Db.forEach(t),t(this.Gb),this.Rb=!0,this.chart.gi.Ps(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.Db.forEach((i=>i.setVisible(t))),this}Ib(){return this.Eb||(this.Eb=this.$b()),this.Eb.max.x}Lb(){return this.Eb||(this.Eb=this.$b()),this.Eb.min.x}Pb(){return this.Eb||(this.Eb=this.$b()),this.Eb.max.y}Bb(){return this.Eb||(this.Eb=this.$b()),this.Eb.min.y}An(){return r(0,0)}$b(){const t=u(n(ps,ps),n(ms,ms));for(let i=0;i<this.Db.length;i+=1)if(this.Db[i].getVisible()){const s=this.Db[i].wb();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}eh(){return{fill:this.Db.length>0?this.Db[0].getDominantStyle():this.Gb.getDominantStyle()}}}class tc extends qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Es="Box Series",this.Ub=os(),this.Yb=t=>tt(this.Ws.toPoint((t.start+t.end)/2,t.median),this.scale,this.Hs.gi.oi),this.P=new Pt,this.chart.gi.Ia(ln.Bo),this.Ws=a,this.Gb=new Ju(this,this.Hs,this.scale,this.Ab,ri,ri,ri,ri,(t=>!1),this.Ws,0,0,0,0,0,0,0,this.bi).dispose(),this.jb=new yl((()=>{const t=this.Hs.bA(this.scale);return this.ws(t,{setEventHandlers:!1,pointerEventsDisabled:!0}),t}),((t,i,s)=>(t.fh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.MA(i.start,i.end),s}))))),this.Hb=new yl((()=>{const t=this.Ub.Zi(this.Hs.Uv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.ou(i.vertices),this.Ub.Qi(s,i.figure),i.figure.gb(s),s})))),(()=>{this.Ub.zi()}),((t,i)=>{this.Cs(i)}))}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,Is);if(!h)return;const r=tt(h[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){if(!s)return;const e=this.Db.find((t=>t.yb===s));if(!e)return;const h=this.Ws.toPoint((e.start+e.end)/2,e.median);return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,start:e.start,end:e.end,lowerExtreme:e.lowerExtreme,lowerQuartile:e.lowerQuartile,median:e.median,upperQuartile:e.upperQuartile,upperExtreme:e.upperExtreme,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}Cb(t){if(!(t instanceof J||t instanceof Q))throw new Error("BoxSeries only supports Linear Axes")}zb(t){const i=this.Hb.zA(),s=this.jb.zA();t.forEach((t=>{if(!t.getVisible())return;const e=this.Ws.toPoint((t.start+t.end-t.mb*(t.end-t.start))/2,t.lowerQuartile),h=this.Ws.toPoint((t.end-t.start)*t.mb,t.upperQuartile-t.lowerQuartile),r=this.Ws.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Ws.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Ws.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Ws.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Ws.toPoint((t.start+t.end-t.Sb*(t.end-t.start))/2,t.lowerExtreme),u=this.Ws.toPoint((t.start+t.end+t.Sb*(t.end-t.start))/2,t.lowerExtreme),c=this.Ws.toPoint((t.start+t.end-t.Sb*(t.end-t.start))/2,t.upperExtreme),d=this.Ws.toPoint((t.start+t.end+t.Sb*(t.end-t.start))/2,t.upperExtreme),f=this.Ws.toPoint((t.start+t.end-t.mb*(t.end-t.start))/2,t.median),A=this.Ws.toPoint((t.start+t.end+t.mb*(t.end-t.start))/2,t.median);i.add({mi:t.mi,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.bb,strokeStyle:t.xb}),s.add({mi:0,start:r,end:n,figure:t},{strokeStyle:t.hc}),s.add({mi:0,start:o,end:a,figure:t},{strokeStyle:t.hc}),s.add({mi:0,start:l,end:u,figure:t},{strokeStyle:t.hc}),s.add({mi:0,start:c,end:d,figure:t},{strokeStyle:t.hc}),s.add({mi:0,start:f,end:A,figure:t},{strokeStyle:t.Mb})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Ju(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.Ws,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.bi);return this.Vb(i),this.Rb=!0,this.chart.gi.Ps(),i}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class ic extends Zu{constructor(t,i,s,e,h,n,o,a,l,c,d){super(i,s,e,h,n,o,a,l,c),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.ru=u(r(0,0),r(0,0)),this.vy=t,this.Hs=i,this.scale=s,this.Xe=Zi(c.ellipseSeriesFillStyle,d),this.Ze=Zi(c.ellipseSeriesStrokeStyle,d)}Ji(t,i){const s=this.getDimensions(),e=r(s.x,s.y);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...e,figure:this,...this.getDimensions(),series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return this.ru}setDimensions(t){return this.dimensions=t,this.ru=u(r(t.x-t.radiusX,t.y-t.radiusY),r(t.x+t.radiusX,t.y+t.radiusY)),this.ab(),this.Hs.Ps(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.lb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.lb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class sc extends qu{constructor(t,i,s,e,h,n,o,a,l,u,c){super(t,i,s,e,h,n,o,a,l,u),this.Es="Ellipse Series",this.Ub=os(),this.Yb=t=>{const i=t.getDimensions(),s=r(i.x,i.y);return tt(s,this.scale,this.Hs.gi.oi)},this.P=new Pt,this.chart.gi.Ia(ln.Bo),this.Wb=c,this.Gb=new ic(this,this.Hs,this.scale,ri,ri,ri,ri,ri,(t=>!1),this.bi,this.Wb).dispose(),this.Hb=new yl((()=>{const t=this.Ub.Zi(this.Hs.Uv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.ou(i.vertices),this.Ub.Qi(s,i.figure),i.figure.gb(s),s})))),(()=>{this.Ub.zi()}),((t,i)=>{this.Cs(i)}))}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,Is);if(!h)return;const r=tt(h[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){if(!s)return;const e=this.Db.find((t=>t.yb===s));if(!e)return;const h=e.getDimensions();return{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}Cb(t){if(!(t instanceof J||t instanceof Q))throw new Error("EllipseSeries only supports Linear Axes")}zb(t){const i=this.Hb.zA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({mi:t.mi,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new ic(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.bi,this.Wb).setDimensions(t);return this.Vb(i),this.Rb=!0,this.chart.gi.Ps(),i}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class ec extends Zu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(i,s,e,h,r,n,o,a,l),this.Xb=[],this.ru=Ss,this.vy=t,this.Hs=i,this.scale=s,this.Xe=Zi(l.polygonSeriesFillStyle,u),this.Ze=Zi(l.polygonSeriesStrokeStyle,u)}Ji(t,i){const s=this.wb(),e=r((s.min.x+s.max.x)/2,(s.min.y+s.max.y)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...e,figure:this,coordinates:this.getDimensions(),series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return this.ru}setDimensions(t){return this.Xb=t,this.ru=Es(this.Xb),this.ab(),this.Hs.Ps(),this}getDimensions(){return this.Xb}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.lb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.lb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class hc extends qu{constructor(t,i,s,e,h,n,o,a,l,u,c){super(t,i,s,e,h,n,o,a,l,u),this.Es="Polygon Series",this.Ub=os(),this.Yb=t=>{const i=t.wb(),s=r((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return tt(s,this.scale,this.Hs.gi.oi)},this.P=new Pt,this.chart.gi.Ia(ln.Bo),this.Wb=c,this.Gb=new ec(this,this.Hs,this.scale,ri,ri,ri,ri,ri,(t=>!1),this.bi,this.Wb).dispose(),this.Hb=new yl((()=>{const t=this.Ub.Zi(this.Hs.Uv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.ou(i.vertices),this.Ub.Qi(s,i.figure),i.figure.gb(s),s})))),(()=>{this.Ub.zi()}),((t,i)=>{this.Cs(i)}))}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,Is);if(!h)return;const r=tt(h[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){if(!s)return;const e=this.Db.find((t=>t.yb===s));if(!e)return;const h=e.wb(),n=r((h.min.x+h.max.x)/2,(h.min.y+h.max.y)/2);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,coordinates:e.getDimensions(),figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}Cb(t){}zb(t){const i=this.Hb.zA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({mi:t.mi,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new ec(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.bi,this.Wb).setDimensions(t);return this.Vb(i),this.Rb=!0,this.chart.gi.Ps(),i}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class rc extends Zu{constructor(t,i,s,e,h,n,o,a,l,c,d){super(i,s,e,h,n,o,a,l,c),this.Zb={x:0,y:0,width:0,height:0},this.Jb={x1:0,y1:0,x2:0,y2:0},this.ru=u(r(0,0),r(0,0)),this.vy=t,this.Xe=Zi(c.rectangleSeriesFillStyle,d),this.Hs=i,this.scale=s,this.Ze=Zi(c.rectangleSeriesStrokeStyle,d)}setCornerRadius(t){return this.Qb=t,this.ab(),this}getCornerRadius(){return this.Qb}Ji(t,i){const s=this.getDimensionsPositionAndSize(),e=r(s.x+s.width/2,s.y+s.height/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...e,figure:this,positionAndSize:this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return this.ru}setDimensions(t){return"x"in t?(this.Zb=t,this.Jb={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Jb=t,this.Zb={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.ru=Es([this.Zb,r(this.Zb.x+this.Zb.width,this.Zb.y+this.Zb.height)]),this.ab(),this.Hs.Ps(),this}getDimensionsPositionAndSize(){return this.Zb}getDimensionsTwoPoints(){return this.Jb}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.lb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.lb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class nc extends qu{constructor(t,i,s,e,h,n,o,a,l,u,c,d){super(t,i,s,e,h,n,o,a,l,u),this.Es="Rectangle Series",this.Kb=os(),this.qb="xy",this.Yb=t=>{const i=t.getDimensionsPositionAndSize(),s=r(i.x+i.width/2,i.y+i.height/2);return tt(s,this.scale,this.Hs.gi.oi)},this.P=new Pt,this.chart.gi.Ia(ln.Bo),this.Wb=c,this.Ba=d,this.Gb=new rc(this,this.Hs,this.scale,ri,ri,ri,ri,ri,(t=>!1),this.bi,this.Wb).dispose(),this.tx=new yl((()=>{const t=this.Kb.Zi(this.Hs.pd(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.xd(i.x1,i.y1,i.x2,i.y2).bd(i.roundedCorners?{extent:i.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.Kb.Qi(s,i.figure),i.figure.gb(s),s})))),(()=>{this.Kb.zi()}),((t,i)=>{this.Cs(i)}))}ix(){var t,i,s;let e,h;if(!(null===(t=this.Ba)||void 0===t?void 0:t.solvePlane)&&this.Db.length>=3){let t;for(const i of this.Db){const s=i.getDimensionsPositionAndSize(),r={x:s.x+s.width/2,y:s.y+s.height/2};if(t){const i=r.x-t.x,s=0===i?e:i>0?"progressive":"regressive";e=null===e?null:void 0===e?s:s!==e?null:e;const n=r.y-t.y,o=0===n?h:n>0?"progressive":"regressive";h=null===h?null:void 0===h?o:o!==h?null:h}t=r}}const r=null!==(s=null===(i=this.Ba)||void 0===i?void 0:i.solvePlane)&&void 0!==s?s:e?"x":h?"y":"xy";this.qb=r}Ms(){return"x"===this.qb?"ProgressiveX":"y"===this.qb?"ProgressiveY":void 0}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h="x"===this.qb?(t,i)=>Math.abs(t.x-i.x):"y"===this.qb?(t,i)=>Math.abs(t.y-i.y):Is,r=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,h);if(!r)return;const n=tt(e,this.Hs.gi.oi,this.scale);if("x"===this.qb&&!Fs(n.x,this.getXMin(),this.getXMax()))return;if("y"===this.qb&&!Fs(n.y,this.getYMin(),this.getYMax()))return;const o=tt(r[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:o,resultTableScale:this.scale,pointMarker:o,pointMarkerScale:{x:this.axisX,y:this.axisY}},...o,figure:r[1],positionAndSize:r[1].getDimensionsPositionAndSize(),...r[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){if(!s)return;const e=this.Db.find((t=>t.yb===s));if(!e)return;const h=e.getDimensionsPositionAndSize(),n=r(h.x+h.width/2,h.y+h.height/2);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,positionAndSize:e.getDimensionsPositionAndSize(),...e.getDimensionsTwoPoints(),figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}Cb(t){}zb(t){const i=this.tx.zA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({mi:t.mi,figure:t,roundedCorners:t.Qb,...s},{fillStyle:e,strokeStyle:h})})),i.finishPlot(),this.ix()}add(t){const i=new rc(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.bi,this.Wb).setDimensions(t);return this.Vb(i),this.Rb=!0,this.chart.gi.Ps(),i}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class oc extends Zu{constructor(t,i,s,e,h,n,o,a,l,c,d){super(i,s,e,h,n,o,a,l,c),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.ru=u(r(0,0),r(0,0)),this.vy=t,this.bi=c,this.Hs=i,this.scale=s,this.Ze=Zi(c.segmentSeriesStrokeStyle,d)}Ji(t,i){const s=this.getDimensions(),e=r((s.startX+s.endX)/2,(s.startY+s.endY)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...e,figure:this,...this.getDimensions(),series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return this.ru}setDimensions(t){return this.dimensions=t,this.ru=u(r(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),r(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.ab(),this.Hs.Ps(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.lb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){const t=this.Ze;return t!==$t?t.getFillStyle():xe}}class ac extends qu{constructor(t,i,s,e,h,n,o,a,l,u,c){super(t,i,s,e,h,n,o,a,l,u),this.Es="Segment Series",this.sx=os(),this.Yb=t=>{const i=t.getDimensions(),s=r((i.startX+i.endX)/2,(i.startY+i.endY)/2);return tt(s,this.scale,this.Hs.gi.oi)},this.P=new Pt,this.chart.gi.Ia(ln.Bo),this.Wb=c,this.Gb=new oc(this,this.Hs,this.scale,ri,ri,ri,ri,ri,(t=>!1),this.bi,this.Wb).dispose(),this.jb=new yl((()=>{const t=this.sx.Zi(this.Hs.bA(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.fh(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.MA(i.start,i.end),this.sx.Qi(s,i.figure),i.figure.gb(s),s})))),(()=>{this.sx.zi()}),((t,i)=>{this.Cs(i)}))}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,Is);if(!h)return;const r=tt(h[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){if(!s)return;const e=this.Db.find((t=>t.yb===s));if(!e)return;const h=e.getDimensions(),n=r((h.startX+h.endX)/2,(h.startY+h.endY)/2);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,...h,figure:e,series:this,axisX:this.axisX,axisY:this.axisY}}Cb(t){}zb(t){const i=this.jb.zA();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({mi:t.mi,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new oc(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.bi,this.Wb).setDimensions(t);return this.Vb(i),this.Rb=!0,this.chart.gi.Ps(),i}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const lc={x:0,y:0};class uc extends Zu{constructor(t,i,s,e,h,r,n,o,a,l,u){var c;super(i,s,e,h,r,n,o,a,l),this.pl="Text",this.ra=lc,this.hf=lc,this.wl=0,this.nt=as,this.vy=t,this.Xe=l.textSeriesFillStyle?Zi(l.textSeriesFillStyle,u):l.uiTextFillStyle,this.Kn=null!==(c=l.textSeriesFont)&&void 0!==c?c:l.uiTextFont,this.kc=this.Hs.wn(s,!1).Kr(l.textSeriesShadow),this.kc.ml=!0,this.P.Oi(this.kc,{getExtraData:(t,i,s)=>this.Ji(s,t)}),this.addEventListener("dispose",(()=>this.kc.dispose()))}Ji(t,i){const s=this.ra;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.vy.axisX,y:this.vy.axisY}},...s,figure:this,series:this.vy,axisX:this.vy.axisX,axisY:this.vy.axisY}}wb(){return{min:{x:this.ra.x,y:this.ra.y},max:{x:this.ra.x,y:this.ra.y}}}hx(){this.kc.qr(this.pl).ih(this.ra).Xl(this.hf).Cr(this.wl).xn(this.nt).Ke(this.Xe).kr(this.Kn)}getSizePixels(){return this.hx(),this.kc.Vr().bc()}getBoundingBox(){return this.hx(),this.kc.Vr().yc()}setText(t){return this.pl=t,this.ab(),this}getText(){return this.pl}setLocation(t){return this.ra=t,this.ab(),this}getLocation(){return this.ra}setAlignment(t){return this.hf=t,this.ab(),this}getAlignment(){return this.hf}setRotation(t){return this.wl=t,this.ab(),this}getRotation(){return this.wl}setMargin(t){return this.nt=g(this.nt,t),this.ab(),this}getMargin(){return this.nt}setLabelShadow(t){return this.kc.Kr(t),this.Hs.Ps(),this}getLabelShadow(){return this.kc.Nl()}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.lb(),this}getFillStyle(){return this.Xe}setFont(t){return this.Kn="function"==typeof t?t(this.Kn):t,this.lb(),this}getFont(){return this.Kn}getDominantStyle(){return this.Xe}}class cc extends qu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.Es="Text Series",this.Yb=t=>tt(t.getLocation(),this.scale,this.Hs.gi.oi),this.P=new Pt,this.Wb=u,this.Gb=new uc(this,this.Hs,this.scale,ri,ri,ri,ri,ri,(t=>!1),this.bi,this.Wb).dispose()}Cb(t){}zb(t){t.forEach((t=>{t.hx(),t.kc.setVisible(t.getVisible())}))}add(t){const i=new uc(this,this.Hs,this.scale,this.Ab,this.ab,this.lb,this.ub,this.cb,this.Ob,this.bi,this.Wb);return(null==t?void 0:t.alignment)&&i.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&i.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&i.setFont(t.font),(null==t?void 0:t.location)&&i.setLocation(t.location),(null==t?void 0:t.margin)&&i.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&i.setRotation(t.rotation),(null==t?void 0:t.text)&&i.setText(t.text),this.Vb(i),this.Rb=!0,this.ws(i.kc,{setEventHandlers:!1,isText:!0}),this.chart.gi.Ps(),this.P.Oi(i.kc,{getExtraData:(t,s,e)=>i.Ji(e,t)}),i}Ji(t,i,s){return cs({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY};if(0===this.Db.length)return;const h=ze(e,this.Db.filter((t=>t.getVisible())),this.Yb,Is);if(!h)return;const r=tt(h[0],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const dc=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},fc=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),l={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(l),s+=o}return e},Ac=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const n=t[s],o={x:n.startPrimary,y:n.startSecondary},a={x:o.x+n.lengthPrimary-1,y:o.y+n.lengthSecondary-1},l=[o,{x:a.x,y:o.y},a,{x:o.x,y:a.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),o={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},a=[{x:i.primary,y:i.secondary},{x:o.x,y:i.secondary},o,{x:i.primary,y:o.y}];if(!ws(l,a))return;let c=h.get(t);c||(c={type:n.type,dataInvalidationRanges:[]},h.set(t,c));const d=(f=l,A=a,u(r(Math.max(Math.min(f[0].x,f[2].x),Math.min(A[0].x,A[2].x)),Math.max(Math.min(f[0].y,f[2].y),Math.min(A[0].y,A[2].y))),r(Math.min(Math.max(f[0].x,f[2].x),Math.max(A[0].x,A[2].x)),Math.min(Math.max(f[0].y,f[2].y),Math.max(A[0].y,A[2].y)))));var f,A;const g={primary:d.min.x-i.primary,secondary:d.min.y-i.secondary},v={primary:1+d.max.x-d.min.x,secondary:1+d.max.y-d.min.y};let y=!1;const p=[{x:g.primary,y:g.secondary},{x:g.primary+v.primary,y:g.secondary},{x:g.primary+v.primary,y:g.secondary+v.secondary},{x:g.primary,y:g.secondary+v.secondary}];for(let t=0;t<c.dataInvalidationRanges.length;t+=1)if(!y){const i=c.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(ws(p,s)){const t=_s(p,s);i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,y=!0}}y||c.dataInvalidationRanges.push({tileInvalidationLength:v,tileInvalidationOffset:g})}))}return h},gc=t=>vo(t)||Array.isArray(t)&&"number"==typeof t[0],vc=t=>!gc(t)&&Array.isArray(t),yc=(t,i,s,e)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);if(vc(i.values))for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}else for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const n=s-i.startSecondary,o=s-t.iFirstVector.secondary,a=h*i.lengthSecondary+n,l=i.values[a];e[r+o]=l}}}));else{const h=t[0],r=s(h);if(vc(i.values))for(let t=0;t<i.lengthPrimary;t+=1){const s=t*h.sizeHeatmapDataVectors.secondary;r.set(i.values[t],s)}else e(h,go(i.values)===Float32Array?i.values:new Float32Array(i.values))}},pc=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.nx(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.nx(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.nx(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},mc=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,d=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RED,u.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);l.texSubImage2D(l.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(o.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class Sc extends Qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Es="Heatmap Grid Series",this.ox=!0,this.ip={},this.chart.gi.Ia(ln.Po),this.lx=a,this.bi=l;const d=c;this.Xe=Zi(l.heatmapGridSeriesFillStyle,d),this.sp=Zi(this.bi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,ux:a.maxTileSize};this.Ba=f,this.Ax=this.Hs.gx(this.scale,[],f).Ke(this.Xe).ep(this.sp).Fi(this.getHighlight()),this.ws(this.Ax),this.ox=!0,this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=tt(e,this.Hs.gi.oi,this.scale),r=_A(i)?this.Ax.vx(h):this.Ax.yd(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Pe(this.Xe)?this.Xe.lut:void 0}}Ji(t,i,s){return cs({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:Pe(this.Xe)?this.Xe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}rp(){const t=this.ip.start||{x:0,y:0};let i;i=this.ip.end?{x:(this.ip.end.x-t.x)/this.Ba.columns,y:(this.ip.end.y-t.y)/this.Ba.rows}:this.ip.step?this.ip.step:{x:1,y:1},this.Ax.np(t,i),this.chart.gi.Ps()}setStart(t){return this.ip.start=t,this.rp(),this}getStart(){return this.Ax.op().start}setStep(t){return this.ip.step=t,this.rp(),this}getStep(){return this.Ax.op().step}setEnd(t){return this.ip.end=t,this.rp(),this}getEnd(){return this.Ax.op().end}setContours(t){var i,s,e;return this.Ax.ap(t?{showLabels:null===(i=t.showLabels)||void 0===i||i,levels:t.levels.map((t=>{var i,s,e,h,r,n;return{value:t.value,strokeStyle:null!==(s=null!==(i=t.strokeStyle)&&void 0!==i?i:this.bi.heatmapGridSeriesContourStrokeStyle)&&void 0!==s?s:new wh({thickness:1,fillStyle:new ke({color:m(0,0,0)})}),labelFillStyle:new ke({color:null!==(e=t.labelColor)&&void 0!==e?e:this.bi.heatmapGridSeriesContourLabelColor}),labelFont:(r=t.labelFont,n=null!==(h=this.bi.heatmapGridSeriesContourLabelFont)&&void 0!==h?h:this.bi.uiTextFont,void 0===r?n:B(r)?r:new P({size:n.size,family:n.family,variant:n.variant,type:n.type,style:n.style,weight:n.weight,...r})),label:t.label}})),shadows:null!==(e=null!==(s=t.shadows)&&void 0!==s?s:this.bi.heatmapGridSeriesContourLabelShadow)&&void 0!==e?e:null}:void 0),this.Hs.Ps(),this}getContours(){return this.Ax.lp()}Sv(){return this.hv&&this.getVisible()}Us(){return Hi(this.Xe,this.Ax.wi())}eh(){return{fill:this.Xe}}yx(t){this.Ax.yx().forEach((i=>{t.Ax.fp(i)}))}Ib(){const t=this.Ax;return t?t.Hi():void 0}Lb(){const t=this.Ax;return t?t.ji():void 0}Pb(){const t=this.Ax;return t?t.Xi():void 0}Bb(){const t=this.Ax;return t?t.Wi():void 0}An(){const t=r(0,0);return t.x=Math.max(t.x,this.Ax.lu()),t.y=Math.max(t.y,this.Ax.uu()),t}Cb(t){if(!(t instanceof J))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}hh(t,i){t.Fi(i),this.Hs.Ps()}th(){return super.th(),this.Ax.Ci(this.getBoundaries()),this}}class bc extends Sc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.gv=!1,this.P=new Pt}pv(){return this.gv}invalidateIntensityValues(t){if(this.gv&&this.chart.gi.Ia(ln.Eo),vo(t)||Array.isArray(t)&&"number"==typeof t[0]){const i=this.Ba.columns*this.Ba.rows,s=t.length;if(i!==s)throw new Error(`LightningChart JS input error | Heatmap invalidateIntensityValues received typed array whose length does not match heatmap columns x rows (received ${s}, expected ${i})`);this.Ax.fp({type:"intensity",lengthPrimary:"columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows,lengthSecondary:"columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns,startPrimary:0,startSecondary:0,values:t})}else if(Array.isArray(t)){let i=t;if(0===t.length)return this;const s={x:i.length,y:i[0].length,columns:"columns"===this.Ba.dataOrder?i.length:i[0].length,rows:"rows"===this.Ba.dataOrder?i.length:i[0].length},e="columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows,h="columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns;if(s.x>e||s.y>h){if(!0===this.chart.Lg.Da){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ba.columns}x${this.Ba.rows}, input ${s.columns}x${s.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const t=[];for(let s=0;s<e;s+=1)t[s]=i[s].slice(0,h);i=t}this.Ax.fp({type:"intensity",lengthPrimary:s.x,lengthSecondary:s.y,startPrimary:0,startSecondary:0,values:i})}else if("iColumn"in t&&"iRow"in t&&"values"in t&&vc(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:i.length,secondary:i[0].length,columns:"columns"===this.Ba.dataOrder?i.length:i[0].length,rows:"rows"===this.Ba.dataOrder?i.length:i[0].length},e="columns"===this.Ba.dataOrder?t.iColumn:t.iRow,h=e+s.primary-1,r="columns"===this.Ba.dataOrder?t.iRow:t.iColumn,n=r+s.secondary-1,o=("columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows)-1,a=("columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns)-1;if(e<0||r<0){if(!0===this.chart.Lg.Da){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;ti.console.warn(i)}return this}if(h>o||n>a){if(!0===this.chart.Lg.Da){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ba.columns}x${this.Ba.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(i)}const e=Math.max(h-o,0),r=s.primary-e,l=Math.max(n-a,0),u=[];for(let t=0;t<r;t+=1)u[t]=i[t].slice(0,l>0?-l:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:u}}this.Ax.fp({type:"intensity",lengthPrimary:i.length,lengthSecondary:i[0].length,startPrimary:e,startSecondary:r,values:i})}else if("iColumn"in t&&"iRow"in t&&"columns"in t&&"rows"in t&&"values"in t&&gc(t.values)){const i=t.values;if(0===t.values.length)return this;const s={primary:"columns"===this.Ba.dataOrder?t.columns:t.rows,secondary:"columns"===this.Ba.dataOrder?t.rows:t.columns,columns:t.columns,rows:t.rows},e="columns"===this.Ba.dataOrder?t.iColumn:t.iRow,h=e+s.primary-1,r="columns"===this.Ba.dataOrder?t.iRow:t.iColumn,n=r+s.secondary-1,o=("columns"===this.Ba.dataOrder?this.Ba.columns:this.Ba.rows)-1,a=("columns"===this.Ba.dataOrder?this.Ba.rows:this.Ba.columns)-1;if(e<0||r<0){if(!0===this.chart.Lg.Da){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;ti.console.warn(i)}return this}if(h>o||n>a){if(!0===this.chart.Lg.Da){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ba.columns}x${this.Ba.rows}, input ${s.columns}x${s.rows} starting at [${t.iColumn},${t.iRow}].\nWith flat array input, this operation is not permitted. No intensity values will be invalidated.`;ti.console.warn(i)}return this}const l=s.columns*s.rows;if(i.length!==l){if(!0===this.chart.Lg.Da){const s=`HeatmapGridSeries.invalidateIntensityValues invalid flat data input.\ncolumns=${t.columns} rows=${t.rows}, array length must be ${l}, received ${i.length}\nNo intensity values will be invalidated.`;ti.console.warn(s)}return this}this.Ax.fp({type:"intensity",lengthPrimary:s.primary,lengthSecondary:s.secondary,startPrimary:e,startSecondary:r,values:i})}return this.P.D("invalidateintensity",{value:t}),this.Hs.Ps(),this.gv=!0,this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Ax.Ke(this.Xe),this.P.D("stylechange",{}),this.Hs.Ps(),this}getFillStyle(){return this.Xe}setIntensityInterpolation(t){return t=t||"disabled",this.Ax.cp(t),this.Hs.Ps(),this.P.D("stylechange",{}),this}getIntensityInterpolation(){return this.Ax.dp()}setAggregation(t){return this.Ax.mx(t),this.Hs.Ps(),this}getAggregation(){return this.Ax.Sx()}clear(){return this.Ax.zi(),this.Hs.Ps(),this.P.D("dataclear",{}),this}setWireframeStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.Ax.ep(this.sp),this.Hs.Ps(),this.P.D("stylechange",{}),this}getWireframeStyle(){return this.sp}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class xc extends Qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.Es="Scrolling Heatmap Grid Series",this.ip={},this.chart.gi.Ia(ln.Po),this.chart.gi.Ia(ln.Eo);const d=c;this.Xe=Zi(l.heatmapScrollingGridSeriesFillStyle,d),this.sp=Zi(this.bi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Ba=f,this.bx=this.Hs.xx(this.scale,[],f).Ke(this.Xe).ep(this.sp).Fi(this.getHighlight()),this.ws(this.bx),this.setHighlightOnHover(!1)}pv(){return this.bx.mp()>0}solveNearest(t,i="show-nearest"){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=tt(e,this.Hs.gi.oi,this.scale),r=_A(i)?this.bx.vx(h):this.bx.yd(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Pe(this.Xe)?this.Xe.lut:void 0}}Ji(t,i,s){return cs({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:Pe(this.Xe)?this.Xe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}rp(){const t=this.ip.start||{x:0,y:0};let i;i=this.ip.step?this.ip.step:{x:1,y:1},this.bx.np(t,i),this.chart.gi.Ps()}setStart(t){return this.ip.start=t,this.rp(),this}getStart(){return this.bx.op().start}setStep(t){return this.ip.step=t,this.rp(),this}getStep(){return this.bx.op().step}clear(){return this.bx.zi(),this.Hs.Ps(),this}setAggregation(t){return this.bx.mx(t),this.Hs.Ps(),this}getAggregation(){return this.bx.Sx()}setWireframeStyle(t){return this.sp="function"==typeof t?t(this.sp):t,this.bx.ep(this.sp),this.Hs.Ps(),this}getWireframeStyle(){return this.sp}setIntensityInterpolation(t){return t=t||"disabled",this.bx.cp(t),this.Hs.Ps(),this}getIntensityInterpolation(){return this.bx.dp()}setPixelInterpolationMode(t){return this.setIntensityInterpolation(t),this}getPixelInterpolationMode(){return this.getIntensityInterpolation()}setDataCleaning(t){return this.bx.Mx(t),this.Hs.Ps(),this}Sv(){return this.hv&&this.getVisible()}Us(){return Hi(this.Xe,this.bx.wi())}eh(){return{fill:this.Xe}}Ke(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.bx.Ke(this.Xe),this.Hs.Ps(),this}Cb(t){if(!(t instanceof J))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}Ib(){return this.bx.Hi()||0}Lb(){return this.bx.ji()||0}Pb(){return this.bx.Xi()||0}Bb(){return this.bx.Wi()||0}An(){const t=r(0,0);return t.x=Math.max(t.x,this.bx.lu()),t.y=Math.max(t.y,this.bx.uu()),t}hh(t,i){t.Fi(i),this.Hs.Ps()}}class Mc extends xc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.P=new Pt}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Ba.scrollDimension?t.length:t[0].length,"rows"===this.Ba.scrollDimension?t.length:t[0].length,0+s-1),h=this.Ba.resolution-1;if(e>h){if(!0===this.chart.Lg.Da){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Ba.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.bx.pp(t),this.Hs.Ps(),this}invalidateIntensityValues(t){return this.bx.fp(t.iSample,t.values),this.Hs.Ps(),this}getSampleCount(){return this.bx.mp()}setFillStyle(t){return this.Ke(t),this}getFillStyle(){return this.Xe}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class wc extends Qu{constructor(){super(...arguments),this.wx=[],this.dc=[],this._x=[],this.kx=[],this.Cx=1e3,this.Tx=0,this.cs=He.onHover,this.Fx=[],this.Ix=[],this.Lx=!1,this.Px=(t,i)=>{const s=t.ob(i);if(s)return[tt(s[0],this.scale,this.Hs.gi.oi),tt(s[1],this.scale,this.Hs.gi.oi)]},this.Bx=(t,i)=>{const s=t.Dx(i);if(s)return[tt(s[0],this.scale,this.Hs.gi.oi),tt(s[1],this.scale,this.Hs.gi.oi)]},this.Ex=t=>{const i=t.length;if(this.wx.length>0){const s=this.wx.length-1,e=this.wx[s];if(i>0){const[i,s]=e.xu(),[h,n]=e.Mu();if((h?i.length+h.length:i.length)>=this.Cx){const a=h&&h.length>0?h[h.length-1]:i[i.length-1],l=n&&n.length>0?n[n.length-1]:s[i.length-1],c=(a.x+t[0].position)/2,d=qs(c,a,r(t[0].position,t[0].high)).y,f=qs(c,l,r(t[0].position,t[0].low)).y,A=o(c,d,f);e.bu(A,u(r(c,f),r(c,d))).Iu(!0),this.Rx([A].concat(t)).Tu(!0)}else e.bu(t)}}else i>0&&this.Rx(t)},this.Ox=t=>{const i=this.Fx,s=t.length;if(this.Fx.length>0){if(s>0){const s=i[i.length-1],e=s.xu(),h=s.Mu();if(e.length+h.length>=this.Cx){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=qs(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.bu(l,u(r(o,a),r(o,a))).Iu(!0),i.push(this.zx([l].concat(t),this.Vx).Tu(!0))}else s.bu(t)}}else s>0&&i.push(this.zx(t))},this.Nx=t=>{const i=this.Ix,s=t.length;if(this.Ix.length>0){if(s>0){const s=i[i.length-1],e=s.xu(),h=s.Mu();if(e.length+h.length>=this.Cx){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=qs(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.bu(l,u(r(o,a),r(o,a))).Iu(!0),i.push(this.Gx([l].concat(t)).Tu(!0))}else s.bu(t)}}else s>0&&i.push(this.Gx(t))}}Ms(){return"ProgressiveX"}pv(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Tx=void 0!==i&&i>0?i:0,this.Hs.Ps(),this}clear(){for(let t=0;t<this.wx.length;t+=1)this.wx[t].dispose();for(let t=0;t<this.Fx.length;t+=1)this.Fx[t].dispose();for(let t=0;t<this.Ix.length;t+=1)this.Ix[t].dispose();return this.dc.length=0,this._x.length=0,this.kx.length=0,this.Vx=void 0,this.wx.length=0,this.Fx.length=0,this.Ix.length=0,this.Hs.Ps(),this.P.D("dataclear",{}),this}getPointAmount(){return this.wx.reduce(((t,i)=>t+i.ku()+i.Cu()),this.dc.length)}Ib(){return pi(this.wx,ci,Math.max,gi,this.Vx)||0}Lb(){return pi(this.wx,ui,Math.min,Ai,this.Vx)||0}Pb(){return pi(this.wx,fi,Math.max,yi,this.Vx)||0}Bb(){return pi(this.wx,di,Math.min,vi,this.Vx)||0}An(){const t=r(0,0);for(const i of this.wx)t.x=Math.max(t.x,i.lu()),t.y=Math.max(t.y,i.uu());return t}Us(){return Hi(this.$x,void 0)||Hi(this.Ux,void 0)}Sv(){return this.hv&&this.getPointAmount()>0&&this.getVisible()}Cb(t){}Yx(t,i,s){this.dc=$i(this.dc,t,{canReturnB:!1}),this._x=$i(this._x,i,{canReturnB:!1}),this.kx=$i(this.kx,s,{canReturnB:!1}),this.Hs.Ps()}jx(t,i,s,e){this.Hx(i,s,e),this.Yx(Array.isArray(t)?t:[t],i,s)}Hx(t,i,s){const e=Os(Es(t),Es(i));this.Vx?this.Vx=Os(this.Vx,e):this.Vx=e,s&&(this.Vx=Os(this.Vx,s))}Wx(){const t=this.wx.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Jt(this.wx[e].Hi(),this.wx[e].lu())<i&&(s+=1);return s}Xx(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}Zx(t){const i=this.wx.length>0?this.wx[this.wx.length-1]:void 0,s=i?i.xu()[0].length+(i.Mu()[0]?i.Mu()[0].length:0):void 0;Ku(t,s,this.Cx,this.Ex)}Jx(t){const i=this.Fx.length>0?this.Fx[this.Fx.length-1].xu().length+this.Fx[this.Fx.length-1].Mu().length:void 0;Ku(t,i,this.Cx,this.Ox)}Qx(t,i){const s=this.Fx.length>0?this.Fx[this.Fx.length-1].xu().length+this.Fx[this.Fx.length-1].Mu().length:void 0;Ku(t,s,this.Cx,this.Ox),Ku(i,s,this.Cx,this.Nx)}Rx(t,i){const s=this.Hs.Kx(this.scale).bu(t,i).Ke(this.$x).wu(this.Ux).Fi(this.getHighlight());return this.wx.push(s),this.ws(s),s}qx(t,i,s){const e=this.Hs.Nv(this.scale,void 0,[Al.UserSeries]).bu(t,s).setPointerEvents(!1).fh(i).Fi(this.getHighlight());return this.ws(e),e}zx(t,i){return this.qx(t,this.tM,i)}Gx(t,i){return this.qx(t,this.iM,i)}sM(t){this.$x="function"==typeof t?t(this.$x):t;const i=this.$x;for(let t=0;t<this.wx.length;t+=1)this.wx[t].Ke(i);this.Hs.Ps()}eM(t){this.Ux="function"==typeof t?t(this.Ux):t;const i=this.Ux;for(let t=0;t<this.wx.length;t+=1)this.wx[t].wu(i);this.Hs.Ps()}hM(){return this.$x}_u(){return this.Ux}rM(t){this.tM="function"==typeof t?t(this.tM):t;const i=this.tM;for(let t=0;t<this.Fx.length;t+=1)this.Fx[t].fh(i);this.Hs.Ps()}nM(t){this.iM="function"==typeof t?t(this.iM):t;const i=this.iM;for(let t=0;t<this.Ix.length;t+=1)this.Ix[t].fh(i);this.Hs.Ps()}oM(){return this.tM}aM(){return this.iM}hh(t,i){t.Fi(i),this.lM(i),this.Hs.Ps()}lM(t){for(let i=0;i<this.Fx.length;i+=1)this.Fx[i].Fi(t);for(let i=0;i<this.Ix.length;i+=1)this.Ix[i].Fi(t)}cv(){if(super.cv(),this.Lx=!1,this.Tx>0){const t=this.Wx();this.Xx(this.wx,this.Cx,this.Tx,t),this.Fx.length>0&&this.Xx(this.Fx,this.Cx,this.Tx,t),this.Ix.length>0&&this.Xx(this.Ix,this.Cx,this.Tx,t),this.Lx=!0}}th(){if(super.th(),this.dc.length>0&&(this.Zx(this.dc),this.uM(this._x,this.kx),this.Lx=!0),this.Lx){const t=this.getBoundaries();for(const i of this.wx)i.Ci(t);for(const i of this.Fx)i.Ci(t);for(const i of this.Ix)i.Ci(t)}}dv(){super.dv(),this.Vx=void 0,this.dc.length=0,this._x.length=0,this.kx.length=0}}class _c extends wc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.P=new Pt,this.chart.gi.Ia(ln.Lo);const c=u;this.$x=Zi(this.bi.areaRangeSeriesFillStyle,c),this.tM=Zi(this.bi.areaRangeSeriesStrokeStyle,c),this.Ux=Zi(this.bi.areaRangeSeriesFillStyleInverted,c),this.iM=Zi(this.bi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.gi.tl(t),e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Is(t,a[0]),s=Is(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})({x:s.engineX,y:s.engineY},this.wx,_A(i)?this.Bx:this.Px);if(void 0!==e&&void 0!==e[0]){const t=tt(e[0][0],this.Hs.gi.oi,this.scale),i=tt(e[0][1],this.Hs.gi.oi,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=l(i);this.jx(t,s,e);const h=this.dc[this.dc.length-1];return this.cM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.P.D("dataadd",{data:i,boundaries:this.Vx}),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.cM?this.cM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}uM(t,i){this.Qx(t,i)}setHighFillStyle(t){return this.sM(t),this}setLowFillStyle(t){return this.eM(t),this}setHighStrokeStyle(t){return this.rM(t),this}setLowStrokeStyle(t){return this.nM(t),this}getHighFillStyle(){return this.hM()}getLowFillStyle(){return this._u()}getHighStrokeStyle(){return this.oM()}getLowStrokeStyle(){return this.aM()}dM(){return((t,i=t=>t)=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.xu()),n=e.Mu(),o=n?i(n):[];let a=!1,l=!1;"Fu"in e&&(a=e.Fu(),l=e.Lu()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s})(this.wx,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}eh(){return{fill:this.$x,fill2:this.Ux,behavior:{colorStep:!0}}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class kc extends Qu{constructor(t,i,s,e,h,r,o,a,l,c){super(t,i,s,e,h,r,o,a,l,c),this.fM=t=>t[4]>=t[1],this.Eb=u(n(ps,ps),n(ms,ms)),this.AM=[],this.gM=!1,this.vM=-1,this.yM=[],this.pM=!0,this.mM=!1,this.SM=4,this.bM=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.P=new Pt,this.chart.gi.Ia(ln.bo)}pv(){return this.yM.length>0}Ms(){return"ProgressiveX"}dM(){return this.yM}Sv(){return this.hv&&this.yM.length>0&&this.getVisible()}xM(t){if(!(this.yM.length<1))return[this.yM[t][0],this.yM[t][1],this.yM[t][2],this.yM[t][3],this.yM[t][4]]}solveNearest(t,i){if(0===this.yM.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,n,o,a,l;if(e){const t=this.MM;if(!t)return;const i=ns(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],n=e[1],l=e[4],h=e[0]}else{const t=ns(s,this.yM.length-1,(t=>this.yM[t][0])),i=void 0!==t&&this.yM[t];if(!i)return;h=i[0],n=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:r(h,l),resultTableScale:this.scale,pointMarker:r(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:n,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i,s){return cs({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Cb(t){if(!(t.x instanceof W))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.wM=t.x}An(){return r(5,5)}Lx(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.Eb.min.y&&(this.Eb.min.y=t[s][3]),this.Eb.max.y<t[s][2]&&(this.Eb.max.y=t[s][2]);return this.Eb.min.x=Math.min(this.Eb.min.x,t[0][0]),this.Eb.max.x=Math.max(this.Eb.max.x,t[i][0]),this}Ib(){return this.Eb.max.x}Lb(){return this.Eb.min.x}Pb(){return this.Eb.max.y}Bb(){return this.Eb.min.y}add(t){this.yM.length>0&&this.chart.gi.Ia(ln.Eo);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.gM=!0;const t=this.yM.length,s=this.AM.length,e=i.length;this.yM.length=t+e,this.AM.length=s+e;for(let h=0;h<e;h+=1)this.yM[t+h]=i[h],this.AM[s+h]=this.yM[t+h];this.Lx(i),this.P.D("dataadd",{data:i}),this.Hs.Ps()}return this}setPackData(t){return t!==this.pM&&(this.mM=!0,this.pM=t,this.chart.gi.Ps()),this}getPackData(){return this.pM}getPackDataState(){const t=this.vM;if(!(t<0||void 0===this.MM||this.MM.length===this.yM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this._M=t,this.chart.gi.Ps(),this}getFigureWidth(){return this._M}setFigureMinimumGap(t){return this.SM=t,this.chart.gi.Ps(),this}getFigureMinimumGap(){return this.SM}clear(){return this.yM=[],this.AM=[],this.MM=void 0,this.kM(),this.Eb.min.x=ps,this.Eb.min.y=ps,this.Eb.max.x=ms,this.Eb.max.y=ms,this.P.D("dataclear",{}),this}CM(t){return this.wM.getPixelSize()*t/1e3}TM(){const t=this.bM.length-1,i=this.CM(this._M+this.SM);let s=ns(i,t,(t=>this.bM[t]));return void 0===s?s=i<this.bM[0]?0:this.bM[t]<i?t:this.bM.length/2:this.bM[s]<i&&(s+=1),this.bM.length<=s&&(s=t),1e3*this.bM[s]}th(){if(super.th(),!this.pM){this.MM=void 0;let t=null;if(this.mM?(this.mM=!1,t=this.yM,this.kM()):t=this.AM,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.fM(s)?this.FM(e,s):this.IM(e,s)}this.AM.length=0,this.gM=!1,this.vM=-1}}}dv(){super.dv();const t=this.TM();if(this.pM&&this.yM.length>=1&&(t!==this.vM||this.gM||this.mM)){this.mM=!1,this.vM=t,this.gM=!1,this.kM(),this.MM=[];const i=this.yM.length;let s=this.yM[0][0]-this.yM[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.xM(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.yM[e][0]<s;)h=this.yM[e],this.yM[e][3]<r&&(r=this.yM[e][3]),n<this.yM[e][2]&&(n=this.yM[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.yM[a][0],h=[l,this.yM[o][1],n,r,this.yM[a][4]]),h[1]<h[4]?this.FM(l,h):this.IM(l,h),this.MM.push(h),s+=t}}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Cc extends kc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.LM=1175494351e-14,this._M=this.bi.ohlcCandleThicknessPixels||5,this.PM=this.bi.ohlcCandleTailStrokeStylePositive,this.BM=this.bi.ohlcCandleTailStrokeStyleNegative,this.DM=this.bi.ohlcCandleBodyFillStylePositive,this.EM=this.bi.ohlcCandleBodyFillStyleNegative,this.RM=s.bA(this.scale).fh(new wh({thickness:this._M,fillStyle:this.DM})),this.RM.uc={x:0,y:1},this.OM=s.bA(this.scale).fh(new wh({thickness:this._M,fillStyle:this.EM})),this.OM.uc={x:0,y:-1},this.zM=s.bA(this.scale).fh(this.PM),this.VM=s.bA(this.scale).fh(this.BM),this.ws(this.RM),this.ws(this.OM),this.ws(this.zM),this.ws(this.VM)}setBodyThickness(t){return this._M=t,this.RM.fh(new wh({thickness:this._M,fillStyle:this.DM})),this.OM.fh(new wh({thickness:this._M,fillStyle:this.EM})),this.chart.gi.Ps(),this}getBodyThickness(){return this._M}setBodyFillStylePositive(t){return this.DM="function"==typeof t?t(this.DM):t,this.RM.fh(new wh({thickness:this._M,fillStyle:this.DM})),this.chart.gi.Ps(),this}getBodyFillStylePositive(){return this.DM}setBodyFillStyleNegative(t){return this.EM="function"==typeof t?t(this.EM):t,this.OM.fh(new wh({thickness:this._M,fillStyle:this.EM})),this.chart.gi.Ps(),this}getBodyFillStyleNegative(){return this.EM}setTailStrokeStylePositive(t){return this.PM="function"==typeof t?t(this.PM):t,this.zM.fh(this.PM),this.chart.gi.Ps(),this}getTailStrokeStylePositive(){return this.PM}setTailStrokeStyleNegative(t){return this.BM="function"==typeof t?t(this.BM):t,this.VM.fh(this.BM),this.chart.gi.Ps(),this}getTailStrokeStyleNegative(){return this.BM}eh(){return{fill:this.DM,fill2:this.EM,behavior:{colorStep:!0}}}kM(){return this.zM.zi(),this.VM.zi(),this.RM.zi(),this.OM.zi(),this}FM(t,i){return Math.abs(i[1]-i[4])<this.LM?this.RM.jo().MA({x:t,y:i[1]-this.LM},{x:t,y:i[1]+this.LM}):this.RM.jo().MA({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.zM.jo().MA({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.zM.jo().MA({x:t,y:i[3]},{x:t,y:i[1]}),this}IM(t,i){return Math.abs(i[1]-i[4])<this.LM?this.OM.jo().MA({x:t,y:i[1]-this.LM},{x:t,y:i[1]+this.LM}):this.OM.jo().MA({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.VM.jo().MA({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.VM.jo().MA({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Tc extends kc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this._M=this.bi.ohlcBarThicknessPixels||10,this.NM=this.bi.ohlcBarStrokeStylePositive,this.GM=this.bi.ohlcBarStrokeStyleNegative,this.$M=s.bA(this.scale).fh(this.NM),this.ws(this.$M),this.UM=s.bA(this.scale).fh(this.NM),this.UM.uc={x:-this._M/2,y:0},this.ws(this.UM),this.YM=s.bA(this.scale).fh(this.NM),this.YM.uc={x:this._M/2,y:0},this.ws(this.YM),this.jM=s.bA(this.scale).fh(this.GM),this.ws(this.jM),this.HM=s.bA(this.scale).fh(this.GM),this.HM.uc={x:-this._M/2,y:0},this.ws(this.HM),this.WM=s.bA(this.scale).fh(this.GM),this.WM.uc={x:this._M/2,y:0},this.ws(this.WM)}setStrokeStylePositive(t){return this.NM="function"==typeof t?t(this.NM):t,this.$M.fh(this.NM),this.UM.fh(this.NM),this.YM.fh(this.NM),this.chart.gi.Ps(),this}getStrokeStylePositive(){return this.NM}setStrokeStyleNegative(t){return this.GM="function"==typeof t?t(this.GM):t,this.jM.fh(this.GM),this.HM.fh(this.GM),this.WM.fh(this.GM),this.chart.gi.Ps(),this}getStrokeStyleNegative(){return this.GM}eh(){return{fill:this.NM.getFillStyle(),fill2:this.GM.getFillStyle(),behavior:{colorStep:!0}}}setFigureWidth(t){return super.setFigureWidth(t),this.UM.uc={x:-t/2,y:0},this.HM.uc={x:-t/2,y:0},this.YM.uc={x:t/2,y:0},this.WM.uc={x:t/2,y:0},this}kM(){return this.jM.zi(),this.$M.zi(),this.HM.zi(),this.UM.zi(),this.WM.zi(),this.YM.zi(),this}FM(t,i){return this.$M.jo().MA({x:t,y:i[3]},{x:t,y:i[2]}),this.UM.jo().MA({x:t,y:i[1]},{x:t,y:i[1]}),this.YM.jo().MA({x:t,y:i[4]},{x:t,y:i[4]}),this}IM(t,i){return this.jM.jo().MA({x:t,y:i[3]},{x:t,y:i[2]}),this.HM.jo().MA({x:t,y:i[1]},{x:t,y:i[1]}),this.WM.jo().MA({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Fc={Candlesticks:Cc,Bars:Tc},Ic=t=>({defaultDragMouseStyle:gr.Horizontal,getTitleTextRotation:()=>0,...bl(t,((t,i)=>t.Lb(i)),((t,i)=>t.Ib(i)),(t=>t.An().x))}),Lc=t=>({defaultDragMouseStyle:gr.Vertical,getTitleTextRotation:t=>90*t,...bl(t,((t,i)=>t.Bb(i)),((t,i)=>t.Pb(i)),(t=>t.An().y))});class Pc extends Wl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.XM=!1,this.ZM=!1,this.JM=!1,this.QM=!1,this.KM=!1,this.qM=new Map,this.tw=new Map,this.iw=[],this.sw=[],this.ew=!0,this.hw=!0,this.rw=!1,this.nw=[],this.ow=new Set,this.aw=!1,this.Jp=h,this.lw=r,this.uw=n,this.cw=o.cursorGridStrokeStyleX,this.dw=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.XM=t,this.Hs.Ps(),this}getKeepWithinAxisBoundaries(){return this.XM}dispose(){return super.dispose(),this.qM.forEach((t=>t.forEach((t=>t.dispose())))),this.tw.forEach((t=>t.forEach((t=>t.dispose())))),this.iw.length=0,this.sw.length=0,this.Wp.length=0,this}th(){return this.rw&&this.ci&&this.setPosition(...this.nw),this.qM.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.tw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.iw.forEach((t=>t.setVisible(this.ci&&this.kg).setMarkerVisible(this.ci&&this.kg&&this.ew))),this.sw.forEach((t=>t.setVisible(this.ci&&this.kg).setMarkerVisible(this.ci&&this.kg&&this.hw))),super.th()}tm(){if(!this.XM)return super.tm();const t=this.Qp,i=t.getPosition(r(-1,-1),Ht.PaddedBackground),s=t.getPosition(r(1,1),Ht.PaddedBackground),e=this.nw.map((e=>{const h=e.pointMarkerScale.x,r=e.pointMarkerScale.y,n=tt({x:h.oi.G,y:r.oi.G},{x:h,y:r},t.scale),o=tt({x:h.oi.$,y:r.oi.$},{x:h,y:r},t.scale),a={x:oi(i.x,n.x,o.x),y:oi(i.y,n.y,o.y)},l={x:oi(s.x,n.x,o.x),y:oi(s.y,n.y,o.y)};return{axisX:h,axisY:r,a:n,b:o,visibleArea:Math.abs(l.x-a.x)*Math.abs(l.y-a.y),clampMin:a,clampMax:l,tableMin:i,tableMax:s}}));e.sort(((t,i)=>i.visibleArea-t.visibleArea));const h=e[0];if(!h)return super.tm();const n=Fs(h.tableMin.x,h.a.x,h.b.x)&&Fs(h.tableMax.x,h.a.x,h.b.x),o=Fs(h.tableMin.y,h.a.y,h.b.y)&&Fs(h.tableMax.y,h.a.y,h.b.y);return{x:!n,y:!o,either:!n||!o,resultTableViewport:{x:h.axisX,y:h.axisY},resultTableViewportBounds:{x:{min:Math.min(h.axisX.oi.G,h.axisX.oi.$),max:Math.max(h.axisX.oi.G,h.axisX.oi.$)},y:{min:Math.min(h.axisY.oi.G,h.axisY.oi.$),max:Math.max(h.axisY.oi.G,h.axisY.oi.$)}}}}setPosition(...t){t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.nw=t,this.iw.length=0,this.sw.length=0;const i=this.renderingScale;if(t.length>0){const s=t[0].resultTable,e=Wa(t[0].resultTableScale,i),h=e===this.scale?s:tt(s,e,this.scale);this.Qp.setPosition(h)}this.kg=!1,this.Yp.forEach((t=>{t.targetVisible=!1}));const s=new Map;t.forEach(((t,e)=>{const h=t.pointMarkerScale.x,n=t.pointMarkerScale.y,o=s.get(h)||[],a=s.get(n)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),s.set(h,o),s.set(n,a);const c=t.pointMarker,d=Ec(r(c.x,c.y),h,n);if(l){const t=this.fw(h,!0);t.setValue(c.x),t.setGridStrokeLength(this.ZM?d.x:1).setAllocatesAxisSpace(this.aw),this.iw.push(t)}if(u){const t=this.fw(n,!1);t.setValue(c.y),t.setGridStrokeLength(this.JM?d.y:1).setAllocatesAxisSpace(this.aw),this.sw.push(t)}let f=this.Yp[e];if(!f){const t=new Mo(this.Hs,this.renderingScale,this.scale,ri,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.Yp.push(f),this.Wp.forEach((i=>i(t)))}void 0!==t.pointMarkerShape&&f.pointMarker.setShape(t.pointMarkerShape),void 0!==t.pointMarkerSize&&f.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&f.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&f.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle);const A=Wa(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:tt(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const v=h.getInterval(),y=n.getInterval(),p=Math.min(v.start,v.end),m=Math.max(v.start,v.end),S=Math.min(y.start,y.end),b=Math.max(y.start,y.end);c.x>=p&&c.x<=m&&c.y>=S&&c.y<=b&&(this.kg=!0)}));for(const t of this.Yp)t.targetVisible||(t.pointMarker.dispose(),this.Yp.splice(this.Yp.indexOf(t),1));return this}setTickMarkersAllocateAxisSpace(t){return this.aw=t,this.Hs.Ps(),this}getTickMarkersAllocateAxisSpace(){return this.aw}fw(t,i){this.ow.has(t)||(t.addEventListener("dispose",(()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.ow.add(t));const s=i?this.qM:this.tw,e=i?this.iw:this.sw,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.DA(!1,this.lw):t.DA(!1,this.uw),h.push(r),this.Qr(r,i),r.setPointerEvents(!1)),r}Qr(t,i){const s=i?this.cw:this.dw;return t.setGridStrokeStyle(s),t.setPointerEvents(!1),(i?this.ew:this.hw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.ZM=t,this.Hs.Ps(),this}getGridStrokeXCut(){return this.ZM}setGridStrokeYCut(t){return this.JM=t,this.Hs.Ps(),this}getGridStrokeYCut(){return this.JM}setGridStrokeXStyle(t){return this.cw=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.qM.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.cw))))),this}getGridStrokeXStyle(){return this.cw}setGridStrokeYStyle(t){return this.dw=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.tw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.dw))))),this}getGridStrokeYStyle(){return this.dw}setTickMarkerXVisible(t){return this.ew=t,this.Hs.Ps(),this}getTickMarkerXVisible(){return this.ew}setTickMarkerYVisible(t){return this.hw=t,this.Hs.Ps(),this}getTickMarkerYVisible(){return this.hw}setTickMarkerX(t){return this.qM.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.lw=this.lw.addStyler(t),this.Hs.Ps(),this}setTickMarkerY(t){return this.tw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.uw=this.uw.addStyler(t),this.Hs.Ps(),this}}class Bc{constructor(t,i,s,e){this.um=[],this.dm=(t,i)=>(this.um.forEach((s=>s(t,i))),t),this.addStyler=t=>new Bc(this.Jp,this.lw,this.uw,this.um.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Bc(t,this.lw,this.uw,this.um.map((t=>t))),this.fm=(t,i,s,e,h)=>this.dm(new Pc(t,i,s,e,this.Jp,this.lw,this.uw,h),h),this.Jp=t,this.um=e,this.lw=i,this.uw=s}}const Dc=new Bc(mo,ta.PointableTextBox,ta.PointableTextBox,[(t,i)=>{Xl(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),rn(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),rn(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Ec=(t,i,s)=>{const e=i.oi,h=s.oi;let n=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.Qf&&(n=1-n),1===i.Qf&&(o=1-o),r(o,n)};class Rc{constructor(t,i,s,e){this.Aw=!1,this.P=new Pt,this.chart=s,this.gw=e,this.pe=t.pe,this._e=e||Mr,this.yw=ti.document.createElement("div"),this.yw.style.position="absolute",this.yw.style.pointerEvents="none",ti.document.body.append(this.yw);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.yw.style.left=`${t.left}px`,this.yw.style.top=`${t.top}px`,this.yw.style.width=`${t.width}px`,this.yw.style.height=`${t.height}px`};h(),s.addEventListener("resize",h),this.pw(this.yw),this.mw(),this.Sw(),this.bw(),this.xw(i),this.chart.Mw().push(this)}pw(t){this.ww=ti.document.createElement("div"),this.ww.style.pointerEvents="all",t.append(this.ww),this._w=ti.document.createElement("div"),this.kw=new Ar(this.pe,this._e,this.chart,this._w),this.Cw=ti.document.createElement("table"),this.Cw.style.borderSpacing="0",this.ww.appendChild(this.kw.De()),this.ww.appendChild(this._w),this._w.appendChild(this.Cw)}Sw(){let t=0,i=0,s=0,e=0,h=!1;this.Aw=!1,this.ww.onmousedown=r=>{r=r||ti.event,s=r.clientX,e=r.clientY,h=!0,ti.document.onmouseup=t=>{this.Aw?this.ww.addEventListener("click",ki,!0):this.ww.removeEventListener("click",ki,!0),h=!1,this.Aw=!1,ti.document.onmouseup=null,ti.document.onmousemove=null},ti.document.onmousemove=r=>{r=r||ti.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.Aw=!0,this.ww.style.top=this.ww.offsetTop-i+"px",this.ww.style.left=this.ww.offsetLeft-t+"px",this.ww.style.removeProperty("right"),this.ww.style.removeProperty("bottom"))}}}bw(){let t=0,i=0,s=0,e=0,h=!1;this.ww.ontouchstart=r=>{r=r||ti.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.ww.ontouchend=()=>{h=!1,ti.document.ontouchend=null,ti.document.ontouchmove=null},this.ww.ontouchmove=r=>{h&&(ki(r),r=r||ti.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.ww.style.top=this.ww.offsetTop-i+"px",this.ww.style.left=this.ww.offsetLeft-t+"px",this.ww.style.removeProperty("right"),this.ww.style.removeProperty("bottom"))}}}mw(){this.ww.style.setProperty("top","10px"),this.ww.style.setProperty("left","10px"),this.ww.style.position="absolute",this.ww.style.display="flex",this.ww.style.alignItems="flex-start",this._w.style.setProperty("display","none")}removePositionProperty(){this.ww.style.removeProperty("top"),this.ww.style.removeProperty("left"),this.ww.style.removeProperty("bottom"),this.ww.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case _r.BottomLeft:this.ww.style.setProperty("bottom","10px"),this.ww.style.setProperty("left","10px");break;case _r.TopLeft:this.ww.style.setProperty("top","10px"),this.ww.style.setProperty("left","10px");break;case _r.BottomRight:this.ww.style.setProperty("bottom","10px"),this.ww.style.setProperty("right","10px");break;case _r.TopRight:default:this.ww.style.setProperty("top","10px"),this.ww.style.setProperty("right","10px")}}xw(t){for(let i=0;i<t.length;i+=1){const s=this.Cw.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.Tw(r,h):this.addCustomButton(r,h)}}}Tw(t,i){switch(t){case Yh.ZoomIn:this.Fw(new rr(this.pe,this.chart,this._e),i);break;case Yh.ZoomInX:this.Fw(new nr(this.pe,this.chart,this._e),i);break;case Yh.ZoomInY:this.Fw(new or(this.pe,this.chart,this._e),i);break;case Yh.ZoomOut:this.Fw(new ar(this.pe,this.chart,this._e),i);break;case Yh.ZoomOutX:this.Fw(new lr(this.pe,this.chart,this._e),i);break;case Yh.ZoomOutY:this.Fw(new ur(this.pe,this.chart,this._e),i);break;case Yh.ZoomToFit:this.Fw(new dr(this.pe,this.chart,this._e),i);break;case Yh.ToggleAnimations:this.Fw(new cr(this.pe,this.chart,this._e),i);break;default:console.error(`No predefined button like "${Yh[t]}" exists.`)}}Fw(t,i){i.rowSpan=t.me.rows,i.colSpan=t.me.columns,t.Be(i)}addCustomButton(t,i){const s=new fr(this.pe,t,this.chart);return this.Fw(s,i),this}dispose(){this.yw.remove(),this.P.D("dispose",{})}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class Oc extends Qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.Iw=t=>{this.P.D(t.type,t)},this.Lw=0,this.P=new Pt,this.Ba=c,this.kc=this.Hs.Od(this.scale).fh(Zi(this.bi.lineSeriesStrokeStyle,u)).Ed(Zi(this.bi.pointSeriesFillStyle,u)).Ud(Zi(this.bi.pointSeriesStrokeStyle,u)).Rd(Zi(this.bi.areaSeriesPositiveFillStyle,u)).Pw(void 0).jd(7),this.kc.Bw=!1!==(null===(d=this.Ba)||void 0===d?void 0:d.allowDataGrouping),this.ws(this.kc)}pv(){return this.Dw().getSampleCount()>0}Ms(){return this.getDataSet().Jc(this.Ew)}setDataSet(t,i){var s;const e=null===(s=this.Bd)||void 0===s?void 0:s.qi;if(t===e&&i&&this.Ew&&ho(i,this.Ew))return this;const h=["change","clear","loop","maxsamplecountexceed"];return e&&h.forEach((t=>e.removeEventListener(t,this.Iw))),t?(h.forEach((i=>t.addEventListener(i,this.Iw))),!i&&t.$c&&(i=this.Rw(t.$c)),i&&t.ld(i),this.Ew=i,this.Ow=!1,(null==i?void 0:i.color)&&this.chart.gi.Ia(ln.Oo),(null==i?void 0:i.size)&&this.chart.gi.Ia(ln.Ro),this.Bd=us(t,this.Bd,(()=>({change:()=>{this.Lw+=1,this.Lw>1&&this.chart.gi.Ia(ln.Eo),this.chart.gi.Ps()},clear:()=>{this.chart.gi.Ps()}}))),i&&this.kc.Dd(t,i),this.chart.gi.Ps(),this):(this.kc.Dd(),this)}getDataSet(){return this.Dw()}setDataMapping(t){var i;return(null===(i=this.Bd)||void 0===i?void 0:i.qi)?this.setDataSet(this.getDataSet(),t):this.Ew=t,this.Ow=!1,this}getDataMapping(){return this.Ew}setStrokeStyle(t){return this.kc.fh(t),this.Hs.Ps(),this}getStrokeStyle(){return this.kc.co()}setAreaFillStyle(t){return this.kc.Rd(t),this.Hs.Ps(),this}getAreaFillStyle(){return this.kc.zw()}setPointFillStyle(t){return this.kc.Ed(t),this.Hs.Ps(),this}getPointFillStyle(){return this.kc.$d()}setPointStrokeStyle(t){return this.kc.Ud(t),this.Hs.Ps(),this}getPointStrokeStyle(){return this.kc.Yd()}setPointSize(t){return this.kc.jd(t),this.Hs.Ps(),this}getPointSize(){return this.kc.Vw()}setPointShape(t){return this.kc.zd(t),this.Hs.Ps(),this}getPointShape(){return this.kc.Vd()}setPointRotation(t){return this.kc.Nd(t),this.Hs.Ps(),this}getPointRotation(){return this.kc.Gd()}setPointAlignment(t){return this.kc.UA(t),this.chart.gi.Ps(),this}getPointAlignment(){return this.kc.Nw()}setCurvePreprocessing(t){return this.kc.Pw(t),this.Hs.Ps(),this}getCurvePreprocessing(){return this.kc.Gw()}appendJSON(t,i,s){return this.Dw().appendJSON(t,i,s),this.Hs.gi.Ps(),this}appendSample(t,i){return this.Dw().appendSample(t,i),this.Hs.gi.Ps(),this}appendSamples(t,i){return this.Dw().appendSamples(t,i),this.Hs.gi.Ps(),this}fill(t){return this.Dw().fill(t),this.Hs.Ps(),this}setSamples(t,i){return this.Dw().setSamples(t,i),this.Hs.Ps(),this}alterSamplesStartingFrom(t,i,s){return this.Dw().alterSamplesStartingFrom(t,i,s),this.Hs.Ps(),this}alterSamplesByIndex(t,i){return this.Dw().alterSamplesByIndex(t,i),this.Hs.Ps(),this}alterSamplesByMatch(t,i,s){return this.Dw().alterSamplesByMatch(t,i,s),this.Hs.Ps(),this}getSampleCount(){return this.Dw().getSampleCount()}getNextSampleIndex(){return this.Dw().getNextSampleIndex()}setMaxSampleCount(t){return this.Dw().setMaxSampleCount(t),this.Hs.Ps(),this}getMaxSampleCount(){return this.Dw().getMaxSampleCount()}clear(){return this.Dw().clear(),this.Hs.Ps(),this}readBack(t){if(this.Ew||this.$w(),!this.Ew)return{xValues:new Float64Array,yValues:new Float64Array,iSampleFirst:0};const i=this.Dw();if(null==t?void 0:t.onlyInRange){const s=i.Jc(this.Ew),e=s&&Ke(s);if(!e)throw new Error("LightningChart JS - attempted to use `PointLineAreaSeries.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");const h=this.Ew[e];return i.ad(this.Ew,{onlyInRange:{key:h,start:t.onlyInRange.start,end:t.onlyInRange.end}})}return i.ad(this.Ew)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){this.Ew||this.$w();let s=_A(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.Uw(),h=Ee(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,r=e.yd(this.Ew,h,s,this.scale,this.chart.sA);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}}Ji(t,i,s){const e=this.getDataSet(),h=null==t?void 0:t.dataPoint;return void 0===e.Jc(this.Ew)||h?h?{cursorPosition:{resultTable:h,resultTableScale:this.scale,pointMarker:h,pointMarkerScale:{x:this.axisX,y:this.axisY}},...h,series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}:void 0:cs({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0,sample:0,pointShape:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Uw(){return this.Dw()}Us(){return Hi(this.getPointFillStyle(),this.kc.wi())||Hi(this.getStrokeStyle().getFillStyle(),this.kc.wi())||Hi(this.getAreaFillStyle(),this.kc.wi())}Sv(){var t;const i=null===(t=this.Bd)||void 0===t?void 0:t.qi;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.Pc>0}Cb(t){}Ib(t){this.Ew||this.$w();const i=this.kc.hl();return i&&"y"===i.Yw&&t&&i.jw(),this.kc.Hi(t)}Lb(t){this.Ew||this.$w();const i=this.kc.hl();return i&&"y"===i.Yw&&t&&i.jw(),this.kc.ji(t)}Pb(t){this.Ew||this.$w();const i=this.kc.hl();return i&&"x"===i.Yw&&!t&&i.jw(),this.kc.Xi(t)}Bb(t){this.Ew||this.$w();const i=this.kc.hl();return i&&"x"===i.Yw&&t&&i.jw(),this.kc.Wi(t)}An(){return{x:this.kc.lu(),y:this.kc.uu()}}$w(){var t;const i=null===(t=this.Bd)||void 0===t?void 0:t.qi;if((!this.Ew||this.Ow)&&i&&i.$c){const t=i.$c,s=this.Hw;let e=!1;if(this.Ew&&this.Ow&&s){const i=Object.keys(t).length!==Object.keys(s).length,h=Object.entries(t).find((([t,i])=>{var e;return t in s&&s[t]!==(null===(e=i.Gc)||void 0===e?void 0:e.effective)}));e=!i&&void 0===h}if(!e){const t=this.Rw(i.$c);!t||this.Ew&&ho(this.Ew,t)||(this.Ew=t,this.Ow=!0,t.color&&this.chart.gi.Ia(ln.Oo),t.size&&this.chart.gi.Ia(ln.Ro),this.kc.Dd(i,t)),this.Hw=Object.fromEntries(Object.entries(i.$c).map((([t,i])=>{var s;return[t,null===(s=i.Gc)||void 0===s?void 0:s.effective]})))}}}cv(){var t,i,s,e;if(super.cv(),this.$w(),((null===(t=this.Ba)||void 0===t?void 0:t.strictMode)||(null===(i=this.Bd)||void 0===i?void 0:i.qi.Vc))&&this.Ew&&(null===(s=this.Bd)||void 0===s?void 0:s.qi)){const t=this.Bd.qi.$c;t&&Object.values(this.Ew).forEach((i=>{if(!(i in t))throw new Error(`LightningChart JS error - PointLineAreaSeries data mapping is referencing a data property ('${i}') that doesn't exist in the connected data set. This is not allowed when strict mode is enabled.`)}))}const h=Ke(null!==(e=this.Ms())&&void 0!==e?e:"ProgressiveX");this.kc.Ww("x"===h?0===this.xAxis.Jf?"bottom":"top":0===this.yAxis.Jf?"left":"right")}Dw(){var t;if(!this.Bd){const t=new ro(this.Ba);return this.setDataSet(t,!0!==this.Ow?this.Ew:void 0),t}return null===(t=this.Bd)||void 0===t?void 0:t.qi}Rw(t){var i,s;if((null===(i=this.Ba)||void 0===i?void 0:i.strictMode)||(null===(s=this.Bd)||void 0===s?void 0:s.qi.Vc))throw new Error("LightningChart JS error - PointLineAreaSeries data mapping is not explicitly defined. This is not allowed when strict mode is enabled.");const e=Object.entries(t),h=e.find((t=>t[0].toLowerCase().includes("x"))),r=e.find((t=>t[0].toLowerCase().includes("y"))),n=e.find((t=>t[0].toLowerCase().includes("size"))),o=e.find((t=>t[0].toLowerCase().includes("rot"))),a=e.find((t=>t[0].toLowerCase().includes("lookup")||t[0].toLowerCase().includes("value")&&!t[0].toLowerCase().includes("y")&&!t[0].toLowerCase().includes("x"))),l=e.find((t=>t[0].toLowerCase().includes("color"))),u={};n&&(u.size=n[0]),o&&(u.rotation=o[0]),a&&(u.lookupValue=a[0]),l&&(u.color=l[0]);const c=e.find((t=>{var i;return Boolean(null===(i=t[1].Gc)||void 0===i?void 0:i.effective)})),d=(t,...i)=>{for(const s of i)if(s!==t)return s[0];for(const i of e)if(i!==t&&!Object.keys(u).includes(i[0]))return i[0]};if("xValues"in t&&"yValues"in t)return{...u,x:"xValues",y:"yValues"};if("yValues"in t){const t=d(e.find((t=>"yValues"===t[0])));if(t)return{...u,x:t,y:"yValues"}}if("xValues"in t){const t=d(e.find((t=>"xValues"===t[0])));if(t)return{...u,y:t,x:"xValues"}}if(h&&r)return{...u,x:h[0],y:r[0]};if(c){const t="x",i="y",s=d(c);if(s)return{...u,[t]:c[0],[i]:s}}return e.length>=2?{...u,x:e[0][0],y:e[1][0]}:void 0}eh(){const t=this.getPointFillStyle(),i=this.getAreaFillStyle();return{stroke:this.getStrokeStyle(),fill:t!==xe?t:i,behavior:{priority:"stroke"}}}Ys(){return this.Ds||this.getPointShape()}hh(t,i){t.Fi(i),this.Hs.Ps()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const zc={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},Vc=(t,i,s,e)=>{t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},Nc=(t,i,s,e)=>{const h=[];t.forEachAxis((t=>{const r=i=>s(t,i);t.addEventListener(i,r,e),h.push((()=>t.removeEventListener(i,r)))}));const r=t=>{const r=i=>s(t.axis,i);t.axis.addEventListener(i,r,e),h.push((()=>t.axis.removeEventListener(i,r)))};return t.addEventListener("axisadd",r),h.push((()=>t.removeEventListener("axisadd",r))),()=>{h.forEach((t=>t()))}},Gc=(t,i,s)=>{vs();const e=new Map;t.forEachAxis((t=>{var s,h;const r=t.ah.chartInteractions;!1===r||"object"==typeof r&&!1===r.restoreDefault||e.set(t,{animate:null!==(s=i.animationsEnabled)&&void 0!==s?s:void 0,stopAxisAfter:null!==(h=i.stopScroll)&&void 0!==h?h:void 0})})),t.Xw(e);let h=i.cursor;if(null!==h){h=null!=h?h:gr.ZoomOut;const i=t.engine.setMouseStyle(h);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const r=i.on;r&&ti.requestAnimationFrame((()=>r({event:s})))},$c=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.oi.X(i),t.axis.qf.X(s)})))),Uc=r(10,10);var Yc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Yc||(Yc={}));const jc=new Set([Yc.Top,Yc.Bottom,Yc.Left,Yc.Right]),Hc=t=>t.setStopped(!0),Wc=(t,i)=>{if(!t||!i)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const s="linear-highPrecision"===t.cr.type||"linear-highPrecision"===i.cr.type,e="logarithmic"===t.cr.type||"logarithmic"===i.cr.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.cr.type}, y: ${i.cr.type})`;throw new Error(s)}};var Xc,Zc,Jc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Xc||(Xc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Zc||(Zc={}));class Qc extends Ll{constructor(t,i,s,e,h,r,n){var o,a,l,u,c;super(t,i,s,i.jg("chartXY bg",0),e,i.gi.bi.chartXYBackgroundFillStyle,i.gi.bi.chartXYBackgroundStrokeStyle,i.gi.bi.chartXYTitleFont,i.gi.bi.chartXYTitleFillStyle,i.gi.bi.chartXYTitleShadow,n,null===(o=null==r?void 0:r.legend)||void 0===o?void 0:o.customLegend),this.Zw=this.Pg.d2({scaleXYConstructor:J}),this.FA=[],this.IA=[],this.PA=[],this.LA=[],this.Jw=new Map,this.Qw=!0,this.Kw=[],this.qw=this.bi.chartXYZoomingRectangleFillStyle,this.t_=this.bi.chartXYZoomingRectangleStrokeStyle,this.wA=Kc,this.kb=0,this.Mm=[],this._m=()=>{if(this.ui)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.AA().find((t=>t.pv()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.Mm.push(t),this.Mm.length>100&&this.Mm.shift())},this.i_=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&Fs(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&Fs(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.s_=$c(this.IA,this.FA),this.e_=$c(this.PA,this.LA),this.h_=t=>{this.s_(t.engineWidth,t.engineHeight),this.e_(t.engineHeight,t.engineWidth),this.Zw.X(t.engineWidth,t.engineHeight),this.gi.Ps()},this.r_=(t,i)=>{this.Jw.set(t,i)},this.Wf=t=>{const i=this.IA.findIndex((i=>i.axis===t)),s=this.FA.findIndex((i=>i.axis===t)),e=this.PA.findIndex((i=>i.axis===t)),h=this.LA.findIndex((i=>i.axis===t));i>=0&&this.IA.splice(i,1),s>=0&&this.FA.splice(s,1),e>=0&&this.PA.splice(e,1),h>=0&&this.LA.splice(h,1),this.Jw.delete(t),this.gi.Ps()},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new _c(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(e,t),e},this.P=new Pt,this.gi.Ia(ln.Io),this.Mn({left:null!==(a=this.bi.panelPadding)&&void 0!==a?a:7,right:null!==(l=this.bi.panelPadding)&&void 0!==l?l:7,top:null!==(u=this.bi.panelPadding)&&void 0!==u?u:7,bottom:null!==(c=this.bi.panelPadding)&&void 0!==c?c:7},!1),this.o_=i.Em("chartXY series bg",Xc.seriesBackground),this.a_=[Xc.gridLine0,Xc.gridLine1,Xc.gridLine2].map((t=>i.l_(`chartXY gridline #${t}`,t))),this.jf=i.l_("chartXY highlighters below",Xc.highlightersBelow),this.AS=i.Rm("chartXY plotting",Zc.plotting),this.Hf=i.Rm("chartXY highlighters above",Zc.highlightersAbove),this.Yf=i.Rm("chartXY fg",Zc.fg),this.Zw.x.H(0,this.uiScale.x.getCellSize()-(this.nt.left+this.nt.right+this.Nn.left+this.Nn.right)),this.Zw.y.H(0,this.uiScale.y.getCellSize()-(this.nt.bottom+this.nt.top+this.Nn.bottom+this.Nn.top)),this.Zw.X(this.uiScale._t().x,this.uiScale._t().y),this.xy=this.o_.qe(this.Zw).Ke(this.bi.chartXYSeriesBackgroundFillStyle).Qe($t),this.My=this.o_.qe(this.Zw).Ke(xe).Qe(this.bi.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.by(this.xy,this.My),this.setSeriesBackgroundEffect(!1);const d=li(r?r.cursorBuilder:void 0,Dc),f=i.Um();this.Ym=IA(this,f,d.fm(f,this.Zw,this.Zw,ri,this.bi),this,"show-all",ed,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.addEventListener("resize",this.h_),this.Wh.qr("ChartXY"),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Yg(h,this.Zw),this.jm=(t=>{let i={},s=!1,e=!1,h=!1;const r=()=>{var s;const e=t.getAxes().find((t=>{var i,s;return(null===(i=t.getScrollStrategy())||void 0===i?void 0:i.id)===Ir||(null===(s=t.getScrollStrategy())||void 0===s?void 0:s.id)===Lr})),h=t.getSeries().map((t=>t.Ms())).find((t=>t)),r=t.getSeries().find((t=>t instanceof Oc&&!Me(t.getAreaFillStyle())&&t.Ms())),n=e?{type:"scrolling",scrollingAxis:e,x:e.isX,y:e.isY}:h?{type:"progressive",x:"ProgressiveX"===h||"RegressiveX"===h,y:"ProgressiveY"===h||"RegressiveY"===h}:{type:"freeform"};if("progressive"===n.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},s={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:r?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return Kt({rectangleZoom:{x:n.x,y:n.y,rmb:!1},pan:{x:n.x,y:n.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:!1,zoom:{x:n.x,y:n.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:n.x?t:s,yAxis:n.y?t:s},i)}if("scrolling"===n.type){const t=((null===(s=n.scrollingAxis.Er)||void 0===s?void 0:s.id)===Lr?-1:1)*(n.scrollingAxis.getInterval().end>n.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",e={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},h={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:r?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return Kt({rectangleZoom:!1,pan:{x:n.x,y:n.y,pinch:{},drag:{}},paginate:!1,zoom:{x:n.x,y:n.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:n.x?e:h,yAxis:n.y?e:h},i)}return Kt({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},i)},n=t=>{const i=r(),s=t.getUserInteractions();let e=t.isX?i.xAxis:i.yAxis,h=i.axes;return e=!1!==e?e:zc,h=!1!==h?h:zc,Kt(null!=h?h:{},null!=e?e:{},s)},o=t=>{},a=i=>{if(!t.axisX||!t.axisY)return;const n=Ne(!1!==t.gi.Ba.Da),o=r(),a=Ve(o.pan,"drag",i,s,e,h);a&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode();let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;const r=e.clientX-o.clientX,a=e.clientY-o.clientY;if(o=e,!n){if(!("mouse"===e.pointerType||Math.max(Math.abs(e.clientX-i.clientX),Math.abs(e.clientY-i.clientY))>=10))return;{n=!0;let i=s.cursor;null!==i&&(i=null!=i?i:!1===s.x?gr.Vertical:!1===s.y?gr.Horizontal:gr.Move,h=t.engine.setMouseStyle(i)),t.setCursorMode(void 0),gs()}}ki(e),s.x&&t.forEachAxisX((t=>{var i;const e=t.ah.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-r*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),s.y&&t.forEachAxisY((t=>{var i;const e=t.ah.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(a*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))}));const l=s.on;l&&ti.requestAnimationFrame((()=>l({event:e})))},l=s=>{s.pointerId===i.pointerId&&(ti.removeEventListener("pointermove",a),ti.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",u),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r),n&&(As("click"),As("contextmenu")))},u=s=>{s.pointerId!==i.pointerId&&(ti.removeEventListener("pointermove",a),ti.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",u),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))};ti.addEventListener("pointermove",a),ti.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",u),vs()})(t,i,a,f())));const l=Ve(o.zoom,"drag",i,s,e,h);l&&n.push((()=>((t,i,s,e)=>{let h;const r=s.cursor;if(null!==r){let i="function"==typeof r?r("in"):r;null!==i&&(i=null!=i?i:gr.ZoomIn,h=t.engine.setMouseStyle(i))}const n=t.getCursorMode();t.setCursorMode(void 0);let o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{if(e.pointerId!==i.pointerId)return;ki(e);const n={x:e.clientX-a.clientX,y:e.clientY-a.clientY};a=e,s.x&&t.forEachAxisX((e=>{var o;const a=e.ah.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.oi.Dt((e.oi.bt()+e.oi.xt())/2):t.translateCoordinate(i,{x:e,y:e}).x;const u=.05*e.lr.getWidth({x:-n.x,y:n.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(e.zoom(l,u),!1!==s.stopScroll&&e.setStopped(!0),null!==r){let i="function"==typeof r?r(u<0?"in":"out"):r;null!==i&&(i=null!=i?i:u<0?gr.ZoomIn:gr.ZoomOut,h=t.engine.setMouseStyle(i,h))}})),s.y&&t.forEachAxisY((e=>{var o;const a=e.ah.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.oi.Dt((e.oi.bt()+e.oi.xt())/2):t.translateCoordinate(i,{x:e,y:e}).y;const u=.05*e.lr.getWidth({x:-n.x,y:n.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(e.zoom(l,u),!1!==s.stopScroll&&e.setStopped(!0),null!==r){let i="function"==typeof r?r(u<0?"in":"out"):r;null!==i&&(i=null!=i?i:u<0?gr.ZoomIn:gr.ZoomOut,h=t.engine.setMouseStyle(i,h))}})),o||(gs(),o=!0);const l=s.on;l&&ti.requestAnimationFrame((()=>l({event:e})))},u=s=>{s.pointerId===i.pointerId&&(ti.removeEventListener("pointermove",l),ti.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(n))},c=s=>{s.pointerId!==i.pointerId&&(ti.removeEventListener("pointermove",l),ti.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(n))};ti.addEventListener("pointermove",l),ti.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",c),vs()})(t,i,l,f())));const u=Ve(o.rectangleZoom,void 0,i,s,e,h);u&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode(),n=t.addRectangleSeries({legend:null}).setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),o=n.add({x1:0,x2:0,y1:0,y2:0});let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{if(e.pointerId!==i.pointerId)return;ki(e),s.x&&t.forEachAxisX((t=>{const i=t.ah.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)})),s.y&&t.forEachAxisY((t=>{const i=t.ah.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)}));const n=t.translateCoordinate(i,t.coordsAxis),u=t.translateCoordinate(e,t.coordsAxis),c=tt({x:0,y:0},t.Zw,t.coordsAxis),d=tt({x:t.Zw.x.getInnerEnd(),y:t.Zw.y.getInnerEnd()},t.Zw,t.coordsAxis);!1===s.x?o.setDimensions({y1:n.y,x1:c.x,y2:u.y,x2:d.x}):!1===s.y?o.setDimensions({x1:n.x,y1:c.y,x2:u.x,y2:d.y}):o.setDimensions({x1:n.x,y1:n.y,x2:u.x,y2:u.y});const f=Is({x:e.clientX,y:e.clientY},{x:s.x?i.clientX:e.clientX,y:s.y?i.clientY:e.clientY})>=20,A=Fs(u.x,c.x,d.x)&&Fs(u.y,c.y,d.y);if(o.setFillStyle(f&&A?t.getZoomingRectangleFillStyle():xe).setStrokeStyle(f&&A?t.getZoomingRectangleStrokeStyle():$t),a||(gs(),a=!0),t.setCursorMode(f?void 0:r),f){let i=s.cursor;if(null!==i&&(i=null!=i?i:gr.ZoomIn,h=t.engine.setMouseStyle(i,h)),!l){const t=s.start;t&&t({event:e})}}else h=t.engine.restoreMouseStyle(h);l=f},c=o=>{if(o.pointerId!==i.pointerId)return;const a=Is({x:o.clientX,y:o.clientY},{x:s.x?i.clientX:o.clientX,y:s.y?i.clientY:o.clientY})>=20,l=t.translateCoordinate(o,t.coordsAxis),f=tt({x:0,y:0},t.Zw,t.coordsAxis),A=tt({x:t.Zw.x.getInnerEnd(),y:t.Zw.y.getInnerEnd()},t.Zw,t.coordsAxis),g=Fs(l.x,f.x,A.x)&&Fs(l.y,f.y,A.y);a&&g&&t.forEachAxis((e=>{var h,r;if(e.isX&&!s.x)return;if(e.isY&&!s.y)return;const n=e.ah.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.rectangleZoom)return;const a=t.translateCoordinate(i,{x:e,y:e}),l=t.translateCoordinate(o,{x:e,y:e}),u=e.lr.getWidth(a),c=e.lr.getWidth(l),d=Math.sign(c-u),f=Math.sign(e.getInterval().end-e.getInterval().start),A=d===f?u:c,g=d===f?c:u;e.ai(A,g,null!==(h=s.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=s.stopScroll)&&void 0!==r?r:void 0,"interactionSetInterval")})),a&&(As("click"),As("contextmenu")),t.setCursorMode(r),n.dispose(),ti.removeEventListener("pointermove",u),ti.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e();const v=a&&g&&s.on;v&&ti.requestAnimationFrame((()=>v({event:o})))},d=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),n.dispose(),ti.removeEventListener("pointermove",u),ti.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e())};ti.addEventListener("pointermove",u),ti.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",d),vs()})(t,i,u,f()))),n.end();const c=Ve(o.pan,"pinch",i,s,e,h),d=Ve(o.zoom,"pinch",i,s,e,h);(d||c)&&((t,i,s,e,h)=>{if(!s&&!e)return;const r=o=>{if(o.pointerId===i.pointerId)return;const a=h();let l;t.engine.container.removeEventListener("pointerdown",r),ti.removeEventListener("pointerup",n);let u=o;const c=t.getCursorMode();t.setCursorMode(void 0);const d=h=>{var r,n,a,c;const d=l,f=u;if(h.pointerId===i.pointerId)l=h;else{if(h.pointerId!==o.pointerId)return;u=h}if(ki(h),void 0===l||void 0===d)return;const A={x:(l.clientX-d.clientX+(u.clientX-f.clientX))/2*(null!==(r=null==s?void 0:s.sensitivity)&&void 0!==r?r:1),y:(l.clientY-d.clientY+(u.clientY-f.clientY))/-2*(null!==(n=null==s?void 0:s.sensitivity)&&void 0!==n?n:1)};let g=!1;if(s&&s.x&&(g=!0,t.forEachAxisX((t=>{const i=t.ah.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.EA({},A)}))),s&&s.y&&(g=!0,t.forEachAxisY((t=>{const i=t.ah.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.EA({},A)}))),g){const t=null==s?void 0:s.on;t&&ti.requestAnimationFrame((()=>t({event:h})))}const v=Zs(Xs({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-u.clientX),y:Math.abs(l.clientY-u.clientY)}),{x:null!==(a=null==e?void 0:e.sensitivity)&&void 0!==a?a:1,y:null!==(c=null==e?void 0:e.sensitivity)&&void 0!==c?c:1});let y=!1;if(e&&e.x&&(y=!0,t.forEachAxisX((t=>{var i;const s=t.ah.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ai(t.oi.Jt(t.getInterval().start,-t.lr.getWidth(v)),t.oi.Jt(t.getInterval().end,t.lr.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),e&&e.y&&(y=!0,t.forEachAxisY((t=>{var i;const s=t.ah.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ai(t.oi.Jt(t.getInterval().start,-t.lr.getWidth(v)),t.oi.Jt(t.getInterval().end,t.lr.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),y){const t=null==e?void 0:e.on;t&&ti.requestAnimationFrame((()=>t({event:h})))}},f=s=>{s.pointerId!==i.pointerId&&s.pointerId!==o.pointerId||(ki(s),t.setCursorMode(c),ti.removeEventListener("pointermove",d),ti.removeEventListener("pointerup",f),a())};ti.addEventListener("pointermove",d),ti.addEventListener("pointerup",f),vs()},n=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",r),ti.removeEventListener("pointerup",n))};t.engine.container.addEventListener("pointerdown",r),ti.addEventListener("pointerup",n)})(t,i,c,d,f)};Vc(t,"wheel",(i=>{const n=Ne(!1!==t.gi.Ba.Da),o=r(),a=Ve(o.pan,"wheel",i,s,e,h);a&&n.push((()=>((t,i,s)=>{if(ki(i),t.forEachAxisX((t=>{var e;const h=t.ah.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.x&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),t.forEachAxisY((t=>{var e;const h=t.ah.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.y&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.x||s.y){let e=s.cursor;if(null!==e){e=null!=e?e:!s.x&&s.y?gr.Vertical:s.x&&!s.y?gr.Horizontal:gr.Move;const i=t.engine.setMouseStyle(e);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=s.on;h&&ti.requestAnimationFrame((()=>h({event:i})))}})(t,i,a)));const l=Ve(o.zoom,"wheel",i,s,e,h);l&&n.push((()=>((t,i,s)=>{ki(i),t.forEachAxisX((e=>{var h;const r=e.ah.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.x)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.oi.Dt((e.oi.bt()+e.oi.xt())/2):t.translateCoordinate(i,{x:e,y:e}).x,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)})),t.forEachAxisY((e=>{var h;const r=e.ah.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.y)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.oi.Dt((e.oi.bt()+e.oi.xt())/2):t.translateCoordinate(i,{x:e,y:e}).y,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)}));const e=s.cursor;if(null!==e){let s="function"==typeof e?e(i.deltaY<0?"in":"out"):e;if(null!==s){s=null!=s?s:i.deltaY<0?gr.ZoomIn:gr.ZoomOut;const e=t.engine.setMouseStyle(s);ti.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500)}}const h=s.on;h&&ti.requestAnimationFrame((()=>h({event:i})))})(t,i,l))),n.end()})),Vc(t,"click",(i=>{if(i.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),o=r(),a=Ve(o.restoreDefault,void 0,i,s,e,h);a&&a.singleClick&&n.push((()=>{ki(i),Gc(t,a,i)}));const l=Ve(o.restorePrevious,void 0,i,s,e,h);l&&l.singleClick&&n.push((()=>{ki(i);const s=t.getAxes().filter((t=>{const i=t.ah.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:gr.ZoomOut;const i=t.engine.setMouseStyle(e);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=l.on;h&&ti.requestAnimationFrame((()=>h({event:i})))})),n.end()})),Vc(t,"contextmenu",(i=>{if(i.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),o=r(),a=Ve(o.restoreDefault,"rmb",i,s,e,h);a&&a.singleClick&&n.push((()=>{ki(i),Gc(t,a,i)}));const l=Ve(o.restorePrevious,"rmb",i,s,e,h);l&&l.singleClick&&n.push((()=>{ki(i);const s=t.getAxes().filter((t=>{const i=t.ah.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:gr.ZoomOut;const i=t.engine.setMouseStyle(e);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=l.on;h&&ti.requestAnimationFrame((()=>h({event:i})))})),n.end()})),Vc(t,"dblclick",(i=>{if(i.defaultPrevented)return;const n=Ne(!1!==t.gi.Ba.Da),o=r(),a=Ve(o.restoreDefault,void 0,i,s,e,h);a&&a.doubleClick&&n.push((()=>{ki(i),Gc(t,a,i)}));const l=Ve(o.restorePrevious,void 0,i,s,e,h);l&&l.doubleClick&&n.push((()=>{ki(i);const s=t.getAxes().filter((t=>{const i=t.ah.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});let e=l.cursor;if(null!==e){e=null!=e?e:gr.ZoomOut;const i=t.engine.setMouseStyle(e);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=l.on;h&&ti.requestAnimationFrame((()=>h({event:i})))})),n.end()}));const l=(i,r)=>{const o=Ne(!1!==t.gi.Ba.Da),a=n(i),l=Ve(a.pan,"drag",r,s,e,h);l&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();let n;h.setCursorMode(void 0);let o=s.cursor;null!==o&&(o=null!=o?o:t.isY?gr.Vertical:gr.Horizontal,n=h.engine.setMouseStyle(o));let a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{var h;if(e.pointerId!==i.pointerId)return;ki(e);const r=e.clientX-l.clientX,n=e.clientY-l.clientY;l=e,!1!==s.stopScroll&&t.setStopped(!0),t.pan((t.isX?-r:n)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),a||(gs(),a=!0);const o=s.on;o&&ti.requestAnimationFrame((()=>o({event:e})))},c=s=>{s.pointerId===i.pointerId&&(ki(s),ti.removeEventListener("pointermove",u),ti.removeEventListener("pointerup",c),n=t.chart.engine.restoreMouseStyle(n),e(),t.chart.setCursorMode(r))};ti.addEventListener("pointermove",u),ti.addEventListener("pointerup",c)})(i,r,l,f())));const u=Ve(a.zoom,"drag",r,s,e,h);u&&o.push((()=>((t,i,s,e)=>{const h=t.chart;let r;const n=s.cursor;if(null!==n){let t="function"==typeof n?n("in"):n;null!==t&&(t=null!=t?t:gr.ZoomIn,r=h.engine.setMouseStyle(t))}const o=h.getCursorMode();h.setCursorMode(void 0);let a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{var o;if(e.pointerId!==i.pointerId)return;ki(e);const u={x:e.clientX-l.clientX,y:e.clientY-l.clientY};let c;l=e,c="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:t.oi.Dt((t.oi.bt()+t.oi.xt())/2);const d=.05*t.lr.getWidth({x:-u.x,y:u.y})*(null!==(o=s.sensitivity)&&void 0!==o?o:1);if(t.zoom(c,d),!1!==s.stopScroll&&t.setStopped(!0),null!==n){let t="function"==typeof n?n("in"):n;null!==t&&(t=null!=t?t:d<0?gr.ZoomIn:gr.ZoomOut,r=h.engine.setMouseStyle(t,r))}a||(gs(),a=!0);const f=s.on;f&&ti.requestAnimationFrame((()=>f({event:e})))},c=t=>{t.pointerId===i.pointerId&&(ki(t),ti.removeEventListener("pointermove",u),ti.removeEventListener("pointerup",c),r=h.engine.restoreMouseStyle(r),h.setCursorMode(o),e())};ti.addEventListener("pointermove",u),ti.addEventListener("pointerup",c)})(i,r,u,f())));const c=Ve(a.rectangleZoom,void 0,r,s,e,h);c&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();let n;h.setCursorMode(void 0);let o=s.cursor;null!==o&&(o=null!=o?o:gr.ZoomIn,n=h.engine.setMouseStyle(o));const a=t.addBand({onTop:!0}).setPointerEvents(!1).setValueStart(t.lr.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setValueEnd(t.lr.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setVisible(!1).setFillStyle(h.getZoomingRectangleFillStyle()).setStrokeStyle(h.getZoomingRectangleStrokeStyle());let l=!1,u=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;ki(e),t.setStopped(!0);const r=h.translateCoordinate(e,{x:t,y:t});a.setValueEnd(t.lr.getWidth(r));const n=Is({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(a.setVisible(n),l||(gs(),l=!0),n&&!u){const t=n&&s.start;t&&t({event:e})}u=n},d=o=>{var l,u;if(o.pointerId!==i.pointerId)return;ki(o);const f=Is({x:o.clientX,y:o.clientY},{x:t.isX?i.clientX:o.clientX,y:t.isY?i.clientY:o.clientY})>=20;if(f){const e=t.lr.getWidth(h.translateCoordinate(i,{x:t,y:t})),r=t.lr.getWidth(h.translateCoordinate(o,{x:t,y:t})),n=Math.sign(r-e),a=Math.sign(t.getInterval().end-t.getInterval().start),c=n===a?e:r,d=n===a?r:e;t.ai(c,d,null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(u=s.stopScroll)&&void 0!==u?u:void 0,"interactionSetInterval")}a.dispose(),ti.removeEventListener("pointermove",c),ti.removeEventListener("pointerup",d),n=h.engine.restoreMouseStyle(n),e(),h.setCursorMode(r);const A=f&&s.on;A&&ti.requestAnimationFrame((()=>A({event:o})))};ti.addEventListener("pointermove",c),ti.addEventListener("pointerup",d)})(i,r,c,f()))),o.end()};Nc(t,"pointerenter",((t,i)=>{const s=n(t);t.getHighlightOnHover()&&(s.pan||s.rectangleZoom||s.restoreDefault||s.zoom)&&t.setHighlight(!0)})),Nc(t,"pointerleave",((t,i)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),Nc(t,"wheel",((i,r)=>{const o=Ne(!1!==t.gi.Ba.Da),a=n(i),l=Ve(a.zoom,"wheel",r,s,e,h);l&&o.push((()=>((t,i,s)=>{var e;let h;ki(i),h="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:"centered"===s.mode?t.oi.Dt((t.oi.bt()+t.oi.xt())/2):t.lr.getWidth(t.chart.translateCoordinate(i,{x:t,y:t})),t.zoom(h,Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.setStopped(!0);const r=s.cursor;if(null!==r){let s="function"==typeof r?r(i.deltaY<0?"in":"out"):r;if(null!==s){s=null!=s?s:i.deltaY<0?gr.ZoomIn:gr.ZoomOut;const e=t.chart.engine.setMouseStyle(s);ti.setTimeout((()=>{t.chart.engine.restoreMouseStyle(e)}),500)}}const n=s.on;n&&ti.requestAnimationFrame((()=>n({event:i})))})(i,r,l)));const u=Ve(a.pan,"wheel",r,s,e,h);u&&o.push((()=>((t,i,s)=>{var e;ki(i);const h=t.chart;!1!==s.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(i.deltaY)*t.lr.getWidth({x:-1,y:1})*(null!==(e=s.sensitivity)&&void 0!==e?e:1));let r=s.cursor;if(null!==r){r=null!=r?r:t.isY?gr.Vertical:gr.Horizontal;const i=h.engine.setMouseStyle(r);ti.setTimeout((()=>{t.chart.engine.restoreMouseStyle(i)}),500)}const n=s.on;n&&ti.requestAnimationFrame((()=>n({event:i})))})(i,r,u))),o.end()})),Nc(t,"dblclick",((i,r)=>{var o,a;if(r.defaultPrevented)return;const l=n(i),u=Ve(l.restoreDefault,void 0,r,s,e,h);if(u&&u.doubleClick){ki(r),i.fit(null!==(o=u.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=u.stopScroll)&&void 0!==a?a:void 0);let s=u.cursor;if(null!==s){s=null!=s?s:gr.ZoomOut;const i=t.engine.setMouseStyle(s);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const e=u.on;e&&ti.requestAnimationFrame((()=>e({event:r})))}}));const u=i=>{const n=r();let o=!1,a=!1,l=!1;for(const t of Object.keys(n)){const i=n[t];if("object"==typeof i)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=i;if("object"!=typeof t)continue;for(const i of Object.keys(t)){const s=t[i];"object"==typeof s&&("ctrl"in s&&void 0!==s.ctrl&&(o=!0),"shift"in s&&void 0!==s.shift&&(a=!0),"alt"in s&&void 0!==s.alt&&(l=!0))}}else"ctrl"in i&&void 0!==i.ctrl&&(o=!0),"shift"in i&&void 0!==i.shift&&(a=!0),"alt"in i&&void 0!==i.alt&&(l=!0)}e=i.ctrlKey,s=i.shiftKey,h=i.altKey,("Control"===i.key&&o||"Shift"===i.key&&a||"Alt"===i.key&&l)&&i.preventDefault();const u=Ve(n.restorePrevious,void 0,i,s,e,h);if(u&&u.code===i.code){ki(i);const s=t.getAxes().filter((t=>{const i=t.ah.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=u.on;e&&ti.requestAnimationFrame((()=>e({event:i})))}const c=Ve(n.paginate,void 0,i,s,e,h);c&&((t,i,s)=>{var e,h,r,n;const o=null!==(h=null===(e=s.forward)||void 0===e?void 0:e.code)&&void 0!==h?h:"ArrowLeft",a=null!==(n=null===(r=s.backward)||void 0===r?void 0:r.code)&&void 0!==n?n:"ArrowRight",l=i.code===o?1:i.code===a?-1:0;if(0===l)return;let u=!1;if(t.forEachAxis((t=>{var i;const e=t.ah.chartInteractions;!1===e||"object"==typeof e&&!1===e.paginate||t.isX&&!s.x||t.isY&&!s.y||(u=!0,!1!==s.stopScroll&&t.setStopped(!0),t.pan(-l*(t.vr>t.gr?1:-1)*.5*t.oi.Mt()*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),u){ki(i);let e=s.cursor;if(null!==e){e=null!=e?e:!s.x&&s.y?gr.Vertical:s.x&&!s.y?gr.Horizontal:gr.Move;const i=t.engine.setMouseStyle(e);ti.setTimeout((()=>{t.engine.restoreMouseStyle(i)}),500)}const h=s.on;h&&ti.requestAnimationFrame((()=>h({event:i})))}})(t,i,c);const d=Ve(n.restoreDefault,void 0,i,s,e,h);if(d&&d.code===i.code){ki(i),t.getAxes().forEach((t=>{var i,s;const e=t.ah.chartInteractions;!1===e||"object"==typeof e&&!1===e.restoreDefault||t.fit(null!==(i=d.animationsEnabled)&&void 0!==i?i:void 0,null!==(s=d.stopScroll)&&void 0!==s?s:void 0)}));const s=d.on;s&&ti.requestAnimationFrame((()=>s({event:i})))}},c=t=>{e=t.ctrlKey,s=t.shiftKey,h=t.altKey},d=()=>{e=!1,s=!1,h=!1};ti.addEventListener("keydown",u),ti.addEventListener("keyup",c),ti.addEventListener("blur",d),t.addEventListener("dispose",(()=>{ti.removeEventListener("keydown",u),ti.removeEventListener("keyup",c),ti.removeEventListener("blur",d)}));const f=()=>(A(),g(),v(),()=>{A=Vc(t,"pointermove",o),g=Vc(t,"pointerdown",a),v=Nc(t,"pointerdown",l)});let A=Vc(t,"pointermove",o),g=Vc(t,"pointerdown",a),v=Nc(t,"pointerdown",l);return{setUserInteractions:t=>{if(void 0===t)i={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)i={};else for(const s of Object.keys(t))!1===t[s]||"object"==typeof t[s]?i[s]=t[s]:i[s]={}},getUserInteractions:r}})(this);const A={...null==r?void 0:r.legend};this.legend.setOptions(A)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.vy}restorePreviousZoomState(t){if(this.Mm.length<=1)return this;this.Mm.pop();const i=this.Mm[this.Mm.length-1];return i?(this.u_=ti.performance.now(),this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ai(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Jm)this.Mm.length=0;else for(;this.Mm.length>1;)this.Mm.unshift();return this}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ym.solveNearest(t,i,this.vy,this.i_)}addCursor(t=Dc){const i=this.Dg(),s=t.fm(i,this.Zw,this.Zw,this.Ig(i),this.bi);return s.rw=!0,this.$g(s),s}getMinimumSize(){var t;const i={x:0,y:0};i.x+=this.nt.left+this.nt.right+this.Nn.left+this.Nn.right,i.y+=this.nt.top+this.nt.bottom+this.Nn.top+this.Nn.bottom;const s=this.Wh.Vr().bc(),e=g(qc(this.wA||Kc,null!==(t=this.bi.chartXYTitleMargin)&&void 0!==t?t:5),this.Hg);return i.x+=s.x+e.left+e.right,i.y+=s.y+e.top+e.bottom,this.c_&&(i.x+=this.c_.left,i.x+=this.c_.right,i.y+=this.c_.top,i.y+=this.c_.bottom),i.x+=Uc.x,i.y+=Uc.y,i}getLayout(){const t=this.d_;return this.gi.f_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.d_=void 0})):new Promise((i=>{i(t)}))}addAxisX(t){var i,s;const{opposite:e,type:h}=Ue(t);let r;r="linear"===h.type?this.Pg.d1({dimension:"x",scale1DConstructor:W}):"linear-highPrecision"===h.type?this.Pg.d1({dimension:"x",scale1DConstructor:W}).Rt():this.Pg.d1({dimension:"x",scale1DConstructor:re}).hs(h.base),r.X(this.Zw.x._t());const n=e?this.FA:this.IA,o=new sa(this.a_,this.Yf,this.Xg,this.jf,this.Hf,this.gi.vs,r,this.Zw.y,(a=()=>o.AA(),{...ra,...Ic(a)}),this,e?100:0,this.Wf,this.r_,this.bi,this.zh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.gi.Ps(),this.P.D("axisadd",{axis:o}),this.Zm(o),o}addAxisY(t){var i,s;const{opposite:e,type:h}=Ue(t);let r;r="linear"===h.type?this.Pg.d1({dimension:"y",scale1DConstructor:W}):"linear-highPrecision"===h.type?this.Pg.d1({dimension:"y",scale1DConstructor:W}).Rt():this.Pg.d1({dimension:"y",scale1DConstructor:re}).hs(h.base),r.X(this.Zw.y._t());const n=e?this.LA:this.PA,o=new sa(this.a_,this.Yf,this.Xg,this.jf,this.Hf,this.gi.vs,r,this.Zw.x,(a=()=>o.AA(),{...na,...Lc(a)}),this,e?100:0,this.Wf,this.r_,this.bi,this.zh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.gi.Ps(),this.P.D("axisadd",{axis:o}),this.Zm(o),o}Zm(t){const i=()=>{const i=ti.performance.now();void 0!==this.u_&&i-this.u_<=1e3||t.getVisible()&&(this.A_=i+300)};ti.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.Mm.forEach((i=>{i.delete(t)}))}))}swapAxes(t,i){const s=[this.IA,this.PA,this.LA,this.FA],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.d_=void 0;const l=[];this.legend.getEntries().forEach((t=>{if(t.component&&t.component instanceof Qu){const i=t.component.axisX,s=t.component.axisY,h=e.find((t=>t.axis===i||t.axis===s));h&&l.push({iStack:h.iStack,entry:t.component})}}));const u=l.sort(((t,i)=>i.iStack-t.iStack)).map((t=>t.entry));return this.Rs.forEach((t=>t.Sg(u))),this.gi.Ps(),this}dispose(){return this.Ym.N(),this.o_.N(),this.AS.N(),this.Yf.N(),this.a_.forEach((t=>t.N())),this.Hf.N(),this.jf.N(),this.Mw().forEach((t=>t.dispose())),ol(this.Zw),this.IA.slice().forEach((t=>t.axis.dispose())),this.PA.slice().forEach((t=>t.axis.dispose())),this.LA.slice().forEach((t=>t.axis.dispose())),this.FA.slice().forEach((t=>t.axis.dispose())),this.vy.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.IA,...this.FA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.PA,...this.LA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):jc;return ai(Array.from(i).map((t=>{switch(t){default:case Yc.Top:return this.FA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Yc.Bottom:return this.IA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Yc.Left:return this.PA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Yc.Right:return this.LA.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}g_(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.IA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.FA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.PA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.LA.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.wA=t,this.Rs.forEach((t=>t.Os())),this.gi.Ps(),this}getTitlePosition(){return this.wA}th(t,i=!1){var s;super.th(t);const e=ti.performance.now();void 0!==this.A_&&this.A_<=e&&(this._m(),this.A_=void 0);for(const t of this.vy)t.cv();for(const t of this.vy)t.th();const h=ts(this.vy.map((t=>t.hl()))),n=new Set(h.map((t=>t.Yw)));if(1===n.size){const t=Array.from(n)[0],i="x"===t?[this.IA,this.FA]:[this.PA,this.LA],s="y"===t?[this.IA,this.FA]:[this.PA,this.LA];i.forEach((t=>t.forEach((t=>t.axis.gn())))),s.forEach((t=>t.forEach((t=>t.axis.gn()))))}else this.PA.forEach((t=>t.axis.gn())),this.IA.forEach((t=>t.axis.gn())),this.FA.forEach((t=>t.axis.gn())),this.LA.forEach((t=>t.axis.gn()));let o=!1;this.forEachAxis((t=>{(t.Sn()||t.bn())&&(o=!0)}));const a=!this.Qw&&o,l=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Ym.th(a,l?this.vy.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.vy,this.i_,{afterCursorPointedAt:t=>{const i=this.gi.Fa();if(t.length>1&&i){const t=this.gi.tl(i);this.Ym.v_.im({x:t.engineX,y:t.engineY},this.gi.oi)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const u=(t,i,s,e,h={})=>{const r=sd(t);let n=0;const o=[],a=r.parallels.map((t=>{const r=t.stacks.reduce(((t,i)=>{var s,e;return t+(i.axis.getVisible()?(null!==(s=i.axis._A)&&void 0!==s?s:0)+(null!==(e=i.axis.kA)&&void 0!==e?e:0):0)}),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.vf?i.axis.vf.pixels:0)),0),l=i-r-a;let u=0;const c=t.stacks.map((s=>{var r,a;const c=s.axis,d=c.getVisible(),f=Math.max(i-u,0),A=Math.min(d?"pixels"in c.vf?c.vf.pixels:c.vf.relative/t.sumRelativeSize*l:0,f),g=t.stacks.length,v={...h,availableSpace:i,stack:s,axisLength:A,axisLengthOffset:u,axisThicknessOffset:n,stackAxisCount:g},y=e(v,o);return o.push({...v,...y}),d&&(u+=A+(null!==(r=c._A)&&void 0!==r?r:0)+(null!==(a=c.kA)&&void 0!==a?a:0)),{...y,stack:s,axis:c}})),d=c.reduce(((t,i)=>i.axis.getVisible()?Math.max(t,i.yA):t),0),f=c.reduce(((t,i)=>Math.max(t,i.gA)),0);return c.forEach((t=>{t.gA=f})),n+=d*s,{...t,stacks:c}}));return{parallels:a,thicknessTotal:Math.abs(n)}},d=this.getTitleFillStyle()!==xe&&this.getTitle().length>0,f=d?this.Wh.Vr().bc():{x:0,y:0},A=g(qc(this.wA,null!==(s=this.bi.chartXYTitleMargin)&&void 0!==s?s:5),this.Hg),v=d?td(this.wA,f,A):as,y=this.Rs.reduce(((t,i)=>{const s=i.Vr(v,this.Nn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0}),p=this.Zw.x.getCellSize()-(this.Nn.left+this.Nn.right+v.left+v.right)-y.left-y.right,m=this.Zw.y.getCellSize()-(this.Nn.top+this.Nn.bottom+v.bottom+v.top)-y.top-y.bottom,S=new Map,b=(t,i)=>{const s=!!i.find((t=>!0===t.updatedTicks)),e={physicalAxisSize:t.axisLength,mA:t.axisLength,y_:t.axisLengthOffset,SA:t.axisThicknessOffset,anyPreviousAxisUpdated:s,CA:t.stackAxisCount};return t.stack.axis.Vr(e)},x=u(this.PA,m,-1,b),M=u(this.LA,m,1,b),w=u(this.IA,p,-1,b),_=u(this.FA,p,1,b),k=[this.Nn.left+v.left+x.thicknessTotal+y.left,this.Nn.right+v.right+M.thicknessTotal+y.right],C=[this.Nn.bottom+w.thicknessTotal+v.bottom+y.bottom,this.Nn.top+v.top+_.thicknessTotal+y.top],T=this.Zw.x.getCellSize()-(k[0]+k[1]),F=this.Zw.y.getCellSize()-(C[0]+C[1]);this.Zw.x.H(0,T),this.Zw.y.H(0,F),this.Zw.x.St(k),this.Zw.y.St(C),super.Ug();const I=[...x.parallels,...w.parallels,...M.parallels,..._.parallels].map((t=>t.stacks)).flat(),L=t=>{var i,s;const e=t.stack.axis,h=I.find((t=>t.axis===e));if(!h)throw new Error("LightningChart JS unexpected runtime error");const r=e.getVisible()?t.margins[0]+t.axisLengthOffset+(null!==(i=e._A)&&void 0!==i?i:0):0,n=e.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-(null!==(s=e._A)&&void 0!==s?s:0):0;e.oi.St([r,n]);const o=t.stack.axis.th(h);return S.set(t.stack.axis,o),h},P=p-(x.thicknessTotal+M.thicknessTotal),B=m-(w.thicknessTotal+_.thicknessTotal);u(this.PA,B,-1,L,{margins:C}),u(this.LA,B,1,L,{margins:C}),u(this.IA,P,-1,L,{margins:k}),u(this.FA,P,1,L,{margins:k}),this.c_={left:x.thicknessTotal,top:_.thicknessTotal,right:M.thicknessTotal,bottom:w.thicknessTotal};const D={chartWidth:this.Zw.x.getCellSize(),chartHeight:this.Zw.y.getCellSize(),viewportWidth:T,viewportHeight:F,margins:{left:k[0],right:k[1],bottom:C[0],top:C[1]},axes:S},E=this.d_;if(i)this.P.D("layoutchange",{...D,userChangedLayout:()=>{}});else if(!E||Math.abs(E.chartWidth-D.chartWidth)>=1||Math.abs(E.chartHeight-D.chartHeight)>=1||Math.abs(E.viewportWidth-D.viewportWidth)>=1||Math.abs(E.viewportHeight-D.viewportHeight)>=1||this.getAxes().find((t=>{var i,s,e,h,r,n,o,a,l,u,c,d;const f=E.axes.get(t),A=D.axes.get(t);if(Math.abs((null!==(i=null==f?void 0:f.width)&&void 0!==i?i:0)-(null!==(s=null==A?void 0:A.width)&&void 0!==s?s:0))>=1||Math.abs((null!==(e=null==f?void 0:f.height)&&void 0!==e?e:0)-(null!==(h=null==A?void 0:A.height)&&void 0!==h?h:0))>=1||Math.abs((null!==(r=null==f?void 0:f.left)&&void 0!==r?r:0)-(null!==(n=null==A?void 0:A.left)&&void 0!==n?n:0))>=1||Math.abs((null!==(o=null==f?void 0:f.right)&&void 0!==o?o:0)-(null!==(a=null==A?void 0:A.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(u=null==A?void 0:A.bottom)&&void 0!==u?u:0))>=1||Math.abs((null!==(c=null==f?void 0:f.top)&&void 0!==c?c:0)-(null!==(d=null==A?void 0:A.top)&&void 0!==d?d:0))>=1)return t}))){let i=!1;const s=()=>{i=!0};if(this.P.D("layoutchange",{...D,userChangedLayout:s}),this.Tg||i)return this.engine.layout(),this.h_({width:this.uiScale._t().x,height:this.uiScale._t().y,engineWidth:this.gi.oi._t().x,engineHeight:this.gi.oi._t().y}),this.Tg=!0,void this.th(t,!0)}this.d_=D,this.xy.ih(r(0,0)).X(r(T,F)),this.My.ih(r(0,0)).X(r(T,F));const R=id(this.wA,f,A,this.uiScale.ri(),this.Nn,k,C,y);this.Wh.ih(R.position).xn(R.margin).Ul(R.horizontalAlignment).Hl(R.verticalAlignment),this.Rs.forEach((t=>t.th(v,this.Nn)));const O=c(this.Zw.x.bt(),this.Zw.y.bt(),this.Zw.x.Mt(),this.Zw.y.Mt());this.AS.Cm(O),this.jf.Cm(O),this.Hf.Cm(O),this._g&&this._g();for(const t of this.vy)t.dv()}Xw(t){const i=ts(this.vy.map((t=>t.hl()))),s=new Set(i.map((t=>t.Yw)));if(1===s.size){const e=Array.from(s)[0],h="x"===e?[this.IA,this.FA]:[this.PA,this.LA],r="y"===e?[this.IA,this.FA]:[this.PA,this.LA];h.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&i.axis.fit(s.animate,s.stopAxisAfter)})))),i.forEach((t=>t.jw())),r.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&(i.axis.getScrollStrategy()&&void 0===i.axis.getDefaultInterval()?i.axis.setStopped(!1):i.axis.fit(s.animate,s.stopAxisAfter))}))))}else t.forEach(((t,i)=>i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}Y(){for(let t=0;t<this.IA.length;t+=1)this.IA[t].axis.Y();for(let t=0;t<this.FA.length;t+=1)this.FA[t].axis.Y();for(let t=0;t<this.PA.length;t+=1)this.PA[t].axis.Y();for(let t=0;t<this.LA.length;t+=1)this.LA[t].axis.Y();return super.Y()}n_(t){if(this.Jw.has(t))return this.Jw.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new Oc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,t);return this.wy(e,t),e}addLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(xe).setPointFillStyle(xe)}addPointSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(xe).setStrokeStyle($t)}addPointLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(xe)}addStepSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(xe).setCurvePreprocessing({type:"step"})}addSplineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(xe).setCurvePreprocessing({type:"spline"})}addAreaSeries(t){return this.addPointLineAreaSeries(t).setPointFillStyle(xe)}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new nc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,t);return this.wy(e,t),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new hc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(e,t),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new ac(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(e,t),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new sc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(e,t),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:ra,h=new tc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,e,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(h,t),h}addTextSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new cc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length);return this.wy(e,t),e}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new bc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,t,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length),this.wy(e,t),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Mc(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,t,this.bi,this.gi.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length),this.wy(e,t),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Wc(i,s);const e=new(t&&t.type?t.type:Fc.Candlesticks)(this,this.my,this.AS,i,s,this.n_(i),this.n_(s),this.Dg,this.bi,this.gi.vs);return this.wy(e,t),e}addOnScreenMenu(t,i){return new Rc(this.Lg,t,this,i)}setZoomingRectangleFillStyle(t){return this.qw="function"==typeof t?t(this.qw):t,this.gi.Ps(),this}getZoomingRectangleFillStyle(){return this.qw}setZoomingRectangleStrokeStyle(t){return this.t_="function"==typeof t?t(this.t_):t,this.gi.Ps(),this}getZoomingRectangleStrokeStyle(){return this.t_}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Hc),this.forEachAxisX((s=>{s.zoom(s.oi.Dt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.oi.Dt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}bg(){const t=[];return this.forEachAxis((i=>i.uA((i=>t.push(i))))),super.bg().concat(t)}Mw(){return this.Kw}Ue(){return this.Qg(this.AS)}setCursorEnabledDuringAxisAnimation(t){return this.Qw=t,this}getCursorEnabledDuringAxisAnimation(){return this.Qw}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=oa(h)?h:Re(h)?this.sA:void 0;if(r&&De(s)){const t=tt(e,r,this.gi.oi);return this.gi.il({engineX:t.x,engineY:t.y})}if(r&&Re(s))return tt(e,r,this.sA);if(r&&oa(s))return tt(e,r,s)}else{const s=t;if(Re(i)){const t=this.gi.tl(s);return tt({x:t.engineX,y:t.engineY},this.gi.oi,this.sA)}if(oa(i)){const t=i,e=this.gi.tl(s);return tt({x:e.engineX,y:e.engineY},this.gi.oi,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,i,s){this.P.addEventListener(t,i,s),"layoutchange"===t&&this.d_&&i({...this.d_,userChangedLayout:()=>{}})}removeEventListener(t,i){this.P.removeEventListener(t,i)}setUserInteractions(t){return this.jm.setUserInteractions(t),this}getUserInteractions(){return this.jm.getUserInteractions()}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(Jc||(Jc={}));const Kc=Jc.CenterTop,qc=(t,i)=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:i};case"left-top":return{left:20,right:0,top:0,bottom:i};case"right-top":return{left:0,right:20,top:0,bottom:i};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:i,bottom:0};case"series-left-top":return{left:i,right:0,top:i,bottom:0};case"series-right-top":return{left:0,right:i,top:i,bottom:0};case"series-left-bottom":return{left:i,right:0,top:0,bottom:i};case"series-right-bottom":return{left:0,right:i,top:0,bottom:i}}return ss(0,`Unexpected ChartXY title position selection ${t}`)},td=(t,i,s)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:i.y+s.top+s.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:i.y+s.top+s.bottom,right:0,left:0,top:0};default:return as}},id=(t,i,s,e,h,r,n,o)=>{const a=(s.left-s.right)*e.x,l=(s.bottom-s.top)*e.y,u={top:0,left:o.left+h.left,right:o.right+h.right,bottom:0};switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-(h.top+s.top)*e.y},margin:u};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:a,y:100-(h.top-s.top)*e.y},margin:u};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+a,y:100-(h.top-s.top)*e.y},margin:u};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+a,y:(h.bottom+s.bottom)*e.y},margin:u};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:a,y:(h.bottom+s.bottom)*e.y},margin:u};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+a,y:(h.bottom+s.bottom)*e.y},margin:u};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-n[1]*e.y+l},margin:u};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:r[0]*e.x+a,y:100-n[1]*e.y+l},margin:as};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-r[1]*e.x+a,y:100-n[1]*e.y+l},margin:as};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:n[0]*e.y+l},margin:u};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:r[0]*e.x+a,y:n[0]*e.y+l},margin:as};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-r[1]*e.x+a,y:n[0]*e.y+l},margin:as}}return ss(0,`Unexpected ChartXY title position selection ${t}`)},sd=t=>{const i=[];t.forEach(((t,s)=>{const e=i.find((i=>i.iParallel===t.iParallel));e?(e.stacks.push({...t}),e.stacks.sort(((t,i)=>t.iStack-i.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t}]})}));const s=i.map((t=>{const i=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.vf?i.axis.vf.relative:0)),0);return{...t,sumRelativeSize:i}}));return s.sort(((t,i)=>t.iParallel-i.iParallel)),{parallels:s}},ed=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.Ms())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:i.axisY.getTitle()||void 0,progressiveAxis:i.axisY,valueDimension:i.axisX.getTitle()||void 0,hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:i.axisX.getTitle()||void 0,progressiveAxis:i.axisX,valueDimension:i.axisY.getTitle()||void 0,hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x};return ot(i)?kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:$e(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:$e(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:$e(i.lut?me(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):r?[[{text:$e(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...s.map((t=>t.multiHit?kA(t,[[{component:t.series,componentColor:CA(t)},""],[...n.valueDimension?[`${n.valueDimension}1`,""]:[],{text:$e(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[...n.valueDimension?[`${n.valueDimension}2`,""]:[],{text:$e(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):kA(t,[[{component:t.series,componentColor:CA(t)},"",{text:$e(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((i=>kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n.progressiveDimension?[`${n.progressiveDimension}`,""]:[],{text:$e(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[...n.valueDimension?[`${n.valueDimension}`,""]:[],{text:$e(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]))).flat()},hd=t=>t instanceof _c||t instanceof bc||t instanceof kc||t instanceof Oc;class rd{constructor(t,i,s,e,h,r,n){var o;this.coordsRelative="relative",this.coordsClient="client",this.p_=[],this.m_=new Map,this.vy=new Map,this.S_=!0,this.b_=new Set,this.x_=()=>{this.M_.gi.Ps()},this.w_=(t,i,s)=>{0!==this.vy.size&&void 0!==[...this.vy.values()].find((({series:t})=>!0===t.getVisible()))||this.__.ai(i,s,!1,!1,"zoomBandChartOther"),this.M_.gi.Ps()},this.k_=!0,this.P=new Pt,i.gi.Ia(ln.To),this.Lg=t,this.lg=(null==r?void 0:r.orientation)||"x",this.C_=void 0!==(null==r?void 0:r.useSharedValueAxis)&&r.useSharedValueAxis,this.T_=e,this.io="x"===this.lg?ra:na;const a={...r,defaultAxisX:this.io.getWidth({x:null==r?void 0:r.defaultAxis,y:void 0}),defaultAxisY:this.io.getHeight({x:null==r?void 0:r.defaultAxis,y:void 0}),legend:null!==(o=null==r?void 0:r.legend)&&void 0!==o?o:{addEntriesAutomatically:!1}};this.M_=new Qc(t,i,s,ri,h,a,n).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.M_.engine;const l=this.M_.getDefaultAxisX().setPointerEvents(!1),u=this.M_.getDefaultAxisY().setPointerEvents(!1);this.__=this.io.getWidth({x:l,y:u}).setScrollStrategy(Pr.fitting()).setAnimationScroll(!1).setStrokeStyle($t).setTickStrategy(Br.Empty),(null==r?void 0:r.useSharedValueAxis)?this.F_=this.io.getHeight({x:l,y:u}):this.io.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new ke({color:this.getTheme().isDark?m(0,0,0,180):m(255,255,255,180)});this.I_=[this.M_.Yf.qe(this.__.tA).Ke(c).Qe($t),this.M_.Yf.qe(this.__.tA).Ke(c).Qe($t)];const d=this.M_.Yf.bA(this.__.tA).fh(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.L_={collection:d,members:new Array(5).fill(0).map((t=>d.jo()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?qt({resourcesBaseUrl:this.Lg.pe,styleFactory:f.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):f.zoomBandChartKnobFillStyle||xe;this.P_=[this.M_.Yf.qe(this.M_.sA).Ke(A).Qe($t),this.M_.Yf.qe(this.M_.sA).Ke(A).Qe($t)],this.B_=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.D_()}get chart(){return this.M_}setUserInteractions(t){return this.ah=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return Kt({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.ah)}add(t){this.b_.has(t.chart)||(this.b_.add(t.chart),t.chart.addEventListener("layoutchange",this.x_));const i=this.p_.map((t=>t.axis)),s="x"===this.lg?t.axisX:t.axisY;if(!i.includes(s)){const t=t=>{this.w_(s,t.start,t.end)};s.addEventListener("intervalchange",t),this.p_.push({axis:s,deattach:()=>{s.removeEventListener("intervalchange",t)}}),this.__.Pr(s.Lr(),s.getTickStrategy()),this.E_&&this.E_.remove(),this.E_=ht(...this.p_.map((t=>t.axis)))}const e=this.io.getHeight({x:t.axisX,y:t.axisY});let h;if(this.C_)h=this.F_;else{const t=this.m_.get(e);t?h=t:(h=this.io.getHeight({x:this.M_.addAxisX.bind(this.M_),y:this.M_.addAxisY.bind(this.M_)})({type:e.cr.type}),this.R_(h)),this.m_.set(e,h)}const r=this.io.getWidth({x:this.__,y:h}),n=this.io.getHeight({x:this.__,y:h});let o;const a=[];if(t instanceof Oc)o=this.M_.addPointLineAreaSeries({...t.Ba,axisX:r,axisY:n,xAxis:r,yAxis:n}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),o.setDataSet(t.Uw(),t.getDataMapping());else if(t instanceof kc){const i=this.M_.addPointLineAreaSeries({axisX:r,axisY:n,xAxis:r,yAxis:n});((t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.appendJSON(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.appendJSON(e)}},e=t.dM();s(e);const h=t=>{s(t.data)},r=()=>{i.clear()};t.addEventListener("dataadd",h),t.addEventListener("dataclear",r),a.push((()=>{t.removeEventListener("dataadd",h),t.removeEventListener("dataclear",r)}))})(t,i),o=i}else if(t instanceof _c){const i=this.M_.addAreaRangeSeries({axisX:r,axisY:n,xAxis:r,yAxis:n}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.dM()),s=t=>i.add(t.data);t.addEventListener("dataadd",s),a.push((()=>t.removeEventListener("dataadd",s))),o=i;const e=t=>i.clear();t.addEventListener("dataclear",e),a.push((()=>{t.removeEventListener("dataclear",e)}))}else{if(!(t instanceof Sc))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.M_.addHeatmapGridSeries({...t.lx,axisX:r,axisY:n,xAxis:r,yAxis:n}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle()).setContours(t.getContours())};s(),o=i,t.yx(o);const e=t=>i.invalidateIntensityValues(t.value);t.addEventListener("stylechange",s),a.push((()=>{t.removeEventListener("invalidateintensity",e),t.removeEventListener("stylechange",s)}));const h=()=>{i.clear()};t.addEventListener("dataclear",h),a.push((()=>{t.removeEventListener("dataclear",h)}))}}o.setPointerEvents(!1);const l=t=>{o.setVisible(t.isVisible)};t.addEventListener("visiblechange",l),a.push((()=>{t.removeEventListener("visiblechange",l)}));const u=t=>{o.setHighlight(t.highlight)};a.push((()=>{t.addEventListener("highlightchange",u),t.removeEventListener("highlightchange",u)}));const c=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",c),a.push((()=>{t.removeEventListener("dispose",c)})),this.vy.set(t,{series:o,clearReferences:()=>a.forEach((t=>t()))}),o}disposeSeries(t){const i=this.vy.get(t);if(i){const{clearReferences:s}=i;s(),this.vy.delete(t),i.series.dispose();const e=this.io.getHeight({x:t.axisX,y:t.axisY}),h=this.m_.get(e);h&&0===h.AA().length&&(this.m_.delete(e),h.dispose())}const s="x"===this.lg?t.axisX:t.axisY;if(!Array.from(this.vy.keys()).find((t=>s===("x"===this.lg?t.axisX:t.axisY)))){const t=this.p_.findIndex((t=>t.axis===s));t>=0&&(this.p_[t].deattach(),this.p_.splice(t,1))}const e=Array.from(this.vy.keys()).find((t=>t.chart==t.chart));return e||(t.chart.removeEventListener("layoutchange",this.x_),this.b_.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.I_.forEach((i=>i.Ke(t))),this.M_.gi.Ps(),this}getDefocusOverlayFillStyle(){return this.I_[0].br()}setSplitterStrokeStyle(t){return this.L_.collection.fh(t),this.M_.gi.Ps(),this}getSplitterStrokeStyle(){return this.L_.collection.co()}setKnobFillStyle(t){return this.P_.forEach((i=>i.Ke(t))),this.M_.gi.Ps(),this}getKnobFillStyle(){return this.P_[0].br()}setKnobStrokeStyle(t){return this.P_.forEach((i=>i.Qe(t))),this.M_.gi.Ps(),this}getKnobStrokeStyle(){return this.P_[0].Za()}setKnobSize(t){return this.B_=t,this.M_.gi.Ps(),this}getKnobSize(){return this.B_}getDefaultAxisX(){return this.M_.getDefaultAxisX()}getDefaultAxisY(){return this.M_.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}R_(t){t.setTickStrategy(Br.Empty).setPointerEvents(!1).setStrokeStyle($t)}setStopAxisOnInteraction(t){return this.S_=t,this}getStopAxisOnInteraction(){return this.S_}D_(){let t;const i=(t,i,s,e)=>{var h,r;const n="x"===this.lg?null===(h=Array.from(this.vy.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this.vy.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.__.getInterval(),l=Math.abs(this.__.oi.Bt(t)-this.__.oi.Bt(i));s.preventTooSmall&&l<10||Math.sign(i-t)!==Math.sign(o.end-o.start)||Math.min(t,i)<Math.min(a.start,a.end)||Math.max(t,i)>Math.max(a.start,a.end)&&Math.max(o.start,o.end)<Math.max(t,i)||n.ai(t,i,s.animated,this.S_,e)};this.P_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob)&&(t=this.engine.setMouseStyle(this.io.getWidth({x:gr.Horizontal,y:gr.Vertical}),t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("pointerdown",(t=>{var s,h,r;if(!(null===(s=this.getUserInteractions().zoom)||void 0===s?void 0:s.dragKnob))return;const n="x"===this.lg?null===(h=Array.from(this.vy.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this.vy.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;ki(t);const o=s=>{if(s.pointerId!==t.pointerId)return;ki(s);const h=this.io.getWidth(this.M_.translateCoordinate(s,this.M_.coordsAxis)),r=n.getInterval(),o=0===e?h:r.start,a=1===e?h:r.end;i(o,a,{animated:!1,preventTooSmall:!0},"zoomBandChartOther")},a=i=>{i.pointerId===t.pointerId&&(ki(i),As("click"),ti.removeEventListener("pointermove",o),ti.removeEventListener("pointerup",a))};ti.addEventListener("pointermove",o),ti.addEventListener("pointerup",a)}))})),this.M_.seriesBackground.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.drag)&&(t=this.engine.setMouseStyle(gr.Move,t))})),this.M_.seriesBackground.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h,r;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag))return;const n="x"===this.lg?null===(h=Array.from(this.vy.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this.vy.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.__.oi.Jt(o.start,this.io.getWidth(t)),l=this.__.oi.Jt(o.end,this.io.getWidth(t));i(a,l,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),ki(s)};this.M_.seriesBackground.addEventListener("pointerdown",(t=>{var i,e;if(!("x"===this.lg?null===(i=Array.from(this.vy.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this.vy.keys())[0])||void 0===e?void 0:e.axisY))return;ki(t);let h=t;const r=i=>{if(i.pointerId!==t.pointerId)return;const e={x:i.clientX-h.clientX,y:h.clientY-i.clientY};h=i,s(e,i)},n=i=>{i.pointerId===t.pointerId&&(ki(i),gs(),As("click"),ti.removeEventListener("pointermove",r),ti.removeEventListener("pointerup",n))};ti.addEventListener("pointermove",r),ti.addEventListener("pointerup",n)})),this.M_.seriesBackground.addEventListener("wheel",(t=>{var s,e,h,r;const n=this.getUserInteractions();if(!(null===(s=n.zoom)||void 0===s?void 0:s.wheel))return;const o="x"===this.lg?null===(e=Array.from(this.vy.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.vy.keys())[0])||void 0===h?void 0:h.axisY;if(!o)return;const a=o.getInterval(),l=this.__.getInterval(),u=this.io.getWidth(this.M_.translateCoordinate(t,this.M_.coordsAxis)),c=this.__.oi.Bt(a.start),d=this.__.oi.Bt(a.end),f=this.__.oi.Bt(u),A=oi((f-c)/(d-c),0,1),g=.2*Math.abs(d-c)*(null!==(r=n.zoom.wheel.sensitivity)&&void 0!==r?r:1),v=A*g*-Math.sign(t.deltaY),y=(1-A)*g*Math.sign(t.deltaY),p=oi(this.__.oi.Jt(a.start,v),l.start,l.end),m=oi(this.__.oi.Jt(a.end,y),l.start,l.end);i(p,m,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),ki(t)})),this.I_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click)&&(t=this.engine.setMouseStyle(gr.Point,t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("click",(t=>{var s,e,h;if(t.defaultPrevented)return;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.click))return;const r="x"===this.lg?null===(e=Array.from(this.vy.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.vy.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.io.getWidth(this.M_.translateCoordinate(t,this.M_.coordsAxis)),o=r.getInterval(),a=this.__.getInterval(),l=oi(n-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),u=l+(o.end-o.start);i(l,u,{animated:!0,preventTooSmall:!1},"zoomBandChartClick"),ki(t)}))}))}getSizePixels(){return this.M_.getSizePixels()}xn(t){this.M_.xn(t)}getMinimumSize(){return this.M_.getMinimumSize()}Y(){return this.M_.Y()}j(){return this.M_.j()}th(t){var i,s,e,h;const r=qi(Array.from(this.vy.keys()).map((t=>t.chart))),n="x"===this.lg?null===(i=Array.from(this.vy.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.vy.keys())[0])||void 0===s?void 0:s.axisY,o=(()=>{var t;const i=null===(t=this.p_.find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis;return!!i&&Math.sign(i.getInterval().end-i.getInterval().start)})(),a=Math.sign(this.__.getInterval().end-this.__.getInterval().start);if(a!==o&&0!==a&&0!==o&&this.__.ai(this.__.getInterval().end,this.__.getInterval().start,!1,this.__.getStopped(),"zoomBandChartOther"),this.vy.forEach(((t,i)=>{const s=t.series;i instanceof Oc&&s instanceof Oc&&s.setDataSet(i.getDataSet(),i.getDataMapping())})),this.k_)if("x"===this.lg){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||0!==t.Jf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.BA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(!t.getVisible()||100!==t.Jf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.BA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.M_.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.M_.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||0!==t.Jf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.BA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(!t.getVisible()||100!==t.Jf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.BA())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.M_.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.M_.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.M_.th(t);const l=this.__.getInterval().start,u=this.__.getInterval().end,c=oi(n?n.getInterval().start:l,l,u),d=oi(n?n.getInterval().end:u,l,u),f=this.io.getHeight(this.M_.Zw.getInnerIntervalPixels());this.I_[0].ih(this.io.toPoint(l,0)).X(this.io.toPoint(c-l,f)),this.I_[1].ih(this.io.toPoint(d,0)).X(this.io.toPoint(u-d,f)),this.L_.members[0].MA(this.io.toPoint(l,f),this.io.toPoint(c,f)),this.L_.members[1].MA(this.io.toPoint(c,f),this.io.toPoint(c,0)),this.L_.members[2].MA(this.io.toPoint(c,0),this.io.toPoint(d,0)),this.L_.members[3].MA(this.io.toPoint(d,0),this.io.toPoint(d,f)),this.L_.members[4].MA(this.io.toPoint(d,f),this.io.toPoint(u,f));const A=tt(this.io.toPoint(c,f/2),this.__.tA,this.M_.sA),g=tt(this.io.toPoint(d,f/2),this.__.tA,this.M_.sA),v=this.B_;this.P_[0].ih({x:A.x-v.x/2,y:A.y-v.y/2}).X({x:v.x,y:v.y}).Cr(this.io.getWidth({x:0,y:90})),this.P_[1].ih({x:g.x-v.x/2,y:g.y-v.y/2}).X({x:v.x,y:v.y}).Cr(this.io.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.M_.setSeriesBackgroundFillStyle(t),this.M_.gi.Ps(),this}getSeriesBackgroundFillStyle(){return this.M_.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.M_.setSeriesBackgroundStrokeStyle(t),this.M_.gi.Ps(),this}getSeriesBackgroundStrokeStyle(){return this.M_.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.M_.setSeriesBackgroundEffect(t),this.M_.gi.Ps(),this}getSeriesBackgroundEffect(){return this.M_.getSeriesBackgroundEffect()}getTheme(){return this.M_.getTheme()}setTitle(t){return this.M_.setTitle(t),this}getTitle(){return this.M_.getTitle()}setTitleFillStyle(t){return this.M_.setTitleFillStyle(t),this}getTitleFillStyle(){return this.M_.getTitleFillStyle()}setTitleFont(t){return this.M_.setTitleFont(t),this}getTitleFont(){return this.M_.getTitleFont()}setTitleMargin(t){return this.M_.setTitleMargin(t),this}getTitleMargin(){return this.M_.getTitleMargin()}setPadding(t){return void 0===t?this.k_=!0:(this.k_=!1,this.M_.setPadding(t),this.M_.forEachAxis((t=>t.setThickness(void 0)))),this.M_.gi.Ps(),this}getPadding(){return this.M_.getPadding()}setBackgroundFillStyle(t){return this.M_.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.M_.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.M_.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.M_.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Xa(t,i,s,this.M_.sA,this.M_.gi)}addUIElement(t,i){return this.M_.addUIElement(t,i)}saveToFile(t,i,s){return this.M_.saveToFile(t,i,s),this}dispose(){return this.M_.dispose(),this.m_.clear(),this.vy.clear(),this.T_(this),this}isDisposed(){return this.M_.isDisposed()}getLayout(){return this.M_.getLayout()}addEventListener(t,i,s){this.M_.addEventListener(t,i,s)}removeEventListener(t,i){this.M_.removeEventListener(t,i)}}class nd extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Line Series",this.ib=[],this.sb=!1,this.eb=!1,this.O_=3,this.wl=0,this.z_=Qe.Circle,this.P=new Pt,this.Xe=Zi(this.bi.polarPointLineSeriesFillStyle,r),this.hc=Zi(this.bi.polarPointLineSeriesStrokeStyle,r),this.nb=t.Nv(e,void 0,[Al.UserSeries]).fh(this.hc).Fi(this.getHighlight()),this.ws(this.nb),this.V_=t.Od(e).Rd(xe).fh($t).Ed(this.Xe).zd(this.z_).jd(this.O_).Fi(this.getHighlight()),this.ws(this.V_)}solveNearest(t,i){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=this.nb.ob(e);if(!h)return;const r=Yu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.ib.length&&this.chart.gi.Ia(ln.Eo),this.ib=Uu(t),this.sb=!0,this.WS=$u(this.ib),this.Hs.Ps(),this}getData(){return this.ib}setStrokeStyle(t){this.hc="function"==typeof t?t(this.hc):t;const i=this.hc;return this.nb.fh(i),this.Hs.Ps(),this}getStrokeStyle(){return this.hc}setPointFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const i=this.Xe;return this.V_.Ed(i),this.Hs.Ps(),this}getPointFillStyle(){return this.Xe}setPointSize(t){return this.O_=t,this.V_.jd(t),this.Hs.Ps(),this}getPointSize(){return this.O_}setPointShape(t){return this.z_=t,this.V_.zd(this.z_),this}getPointShape(){return this.z_}setPointRotation(t){return this.wl=t,this.V_.Nd(t),this.Hs.Ps(),this}getPointRotation(){return this.wl}eh(){return{fill:this.Xe,stroke:this.hc}}setConnectDataAutomaticallyEnabled(t){return this.eb=t,this.Hs.Ps(),this}getConnectDataAutomaticallyEnabled(){return this.eb}Sv(){return this.hv&&this.ib.length>0&&this.getVisible()}hh(t,i){t.Fi(i),this.Hs.Ps()}th(){if(this.sb||this.scale.Ae()){const t=Gu(this.ib,this.scale),i=Es(t);this.eb?(t.push({...t[0]}),this.nb.Iu(!0)):this.nb.Iu(!1),this.nb.zi().bu(t).Ci(i),this.V_.Dd((new ro).appendJSON(t),{x:"x",y:"y"}).Ci(i),this.sb=!1,this.nb.Vr(),this.V_.Vr()}}Ys(){return this.Ds||this.z_}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class od extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Series",this.ib=[],this.sb=!1,this.O_=3,this.wl=0,this.P=new Pt,this.Xe=Zi(this.bi.polarPointSeriesFillStyle,r),this.Ze=Zi(this.bi.polarPointSeriesStrokeStyle,r),this.Bd=new ro({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null,storage:Uint32Array}}}),this.kc=t.Od(e).fh($t).Rd(xe).Ed(this.Xe).Ud(this.Ze).zd(Qe.Circle).jd(this.O_).Fi(this.getHighlight()).Dd(this.Bd,{x:"x",y:"y",color:"color"}),this.ws(this.kc)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Gu([s],this.scale)[0],h=this.Bd.yd({x:"x",y:"y",color:"color"},e,_A(i),this.scale,this.chart.sA);if(!h)return;const r=Yu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.ib.length&&this.chart.gi.Ia(ln.Eo),this.ib=Uu(t),this.sb=!0,this.WS=$u(this.ib),this.Hs.Ps(),this}getData(){return this.ib}setPointAlignment(t){return this.kc.UA(t),this.chart.gi.Ps(),this}getPointAlignment(){return this.kc.Nw()}setPointFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const i=this.Xe;return this.kc.Ed(i),this.Hs.Ps(),this}getPointFillStyle(){return this.Xe}setPointStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.kc.Ud(this.Ze),this.Hs.Ps(),this}getPointStrokeStyle(){return this.Ze}setPointSize(t){return this.O_=t,this.kc.jd(t),this.Hs.Ps(),this}getPointSize(){return this.O_}setPointShape(t){return this.kc.zd(t),this.chart.gi.Ps(),this}getPointShape(){return this.kc.Vd()}setPointRotation(t){return this.wl=t,this.kc.Nd(t),this.Hs.Ps(),this}getPointRotation(){return this.wl}Sv(){return this.hv&&this.ib.length>0&&this.getVisible()}hh(t,i){t.Fi(i),this.Hs.Ps()}th(){if(this.sb||this.scale.Ae()){const t=Gu(this.ib,this.scale),i=Es(t);this.Bd.clear().appendJSON(t),this.kc.Ci(i),this.sb=!1,this.kc.Vr()}}eh(){return{fill:this.Xe}}Ys(){return this.Ds||this.getPointShape()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class ad extends Nu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.Es="Heatmap Series",this.N_=!0,this.gv=!1,this.P=new Pt;const o=this.chart.getSeries().length;this.Xe=Zi(this.bi.polarHeatmapSeriesFillStyle||this.bi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Ba=u,this.G_=t.U_(e,[],u).Ke(this.Xe).Fi(this.getHighlight()),this.ws(this.G_);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.WS={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.gi.tl(t),e={x:s.engineX,y:s.engineY},h=tt(e,this.chart.gi.oi,this.scale),r=Yu(h,this.scale),n=_A(i)?this.G_.vx(r):this.G_.yd(r);if(!n)return;const o=Gu([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:Pe(this.Xe)?this.Xe.lut:void 0}}Ji(t,i,s){return cs({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:Pe(this.Xe)?this.Xe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.gv&&this.chart.gi.Ia(ln.Eo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Ba.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Ba.dataOrder?t.length:t[0].length},s="annuli"===this.Ba.dataOrder?this.Ba.annuli:this.Ba.sectors,e="annuli"===this.Ba.dataOrder?this.Ba.sectors:this.Ba.annuli;if(i.x>s||i.y>e){if(!0===this.chart.Lg.Da){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.G_.fp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Ba.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Ba.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Ba.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Ba.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Ba.dataOrder?this.Ba.annuli-1:this.Ba.sectors-1,o="annuli"===this.Ba.dataOrder?this.Ba.sectors-1:this.Ba.annuli-1;if(s<0||h<0){if(!0===this.chart.Lg.Da){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;ti.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.Lg.Da){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ti.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.G_.fp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Hs.Ps(),this.gv=!0,this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.G_.Ke(this.Xe),this.Hs.Ps(),this}getFillStyle(){return this.Xe}clear(){return this.G_.zi(),this.Hs.Ps(),this}setIntensityInterpolation(t){return t=t||"disabled",this.G_.cp(t),this.Hs.Ps(),this}getIntensityInterpolation(){return this.G_.dp()}Us(){return Hi(this.Xe,this.G_.wi())}Sv(){return this.hv&&this.getVisible()}hh(t,i){t.Fi(i),this.Hs.Ps()}th(){}eh(){return{fill:this.Xe}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class ld extends Du{constructor(t,i,s,e,h,r,n,o){var a;super(t,cd,i,s,e,h,r,n,o),this.Y_=90,this.j_=12,this.H_=ud,this.zv=this.IS.wd(this.PS).setPointerEvents(!1),this.VS=t=>{if(0===this.getTitle().length||Me(this.getTitleFillStyle()))return;let i=180*(t.S-this.PS.fe())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;return!(i>=0&&i<=20||i>=340&&i<=360)&&void 0},this.Er=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Y_),this.W_=null!==(a=this.bi.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.X_="function"==typeof t?t(this.X_):t,this.Z_(),this.IS.Ps(),this}getTickStyle(){return this.X_}setTickFormattingFunction(t){return this.H_=t,this.Z_(),this.IS.Ps(),this}getTickFormattingFunction(){return this.H_}setClockwise(t){this.PS.ue(t);const i=this.Y_*Math.PI/180;return t?this.PS.de(i+Math.PI/2):this.PS.de(i-Math.PI/2),this.IS.Ps(),this}getClockwise(){return!this.PS.ce()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Y_=t;const i=t*Math.PI/180;return this.getClockwise()?this.PS.de(i+Math.PI/2):this.PS.de(i-Math.PI/2),this.IS.Ps(),this}getNorth(){return 180*this.PS.fe()/Math.PI}setDivision(t){return this.j_=t,this.Z_(),this.IS.Ps(),this}getDivision(){return this.j_}getMarginAfterTicks(){return this.W_}setMarginAfterTicks(t){return this.W_=t,this.chart.gi.Ps(),this}AA(){return[]}Jr(t,i,s){return{ticksInfo:i,yA:this.an(((t,i)=>{const s=i._n.Ph,e=.5*this.BS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Or.Vr().bc().y);return Math.max(t,e)}),0)+this.W_,updatedTicks:s}}vn(t,i){return i}mn(t,i,s){return{start:t,end:i}}ES(t,i){const s=t.ce()?1:-1,e=t.fe(),h=t.le()?t.ae().end-t.ae().start:t.ae().start-t.ae().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}RS(t,i){return t.Ah(i)}NS(t,i,s,e){const h=this.X_,r=t.ce()?1:-1,n=t.fe(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.le()?t.ae().end-t.ae().start:t.ae().start-t.ae().end,c={x:a*u,y:l*u};i.ph({x:0,y:0}).gh(c);const d={x:c.x+a*h.tickLength*t.ri().x,y:c.y+l*h.tickLength*t.ri().y};s.ph(c).gh(d),i.fh(h.gridStrokeStyle),s.fh(h.tickStyle)}DS(t,i,s){const e=t.ce()?1:-1;let h,r=(i-t.fe())*e;for(;r<0;)r+=2*Math.PI;for(;r>=2*Math.PI;)r-=2*Math.PI;h=r>0&&r<=Math.PI?-r+Math.PI/2:-r-Math.PI/2;const n=Math.cos(r),o=Math.sin(r),a=s.tickLength+s.tickPadding;return{alignment:{x:0,y:0},padding:{x:n*a*t.ri().x,y:o*a*t.ri().y},rotation:180*h/Math.PI,offset:{x:0,y:0}}}OS(t,i,s){const e=t.le()?t.ae().end-t.ae().start:t.ae().start-t.ae().end;this.zv.Ju(0).gh(360).tc(0).Qu(e+.5*i.getThickness()*t.ri().x).sc(360).Ke(xe).Qe(i)}zS(t,i,s){const e=t.fe(),h=this.DS(t,0+e,this.X_),r=t.le()?t.ae().end-t.ae().start:t.ae().start-t.ae().end;i.Xl(h.alignment).Cr(h.rotation).Gl(h.offset.x,h.offset.y).ih(Ws({x:r,y:0},h.padding))}Z_(){this.Pr({kh:[],Ch:[{Or:"Radial ticks",xA:0,Ph:this.X_,Mh:this.H_,Tn:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.j_;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},hr:{hn:()=>{},rr:()=>!1,nn:"hide-label"},Fn:void 0}],Th:ud,Fh:void 0,Ih:void 0},"Numeric")}}const ud=(t,i,s)=>(180*t/Math.PI).toFixed(0),cd={cn:()=>{},dn:()=>{},An:()=>{},CS:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,H:(t,i)=>{},st:(i,s,e,h,r)=>t.x.st(i,s,e,h,r)}),TS:t=>t.radial},dd=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),fd=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class Ad extends Xe{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Es="Sector",this.J_=0,this.Q_=1*Math.PI/2,this.K_=void 0,this.q_=void 0,this.P=new Pt,this.Hs=t,this.PS=e,this.rb=this.Hs.Cc(this.PS).Fi(this.getHighlight()),this.ws(this.rb),this.Xe=h.polarSectorFillStyle,this.Ze=h.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.J_=t,this.Hs.Ps(),this}getAngleStart(){return this.J_}setAngleEnd(t){return this.Q_=t,this.Hs.Ps(),this}getAngleEnd(){return this.Q_}setAmplitudeStart(t){return this.K_=t,this.Hs.Ps(),this}getAmplitudeStart(){return this.K_}setAmplitudeEnd(t){return this.q_=t,this.Hs.Ps(),this}getAmplitudeEnd(){return this.q_}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Hs.Ps(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Hs.Ps(),this}getStrokeStyle(){return this.Ze}th(){const t=this.PS.ae(),i=void 0!==this.K_?oi(this.K_,t.start,t.end):t.start,s=void 0!==this.q_?oi(this.q_,t.start,t.end):t.end,e=[],h=Math.min(this.J_,this.Q_),r=Math.max(this.J_,this.Q_);for(let t=h;t<=r;t+=1)e.push({angle:t,amplitude:i});for(let t=r;t>=h;t-=1)e.push({angle:t,amplitude:s});const n=Gu(e,this.PS);this.rb.ou(n).Ke(this.Xe).Qe(this.Ze)}hh(t,i){t.Fi(i),this.Hs.Ps()}eh(){return{fill:this.Xe,stroke:this.Ze}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class gd extends Ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("polarChart bg",0),e,i.gi.bi.polarChartBackgroundFillStyle,i.gi.bi.polarChartBackgroundStrokeStyle,i.gi.bi.polarChartTitleFont,i.gi.bi.polarChartTitleFillStyle,i.gi.bi.polarChartTitleShadow,n,null===(o=null==r?void 0:r.legend)||void 0===o?void 0:o.customLegend),this.coordsClient="client",this.Ef=[],this.tk=t=>{this.PS.X(t.engineWidth,t.engineHeight)},this.Vf=Ei(this.Ef),this.ik=t=>{this.Ef.push(t)},this.sk=()=>this.vy,this.P=new Pt,this.gi.Ia(ln.ko),this.o_=i.Em("polarChart series bg",0),this.ek=i.Rm("polarChart axis gridlines",0),this.hk=i.Rm("polarChart series",1),this.rk=i.Rm("polarChart axis lines",2),this.nk=i.Rm("polarChart axis ticks",3),this.PS=s.d2({scaleXYConstructor:Rh}),this.addEventListener("resize",this.tk),this.Wh.qr("Polar Chart"),this.xy=this.o_.wd(this.PS).Ke(this.bi.polarChartSeriesBackgroundFillStyle).Qe($t).Ju(0).gh(360).tc(0),this.My=this.o_.wd(this.PS).Ke(xe).Qe(this.bi.polarChartSeriesBackgroundStrokeStyle).Ju(0).gh(360).tc(0),super.by(this.xy,this.My),this.Yg(h,this.sA),this.ak=new Ru(this,this.PS,this.bi,!1!==(null==r?void 0:r.animationsEnabled),this.ek,this.rk,this.nk,this.vs,this.sk),this.lk=new ld(this,this.PS,this.bi,!1!==(null==r?void 0:r.animationsEnabled),this.ek,this.rk,this.nk,this.vs),this.coordsAxis={axisAmplitude:this.ak,axisRadial:this.lk};const a=i.Um(),l=li(r?r.cursorBuilder:void 0,cu);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),this,"show-nearest",yd,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled));const u={backgroundVisible:!0,...null==r?void 0:r.legend};this.legend.setOptions(u)}getSeries(){return this.vy}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ym.solveNearest(t,i,this.vy,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=cu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.sA,h=s;if(De(h)){const t=tt(i,e,this.gi.oi);return this.gi.il({engineX:t.x,engineY:t.y})}if(Re(h))return i;if(dd(h)){const t=tt(i,e,this.PS);return Yu(t,this.PS)}}else{const s=t,e=i;if(Ee(s)){if(dd(e)){const t=this.gi.tl(s),i=tt({x:t.engineX,y:t.engineY},this.gi.oi,this.PS);return Yu(i,this.PS)}if(De(e))return s;if(Re(e)){const t=this.gi.tl(s);return tt({x:t.engineX,y:t.engineY},this.gi.oi,this.sA)}}else if(fd(s)){if(dd(e))return s;const t=Gu([s],this.PS)[0];if(De(e)){const i=tt(t,this.PS,this.gi.oi),s={engineX:i.x,engineY:i.y};return this.gi.il(s)}if(Re(e))return tt(t,this.PS,this.sA)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new Xu(this.hk,this,this.my,this.PS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addPointSeries(t){const i=new od(this.hk,this,this.my,this.PS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addPointLineSeries(t){const i=new nd(this.hk,this,this.my,this.PS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addAreaSeries(t){const i=new Wu(this.hk,this,this.my,this.PS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addPolygonSeries(t){const i=new ju(this.hk,this,this.my,this.PS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,this.gi.vs);return this.wy(i,t),i}addHeatmapSeries(t){const i=new ad(this.hk,this,this.my,this.PS,this.bi,this.gi.vs,t);return this.wy(i,t),i}addSector(t){const i=new Ad(this.hk,this,this.Vf,this.PS,this.bi,this.gi.vs);return this.ik(i),this.Rs.forEach((s=>{s.mg()&&null!==t&&s.bu(i,t)})),i}getAmplitudeAxis(){return this.ak}get amplitudeAxis(){return this.ak}get axisAmplitude(){return this.ak}getRadialAxis(){return this.lk}get radialAxis(){return this.lk}get axisRadial(){return this.lk}th(t){super.th(t);const i=ul.qg(this.Wh,this.Hg),s=this.Rs.reduce(((t,s)=>{const e=s.Vr(i,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,s);for(const t of this.vy)t.cv();this.ak.gn(),this.lk.gn();for(const t of this.vy)t.th();const e=this.PS.getInnerIntervalPixels().x/2,h=this.ak.Vr({physicalAxisSize:e}),r=this.lk.Vr({physicalAxisSize:2*Math.PI*e});this.ak.th(h),this.lk.th(r);const n=[this.Nn.left+r.yA+s.left,this.Nn.right+r.yA+s.right],o=[this.Nn.bottom+r.yA+s.bottom,this.Nn.top+r.yA+i+s.top];this.PS.Kt(n).qt(o);const a=this.PS.ae().start,l=this.PS.ae().end,u=this.PS.le()?(r.yA||0)*this.PS.x.getPixelSize()+l-a:(r.yA||0)*this.PS.x.getPixelSize()+a-l;this.xy.Qu(u).sc(360),this.My.Qu(u).sc(360);for(const t of this.Ef)t.th();this.Ym.th(!1,this.vy,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.vy)t.dv();return super.Ug(),this.Rs.forEach((t=>t.th(i,this.Nn))),this.uk(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.ak.setAnimationsEnabled(t),this.lk.setAnimationsEnabled(t),this}getMinimumSize(){return r(vd,vd)}uk(){}forEachAxis(t){return t(this.ak),t(this.lk),this}dispose(){return this.Ef.slice().forEach((t=>t.dispose())),this.Ym.N(),this.o_.N(),this.ek.N(),this.hk.N(),this.rk.N(),this.nk.N(),super.dispose()}bg(){return[...this.vy,...this.Ef]}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const vd=300,yd=(t,i,s)=>{var e;return ut(i)?kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:$e(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:$e(i.lut?me(i.lut,i.intensity):i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):kA(i,[[{component:i.series,componentColor:CA(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:$e(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class pd extends Xe{constructor(t,i,s,e){super(t,i,s,e),this.Es="Slice",this.S=0,ti.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.gi.Ps()}))}))}}class md extends pd{}class Sd extends md{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.ck=!1,this.dk=xe,this.fk=xe,this.Ak=this.S,this.gk=Rt((()=>this.chart.gi.Ps())),this.vk=()=>{this.yk=void 0},this.P=new Pt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.rb=i.Cc(h,$n.Simple).Fi(this.getHighlight()),this.ws(this.rb),this.Or=s.wn(h).Fi(this.getHighlight()),this.ws(this.Or,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.pk(this.Ak,t,(()=>this.chart.Rs.forEach((t=>t.Os())))):this.Ak=t,this.S=t,this.chart.Rs.forEach((t=>t.Os())),this.chart.gi.Ps(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Ak)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.pk(this.Ak,0,(()=>super.setVisible(!1)))):(this.Ak=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.pk(this.Ak,this.S)):(this.Ak=this.S,super.setVisible(!0)),this}pk(t,i,s){this.yk=this.gk(300,Dt.ease)([[t,i]],(([t])=>{this.Ak=t,this.chart.gi.Ps()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,h){this.dk=t,this.fk=s,this.rb.Ke(this.dk).Qe(i),this.Or.Ke(this.fk).kr(e).Kr(h)}getAnimatedValue(){return this.Ak}hh(t,i){return t.Fi(i),this.chart.gi.Ps(),this}eh(){return{fill:this.dk,stroke:this.rb.Za()}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}var bd;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(bd||(bd={}));const xd={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>Math.abs(t.getAnimatedValue())-Math.abs(i.getAnimatedValue()),SortByValueDescending:(t,i)=>Math.abs(i.getAnimatedValue())-Math.abs(t.getAnimatedValue()),None:()=>0},Md={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};var wd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(wd||(wd={}));const _d=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},kd=(t,i,s,e,h,r=0,n=wd.VariableHeight,o,a)=>{i=_d(i,e.x),s=_d(s,e.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let d={x:o-i/2+a.left,y:e.y+h.bottom+a.bottom},f={x:o+i/2+a.left,y:e.y+h.bottom+a.bottom},A={x:0,y:h.bottom},g={x:0,y:h.bottom},v=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=t[i],o=10;y+=Math.abs(s.getAnimatedValue());const a=n===wd.VariableWidth?(e.y-r*l)/l:e.y+h.bottom-y/u*e.y;if(n===wd.VariableWidth){r=a-r<o?Math.max(20,a-o):r;break}0!==v&&v-a-r<o&&(r=Math.max(0,v-a-o)),v=a}const p=(i-s)/2/e.y;for(let v=0;v<l;v+=1){const y=t[v];c+=Math.abs(y.getAnimatedValue());const m=n===wd.VariableWidth?(e.y-r*l)/l:e.y+h.bottom-c/u*e.y;let S=0;v>0&&(d={x:A.x+p*r,y:A.y-r},f={x:g.x-p*r,y:g.y-r}),S=(i+c/u*(s-i))/2,A={x:o-S+a.left,y:n===wd.VariableWidth?d.y-m:m+a.bottom},g={x:o+S+a.left,y:n===wd.VariableWidth?f.y-m:m+a.bottom},f.x>=d.x&&g.x>A.x&&y.rb.ou([A,d,f,g])}};class Cd extends ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("funnelChart bg",0),e,i.gi.bi.funnelChartBackgroundFillStyle,i.gi.bi.funnelChartBackgroundStrokeStyle,i.gi.bi.funnelChartTitleFont,i.gi.bi.funnelChartTitleFillStyle,i.gi.bi.funnelChartTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.mk=[],this.Sk=xd.None,this.bk=!0,this.xk=this.bi.funnelChartSliceLabelShadow,this.Mk=0,this.wk=20,this._k=5,this.kk=wd.VariableHeight,this.Ck=!0,this.Tk=t=>{const i=this.mk.indexOf(t);i>=0&&(this.mk.splice(i,1),this.Fk())},this.P=new Pt,this.gi.Ia(ln.Mo),this.Ik=this.bi.effectsText,this.Lk=i.Rm("funnelChart bottom",0),this.Pk=i.Rm("funnelChart top",1),this.Wh.qr("Funnel Chart"),this.Bk=this.bi.funnelChartSliceFillStylePalette,this.Dk=this.bi.funnelChartSliceStrokeStyle,this.Ek=this.bi.funnelChartSliceLabelFont,this.Rk=this.bi.funnelChartSliceLabelFillStyle;const a=i.Um(),l=li(n?n.cursorBuilder:void 0,lu);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),void 0,"show-pointed",Td,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.Yg(h,this.sA);const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=lu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}addSlice(t,i){const s=new Sd(this.Mk,this.Lk,this.Pk,this,this.sA,this.Tk,this.bi,this.gi.vs);return this.Mk+=1,s.setName(t),s.setValue(i),s.vs.ps.Ls(this.Ik),s.vs.Ss.Ls(this.Ck),this.mk.push(s),this.gi.Ps(),s.setHighlightOnHover(this.bk),this.Rs.forEach((t=>{t.mg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.mk}setNeckWidth(t){return this.wk=oi(t,1,99),this.gi.Ps(),this}getNeckWidth(){return this.wk}setSliceGap(t){return this._k=Math.min(Math.max(t,0),20),this.gi.Ps(),this}setSliceMode(t){return this.kk=t,this.gi.Ps(),this}getFunnelSliceMode(){return this.kk}setLUT(t){return this.Sf=t,this.gi.Ps(),this}setSliceFillStyle(t){return this.Bk=t,this.gi.Ps(),this}getSliceFillStyle(){return this.Bk}setSliceStrokeStyle(t){return this.Dk="function"==typeof t?t(this.Dk):t,this.gi.Ps(),this}getSliceStrokeStyle(){return this.Dk}setSliceEffect(t){return this.Ck=t,this.mk.forEach((i=>i.vs.Ss.Ls(t))),this.gi.Ps(),this}getSliceEffect(){return this.Ck}setSliceSorter(t){return this.Sk=t,this.mk=this.mk.sort(this.Sk),this.gi.Ps(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){return this.Rk="function"==typeof t?t(this.Rk):t,this.gi.Ps(),this}getLabelFillStyle(){return this.Rk}setLabelShadow(t){return this.xk=t,this.gi.Ps(),this}getLabelShadow(){return this.xk}setLabelFont(t){return this.Ek="function"==typeof t?t(this.Ek):t,this.gi.Ps(),this}getLabelFont(){return this.Ek}setLabelEffect(t){return this.Ik=t,this.mk.forEach((i=>i.vs.ps.Ls(t))),this.gi.Ps(),this}getLabelEffect(){return this.Ik}setLabelFormatter(t){return this.Ok=t,this.gi.Ps(),this}getLabelFormatter(){return this.Ok}setSliceHighlightOnHover(t){return this.bk=t,this.mk.forEach((i=>i.setHighlightOnHover(t))),this}th(t){super.th(t),super.Ug(),this.mk=this.mk.sort(this.Sk);for(let t=0,{length:i}=this.mk;t<i;t+=1)this.zk(this.mk[t],t);const i=this.mk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=ul.qg(this.Wh,this.Hg),e=this.Rs.reduce(((t,i)=>{const e=i.Vr(s,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,e);const h=r(this.sA.x.getInnerInterval()-(this.Nn.left+this.Nn.right),this.sA.y.getInnerInterval()-(this.Nn.bottom+this.Nn.top+s)),n=r(h.x-e.left-e.right,h.y-e.top-e.bottom),o=r(this.Nn.left+(h.x+e.left-e.right)/2,this.Nn.bottom+(h.y+e.bottom-e.top)/2);let a=0;for(let t=0;t<i.length;t+=1)a+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.Or.qr(this.Ok(s,l[t])).Vr()}l.push(a),this.Ym.th(!1,this.mk,((t,s,e)=>{const h=l[i.indexOf(t)]||0,r=this.gi.tl(s);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:h}})),this.Rs.forEach((t=>t.th(s,this.Nn))),this.Vk(i,l,o,n,e)}zk(t,i){t.setStyle(this.Sf?new ke({color:this.Sf.getColors(t.getAnimatedValue(),void 0)}):this.Bk(i,t),this.Dk,this.Rk,this.Ek,this.xk)}Fk(){this.mk=this.mk.sort(this.Sk),this.gi.Ps()}bg(){return this.mk}dispose(){return this.mk.slice().forEach((t=>t.dispose())),this.Ym.N(),this.Lk.N(),this.Pk.N(),super.dispose()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Td=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Fd=(t,i,s)=>{const e=t.au();if(0===e.length)return{x:0,y:0};let h;const r=(e[1].y-e[0].y)/2+e[0].y;return h=i===Dd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:h,y:r}},Id=t=>{const i=t.au();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Ld extends Cd{constructor(){super(...arguments),this.Ok=Md.NamePlusValue,this.Nk=0,this.Gk=10,this.$k=30,this.Uk=10,this.Yk=Dd.Left,this.jk=[],this.Hk=this.bi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Hk=t;for(let t=0;t<this.jk.length;t+=1)this.jk[t].fh(this.Hk);return this.gi.Ps(),this}getLabelConnectorStyle(){return this.Hk}setLabelConnectorGapBeforeLabel(t){return this.Gk=t,this.gi.Ps(),this}getLabelConnectorGapBeforeLabel(){return this.Gk}setLabelConnectorGapBeforeSlice(t){return this.Nk=t,this.gi.Ps(),this}getLabelConnectorGapBeforeSlice(){return this.Nk}setLabelConnectorLengthAfterSlice(t){return this.$k=t,this.gi.Ps(),this}getLabelConnectorLengthAfterSlice(){return this.$k}setLabelConnectorMinLengthBeforeSlice(t){return this.Uk=t,this.gi.Ps(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Uk}setLabelSide(t){return this.Yk=t,this.gi.Ps(),this}getLabelSide(){return this.Yk}Vk(t,i,s,e,h){let r=0,n=0;for(let i=0;i<t.length;i+=1){const s=t[i].Or.setVisible(!0).Vr().bc();r=Math.max(r,s.x),n+=s.y}const o=.4*e.x,a=e.x-o-(this.Nk+this.$k+this.Uk+this.Gk);let l=!0;a<50?l=!1:r>a&&(t.forEach((t=>{const i=t.Or.en(),s=t.Or.bc().x/i.length,e=Math.floor(a/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.Or.qr(s).Vr()}})),n=0,r=t.reduce(((t,i)=>{const s=i.Or.bc();return n+=s.y,Math.max(t,s.x)}),0));const u=this.Yk===Dd.Left?this.Nn.left+h.left:this.Nn.left+e.x,c=this.Yk===Dd.Left?-1:1,d=e.y-n;d<0&&(l=!1);const f=l?r+this.Gk+this.Uk+this.$k+this.Nk:0,A=e.x-f,g=this.Yk===Dd.Left?this.Nn.left+f:this.Nn.left,v=this.Yk===Dd.Left?g+A:this.Nn.left+A,y=(g+v)/2;kd(t,100,this.wk,{x:A,y:e.y},this.Nn,this._k,this.kk,y,h);const p=t.filter((t=>l&&0!==t.rb.au().length?(t.Or.setVisible(!0),!0):(t.Or.setVisible(!1),!1))),m=d/(p.length+1);let S=this.Nn.bottom+e.y-(this.kk==wd.VariableHeight?m:0)+h.bottom;this.kk==wd.VariableWidth&&(S-=n/t.length/2);const b=this.Yk===Dd.Left?g:v,x=this.Yk===Dd.Left?y-.5*this.wk/100*A:y+.5*this.wk/100*A,M=this.Nn.bottom+e.y+h.bottom,w=this.Nn.bottom+h.bottom;for(let t=0;t<this.jk.length;t+=1)this.jk[t].setVisible(!1);for(let t=0;t<p.length;t+=1){const i=p[t],s=i.rb,e=i.Or,h=e.bc(),r=Fd(s,this.Yk,this.Nk);if(this.kk==wd.VariableHeight){i.Or.ih({x:u,y:S}).Xl({x:c,y:1});const t=S-.5*h.y,s={x:this.Yk===Dd.Left?Math.min(th(b,x,(t-M)/(w-M))-this.$k,r.x):Math.max(th(b,x,(t-M)/(w-M))+this.$k,r.x),y:t},n={x:this.Yk===Dd.Left?e.zl().x+h.x+this.Gk:e.zl().x-h.x-this.Gk,y:t};this.Wk([r,s,n]),S-=h.y+m}else{const t=this.Yk===Dd.Left?u+h.x+this.Gk:u-h.x-this.Gk;i.Or.ih({x:u,y:r.y}).Xl({x:c,y:0}),this.Wk([r,{x:t,y:r.y}])}}}getMinimumSize(){return r(500,300)}Wk(t){if(t){let i;for(let t=0;t<this.jk.length;t+=1)if(!this.jk[t].getVisible()){i=this.jk[t].setVisible(!0);break}void 0===i&&(i=this.Pk.Nv(this.sA,void 0,[Al.InternalUI]).fh(this.Hk),this.jk.push(i)),i.zi().bu(t)}}}class Pd extends Cd{constructor(){super(...arguments),this.Ok=Md.Name}Vk(t,i,s,e,h){const r=this.Nn.left+e.x/2;kd(t,100,this.wk,e,this.Nn,this._k,this.kk,r,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.rb,h=s.Or,r=Id(e);r&&h.ih(r).Ul(0).Hl(0)}}getMinimumSize(){return r(200,200)}}const Bd={LabelsOnSides:Ld,LabelsInsideSlices:Pd};var Dd,Ed;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Dd||(Dd={}));class Rd extends pd{}class Od extends Rd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ck=!1,this.Xk=xe,this.fk=xe,this.Ak=this.S,this.Zk=this.ck?1:0,this.Jk=this.getVisible(),this.gk=Rt((()=>this.chart.gi.Ps())),this.Qk=Rt((()=>this.chart.gi.Ps())),this.vk=()=>{this.yk=void 0},this.Kk=()=>{this.qk=void 0},this.P=new Pt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.tC=i.wd(h).Fi(this.getHighlight()),this.ws(this.tC),this.Or=s.wn(h).Fi(this.getHighlight()),this.ws(this.Or,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,i)=>{ki(i),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.Jk&&this.pk(this.Ak,t,(()=>this.chart.Rs.forEach((t=>t.Os())))):this.Ak=t,this.S=t,this.chart.Rs.forEach((t=>t.Os())),this.chart.gi.Ps(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.qk&&this.qk.finish(),this.qk=this.Qk(300,Dt.ease)([[this.Zk,t?1:0]],(([t])=>{this.Zk=t,this.chart.gi.Ps()})),this.qk.addEventListener("everyAnimationEnd",this.Kk),this.ck=!this.ck):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Zk=this.ck?0:1,this.ck=!this.ck):(this.Zk=0,this.ck=!this.ck),this.chart.gi.Ps(),this}getExploded(){return this.ck}setVisible(t){return this.Jk=t,!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Ak)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.pk(this.Ak,0,(()=>super.setVisible(!1)))):(this.Ak=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.pk(this.Ak,this.S)):(this.Ak=this.S,super.setVisible(!0)),this}pk(t,i,s){this.yk=this.gk(300,Dt.ease)([[t,i]],(([t])=>{this.Ak=t,this.chart.gi.Ps()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,h){this.Xk=t,this.fk=s,this.tC.Ke(this.Xk).Qe(i),this.Or.Ke(this.fk).kr(e).Kr(h)}getAnimatedValue(){return this.Ak}getAnimatedExplosion(){return this.Zk}eh(){return{fill:this.Xk,stroke:this.tC.Za()}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class zd extends pd{}class Vd extends zd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.ck=!1,this.dk=xe,this.fk=xe,this.Ak=this.S,this.gk=Rt((()=>this.chart.gi.Ps())),this.vk=()=>{this.yk=void 0},this.P=new Pt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.rb=i.Cc(h,$n.Simple).Fi(this.getHighlight()),this.ws(this.rb),this.Or=s.wn(h).Fi(this.getHighlight()),this.ws(this.Or,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.pk(this.Ak,t,(()=>this.chart.Rs.forEach((t=>t.Os())))):this.Ak=t,this.S=t,this.chart.Rs.forEach((t=>t.Os())),this.chart.gi.Ps(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Ak)>0?(this.yk&&(this.yk.finish(!1),this.yk=void 0),this.pk(this.Ak,0,(()=>super.setVisible(!1)))):(this.Ak=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.yk&&(this.yk.finish(!1),this.yk=void 0),super.setVisible(!0),this.pk(this.Ak,this.S)):(this.Ak=this.S,super.setVisible(!0)),this}pk(t,i,s){this.yk=this.gk(300,Dt.ease)([[t,i]],(([t])=>{this.Ak=t,this.chart.gi.Ps()})),this.yk.addEventListener("everyAnimationEnd",this.vk),s&&this.yk.addEventListener("end",s)}setStyle(t,i,s,e,h){this.dk=t,this.fk=s,this.rb.Ke(this.dk).Qe(i),this.Or.Ke(this.fk).kr(e).Kr(h)}getAnimatedValue(){return this.Ak}eh(){return{fill:this.dk,stroke:this.rb.Za()}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Ed||(Ed={}));const Nd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Gd=(t,i,s,e,h,r=0,n=Ed.VariableHeight,o,a=as)=>{i=Nd(i,e.x),s=Nd(s,e.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,i)=>t+Math.abs(i.getAnimatedValue())),0);let d={x:o-i/2+a.left,y:e.y+h.bottom+a.bottom},f={x:o+i/2+a.left,y:e.y+h.bottom+a.bottom},A={x:0,y:h.bottom},g={x:0,y:h.bottom},v=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=Math.abs(t[i].getAnimatedValue());const o=n===Ed.VariableWidth?(e.y-r*l)/l:e.y+h.bottom-y/u*e.y;if(n===Ed.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==v&&v-o-r<s&&(r=Math.max(0,v-o-s)),v=o}const p=(i-s)/2/e.y;for(let v=0;v<l;v+=1){const y=t[v];c+=Math.abs(y.getAnimatedValue());const m=n===Ed.VariableWidth?(e.y-r*l)/l:e.y+h.bottom-c/u*e.y;let S=0;v>0&&(d={x:A.x+p*r,y:A.y-r},f={x:g.x-p*r,y:g.y-r}),S=(i+c/u*(s-i))/2,A={x:o-S+a.left,y:n===Ed.VariableWidth?d.y-m:m+a.bottom},g={x:o+S+a.left,y:n===Ed.VariableWidth?f.y-m:m+a.bottom},f.x>=d.x&&g.x>=A.x&&y.rb.ou([A,d,f,g])}};class $d extends ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("pyramidChart bg",0),e,i.gi.bi.pyramidChartBackgroundFillStyle,i.gi.bi.pyramidChartBackgroundStrokeStyle,i.gi.bi.pyramidChartTitleFont,i.gi.bi.pyramidChartTitleFillStyle,i.gi.bi.pyramidChartTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.mk=[],this.Sk=xd.None,this.Bk=this.bi.pyramidChartSliceFillStylePalette,this.Dk=this.bi.pyramidChartSliceStrokeStyle,this.bk=!0,this.Ek=this.bi.pyramidChartSliceLabelFont,this.Rk=this.bi.pyramidChartSliceLabelFillStyle,this.xk=this.bi.pyramidChartSliceLabelShadow,this.Mk=0,this.wk=100,this._k=5,this.kk=Ed.VariableHeight,this.Ck=!0,this.Tk=t=>{const i=this.mk.indexOf(t);i>=0&&(this.mk.splice(i,1),this.Fk())},this.P=new Pt,this.gi.Ia(ln.Mo),this.Ik=this.bi.effectsText,this.Lk=i.Rm("pyramidChart bottom",0),this.Pk=i.Rm("pyramidChart top",1),this.Wh.qr("Pyramid Chart");const a=i.Um(),l=li(n?n.cursorBuilder:void 0,lu);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),void 0,"show-pointed",Ud,(()=>0)),this.Yg(h,this.sA),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=lu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}addSlice(t,i){const s=new Vd(this.Mk,this.Lk,this.Pk,this,this.sA,this.Tk,this.bi,this.gi.vs);return this.Mk+=1,s.setName(t),s.setValue(i),s.vs.ps.Ls(this.Ik),s.vs.Ss.Ls(this.Ck),this.mk.push(s),this.gi.Ps(),this.Rs.forEach((t=>{t.mg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.mk}setNeckWidth(t){return this.wk=oi(t,1,100),this.gi.Ps(),this}getNeckWidth(){return this.wk}setSliceGap(t){return this._k=Math.min(Math.max(t,0),20),this.gi.Ps(),this}setSliceMode(t){return this.kk=t,this.gi.Ps(),this}getPyramidSliceMode(){return this.kk}setLUT(t){return this.Sf=t,this.gi.Ps(),this}setSliceFillStyle(t){return this.Bk=t,this.gi.Ps(),this}getSliceFillStyle(){return this.Bk}setSliceStrokeStyle(t){return this.Dk="function"==typeof t?t(this.Dk):t,this.gi.Ps(),this}getSliceStrokeStyle(){return this.Dk}setSliceEffect(t){return this.Ck=t,this.mk.forEach((i=>i.vs.Ss.Ls(t))),this.gi.Ps(),this}getSliceEffect(){return this.Ck}setSliceSorter(t){return this.Sk=t,this.mk=this.mk.sort(this.Sk),this.gi.Ps(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){return this.Rk="function"==typeof t?t(this.Rk):t,this.gi.Ps(),this}getLabelFillStyle(){return this.Rk}setLabelShadow(t){return this.xk=t,this.gi.Ps(),this}getLabelShadow(){return this.xk}setLabelFont(t){return this.Ek="function"==typeof t?t(this.Ek):t,this.gi.Ps(),this}getLabelFont(){return this.Ek}setLabelEffect(t){return this.Ik=t,this.mk.forEach((i=>i.vs.ps.Ls(t))),this.gi.Ps(),this}getLabelEffect(){return this.Ik}setLabelFormatter(t){return this.Ok=t,this.gi.Ps(),this}getLabelFormatter(){return this.Ok}setSliceHighlightOnHover(t){return this.bk=t,this.mk.forEach((i=>i.setHighlightOnHover(t))),this}th(t){super.th(t),super.Ug(),this.mk=this.mk.sort(this.Sk);for(let t=0,{length:i}=this.mk;t<i;t+=1)this.zk(this.mk[t],t);const i=this.mk.filter((t=>Math.abs(t.getAnimatedValue())>0)),s=ul.qg(this.Wh,this.Hg),e=this.Rs.reduce(((t,i)=>{const e=i.Vr(s,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,e);const h=r(this.sA.x.getInnerInterval()-(this.Nn.left+this.Nn.right),this.sA.y.getInnerInterval()-(this.Nn.bottom+this.Nn.top+s)),n=r(h.x-e.left-e.right,h.y-e.top-e.bottom),o=r(this.Nn.left+(h.x+e.left-e.right)/2,this.Nn.bottom+(h.y+e.bottom-e.top)/2);let a=0;for(let t=0;t<i.length;t+=1)a+=Math.abs(i[t].getAnimatedValue());const l=[];for(let t=0;t<i.length;t+=1)l.push((u=Math.abs(i[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<i.length;t+=1){const s=i[t];s.Or.qr(this.Ok(s,l[t])).Vr()}l.push(a),this.Ym.th(!1,this.mk,((t,s,e)=>{const h=l[i.indexOf(t)]||0,r=this.gi.tl(s);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:h}})),this.Rs.forEach((t=>t.th(s,this.Nn))),this.Vk(i,l,o,n,e)}zk(t,i){t.setStyle(this.Sf?new ke({color:this.Sf.getColors(t.getAnimatedValue(),void 0)}):this.Bk(i,t),this.Dk,this.Rk,this.Ek,this.xk)}Fk(){this.mk=this.mk.sort(this.Sk),this.gi.Ps()}bg(){return this.mk}dispose(){return this.mk.slice().forEach((t=>t.dispose())),this.Ym.N(),this.Lk.N(),this.Pk.N(),super.dispose()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const Ud=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Yd=(t,i,s)=>{const e=t.au();if(0===e.length)return{x:0,y:0};let h;const r=(e[1].y-e[0].y)/2+e[0].y;return h=i===Zd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:h,y:r}},jd=t=>{const i=t.au();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Hd extends $d{constructor(){super(...arguments),this.Ok=Md.NamePlusValue,this.Nk=0,this.Gk=10,this.$k=30,this.Uk=10,this.Yk=Zd.Left,this.iC=bd.LabelsOnSides,this.jk=[],this.Hk=this.bi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Hk=t;for(let t=0;t<this.jk.length;t+=1)this.jk[t].fh(this.Hk);return this.gi.Ps(),this}getLabelConnectorStyle(){return this.Hk}setLabelConnectorGapBeforeLabel(t){return this.Gk=t,this.gi.Ps(),this}getLabelConnectorGapBeforeLabel(){return this.Gk}setLabelConnectorGapBeforeSlice(t){return this.Nk=t,this.gi.Ps(),this}getLabelConnectorGapBeforeSlice(){return this.Nk}setLabelConnectorLengthAfterSlice(t){return this.$k=t,this.gi.Ps(),this}getLabelConnectorLengthAfterSlice(){return this.$k}setLabelConnectorMinLengthBeforeSlice(t){return this.Uk=t,this.gi.Ps(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Uk}setLabelSide(t){return this.Yk=t,this.gi.Ps(),this}getLabelSide(){return this.Yk}Vk(t,i,s,e,h){let r=0,n=0;for(let i=0;i<t.length;i+=1){const s=t[i].Or.bc();r=Math.max(r,s.x),n+=s.y}const o=.4*e.x,a=e.x-o-(this.Nk+this.$k+this.Uk+this.Gk);let l=!0;a<50?l=!1:r>a&&(t.forEach((t=>{const i=t.Or.en(),s=t.Or.bc().x/i.length,e=Math.floor(a/s);if(e<i.length){const s=i.slice(0,e-3)+"...";t.Or.qr(s).Vr()}})),n=0,r=t.reduce(((t,i)=>{const s=i.Or.bc();return n+=s.y,Math.max(t,s.x)}),0));const u=this.Yk===Zd.Left?this.Nn.left+h.left:this.Nn.left+e.x,c=this.Yk===Zd.Left?-1:1,d=e.y-n;d<0&&(l=!1);const f=l?r+this.Gk+this.Uk+this.$k+this.Nk:0,A=e.x-f,g=this.Yk===Zd.Left?this.Nn.left+f:this.Nn.left,v=this.Yk===Zd.Left?g+A:this.Nn.left+A,y=(g+v)/2;Gd(t,.001,this.wk,{x:A,y:e.y},this.Nn,this._k,this.kk,y,h);const p=t.filter((t=>l&&0!==t.rb.au().length?(t.Or.setVisible(!0),!0):(t.Or.setVisible(!1),!1))),m=d/(p.length+1);let S=this.Nn.bottom+e.y-(this.kk==Ed.VariableHeight?m:0)+h.bottom;this.kk==Ed.VariableWidth&&(S-=n/t.length/2);const b=y,x=this.Yk===Zd.Left?g:v,M=this.Nn.bottom+e.y+h.bottom,w=this.Nn.bottom+h.bottom;for(let t=0;t<this.jk.length;t+=1)this.jk[t].setVisible(!1);for(let t=0;t<p.length;t+=1){const i=p[t],s=i.rb,e=i.Or,h=e.bc(),r=Yd(s,this.Yk,this.Nk);if(this.kk==Ed.VariableHeight){i.Or.ih({x:u,y:S}).Xl({x:c,y:1});const t=S-.5*h.y,s={x:this.Yk===Zd.Left?Math.min(th(b,x,(t-M)/(w-M))-this.$k,r.x):Math.max(th(b,x,(t-M)/(w-M))+this.$k,r.x),y:t},n={x:this.Yk===Zd.Left?e.zl().x+h.x+this.Gk:e.zl().x-h.x-this.Gk,y:t};this.Wk([r,s,n]),S-=h.y+m}else{const t=this.Yk===Zd.Left?u+h.x+this.Gk:u-h.x-this.Gk;i.Or.ih({x:u,y:r.y}).Xl({x:c,y:0}),this.Wk([r,{x:t,y:r.y}])}}}getMinimumSize(){return r(500,300)}Wk(t){let i;for(let t=0;t<this.jk.length;t+=1)if(!this.jk[t].getVisible()){i=this.jk[t].setVisible(!0);break}void 0===i&&(i=this.Pk.Nv(this.sA,void 0,[Al.InternalUI]).fh(this.Hk),this.jk.push(i)),i.zi().bu(t)}}class Wd extends $d{constructor(){super(...arguments),this.Ok=Md.Name,this.iC=bd.LabelsInsideSlices}Vk(t,i,s,e,h){const r=this.Nn.left+e.x/2;Gd(t,.001,this.wk,e,this.Nn,this._k,this.kk,r,h);for(let i=0;i<t.length;i+=1){const s=t[i].rb,e=t[i].Or,h=jd(s);h&&e.ih(h).Ul(0).Hl(0)}}getMinimumSize(){return r(200,200)}}const Xd={LabelsOnSides:Hd,LabelsInsideSlices:Wd};var Zd,Jd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Zd||(Zd={})),function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Jd||(Jd={}));class Qd{constructor(t,i,s,e,h,r,n,o,a){this.Vh=!1,this.sC=Pr.fitting({start:!1}),this.eC=t=>this.axisScale.Wt(t,de.Numeric),this.formatValue=t=>this.eC(t,{start:this.axisScale.G,end:this.axisScale.$}),this.hC=t,this.kn=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=K.d1({scale1DConstructor:W,dimension:"x"}).H(0,1),this.rC=r,this.sC=o,a&&(this.eC=a),n&&this.setInterval(n),this.nC=this.hC.Ah(this.scale).setPointerEvents(!1),this.oC=this.kn.wn(this.scale).qr(this.tag).setPointerEvents(!1),this.aC=this.hC.Nv(this.scale,void 0,[Al.InternalUI]).fh(this.chart.getNibStyle()),this.rC._s([this.oC])}Vk(t,i,s,e,h,n,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.nC.ph(t).gh(u).fh(this.chart.getAxisStyle()),this.aC.zi().bu(n===Jd.Normal?[Bs(u,l,oi(.5*d/js(Xs(l,u)),0,1)),u,Bs(u,c,oi(.5*d/js(Xs(c,u)),0,1))]:((t,i,s,e,h=2)=>{const n=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=n*(a/e)+i,l=r(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.oC.setVisible(!0).ih(Ws(u,r(o.paddingX,o.paddingY))).Ul(o.alignmentX).Hl(o.alignmentY):this.oC.setVisible(!1)}gn(t){if(this.sC&&!this.Vh){const i=this.sC.apply({axis:this,curStart:this.axisScale.getInnerStart(),curEnd:this.axisScale.getInnerEnd(),seriesDataRange:t});i&&this.axisScale.H(i.start,i.end)}}getLabelSize(){return this.oC.kr(this.chart.getAxisLabelFont()).Ke(this.chart.getAxisLabelStyle()).Vr()._t()}dispose(){this.nC&&this.nC.dispose(),this.oC&&this.oC.dispose(),this.aC&&this.aC.dispose()}getTag(){return this.tag}setInterval(t){const{start:i,end:s,stopAxisAfter:e}=t;return void 0!==e&&(this.Vh=e),this.axisScale.H(null!=i?i:this.axisScale.getInnerStart(),null!=s?s:this.axisScale.getInnerEnd()),this.chart.gi.Ps(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.eC=t,this.chart.gi.Ps(),this}setScrollStrategy(t){return this.sC=jr(t),this.chart.gi.Ps(),this}getScrollStrategy(){return this.sC}}const Kd=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),qd=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let i=!1;const s=t.chart.getAxes();if(s.length>1){const t=s[0].getInterval();i=s.some((i=>{const s=i.getInterval();return s.start!==t.start||s.end!==t.end}))}return i?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};class tf extends Vu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.Es="Spider Series",this.lC=new Map,this.uC=new Map,this.cs=He.onHover,this.O_=8,this.wl=0,this.cC=(()=>{const t=Rt((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Dt.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.addEventListener("end",(()=>{i=void 0})),n&&u.addEventListener("start",n),o&&u.addEventListener("end",o)}})(),this.dC={},this.fC={},this.Jk=this.getVisible(),this.AC=1,this.gC=((t,i)=>{const s=Rt((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Dt.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r&&(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0,i(!1)})),r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.AC=t,this.Hs.gi.Ps()}),(t=>{super.setVisible(t)})),this.vC=!1,this.P=new Pt,this.chart=t,this.Hs=i,this.z_=e,this.yC=h,this.Om=r,this.pC=n,this.mC=o,this.scale=s,this.SC=Zi(l.spiderSeriesFillStyle,u),this.bC=Zi(l.spiderSeriesStrokeStyle,u),this.xC=Zi(l.spiderSeriesPointFillStyle,u)}MC(){return this.vC}Ji(t,i,s){const e=this.mC(i);if(void 0!==e&&this.lC.has(e.tag)){const t=this.lC.get(e.tag),i=this.pC(e.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:e.tag,value:t}}}Sv(){return this.hv&&this.lC.size>0&&this.getVisible()}addPoints(...t){const i=0===this.lC.size;i||this.chart.gi.Ia(ln.Eo),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.yC(s)}if(this.chart.getAnimationsEnabled()&&void 0!==this.dC){let s;t.forEach((t=>this.uC.set(t.axis,t.value))),this.cC(0,1,(t=>{this.uC.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.lC.set(e,h+t*(i-h)),this.Hs.gi.Ps()}))}),{easing:this.dC.easing,durationMs:this.dC.durationMs,onStart:()=>{this.vC=i,s=new Map(this.lC)},onCompleted:()=>{this.vC=!1}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.lC.set(s,t[i].value),this.uC.set(s,t[i].value)}return this.Hs.Ps(),this}getValue(t,i=!1){if(this.chart.getAxis(t))return i?this.lC.get(t):this.uC.get(t)}setAnimationAddPoints(t,i){return this.dC=t?{easing:t,durationMs:i}:void 0,this.Hs.Ps(),this}setVisibleStateChangedAnimation(t,i){return this.fC=t?{easing:t,durationMs:i}:void 0,this.Hs.Ps(),this}setFillStyle(t){return this.SC="function"==typeof t?t(this.SC):t,this.rb&&(this.rb.Ke(this.SC),this.Hs.Ps()),this}getFillStyle(){return this.SC}setStrokeStyle(t){return this.bC="function"==typeof t?t(this.bC):t,this.rb&&(this.rb.Qe(this.bC),this.Hs.Ps()),this}getStrokeStyle(){return this.bC}setPointFillStyle(t){return this.xC="function"==typeof t?t(this.xC):t,this.V_&&(this.V_.Ed(this.xC),this.Hs.Ps()),this}getPointFillStyle(){return this.xC}setPointSize(t){return this.O_=t,this.V_&&this.V_.jd(t),this}getPointSize(){return this.O_}getPointShape(){return this.z_}setPointRotation(t){return this.wl=t,this.V_&&this.V_.Nd(t),this.Hs.Ps(),this}getPointRotation(){return this.wl}th(){if(super.th(),!this.ui){const t=new Array(this.Om.length);for(let i=0;i<this.Om.length;i+=1){const s=this.Om[i].getInterval().start,e=this.lC.get(this.Om[i].tag);t[i]=void 0!==e?this.pC(this.Om[i].tag,s+this.AC*(e-s)):this.pC(this.Om[i].tag,s)}Oi(t),t.length>=3&&(this.rb||(this.rb=this.Hs.Cc(this.scale,$n.Simple).Qe(this.bC).Ke(this.SC).Fi(this.getHighlight()),this.ws(this.rb)),this.rb.ou(t),this.V_||(this.V_=this.Hs.Od(this.scale).Rd(xe).fh($t).jd(this.O_).zd(this.z_).Nd(this.wl).Ed(this.xC).Fi(this.getHighlight()),this.ws(this.V_)),this.V_.Dd(new ro({schema:{x:{pattern:null},y:{pattern:null}}}).appendJSON(t),{x:"x",y:"y"}))}}eh(){return{fill:this.SC,stroke:this.bC}}Ys(){return this.Ds||this.z_}hh(t,i){return t.Fi(i),this.Hs.Ps(),this}setVisible(t){var i,s;return this.Jk=t,this.gC(t,this.chart.getAnimationsEnabled()&&void 0!==this.fC,{easing:null===(i=this.fC)||void 0===i?void 0:i.easing,durationMs:null===(s=this.fC)||void 0===s?void 0:s.durationMs}),this}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},ef=t=>t.oC.yc(),hf=t=>t.yc(),rf=(t,i,s,e)=>t.tc(0).ih(s).Ju(90).gh(-270).sc(i===Jd.Circle?void 0:e.length),nf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},of={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},af=()=>{of.alignmentX=0,of.alignmentY=0,of.paddingX=0,of.paddingY=0};class lf extends Ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("spiderChart bg",0),e,i.gi.bi.spiderChartBackgroundFillStyle,i.gi.bi.spiderChartBackgroundStrokeStyle,i.gi.bi.spiderChartTitleFont,i.gi.bi.spiderChartTitleFillStyle,i.gi.bi.spiderChartTitleShadow,n,null===(o=null==r?void 0:r.legend)||void 0===o?void 0:o.customLegend),this.Om=[],this.wC=[],this._C=[],this.sC=Pr.fitting({start:!1}),this.kC=!0,this.CC=qd,this.TC=Kd,this.FC=Jd.Normal,this.IC=4,this.LC=this.bi.spiderChartWebStyle,this.PC=this.bi.spiderChartScaleLabelFillStyle,this.BC=this.bi.spiderChartScaleLabelShadow,this.DC=this.bi.spiderChartScaleLabelFont,this.EC=5,this.RC=this.bi.spiderChartAxisLabelFillStyle,this.OC=this.bi.spiderChartAxisLabelFont,this.zC=5,this.VC=this.bi.spiderChartAxisStrokeStyle,this.NC=this.bi.spiderChartAxisNibStrokeStyle,this.GC=10,this.$C=f(),this.hasAxis=t=>this.Om.reduce(((i,s)=>i||s.tag===t),!1),this.UC=()=>{const t=this.Om.map(ef).concat(this._C.map(hf));return ks(t)},this.YC=()=>this.jC.wd(this.sA).setPointerEvents(!1),this.HC=t=>t.dispose(),this.WC=()=>this.Yf.wn(this.sA).setPointerEvents(!1),this.XC=t=>t.dispose(),this.ZC=t=>{this.kC&&!this.hasAxis(t)&&this.addAxis(t)},this.pC=(t,i)=>{for(const s of this.Om)if(s.tag===t){const t=Math.max(Math.min((i-s.axisScale.getInnerStart())/(s.axisScale.getInnerEnd()-s.axisScale.getInnerStart()),1),0);return Bs(s.nC.Ut(),s.nC.Gt(),t)}},this.mC=t=>{if(0===this.Om.length)return;const i=Xs(this.translateCoordinate(t,this.coordsRelative),this.Om[0].nC.Ut()),s=Math.atan2(i.y,i.x);let e,h=ps;for(const t of this.Om){const i=Xs(t.nC.Gt(),t.nC.Ut()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.P=new Pt,this.gi.Ia(ln._o),this.o_=i.Em("spiderChart series bg",0),this.jC=i.Rm("spiderChart web shapes",0),this.JC=i.Rm("spiderChart axis bg",1),this.AS=i.Rm("spiderChart plotting",2),this.Yf=i.Rm("spiderChart fg",3),this.rC=this.vs.oA().Ls(this.bi.effectsText),this.Wh.qr("Spider Chart"),this.xy=this.o_.wd(this.sA).Ke(this.bi.spiderChartSeriesBackgroundFillStyle).Qe($t).Ju(90).gh(-270).tc(0),this.My=this.o_.wd(this.sA).Ke(xe).Qe(this.bi.spiderChartSeriesBackgroundStrokeStyle).Ju(90).gh(-270).tc(0),super.by(this.xy,this.My);const a=i.Um(),l=li(r?r.cursorBuilder:void 0,ou);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),this,"show-pointed",uf,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Yg(h,this.sA);const u={backgroundVisible:!0,...null==r?void 0:r.legend};this.legend.setOptions(u)}getSeries(){return this.vy}getAxes(){return this.Om}getAxis(t){const i=this.Om.find((i=>i.getTag()===t));if(!i)throw new Error(`Axis with tag "${t}" was not found.`);return i}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=ou){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}addAxis(t){const i=this.Om.find((i=>i.tag===t));if(i)return i;const s=new Qd(this.JC,this.Yf,this.sA,this,t,this.rC,this.QC,this.sC,this.scaleLabelFormatter);return this.Om.push(s),this.rC._s(this.Om.map((t=>t.oC))),this.gi.Ps(),s}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:Qe.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.vy.length,e=new tf(this,this.AS,this.sA,i,this.ZC,this.Om,this.pC,this.mC,this.my,this.bi,s,this.gi.vs);return this.wy(e,t),e}getSeriesCount(){return this.vy.length}setWebMode(t){return this.FC=t,this.gi.Ps(),this}getWebMode(){return this.FC}setWebCount(t){return this.IC=t,this.gi.Ps(),this}getWebCount(){return this.IC}setWebStyle(t){return this.LC="function"==typeof t?t(this.LC):t,this.gi.Ps(),this}getWebStyle(){return this.LC}setScaleLabelStyle(t){return this.PC="function"==typeof t?t(this.PC):t,this.gi.Ps(),this}getScaleLabelStyle(){return this.PC}setScaleLabelShadow(t){return this.BC=t,this.gi.Ps(),this}getScaleLabelShadow(){return this.BC}setScaleLabelFont(t){return this.DC="function"==typeof t?t(this.DC):t,this.gi.Ps(),this}getScaleLabelFont(){return this.DC}setScaleLabelPadding(t){return this.EC=t,this.gi.Ps(),this}getScaleLabelPadding(){return this.EC}setScaleLabelStrategy(t){return this.CC=t,this.gi.Ps(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.Om.forEach((i=>{i.setScaleLabelFormatter(t)})),this.gi.Ps(),this}setAxisLabelStyle(t){return this.RC="function"==typeof t?t(this.RC):t,this.gi.Ps(),this}getAxisLabelStyle(){return this.RC}setAxisLabelFont(t){return this.OC="function"==typeof t?t(this.OC):t,this.gi.Ps(),this}getAxisLabelFont(){return this.OC}setAxisLabelEffect(t){return this.rC.Ls(t),this.gi.Ps(),this}getAxisLabelEffect(){return this.rC.Bs()}setAxisLabelPadding(t){return this.zC=t,this.gi.Ps(),this}getAxisLabelPadding(){return this.zC}setAxisLabelStrategy(t){return this.TC=t,this.gi.Ps(),this}setAxisStyle(t){return this.VC="function"==typeof t?t(this.VC):t,this.gi.Ps(),this}getAxisStyle(){return this.VC}setNibStyle(t){return this.NC="function"==typeof t?t(this.NC):t,this.gi.Ps(),this}getNibStyle(){return this.NC}setNibLength(t){return this.GC=t,this.gi.Ps(),this}getNibLength(){return this.GC}setAutoAxis(t){return this.kC=t,this}getAutoAxis(){return this.kC}setScrollStrategy(t){return this.sC=jr(t),this.Om.forEach((i=>i.setScrollStrategy(t))),this.gi.Ps(),this}setAxisInterval(t){return this.QC=t,this.Om.forEach((i=>i.setInterval(t))),this}th(t){super.th(t);const i=this.Om.length,s=ul.qg(this.Wh,this.Hg),e=this.Rs.reduce(((t,i)=>{const e=i.Vr(s,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,e);const h=r(this.sA.x.getInnerInterval()-(this.Nn.left+this.Nn.right),this.sA.y.getInnerInterval()-(this.Nn.bottom+this.Nn.top+s)),n=r(h.x-e.left-e.right,h.y-e.top-e.bottom),o=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.TC){const t=Math.min(n.x,n.y)/2;for(let s=0;s<i;s+=1){const e=sf(s,i),h=Math.cos(e),n=Math.sin(e),a=this.Om[s].getLabelSize();af();const l=this.TC(of,s,i,this.Om[s].tag,e,this.zC),u=r(h*t+l.paddingX,n*t+l.paddingY);h>0?o.right=Math.max(o.right,u.x+.5*(1-l.alignmentX)*a.x-t):o.left=Math.max(o.left,-u.x+.5*(l.alignmentX+1)*a.x-t),n>0?o.top=Math.max(o.top,u.y+.5*(1-l.alignmentY)*a.y-t):o.bottom=Math.max(o.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}this.Om.forEach((t=>{const i=!this.getSeries().some((t=>t.MC()))&&this.getSeriesCount()>1,s=this.KC(t.tag,i);s&&t.gn(s)}));const a=r(this.sA.x.getInnerStart()+this.Nn.left+e.left+n.x/2,this.sA.y.getInnerStart()+this.Nn.bottom+e.bottom+n.y/2),l=Math.min(n.x/2-(o.left+o.right)/2,n.y/2-(o.bottom+o.top)/2);this.$C=f(this.nt.left+this.Nn.left+o.left,this.nt.top+this.Nn.top+s+o.top,this.nt.right+this.Nn.right+o.right,this.nt.bottom+this.Nn.bottom+o.bottom),this.Vk(a,l);for(const t of this.vy)t.cv();for(const t of this.vy)t.th();this.Ym.th(!1,this.vy,void 0),super.Ug(),this.Rs.forEach((t=>t.th(s,this.Nn)));for(const t of this.vy)t.dv()}dispose(){return this.o_.N(),this.jC.N(),this.JC.N(),this.AS.N(),this.Yf.N(),this.Ym.N(),super.dispose()}getMinimumSize(){return r(this.$C.left+this.$C.right+100,this.$C.bottom+this.$C.top+100)}Vk(t,i){const s=this.Om.length,e=[];for(let h=0;h<s;h+=1){const n=sf(h,s),o=r(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);e.push(o)}rf(this.xy,this.FC,t,e),rf(this.My,this.FC,t,e),this.xy.Qu(i),this.My.Qu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];rf(o,s,e,r);const u=h*((l+1)/i);o.Qu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.wC,this.IC,this.FC,t,i,e,this.YC,this.HC);for(const t of this.wC)t.Ke(xe).Qe(this.LC);for(let h=0;h<s;h+=1){const r=this.Om[h],n=sf(h,s);af();const o=void 0!==this.TC?this.TC(of,h,s,this.Om[h].tag,n,this.zC):void 0;r.Vk(t,e,h,n,i,this.FC,o)}((t,i,s,e,h,n,o,a,l)=>{const u=h.length,c=t.length;let d=0;void 0!==i&&h.forEach(((h,l)=>{var f,A,g,v;const y=h.tag,p=sf(l,u);for(let m=0;m<s;m+=1){nf.alignmentX=0,nf.alignmentY=0,nf.paddingX=0,nf.paddingY=0;const S=i({...nf,chart:h.chart,axis:h,axisIndex:l,axisCount:u,axisTag:y,axisAngle:p,webIndex:m,webCount:s,labelPadding:e});if(void 0!==S){d>=c&&t.push(a());const i=t[d];d+=1;const e=(s-m)/s,u=h.formatValue(h.axisScale.getInnerStart()+e*(h.axisScale.getInnerEnd()-h.axisScale.getInnerStart())),y=Bs(n,o[l],e);i.ih(Ws(y,r(null!==(f=S.paddingX)&&void 0!==f?f:0,null!==(A=S.paddingY)&&void 0!==A?A:0))).Ul(null!==(g=S.alignmentX)&&void 0!==g?g:0).Hl(null!==(v=S.alignmentY)&&void 0!==v?v:0).qr(u)}}}));for(let i=d;i<c;i+=1)l(t[i]);t.length=d})(this._C,this.CC,this.IC,this.EC,this.Om,t,e,this.WC,this.XC);for(const t of this._C)t.Ke(this.PC).kr(this.DC).Kr(this.BC)}KC(t,i){let s,e;const h=this.getAxis(t);for(const t of this.vy){const r=t.getValue(h.tag,i);void 0!==r&&(s=void 0===s?r:Math.min(s,r),e=void 0===e?r:Math.max(e,r))}if(void 0!==s&&void 0!==e)return u(s,e)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const uf=(t,i,s)=>kA(i,[[{component:i.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[i.axis],[{text:t.getAxis(i.axis).formatValue(i.value),font:{weight:"bold"}}]]),cf={Vh:!1,Nh:0,Gh:!1,Uh:0,$h:!1,Yh:0,jh:0,Er:Pr.fitting({})},df=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},ff=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&xf(t,i,u,r,n,o),"spark-bar"===a&&Mf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&Mf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&wf(t,i,u,r,n,o),"spark-pie"===a&&_f(t,i,u,r,n,o)},Af=(t,i,s,e)=>({x:vf(t.x,i.x,s.x,e),y:yf(t.y,i.y,s.y,e)}),gf=(t,i,s,e)=>({position:vf(t.position,i.x,s.x,e),high:yf(t.high,i.y,s.y,e),low:yf(t.low,i.y,s.y,e)}),vf=(t,i,s,e)=>{const h=oi(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},yf=(t,i,s,e)=>{const h=oi(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},pf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&mf(a,i,s,h,r,n,o),"axis-band"===a.type&&Sf(a,s,h,r,n,o),"constant-line"===a.type&&bf(a,s,e,h,r,n,o)},mf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Af(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().zd(void 0!==l?l:Qe.Circle).Nd(c||0).jd(u||5).Ed(a||n.sparkPointChartFillStyle).Dd((new ro).appendSample(d),{x:"x",y:"y"})},Sf=(t,i,s,e,h,n)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=r(ms,ps),f=r(ms,ps);"x"===o&&(d=Af({x:a,y:ms},i,s,e),f=Af({x:l,y:ps},i,s,e)),"y"===o&&(d=Af({x:ms,y:a},i,s,e),f=Af({x:ps,y:l},i,s,e));const A=e[0],g=e[1],v=oi(d.x,A.x,A.x+g.x),y=oi(d.y,A.y,A.y+g.y),p=oi(f.x,A.x,A.x+g.x),m=oi(f.y,A.y,A.y+g.y);h.rect.add().ql(v).tu(y).X(r(p-v,m-y)).Ke(u||n.sparkChartBandFillStyle).Qe(c||n.sparkChartBandStrokeStyle).Qe($t)},bf=(t,i,s,e,h,n,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,v=[];if("y"===a&&d<=c&&c<=f){const t=Af(r(A,c),{x:A,y:d},e,h),i=Af(r(g,c),{x:A,y:d},e,h);v.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=Af(r(c,d),{x:A,y:d},e,h),i=Af(r(c,f),{x:A,y:d},e,h);v.push([t,i])}v.length>0&&n.line.add().fh(u||o.sparkChartConstantLineStrokeStyle).ph(v[0][0]).gh(v[0][1])},xf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.Da&&ti.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=ps,c=ms,d=ps,f=ms;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>Af(t,{x:u,y:d},A,s)));i.lineSet.add().Fi(r).fh(n||e.sparkLineChartStrokeStyle).zi().bu(g),a&&pf(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},Mf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,v=f/d*1;let y=ps,p=ms;if(A)y=-1,p=1;else for(const t of n)y=Math.min(y,t),p=Math.max(p,t);const m={x:0,y:A?-1:Math.min(0,y)},S={x:1*n.length+(n.length-1)*v,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*v,y:A?t>=g?1:0:t},h=Af({x:1*i+i*v,y:A?t>=g?0:-1:0},m,S,s),r=Af(e,m,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().Fi(r).ih(t.position).su(t.height).iu(t.width).Ke((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Qe(a||e.sparkBarChartStrokeStyle)}))},wf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:a,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.Da&&ti.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=ps,f=ms,A=ps,g=ms;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const v={x:f-d,y:g-A},y=[],p=[];for(const t of n){const i=o(t.x,t.y,A);y.push(gf(i,{x:d,y:A},v,s)),p.push(Af(t,{x:d,y:A},v,s))}i.junction.add().Fi(r).zi().bu(y).Ke(a||e.sparkAreaChartFillStyle),i.lineSet.add().Fi(r).zi().bu(p).fh(l||e.sparkAreaChartStrokeStyle),u&&pf(u,p,{x:d,y:A},{x:f,y:g},v,s,i,e)},_f=(t,i,s,e,h,n)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=Af(r(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().Fi(n).ih(d).Qu(A).tc(0).Ju(g).gh(g+h).Ke(u[s]||Zi(e.sparkPieChartFillStyle,s)).Qe(a||e.sparkPieChartStrokeStyle),g+=h}))},kf={XY:Dc,Spider:ou,BarChart:au,Map:du,Polar:cu,D3:Kl},Cf={Column:Bo,Row:Do},Tf=(t,i)=>{const s=(t=>{const i=m(0,0,0),s=m(255,255,255),e=new ke({color:t.uiStrokeColorContrastHigh}),h=new ke({color:t.uiStrokeColorContrastMedium}),r=new ke({color:t.uiStrokeColorContrastLow}),n=new P({family:t.fontFamily,weight:"normal",style:"normal"}),o=t.isDark?m(0,0,0,255):void 0,a=n.setSize(18*t.fontScaler),l=n.setSize(16*t.fontScaler),u=n.setSize(14*t.fontScaler),c=n.setSize(10*t.fontScaler),d=n.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),f=n.setSize(13*t.fontScaler),A=new wh({thickness:2,fillStyle:r}),g=new ke({color:t.dataHighlightOverlayColor}),v=new wh({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),y=t.dataColorPalette.map((t=>new ke({color:t.stroke}))),p=t=>y[t%y.length],b=y.map((t=>new wh({thickness:2,fillStyle:t}))),x=t=>b[t%b.length],M=t.dataColorPalette.map((t=>new ke({color:t.border}))).map((t=>new wh({thickness:2,fillStyle:t}))),w=t=>M[t%M.length],_=t.dataColorPalette.map((t=>{const i=t.area;return new G({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),k=t=>_[t%_.length],C=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new G({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),T=t=>C[t%C.length],F=t.dataColorPalette.map((t=>{const i=t.area;return new G({angle:180,stops:[{color:St(i,m(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:St(i,m(0,0,0,i.getA()),.3),offset:1}]})})),I=t=>F[t%F.length],L=t.dataColorPaletteInverted.map((t=>new ke({color:t.border}))).map((t=>new wh({thickness:2,fillStyle:t}))),B=t=>L[t%L.length],D=new ke({color:t.dataColorPositive}),E=new ke({color:t.dataColorNegative}),R=new wh({thickness:1,fillStyle:new ke({color:t.dataStrokeColorContrastHigh.setA(50)})}),O=new wh({thickness:2,fillStyle:t.axisLineFillStyle}),z=new ke({color:m(0,0,0,1)}),V=new wh({thickness:1,fillStyle:t.axisGridMajorFillStyle}),N=new wh({thickness:1,fillStyle:t.axisTickMajorFillStyle}),$=u,U=t.axisLabelMajorFillStyle,Y=new wh({thickness:1,fillStyle:t.axisGridMinorFillStyle}),j=new wh({thickness:1,fillStyle:t.axisTickMinorFillStyle}),H=c,W=U,X=ca,Z=new la({gridStrokeStyle:V,tickStyle:N,tickLength:7,tickPadding:5,labelFont:$,labelFillStyle:U,labelShadow:o}),J=new la({gridStrokeStyle:Y,tickStyle:j,tickLength:4,tickPadding:10,labelFont:H,labelFillStyle:W,labelShadow:o}),Q=new Ya({extremeTickStyle:X,majorTickStyle:Z,minorTickStyle:J.setLabelFillStyle(xe)}),K=new Ra({greatTickStyle:ca,majorTickStyle:Z,minorTickStyle:J}),q=K,tt=K,it=new xa({majorTickStyle:Z,minorTickStyle:J}),st=new ke({color:t.dataHighlightOverlayColor}),et=new wh({thickness:1,fillStyle:h}),ht=new wh({thickness:2,fillStyle:h}),rt=t=>new xh.Triangulated({shape:"sphere",size:10,fillStyle:y[t%y.length]}),nt=y[0],ot=t.uiTextFillStyle,at=t.legendBackgroundFillStyle,lt=new wh({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ut=Yi(t.legendButtonDefaultColor),ct=Yi(t.isDark?m(70,70,70,255):m(170,170,170,255)),dt=new ke({color:t.isDark?m(70,70,70,255):m(170,170,170,255)}),ft=new wh({thickness:1,fillStyle:e}),At=new Th({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:kh.DashedEqual,patternScale:3}),gt=new wh({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,yt=new wh({thickness:2,fillStyle:new ke({color:t.zoomBandChartSplitterColor})}),pt=new ke({color:t.uiBackgroundColor}),mt=new wh({thickness:1,fillStyle:new ke({color:t.isDark?s:i})});let bt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:$t,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new wh({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),panelPadding:7,chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:$t,chartXYTitleFont:a,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:o,chartXYTitleMargin:5,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:A,chartXYZoomingRectangleFillStyle:g,chartXYZoomingRectangleStrokeStyle:v,lineSeriesStrokeStyle:x,pointLineSeriesStrokeStyle:x,pointLineSeriesFillStyle:p,pointSeriesFillStyle:p,pointSeriesStrokeStyle:mt,ellipseSeriesFillStyle:p,ellipseSeriesStrokeStyle:x,polygonSeriesFillStyle:p,polygonSeriesStrokeStyle:x,rectangleSeriesFillStyle:p,rectangleSeriesStrokeStyle:$t,segmentSeriesStrokeStyle:x,boxSeriesBodyFillStyle:p(0),boxSeriesBodyStrokeStyle:$t,boxSeriesStrokeStyle:new wh({thickness:1,fillStyle:y[0]}),boxSeriesMedianStrokeStyle:new wh({thickness:1,fillStyle:new ke({color:i})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:D,ohlcCandleBodyFillStyleNegative:E,ohlcCandleTailStrokeStylePositive:new wh({thickness:1,fillStyle:new ke({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new wh({thickness:1,fillStyle:new ke({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new wh({thickness:2,fillStyle:D}),ohlcBarStrokeStyleNegative:new wh({thickness:2,fillStyle:E}),heatmapGridSeriesFillStyle:p,heatmapGridSeriesWireframeStyle:R,heatmapScrollingGridSeriesFillStyle:p,heatmapScrollingGridSeriesWireframeStyle:R,heatmapGridSeriesContourStrokeStyle:new wh({thickness:1,fillStyle:new ke({color:m(0,0,0)})}),heatmapGridSeriesContourLabelColor:Ce(ot)?ot.getColor():nt.getColor(),heatmapGridSeriesContourLabelFont:f,heatmapGridSeriesContourLabelShadow:o,areaRangeSeriesFillStyle:k,areaRangeSeriesStrokeStyle:w,areaRangeSeriesFillStyleInverted:T,areaRangeSeriesStrokeStyleInverted:B,areaSeriesBipolarHighFillStyle:k,areaSeriesBipolarHighStrokeStyle:w,areaSeriesBipolarLowFillStyle:T,areaSeriesBipolarLowStrokeStyle:B,areaSeriesPositiveFillStyle:k,areaSeriesPositiveStrokeStyle:w,areaSeriesNegativeFillStyle:T,areaSeriesNegativeStrokeStyle:B,xAxisTitleFont:l,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:O,xAxisOverlayStyle:z,xAxisZoomingBandFillStyle:g,xAxisZoomingBandStrokeStyle:$t,xAxisNumericTicks:Q,xAxisDateTimeTicks:q,xAxisTimeTicks:it,yAxisTitleFont:l,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:O,yAxisOverlayStyle:z,yAxisZoomingBandFillStyle:g,yAxisZoomingBandStrokeStyle:$t,yAxisNumericTicks:Q,yAxisDateTimeTicks:tt,yAxisTimeTicks:it,bandFillStyle:st,bandStrokeStyle:et,constantLineStrokeStyle:ht,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:$t,barChartTitleFont:a,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:o,barChartSeriesBackgroundFillStyle:xe,barChartSeriesBackgroundStrokeStyle:$t,barChartBarFillStyle:p,barChartBarStrokeStyle:new wh({thickness:1,fillStyle:r}),barChartValueAxisTitleFont:l,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:O,barChartValueAxisTicks:Q.setMajorTickStyle((t=>t.setGridStrokeStyle($t))).setMinorTickStyle((t=>t.setGridStrokeStyle($t))),barChartCategoryAxisTitleFont:l,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:O,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,tickStyle:Q.majorTickStyle.tickStyle,tickLength:0,labelShadow:o},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Q.majorTickStyle.labelFillStyle,labelFont:Q.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,labelAlignment:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:$t,chart3DTitleFont:a,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:o,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:A,chart3DBoundingBoxStrokeStyle:$t,xAxis3DTitleFont:l,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:O,xAxis3DNumericTicks:Q,xAxis3DDateTimeTicks:K,xAxis3DTimeTicks:it,yAxis3DTitleFont:l,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:O,yAxis3DNumericTicks:Q,yAxis3DDateTimeTicks:K,yAxis3DTimeTicks:it,zAxis3DTitleFont:l,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:O,zAxis3DNumericTicks:Q,zAxis3DDateTimeTicks:K,zAxis3DTimeTicks:it,lineSeries3DStrokeStyle:x,pointLineSeries3DStrokeStyle:x,pointLineSeries3DPointStyle:rt,pointSeries3DPointStyle:rt,pointCloudSeries3DPointStyle:t=>new xh.Pixelated({size:5,fillStyle:y[t%y.length]}),surfaceGridSeries3DFillStyle:p,surfaceGridSeries3DWireframeStyle:R,surfaceGridSeriesContourStrokeStyle:b[0],surfaceScrollingGridSeries3DFillStyle:p,surfaceScrollingGridSeries3DWireframeStyle:R,boxSeries3DFillStyle:p,meshModel3DFillStyle:p(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:$t,polarChartTitleFont:a,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:o,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:A,polarSectorFillStyle:st,polarSectorStrokeStyle:et,polarAmplitudeAxisTitleFont:l,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:o,polarAmplitudeAxisStrokeStyle:O,polarAmplitudeAxisNumericTicks:Q,polarAmplitudeAxisDateTimeTicks:K,polarAmplitudeAxisTimeTicks:it,polarRadialAxisTitleFont:l,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:O,polarRadialAxisTickStyle:Z.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:x,polarPointLineSeriesFillStyle:p,polarPointLineSeriesStrokeStyle:x,polarPointSeriesFillStyle:p,polarPointSeriesStrokeStyle:mt,polarPolygonSeriesFillStyle:I,polarPolygonSeriesStrokeStyle:w,polarAreaSeriesFillStyle:I,polarAreaSeriesStrokeStyle:w,polarHeatmapSeriesFillStyle:p,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:$t,mapChartTitleFont:a,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:o,mapChartFillStyle:nt,mapChartStrokeStyle:new wh({thickness:1,fillStyle:new ke({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:xe,mapChartOutlierRegionStrokeStyle:new wh({thickness:1,fillStyle:r}),mapChartSeparateRegionFillStyle:at,mapChartSeparateRegionStrokeStyle:lt,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:$t,dataGridTitleFont:a,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:o,dataGridTextFont:u,dataGridTextFillStyle:nt,dataGridCellBackgroundFillStyle:new ke({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new wh({thickness:.4,fillStyle:new ke({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:$t,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:lt,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:lt,dataGridScrollBarButtonArrowFillStyle:new ke({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,dataGridCellPadding:5,sparkLineChartStrokeStyle:x(0),sparkPointChartFillStyle:p(0),sparkBarChartFillStyle:p(0),sparkBarChartStrokeStyle:w(0),sparkAreaChartFillStyle:k(0),sparkAreaChartStrokeStyle:w(0),sparkPieChartFillStyle:p,sparkPieChartStrokeStyle:lt,sparkChartBandFillStyle:st,sparkChartBandStrokeStyle:et,sparkChartConstantLineStrokeStyle:ht,dataGridTextShadow:o,textSeriesShadow:o,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:$t,spiderChartTitleFont:a,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:o,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:A,spiderChartWebStyle:new wh({thickness:2,fillStyle:r}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:u,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:l,spiderChartAxisStrokeStyle:new wh({thickness:2,fillStyle:h}),spiderChartAxisNibStrokeStyle:new wh({thickness:2,fillStyle:e}),spiderSeriesFillStyle:I,spiderSeriesStrokeStyle:w,spiderSeriesPointFillStyle:p,spiderChartScaleLabelShadow:o,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:$t,pieChartTitleFont:a,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:o,pieChartSliceFillStylePalette:p,pieChartSliceStrokeStyle:lt,pieChartSliceLabelFont:f,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:ft,pieChartSliceLabelShadow:o,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:$t,funnelChartTitleFont:a,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:o,funnelChartSliceFillStylePalette:p,funnelChartSliceStrokeStyle:lt,funnelChartSliceLabelFont:f,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:ft,funnelChartSliceLabelShadow:o,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:$t,pyramidChartTitleFont:a,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:o,pyramidChartSliceFillStylePalette:p,pyramidChartSliceStrokeStyle:lt,pyramidChartSliceLabelFont:f,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:ft,gaugeChartValueLabelFont:f.setSize(60),gaugeChartUnitLabelFont:f.setSize(40),gaugeChartTickFont:f.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:$t,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:s,gaugeChartGlowColor:m(255,255,64),gaugeChartNeedleFillStyle:new ke({color:s}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new wh({thickness:2,fillStyle:new ke({color:i})}),pyramidChartSliceLabelShadow:o,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:$t,gaugeChartTitleFont:a,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:o,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:$t,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new wh({thickness:1,fillStyle:new ke({color:S("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:o,treeMapChartTitleFont:a,treeMapChartPathLabelFillStyle:ot,treeMapChartPathLabelFont:f,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:a,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:f,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:$t,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:yt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:m(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:$t,parallelCoordinateChartTitleFont:a,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:o,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:A,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:b[0],parallelCoordinateAxisTitleFont:l,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:Q,parallelCoordinateAxisDateTimeTicks:K,parallelCoordinateAxisTimeTicks:it,parallelCoordinateAxisStrokeStyle:O,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:lt,parallelCoordinateAxisBackgroundFillStyle:new G({angle:90,stops:[{offset:0,color:t.isDark?m(0,0,0,0):m(255,255,255,0)},{offset:1,color:t.isDark?m(0,0,0,255):m(255,255,255,180)}]}),uiButtonFillStyle:ut,uiButtonFillStyleHidden:ct,uiButtonStrokeStyle:t.isDark?$t:new wh({thickness:1,fillStyle:new ke({color:i})}),uiButtonSize:10,uiBackgroundFillStyle:at,uiBackgroundStrokeStyle:lt,uiTextFillStyle:ot,uiTextFillStyleHidden:dt,uiTextFont:f,uiTextPadding:5,legendTitleFillStyle:ot,legendTitleFont:d,legendBorderRadius:5,legendPadding:5,legendLUTLabelMargin:7,legendLUTUnitLabelMargin:7,legendLUTCornerRadius:5,legendLUTLengthHorizontal:160,legendLUTThicknessHorizontal:15,legendLUTLengthVertical:140,legendLUTThicknessVertical:25,cursorTickMarkerXBackgroundFillStyle:at,cursorTickMarkerXBackgroundStrokeStyle:lt,cursorTickMarkerXTextFillStyle:ot,cursorTickMarkerXTextFont:f,cursorTickMarkerYBackgroundFillStyle:at,cursorTickMarkerYBackgroundStrokeStyle:lt,cursorTickMarkerYTextFillStyle:ot,cursorTickMarkerYTextFont:f,cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:Qe.Circle,cursorPointMarkerFillStyle:At.getFillStyle(),cursorPointMarkerStrokeStyle:$t,cursorDynamicBehavior:{pointMarkerFill:e=>new ke({color:St(e,t.isDark?i:s,.2,230)}),pointMarkerStroke:e=>new wh({thickness:2,fillStyle:new ke({color:St(e,t.isDark?s:i,t.isDark?.8:.6,204)})}),pointMarkerSize:t=>({x:t+3,y:t+3})},cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new wh({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:ot,cursorResultTableTextFont:f,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:At,cursorGridStrokeStyleY:At,cursor3DGridStrokeStyleX:gt,cursor3DGridStrokeStyleY:gt,cursor3DGridStrokeStyleZ:gt,cursor3DTickStrokeStyleX:Z.tickStyle,cursor3DTickStrokeStyleY:Z.tickStyle,cursor3DTickStrokeStyleZ:Z.tickStyle,cursor3DTickLabelFillStyleX:ot,cursor3DTickLabelFillStyleY:ot,cursor3DTickLabelFillStyleZ:ot,cursor3DTickLabelFontX:f,cursor3DTickLabelFontY:f,cursor3DTickLabelFontZ:f,cursor3DTickLabelBackgroundFillStyleX:pt,cursor3DTickLabelBackgroundFillStyleY:pt,cursor3DTickLabelBackgroundFillStyleZ:pt,cursor3DTickLabelBackgroundStrokeStyleX:lt,cursor3DTickLabelBackgroundStrokeStyleY:lt,cursor3DTickLabelBackgroundStrokeStyleZ:lt,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(bt={...bt,...t.overrideThemeProperties}),bt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},Ff="Segoe UI, -apple-system, Verdana, Helvetica",If=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},Lf=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:St(i[e%i.length].stroke,m(255,255,255),.5);return new z({stops:[{color:St(h,m(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:St(h,m(30,30,30),.5*s).setA(100),offset:1}]})},Pf=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:St(i[e%i.length].stroke,m(255,255,255),.2);return new z({stops:[{color:St(h,m(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:St(h,m(0,0,0),.2*s),offset:1}]})},Bf=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:St(i[e%i.length].stroke,m(255,255,255),.2);return new G({angle:90,stops:[{color:St(h,m(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:St(h,m(30,30,30),.5*s),offset:1}]})},Df=(t,i,s)=>(()=>{const s=new Map;return e=>{const h=s.get(e);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:St(i[s%i.length].stroke,m(255,255,255),.3);return new G({angle:90,stops:[{color:St(e,m(255,255,255),.5),offset:0},{color:e,offset:.35},{color:St(e,m(30,30,30),.5),offset:1}]})})(e);return s.set(e,r),r}})(),Ef=es((()=>{const t=m(255,255,255),i=new ke({color:t}),s=!0,e=new Dh({spread:1,blur:9,offset:{x:0,y:0},color:m(0,0,0,150)}),h=new z({position:{x:.8,y:.8},extent:R.farthestCorner,shape:E.ellipse,stops:[{offset:0,color:m(50,51,52)},{offset:.5,color:m(14,15,16)},{offset:1,color:m(0,0,0)}]}),r=new ke({color:m(45,45,45)}),n=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(120,120,120,100)},{offset:1,color:m(0,0,0,50)}]}),o=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(30,30,30,200)},{offset:1,color:m(0,0,0,255)}]}),a=Ff,l=new ke({color:m(255,255,220)}),u=new ke({color:m(255,255,166)}),c=new ke({color:m(255,255,220)}),d=new ke({color:m(255,255,200)}),f=d,A=f,g=new G({angle:45,stops:[{offset:0,color:m(230,230,230)},{offset:1,color:m(150,150,150)}]}),v=new ke({color:m(220,220,220)}),y=new ke({color:m(200,200,200,50)}),p=new ke({color:m(200,200,200,150)}),S=new ke({color:m(200,200,200,20)}),b=new ke({color:m(220,220,220)}),x=new G({angle:0,stops:[{offset:0,color:m(10,10,10,220)},{offset:1,color:m(30,30,30,220)}]}),M=i,w=m(255,255,200),_=new ke({color:m(0,0,0,224)}),k=new ke({color:m(166,166,166)}),C=new ke({color:m(49,53,58)}),T=m(20,20,20),F=m(0,0,0),I=t,L=m(150,150,150),P=m(50,50,50),B=m(50,50,50),D=m(100,100,100),O=m(200,200,200),V=[m(255,255,91,255),m(255,205,91,255),m(255,155,91,255),m(255,196,188,255),m(255,148,184,255),m(219,148,198,255),m(235,196,224,255),m(169,148,198,255),m(148,226,198,255),m(148,255,176,255),m(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),N=t.setA(20),$=m(176,255,157,255),U=m(255,112,76,255),Y={mapChartFillStyle:new G({angle:135,stops:[{color:m(255,255,91,255),offset:0},{color:m(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:Lf(s,V,.5),pieChartSliceFillStylePalette:Pf(s,V,1),funnelChartSliceFillStylePalette:Bf(s,V,1),pyramidChartSliceFillStylePalette:Bf(s,V,1),rectangleSeriesFillStyle:Df(s,V),gaugeChartBarColor:m(255,255,91,255),gaugeChartGlowColor:m(255,255,91,64)},j=new ke({color:m(176,255,157,255)}),H=new ke({color:m(255,146,146,255)}),W=new ke({color:m(176,255,157,255)}),X=new ke({color:m(230,63,63,255)}),Z=new ke({color:m(176,255,157,120)}),J=new ke({color:m(229,63,63,180)}),Q=new ke({color:m(27,37,36,255)}),K=new ke({color:m(62,27,27,255)}),q=[m(255,0,0),m(255,255,0),m(0,255,0)],tt=[m(10,10,255),m(10,190,255),m(251,255,0),m(255,38,0)],it=[m(255,255,0),m(255,204,0),m(255,128,0),m(255,0,0)],st=[m(0,0,0),m(167,4,69,255),m(255,0,0),m(252,252,168,255)],et=new z({stops:[{color:m(61,61,80,100),offset:0},{color:m(44,44,55,30),offset:1}]}),ht=new ke({color:m(148,148,198,255)}),rt=Z.getColor().setA(255),nt=m(100,100,100),ot=[m(255,241,149,200),m(255,230,65,200),m(238,211,32,200),m(238,176,32,200),m(255,159,13,200),m(254,120,37,200),m(253,91,56,200),m(253,75,84,200),m(254,95,124,200),m(227,56,160,200),m(226,53,134,200),m(216,90,166,200),m(254,151,206,200),m(237,151,254,200),m(243,177,255,200),m(233,133,252,200),m(210,101,230,200),m(178,61,200,200),m(193,81,156,200),m(217,95,145,200)];return Tf({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:v,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:k,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:O,dataColorPalette:V,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:N,dataColorPositive:$,dataColorNegative:U,zoomBandChartDefocusOverlayFillStyle:new ke({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(251,251,90),zoomBandChartKnobFillStyle:t=>new Vt({source:If(t,"zoomBandChart/darkgold-selector.png"),fitMode:Ot.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:Y,treeMapChartParentColor:m(24,30,33),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new ke({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new ke({color:m(250,250,250)})},{positiveTextFillStyle:j,negativeTextFillStyle:H,positiveFillStyle:W,negativeFillStyle:X,positiveAreaFillStyle:Z,negativeAreaFillStyle:J,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:K,badGoodColorPalette:q,coldHotColorPalette:tt,intensityColorPalette:it,spectrogramColorPalette:st,bollingerFillStyle:et,bollingerBorderFillStyle:ht,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),Rf=es((()=>{const t=m(255,255,255),i=new ke({color:t}),s=!0,e=new Dh({spread:0,blur:9,offset:{x:0,y:0},color:m(105,255,236,40)}),h=new ke({color:m(2,21,30)}),r=new z({stops:[{color:m(19,40,66,150),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new ke({color:m(0,5,8,150)}),o=Ff,a=i,l=i,u=i,c=i,d=i,f=d,A=new ke({color:m(20,224,250,255)}),g=i,v=new ke({color:m(61,94,110,100)}),y=new ke({color:m(61,94,110,255)}),p=new ke({color:m(61,94,110,40)}),S=i,b=new ke({color:m(0,18,23,255)}),x=i,M=t,w=new ke({color:m(0,0,0,225)}),_=i,k=new ke({color:m(18,66,75)}),C=m(0,38,48,220),T=m(0,0,0),F=t,I=m(150,150,150),L=m(19,78,93),P=m(50,50,50),B=m(0,36,48),D=m(200,200,200),E=[m(45,253,253,255),m(44,172,247,255),m(46,100,248,255),m(96,84,199,255),m(184,104,245,255),m(98,160,218,255),m(43,238,245,255),m(38,140,206,255),m(112,96,224,255),m(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),O=m(3,217,194,255),V=m(230,63,63,255),N={mapChartFillStyle:new G({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Lf(s,E,1),pieChartSliceFillStylePalette:Pf(s,E,1),funnelChartSliceFillStylePalette:Bf(s,E,1),pyramidChartSliceFillStylePalette:Bf(s,E,1),rectangleSeriesFillStyle:Df(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,120)},$=new ke({color:m(45,253,253,255)}),U=new ke({color:m(255,146,146,255)}),Y=new ke({color:m(45,253,253,255)}),j=new ke({color:m(230,63,63,255)}),H=new ke({color:m(1,190,164,120)}),W=new ke({color:m(229,63,63,180)}),X=new ke({color:m(1,53,57,255)}),Z=new ke({color:m(62,27,27,255)}),J=[m(1,104,119,255),m(0,165,144,255),m(0,246,214,255)],Q=[m(0,87,95,255),m(0,125,124,255),m(1,209,182,255),m(0,255,221,255),m(218,112,112,255),m(172,47,47,255)],K=[m(126,255,253,255),m(50,233,230,255),m(0,196,193,255),m(62,138,178,255),m(139,88,191,255),m(162,55,143,255)],q=[m(13,31,52,255),m(101,50,118,255),m(1,142,172,255),m(2,196,170,255),m(0,255,221,255)],tt=new z({stops:[{color:m(122,103,254,70),offset:0},{color:m(178,168,255,10),offset:1}]}),it=new ke({color:m(122,103,254,255)}),st=H.getColor().setA(255),et=m(15,83,83),ht=[m(139,252,252,150),m(60,239,239,150),m(2,201,201,150),m(26,159,159,150),m(15,146,187,150),m(65,168,200,150),m(67,146,207,150),m(64,108,209,150),m(189,64,233,150),m(219,84,238,150),m(192,55,212,150),m(212,98,229,150),m(248,110,211,150),m(251,154,225,150),m(251,154,184,150),m(233,105,144,150),m(255,133,170,150),m(249,110,135,150),m(245,72,101,150),m(210,57,84,150)];return Tf({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Vt({source:If(t,"themes/turquoiseHexagon.jpg"),fitMode:Ot.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(170,60,210,100),border:m(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:O,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new ke({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(43,244,244),zoomBandChartKnobFillStyle:t=>new Vt({source:If(t,"zoomBandChart/turquoise-selector.png"),fitMode:Ot.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:m(0,35,41),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new ke({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new ke({color:m(250,250,250)})},{positiveTextFillStyle:$,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:j,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:Z,badGoodColorPalette:J,coldHotColorPalette:Q,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:st,unfocusedDataColor:et})})),Of=es((()=>{const t=!1,i=new Dh({spread:0,blur:6,offset:{x:2,y:-2},color:m(0,0,0,30)}),s=new z({position:{x:.8,y:.8},extent:R.farthestCorner,shape:E.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),e=new ke({color:m(219,227,233,255)}),h=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(255,255,255,200)},{offset:1,color:m(240,244,246,200)}]}),r=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),n=Ff,o=new ke({color:m(33,43,49)}),a=new ke({color:m(33,43,49)}),l=new ke({color:m(33,43,49)}),u=new ke({color:m(33,43,49)}),c=u,d=c,f=new G({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),A=new ke({color:m(150,150,150,255)}),g=new ke({color:m(150,150,150,170)}),v=new ke({color:m(150,150,150,150)}),y=new ke({color:m(150,150,150,100)}),p=new ke({color:m(60,70,80)}),S=new G({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),b=new ke({color:m(168,186,199)}),x=m(150,150,150),M=new ke({color:m(255,255,255,230)}),w=new ke({color:m(168,186,199)}),_=new ke({color:m(228,235,243)}),k=m(255,255,255,255),C=m(168,168,199,255),T=m(168,186,199,255),F=m(168,186,199,255),I=m(168,186,199,255),L=m(168,186,199,255),P=m(100,100,100),B=m(200,200,200),D=[m(28,181,140,255),m(255,132,0,255),m(240,39,39,255),m(86,121,251,255),m(2,181,213,255),m(13,212,158,255),m(22,167,3,255),m(234,103,232,255),m(62,183,179,255),m(140,93,3,255),m(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),O=m(150,150,150,80),V=m(46,182,120,255),N=m(255,66,66,255),$=new wh({thickness:2,fillStyle:new ke({color:m(168,186,199,255)})}),U={mapChartFillStyle:new G({angle:-45,stops:[{color:m(2,181,213,255),offset:0},{color:m(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:Lf(t,D,.8),pieChartSliceFillStylePalette:Pf(t,D,.8),funnelChartSliceFillStylePalette:Bf(t,D,.5),pyramidChartSliceFillStylePalette:Bf(t,D,.5),rectangleSeriesFillStyle:Df(t,D),gaugeChartBarColor:m(46,182,120,255),gaugeChartGlowColor:m(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:$,chart3DSeriesBackgroundStrokeStyle:$,polarChartSeriesBackgroundStrokeStyle:$,spiderChartSeriesBackgroundStrokeStyle:$,dataGridTextFillStyle:new ke({color:m(0,88,64,255)})},Y=new ke({color:m(4,146,108,255)}),j=new ke({color:m(240,39,39,255)}),H=new ke({color:m(28,181,140,255)}),W=new ke({color:m(230,88,88,255)}),X=new ke({color:m(28,181,140,180)}),Z=new ke({color:m(230,88,88,180)}),J=new ke({color:m(229,243,228)}),Q=new ke({color:m(232,225,216)}),K=[m(193,48,48,255),m(240,234,60,255),m(45,191,55,255)],q=[m(10,19,255,255),m(15,191,250,255),m(249,255,2,255),m(253,133,0,255),m(255,24,0,255)],tt=[m(50,99,213),m(8,179,77),m(255,246,0),m(255,126,0),m(189,36,30)],it=[m(16,64,176),m(8,179,77),m(255,246,0),m(255,126,0),m(168,6,0)],st=new ke({color:m(185,198,207,255)}),et=new z({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),ht=X.getColor().setA(255),rt=m(150,150,150),nt=[m(255,243,136,125),m(254,237,99,125),m(255,216,109,125),m(255,172,100,125),m(255,133,101,125),m(255,113,142,125),m(230,103,129,125),m(242,126,219,125),m(255,155,235,125),m(255,181,240,125),m(203,143,255,125),m(208,154,255,125),m(171,188,255,125),m(197,209,255,125),m(171,187,255,125),m(84,167,239,125),m(38,196,214,125),m(38,214,196,125),m(69,225,141,125),m(36,191,88,125)];return Tf({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:n,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:_,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:B,dataColorPalette:D,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:O,dataColorPositive:V,dataColorNegative:N,zoomBandChartDefocusOverlayFillStyle:new ke({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(80,93,101),zoomBandChartKnobFillStyle:t=>new Vt({source:If(t,"zoomBandChart/light-selector.png"),fitMode:Ot.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:U,treeMapChartParentColor:m(217,217,217),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new ke({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new ke({color:m(33,33,33)})},{positiveTextFillStyle:Y,negativeTextFillStyle:j,positiveFillStyle:H,negativeFillStyle:W,positiveAreaFillStyle:X,negativeAreaFillStyle:Z,positiveBackgroundFillStyle:J,negativeBackgroundFillStyle:Q,badGoodColorPalette:K,coldHotColorPalette:q,intensityColorPalette:tt,spectrogramColorPalette:it,bollingerFillStyle:et,bollingerBorderFillStyle:st,highlightPointColor:m(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:rt})})),zf=es((()=>{const t=!1,i=new z({position:{x:.8,y:.8},extent:R.farthestCorner,shape:E.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),s=new ke({color:m(214,236,216,255)}),e=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(233,244,231,70)},{offset:1,color:m(233,244,231,200)}]}),h=new z({position:{x:.5,y:.5},extent:R.farthestCorner,shape:E.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),r=Ff,n=new ke({color:m(1,61,53)}),o=new ke({color:m(1,61,53)}),a=new ke({color:m(1,61,53)}),l=new ke({color:m(1,61,53)}),u=l,c=u,d=new G({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),f=new ke({color:m(188,211,186,255)}),A=new ke({color:m(188,211,186,150)}),g=new ke({color:m(188,211,186,50)}),v=new ke({color:m(188,211,186,50)}),y=new ke({color:m(104,148,111,255)}),p=new G({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),S=new ke({color:m(104,148,111)}),b=m(150,150,150),x=new ke({color:m(255,255,255,230)}),M=new ke({color:m(104,148,111)}),w=new ke({color:m(226,236,224)}),_=m(255,255,255,255),k=m(179,201,183,255),C=m(188,211,186,255),T=m(188,211,186,255),F=m(188,211,186,255),I=m(188,211,186,255),L=m(100,100,100),P=m(200,200,200),B=[m(138,195,142,255),m(193,161,114,255),m(178,99,99,255),m(142,156,210,255),m(154,209,219,255),m(164,212,199,255),m(104,156,97,255),m(196,147,195,255),m(92,190,187,255),m(126,100,51,255),m(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=m(150,150,150,80),O=m(46,182,84,255),V=m(232,96,96,255),N=new wh({thickness:2,fillStyle:new ke({color:m(188,211,186,255)})}),$={mapChartFillStyle:new G({angle:-45,stops:[{color:m(118,160,121,255),offset:0},{color:m(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:Lf(t,B,.8),pieChartSliceFillStylePalette:Pf(t,B,.8),pyramidChartSliceFillStylePalette:Bf(t,B,.5),funnelChartSliceFillStylePalette:Bf(t,B,.5),rectangleSeriesFillStyle:Df(t,B),gaugeChartBarColor:m(46,182,84,255),gaugeChartGlowColor:m(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:N,chart3DSeriesBackgroundStrokeStyle:N,polarChartSeriesBackgroundStrokeStyle:N,spiderChartSeriesBackgroundStrokeStyle:N,dataGridTextFillStyle:new ke({color:m(77,66,21,255)})},U=new ke({color:m(93,151,97,255)}),Y=new ke({color:m(178,99,99,255)}),j=new ke({color:m(138,195,142,255)}),H=new ke({color:m(178,99,99,255)}),W=new ke({color:m(138,195,142,180)}),X=new ke({color:m(178,99,99,180)}),Z=new ke({color:m(224,240,237)}),J=new ke({color:m(251,227,227)}),Q=[m(178,99,99,255),m(215,224,111,255),m(80,186,88,255)],K=[m(62,64,142,255),m(66,131,77,255),m(250,250,135,255),m(202,161,78,255),m(179,53,53,255)],q=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(184,78,74)],tt=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(132,60,57)],it=new ke({color:m(185,198,207,255)}),st=new z({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),et=W.getColor().setA(255),ht=m(150,150,150),rt=[m(242,239,210,150),m(243,238,183,150),m(210,222,136,150),m(204,217,148,150),m(157,190,124,150),m(143,178,72,150),m(198,147,88,150),m(216,148,71,150),m(229,142,103,150),m(225,174,152,150),m(219,149,203,150),m(216,188,209,150),m(109,198,189,150),m(172,206,202,150),m(164,223,217,150),m(174,215,233,150),m(203,225,235,150),m(220,227,243,150),m(207,213,227,150),m(171,182,209,150)];return Tf({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:r,fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:v,cursorGridFillStyle:y,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:_,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:P,dataColorPalette:B,dataColorPaletteInverted:[{area:m(210,70,70,100),border:m(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:O,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new ke({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(68,106,64),zoomBandChartKnobFillStyle:t=>new Vt({source:If(t,"zoomBandChart/lightnature-selector.png"),fitMode:Ot.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:$,treeMapChartParentColor:m(239,247,238),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new ke({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new ke({color:m(33,33,33)})},{positiveTextFillStyle:U,negativeTextFillStyle:Y,positiveFillStyle:j,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:X,positiveBackgroundFillStyle:Z,negativeBackgroundFillStyle:J,badGoodColorPalette:Q,coldHotColorPalette:K,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:st,bollingerBorderFillStyle:it,highlightPointColor:m(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),Vf=es((()=>{const t=m(255,255,255),i=new ke({color:t}),s=!0,e=new Dh({spread:1,blur:9,offset:{x:0,y:0},color:m(255,255,255,30)}),h=new ke({color:m(6,15,36)}),r=new z({stops:[{color:m(46,13,87,50),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new ke({color:m(0,5,8,150)}),o=Ff,a=i,l=i,u=i,c=i,d=i,f=d,A=new G({angle:45,stops:[{offset:0,color:m(241,133,255,255)},{offset:1,color:m(115,207,238,255)}]}),g=i,v=new ke({color:m(61,94,110,100)}),y=new ke({color:m(61,94,110,255)}),p=new ke({color:m(61,94,110,40)}),S=i,b=new ke({color:m(0,18,23,255)}),x=i,M=m(115,207,238,255),w=new ke({color:m(0,0,0,224)}),_=i,k=new ke({color:m(68,31,78)}),C=m(0,38,48,255),T=m(0,0,0),F=t,I=m(150,150,150),L=m(19,57,93),P=m(50,50,50),B=m(0,17,48),D=m(200,200,200),E=[m(20,211,237,255),m(98,147,252,255),m(164,73,250,255),m(129,117,253,255),m(95,134,252,255),m(22,133,212,255),m(35,200,242,255),m(104,121,233,255),m(137,69,232,255),m(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),O=m(3,217,194,255),V=m(243,21,110,255),N={mapChartFillStyle:new G({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Lf(s,E,.5),pieChartSliceFillStylePalette:Pf(s,E,2),funnelChartSliceFillStylePalette:Bf(s,E,1),pyramidChartSliceFillStylePalette:Bf(s,E,1),rectangleSeriesFillStyle:Df(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,150)},$=new ke({color:m(20,211,237,255)}),U=new ke({color:m(253,145,178,255)}),Y=new ke({color:m(20,211,237,255)}),j=new ke({color:m(239,68,121,255)}),H=new ke({color:m(20,211,237,120)}),W=new ke({color:m(239,68,121,180)}),X=new ke({color:m(1,53,57,255)}),Z=new ke({color:m(94,19,42,255)}),J=[m(174,51,132,255),m(204,107,218,255),m(189,215,253,255)],Q=[m(0,63,95,255),m(0,149,255,255),m(0,225,255,255),m(255,154,254,255),m(204,98,170,255),m(139,39,84,255)],K=[m(197,241,255,255),m(70,210,255,255),m(0,164,217,255),m(90,99,222,255),m(138,75,192,255),m(151,27,162,255)],q=[m(13,31,52,255),m(129,54,130,255),m(131,108,176,255),m(7,162,213,255),m(26,247,255,255)],tt=new z({stops:[{color:m(219,42,235,60),offset:0},{color:m(237,73,252,10),offset:1}]}),it=new ke({color:m(237,73,252,255)}),st=H.getColor().setA(255),et=m(8,70,100),ht=[m(149,230,255,150),m(93,213,243,150),m(20,189,223,150),m(5,151,181,150),m(2,138,198,150),m(2,113,198,150),m(97,148,236,150),m(93,111,230,150),m(151,120,223,150),m(128,87,227,150),m(153,52,230,150),m(179,92,245,150),m(248,110,211,150),m(255,155,228,150),m(251,88,207,150),m(255,0,162,150),m(214,73,177,150),m(209,71,159,150),m(238,101,169,150),m(210,57,134,150)];return Tf({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Vt({source:If(t,"themes/cyberSpace.jpg"),fitMode:Ot.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(41,130,255,100),border:m(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:O,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new ke({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(219,119,255),zoomBandChartKnobFillStyle:t=>new Vt({source:If(t,"zoomBandChart/cyberspace-selector.png"),fitMode:Ot.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:m(30,30,59),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new ke({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new ke({color:m(250,250,250)})},{positiveTextFillStyle:$,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:j,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:Z,badGoodColorPalette:J,coldHotColorPalette:Q,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:it,highlightPointColor:t,highlightDataGridColor:st,unfocusedDataColor:et})})),Nf={};Object.defineProperty(Nf,"darkGold",{get:Ef,enumerable:!0}),Object.defineProperty(Nf,"turquoiseHexagon",{get:Rf,enumerable:!0}),Object.defineProperty(Nf,"light",{get:Of,enumerable:!0}),Object.defineProperty(Nf,"lightNature",{get:zf,enumerable:!0}),Object.defineProperty(Nf,"cyberSpace",{get:Vf,enumerable:!0});const Gf=Nf,$f=Gf.darkGold,Uf=t=>({...t,effect:void 0}),Yf=t=>{var i,s,e;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(i=t.parallelCoordinateAxisTimeTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(s=t.parallelCoordinateAxisNumericTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(e=t.parallelCoordinateAxisDateTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0)))}},jf=(t,i)=>{const s=Object.fromEntries(Object.entries(t).map((([t,s])=>{if(B(s))return[t,s.setSize(s.getSize()*i)];if("panelPadding"===t||"chartXYPadding"===t)return[t,s*i];if("polarRadialAxisTickStyle"===t){const e=s;return[t,e.setTickLength(e.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(e.getTickPadding()*i)]}if("object"==typeof s&&"setTickStyle"in s)return[t,s.setTickStyle((t=>t.setTickLength(t.getTickLength()*i).setLabelFont((t=>t.setSize(t.getSize()*i))).setTickPadding(t.getTickPadding()*i)))];if("barChartValueLabelsAfterBars"===t||"barChartValueLabelsInsideBars"===t||"barChartCategoryLabels"===t){const e=s;return[t,{...e,labelFont:e.labelFont.setSize(e.labelFont.getSize()*i)}]}return[t,s]})));[["uiButtonSize",10],["chartXYTitleMargin",5],["legendPadding",5],["uiTextPadding",5],["legendLUTLabelMargin",7],["legendLUTUnitLabelMargin",7],["legendLUTLengthHorizontal",160],["legendLUTLengthVertical",140],["legendLUTThicknessHorizontal",15],["legendLUTThicknessVertical",25],["dataGridCellPadding",5],["dataGridScrollBarThickness",20],["gaugeChartBarThickness",40],["gaugeChartValueIndicatorThickness",10],["gaugeChartNeedleLength",40],["gaugeChartNeedleThickness",10],["gaugeChartGapBetweenBarAndValueIndicators",10]].forEach((t=>{var e;const h=t[0],r=t[1];s[h]=(null!==(e=s[h])&&void 0!==e?e:r)*i})),s.cursorPointMarkerSize={x:s.cursorPointMarkerSize.x*i,y:s.cursorPointMarkerSize.y*i};const e=s.cursorDynamicBehavior;return e&&(s.cursorDynamicBehavior={...e,pointMarkerSize:e.pointMarkerSize?t=>{if(!e.pointMarkerSize)return{x:0,y:0};const s=e.pointMarkerSize(t);return{x:s.x*i,y:s.y*i}}:void 0}),s};class Hf extends ll{constructor(t,i,s,e,h,r){var n,o,a,l;let u;super(t,i,s,i.jg("dataGrid bg",0),e,i.gi.bi.dataGridBackgroundFillStyle,i.gi.bi.dataGridBackgroundStrokeStyle,i.gi.bi.dataGridTitleFont,i.gi.bi.dataGridTitleFillStyle,i.gi.bi.dataGridTitleShadow,r),this.qC=[],this.tT=[],this.iT=[],this.sT=new Map,this.eT=!0,this.hT=!0,this.rT=!0,this.nT=!0,this.oT=!0,this.aT=!0,this.lT=!0,this.uT=!0,this.cT=!0,this.dT=!0,this.fT=!0,this.AT=!0,this.gT=!0,this.vT=!0,this.yT=!0,this.pT=!0,this.mT=new Set,this.ST=new Set,this.bT=!0,this.xT=!0,this.MT=(t,i)=>{t.borders=void 0===i?Jf:{...t.borders,...i},this.wT(t),this.AT=!0,this.gi.Ps()},this.wT=t=>{t.borders&&(!1===t.borders.top&&this._T(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.kT,bottom:!1}})),!1===t.borders.bottom&&this._T(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.kT,top:!1}})),!1===t.borders.left&&this._T(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.kT,right:!1}})),!1===t.borders.right&&this._T(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.kT,left:!1}})),!0===t.borders.top&&this._T(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.kT,bottom:!0}})),!0===t.borders.bottom&&this._T(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.kT,top:!0}})),!0===t.borders.left&&this._T(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.kT,right:!0}})),!0===t.borders.right&&this._T(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.kT,left:!0}})))},this.CT={x:0,y:0},this.cells=new Pt,this.P=new Pt,this.gi.Ia(ln.yo),this.Wh.qr("Data Grid"),this.TT=s.d2({scaleXYConstructor:J}),this.TT.x.Zf=cf,this.FT=s.d2({scaleXYConstructor:J}),this.IT={x:0,y:0},this.LT=this.bi.dataGridTextFont,this.PT=this.bi.dataGridTextFillStyle,this.kT={top:!0,bottom:!0,left:!0,right:!0},this.BT=this.bi.dataGridCellBackgroundFillStyle,this.DT=this.bi.dataGridBorderStrokeStyle,this.ET="left-center",this.RT={left:null!==(n=this.bi.dataGridCellPadding)&&void 0!==n?n:5,right:null!==(o=this.bi.dataGridCellPadding)&&void 0!==o?o:5,bottom:null!==(a=this.bi.dataGridCellPadding)&&void 0!==a?a:5,top:null!==(l=this.bi.dataGridCellPadding)&&void 0!==l?l:5},this.OT=i.Em("dataGrid grid bg",0),this.zT=i.Em("dataGrid cell bg",1),this.VT=i.Rm("dataGrid cell content",0),this.NT=i.Rm("dataGrid scrollbar bg",1),this.GT=i.Rm("dataGrid scrollbar fg",2),this.$T=this.OT.Cc(this.FT).Ke(this.bi.dataGridBackgroundFillStyle).Qe($t).setPointerEvents(!1),this.UT=this.VT.bA(this.TT).setPointerEvents(!1),this.YT=new Za((()=>{const t=this.zT.qe(this.TT).setPointerEvents(!0);return this.cells.Oi(t,{getExtraData:()=>this.sT.get(t),continueIfNotPrevented:(t,i,s)=>{const e=Ve(this.getUserInteractions().scroll,"wheel",i,i.shiftKey,i.ctrlKey,i.altKey);if(e&&"wheel"===t&&i instanceof WheelEvent){ki(i),this.jT({x:!0===e.x?Math.sign(i.deltaY):0,y:!0===e.y?Math.sign(i.deltaY):0});const t=e.on;t&&t({event:i})}}}),t})),this.HT=new Za((()=>this.VT.qe(this.TT).setPointerEvents(!1))),this.WT=new Za((()=>this.VT.wn(this.TT,!1).setPointerEvents(!1))),this.XT=new Za((()=>this.VT.Nv(this.TT,{},[Al.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.ZT=new Za((()=>this.VT.Ah(this.TT).setPointerEvents(!1))),this.JT=new Za((()=>this.VT.Od(this.TT).Rd(xe).fh($t).setPointerEvents(!1))),this.QT=new Za((()=>this.VT.qe(this.TT).setPointerEvents(!1))),this.KT=new Za((()=>this.VT.Kx(this.TT).setPointerEvents(!1))),this.qT=new Za((()=>this.VT.wd(this.TT).setPointerEvents(!1))),this.tF={background:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarBackgroundFillStyle).Qe(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.GT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarFillStyle).Qe(this.bi.dataGridScrollBarStrokeStyle),button1:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.GT.Od(this.FT).setPointerEvents(!1).fh($t).Ed(this.bi.dataGridScrollBarButtonArrowFillStyle).zd(Qe.Triangle),buttonIcon2:this.GT.Od(this.FT).setPointerEvents(!1).fh($t).Ed(this.bi.dataGridScrollBarButtonArrowFillStyle).zd(Qe.Triangle)},this.iF={background:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarBackgroundFillStyle).Qe(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.GT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarFillStyle).Qe(this.bi.dataGridScrollBarStrokeStyle),button1:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.NT.qe(this.FT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.GT.Od(this.FT).setPointerEvents(!1).fh($t).Ed(this.bi.dataGridScrollBarButtonArrowFillStyle).zd(Qe.Triangle),buttonIcon2:this.GT.Od(this.FT).setPointerEvents(!1).fh($t).Ed(this.bi.dataGridScrollBarButtonArrowFillStyle).zd(Qe.Triangle)},this.tF.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Vertical,u)})),this.tF.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.tF.scrollbar.addEventListener("pointerdown",(t=>{ki(t);let i=t;const s=t=>{const s=t.clientY-i.clientY;i=t,this.sF({x:0,y:-s})},e=i=>{i.pointerId===t.pointerId&&(ti.removeEventListener("pointermove",s),ti.removeEventListener("pointerup",e))};ti.addEventListener("pointermove",s),ti.addEventListener("pointerup",e)})),this.tF.scrollbar.addEventListener("wheel",(t=>{ki(t),this.jT({x:0,y:Math.sign(t.deltaY)})})),this.tF.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Vertical,u)})),this.tF.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.tF.background.addEventListener("click",(t=>{ki(t);const i=this.gi.tl(t),s=tt({x:i.engineX,y:i.engineY},this.gi.oi,this.FT);this.jT({x:0,y:s.y>this.tF.scrollbar.zl().y?-1:1})})),this.tF.background.addEventListener("wheel",(t=>{ki(t),this.jT({x:0,y:Math.sign(t.deltaY)})})),this.tF.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Point,u)})),this.tF.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.tF.button1.addEventListener("click",(t=>{ki(t),this.jT({x:0,y:1})})),this.tF.button2.addEventListener("click",(t=>{ki(t),this.jT({x:0,y:-1})})),this.tF.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Point,u)})),this.tF.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Horizontal,u)})),this.iF.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.scrollbar.addEventListener("pointerdown",(t=>{ki(t);let i=t;const s=t=>{const s=t.clientX-i.clientX;i=t,this.sF({x:s,y:0})},e=i=>{i.pointerId===t.pointerId&&(ti.removeEventListener("pointermove",s),ti.removeEventListener("pointerup",e))};ti.addEventListener("pointermove",s),ti.addEventListener("pointerup",e)})),this.iF.scrollbar.addEventListener("wheel",(t=>{ki(t),this.jT({x:Math.sign(t.deltaY),y:0})})),this.iF.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Horizontal,u)})),this.iF.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.background.addEventListener("click",(t=>{ki(t);const i=this.gi.tl(t),s=tt({x:i.engineX,y:i.engineY},this.gi.oi,this.FT);this.jT({x:s.x<this.iF.scrollbar.zl().x?-1:1,y:0})})),this.iF.background.addEventListener("wheel",(t=>{ki(t),this.jT({x:Math.sign(t.deltaY),y:0})})),this.iF.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Point,u)})),this.iF.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.iF.button1.addEventListener("click",(t=>{ki(t),this.jT({x:-1,y:0})})),this.iF.button2.addEventListener("click",(t=>{ki(t),this.jT({x:1,y:0})})),this.iF.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(gr.Point,u)})),this.iF.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.Yg(h,this.uiScale),this.addEventListener("resize",(()=>{this.eT=!0,this.gi.Ps(),this.TT.X(this.sA._t()),this.FT.X(this.sA._t())})),this.eF=this.vs.oA([this.$T])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}bg(){return[]}dispose(){return super.dispose(),this.OT.N(),this.zT.N(),this.VT.N(),this.NT.N(),this.GT.N(),ol(this.TT),ol(this.FT),this.WT.$A(),this.YT.$A(),this.HT.$A(),this.XT.$A(),this.ZT.$A(),this.JT.$A(),this.QT.$A(),this.KT.$A(),this.qT.$A(),this}Y(){return super.Y(),this.TT.Y(),this.FT.Y(),this}j(){return super.j(),this.TT.j(),this.FT.j(),this}setBackgroundEffect(t){return this.eF.Ls(t),this.gi.Ps(),this}getBackgroundEffect(){return this.eF.Bs()}setUserInteractions(t){return this.ah=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return Kt({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.ah)}setGridBackgroundFillStyle(t){return this.$T.Ke(t),this.gi.Ps(),this}getGridBackgroundFillStyle(){return this.$T.br()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this._T(s,t);i&&a.push(i)}a=qi(a);let l={highlight:0};for(const t of a){const i=this.qC.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.qC.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.qC.push(u),this.nT=!0,"string"==typeof u.content||"number"==typeof u.content?this.hT=!0:this.rT=!0,this.gi.Ps()}else this.hF(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.hF(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.hF(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.hF(e,s,i)}return this}setColumnWidth(t,i){let s=this.tT.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.tT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.tT.splice(this.tT.indexOf(s),1):(s.min=i,s.max=i),this.aT=!0,this.gi.Ps(),this}setRowHeight(t,i){let s=this.iT.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.iT.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.iT.splice(this.iT.indexOf(s),1):(s.min=i,s.max=i),this.aT=!0,this.gi.Ps(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.rF(t,(t=>this.nF(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.oF(t,(t=>this.nF(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=A(s,s,s,s)),this._T(t,i,(t=>this.nF(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=A(t,t,t,t)),this.RT={...this.RT,...t},this.aF((t=>this.nF(t,this.RT))),this}setCellBorders(t,i,s){return this._T(t,i,(t=>this.MT(t,s))),this}setRowBorders(t,i){return this.oF(t,(t=>this.MT(t,i))),this}setColumnBorders(t,i){return this.rF(t,(t=>this.MT(t,i))),this}setCellsBorders(t){return this.kT=void 0===t?Jf:t,this.aF((t=>this.MT(t,this.kT))),this}setCellsBorderStrokeStyle(t){return this.DT="function"==typeof t?t(this.DT):t,this.vT=!0,this.gi.Ps(),this}setColumnTextFillStyle(t,i){return this.rF(t,(t=>this.lF(t,i))),this}setRowTextFillStyle(t,i){return this.oF(t,(t=>this.lF(t,i))),this}setCellTextFillStyle(t,i,s){return this._T(t,i,(t=>this.lF(t,s))),this}setCellsTextFillStyle(t){return this.PT="function"==typeof t?t(this.PT):t,this.aF((t=>this.lF(t,this.PT))),this}setColumnTextFont(t,i){return this.rF(t,(t=>this.uF(t,i))),this}setRowTextFont(t,i){return this.oF(t,(t=>this.uF(t,i))),this}setCellTextFont(t,i,s){return this._T(t,i,(t=>this.uF(t,s))),this}setCellsTextFont(t){return this.LT="function"==typeof t?t(this.LT):t,this.aF((t=>this.uF(t,this.LT))),this}setColumnContentAlignment(t,i){return this.rF(t,(t=>this.cF(t,i))),this}setRowContentAlignment(t,i){return this.oF(t,(t=>this.cF(t,i))),this}setCellContentAlignment(t,i,s){return this._T(t,i,(t=>this.cF(t,s))),this}setCellsContentAlignment(t){return this.ET=t,this.aF((t=>this.cF(t,this.ET))),this}setCellBackgroundFillStyle(t,i,s){return this._T(t,i,(t=>this.dF(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.rF(t,(t=>this.dF(t,i))),this}setRowBackgroundFillStyle(t,i){return this.oF(t,(t=>this.dF(t,i))),this}setCellsBackgroundFillStyle(t){return this.BT="function"==typeof t?t(this.BT):t,this.aF((t=>this.dF(t,this.BT))),this}setCellHighlight(t,i,s){return this._T(t,i,(t=>{t.highlight=is(s)})),this.gT=!0,this.gi.Ps(),this}setColumnHighlight(t,i){const s=is(i);return this.rF(t,(t=>{t.highlight=s})),this.gT=!0,this.gi.Ps(),this}setRowHighlight(t,i){const s=is(i);return this.oF(t,(t=>{t.highlight=s})),this.gT=!0,this.gi.Ps(),this}removeCell(t,i){return this._T(t,i,(t=>this.qC.splice(this.qC.indexOf(t),1))),this.oT=!0,this.gi.Ps(),this}removeRow(t){return this.oF(t,(t=>this.qC.splice(this.qC.indexOf(t),1))),this.qC.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.oT=!0,this.gi.Ps(),this}removeColumn(t){return this.rF(t,(t=>this.qC.splice(this.qC.indexOf(t),1))),this.qC.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.oT=!0,this.gi.Ps(),this}removeCells(){return this.qC.splice(0),this.oT=!0,this.gi.Ps(),this}getColumnMax(){return 0===this.qC.length?0:this.qC.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.qC.length?0:this.qC.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}th(t){var i;super.th(t),ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn),super.Ug();const s=Math.round(this.DT.Yi()),e=s/2;let h=this.hT||this.rT||this.nT||this.oT||this.aT||this.lT||this.fT||this.AT||this.vT||this.pT;if(h){this.qC.forEach((t=>{this.ST.add(t.column)})),this.qC.forEach((t=>{this.mT.add(t.row)}));const t=this.WT.zA(),i=this.fF(e,t);t.finishPlot();const r=this.AF(this.ST.size,i),n=this.gF(this.mT.size,i),o=r.reduce(Cs,0)+s,a=n.reduce(Cs,0)+s,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.vF){const t=this.vF.columnWidths.every(((t,i)=>t===r[i])),i=this.vF.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(h=!1)}this.vF={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:i}}const r=h||this.rT||this.nT||this.oT||this.uT||this.cT||this.dT||this.AT||this.gT||this.vT||this.eT||this.pT;if((r||this.yT)&&this.vF){const t=this.sA.getInnerIntervalPixels(),h=ul.qg(this.Wh,this.Hg),n=[this.Nn.left+e,this.Nn.right+e],o=[this.Nn.bottom+e,this.Nn.top+h+e],a={x:t.x-n[0]-n[1],y:t.y-o[0]-o[1]},l=[this.Nn.left,this.Nn.right],u=[this.Nn.bottom,this.Nn.top+h],c={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-u[0]-u[1])},d={x:Math.ceil(e),y:Math.floor(c.y-e)};this.FT.Kt(n).qt(o).ti(0,a.x).ii(0,a.y);const f=null!==(i=this.bi.dataGridScrollBarThickness)&&void 0!==i?i:20,A={x:Math.min(a.x,this.vF.dataGridWidth+f)-f,y:Math.min(a.y,this.vF.dataGridHeight+f)-f};0===this.CT.x&&0===this.CT.y||(this.IT.y+=this.vF.dataGridHeight*this.CT.y/A.y,this.IT.x+=this.vF.dataGridWidth*this.CT.x/A.x,this.CT.x=0,this.CT.y=0),this.IT.y=oi(this.IT.y,a.y-this.vF.dataGridHeight-f,0),this.IT.x=oi(this.IT.x,0,this.vF.dataGridWidth-a.x+f);const g=this.IT;this.TT.Kt(l).qt(u).ti(g.x,c.x+g.x).ii(g.y,c.y+g.y);const v={x:this.TT.x.bt(),y:this.TT.y.bt()+f,width:this.TT.x.Mt()+s-f,height:this.TT.y.Mt()+s-f};this.VT.Cm(v),this.zT.Cm(v);const y=this.vF,p=[{x:this.TT.x.getInnerStart(),y:this.TT.y.getInnerStart()},{x:this.TT.x.getInnerEnd(),y:this.TT.y.getInnerStart()},{x:this.TT.x.getInnerEnd(),y:this.TT.y.getInnerEnd()},{x:this.TT.x.getInnerStart(),y:this.TT.y.getInnerEnd()}];y.cellsContentSizes.forEach((t=>{var i;const s={x:d.x+y.columnWidthsCumulative[t.cell.column],y:d.y-y.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+y.columnWidths[t.cell.column],y:s.y+y.rowHeights[t.cell.row]},h=ws([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],p);null===(i=t.text)||void 0===i||i.setVisible(h)})),r&&this.yF(d,this.vF,s);const m=a.y-f<this.vF.dataGridHeight;this.tF.background.setVisible(m).ih({x:A.x,y:f}).X({x:f,y:A.y}),this.tF.scrollbar.setVisible(m).ih({x:A.x,y:f+A.y-f+-(A.y-2*f)*(-this.IT.y/this.vF.dataGridHeight)}).X({x:f,y:-(A.y-2*f)*(A.y/this.vF.dataGridHeight)}),this.tF.button1.setVisible(m).ih({x:A.x,y:f}).X({x:f,y:f}),this.tF.buttonIcon1.setVisible(m).jd(.5*f).Nd(0).Dd((new ro).appendSample({x:A.x+f/2,y:1.5*f}),{x:"x",y:"y"}),this.tF.button2.setVisible(m).ih({x:A.x,y:A.y}).X({x:f,y:f}),this.tF.buttonIcon2.setVisible(m).jd(.5*f).Nd(180).Dd((new ro).appendSample({x:A.x+f/2,y:A.y+f/2}),{x:"x",y:"y"});const S=a.x-f<this.vF.dataGridWidth,b=Math.max(a.y-this.vF.dataGridHeight-f,0);this.iF.background.setVisible(S).ih({x:0,y:b}).X({x:A.x,y:f}),this.iF.scrollbar.setVisible(S).ih({x:f+(A.x-2*f)*(this.IT.x/this.vF.dataGridWidth),y:b}).X({x:(A.x-2*f)*(A.x/this.vF.dataGridWidth),y:f}),this.iF.button1.setVisible(S).ih({x:0,y:b}).X({x:f,y:f}),this.iF.buttonIcon1.setVisible(S).jd(.5*f).Nd(90).Dd((new ro).appendSample({x:f/2,y:b+f/2}),{x:"x",y:"y"}),this.iF.button2.setVisible(S).ih({x:A.x-f,y:b}).X({x:f,y:f}),this.iF.buttonIcon2.setVisible(S).jd(.5*f).Nd(270).Dd((new ro).appendSample({x:A.x-f/2,y:b+f/2}),{x:"x",y:"y"}),this.$T.ou([d,{x:d.x+A.x+(m?f:0),y:d.y},{x:d.x+A.x+(m?f:0),y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y-(S?f:0)},{x:d.x,y:d.y-A.y-(S?f:0)}])}this.eT=!1,this.hT=!1,this.rT=!1,this.nT=!1,this.oT=!1,this.aT=!1,this.lT=!1,this.uT=!1,this.cT=!1,this.dT=!1,this.fT=!1,this.AT=!1,this.gT=!1,this.vT=!1,this.yT=!1,this.pT=!1}fF(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.qC){const{content:h}=t,r={...this.RT,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.qr(s).kr(t.textFont||this.LT).Vr().bc()}if(df(h)&&(o=h,l={x:200,y:50}),Ph(h)){const t=this.gi.pF(h);t.mF()?(a=h,l=a._t()):t.SF((()=>{this.pT=!0,this.gi.Ps()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}yF(t,i,s){const{cellsContentSizes:e,columnWidths:h,columnWidthsCumulative:r,rowHeights:n,rowHeightsCumulative:o}=i;this.UT.fh(this.DT),this.sT.clear();const a={cellBackground:this.YT.zA(),cellIconRect:this.HT.zA(),lineSet:this.XT.zA(),line:this.ZT.zA(),pointSet:this.JT.zA(),rect:this.QT.zA(),junction:this.KT.zA(),arc:this.qT.zA()},l=[];for(const i of e){const{cell:e,text:u,sparkChart:c,icon:d,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},v={x:t.x+r[e.column],y:t.y-o[e.row+e.rowSpan]},y={x:v.x+A.left,y:v.y+A.bottom},p={x:y.x+f.left,y:y.y+f.bottom},m={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+h[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+n[e.row+s]),0)},S={x:m.x-A.left-A.right,y:m.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(u){const t=Zf(p,b,e.contentAlignment||this.ET);u.ih(t[0]).Xl({x:t[1],y:t[2]}).Ke(this.bF(e.textFillStyle||this.PT,e.content,this.PT)).Fi(e.highlight).Kr(this.bi.dataGridTextShadow)}const x=this.bF(e.backgroundFillStyle||this.BT,e.content);if(x!==xe){const t=a.cellBackground.add();t.ih(v).X(m).Ke(x).Qe($t).Fi(e.highlight),this.sT.set(t,g)}const M=e.borders||this.kT;if(M&&Xf(v,m,M,s,l),c){const t=p,i=b;ff(c,a,this.TT,t,i,this.bi,this.Lg,e.highlight)}if(d){const t=d._t(),i=Zf(p,b,e.contentAlignment||this.ET);a.cellIconRect.add().ih({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).X(t).Ke(new Vt({source:d.Zs,fitMode:Ot.Stretch})).Qe($t).Fi(e.highlight)}}this.UT.zi();for(const t of l)this.UT.jo().MA(t[0],t[1]);a.cellBackground.finishPlot(),a.cellIconRect.finishPlot(),a.lineSet.finishPlot(),a.line.finishPlot(),a.pointSet.finishPlot(),a.rect.finishPlot(),a.junction.finishPlot(),a.arc.finishPlot()}AF(t,i){const s=new Array(t).fill(0);for(const t of this.ST.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.tT.find((i=>i.column===t)),r=h?oi(e,void 0!==h.min?h.min:ms,void 0!==h.max?h.max:ps):e;s[t]=r}return s}gF(t,i){const s=new Array(t).fill(0);for(const t of this.mT.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.iT.find((i=>i.row===t)),r=h?oi(e,void 0!==h.min?h.min:ms,void 0!==h.max?h.max:ps):e;s[t]=r}return s}bF(t,i,s){if(Pe(t)){try{const s=Number(i);return new ke({color:t.getPalette().getColors(s,void 0)})}catch(t){}return s||xe}return t}lF(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.PT):i,this.dT=!0,this.gi.Ps()}uF(t,i){t.textFont="function"==typeof i?i(t.textFont||this.LT):i,this.fT=!0,this.gi.Ps()}dF(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.BT):i,this.cT=!0,this.gi.Ps()}cF(t,i){t.contentAlignment=i,this.uT=!0,this.gi.Ps()}nF(t,i){t.padding={...t.padding,...i},this.lT=!0,this.gi.Ps()}hF(t,i,s){let e=this._T(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.qC.push(e),this.nT=!0),"string"==typeof e.content||"number"==typeof e.content?this.hT=!0:this.rT=!0,this.gi.Ps()}aF(t){this.qC.forEach((i=>t(i)))}_T(t,i,s){const e=this.qC.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}rF(t,i){const s=this.qC.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}oF(t,i){const s=this.qC.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}jT(t){var i,s,e,h,r,n;if(this.vF){if(0!==t.y){const h=null!==(s=null===(i=this.vF.rowHeightsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>-this.IT.y+(t.y>0?1:0)>=i.value)))||void 0===i?void 0:i.index)&&void 0!==s?s:0,r=null!==(e=this.vF.rowHeightsCumulative[h+t.y])&&void 0!==e?e:0;this.IT.y=-r,this.yT=!0,this.gi.Ps()}if(0!==t.x){const i=null!==(r=null===(h=this.vF.columnWidthsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>this.IT.x+(t.x>0?1:0)>=i.value)))||void 0===h?void 0:h.index)&&void 0!==r?r:0,s=null!==(n=this.vF.columnWidthsCumulative[i+t.x])&&void 0!==n?n:0;this.IT.x=s,this.yT=!0,this.gi.Ps()}}}sF(t){this.vF&&(this.CT.x+=t.x,this.CT.y+=t.y,this.yT=!0,this.gi.Ps())}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}var Wf;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(Wf||(Wf={}));const Xf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Zf=(t,i,s)=>{const e=t.x,h=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[r(e,l),-1,0];case"right-center":return[r(h,l),1,0];case"center":return[r(n,l),0,0];case"left-bottom":return[r(e,a),-1,-1];case"right-bottom":return[r(h,a),1,-1];case"center-bottom":return[r(n,a),0,-1];case"left-top":return[r(e,o),-1,1];case"right-top":return[r(h,o),1,1];case"center-top":return[r(n,o),0,1]}return ss(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Jf={top:!1,bottom:!1,left:!1,right:!1};class Qf extends Xr{constructor(t,i,s,e,h,r){super(t,{dn(){},cn(){},An(){}},e,i,s,{numeric:i.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.P=new Pt,this.chart=t,this.vs=r,this.Hs=h,this.qh=h.wn(t.xF).kr(this.bi.barChartCategoryAxisTitleFont||this.bi.xAxisTitleFont).Ke(this.bi.barChartCategoryAxisTitleFillStyle||this.bi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ws.getWidth({x:0,y:-90})),this.Fr=this.vs.oA([this.qh]).Ls(i.effectsText),this.MF=h.Ah(t.xF).fh(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.dA=t,this.fA=t):"object"==typeof t&&(this.dA=t.min,this.fA=t.max),this.chart.gi.Ps(),this}getThickness(){return{min:this.dA,max:this.fA}}setStrokeStyle(t){return this.MF.fh(t),this.chart.gi.Ps(),this}getStrokeStyle(){return this.MF.co()}th(t){const i=this.getInterval(),s=this.chart.valueAxis.getInterval();this.MF.ph(this.chart.Ws.toPoint(i.start,s.start)).gh(this.chart.Ws.toPoint(i.end,s.start)).setVisible(this.ci),this.qh.ih(this.chart.Ws.toPoint(.5*(i.start+i.end),this.chart.valueAxis.oi.Jt(s.start,-t.gA))).Xl(this.chart.Ws.toPoint(0,1)).setVisible(this.ci),t.ticksInfo.forEach(((t,i)=>{i.Or.ih(t.labelPosition).Xl(t.labelAlignment).Cr(t.labelRotation).Gl(t.labelOffset.x,t.labelOffset.y)}))}Ur(t){return{}}Wr(t,i,s,e){return{keyValue:t,tickLevel:i,labelText:s,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}tn(t,i){return new Zr(i,t,this.Hs,this.chart.xF)}Jr(t,i,s){const e=t.gA,h=this.chart.Ws.getHeight(this.qh.Vr().bc());return{vA:h,yf:oi(this.MF.co().Yi()/2+e+h,void 0!==this.dA?this.dA:0,void 0!==this.fA?this.fA:ps),ticksInfo:i,updatedTicks:s}}ir(){return this.chart.uiScale}vn(t,i){return i}mn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}}class Kf extends Xr{constructor(t,i,s,e,h,r,n){super(t,{dn:()=>{var i;if(t.wF){if("positive"===t._F||"bipolar"===t._F){if("after-bar"===(null===(i=t.kF)||void 0===i?void 0:i.position)){const i=this.oi.Mt();return this.oi.Jt(t.wF.max,Math.min(this.chart.Ws.getHeight(this.chart.CF())+t.kF.labelMargin,.3*i))}return t.wF.max}return t.TF?oi(-1,-1e-6,t.wF.max):0}},cn:()=>{var i;if(t.wF){if("negative"===t._F||"bipolar"===t._F){if("after-bar"===(null===(i=t.kF)||void 0===i?void 0:i.position)){const i=this.oi.Mt();return this.oi.Jt(t.wF.min,-Math.min(this.chart.Ws.getHeight(this.chart.CF())+t.kF.labelMargin,.3*i))}return t.wF.min}return t.TF?oi(1,1e-6,t.wF.min):0}},An:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.P=new Pt,this.chart=t,this.vs=r,this.Hs=h,this.qh=h.wn(t.xF).kr(this.bi.barChartValueAxisTitleFont||this.bi.yAxisTitleFont).Ke(this.bi.barChartValueAxisTitleFillStyle||this.bi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ws.getHeight({x:0,y:-90})),this.Fr=this.vs.oA([this.qh]).Ls(i.effectsText),this.MF=h.Ah(t.xF).fh(i.barChartValueAxisStrokeStyle||this.bi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.dA=t,this.fA=t):"object"==typeof t&&(this.dA=t.min,this.fA=t.max),this.chart.gi.Ps(),this}getThickness(){return{min:this.dA,max:this.fA}}setStrokeStyle(t){return this.MF.fh(t),this.chart.gi.Ps(),this}getStrokeStyle(){return this.MF.co()}setTickStrategy(t,i){return super.Ar(t,i)}th(t){const i=this.getInterval();this.MF.ph(this.chart.Ws.toPoint(-.5,this.gr)).gh(this.chart.Ws.toPoint(-.5,this.vr)).setVisible(this.ci);const s="logarithmic"===this.cr.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Ws.toPoint(this.chart.categoryAxis.oi.Jt(-.5,t.gA*this.chart.Ws.FF),s),h=this.chart.Ws.toPoint(this.chart.Ws.IF,0);this.qh.ih(e).Xl(h).setVisible(this.ci),t.ticksInfo.forEach(((i,s)=>{s.Or.ih(i.labelPosition).Xl(i.labelAlignment).Cr(i.labelRotation).Gl(i.labelOffset.x,i.labelOffset.y);const e=s._n.Ph;e.tickStyle!==$t&&0!==e.tickLength&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.tickStyle}),e.gridStrokeStyle!==$t&&e.gridStrokeLength>0&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionGridlineEnd]},{lineStyle:e.gridStrokeStyle})}))}Ur(t){return{}}Wr(t,i,s,e,h){const r=i.Ph,n=this.chart.Ws.toPoint(-.5,t),o=this.chart.xF.Jt(n,this.chart.Ws.toPoint(r.getTickLength()*this.chart.Ws.FF,0)),a=this.chart.xF.Jt(n,this.chart.Ws.toPoint(r.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ws.FF,0));return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.chart.xF.Jt(o,this.chart.Ws.toPoint(r.getTickPadding()*this.chart.Ws.FF,0)),labelAlignment:this.chart.Ws.toPoint(this.chart.Ws.IF,r.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:i.Ph.labelRotation,positionTicklineStart:n,positionTicklineEnd:o,positionGridlineEnd:a}}tn(t,i){return new Zr(i,t,this.Hs,this.chart.xF)}Jr(t,i,s){let e=0;for(const t of this.Eh.values())for(const i of t.values()){const t=i._n.Ph,s=this.chart.Ws.getWidth(i.Or.Vr().bc()),h=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,h)}const h=e+this.MF.co().Yi()/2,r=this.chart.Ws.getWidth(this.qh.Vr().bc());return{gA:h,vA:r,yf:oi(h+r,void 0!==this.dA?this.dA:0,void 0!==this.fA?this.fA:ps),ticksInfo:i,updatedTicks:s}}ir(){return this.chart.xF}vn(t,i){return"linear"===this.cr.type?Ye(t,i,this.oi):je(t,i,this.oi)}mn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}}class qf extends Vu{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.mi=ls(),this.S=0,this.LF=!1,this.P=new Pt,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.Es=h,this.Xe=Zi(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Ze=Zi(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.addEventListener("visiblechange",(()=>this.chart.PF())),this.addEventListener("dispose",(()=>{this.chart.PF(),this.chart.BF.delete(this.category),this.chart.DF.delete(this)}))}Ji(t,i,s){const e=this.chart.gi.tl(i);return{cursorPosition:{pointMarker:{x:e.engineX,y:e.engineY},pointMarkerScale:this.chart.gi.oi,resultTable:{x:e.engineX,y:e.engineY},resultTableScale:this.chart.gi.oi},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.LF=!0,this.S=t,this.chart.PF(),this.chart.gi.Ps(),this.chart.BF.delete(this.category),this.chart.DF.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.chart.PF(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.chart.PF(),this}getStrokeStyle(){return this.Ze}Sv(){return this.hv}setEffect(t){return this.chart.setBarsEffect(t),this}eh(){return{fill:this.Xe,lutValue:this.value}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const tA=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class iA extends Ll{constructor(t,i,s,e,h,r,n){var o,a;let l;super(t,i,s,i.jg("barChart bg",0),e,i.gi.bi.barChartBackgroundFillStyle||i.gi.bi.chartXYBackgroundFillStyle,i.gi.bi.barChartBackgroundStrokeStyle||i.gi.bi.chartXYBackgroundStrokeStyle,i.gi.bi.barChartTitleFont||i.gi.bi.chartXYTitleFont,i.gi.bi.barChartTitleFillStyle||i.gi.bi.chartXYTitleFillStyle,i.gi.bi.barChartTitleShadow||i.gi.bi.chartXYTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.coordsBars="barChart",this.EF=eA.Descending,this.RF=this.bi.barChartCategoryLabels,this.kF=this.bi.barChartValueLabelsAfterBars,this.OF=!0,this.Kb=os(),this.BF=new Map,this.DF=new Map,this._F="positive",this.zF="columns",this.VF=!0,this.NF=new Map,this.GF={speed:1},this.yk={speed:1},this.$F=.08,this.UF=[],this.YF=new Map,this.jF=!1,this.HF={left:2,right:2,top:2,bottom:2},this.WF=[],this.ma=t=>{this.xF.X(t.engineWidth,t.engineHeight),this.jF=!0},this.P=new Pt,this.gi.Ia(ln.xo),this.XF=this.bi.barChartCornerRadius,this.Ws="horizontal"===(null==n?void 0:n.type)?rA:hA,this.Wh.qr("Bar Chart"),this.ZF=i.Rm("barChart plotting 1",0),this.JF=i.Rm("barChart plotting 2",1),this.TF="logarithmic"===(null===(a=null==n?void 0:n.valueAxis)||void 0===a?void 0:a.type),this.TF?"horizontal"===this.Ws.QF?(l=s.d1({scale1DConstructor:W,dimension:"y"}),this.xF=(new Q).Qt(s.d1({scale1DConstructor:re,dimension:"x"}),l)):(l=s.d1({scale1DConstructor:W,dimension:"x"}),this.xF=(new Q).Qt(l,s.d1({scale1DConstructor:re,dimension:"y"}))):(this.xF=s.d2({scaleXYConstructor:J}),l=this.Ws.getWidth(this.xF)),this.KF=this.vs.oA(),this.tx=new yl((()=>this.Kb.Zi(this.ZF.pd(this.xF).rl(0))),((t,i,s)=>(t.Ke(s.fillStyle).Qe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jo();return s.xd(i.x1,i.y1,i.x2,i.y2).bd(i.rounding),this.Kb.Qi(s,i.bar),i.bar.Cs([s]),s})))),(()=>{this.Kb.zi()}),(t=>{this.KF._s(t)})),this.xy=this.Fg.qe(this.xF).Ke(this.bi.barChartSeriesBackgroundFillStyle||xe).Qe($t),this.My=this.Fg.qe(this.xF).Ke(xe).Qe(this.bi.barChartSeriesBackgroundStrokeStyle||$t).setPointerEvents(!1),super.by(this.xy,this.My),this.categoryAxis=new Qf(this,this.bi,!1!==(null==n?void 0:n.animationsEnabled),l,this.JF,this.vs),this.categoryAxis.setInterval(this.Ws.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const u=Ue(null==n?void 0:n.valueAxis);this.valueAxis=new Kf(this,this.bi,!1!==(null==n?void 0:n.animationsEnabled),this.Ws.getHeight(this.xF),this.JF,this.vs,u.type),this.qF=new Za((()=>this.JF.wn(this.xF).Mn(as).xn(as).rl(1))),this.tI=new yl((()=>this.Fg.bA(this.xF).setPointerEvents(!1)),((t,i,s)=>(t.fh(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.jo()).MA(i[0],i[1]))))));const c=i.Um(),d=li(n?n.cursorBuilder:void 0,au);this.Ym=IA(this,c,d.fm(c,this.uiScale,this.uiScale,ri,this.bi),this,"show-pointed",nA,(()=>0)),this.addEventListener("resize",this.ma),this.Yg(h,this.xF),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),void 0!==(null==n?void 0:n.legend)&&this.legend.setOptions(n.legend)}getSeries(){return this.vy}setCornerRadius(t){return this.XF=t,this.OF=!0,this.gi.Ps(),this}getCornerRadius(){return this.XF}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=au){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}setBarsMargin(t){return this.$F=oi(t,0,.49),this.OF=!0,this.gi.Ps(),this}getBarsMargin(){return this.$F}setBarsEffect(t){return this.KF.Ls(t),this.gi.Ps(),this}getBarsEffect(){return this.KF.Bs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.iI("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.iI("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.iI("groups",s),this}iI(t,i){this.vy.length>0&&this.gi.Ia(ln.Eo),this.zF=t,this.WF=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.sI(i);const s=qi(i.map((t=>t.category))),e=s.length,h=qi(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((i=>{let e=this.vy.find((t=>t.category===i.category&&t.subCategory===i.subCategory));if(!e){const r=s.indexOf(i.category),n=void 0!==i.subCategory&&h.includes(i.subCategory)?h.indexOf(i.subCategory):void 0;e=new qf(this,this.my,this.bi,this.gi.vs,i.category,i.subCategory,li(n,r)),this.wy(e,"groups"===t||"stacks"===t?{legend:null}:void 0),this.NF.set(e,{category:r,valueStart:this.TF?1e-6:0,valueEnd:void 0!==i.value?i.value:0})}void 0!==i.value&&e.setValue(i.value)})),this.vy.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.NF.delete(t))})),this.categoryAxis.setInterval(this.Ws.getWidth({x:{start:-.5,end:Math.max(e,1)-.5},y:{start:Math.max(e,1)-.5,end:-.5}})),this.wF=0===this.vy.length?void 0:"stacks"!==t?this.vy.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:ps,max:ms}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.wF&&(this._F=this.wF.min>=0?"positive":this.wF.max<=0?"negative":"bipolar",("bipolar"===this._F||"negative"===this._F)&&this.TF))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.eI&&this.eI(),"groups"===t||"stacks"===t){const t=h.map((t=>(t=>{let i=!1;const s=new Array;return t.forEach((e=>{const h=s=>{i||(i=!0,t.forEach((t=>e!==t?t.setHighlight(s.highlight):void 0)),i=!1)};e.addEventListener("highlightchange",h),s.push((()=>e.removeEventListener("highlightchange",h)))})),t.forEach((i=>{const e=()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)};i.addEventListener("dispose",e),s.push((()=>i.removeEventListener("dispose",e)))})),()=>{s.forEach((t=>t()))}})(this.vy.filter((i=>i.subCategory===t)))));this.eI=()=>t.forEach((t=>t()))}const r=new Set(h);for(const t of this.YF.keys())r.has(t)||(this.Rs.forEach((i=>{if(i.mg()){const s=i.getEntries(),e=this.YF.get(t),h=s.find((t=>t.component===e));e&&h&&i.remove(e)}})),this.YF.delete(t));this.Rs.forEach((t=>{t.mg()&&t.add(this)})),this.sI(this.vy),this.BF.clear(),this.DF.clear(),this.OF=!0,this.gi.Ps()}setCategoryLabels(t){const i="function"==typeof t?this.RF?t(this.RF):this.RF:t;return this.RF=i?{...this.bi.barChartCategoryLabels,...i}:void 0,this.BF.clear(),this.gi.Ps(),this.jF=!0,this}getCategoryLabels(){return this.RF}setValueLabels(t){var i;const s="function"==typeof t?this.kF?t(this.kF):this.kF:t,e=(null==s?void 0:s.position)||(null===(i=this.kF)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.kF={...this.bi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.kF={...this.bi.barChartValueLabelsInsideBars,...s}):this.kF=void 0,this.DF.clear(),this.gi.Ps(),this.jF=!0,this}getValueLabels(){return this.kF}setLabelFittingEnabled(t){return this.VF=t,this.gi.Ps(),this}getLabelFittingEnabled(){return this.VF}setLabelFittingMargins(t){return this.HF="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:as,this.jF=!0,this.gi.Ps(),this}getLabelFittingMargins(){return this.HF}getBar(t,i){if(("groups"===this.zF||"stacks"===this.zF)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.vy.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.vy}setSorting(t){this.EF=t;const i=this.vy.slice();return this.vy.length=0,this.vy.push(...ts(this.WF.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.sI(this.vy),this.gi.Ps(),this.OF=!0,this}getSorting(){return this.EF}setAnimationCategoryPosition(t,i=1){return this.GF=t?{speed:i}:void 0,this.gi.Ps(),this}setAnimationValues(t,i=1){return this.yk=t?{speed:i}:void 0,this.gi.Ps(),this}translateCoordinate(t,i,s){if(s&&Oe(t)&&Re(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(Ee(t))h=this.gi.tl(t);else if(Oe(t)){const i=tt(t,this.sA,this.gi.oi);h={engineX:i.x,engineY:i.y}}else{if(!tA(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=tt(this.Ws.toPoint(t.iCategory,t.value),this.xF,this.gi.oi);h={engineX:i.x,engineY:i.y}}}if(De(e))return this.gi.il(h);if("barChart"===e){const t=tt({x:h.engineX,y:h.engineY},this.gi.oi,this.xF);return{iCategory:this.Ws.getWidth(t),value:this.Ws.getHeight(t)}}if(Re(e))return tt({x:h.engineX,y:h.engineY},this.gi.oi,this.sA);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}bg(){if("columns"===this.zF)return this.vy;const t=qi(ts(this.vy.map((t=>t.subCategory))));return ts(t.map((t=>{if(this.YF.has(t))return this.YF.get(t);const i=this.vy.filter((i=>i.subCategory===t)),s=i[0];if(!s)return;const e={Us:()=>{},getVisible:()=>s.getVisible(),setVisible:t=>{i.forEach((i=>i.setVisible(t)))},getName:()=>t,eh:()=>s.eh()};return this.YF.set(t,e),e})))}th(t){var i,s,e;super.th(t);const h=this.qF.zA(),r=this.tI.zA(),n=this.vy.filter((t=>t.getVisible()&&t.LF)),o=qi(n.map((t=>t.category))),a=qi(ts(n.map((t=>t.subCategory)))),l=5e-4*t*((null===(i=this.GF)||void 0===i?void 0:i.speed)||0),u=.003*t*((null===(s=this.GF)||void 0===s?void 0:s.speed)||0),c=this.valueAxis.oi,d=c instanceof W?(t,i)=>{var s;return Ye(t,i,c,(null===(s=this.yk)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return je(t,i,c,(null===(s=this.yk)||void 0===s?void 0:s.speed)||0)};let f;const A=null!==(e="positive"===this._F&&this.wF?Math.min(this.wF.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.wF.max-this.wF.min):"negative"===this._F&&this.wF?Math.max(this.wF.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.wF.max-this.wF.min):void 0)&&void 0!==e?e:0;"columns"===this.zF?f=n.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.TF?1e-6:A,valueEnd:t.value}}))):"groups"===this.zF?f=n.map((t=>{const i=o.indexOf(t.category),s=a.indexOf(t.subCategory),e=1/(a.length+2*(a.length+1)*this.$F),h=this.$F*e;return{bar:t,position:{category:i+(s-(a.length-1)/2)*(e+h),valueStart:this.TF?1e-6:A,valueEnd:t.value}}})):(f=[],o.forEach((t=>{const i=n.filter((i=>i.category===t));let s=this.TF?1e-6:0;i.forEach((i=>{f.push({bar:i,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+i.value}}),s+=i.value}))}))),f.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.NF.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.GF&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+l*t+u*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.yk&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=d(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.NF.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.gi.Ps(!0),e===r.category&&h===r.valueEnd||(this.OF=!0)}));const g=[...this.vy];(this.UF.length!==g.length||this.UF.some(((t,i)=>t!==g[i])))&&(this.Rs.forEach((t=>t.Sg(this.vy))),this.UF=g);const v=ul.qg(this.Wh,this.Hg),y=this.Rs.reduce(((t,i)=>{const s=i.Vr(v,this.Nn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,y);const p=n.length>0;this.categoryAxis.gn(),this.valueAxis.gn();const{labelMarginBeforeCategoryAxisPixels:m,labels:S}=p?this.hI(o,a,n,h,r):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},b=this.categoryAxis.Vr({physicalAxisSize:this.categoryAxis.oi.Mt(),gA:m}),x=this.valueAxis.Vr({plotLines:r,physicalAxisSize:this.valueAxis.oi.Mt(),oppositeAxisSize:this.Ws.getWidth(this.xF).Mt()});this.xF.qt([this.nt.bottom+this.Nn.bottom+y.bottom+("vertical"===this.Ws.QF?b.yf:0),this.nt.top+this.Nn.top+v+y.top+("horizontal"===this.Ws.QF?x.yf:0)]),this.xF.Kt([this.nt.left+this.Nn.left+y.left+this.Ws.getHeight({x:b.yf,y:x.yf}),this.nt.right+this.Nn.right+y.right]),this.ZF.Cm({x:this.xF.x.bt(),y:this.xF.y.bt(),width:this.xF.x.Mt(),height:this.xF.y.Mt()}),this._g&&this._g();const M={x:Math.min(this.xF.x.getInnerStart(),this.xF.x.getInnerEnd()),y:Math.min(this.xF.y.getInnerStart(),this.xF.y.getInnerEnd())},w=Math.max(this.xF.x.getInnerStart(),this.xF.x.getInnerEnd()),_=Math.max(this.xF.y.getInnerStart(),this.xF.y.getInnerEnd()),k={x:w-M.x,y:_-M.y};if(this.xy.ih(M),this.xy.X(k),this.My.ih(M),this.My.X(k),this.categoryAxis.th(b),this.valueAxis.th(x),super.Ug(),this.Ym.th(!1,this.vy,void 0),(this.OF||this.jF)&&this.VF){const t=S.map((t=>{const i=t.setVisible(!0).Vr().yc();if(0!==this.HF.bottom||0!==this.HF.left||0!==this.HF.right||0!==this.HF.top){const s=Math.sign(this.xF.x.$-this.xF.x.G),e=Math.sign(this.xF.y.$-this.xF.y.G),h=e>0?i.min.y:i.max.y,r=e>0?i.max.y:i.min.y,n=s>0?i.min.x:i.max.x,o=s>0?i.max.x:i.min.x,a=t.oi.Jt({x:n,y:h},{x:-this.HF.left,y:-this.HF.bottom}),l=t.oi.Jt({x:o,y:r},{x:this.HF.right,y:this.HF.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return i}));for(let i=0;i<S.length;i+=1){if(!S[i].getVisible())continue;const s=t[i];let e;do{e=S.findIndex(((e,h)=>h!==i&&S[h].getVisible()&&Ms(s,t[h]))),e>=0&&S[e].setVisible(!1)}while(e>=0)}}if(this.OF){const t=this.tx.zA(),i="groups"===this.zF?1/(a.length+2*(a.length+1)*this.$F):1-2*this.$F;n.forEach((s=>{const e=this.NF.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=this.Ws.toPoint(h,e.valueStart),o=this.Ws.toPoint(r,e.valueEnd);let l;this.XF&&(l={extent:this.XF,c_x1_y2:"vertical"===this.Ws.QF,c_x2_y2:"vertical"===this.Ws.QF||"horizontal"===this.Ws.QF,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Ws.QF},"stacks"===this.zF&&s.subCategory&&a.indexOf(s.subCategory)!==a.length-1&&(l=void 0)),t.add({mi:s.mi,bar:s,x1:n.x,y1:n.y,x2:o.x,y2:o.y,rounding:l},{fillStyle:s.Xe,strokeStyle:s.Ze})})),t.finishPlot()}h.finishPlot(),r.finishPlot(),this.OF=!1,this.jF=!1,this.Rs.forEach((t=>t.th(v,this.Nn)))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.JF.N(),this.ZF.N(),this.Ym.N(),super.dispose()}sI(t){const i=this.EF;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}hI(t,i,s,e,h){let r=0;const n=this.RF,o=this.kF,a=this.valueAxis.getInterval(),l=[];if(n&&n.labelFillStyle!==xe){const i=n.tickLength+n.labelMargin,o=this.Ws.toPoint(n.labelAlignment,1),u={nf:t.map(((t,e)=>{const h=s.reduce(((i,s)=>s.category!==t?i:i+s.value),0),r=n.formatter(t,h);if(!r)return;const l=e;return void 0!==l?{text:r,position:this.Ws.toPoint(l,this.valueAxis.oi.Jt(a.start,-i)),alignment:o,rotation:n.labelRotation,sizePixels:this.rI(t,h)}:void 0})),Kn:n.labelFont,oi:this.xF};u.nf.forEach((t=>{t&&l.push(e.add().qr(t.text).ih(t.position).Xl(t.alignment).Cr(t.rotation).Ke(n.labelFillStyle).kr(n.labelFont).Kr(n.labelShadow))})),n.tickStyle!==$t&&0!==n.tickLength&&u.nf.forEach((t=>{if(!t)return;const i=this.Ws.getWidth(t.position);h.add({positions:[this.Ws.toPoint(i,this.valueAxis.oi.getInnerStart()),this.Ws.toPoint(i,this.valueAxis.oi.Jt(a.start,-n.tickLength))]},{lineStyle:n.tickStyle})})),r=u.nf.reduce(((t,i)=>i?Math.max(t,this.Ws.getHeight(i.sizePixels)):t),0)+n.tickLength+n.labelMargin}if(o&&o.labelFillStyle!==xe){const h={nf:[],Kn:o.labelFont,oi:this.xF};"stacks"===this.zF&&o.displayStackedSum&&h.nf.push(...t.map(((t,e)=>{const h=s.reduce(((i,s)=>i+(s.category===t?s.value:0)),0),r=o.formatter({chart:this,bar:void 0,category:t,value:h,subCategory:void 0});if(!r)return;const n=s.filter((i=>i.category===t)).sort(((t,s)=>{var e,h;return i.indexOf(null!==(e=t.subCategory)&&void 0!==e?e:"")-i.indexOf(null!==(h=s.subCategory)&&void 0!==h?h:"")})),a=n[n.length-1],l=this.NF.get(a);return void 0!==l?{text:r,position:this.Ws.toPoint(l.category,this.valueAxis.oi.Jt(l.valueEnd,o.labelMargin*Math.sign(l.valueEnd))),alignment:this.Ws.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:o.labelRotation,sizePixels:this.gi.er.Lh(r,o.labelFont,o.labelRotation)}:void 0}))),"after-bar"!==o.position||"stacks"===this.zF&&!o.displayStackedIndividuals?"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||h.nf.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.NF.get(t);if(void 0===e)return;const h="bipolar"===this._F?Math.sign(e.valueEnd):"negative"===this._F?-1:1,r=this.Ws.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*h:"inside-bar-centered"===o.position?0:-1*h);return{text:s,position:this.Ws.toPoint(e.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.oi.Jt(e.valueEnd,-o.labelMargin*h):"inside-bar-centered"===o.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.oi.Jt(e.valueStart,o.labelMargin*h)),alignment:r,rotation:o.labelRotation,sizePixels:this.nI(t)}}))):h.nf.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.NF.get(t);return void 0!==e?{text:s,position:this.Ws.toPoint(e.category,this.valueAxis.oi.Jt(e.valueEnd,o.labelMargin*Math.sign(e.valueEnd))),alignment:this.Ws.toPoint(o.labelAlignment,-1*Math.sign(e.valueEnd)),rotation:o.labelRotation,sizePixels:this.nI(t)}:void 0}))),h&&h.nf.forEach((t=>{t&&l.push(e.add().qr(t.text).ih(t.position).Xl(t.alignment).Cr(t.rotation).Ke(o.labelFillStyle).kr(o.labelFont).Kr(o.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:r,labels:l}}rI(t,i){if(!this.RF||this.RF.labelFillStyle===xe)return{x:0,y:0};const s=this.BF.get(t);if(s)return s;const e=this.RF.formatter(t,i),h=this.gi.er.Lh(e,this.RF.labelFont,this.RF.labelRotation);return h.isEstimate?this.gi.Ps(!0):this.BF.set(t,h),h}nI(t){if(!this.kF||this.kF.labelFillStyle===xe)return{x:0,y:0};const i=this.DF.get(t);if(i)return i;const s=this.gi.er.Lh(this.kF.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.kF.labelFont,this.kF.labelRotation);return s.isEstimate?this.gi.Ps(!0):this.DF.set(t,s),s}CF(){return this.vy.reduce(((t,i)=>{const s=this.nI(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}PF(){this.OF=!0,this.gi.Ps()}Y(){return super.Y(),this.xF.Y(),this}j(){return super.j(),this.xF.j(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const sA={Horizontal:"horizontal",Vertical:"vertical"},eA={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},hA={...ra,QF:"vertical",FF:-1,IF:1},rA={...na,QF:"horizontal",FF:1,IF:-1},nA=(t,i,s)=>{const e=[[{component:i.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:$e(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:$e(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},oA=(t,i)=>Math.abs(t)+Math.abs(i);function aA(t,i){const s=t.reduce(oA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const lA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},uA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(oA,0),o=t.map((t=>t.animatedValue)).reduce(oA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else dA(c,lA(d).value,t,d);return d.children},cA=(t,i,s,e,h)=>{const r=t.reduce(oA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u=e[l.length],c={...u,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...u.userNode,value:u.value}};s?h.y-=n:h.x+=n,l.push(c)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},dA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=aA(a,r),l=aA(t,r);if(!(0===a.length||n>l)){cA(a,r,lA(e).vertical,s,e),h.push({children:i.slice(o),width:lA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&cA(a,r,lA(e).vertical,s,e)}};class fA extends ll{constructor(t,i,s,e,h,r,n){var o;if(super(t,i,s,i.jg("treeMapChart bg",0),e,i.gi.bi.treeMapChartBackgroundFillStyle||i.gi.bi.chartXYSeriesBackgroundFillStyle,i.gi.bi.treeMapChartBackgroundStrokeStyle||i.gi.bi.chartXYBackgroundStrokeStyle,i.gi.bi.treeMapChartTitleFont||i.gi.bi.chartXYTitleFont,i.gi.bi.treeMapChartTitleFillStyle||i.gi.bi.chartXYTitleFillStyle,i.gi.bi.treeMapChartTitleShadow||i.gi.bi.chartXYTitleShadow,n,null===(o=null==r?void 0:r.legend)||void 0===o?void 0:o.customLegend),this.oI=new Map,this.aI=[],this.lI={},this.uI=d([]),this.yk={speed:1},this.cI=ps,this.dI="Go Back",this.fI=[],this.AI=this.bi.treeMapChartPathLabelFillStyle||this.bi.uiTextFillStyle,this.gI=this.bi.treeMapChartPathLabelFont||this.bi.uiTextFont,this.vI=this.bi.treeMapChartLabelHeaderFillStyle||this.bi.uiTextFillStyle,this.yI=this.bi.treeMapChartLabelHeaderFont||this.bi.uiTextFont,this.pI=this.bi.treeMapChartLabelFillStyle||this.bi.uiTextFillStyle,this.mI=this.bi.treeMapChartLabelFont||this.bi.uiTextFont,this.aS=!0,this.qA=!1,this.SI=this.bi.treeMapChartParentColor||T,this.bI=this.bi.treeMapChartNodeStrokeStyle||this.bi.uiBackgroundStrokeStyle,this.xI=as,this.Qb=this.bi.treeMapChartCornerRadius,this.uS=()=>{this.gi.Ps(),this.qA=!0},this.MI=(t,i)=>{var s;const{collectionMember:e}=i,h=this.wI(e);h&&(this.kS=this._I(h,t),this.aS&&this.gi.xs.zs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(gr.Point),this.gi.Ps())},this.kI=(t,i)=>{const{collectionMember:s}=i;this.wI(s)&&(this.kS=void 0,this.aS&&this.gi.xs.zs(s,!1),this.engine.setMouseStyle(gr.Default),this.gi.Ps())},this.CI=(t,i)=>{var s;const{collectionMember:e}=i,h=this.wI(e);h&&(this.kS=this._I(h,t),this.aS&&this.gi.xs.zs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(gr.Point),this.gi.Ps())},this.TI=(t,i)=>{var s;if(t.defaultPrevented)return;const{collectionMember:e}=i,h=this.wI(e);if(h){if(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click){const i=(null==h?void 0:h.children.length)?h:h.parentID?this.lI[h.parentID]:void 0;i&&(this.uI._([i]),this.kS=void 0,this.P.D("viewchange",{nodes:this.uI.C().map((t=>t.userNode))}),this.qA=!0),t&&ki(t)}this.gi.Ps()}},this.FI=t=>{const i=this.lI[this.fI[t].id]?[this.lI[this.fI[t].id]]:this.aI;this.uI._(i),this.P.D("viewchange",{nodes:i.map((t=>t.userNode))}),this.qA=!0,this.gi.Ps()},this.nodes=new Pt,this.P=new Pt,this.bi.treeMapChartNodeColors)this.II=this.bi.treeMapChartNodeColors;else{const t=this.bi.pointSeriesFillStyle,i=t=>Ce(t)?t.getColor():T;this.II="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.gi.Ia(ln.zo),this.Lk=i.Em("TreeMapChart plotting",0),this.Pk=i.Em("TreeMap UI plotting",1),this.addEventListener("resize",this.uS),this.Wh.qr("TreeMap Chart");const a=i.Um(),l=li(r?r.cursorBuilder:void 0,uu);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),void 0,"show-pointed",AA,(()=>0)),this.LI=this.vs.oA(),this.Yg(h,this.uiScale),this.df=this.Lk.pd(this.sA).Ke(new Te).Qe(this.bI),this.BI=this.gi.xs.Yo(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.DI=new Za((()=>this.Pk.wn(this.sA).setPointerEvents(!1))),this.EI=new Za((()=>this.Pk.wn(this.uiScale))),this.df.setPointerEvents(!0),this.nodes.Vi(this.df,(t=>{const i=this.wI(t);if(i)return i.userNode})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.df.addEventListener("pointerenter",this.MI),this.df.addEventListener("pointerleave",this.kI),this.df.addEventListener("click",this.TI),this.df.addEventListener("pointermove",this.CI),void 0!==(null==r?void 0:r.legend)&&this.legend.setOptions(r.legend)}setCornerRadius(t){return this.Qb=t,this.qA=!0,this.gi.Ps(),this}getCornerRadius(){return this.Qb}setData(t){t=Array.isArray(t)?t.slice():[t];const{RI:i}=(()=>{let t=0;return{RI:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.lI[t.id];i&&this.OI(t,i)})),this.kS=void 0,this.uI._(s),this.aI=s,this.lI=this.zI(s),this.qA=!0,this.gi.Ps(),this}setAnimationValues(t,i=1){return this.yk=t?{speed:i}:void 0,this.gi.Ps(),this}setInitPathButtonText(t){return this.dI=t,this.qA=!0,this.gi.Ps(),this}setDisplayedLevelsCount(t){return this.cI=t,this.qA=!0,this.gi.Ps(),this}setDrillDownNode(t){var i,s;if(this.kS=void 0,void 0===t)this.uI._(this.aI);else{const e=[...this.aI];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.lI[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.lI[h.parentID]:this.aI[0];this.uI._([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.P.D("viewchange",{nodes:this.uI.C().map((t=>t.userNode))}),this.qA=!0,this.gi.Ps(),this}setNodeColoring(t){return t instanceof Array?(this.df.Ke(new Te),this.II=t):(this.df.Ke(t),this.Rs.forEach((t=>{t.mg()&&t.add(this)}))),this.Rs.forEach((t=>t.Os())),this.qA=!0,this.gi.Ps(),this}setParentNodeColor(t){return this.SI=t,this.qA=!0,this.gi.Ps(),this}setPathLabelFillStyle(t){return this.AI="function"==typeof t?t(this.AI):t,this.qA=!0,this.gi.Ps(),this}getPathLabelFillStyle(){return this.AI}setPathLabelFont(t){return B(t)?this.gI=t:this.gI=t(this.gI),this.qA=!0,this.gi.Ps(),this}getPathLabelFont(){return this.gI}setHeaderFont(t){return B(t)?this.yI=t:this.yI=t(this.yI),this.qA=!0,this.gi.Ps(),this}getHeaderFont(){return this.yI}setHeaderFillStyle(t){return this.vI="function"==typeof t?t(this.vI):t,this.qA=!0,this.gi.Ps(),this}getHeaderFillStyle(){return this.vI}setLabelFont(t){return B(t)?this.mI=t:this.mI=t(this.mI),this.qA=!0,this.gi.Ps(),this}getLabelFont(){return this.mI}setLabelFillStyle(t){return this.pI="function"==typeof t?t(this.pI):t,this.qA=!0,this.gi.Ps(),this}getLabelFillStyle(){return this.pI}setNodeBorderStyle(t){return this.df.Qe(t),this.qA=!0,this.gi.Ps(),this}getNodeBorderStyle(){return this.df.Za()}setNodeEffect(t){return this.LI.Ls(t),this.gi.Ps(),this}getNodeEffect(){return this.LI.Bs()}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=uu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}setAnimationHighlight(t){return this.BI.Wo(t),this}getAnimationHighlight(){return this.BI.Xo()}setHighlightOnHover(t){return this.aS=t,this}getHighlightOnHover(){return this.aS}_I(t,i){const s=this.gi.tl(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.gi.oi},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}bg(){return[this]}th(t){super.th(t),super.Ug();const i=ul.qg(this.Wh,this.Hg),s=this.Rs.reduce(((t,s)=>{const e=s.Vr(i,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});if(s.bottom===this.xI.bottom&&s.right===this.xI.right&&s.top===this.xI.top&&s.left===this.xI.left||(this.qA=!0,this.xI=s),ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,s),this.qA&&this.uI.C().length){this.df.zi(),this.oI.clear(),this.BI.Ho(),this.zh&&this.VI(t);const e=uA({data:this.uI.C(),dimensions:{x:0+this.Nn.left+s.left,y:this.sA.y.getInnerEnd()-i-this.Nn.top-s.top,width:this.sA.x.getInnerEnd()-this.Nn.right-this.Nn.left-s.right-s.left,height:this.sA.y.getInnerEnd()-i-this.Nn.top-this.Nn.bottom-s.top-s.bottom}}),h=this.DI.zA();this.NI(e,h),h.finishPlot(),this.GI(),this.aI!==this.uI.C()&&this.aI.length>1&&this.fI.unshift({name:this.dI,id:0});let r=0;const n=this.EI.zA(),o=this.gI;this.fI.forEach(((t,i)=>{const s=n.add(),e=this.gi.er.Lh(t.name,o,0);let h;s.qr(`← ${t.name}`).kr(o).ih({x:0,y:100}).Xl({x:-1,y:1}).xn({left:this.Nn.left+r,top:this.Nn.top,right:0,bottom:0}).Ke(this.AI),s.addEventListener("click",(()=>this.FI(i))),s.addEventListener("pointerenter",(()=>{h=this.engine.setMouseStyle(gr.Point,h)})),s.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(h)})),r+=e.x+25})),n.finishPlot(),this.uI.C().every((t=>t.value===t.animatedValue))?this.qA=!1:this.gi.Ps(!0)}return this.Ym.th(!1,[],void 0,{explicitTarget:this.kS}),this.Rs.forEach((t=>t.th(i,this.Nn))),this}dispose(){return this.Pk.N(),this.Lk.N(),this.Ym.N(),this.df.dispose(),this.oI.clear(),this.DI.$A(),this.EI.$A(),super.dispose()}Y(){return super.Y(),this}j(){return super.j(),this}Us(){return Hi(this.df.br(),this.df.wi())}NI(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e}))),r=this.Qb?{extent:this.Qb,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:n}=t,{x:o,y:a,height:l,width:u,children:c,animatedValue:d,name:f,nodeIndex:A}=s,g=this.II,v=0===e&&1===this.uI.C().length?this.SI:g[A%g.length],y=this.df.jo().xd(o,a,o+u,a-l).$I(v.setA(v.getA()*((null!=n?n:255)/255)))._S(d).bd(r);this.oI.set(y,s),this.BI.jo(y,(t=>y.Fi(t)));const p=o+5,m=a+25+5,S=Math.max(l-25-5,0),b=Math.max(u-5-5,0);if(c&&c.length&&e<this.cI&&b>15&&S>15){const t=uA({data:c,dimensions:{x:b>0?p:o,y:S>0?a-25:m,width:b,height:S}});for(let i=0;i<t.length;i+=1){const r=(255-(c.length>7?50:150))/(c.length-1),o=1===s.id&&1===this.aI.length||this.aI===this.uI.C()?255:n?n/(e+1):255-i*r;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.uI.C().length?this.vI:this.pI,M=0===e?this.yI:this.mI,w=this.UI(f,u-25,M),_=this.gi.er.Lh(w,M,0),k=i.add();u-25>_.x&&l>25?k.qr(w).ih({x:o+5,y:a-2.5}).Xl({x:-1,y:1}).Ke(x).kr(M):k.qr("")}}zI(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}wI(t){if(!this.qA&&t)return this.oI.get(t)}GI(){this.fI=[];const t=this.uI.C()[0].id;let i=this.lI[t].parentID;for(;i;)this.fI.push({name:this.lI[i].name,id:i}),i=this.lI[i].parentID;return this.fI.reverse()}UI(t,i,s){let e=this.gi.er.Lh(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.gi.er.Lh(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.gi.er.Lh(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.gi.er.Lh(r,s,0).x;return r.length<=3&&e>i?"":r}VI(t){var i;const s=[...this.aI];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.yk)e.animatedValue=e.value;else{const s=h/255*((null===(i=this.yk)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}OI(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.zh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}setUserInteractions(t){return this.ah=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return Kt({drillDown:{click:!0}},this.ah)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const AA=(t,i,s)=>[[{text:i.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class gA extends ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("gaugeChart bg",0),e,i.gi.bi.gaugeChartBackgroundFillStyle,i.gi.bi.gaugeChartBackgroundStrokeStyle,i.gi.bi.gaugeChartTitleFont,i.gi.bi.gaugeChartTitleFillStyle,i.gi.bi.gaugeChartTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.Nu=this.bi.gaugeChartStartAngle,this.Gu=this.bi.gaugeChartEndAngle,this.YI={start:0,end:100},this.S=0,this.jI=[],this.HI=this.bi.gaugeChartBarThickness,this.WI=this.bi.gaugeChartValueIndicatorThickness,this.XI=this.bi.gaugeChartNeedleLength,this.ZI=this.bi.gaugeChartNeedleThickness,this.JI=this.bi.gaugeChartNeedleFillStyle,this.QI=this.bi.gaugeChartNeedleStrokeStyle,this.Sd=this.bi.gaugeChartRoundedEdges,this.KI=!0,this.qI=!0,this.tL=!0,this.iL=[],this.sL=[],this.eL=!0,this.hL=!0,this.Ak=this.S,this.rL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.nL=this.bi.gaugeChartBarGradient,this.oL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.aL=this.bi.gaugeChartTickFont,this.lL=this.bi.gaugeChartValueLabelFont,this.uL=this.bi.gaugeChartValueLabelFillStyle,this.cL=this.bi.gaugeChartUnitLabelFont,this.dL=this.bi.gaugeChartUnitLabelFillStyle,this.fL=this.bi.gaugeChartTickFillStyle,this.AL=this.bi.gaugeChartBarColor,this.gL=this.bi.gaugeChartGlowColor,this.vL=this.bi.gaugeChartGlowColor.getA(),this.yL=1,this.pL=1,this.mL=this.bi.gaugeChartNeedleAlignment,this.SL=!1,this.bL=this.bi.gaugeChartGapBetweenBarAndValueIndicators,this.xL=this.bi.gaugeChartBarStrokeStyle,this.xI=as,this.ML=!1,this.P=new Pt,this.gi.Ia(ln.wo),this.Wh.qr("Gauge Chart"),this.Yg(h,this.sA),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.wL=this.AL,this._L=this.gL,this.kL=m(0,0,0,0),this.CL=this.vs.oA(),this.TL=this.vs.oA().Ls(this.bi.effectsText),this.FL=this.Fg.Cc(this.sA).Qe(this.xL).setPointerEvents(!1),this.IL=this.Fg.wd(this.sA).Ju(0).gh(360).tc(0).Qe($t).setPointerEvents(!1),this.LL=this.Xg.Ah(this.sA).fh(this.bi.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.PL=this.Xg.Ah(this.sA).fh(new wh({thickness:this.ZI,fillStyle:this.JI})).setPointerEvents(!1),this.BL=this.Xg.wn(this.sA).kr(this.lL).Ke(this.uL).setPointerEvents(!1),this.ff=this.Xg.wn(this.sA).kr(this.cL).Ke(this.dL).qr("").setPointerEvents(!1),this.DL=this.Fg.wn(this.sA).kr(this.aL).Ke(this.fL).setPointerEvents(!1),this.EL=this.Fg.wn(this.sA).kr(this.aL).Ke(this.fL).setPointerEvents(!1),this.CL._s([this.FL]),this.TL._s([this.BL,this.ff,this.DL,this.EL]),this.RL(),this.addEventListener("resize",(()=>{this.SL=!0}));const a={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(a)}RL(){this.PL.fh((t=>t.setThickness(this.ZI))),this.LL.fh((t=>t.setThickness(2*this.QI.getThickness()+this.ZI)))}setAnimationsEnabled(t){return this.zh=t,this.hL=t,this.eL=t,this}setInterval(t,i){return this.YI={start:t,end:i},this.SL=!0,this.gi.Ps(),this}getInterval(){return this.YI}setTickFillStyle(t){return this.fL="function"==typeof t?t(this.fL):t,this.sL.forEach((i=>{i.start.Ke(t),i.end.Ke(t)})),this.DL.Ke(t),this.EL.Ke(t),this.SL=!0,this.gi.Ps(),this}getTickFillStyle(){return this.fL}setTickFont(t){return this.aL="function"==typeof t?t(this.aL):t,this.sL.forEach((i=>{i.start.kr(t),i.end.kr(t)})),this.DL.kr(t),this.EL.kr(t),this.SL=!0,this.gi.Ps(),this}getTickFont(){return this.aL}setTickFormatter(t){return this.rL=t,this.SL=!0,this.gi.Ps(),this}getTickFormatter(){return this.rL}setValueLabelFillStyle(t){return this.uL="function"==typeof t?t(this.uL):t,this.BL.Ke(t),this.SL=!0,this.gi.Ps(),this}getValueLabelFillStyle(){return this.BL.br()}setValueLabelFont(t){return this.lL="function"==typeof t?t(this.lL):t,this.BL.kr(t),this.SL=!0,this.gi.Ps(),this}getValueLabelFont(){return this.BL._r()}setValueFormatter(t){return this.oL="string"==typeof t?i=>t:t,this.SL=!0,this.gi.Ps(),this}getValueLabel(){return this.BL.en()||this.oL}setUnitLabelFillStyle(t){return this.dL="function"==typeof t?t(this.dL):t,this.ff.Ke(t),this.SL=!0,this.gi.Ps(),this}getUnitLabelFillStyle(){return this.ff.br()}setUnitLabelFont(t){return this.cL="function"==typeof t?t(this.cL):t,this.ff.kr(t),this.SL=!0,this.gi.Ps(),this}getUnitLabelFont(){return this.ff._r()}setUnitLabel(t){return this.ff.qr(t),this.SL=!0,this.gi.Ps(),this}getUnitLabel(){return this.ff.en()}setNeedleFillStyle(t){return this.JI="function"==typeof t?t(this.JI):t,this.PL.fh((i=>i.setFillStyle(t))),this.SL=!0,this.gi.Ps(),this}getNeedleFillStyle(){return this.PL.co().getFillStyle()}setNeedleThickness(t){return this.ZI=t,this.RL(),this.SL=!0,this.gi.Ps(),this}getNeedleThickness(){return this.ZI}setNeedleStrokeStyle(t){return this.QI="function"==typeof t?t(this.QI):t,this.LL.fh(t),this.RL(),this.SL=!0,this.gi.Ps(),this}getNeedleStrokeStyle(){return this.LL.co()}setNeedleLength(t){return this.XI=t,this.SL=!0,this.gi.Ps(),this}getNeedleLength(){return this.XI}setBarColor(t){return this.AL=t,this.SL=!0,this.gi.Ps(),this}getBarColor(){return this.wL}setBarGradient(t){return this.nL=t,this.SL=!0,this.gi.Ps(),this}getBarGradient(){return this.nL}setBarStrokeStyle(t){return this.xL="function"==typeof t?t(this.xL):t,this.FL.Qe(t),this.SL=!0,this.gi.Ps(),this}getBarStrokeStyle(){return this.FL.Za()}setBarThickness(t){return this.HI=t,this.SL=!0,this.gi.Ps(),this}getBarThickness(){return this.HI}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.Nu=t,this.Gu=i,this.SL=!0,this.gi.Ps(),this}getAngleInterval(){return{start:this.Nu,end:this.Gu}}setValue(t){return this.ML&&this.gi.Ia(ln.Eo),this.ML=!0,this.S=t,this.eL||(this.Ak=this.S),this.SL=!0,this.gi.Ps(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.eL=t,this.yL=Math.max(0,i),this.SL=!0,this.gi.Ps(),this}setColorAnimation(t,i=1){return this.hL=t,this.pL=Math.max(0,i),this.SL=!0,this.gi.Ps(),this}setRoundedEdges(t){return this.Sd=t,this.SL=!0,this.gi.Ps(),this}getRoundedEdges(){return this.Sd}setValueIndicators(t){return this.jI=t,this.iL.forEach((t=>{t.dispose()})),this.iL.length=0,this.sL.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.sL.length=0,this.jI.forEach((t=>{const i=new ke({color:t.color}),s=this.Fg.Cc(this.sA).Qe($t).Ke(i).setPointerEvents(!1);this.iL.push(s);const e=this.Fg.wn(this.sA).kr(this.aL).Ke(this.fL).setPointerEvents(!1),h=this.Fg.wn(this.sA).kr(this.aL).Ke(this.fL).setPointerEvents(!1);this.sL.push({start:e,end:h})})),this.CL._s([this.FL,...this.iL]),this.TL._s([this.BL,this.ff,this.DL,this.EL,...this.sL.map((t=>[t.start,t.end])).flat()]),this.SL=!0,this.gi.Ps(),this}getValueIndicators(){return this.jI}setValueIndicatorThickness(t){return this.WI=t,this.SL=!0,this.gi.Ps(),this}getValueIndicatorThickness(){return this.WI}setAutomaticBarColoring(t){return this.tL=!!t,this.SL=!0,this.gi.Ps(),this}getAutomaticBarColoring(){return this.tL}setGlowColor(t){return void 0===t?(this.KI=!1,this._L=void 0):"object"==typeof t&&"auto"in t?(this.qI=t.auto,t.auto&&(this._L=void 0),void 0!==t.alpha&&(this.vL=t.alpha),this.KI=!0):(this._L=t,this.vL=t.getA(),this.qI=!1,this.KI=!0),this.SL=!0,this.gi.Ps(),this}getAutomaticGlowColoring(){return this.qI}setNeedleAlignment(t){return this.mL=t,this.SL=!0,this.gi.Ps(),this}getNeedleAlignment(){return this.mL}setGapBetweenBarAndValueIndicators(t){return this.bL=t,this.SL=!0,this.gi.Ps(),this}getGapBetweenBarAndValueIndicators(){return this.bL}setBarEffect(t){return this.CL.Ls(t),this.gi.Ps(),this}getBarEffect(){return this.CL.Bs()}setLabelEffect(t){return this.TL.Ls(t),this.gi.Ps(),this}getLabelEffect(){return this.TL.Bs()}th(t){var i;if(super.th(t),super.Ug(),this.Ak!==this.S){if(this.eL){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.Ak);this.Ak=this.Ak+i*e+s*this.yL*(this.S-this.Ak),e!==Math.sign(this.S-this.Ak)?this.Ak=this.S:this.gi.Ps(!0)}else this.Ak=this.S;this.SL=!0}let s=this.jI.find((t=>this.Ak>=t.start&&this.Ak<=t.end));if(s||(this.Ak<this.YI.start?s=this.jI.find((t=>t.start===this.YI.start)):this.Ak>this.YI.end&&(s=this.jI.find((t=>t.end===this.YI.end)))),this.wL=this.tL&&s?s.color:this.AL,this.hL){if(this.kL!==this.wL){const i=this.kL.getR(),s=this.kL.getG(),e=this.kL.getB(),h=this.wL.getR(),r=this.wL.getG(),n=this.wL.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.kL=m(i+u*o+c*this.pL*(h-i),s+u*a+c*this.pL*(r-s),e+u*l+c*this.pL*(n-e));const d=Math.abs(h-this.kL.getR()),f=Math.abs(r-this.kL.getG()),A=Math.abs(n-this.kL.getB());d<1&&f<1&&A<1?this.kL=this.wL:this.gi.Ps(!0),this.SL=!0}}else this.kL=this.wL;const e=ul.qg(this.Wh,this.Hg),h=this.Rs.reduce(((t,i)=>{const s=i.Vr(e,this.Nn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(h.right===this.xI.right&&h.bottom===this.xI.bottom&&h.top===this.xI.top&&h.left===this.xI.left||(this.SL=!0,this.xI=h),this.SL){let t=ps,r=ms,n=ps,o=ms;if(new Array(100).fill(0).forEach(((i,s,e)=>{const h=this.Nu+s/e.length*(this.Gu-this.Nu),a=Math.sin(h*Math.PI/180),l=Math.cos(h*Math.PI/180);a<t&&(t=a),a>r&&(r=a),l<n&&(n=l),l>o&&(o=l)})),this.nL?this.FL.Ke(new z({stops:[{offset:0,color:S("#000000")},{offset:1,color:this.kL}],position:{x:.5,y:.5}})):this.FL.Ke(new ke({color:this.kL})),this.KI){const t=this.qI&&s?this.kL:null!==(i=this._L)&&void 0!==i?i:this.gL;this.IL.Ke(new z({stops:[{offset:0,color:t.setA(this.vL)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:R.farthestSide}))}else this.IL.Ke(xe);const a=this.rL(this.YI.start),l=this.rL(this.YI.end);let u=0,c=0;const d=this.gi.er.Lh(a,this.DL._r(),this.DL.Tr()),f=this.gi.er.Lh(l,this.EL._r(),this.EL.Tr());d.x>u&&(u=d.x),d.y>c&&(c=d.y),f.x>u&&(u=f.x),f.y>c&&(c=f.y),this.sL.forEach(((t,i)=>{if(i>=this.jI.length)return;const s=this.jI[i],e=this.rL(s.start),h=this.rL(s.end),r=this.gi.er.Lh(e,t.start._r(),t.start.Tr()),n=this.gi.er.Lh(h,t.end._r(),t.end.Tr());r.x>u&&(u=r.x),r.y>c&&(c=r.y),n.x>u&&(u=n.x),n.y>c&&(c=n.y)}));const A=this.jI.length>0?this.WI:0,g=this.sA.getInnerIntervalPixels();ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,h);const v={x:g.x-(this.Nn.left+this.Nn.right),y:g.y-(this.Nn.bottom+this.Nn.top)-e},y={x:v.x-h.left-h.right,y:v.y-h.top-h.bottom},p={x:this.Nn.left+(v.x+h.left-h.right)/2,y:this.Nn.bottom+(v.y+h.bottom-h.top)/2},m=A+2*this.bL+this.HI/2,b=u+m,x=c+m,M=x+e,w=y.y-(M+x),_=y.x-(b+b),k=Math.max(0,w<_?w:_),C=.5*k,T=.5*C,F=(t+r)*T,I=(n+o)*T,L={x:p.x-I,y:p.y-F},P=k>0;if(this.FL.setVisible(P),this.iL.forEach((t=>t.setVisible(P))),this.PL.setVisible(P),this.LL.setVisible(P),this.IL.setVisible(P),this.ff.setVisible(P),this.BL.setVisible(P),this.DL.setVisible(P),this.EL.setVisible(P),this.sL.forEach((t=>{t.start.setVisible(P),t.end.setVisible(P)})),!P)return;const B={x:p.x-.5*I,y:p.y-.5*F};this.IL.ih(p).Qu(.5*Math.min(y.x,g.y)),this.BL.ih(B).qr(this.oL(this.Ak));let D=this.BL.bc(),E=this.ff.bc();0===D.y&&(D=this.gi.er.Lh(this.BL.en(),this.BL._r(),this.BL.Tr())),0===E.y&&(E=this.gi.er.Lh(this.ff.en(),this.ff._r(),this.ff.Tr())),this.ff.ih({x:B.x,y:B.y-D.y-E.y/4});const O=pA(this.YI,this.Nu,this.Gu,this.Ak,L,C+this.mL*(this.XI/2+this.HI/2)),V=O.angle*(Math.PI/180),N=.5*this.XI,G=Math.cos(V),$=Math.sin(V);this.PL.ph({x:O.x+N*G,y:O.y+N*$}).gh({x:O.x-N*G,y:O.y-N*$}),this.LL.ph({x:O.x+N*G,y:O.y+N*$}).gh({x:O.x-N*G,y:O.y-N*$});const U=vA(L,C,this.Nu,this.Gu,this.HI,this.Sd,!1,!1);this.FL.ou(U).Ci({min:{x:L.x-C,y:L.y-C},max:{x:L.x+C,y:L.y+C}});const Y=L.y+C,j=L.y-C,H=L.x+C,W=L.x-C,[X,Z]=this.YI.start<this.YI.end?[this.YI.start,this.YI.end]:[this.YI.end,this.YI.start],J=C+.5*this.HI+A/2+this.bL,Q=J+A/2;this.jI.forEach(((t,i)=>{var s,e;const h=t.start>=X&&t.end<=Z;this.iL[i].setVisible(h),this.sL[i].start.setVisible(h),this.sL[i].end.setVisible(h);const r=pA(this.YI,this.Nu,this.Gu,t.start,L,Q),n=pA(this.YI,this.Nu,this.Gu,t.end,L,Q),o=vA(L,J,r.angle,n.angle,this.WI,this.Sd,!(0===i),!(i===this.jI.length-1));this.iL[i].ou(o);const a=this.YI.start===t.start||this.YI.end===t.start,l=this.YI.start===t.end||this.YI.end===t.end||this.jI.some((i=>i.start===t.end&&i!==t));this.sL[i].start.ih({x:r.x,y:r.y}).Xl({x:Math.min(1,Math.max(-1,2*(r.x-H)/(W-H)-1)),y:Math.min(1,Math.max(-1,2*(r.y-Y)/(j-Y)-1))}).qr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.rL(t.start)),this.sL[i].end.ih({x:n.x,y:n.y}).Xl({x:Math.min(1,Math.max(-1,2*(n.x-H)/(W-H)-1)),y:Math.min(1,Math.max(-1,2*(n.y-Y)/(j-Y)-1))}).qr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.rL(t.end))}));const K=this.jI.some((t=>t.start<t.end?this.YI.start>=t.start&&this.YI.start<=t.end:this.YI.start<=t.start&&this.YI.start>=t.end)),q=pA(this.YI,this.Nu,this.Gu,this.YI.start,L,K?Q:J-this.bL);this.DL.ih({x:q.x,y:q.y}).Xl({x:Math.min(1,Math.max(-1,2*(q.x-H)/(W-H)-1)),y:Math.min(1,Math.max(-1,2*(q.y-Y)/(j-Y)-1))}).qr(a);const tt=this.jI.some((t=>t.start<t.end?this.YI.end>=t.start&&this.YI.end<=t.end:this.YI.end<=t.start&&this.YI.end>=t.end)),it=pA(this.YI,this.Nu,this.Gu,this.YI.end,L,tt?Q:J-this.bL);this.EL.ih({x:it.x,y:it.y}).Xl({x:Math.min(1,Math.max(-1,2*(it.x-H)/(W-H)-1)),y:Math.min(1,Math.max(-1,2*(it.y-Y)/(j-Y)-1))}).qr(l),this.SL=!1}this.Rs.forEach((t=>t.th(e,this.Nn)))}getMinimumSize(){return{x:150,y:150}}bg(){return[]}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const vA=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,u=s>e,c=Math.sign(s-e),d=-1*c;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=yA(t,i+l,s,e,u);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?yA(h,l,e+180,e+360,u):yA(h,l,e-180,e-360,u),a.push(...r)}const A=yA(t,i-l,e,s,!u);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?yA(h,l,s-180,s-360,u):yA(h,l,s+180,s+360,u),a.push(...r)}return a},yA=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-2:2,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return r.push({x:l,y:u}),r},pA=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:h.x+r*Math.cos(c),y:h.y+r*Math.sin(c),angle:Math.round(u)}};class mA extends gl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.OL=u}setLabelAlignment(t){return this.OL=t,this.Ps(),this}getLabelAlignment(){return this.OL}}class SA extends Xr{constructor(t,i,s,e,h,r,n){let o;super(t,{dn:()=>t.zL?t.zL[this.key].max:void 0,cn:()=>t.zL?t.zL[this.key].min:void 0,An:()=>{}},r,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.VL=[],this.Pf=[],this.NL=8,this.ui=!1,this.P=new Pt,this.chart=t,this.key=e,this.userID=h,this.vs=this.chart.gi.vs.ys(this,{}),this.Hs=n,this.GL=n.qe(t.$L).Ke(this.bi.parallelCoordinateAxisBackgroundFillStyle||xe).Qe($t).setPointerEvents(!1),this.qh=n.wn(t.$L).kr(this.bi.parallelCoordinateAxisTitleFont||this.bi.yAxisTitleFont).Ke(this.bi.parallelCoordinateAxisTitleFillStyle||this.bi.yAxisTitleFillStyle).setPointerEvents(!1).xn(as).Mn(as),this.Fr=this.vs.oA([this.qh]).Ls(i.effectsText),this.MF=n.Ah(t.$L).fh(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(i=>{t.UL(this,i.start,i.end)})),this.MF.addEventListener("pointerenter",(()=>{var t,i;(null===(i=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===i?void 0:i.doubleClickAxis)&&(o=this.chart.engine.setMouseStyle(gr.Point))})),this.MF.addEventListener("pointerleave",(()=>{o=this.chart.engine.restoreMouseStyle(o)})),this.MF.addEventListener("dblclick",(t=>{var i,s;t.defaultPrevented||(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(this.addRangeSelector(),ki(t))})),this.setTitle(e)}setBackgroundFillStyle(t){return this.GL.Ke(t),this.Hs.Ps(),this}getBackgroundFillStyle(){return this.GL.br()}setStrokeStyle(t){const i="function"==typeof t?t(this.MF.co()):t,s=i.getFillStyle();return Pe(s)?(this.YL=s.lut,this.chart.jL=!0):this.YL=void 0,this.MF.fh(i),this.chart.gi.Ps(),this}getStrokeStyle(){return this.MF.co()}setTickStrategy(t,i){return super.Ar(t,i)}getTickStrategy(){return this.Dh}addRangeSelector(){const t=this.Nr(),i=this.Hs.qe(this.chart.$L).Ke(this.bi.parallelCoordinateAxisRangeSelectorFillStyle||this.bi.dataGridScrollBarFillStyle).Qe(this.bi.parallelCoordinateAxisRangeSelectorStrokeStyle||this.bi.dataGridScrollBarStrokeStyle);let s;const e=t=>{var i,e;(null===(e=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===e?void 0:e.drag)&&(s=this.chart.engine.setMouseStyle(gr.Vertical,s))},h=t=>{s=this.chart.engine.restoreMouseStyle(s)};i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),i.addEventListener("pointerdown",(t=>{var n,o;if(!(null===(o=null===(n=this.chart.getUserInteractions().rangeSelectors)||void 0===n?void 0:n.move)||void 0===o?void 0:o.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const u=this.chart.gi.tl(t),c=tt({x:u.engineX,y:u.engineY},this.chart.gi.oi,this.chart.$L),d=this.chart.$L.y.Jt(i.Wi(),10),f=this.chart.$L.y.Jt(i.Xi(),-10);l=c.y<=d?"scaleMin":c.y>=f?"scaleMax":"move",ki(t);let A=t;const g=t=>{if(void 0===this.HL)return;const i=.05*Math.abs(this.vr-this.gr),s=(t.clientX,A.clientX,t.clientY-A.clientY);if(A=t,"move"===l){const t=r.max-r.min,i=this.chart.WL(r.max,this.HL,this).y,e=this.chart.$L.y.Jt(i,-s),h=this.chart.XL(e,this.HL,this);r.max=oi(h,Math.max(this.gr,this.vr),Math.min(this.gr,this.vr)+t),r.min=r.max-t}else if("scaleMax"===l){const t=this.chart.WL(r.max,this.HL,this).y,e=this.chart.$L.y.Jt(t,-s),h=this.chart.XL(e,this.HL,this);r.max=oi(h,r.min+i,Math.max(this.gr,this.vr))}else if("scaleMin"===l){const t=this.chart.WL(r.min,this.HL,this).y,e=this.chart.$L.y.Jt(t,-s),h=this.chart.XL(e,this.HL,this);r.min=oi(h,r.max-i,Math.min(this.gr,this.vr))}this.chart.ZL(),ki(t)},v=r=>{r.pointerId===t.pointerId&&(this.chart.setCursorMode(a),i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),ti.removeEventListener("pointermove",g),ti.removeEventListener("pointerup",v),s=this.chart.engine.restoreMouseStyle(s))};i.removeEventListener("pointermove",e),i.removeEventListener("pointerleave",h),ti.addEventListener("pointermove",g),ti.addEventListener("pointerup",v)})),i.addEventListener("dblclick",(t=>{var i,s;if(!(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.dispose)||void 0===s?void 0:s.doubleClick))return;const e=this.VL.indexOf(r);e>=0&&this.VL.splice(e,1),r.shape.dispose(),this.chart.ZL(),ki(t)}));const r={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i};this.VL.push(r),this.chart.ZL();const n={setInterval:(t,i)=>(r.min=Math.min(t,i),r.max=Math.max(t,i),this.chart.ZL(),n),setPointerEvents:t=>(i.setPointerEvents(t),n),dispose:()=>{const t=this.VL.indexOf(r);return t>=0&&(this.VL.splice(t,1),this.chart.ZL()),n}};return n}addCustomTick(){const t=new mA((()=>this.chart.gi.Ps()),(()=>{const i=this.Pf.indexOf(t);i>=0&&this.Pf.splice(i,1)}),(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickLength,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickPadding,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelRotation,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Pf.push(t),this.chart.gi.Ps(),t}getCustomTicks(){return[...this.Pf]}th(t){this.HL=t.parallelAxisIndex;const i=Math.min(this.gr,this.vr),s=Math.max(this.gr,this.vr);for(const[i,s]of this.Eh)for(const[,e]of s){const s=t.ticksInfo.get(e);s&&(t.plotAxisLines.add({positions:[s.positionTicklineStart,s.positionTicklineEnd]},{lineStyle:i.Ph.tickStyle}),e.Or.ih(s.labelPosition).Xl(s.labelAlignment).Cr(s.labelRotation).Gl(s.labelOffset.x,s.labelOffset.y))}this.Pf.forEach((e=>{if(!e.ci||e.S<i||e.S>s)return;const h=this.JL(t.parallelAxisIndex,t.halfAxisThickness,e.S,e.Mv,e._v,e.OL);t.plotAxisLines.add({positions:[h.positionTicklineStart,h.positionTicklineEnd]},{lineStyle:e.xv}),t.plotAxisText.add().ih(h.labelPosition).Xl(h.labelAlignment).Ke(e.kv).kr(e.Cv).qr(e.uo(e.S)).Cr(e.uf).setPointerEvents(e.li)})),this.MF.ph({x:t.parallelAxisIndex,y:0}).gh({x:t.parallelAxisIndex,y:1}),this.qh.ih({x:t.parallelAxisIndex,y:this.chart.$L.y.Jt(0,-(t.halfAxisThickness+this.NL))}).Cr(this.getTitleRotation()).Xl({x:0,y:1});const e=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.$L.x.Jt(t.parallelAxisIndex,-1.2*t.gA);this.GL.ih({x:e,y:0}).X({x:t.parallelAxisIndex-e,y:1});const h=this.chart.$L.ri();this.VL.forEach((i=>{const s=this.chart.WL(i.min,t.parallelAxisIndex,this),e=this.chart.WL(i.max,t.parallelAxisIndex,this),r={x:t.parallelAxisIndex-10*h.x*.5,y:s.y},n=t.parallelAxisIndex+10*h.x*.5,o=e.y;i.shape.ih(r).X({x:n-r.x,y:o-r.y})}))}N(){this.GL.dispose(),this.qh.dispose(),this.MF.dispose(),this.VL.forEach((t=>t.shape.dispose())),this.VL.length=0,this.Ir(),this.Zr(),this.ui=!0,this.P.D("dispose",{})}isDisposed(){return this.ui}JL(t,i,s,e,h,r){const n=this.chart.$L.Jt({x:t,y:(s-this.gr)/(this.vr-this.gr)},{x:0-i,y:0}),o=this.chart.$L.Jt(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,labelPosition:this.chart.$L.Jt(o,{x:-h,y:0}),labelAlignment:{x:1,y:r}}}Ur(t){const i=this.MF.co();return{halfAxisThickness:_h(i)?i.getThickness()/2:0}}Wr(t,i,s,e,h){const r=i.Ph,n=this.getInterval();return{...this.JL(e.parallelAxisIndex,h.halfAxisThickness,t,r.getTickLength(),r.getTickPadding(),2*(t-n.start)/(n.end-n.start)-1),keyValue:t,tickLevel:i,labelText:s,labelRotation:r.labelRotation,labelOffset:{x:0,y:0}}}tn(t,i){return new Zr(i,t,this.Hs,this.chart.$L)}Jr(t,i,s){const e=this.qh&&this.qh.en().length>0&&this.getTitleFillStyle()!==xe?this.qh.Vr().bc():{x:0,y:0};let h=0;this.Eh.forEach(((t,i)=>{const s=i.Ph.tickLength+i.Ph.tickPadding;t.forEach((t=>{if(!t.Or.getVisible())return void(h=Math.max(h,s));const i=s+t.Or.Vr().bc().x;h=Math.max(h,i)}))}));const r=this.Pf.reduce(((t,i)=>Math.max(t,i.ci?this.chart.gi.er.Lh(i.uo(i.S),i.Cv,i.uf).x+i.Mv+i._v:0)),0);h=Math.max(h,r);const n=e.y+this.NL;h=Math.max(h,e.x/2);const o=h;return{gA:h,QL:n,KL:e.x,yf:o,ticksInfo:i,updatedTicks:s}}ir(){return this.chart.$L}vn(t,i){return Ye(t,i,this.oi)}mn(t,i,s){return{start:t,end:i}}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}setPointerEvents(t){return this.P.setPointerEvents(t),this}getPointerEvents(){return this.P.getPointerEvents()}}class bA extends Vu{constructor(t,i,s,e,h){super(t,i,s,e),this.Es="Parallel Coordinate Series",this.qL=!1,this.P=new Pt,this.chart=t;const r=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.tP=Zi(this.bi.parallelCoordinateChartSeriesColor,r)||(()=>{const t=Zi(this.bi.lineSeriesStrokeStyle,r).getFillStyle();return(Ce(t)?t.getColor():void 0)||m(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this.chart.iP()})),this.addEventListener("dispose",(t=>{this.chart.iP()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.sP;return this.sP=this.chart.eP(t),i&&this.chart.hP(),this}getData(){return this.sP}setColor(t){const i="function"==typeof t?t(this.tP):t;return i===this.tP||(this.tP=i,this.chart.gi.Ps(),this.chart.rP(this)),this}getColor(){return this.tP}Sv(){return this.getAutoScrollingEnabled()}cv(){}th(){}dv(){}eh(){return{fill:new ke({color:this.tP})}}av(){return super.av()&&!this.qL}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}class xA extends Ll{constructor(t,i,s,e,h,r,n){var o,a,l;super(t,i,s,i.jg("parallelAxisChart bg",0),e,i.gi.bi.parallelCoordinateChartBackgroundFillStyle||i.gi.bi.chartXYBackgroundFillStyle,i.gi.bi.parallelCoordinateChartBackgroundStrokeStyle||i.gi.bi.chartXYBackgroundStrokeStyle,i.gi.bi.parallelCoordinateChartTitleFont||i.gi.bi.chartXYTitleFont,i.gi.bi.parallelCoordinateChartTitleFillStyle||i.gi.bi.chartXYTitleFillStyle,i.gi.bi.parallelCoordinateChartTitleShadow||i.gi.bi.chartXYTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.axes=[],this.nP=!0,this.oP=os(),this.aP=new Map,this.lP=this.bi.parallelCoordinateChartSeriesColorUnselected||m(255,255,255,30),this.uP=d({resolution:32}),this.jL=!1,this.cP=!1,this.dP=!0,this.fP=!1,this.AP=!1,this.gP=!1,this.vP=!1,this.ma=t=>{this.$L.X(t.engineWidth,t.engineHeight)},this.P=new Pt,this.hk=i.Rm("parallelAxisChart series",0),this.yP=i.Rm("parallelAxisChart labels",1),this.Wh.qr("Parallel Coordinate Chart"),this.gi.Ia(ln.Vo),this.$L=this.Pg.d2({scaleXYConstructor:J}).ii(0,1),this.Yg(h,this.$L),this.xy=this.Fg.qe(this.$L).ih({x:0,y:0}).X({x:0,y:1}).Ke(this.bi.parallelCoordinateChartSeriesBackgroundFillStyle||this.bi.chartXYSeriesBackgroundFillStyle).Qe($t).setPointerEvents(!0),this.My=this.Fg.qe(this.$L).ih({x:0,y:0}).X({x:0,y:1}).Ke(xe).Qe(this.bi.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.bi.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.by(this.xy,this.My),this.setSeriesBackgroundEffect(!1),this.pP=new wh({thickness:null!==(a=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new Te}),this.mP=new wh({thickness:null!==(l=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==l?l:2,fillStyle:new ke({color:this.bi.parallelCoordinateChartSeriesColorUnselected})}),this.SP=this.oP.Zi(this.hk.bA(this.$L)).fh(this.pP),this.SP.cc=5e4,this.bP=this.hk.bA(this.$L).fh(this.bi.parallelCoordinateChartPointedSeriesLineStyle||Zi(this.bi.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.xP=new Za((()=>this.yP.wn(this.$L))),this.MP=new yl((()=>this.yP.bA(this.$L).setPointerEvents(!1)),((t,i,s)=>(t.zi().fh(s.lineStyle),i.map((({positions:i})=>t.jo().MA(i[0],i[1]))))));const u=i.Um(),c=li(n?n.cursorBuilder:void 0,fu);this.Ym=IA(this,u,c.fm(u,this.uiScale,this.uiScale,ri,this.bi),this,"show-nearest",MA,(()=>0)),this.addEventListener("resize",this.ma),void 0!==(null==n?void 0:n.legend)&&this.legend.setOptions(n.legend)}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=fu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}setUnselectedSeriesColor(t){return this.lP="function"==typeof t?t(this.lP):t,this.mP=new wh({thickness:this.getSeriesStrokeThickness(),fillStyle:new ke({color:this.lP})}),this.gi.Ps(),this}getUnselectedSeriesColor(){return this.lP}setPointedSeriesStrokeStyle(t){return this.bP.fh(t),this.gi.Ps(),this}getPointedSeriesStrokeStyle(){return this.bP.co()}setSpline(t,i){return t?this.uP._({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.uP._(void 0),this.gi.Ps(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.wP(),s=new SA(this,this.bi,!this.zh,t.key,t.id,i,this.yP),e=()=>{this.dP=!0};s.addEventListener("visiblechange",e),s.addEventListener("dispose",(()=>s.removeEventListener("visiblechange",e))),this.axes.push(s)})),e.forEach((t=>{t.N();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this.dP=!0,this.zL=void 0,this.gi.Ps(),this}getAxis(t){const i=this._P(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this._P(t)}addSeries(t){var i,s;const e=new bA(this,this.my,this.bi,this.gi.vs,t);return super.wy(e,{...t,legend:{...null==t?void 0:t.legend,show:null!==(s=null===(i=null==t?void 0:t.legend)||void 0===i?void 0:i.show)&&void 0!==s&&s}}),this.AP=!0,this.zL=void 0,this.gi.Ps(),e}setSeriesStrokeThickness(t){return this.pP=this.pP.setThickness(t),this.mP=this.mP.setThickness(t),this.SP.fh(this.pP),this.gi.Ps(),this}getSeriesStrokeThickness(){return this.pP.getThickness()}setLUT(t){return this.Sf=t,this.Sf&&0===this.Sf.lut.units.length&&(this.Sf.lut=this.Sf.lut.setUnits(this.Sf.axis.getTitle())),this.Rs.forEach((t=>{t.mg()&&t.add(this)})),this.vP=!0,this.Rs.forEach((t=>t.Os())),this.gi.Ps(),this}th(t){super.th(t);const i=this.axes.filter((t=>t.getVisible()));this.$L.ti(0,i.length-1),this.xy.X({x:i.length-1,y:1}),this.My.X({x:i.length-1,y:1});const s=void 0===this.zL;if(!this.zL){const t={};i.forEach((i=>{t[i.key]={min:ps,max:ms}})),this.vy.forEach((i=>{i.sP&&Object.entries(i.sP).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.zL=t}if(this.gP||this.fP||this.AP){const t=i.map(((t,i)=>t.VL));this.vy.forEach((s=>{const e=s.sP;if(!e)return;let h=!1;for(let s=0;s<i.length;s+=1){const r=i[s],n=t[s],o=void 0!==n.find((t=>Fs(e[r.key],t.min,t.max)));if(n.length>0&&!o){h=!0;break}}s.qL=h}));const s=this.vy.filter((t=>!t.qL));this.P.D("seriesselect",{selectedSeries:s})}for(const t of this.vy)t.cv();for(const t of this.vy)t.th();super.Ug();const e=this.gi.$s(this.xy)||void 0!==this.vy.find((t=>t.getPointed()))?this.kP():void 0;this.Ym.th(!1,this.vy,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.gi.Fa();if(t.length>1&&i){const t=this.gi.tl(i);this.Ym.v_.im({x:t.engineX,y:t.engineY},this.gi.oi)}}});const h=ul.qg(this.Wh,this.Hg),r=this.Rs.reduce(((t,i)=>{const s=i.Vr(h,this.Nn);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}}),{top:0,bottom:0,left:0,right:0});if(ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,r),i.length>=2){const t=this.xP.zA(),e=this.MP.zA(),n=i.map(((i,s)=>(i.gn(),i.Vr({plotAxisLines:e,plotAxisText:t,physicalAxisSize:this.$L.y.Mt(),parallelAxisIndex:s}))));this.$L.Kt([this.nt.left+this.Nn.left+n[0].yf+r.left,this.nt.right+this.Nn.right+n[n.length-1].KL/2+r.right]),this.$L.qt([this.nt.bottom+this.Nn.bottom+n.reduce(((t,i)=>Math.max(t,i.QL)),0)+r.bottom,this.nt.top+this.Nn.top+h+r.top]),n.forEach(((t,s)=>i[s].th(t))),t.finishPlot(),e.finishPlot(),(s||this.jL)&&i.forEach(((t,i)=>{if(!t.YL)return;const s=t.YL.steps.map((s=>({...s,value:this.WL(s.value,i,t).y}))),e=t.YL.setSteps(s);t.MF.fh((t=>t.setFillStyle(new Le({lookUpProperty:"y",lut:e}))))}));const o=this.dP||this.fP||this.nP||this.uP.o;o&&(this.SP.zi(),this.oP.zi(),this.aP.clear(),this.vy.forEach((t=>{const s=t.sP;if(!t.getVisible()||!s)return;const e=this.CP(t,s,i,this.SP,this.oP);this.aP.set(t,e),t.Cs(e)}))),(o||this.gP||this.vP||this.fP)&&this.TP(this.vy),!o&&this.AP&&this.vy.forEach((t=>{if(t.ds.length>0)return;const s=t.sP;if(!t.getVisible()||!s)return;const e=this.CP(t,s,i,this.SP,this.oP);this.aP.set(t,e),t.Cs(e),this.TP([t])})),this.vy.find((t=>t.sP&&Object.keys(t.sP).length>0))&&(this.cP=!0)}const n=1===(null==e?void 0:e.length)?e[0]:void 0;(n!==this.FP||this.fP)&&(this.bP.zi(),n&&n.series.sP?(this.CP(n.series,n.series.sP,i,this.bP,void 0),this.SP.fh(this.mP)):this.SP.fh(this.pP));const o=c(this.$L.x.bt(),this.$L.y.bt(),this.$L.x.Mt(),this.$L.y.Mt());this.hk.Cm(o),this.Rs.forEach((t=>t.th(h,this.Nn)));for(const t of this.vy)t.dv();this.nP=!1,this.gP=!1,this.dP=!1,this.fP=!1,this.AP=!1,this.vP=!1,this.uP.o=!1,this.jL=!1,this.FP=n}TP(t){const i=this.Sf&&{lut:this.Sf.lut,key:this.Sf.axis.key};t.forEach((t=>{const s=t.sP,e=this.aP.get(t);if(!s||!e)return;let h;if(t.qL)h=this.lP;else if(i){const t=s[i.key],e=this.zL&&this.zL[i.key];h=i.lut.getColors(t,e)}else h=t.tP;e.forEach((t=>t.$I(h)))}))}iP(){this.fP=!0,this.gi.Ps()}hP(){this.cP&&this.gi.Ia(ln.Eo),this.fP=!0,this.gi.Ps()}_P(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}wP(){return K.d1({scale1DConstructor:W,dimension:"x"}).H(0,1)}eP(t){if(this.zL=void 0,this.gi.Ps(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const h=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!h)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[h]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}UL(t,i,s){this.nP=!0,this.gi.Ps()}WL(t,i,s){return{x:i,y:(t-s.oi.G)/(s.oi.$-s.oi.G)}}XL(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}rP(t){this.vP=!0,this.gi.Ps()}ZL(){this.gP=!0,this.gi.Ps()}getSeries(){return this.vy}bg(){return[this]}Us(){return this.Sf?{lut:this.Sf.lut}:void 0}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.N())),this.Ym.N(),this.hk.N(),this.yP.N(),this}CP(t,i,s,e,h){const r=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],u=this.WL(l,o,a),c=this.uP.C();if(c){if(void 0!==n){const i=c.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,c=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(u.x-n.x),y:n.y+s*(u.y-n.y)},o={x:n.x+l*(u.x-n.x),y:n.y+c*(u.y-n.y)},d=e.jo();h&&h.Qi(d,t),r.push(d),d.MA(i,o)}s=c}}}else if(void 0!==n){const i=e.jo();h&&h.Qi(i,t),r.push(i),i.MA(n,u)}n=u}return r}kP(){const t=this.getCursorMode(),i=this.gi.Fa();if(t&&i){const s=this.gi.tl(i),e=tt({x:s.engineX,y:s.engineY},this.gi.oi,this.$L),h=Math.round(e.x),r=this.axes.filter((t=>t.getVisible()))[h];if(!r)return;const n=r.key,o=ts(this.vy.map((t=>{if(!t.sP||!t.av())return;const i=t.sP[n],s=this.WL(i,h,r);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.$L,resultTable:s,resultTableScale:this.$L},value:i,series:t,axis:r}})));return"show-nearest"===t?[o.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||ti.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}setUserInteractions(t){return this.ah=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return Kt({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.ah)}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const MA=(t,i,s)=>{if(s.length>1)return[[{text:s[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...ts(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return kA(t,[[t.series,"",$e(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],h=[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const r=s[i.key];if(void 0===r)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};h.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(r),font:n}])})),h};class wA extends al{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,e,h,r),this.legend=new rl(Ja,this,this.Rg,this.sA),this.legend.setOptions({position:sl.LeftTop,autoHideThreshold:1,...n}),null===(o=this.Rs)||void 0===o||o.push(this.legend)}add(t){return t instanceof QA?(t.getCells().forEach((t=>{t.panel instanceof ll&&this.add(t.panel)})),this.gi.Ps(),this):(this.legend.add(t),this.gi.Ps(),this)}getMinimumSize(){return super.getMinimumSize()}}const _A=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,kA=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},CA=t=>{var i,s;const e="series"in t?t.series:"slice"in t?t.slice:"bar"in t?t.bar:void 0,h=e&&il(e)&&e.Us(),r="x"in t&&t.x,n="y"in t&&t.y,o="z"in t&&t.z,a="color"in t&&t.color,l=null!==(s=null!==(i="lookupValue"in t?t.lookupValue:void 0)&&void 0!==i?i:"intensity"in t?t.intensity:void 0)&&void 0!==s?s:"value"in t?t.value:void 0;if(void 0!==l&&h&&"value"===h.lookUpProperty)return h.lut.getColors(l,h.valueRange);if(void 0!==r&&!1!==r&&h&&"x"===h.lookUpProperty)return h.lut.getColors(r,TA(e)?{min:e.getXMin(),max:e.getXMax()}:void 0);if(void 0!==n&&!1!==n&&h&&"y"===h.lookUpProperty)return h.lut.getColors(n,TA(e)?{min:e.getYMin(),max:e.getYMax()}:void 0);if(void 0!==o&&!1!==o&&h&&"z"===h.lookUpProperty)return h.lut.getColors(o,FA(e)?{min:e.getZMin(),max:e.getZMax()}:void 0);if(a)return"number"==typeof a?M(a):a;if(e){const t=e.eh(),i=ji(e.chart.getTheme(),!0,t);if(Ce(i))return i.getColor()}},TA=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),FA=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),IA=(t,i,s,e,h,r,n)=>{let o,a,l,u=h,c=t.getTheme().cursorDynamicBehavior,d=r,f=null,A=!0;e&&(A=!1,e.seriesBackground.addEventListener("pointerenter",(()=>{var i;A=!0,t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(i=v[3])&&void 0!==i?i:{}))?g():t.gi.Ps())})),e.seriesBackground.addEventListener("pointerleave",(()=>{var i;A=!1,t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(i=v[3])&&void 0!==i?i:{}))?g():t.gi.Ps())})),e.seriesBackground.addEventListener("pointermove",(()=>{var i;A=!0,t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(i=v[3])&&void 0!==i?i:{}))?g():t.gi.Ps())})),e.addEventListener("seriesadd",(i=>{const s=i.series;s.addEventListener("pointerenter",((i,e)=>{var h;s.av()&&(a||t.gi.Ps(),o=e||void 0),t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(h=v[3])&&void 0!==h?h:{}))?g():t.gi.Ps())})),s.addEventListener("pointermove",((i,e)=>{var h;s.av()&&(a||t.gi.Ps(),o=e||void 0),t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(h=v[3])&&void 0!==h?h:{}))?g():t.gi.Ps())})),s.addEventListener("pointerleave",(i=>{var e;s.av()&&(a||t.gi.Ps(),o=void 0),t.getCursorMode()&&(a&&v&&!("explicitTarget"in(null!==(e=v[3])&&void 0!==e?e:{}))?g():t.gi.Ps())}))})));const g=()=>{if(l&&(ti.cancelAnimationFrame(l),l=void 0),!v)return;const t=v;l=ti.requestAnimationFrame((()=>y.th(...t)))};let v;const y={setCursor:i=>(i(s),t),getCursor:()=>s,setCursorMode:i=>(u=i,t.gi.Ps(),t),getCursorMode:()=>u,setCustomCursor:t=>{a=t},qm:i=>{c=i,t.gi.Ps()},setCursorFormatting:i=>(d=i,t.gi.Ps(),t),getCursorFormatting:()=>d,N:()=>{s.dispose(),i.N()},th:(i,e,h,r)=>{l&&(ti.cancelAnimationFrame(l),l=void 0),v=[i,e,h,r];const g=t.gi.Fa();let y=[];if((null==r?void 0:r.explicitTarget)&&u)y=Array.isArray(r.explicitTarget)?r.explicitTarget:[r.explicitTarget];else if(!i&&u){const t=e.find((t=>t.getPointed())),i=g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Fs?t.Fs(g):void 0;if(o=i||o,o&&"show-all"!==u&&"show-all-interpolated"!==u)y=[o];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((A||void 0!==t)&&g&&h){for(const t of e){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const i=h(t,g,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>n(t,g)-n(i,g))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&h){const i=h(t,g,u);i&&(y=[i])}}y=ts(y.map((t=>ds(t))));const p=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),m=y[0],S=y.length>0?y:void 0;if(m!==f&&g&&(a&&a({hit:m,hits:S,mouseLocation:g}),t.P.D("cursortargetchange",{hit:m,hits:S,mouseLocation:g}),f=m),a)s.getVisible()&&(s.setVisible(!1),s.Vr().th());else{let i=!1;if(y&&y.length>0){const e=d(t,y[0],y);s.setVisible(!0).setPosition(...p(y,y.map((t=>{const i=t.cursorPosition;if(c){const s=CA(t);void 0!==s&&(i.pointMarkerFillStyle=c.pointMarkerFill&&c.pointMarkerFill(s),i.pointMarkerStrokeStyle=c.pointMarkerStroke&&c.pointMarkerStroke(s));const e=(t=>{if(pt(t))return void 0!==t.size?t.size:t.series instanceof Oc?t.series.getPointSize():void 0})(t);if(void 0!==e&&(i.pointMarkerSize=c.pointMarkerSize&&c.pointMarkerSize(e)),!1!==c.matchPointMarkerShape){const s=(t=>{const i=pt(t)&&t.series instanceof Oc?t.series.getPointShape():void 0;return void 0===i||Ph(i)?void 0:i})(t);void 0!==s&&(i.pointMarkerShape=s)}}return i})))).setResultTable((t=>t.setContent(e))),i=!0}else s.getVisible()&&(s.setVisible(!1).setPosition().setResultTable((t=>t.setContent([]))),i=!0);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(y),i&&(s.Vr(),s.th())}},solveNearest:(i,s,e,h)=>{const r=i||t.gi.Fa();if(!r)return[];let o=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&o.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(o.sort(((t,i)=>n(t,r)-n(i,r))),o.length=1)}return o=ts(o.map((t=>ds(t)))),o},v_:s};return y},LA=(t,i,s)=>Ws(i,Hs(se(.5*(t.Yu()+t.Gt())*Math.PI/180),s)),PA=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.tC.ih(s);else{const t=Ws(s,Hs(se(.5*(o+u)*Math.PI/180),r*c));l.tC.ih(t)}l.tC.Ju(o).gh(u).Ku(e).qu(e).tc(h),o=u}};class BA extends ll{constructor(t,i,s,e,h,r,n){var o;super(t,i,s,i.jg("pieChart bg",0),e,i.gi.bi.pieChartBackgroundFillStyle,i.gi.bi.pieChartBackgroundStrokeStyle,i.gi.bi.pieChartTitleFont,i.gi.bi.pieChartTitleFillStyle,i.gi.bi.pieChartTitleShadow,r,null===(o=null==n?void 0:n.legend)||void 0===o?void 0:o.customLegend),this.mk=[],this.Sk=xd.SortByName,this.Ou=0,this.Bk=this.bi.pieChartSliceFillStylePalette,this.Dk=this.bi.pieChartSliceStrokeStyle,this.bk=!0,this.Ek=this.bi.pieChartSliceLabelFont,this.Rk=this.bi.pieChartSliceLabelFillStyle,this.xk=this.bi.pieChartSliceLabelShadow,this.Mk=0,this.IP=!1,this.LP=20,this.Ck=!0,this.Ik=!0,this.Tk=t=>{const i=this.mk.indexOf(t);i>=0&&(this.mk.splice(i,1),this.Fk())},this.P=new Pt,this.gi.Ia(ln.Mo),this.Lk=i.Rm("pieChart bottom",0),this.Pk=i.Rm("pieChart top",1),this.Wh.qr("Pie Chart"),this.Yg(h,this.sA),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let i=0;i<t.length;i+=1)t[i].setExploded(!1)})()}));const a=i.Um(),l=li(n?n.cursorBuilder:void 0,lu);this.Ym=IA(this,a,l.fm(a,this.uiScale,this.uiScale,ri,this.bi),void 0,"show-pointed",DA,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u={backgroundVisible:!0,...null==n?void 0:n.legend};this.legend.setOptions(u)}setCursor(t){return this.Ym.setCursor(t),this}getCursor(){return this.Ym.getCursor()}setCursorMode(t){return this.Ym.setCursorMode(t),this}getCursorMode(){return this.Ym.getCursorMode()}setCustomCursor(t){return this.Ym.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Ym.qm(t),this}setCursorFormatting(t){return this.Ym.setCursorFormatting(t),this}getCursorFormatting(){return this.Ym.getCursorFormatting()}addCursor(t=lu){const i=this.Dg(),s=t.fm(i,this.uiScale,this.uiScale,this.Ig(i),this.bi);return this.$g(s),s}addSlice(t,i){const s=new Od(this.Mk,this.Lk,this.Pk,this,this.sA,this.Tk,this.bi,this.gi.vs);this.Mk+=1,s.setName(t);const e=this.zh;return this.zh=!1,s.setValue(i),this.zh=e,s.setEffect(this.Ck),this.zk(s),this.mk.push(s),this.Fk(),s.setHighlightOnHover(this.bk),this.Rs.forEach((t=>{t.mg()&&t.bu(s)})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.mk}setMultipleSliceExplosion(t){return this.IP=t,this}getMultipleSliceExplosion(){return this.IP}setInnerRadius(t){return this.Ou=t,this.gi.Ps(),this}getInnerRadius(){return this.Ou}setSliceExplosionOffset(t){return this.LP=t,this.gi.Ps(),this}getSliceExplosionOffset(){return this.LP}setLUT(t){return this.Sf=t,this.gi.Ps(),this}setSliceFillStyle(t){this.Bk=t;for(let t=0;t<this.mk.length;t+=1)this.zk(this.mk[t]);return this.gi.Ps(),this}getSliceFillStyle(){return this.Bk}setSliceStrokeStyle(t){this.Dk="function"==typeof t?t(this.Dk):t;for(let t=0;t<this.mk.length;t+=1)this.zk(this.mk[t]);return this.gi.Ps(),this}getSliceStrokeStyle(){return this.Dk}setSliceEffect(t){return this.Ck=t,this.mk.forEach((i=>i.vs.Ss.Ls(t))),this.gi.Ps(),this}getSliceEffect(){return this.Ck}setSliceSorter(t){return this.Sk=t,this.mk=this.mk.sort(this.Sk),this.gi.Ps(),this}getSliceSorter(){return this.Sk}setLabelFillStyle(t){this.Rk="function"==typeof t?t(this.Rk):t;for(let t=0;t<this.mk.length;t+=1)this.zk(this.mk[t]);return this.gi.Ps(),this}getLabelFillStyle(){return this.Rk}setLabelShadow(t){return this.xk=t,this.gi.Ps(),this}getLabelShadow(){return this.xk}setLabelFont(t){this.Ek="function"==typeof t?t(this.Ek):t;for(let t=0;t<this.mk.length;t+=1)this.zk(this.mk[t]);return this.gi.Ps(),this}getLabelFont(){return this.Ek}setLabelEffect(t){return this.Ik=t,this.mk.forEach((i=>i.vs.ps.Ls(t))),this.gi.Ps(),this}getLabelEffect(){return this.Ik}setLabelFormatter(t){return this.Ok=t,this.gi.Ps(),this}getLabelFormatter(){return this.Ok}setSliceHighlightOnHover(t){return this.bk=t,this.mk.forEach((i=>i.setHighlightOnHover(t))),this}th(t){super.th(t),super.Ug();const i=ul.qg(this.Wh,this.Hg),s=this.Rs.reduce(((t,s)=>{const e=s.Vr(i,this.Nn);return{top:Math.max(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.max(t.right,e.right)}}),{top:0,bottom:0,left:0,right:0});ul.tv(this.Wh,this.Hg,this.uiScale.ri(),this.Nn,s);const e=r(this.sA.x.getInnerInterval()-(this.Nn.left+this.Nn.right),this.sA.y.getInnerInterval()-(this.Nn.bottom+this.Nn.top+i)),h=r(e.x-s.left-s.right,e.y-s.top-s.bottom),n=r(this.Nn.left+(e.x+s.left-s.right)/2,this.Nn.bottom+(e.y+s.bottom-s.top)/2);if(this.Sf){const t=this.Sf;this.mk.forEach((i=>{this.zk(i,new ke({color:t.getColors(i.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.mk.length;t+=1){const i=Math.abs(this.mk[t].getAnimatedValue())>0;this.mk[t].tC.setVisible(i),this.mk[t].Or.setVisible(i)}this.mk=this.mk.sort(this.Sk);const o=this.mk.filter((t=>Math.abs(t.getAnimatedValue())>0));let a=0;for(let t=0;t<o.length;t+=1)a+=Math.abs(o[t].getAnimatedValue());const l=[];for(let t=0;t<o.length;t+=1)l.push((u=Math.abs(o[t].getAnimatedValue()))>0?u/a:0);var u;for(let t=0;t<o.length;t+=1){const i=o[t];i.Or.qr(this.Ok(i,l[t])).Vr()}this.Ym.th(!1,this.mk,((t,i,s)=>{const e=l[o.indexOf(t)]||0,h=this.gi.tl(i);return{cursorPosition:{pointMarker:{x:h.engineX,y:h.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:h.engineX,y:h.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Rs.forEach((t=>t.th(i,this.Nn))),this.Vk(o,l,n,h)}zk(t,i=this.Bk(t.index,t)){t.setStyle(i,this.Dk,this.Rk,this.Ek,this.xk)}Fk(){this.mk=this.mk.sort(this.Sk),this.gi.Ps()}bg(){return this.mk}dispose(){return super.dispose(),this.mk.slice().forEach((t=>t.dispose())),this.Ym.N(),this.Pk.N(),this.Lk.N(),this}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const DA=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class EA extends BA{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Ok=Md.NamePlusValue,this.jk=[],this.PP=40,this.BP=5,this.DP=10,this.Hk=this.bi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Hk=t;for(let t=0;t<this.jk.length;t+=1)this.jk[t].fh(this.Hk);return this.gi.Ps(),this}getLabelConnectorStyle(){return this.Hk}setLabelSliceOffset(t){return this.PP=t,this.gi.Ps(),this}getLabelSliceOffset(){return this.PP}setLabelConnectorGapStart(t){return this.BP=t,this.gi.Ps(),this}getLabelConnectorGapStart(){return this.BP}setLabelConnectorEndLength(t){return this.DP=t,this.gi.Ps(),this}getLabelConnectorEndLength(){return this.DP}Vk(t,i,s,e){const h=this.Ek.getSize(),n=this.PP,o=this.DP,a=this.BP,l=Math.min(this.LP,n-a);let u=0;if(1===t.length)u=t[0].Or.bc().x;else for(let i=0;i<t.length;i+=1)u=Math.max(u,t[i].Or.bc().x);const c=Math.max(.5*(Math.min(e.x-2*u-2*o,e.y-2*h)-2*n),0);if(c<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);PA(t,i,s,r,this.Ou,l),t.forEach((t=>t.Or.setVisible(!1))),this.jk.forEach((t=>t.setVisible(!1)))}else{PA(t,i,s,c,this.Ou,l);let e=90;const h=t.map(((t,h)=>{const r=360*i[h],a=e-r,l=se(te(.5*(e+a))),u=l.x>=0?-1:1,d=Ws(Ws(s,Hs(l,c+n)),{x:u*-o,y:0});e=a;const f={x:u,y:0};t.Or.ih(d).Xl(f),t.Or.Vr();const A=t.Or.yc();return{position:d,alignment:f,shape:t.Or,boundaries:A,sliceAngleVec:l,slice:t}})),u=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=u[u.length-1];s&&!1!==ks([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(u.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.jk.length;t+=1)this.jk[t].setVisible(!1);u.forEach(((t,i)=>{const e=t.slice.tC,h=LA(e,s,c+a+l*t.slice.getAnimatedExplosion()),n=((t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return r(h,t)})(t.position.y,h,s),o=t.position;this.Wk([h,n,o])}))}}getMinimumSize(){return r(500,300)}Wk(t){let i;for(let t=0;t<this.jk.length;t+=1)if(!this.jk[t].getVisible()){i=this.jk[t].setVisible(!0);break}void 0===i&&(i=this.Pk.Nv(this.sA,void 0,[Al.InternalUI]).fh(this.Hk).setPointerEvents(!1),this.jk.push(i)),i.zi().bu(t)}}class RA extends BA{constructor(){super(...arguments),this.Ok=Md.Name,this.EP=.5}Vk(t,i,s,e){const h=this.LP,r=Math.max(0,.5*Math.min(e.x,e.y)-h);PA(t,i,s,r,this.Ou,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.tC,o=e.Or,a=this.Ou/100,l=((1-a)*this.EP+a)*r+e.getAnimatedExplosion()*h,u=LA(n,s,l);o.ih(u).Ul(0).Hl(0)}}getMinimumSize(){return r(200,200)}setLabelPosition(t){return this.EP=t,this.gi.Ps(),this}getLabelPosition(){return this.EP}}const OA={LabelsOnSides:EA,LabelsInsideSlices:RA},zA=100001,VA=200002,NA=300002,GA=400001,$A=510001,UA=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=$A+i*o;let l=0;return{RP:()=>{const i=t.OP("dashboard ui",a+l);return l+=1,i},zP:()=>t.OP("dashboard legend",51e4),VP:i=>{const a=1+i*s,l=zA+i*e,u=VA+i*h,c=NA+i*r,d=GA+i*n,f=$A+i*o;let A=0;return{gi:t,jg:(i,s)=>{const e=a+s;return t.OP(i,e)},Em:(i,s)=>{const e=l+s;return t.OP(i,e)},l_:(i,s)=>{const e=u+s;return t.OP(i,e)},Rm:(i,s)=>{const e=c+s;return t.OP(i,e)},Dm:(i,s,e)=>{const h=c+s;return t.NP(i,h,e)},Zg:(i,s)=>{const e=d+s;return t.OP(i,e)},Eg:i=>{const s=f+A,e=t.OP(i,s);return A+=1,e},Og:()=>t.OP("panel legend",500002+i),Um:()=>t.OP("panel cursor",600001+i)}}}};class YA extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,YA.prototype)}}class jA extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&ti.alert(e),Object.setPrototypeOf(this,jA.prototype)}}class HA extends jA{constructor(t){super(t),Object.setPrototypeOf(this,HA.prototype)}}class WA{constructor(t){this.P=new Pt,this.S=t}_(t){return this.S=t,this.P.D("change",{value:t}),this}C(){return this.S}R(t,i,s){this.P.addEventListener(t,i,s)}V(t,i){this.P.removeEventListener(t,i)}}const XA=(t,i)=>i?t.x:t.y,ZA=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),JA=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(XA(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>ZA(t,o,r,i))).reduce(((t,i)=>Math.max(t,XA(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>XA(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/XA(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class QA{constructor(t,i,s,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.ui=!1,this.qC=new Array,this.GP=[],this.$P=void 0,this.UP=!0,this.YP=!0,this.jP=!0,this.kg=!1,this.HP=!0,this.WP=()=>{this.HP=!0,this.gi.Ps()},this.XP=[],this.ZP=t=>{for(let i=0;i<this.qC.length;i+=1)if(this.qC[i].panel===t){this.qC.splice(i,1),this.UP=!0,this.gi.Ps();break}},this.JP=t=>{const i=this.GP.indexOf(t);i>=0&&this.GP.splice(i,1)},this.QP=(t,i,s,e,h)=>{if(this.KP(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.qC.push(r),this.qP(r),this.UP=!0,t}throw new YA("Out of dashboard range.")},this.P=new Pt,this.tB=i.numberOfRows,this.iB=i.numberOfColumns,this.Lg=t,this.sB=i,this.eB=e;const n=this.iB*this.tB;this.hB={x:new WA(new Array(this.iB).fill(1)),y:new WA(new Array(this.tB).fill(1))},this.bi=s.bi,this.rB=this.bi.dashboardSplitterStyle,this.zh=!1!==(null==i?void 0:i.animationsEnabled),this.nB=UA(s,n),this.oB=s.OP("dashboard splitters",500001),this.aB=()=>this.nB.RP(),this.Rg=this.nB.zP(),this.vs=s.vs.ys(this,{lB:{}}),this.vs.lB.Ls(this.bi.effectsDashboardSplitters);const o=s._t();this.uiScale=K.d2({scaleXYConstructor:J}).ti(0,100).ii(0,100).X(o),this.sA=K.d2({scaleXYConstructor:J}).ti(0,this.uiScale.x.getCellSize()).ii(0,this.uiScale.y.getCellSize()).X(o),this.uB=s.cB.bind(s),this.dB=s.fB.bind(s),this.AB=s.gB.bind(s),this.vB=s.yB.bind(s),this.Ya=s.Ya.bind(s),this.Ha=s.Ha.bind(s),this.engine=s.Bg,this.gi=s.xc,s.R("resize",this.WP),s.Ps();const a=t=>{this.kg=t.isInView,this.P.D("inviewchange",{isInView:this.kg})};s.R("inviewchanged",a),this.Gg=()=>{s.V("inviewchanged",a)},this.pB(),this.setAnimationsEnabled(this.zh),this.createChartXY=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new Qc(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new lf(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new gd(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=KA(t,this.sB,this.zh),s=i&&i.type?i.type:EA;return this.QP(new s(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new gA(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=KA(t,this.sB,this.zh),s=i&&i.type?i.type:Ld;return this.QP(new s(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=KA(t,this.sB,this.zh),s=t&&t.type?t.type:Hd;return this.QP(new s(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new al(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendPanel=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new wA(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,t.legend),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new rd(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=KA(t,this.sB,this.zh);return this.QP(new Lu(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=KA(t,this.sB,this.zh),s=new su(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=KA(t,this.sB,this.zh),s=new Hf(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=KA(t,this.sB,this.zh),s=new iA(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=KA(t,this.sB,this.zh),s=new xA(this.Lg,this.nB.VP(this.mB(t.columnIndex,t.rowIndex)),this.SB(i,this.hB),this.ZP,r,this,i);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}mB(t,i){return t+i*this.iB}SB(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.iB:this.tB,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).hi({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.iB,y:this.tB},i),d3:()=>new U({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.iB,y:this.tB},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.uB(t[0]),this.dB(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.AB(t[0]),this.vB(t[1]),this}getWidth(){return this.Ya()}getHeight(){return this.Ha()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.oB.Ps(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.oB.Ps(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.bi}setSplitterStyle(t){const i=this.rB;return this.rB="function"==typeof t?t(this.rB):t,this.bB(i),this}getSplitterStyle(){return this.rB}setSplitterEffect(t){return this.vs.lB.Ls(t),this.gi.Ps(),this}getSplitterEffect(){return this.vs.lB.Bs()}setAnimationHighlight(t){return this.jP=t,this.XP.forEach((i=>this.gi.xs.Vs(i.line,t))),this}getAnimationHighlight(){return this.jP}bB(t){for(const t of this.XP)t.line.fh(this.rB);this.pB()}setColumnWidth(t,i){const s=this.hB.x.C();return t>=0&&t<s.length&&(s[t]=i,this.hB.x._(s)),this.WP(),this}getColumnWidth(t){const i=this.hB.x.C();if(t>=i.length)throw new YA("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.hB.y.C();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.hB.y._(s)),this.WP(),this}getRowHeight(t){const i=this.hB.y.C();if(t>=i.length)throw new YA("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.sA.getInnerIntervalPixels()}xB(t,i,s){if(s&&Math.abs(t.x)>0)this.MB(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.wB(i,t.y)}for(const t of this.qC)t.panel.j();this.WP()}wB(t,i){const s=JA(this.qC,this.hB.y.C(),t,i,this.sA._t(),!1);this.hB.y._(s),this.WP()}MB(t,i){const s=JA(this.qC,this.hB.x.C(),t,i,this.sA._t(),!0);this.hB.x._(s),this.WP()}_B(){this.XP.forEach((t=>t.line.dispose())),this.XP.length=0;for(let t=1;t<=this.iB-1;t+=1)for(let i=0;i<=this.tB-1;i+=1)if(void 0!==this.qC.find((s=>Fs(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=this.oB.Ah(this.sA).fh(this.rB);s.addEventListener("pointerenter",(i=>{this.XP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.gi.xs.zs(i.line,1),this.oB.kB(i.line))})),this.$P=this.engine.setMouseStyle(gr.ResizeColumn,this.$P),this.gi.Ps()})),s.addEventListener("pointerleave",(i=>{this.XP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.gi.xs.zs(i.line,0)})),this.$P=this.engine.restoreMouseStyle(this.$P),this.gi.Ps()})),s.addEventListener("pointerdown",(i=>{ki(i);let s=i;const e=i=>{ki(i),this.$P=this.engine.setMouseStyle(gr.ResizeColumn,this.$P),this.XP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.gi.xs.zs(i.line,1),this.oB.kB(i.line))}));const e={x:i.clientX-s.clientX,y:i.clientY-s.clientY};s=i,this.xB(e,t,!0)},h=s=>{s.pointerId===i.pointerId&&(this.XP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.gi.xs.zs(i.line,0)})),this.$P=this.engine.restoreMouseStyle(this.$P),ti.removeEventListener("pointermove",e),ti.removeEventListener("pointerup",h))};ti.addEventListener("pointermove",e),ti.addEventListener("pointerup",h)})),this.gi.xs.bs(s,(t=>s.Fi(t)),{animationEnabled:this.jP}),this.XP.push({row:i,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.tB-1;t+=1)for(let i=0;i<=this.iB-1;i+=1)if(void 0!==this.qC.find((s=>Fs(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=this.oB.Ah(this.sA).fh(this.rB);s.addEventListener("pointerenter",(i=>{this.XP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.gi.xs.zs(i.line,1),this.oB.kB(i.line))})),this.$P=this.engine.setMouseStyle(gr.ResizeRow,this.$P),this.gi.Ps()})),s.addEventListener("pointerleave",(i=>{this.XP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.gi.xs.zs(i.line,0)})),this.$P=this.engine.restoreMouseStyle(this.$P),this.gi.Ps()})),s.addEventListener("pointerdown",(i=>{ki(i);let s=i;const e=i=>{ki(i),this.$P=this.engine.setMouseStyle(gr.ResizeRow,this.$P),this.XP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.gi.xs.zs(i.line,1),this.oB.kB(i.line))}));const e={x:i.clientX-s.clientX,y:-(i.clientY-s.clientY)};s=i,this.xB(e,t,!1)},h=s=>{s.pointerId===i.pointerId&&(this.XP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.gi.xs.zs(i.line,0)})),this.$P=this.engine.restoreMouseStyle(this.$P),ti.removeEventListener("pointermove",e),ti.removeEventListener("pointerup",h))};ti.addEventListener("pointermove",e),ti.addEventListener("pointerup",h)})),this.gi.xs.bs(s,(t=>s.Fi(t)),{animationEnabled:this.jP}),this.XP.push({row:t,column:i,line:s,alignment:"horizontal"})}this.vs.lB._s(this.XP.map((t=>t.line)))}CB(){const t=this.sA._t(),i=this.hB.x.C(),s=i.reduce(((t,i)=>t+i)),e=this.hB.y.C(),h=e.reduce(((t,i)=>t+i));this.XP.forEach((n=>{if("vertical"===n.alignment){const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(o.x,t.y*e.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/h);n.line.ph(o).gh(a)}else{const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.ph(o).gh(a)}}))}setAnimationsEnabled(t){return this.zh=t,this.getCells().filter((t=>t.panel instanceof ll)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.zh),this}getAnimationsEnabled(){return this.zh}getCells(){return this.qC.slice()}dispose(){return this.ui||(this.Gg&&this.Gg(),this.qC.slice().forEach((t=>t.panel.dispose())),this.GP.slice().forEach((t=>t.dispose())),this.ui=!0,this.eB(),this.P.D("dispose",{})),this}isDisposed(){return this.ui}getIsInView(){return this.kg}saveToFile(t,i,s,e){return ja(this.engine,t,i,s,e),this}Mc(t){if(this.HP){const t=this.gi.oi._t(),i=t.x,s=t.y;this.uiScale.X(i,s),this.sA.X(i,s);const e=this.uiScale.getInnerIntervalPixels();this.sA.ti(0,e.x).ii(0,e.y),this.P.D("resize",{width:e.x,height:e.y,engineWidth:i,engineHeight:s}),this.YP=!0}this.UP&&(this._B(),this.UP=!1,this.YP=!0),this.YP&&(this.CB(),this.YP=!1);for(const i of this.qC)i.panel.th(t);return this.GP.forEach((t=>t.Vr())),this.GP.forEach((t=>t.th())),this.HP=!1,this}Y(){for(const t of this.qC)t.panel.Y();return this.sA.x.Y(),this.sA.y.Y(),this.uiScale.x.Y(),this.uiScale.y.Y(),this}j(){for(const t of this.qC)t.panel.j();return this.sA.x.j(),this.sA.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}translateCoordinate(t,i,s){return Xa(t,i,s,this.sA,this.gi)}addUIElement(t=No,i=this.uiScale){i=Wa(i,this.sA);const s=Ha(t,this.aB(),this.uiScale,i,this.JP,this.bi);return this.GP.push(s),s}KP(t,i,s,e){return i>=0&&t>=0&&i+e<=this.tB&&t+s<=this.iB}qP(t){const i=this.rB,s=i===$t?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.tB-1?s:0,right:t.columnIndex<this.iB-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.xn(e)}pB(){this.uiScale.x.St([0,0]),this.uiScale.y.St([0,0]),this.sA.x.St([0,0]),this.sA.y.St([0,0]);for(const t of this.qC)this.qP(t);this.gi.Ps()}addEventListener(t,i,s){this.P.addEventListener(t,i,s)}removeEventListener(t,i){this.P.removeEventListener(t,i)}}const KA=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},qA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,h=0,r=0;const n=[],o=t=>{const i=new ti.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new Vt({source:i,fitMode:Ot.Stretch});null===(s=t.md)||void 0===s||s.Ke(e),h=i.width,r=i.height,u(t)}))}};o(i);const a=t=>{o(t.logoDataURI)};let l;if(t.La.addEventListener("logochange",a),new ti.Image instanceof ti.HTMLImageElement){const t=new ti.Image;t.src=i,l=new Vt({source:t,fitMode:Ot.Stretch})}else if(ti.lcjs_setup){const t=new ti.Image;t.src=i;const s=ti.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new Vt({source:s,fitMode:Ot.Stretch})}else l=new ke({color:S("#f00")});const u=t=>{if(t.md){const i=t.oi.Jt({x:t.oi.x.getInnerEnd(),y:t.oi.y.getInnerStart()},{x:-(3+h),y:3}),s=t.oi.Jt({x:t.oi.x.getInnerEnd(),y:t.oi.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.md.ih(i).X(e)}e&&e.Ps()};return e=t.OP("logo",Number.MAX_SAFE_INTEGER),i=>{const h={oi:i};return(i=>{const h=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?ig:tg;if(i.md&&i.md.dispose(),e){let s;i.md=e.qe(i.oi).Ke(l).setPointerEvents(!0).Qe($t),i.md.addEventListener("pointerenter",(()=>{s=t.En(gr.Point)})),i.md.addEventListener("pointerleave",(()=>{s=t.Rn(s)})),i.md.addEventListener("click",h),u(i)}})(h),n.push(h),{Vr:()=>u(h),N:()=>(i=>{i.md&&(i.md.dispose(),i.md=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.La.removeEventListener("logochange",a)})(h)}}},tg=()=>ti.open("https://lightningchart.com/lightningchart-js/"),ig=()=>ti.open("https://lightningchart.com/python-charts/");class sg{constructor(){this.TB=this.FB.bind(this),ti.addEventListener("scroll",this.TB,{passive:!0})}N(){this.TB&&ti.removeEventListener("scroll",this.TB),this.TB=void 0}}class eg{constructor(t,i){this.kl=t,this.U=i,this.IB=!0,this.LB=null,this.PB=null}}class hg{constructor(t){this.BB=!1,this.DB=1,this.EB=t,this.RB={kl:r(0,0),U:r(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),IB:!0,LB:null,PB:null},this.OB=r(64,64),this.zB=new Uint8ClampedArray(this.OB.x*this.OB.y*this.DB)}VB(t,i){if(!t.IB)return null;if(t.LB&&t.PB){const s=this.VB(t.LB,i);return null!==s?s:this.VB(t.PB,i)}const s=n(t.U.x,t.U.y);if(t.kl.x+t.U.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.OB.x-t.kl.x-1),t.kl.y+t.U.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.OB.y-t.kl.y-1),t.U.x===i.x&&t.U.y===i.y)return t.IB=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.U.x>t.U.y)),l?(e=new eg(Ws(t.kl,{x:0,y:1}),r(t.U.x,i.y)),h=new eg(Ws(t.kl,{x:0,y:i.y+1}),r(t.U.x,t.U.y-1-i.y))):(e=new eg(Ws(t.kl,{x:1,y:0}),r(i.x,t.U.y)),h=new eg(Ws(t.kl,{x:i.x+1,y:0}),r(t.U.x-1-i.x,t.U.y))),t.LB=e,t.PB=h,this.VB(t.LB,i)}NB(t,i){const s={GB:!1,kl:null};let e=this.VB(this.RB,i);if(null===e)for(;null===e&&this.OB.x<this.EB&&this.OB.y<this.EB;){if(!this.$B(r(2*this.OB.x,2*this.OB.y)))return this.BB=!0,null;s.GB=!0,e=this.VB(this.RB,i)}if(null===e)return this.BB=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.kl.y+s,n=e.kl.x+h;this.zB[r*this.DB*this.OB.x+n*this.DB+0]=t[s*this.DB*i.x+h*this.DB+0]}return s.kl=e.kl,s}$B(t){if(t.x>this.EB||t.y>this.EB)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.DB);for(let s=0;s<this.OB.y;s+=1)for(let e=0;e<this.OB.x;e+=1)i[s*t.x*this.DB+e*this.DB+0]=this.zB[s*this.OB.x*this.DB+e*this.DB+0];return this.OB=t,this.zB=i,!0}}class rg{constructor(t){this.UB=new Map,this.EB=t,this.UB.set(this.UB.size,new hg(this.EB))}YB(t){return this.UB.get(t)}NB(t,i){let s=-1;const e=Array.from(this.UB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.BB){s=t;break}}-1===s&&(s=this.UB.size,this.UB.set(this.UB.size,new hg(this.EB)));const h=this.UB.get(s);if(!h)return null;let r=h.NB(t,i);if(!r&&h.BB){const e=this.UB.size,h=new hg(this.EB);this.UB.set(e,h),s=e,r=h.NB(t,i)}return r?{jB:s,...r}:null}}var ng;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(ng||(ng={}));const og=Wi("font-texture");class ag{constructor(t){this.HB=new Map,this.WB=new Map,this.mi=og(),this.XB=t,this.ZB=new rg(this.XB.JB||4096)}wc(){return this.WB.forEach((t=>{this.XB.QB(t)})),this.WB.clear(),this}KB(t,i){const s=this.HB.get(i);if(s)return s.get(t)}qB(t,i,s){let e=this.HB.get(i);if(e||(e=new Map,this.HB.set(i,e)),e.has(t.glyph))return ng.Success;const h=this.ZB.NB(s,t.size);if(!h||!h.kl)return ng.Fail;h.GB&&this.tD();const r=this.ZB.YB(h.jB);if(!r)return ng.Fail;let n=this.WB.get(h.jB);if(!n){const t=this.XB.gl.createTexture();if(!t)throw new jA("Failed to create texture for font!");n=t,this.WB.set(h.jB,t)}const o=h.kl,a=r.OB.x,l=r.OB.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,v=(o.x+t.size.x)/a,y=o.y/l,p=[A,g,v,g,A,y,A,y,v,g,v,y],m=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:m,texCoords:p,packerId:h.jB,texture:n};e.set(t.glyph,S);const b=this.XB.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.OB.x,r.OB.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.XB.iD?r.zB:new Uint8Array(r.zB)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.GB?ng.Resize:ng.Success}tD(){this.HB.forEach((t=>{t.forEach(((i,s)=>{const e=this.ZB.YB(i.packerId);if(!e)return;const h=i.origin,r=e.OB.x,n=e.OB.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const lg=t=>(i,s)=>s%2?i:i+t;class ug{constructor(t){this.sD=new Map,this.eD=Wi("font"),this.hD=new Map,this.rD=new Set,this.XB=t}wc(t=!1){return(t||0===this.rD.size)&&(this.sD.forEach(((t,i)=>{t.wc(),this.sD.delete(i)})),this.rD.clear()),this}Qc(t){this.rD.add(t)}nD(t){this.rD.delete(t)}oD(t,i,s,e){const h=ti.devicePixelRatio,r=`${e?"dark":"light"} - ${Sn(i,h).id}`,n=this.hD.get(r),o=this.sD.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size*h);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.KB(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const v=zh(u/h,(l-a+1)/h,s);return{x:v.x,y:v.y,isEstimate:g}}aD(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.hD.get(e);h||(h=this.eD(),this.sD.set(h,new ag(this.XB)),this.hD.set(e,h));const n=this.sD.get(h);if(!n)throw new jA("Failed to get font texture!");let o=0,a=0,l=0;const c=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<c.length;t+=1){const e=c[t],h=Math.ceil(f);let r=n.KB(e,A);if(!r){const h=this.XB.lD(e,i.properties,i.dpr,s);if(!h)continue;const l=n.qB(h[1],A,h[0]);if(l===ng.Resize){this.rD.forEach((t=>{t.pl.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.XB.gi.Ps(!0);continue}if(l===ng.Fail)throw new jA("Failed to create glyph");if(r=n.KB(e,A),!r)throw new jA("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(r.texture);t||(t={vertices:[],texCoords:[]},d.set(r.texture,t)),t.vertices.push(...r.vertices.map(lg(h))),t.texCoords.push(...r.texCoords),a=Math.max(a,r.baseline),o=Math.min(o,r.baseline-(r.size.y-1))}f+=r.advanceX}l=f;const g=u(r(0,o),r(l,a)),v=[];return d.forEach(((t,i)=>{v.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[v,g]}}const cg={roundUnsigned:{uD:"roundUnsigned",cD:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{uD:"linearStep",cD:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},dither:{uD:"dither",cD:"\nconst mat4x4 bayerMatrix4x4 = mat4x4(\n    0.0,  8.0,  2.0, 10.0,\n    12.0, 4.0,  14.0, 6.0,\n    3.0,  11.0, 1.0, 9.0,\n    15.0, 7.0,  13.0, 5.0\n) / 16.0;\n\nvec4 dither(vec2 pos, vec4 c0, vec4 c1, float s0, float s1, float mixVal)\n{\n    float step = linearStep(s0, s1, mixVal);\n    int x = int(pos.x) % 4;\n    int y = int(pos.y) % 4;\n    float threshold = bayerMatrix4x4[y][x];\n    vec4 color = mix(c0, c1, step * 0.95 + threshold * 0.05);\n    return color;\n}"},decodeUbyteRGBAEncodedFloat:{uD:"decodeUbyteRGBAEncodedFloat",cD:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{uD:"texelFetchWithFallback",cD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{uD:"texelFetchWithFallback",cD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{uD:"texelFetchUnsignedWithFallback",cD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{uD:"texelFetchUnsignedWithFallback",cD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{uD:"modulus",cD:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{uD:"computeScreenSpaceWireframe",cD:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},dg="posAxis",fg="posWorld",Ag="normal",gg="colorFragment",vg="antiAliasFactor",yg="mousePickingIdOffset",pg="uRatioPxClip",mg="uRatioNwuWu",Sg="uColorTexture",bg="uSizePixels",xg="uOffsetAlignment",Mg="uMaskTexture",wg="aNormal",_g="Rot";class kg{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>Cg(t)));for(const s of i)t=s(t);return`${qi(this.modifiers.filter((t=>Fg(t)))).map((t=>t.cD)).join("\n")}\n${t}`}}const Cg=t=>"function"==typeof t,Tg={uD:"ratioPxClip",cD:`uniform vec2 ${pg};`},Fg=t=>t&&"object"==typeof t&&"uD"in t,Ig=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},Lg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),Pg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Bg=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},Dg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},Eg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},Rg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=Ig(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=Ig(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return Eg(`\t${h} = ${e};`)(s)},Og=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},zg=(t,i)=>{const s=i.steps,e=s.length-1,h=[Ig("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(Ig(...r,...n),i.percentageValues&&Ig("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(Dg(`${gg} =`,"vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${jt}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),`${gg} = colorLookup`)):h.push(Dg(`${gg} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${jt}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,`${gg} = colorLookup`)),h},Vg=[Ig(`uniform sampler2D ${Mg}`),Ig("varying vec2 vMaskTextureCoord"),Dg(`${vg} =`,`vec4 maskTextureSample = texture2D(${Mg}, vMaskTextureCoord)`,`${vg} = maskTextureSample.r`)],Ng=[Ig(`uniform sampler2D ${Mg}`),Ig("varying vec2 vMaskTextureCoord"),Dg(`${vg} =`,`vec4 maskTextureSample = texture2D(${Mg}, vMaskTextureCoord)`,`${vg} = maskTextureSample.a`)],Gg=[Ig("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),Dg(`${gg} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${gg}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${gg} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${gg}.a)`)],$g=(t,...i)=>{var s,e;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const h=i[0];return{vertexShaderModifiers:[Ig("varying vec4 d"),Eg(`d = vec4(${i[0]}.x, ${i[0]}.y, ${null!==(s=i[1])&&void 0!==s?s:h}.x, ${null!==(e=i[1])&&void 0!==e?e:h}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[Ig("varying vec4 d"),Eg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class Ug extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const Yg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},jg=t=>void 0!==t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.fD})),Hg=t=>void 0!==t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.AD})),Wg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,flipXY:a,flipXZ:l,offsets:u,splitPosAttribute:c,normalSource:d}=t,f=[];"attribute"===d&&e.push(Ig(`attribute vec3 ${wg}`),Pg(`vec3 ${Ag} = ${wg}`)),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?f.push(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):s.forEach((i=>{!0!==t.splitPosAttribute?f.push(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`,`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`):f.push(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`,`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`)}));const A=(t=>{if(t)for(const s of t){const t=(null==(i=s)?void 0:i.rotation)&&i.rotation.dataType;if(void 0!==t&&!1!==t)return t}var i})(u);if("attribute-deg"===A&&e.push(Ig("attribute float aRotDeg"),Ig("uniform float uBaseRotDeg")),"attribute"===A&&e.push(Ig("attribute vec2 aRot")),"uniform"===A&&e.push(Ig("uniform vec2 uRot")),null==u||u.forEach((t=>{if(t&&t.rotation){const i=t.rotation.dataType,s="uniform"===i?"u":"a";if("attribute-deg"===i){const i=t.directionVar,s=`c${_g}`;e.push(Pg(`vec2 ${t.directionVar}Rot = vec2(${i}.x * ${s}.y + ${i}.y * ${s}.x, ${i}.y * ${s}.y - ${i}.x * ${s}.x)`))}else{const i=`${s}${_g}`,h=t.directionVar;e.push(Pg(`vec2 ${t.directionVar}Rot = vec2(${h}.x * ${i}.y + ${h}.y * ${i}.x, ${h}.y * ${i}.y - ${h}.x * ${i}.x)`))}}})),null==u?void 0:u.find((t=>(null==t?void 0:t.rotation)&&"attribute-deg"===t.rotation.dataType))){const t=`c${_g}`;e.push(Pg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`))}if(u&&u.forEach((t=>{t&&!0!==t.skipAddDefinition&&e.push(Ig(`attribute ${h} ${t.directionVar}`))})),!0===a){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(Ig(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(Ig(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(null==u||u.forEach((t=>{if(t&&"axis"===t.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const n=("attribute"===t.dataType?"a":"u")+"OffsetAxis",o=!0===t.symmetric?"float":h;e.push(Ig(`${t.dataType} ${o} ${n}`));const a=t.halved?" * 0.5":"",l=t.rotation?`${t.directionVar}Rot`:t.directionVar,u="offsetGeometry";f.push(`${h} ${u} = ${n} * ${l}${a} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} ${Ag} = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}})),void 0===r||"linear"===r)e.push(Ig(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(Ig(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(Ig("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(Ig("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(Ig(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${oe(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(Ig(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}return null==u||u.forEach((t=>{if(t&&"px"===t.sizeUnit){e.push(Tg);let i="vec2(0.0, 0.0)";if(t.useAlignment&&(e.push(Ig(`uniform vec2 ${xg}`)),i=xg),s.find((t=>t.overrideOffsetPixels)))s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${pg}`)}));else{const r=`${t.directionVar}Amount`,n=!0===t.symmetric?"float":h;e.push(Ig(`${t.dataType} ${n} ${r}`));const o=t.halved?" * 0.5":"";let a;if(!1!==t.useGeometry){const s=t.rotation?`${t.directionVar}Rot`:t.directionVar;a=`(${s} + ${i}) * ${r}${o} * ${pg}`}else a=`${r}${o} * ${pg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${a}`)}))}}if(t&&"scale"===t.sizeUnit){e.push(Tg),e.push(Ig(`uniform vec2 ${bg}`));let i="vec2(0.0, 0.0)";t.useAlignment&&(e.push(Ig(`uniform vec2 ${xg}`)),i=xg);const h=("uniform"===t.dataType?"u":"a")+"OffsetScale";e.push(Ig(`${t.dataType} float ${h}`));const r=`(${t.rotation?`${t.directionVar}Rot`:t.directionVar} + ${i}) * ${h} * ${bg} * ${pg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${r}`)}))}if(t&&"wu"===t.sizeUnit){const r=("attribute"===t.dataType?"a":"u")+"OffsetWU",n=!0===t.symmetric?"float":h;e.push(Ig(`${t.dataType} ${n} ${r}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${h} ${l} = ${r} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${h} ${Ag} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(t&&"nwu"===t.sizeUnit){e.push(Ig(`uniform float ${mg}`));const r=("attribute"===t.dataType?"a":"u")+"OffsetNWU",n=!0===t.symmetric?"float":h;e.push(Ig(`${t.dataType} ${n} ${r}`));const o=t.halved?" * 0.5":"",a=t.rotation?`${t.directionVar}Rot`:t.directionVar,l="offsetGeometry";f.push(`${h} ${l} = ${r} * ${a}${o}`),i&&"gpu-calculate"===d&&f.push(`${h} ${Ag} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${mg}`)}))}})),t.snapToNearestPixel&&(e.push(Ig("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Bg("gl_Position =",...f)),e},Xg=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(Dg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(Dg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(Dg(s,...t))}}return h},Zg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.gD})))(t)?[Lg("attribute vec4 aColor"),Lg("vColor = aColor"),Ig("attribute vec4 aColorA"),Ig("attribute vec4 aColorB"),Eg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Jg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.vD})))(t)?[Lg("attribute float aLookupValue"),Lg("vLookupValue = aLookupValue"),Ig("attribute float aLookupValueA"),Ig("attribute float aLookupValueB"),Eg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Qg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",dD:{fD:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Yg(t)}`,idFragment:void 0,vertexShaderModifiers:[Ig(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),Eg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",dD:{AD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,vD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,gD:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${Yg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(Ig("uniform vec4 uColor"),Dg(`${gg} =`,`${gg} = uColor`),...s?Vg:[],...e?Ng:[]);else if("attribute"===i)o="colorAttribute",l.push(Rg("attribute vec4 aColor","varying vec4 vColor")),c.push(Ig("varying vec4 vColor"),Dg(`${gg} =`,`${gg} = vColor`),...s?Vg:[],...e?Ng:[]);else if("texture"===i)o="colorTexCoord",l.push(Rg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(Ig("varying vec2 vTextureCoord"),Ig(`uniform sampler2D ${Sg}`),Ig("uniform vec4 uColor"),Dg(`${gg} =`,`${gg} = texture2D(${Sg}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${gg} = uColor;\n                    }`),...s?Vg:[],...e?Ng:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(Ig("attribute vec2 aTextureCoord"),Ig("varying vec2 vTextureCoord"),Eg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(Ig("varying vec2 vTextureCoord"),Ig(`uniform sampler2D ${Sg}`),Pg(`vec4 ${gg} = texture2D(${Sg}, vTextureCoord)`,`gl_FragColor = ${gg};`));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(Rg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===Ot.Tile?c.push(Ig(`uniform sampler2D ${Sg}`),Ig("varying vec2 vTextureCoord"),Dg(`${gg} =`,`${gg} = texture2D(${Sg}, vTextureCoord);`)):c.push(Ig(`uniform sampler2D ${Sg}`),Ig("varying vec2 vTextureCoord"),Ig("uniform vec4 uColor"),Dg(`${gg} =`,`${gg} = texture2D(${Sg}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${gg} = uColor;\n                            }`));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(Rg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${dg}.${t}`;o=`lookup:${t}`,l.push(Rg(i,"varying float vLookupValue"))}c.push(Ig("varying float vLookupValue"),...zg("vLookupValue",i[2]),...s?Vg:[],...e?Ng:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();if(V(t)){const i="webgl2"===n&&!!((d=t)&&"object"==typeof d&&"type"in d&&"fillstyle"===d.type&&"fillType"in d&&"radial-gradient"===d.fillType&&!0===d.ditheringEnabled);a=`rgradient${h.length},${e},${s},${i}`,c.push(Ig("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),Ig(...ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),cg.linearStep,i?cg.dither:void 0,Dg(`${gg} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)",i?"vec4 color = dither(gl_FragCoord.xy, color_0, color_1, stop_0, stop_1, mixVal)":"vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,s)=>s<2?"":i?`color = dither(gl_FragCoord.xy, color, color_${s}, stop_${s-1}, stop_${s}, mixVal);`:`color = mix(color, color_${s}, linearStep(stop_${s-1}, stop_${s}, mixVal));`)),`${gg} = color`),...s?Vg:[],...e?Ng:[])}else $(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(Ig("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),Ig(...ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),cg.linearStep,Dg(`${gg} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),`${gg} = color`),...s?Vg:[],...e?Ng:[]))}var d;if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(Rg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(Ig("uniform float uOpacity"),Dg(`${gg} =`,`${gg}.a *= uOpacity`)),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h=s;const r=`ColorShaded3D:${Yg(t)}`;return{idFeature:"ColorShaded3D",dD:{AD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,vD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&Rg(Ag,"varying vec3 vNormal"),Rg(fg,"varying vec3 vPosWorld")),"uniform"===i)a.push(Ig("uniform vec4 uColorDiffuse"),Dg(`${gg} =`,`${gg} = uColorDiffuse`));else if("attribute"===i)h+=",per-vertex-color",o.push(Rg("attribute vec4 aColor","varying vec4 vColor")),a.push(Ig("varying vec4 vColor"),Dg(`${gg} =`,`${gg} = vColor`));else if(Array.isArray(i)){const t=i[1];if("value"===t)h+=",lookup:value",o.push(Rg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${dg}.${t}`;h+=`,lookup:${t}`,o.push(Rg(i,"varying float vLookupValue"))}a.push(Ig("varying float vLookupValue"),...zg("vLookupValue",i[2]))}return e&&(h+=",wireframe",o.push(Rg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(Ig("varying vec3 vTriangleBary"),Ig("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),cg.computeScreenSpaceWireframe,Dg(`${gg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${gg} = mix(${gg}, uWireframeColor, edge)`))),"phong"===s&&a.push(...Gg),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=$g(t.axisWorldTranslation,"posAxis_hprecision"),e=[],h=jg(i),r=t.coordType?t.coordType:h?"vec3":"vec2";return t.isInstanceRectangleRendering?e.push(Ig("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),Pg("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(Ig(`attribute ${r} aPos`)):e.push(Ig("attribute float aPosX"),Ig("attribute float aPosY"),h&&Ig("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(Ig("attribute float aPos_highpartX"),Ig("attribute float aPos_lowpartX"),Ig("attribute float aPos_highpartY"),Ig("attribute float aPos_lowpartY")):e.push(Ig(`attribute ${r} aPos_highpart`),Ig(`attribute ${r} aPos_lowpart`)),e.push(...Wg(t,h,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:dg,variableNameWorldCoord:fg})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${Yg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(Ig("attribute vec3 aGeoPos"),Ig("uniform mat4 uModelRotation"),Ig("uniform mat4 uModelRotationNormals"),Ig("uniform vec3 uLocationAxis"),Ig("uniform vec3 uModelAlignment"),Ig("uniform vec3 uModelScale"),Ig("uniform vec3 uModelSize"),...Wg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Bg("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&Dg(`vec3 ${Ag} =`,` ${Ag} = (uModelRotationNormals * vec4(${Ag}, 1.0)).xyz;`),...Hg(i)?Xg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,fg,dg):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${Yg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=$g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision"),s=t.offsets&&t.offsets[0];return{idFeature:"LineInstanced2D",apply:e=>({idVertex:`LineInstanced2D:${Yg(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[Ig("uniform float uThicknessPixels"),Tg,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Ig("attribute vec2 aLocationA"),Ig("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Ig("attribute vec2 aLocationA_highpart"),Ig("attribute vec2 aLocationB_highpart"),Ig("attribute vec2 aLocationA_lowpart"),Ig("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Ig("attribute float aLocationAX"),Ig("attribute float aLocationAY"),Ig("attribute float aLocationBX"),Ig("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Ig("attribute float aLocationA_highpartX"),Ig("attribute float aLocationA_highpartY"),Ig("attribute float aLocationB_highpartX"),Ig("attribute float aLocationB_highpartY"),Ig("attribute float aLocationA_lowpartX"),Ig("attribute float aLocationA_lowpartY"),Ig("attribute float aLocationB_lowpartX"),Ig("attribute float aLocationB_lowpartY")]:[],Ig("attribute vec2 aSegmentPosition"),Ig("attribute float aSegmentSide"),s&&Ig(`attribute vec2 ${s.directionVar}A`,`attribute vec2 ${s.directionVar}B`),...Wg({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:s?`${s.directionVar}A`:void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:s?`${s.directionVar}B`:void 0}),t.ensureMinimumSegmentLength&&Ig("uniform vec2 uMinSegmentPixelVector"),Dg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${fg} = offset + thicknessDirection * uThicknessPixels * ${pg}`),...Jg(e),...Zg(e),...Hg(e)?Xg({...t,offsets:s?[{...s,skipAddDefinition:!0}]:[]},!1,fg,dg):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=$g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${Yg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Ig("attribute vec2 aLocationA"),Ig("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Ig("attribute vec2 aLocationA_highpart"),Ig("attribute vec2 aLocationB_highpart"),Ig("attribute vec2 aLocationA_lowpart"),Ig("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Ig("attribute float aLocationAX"),Ig("attribute float aLocationAY"),Ig("attribute float aLocationBX"),Ig("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Ig("attribute float aLocationA_highpartX"),Ig("attribute float aLocationA_highpartY"),Ig("attribute float aLocationB_highpartX"),Ig("attribute float aLocationB_highpartY"),Ig("attribute float aLocationA_lowpartX"),Ig("attribute float aLocationA_lowpartY"),Ig("attribute float aLocationB_lowpartX"),Ig("attribute float aLocationB_lowpartY")]:[],Ig("attribute float aCurveOrBaseline"),Ig("attribute float aSegmentSide"),...Wg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Dg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${fg} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...Jg(i),...Zg(i),...Hg(i)?Xg(t,!1,fg,dg):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${Yg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[Ig("uniform float uOffsetWU"),Ig("attribute vec3 aLocationA"),Ig("attribute vec3 aLocationB"),Ig("attribute float aSegmentPosition"),Ig("attribute float aPerpendHorizontal"),Ig("attribute float aPerpendVertical"),...Wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},jg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Dg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${Ag} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${fg} = worldA + aSegmentPosition * directionBasis + ${Ag} * uOffsetWU * 0.5`),...Hg(i)?Xg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,fg,dg):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[Ig("attribute vec3 aEdge"),Ig("uniform float uEdgeRoundness"),Dg(`${fg} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${fg} = ${fg} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian,h=t.aggregation;return{idFeature:"ColorGrid2D",apply:(r,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Yg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[Ig("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues",h&&"uniform vec2 uAggregationWindowSize"),"ubyte"===s&&cg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?Pg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Pg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",...h?[`float intensityP = ${"max"===h?"-":""}340282346638528859811704183484516925440.0`,`for (float dy = -uAggregationWindowSize.y; dy <= uAggregationWindowSize.y; dy++) {\n                                            for (float dx = -uAggregationWindowSize.x; dx <= uAggregationWindowSize.x; dx++) {\n                                                vec2 offset = vec2(dx, dy) / uTileDimensions;\n                                                vec2 coord = ${i?"offset":"vec2(offset.y, offset.x)"} + ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"};\n                                                vec4 sample0 = texture2D(uTileIntensityValues, coord);\n                                                float intensity0 = ${"float"===s?"sample0.x;":`decodeUbyteRGBAEncodedFloat(sample0, ${e};`}\n                                                intensityP = ${"max"===h?"max":"min"}(intensityP, intensity0);\n                                            }\n                                        }`]:[`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)]),...zg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(Ig("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&cg.roundUnsigned,cg.modulus,cg.texelFetchWithFallback[o],"ubyte"===h&&cg.decodeUbyteRGBAEncodedFloat,Pg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(Ig("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Pg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Yg(t)}`,idFragment:`DrawToNormalTexture:${Yg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",dD:{yD:!0},apply:(u,c)=>{const d=[],f=[];return d.push(Ig("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),cg.modulus,cg.texelFetchWithFallback[c],"ubyte"===o&&cg.decodeUbyteRGBAEncodedFloat,Pg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...Wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:dg,variableNameWorldCoord:fg})),"phong"===h&&d.push(Rg(fg,"varying vec3 vPosWorld"),..."uint"===n?[cg.texelFetchUnsignedWithFallback[c],Eg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Eg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Eg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),Ig("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(Ig("varying vec3 vTriangleBary")),"uniform"===i?f.push(Ig("uniform vec4 uColorDiffuse"),Dg(`${gg} =`,`${gg} = uColorDiffuse`)):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(Rg(`${dg}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(Ig("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&cg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?Pg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):Pg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...zg("intensityP",i[2]))):(d.push(Rg(`${dg}.${i[1]}`,"varying float vLookupValue")),f.push(Ig("varying float vLookupValue"),...zg("vLookupValue",i[2])))),"phong"===h&&f.push(...Gg),r&&(d.push(Ig("attribute vec3 aTriangleBary"),Rg("aTriangleBary","varying vec3 vTriangleBary")),f.push(Ig("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),cg.computeScreenSpaceWireframe,Dg(`${gg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?`if (edge > 0.0) {\n                                    ${gg} = vec4(mix(${gg}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${gg}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${gg} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${Yg(t)}`,idFragment:`SurfaceGrid:${Yg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${Yg(t)}`,idFragment:`DebugSurfaceGridNormals:${Yg(t)}`,vertexShaderModifiers:[Ig("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),cg.roundUnsigned,cg.modulus,cg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&cg.decodeUbyteRGBAEncodedFloat,Pg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[cg.texelFetchUnsignedWithFallback[s]]:[],...Wg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:dg,variableNameWorldCoord:fg}),Dg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Eg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[Ig("uniform vec3 uCameraLoc"),Dg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[Ig("attribute float aSegmentInside"),Ig("varying float vSegmentInside"),Ig("varying float vSegmentSide"),Dg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Og("#extension GL_OES_standard_derivatives : enable"),Ig("uniform float uAALimit"),Ig("varying float vSegmentInside"),Ig("varying float vSegmentSide"),Dg(`${vg} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${vg} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${Yg(t)}`,idFragment:`Glow1D:${Yg(t)}`,vertexShaderModifiers:[Rg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Ig("uniform sampler2D uTexture"),Ig("varying vec2 vTextureCoord"),Ig("uniform vec2 uTextureSize"),h&&Ig("uniform vec2 uOffsetPx"),!h&&Ig("uniform sampler2D uTextureFirstGlowPass"),!h&&Ig("uniform vec4 uGlowColor"),Dg(`${vg} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...h?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${vg} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${vg} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${gg} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${gg} = pixelGlowColor`])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",dD:{yD:h,pD:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${Yg(t)}`,idFragment:`MousePicking:${Yg(t)}`,vertexShaderModifiers:[...h?[Ig(`${o} varying ${a} vPickingIdOffset`),Eg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[Ig(`${o} varying ${a} vPickingIdOffset`),Eg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[Ig("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),Eg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[Ig("uniform int uFirstId"),...i?[]:[Ig(`${o} varying ${a} vPickingIdOffset`),Pg(`int ${yg} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],Dg(`${gg} =`,`int remainder = ${yg} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${gg} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${vg})`,`if (${vg} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[Rg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[Ig("attribute vec2 aLengthSoFar"),Ig("varying float vLengthSoFar"),Ig("uniform vec2 uStippleCount"),Eg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Ig("uniform sampler2D uStippleTexture"),Ig("uniform float uStippleScale"),Ig("varying float vLengthSoFar"),"webgl1"===i&&Ig("uniform float uStippleTextureWidthLimiter"),Dg(`${vg} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${vg} *= stippleAA;\n                    if (${vg} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[Ig("attribute vec2 aLengthSoFarA"),Ig("attribute vec2 aLengthSoFarB"),Ig("varying float vLengthSoFar"),Ig("uniform vec2 uStippleCount"),Eg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Ig("uniform sampler2D uStippleTexture"),Ig("uniform float uStippleScale"),Ig("varying float vLengthSoFar"),"webgl1"===i&&Ig("uniform float uStippleTextureWidthLimiter"),Dg(`${vg} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${vg} *= stippleAA;\n                    if (${vg} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Yg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[Ig("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),cg.texelFetchWithFallback[s],"ubyte"===o&&cg.decodeUbyteRGBAEncodedFloat,Pg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&Dg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&Dg(`${gg} =`,`${gg} = uColor`),h&&Dg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?zg("intensityP",h.lut):[]]}}})},Kg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},qg={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${gg} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${vg} = 1.0;\n    vec4 fragColorEnd = ${gg};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${vg});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class tv{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new HA(`Could not find ${this.mD()} ${this.SD()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}mD(){return this.id.toString()}SD(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class iv extends tv{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class sv extends tv{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class ev{constructor(t,i,s,e){this.bD=new Map,this.xD=new Map,this.MD=s,this.wD=s.createProgram(),this._D=`${t.mD()} vertex`,this.kD=`${i.mD()} fragment`,s.attachShader(this.wD,t.shader),s.attachShader(this.wD,i.shader),s.bindAttribLocation(this.wD,0,"aPos"),s.linkProgram(this.wD),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}CD(t){return Ji(0,(()=>Qi()))}TD(t){const i=this.FD(t);if(void 0===i)throw this.CD(`Could not get ${t} uniform from ${this._D} and ${this.kD} shaders.`);return i}FD(t){const i=this.bD.get(t);if(i)return i;const s=this.MD.getUniformLocation(this.wD,t);return s?(this.bD.set(t,s),s):void 0}ID(t){const i=this.LD(t);if(void 0===i)throw this.CD(`Could not get ${t} attribute from ${this._D} and ${this.kD} shaders.`);return i}LD(t){const i=this.xD.get(t);if(i||0===i)return i;const s=this.MD.getAttribLocation(this.wD,t);return s>=0?(this.xD.set(t,s),s):void 0}N(){this.MD.deleteProgram(this.wD)}}const hv=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,rv=t=>{let i;try{i=ti.getComputedStyle(t)}catch(t){return null}return i};
/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function nv(t){const i=rv(t);return!!i&&("fixed"===i.position||!!("auto"!==i.zIndex&&"static"!==i.position||function(t){const i=rv(uv(t)),s=i?i.display:"auto";return"flex"===s||"inline-flex"===s}(t))||+i.opacity<1||"transform"in i&&"none"!==i.transform||"webkitTransform"in i&&"none"!==i.webkitTransform||"mixBlendMode"in i&&"normal"!==i.mixBlendMode||"filter"in i&&"none"!==i.filter||"webkitFilter"in i&&"none"!==i.webkitFilter||"isolation"in i&&"isolate"===i.isolation||!!hv.test(i.willChange)||"touch"===i.webkitOverflowScrolling)}function ov(t){let i=t.length;for(;i--;)if(nv(t[i]))return t[i];return null}function av(t){var i;return t&&Number((null===(i=rv(t))||void 0===i?void 0:i.zIndex)||0)||0}function lv(t){const i=[];for(;t;)i.push(t),t=uv(t);return i}function uv(t){var i;return(null===(i=t.parentNode)||void 0===i?void 0:i.host)||t.parentNode}const cv=t=>t&&"resize"in t;class dv extends sg{constructor(t){if(super(),this.PD=new Map,this.BD=new Map,this.DD=new Map,this.ED=!0,this.RD=null,this.OD=null,this.zD=null,this.VD=null,this.ND=0,this.GD=0,this.$D=0,this.UD=!1,this.YD=!0,this.ui=!1,this.jD=Wi(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.U={x:100,y:100},this.HD=()=>{this.WD&&clearTimeout(this.WD),this.WD=setTimeout((()=>this.ta()),12)},this.XD=t=>{const i=t.intersectionRatio>0,s=t.target.getAttribute("data-lcjs-engine-id");if(s){const t=this.PD.get(s);if(t){const e=t.ZD();t.JD(i),i?this.BD.set(s,t):this.BD.delete(s),e!==i&&t.Ps()}}},this.QD=(t,i,s,e,h)=>{const r=h[0],n=this.gl;if(n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.OD.wD),n.clear(n.COLOR_BUFFER_BIT),r.On.getBoundingClientRect()){const t=r.KD();n.viewport(0,0,t.x,t.y),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.qD),n.uniform1i(this.ND,0),n.uniformMatrix4fv(this.GD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.zD),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.$D,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),r.tE&&(r.tE.clearRect(0,0,r.tE.canvas.width,r.tE.canvas.height),r.tE.drawImage(this.iE,0,this.iE.height-t.y,t.x,t.y,0,0,r.tE.canvas.width,r.tE.canvas.height))}},this.sE=(t,i,s,e,h)=>{const r=this.gl;r.bindFramebuffer(null==r?void 0:r.FRAMEBUFFER,null),r.useProgram(this.OD.wD),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.On.getBoundingClientRect();if(h){const s=h.right-h.left,n=h.bottom-h.top,o=h.left,a=e-h.bottom;r.viewport(o*this.eE-t*this.eE,a*this.eE+i*this.eE,s*this.eE,n*this.eE)}r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.qD),r.uniform1i(this.ND,0),r.uniformMatrix4fv(this.GD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r.bindBuffer(r.ARRAY_BUFFER,this.zD),r.enableVertexAttribArray(0),r.vertexAttribPointer(this.$D,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.hE=(t,i,s,e,h)=>{const r=h[0],n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT);const o=r.KD();n.bindFramebuffer(n.READ_FRAMEBUFFER,r.rE[1]),n.blitFramebuffer(0,0,o.x,o.y,0,this.iE.height-o.y,o.x,this.iE.height,n.COLOR_BUFFER_BIT,n.LINEAR),r.tE&&(r.tE.clearRect(0,0,r.tE.canvas.width,r.tE.canvas.height),r.tE.drawImage(this.iE,0,0)),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.nE=(t,i,s,e,h)=>{const r=this.gl2.ctx;r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.clear(r.COLOR_BUFFER_BIT),h.forEach((s=>{const h=s.On.getBoundingClientRect();if(h){const n=h.right-h.left,o=h.bottom-h.top,a=h.left,l=e-h.bottom,u=s.KD();r.bindFramebuffer(r.READ_FRAMEBUFFER,s.rE[1]),r.blitFramebuffer(0,0,u.x,u.y,a*this.eE-t*this.eE,l*this.eE+i*this.eE,(a-t+n)*this.eE,(l+i+o)*this.eE,r.COLOR_BUFFER_BIT,r.LINEAR)}})),r.bindFramebuffer(r.FRAMEBUFFER,null)},this.WD=void 0,this.Ba=t,!ti.requestAnimationFrame||!ti.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let i=1;if(t&&t.oE)i=!0===t.oE?ti.devicePixelRatio||1:t.oE||1;else{const t=ti.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(i=ti.devicePixelRatio||1)}this.eE=i,t.Da=!0===t.Da,this.YD=!1!==t.aE,this.lE=!1!==t.uE,this.cE=t.cE||!1;let s=!1;if(t.iE)if("string"==typeof t.iE){const i=ti.document.getElementById(t.iE);if(!i)throw new Error(`Canvas "${t.iE}" doesn't exist.`);this.iE=i,s=!0}else this.iE=t.iE,s=!0;else this.iE=ti.document.createElement("canvas");const e={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.dE&&t.dE){const i=this.iE.getContext("webgl",{...e,antialias:!!t.aE})||this.iE.getContext("experimental-webgl",{...e,antialias:!!t.aE});this.gl=i,this.fE=!1}else{const t=this.iE.getContext("webgl2",e);this.gl2={ctx:t},this.gl=t,this.fE=!0}if(!this.gl)throw new jA("No WebGL context available."+((null==t?void 0:t.dE)?`\nSelected explicit target: WebGL ${t.dE}`:""));const h=[];if(this.AE={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.AE).forEach((t=>{null===this.AE[t]&&h.push(t)})),this.fE)this.gE=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.ED=!1),Object.keys(t).forEach((i=>{null===t[i]&&h.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.gE=!!i.OES_texture_float,this.gl1={ctx:this.gl,AE:t,optional:i}}const n=h;if(n.length>0&&!1!==t.Da){const t=ti.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=ti.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),ti.document.body.appendChild(t),t.appendChild(i),ti.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",n.join(", "))}if(this.vE=this.cE?this.yE(this.fE?this.hE.bind(this):this.QD.bind(this)).bind(this):this.pE(this.fE?this.nE.bind(this):this.sE.bind(this)).bind(this),ti.ResizeObserver){const t=t=>{for(const i of t)i.target===this.iE&&this.mE()};this.za=new ti.ResizeObserver(t.bind(this)),this.za.observe(this.iE)}if(this.SE=((t,i)=>{const s=t,e=new Map,h=new Map,r=new Map,n={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},o=(t,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(i){const i=t.match(/#extension.*/g);i&&r.push(...i),t=t.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const i=e.find((t=>"fragOutput"===t.type));t=(t=i?`out ${i.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:t=`${h.join("\n")}\n${t}`,info:n}};return(...t)=>{const a=i?"webgl1":"webgl2";let l,u,c,d,f,A,g,v,y;try{const i=ti.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,i)=>{const s=t.map((s=>s.apply(t,i))),e=s.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),h=s.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),r=`vert: ${e} frag: ${h}`;let n,o=!1,a=!1;const l=[];let u;const c=[],d=[];if(s.forEach((t=>{if(t.defaultVertexShader&&(o||(n=t.defaultVertexShader)),t.vertexShader){if(n&&o&&n!==t.vertexShader)throw new Ug(`Conflicting vertex shader templates ${n} vs ${t.vertexShader}`,r,t);n=t.vertexShader,o=!0}if(t.vertexShaderModifiers)for(const i of t.vertexShaderModifiers)void 0!==i&&!1!==i&&l.push(i);if(t.defaultFragmentShader&&(a||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&a&&u!==t.fragmentShader)throw new Ug(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,r,t);u=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const i of t.fragmentShaderModifiers)void 0!==i&&!1!==i&&c.push(i);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!!t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.yD}))&&("webgl1"===i?l.push(Ig("attribute float aInstanceID"),Pg("int iInstance = int(aInstanceID)")):l.push(Pg("int iInstance = gl_InstanceID"))),!!t.find((t=>{var i;return null===(i=t.dD)||void 0===i?void 0:i.pD}))&&("webgl1"===i?l.push(Ig("attribute float aVertexID"),Pg("int iVertex = int(aVertexID)")):l.push(Pg("int iVertex = gl_VertexID"))),!n)throw new Ug("No vertex shader template defined",r);if(!u)throw new Ug("Fragment shader not defined",r);return{id:r,vertexShader:{id:e,template:n,modifiers:l},fragmentShader:{id:h,template:u,modifiers:c},hints:d}})(l,a);const p=r.get(u.id);if(c="new",p)return c="existing",A=p.vertexShaderSrc,g=p.fragmentShaderSrc,p;const m=u.vertexShader.id;let S=e.get(m);if(S)A=S.src,d="existing";else{d="new";const t=new kg(u.vertexShader.modifiers).build(Kg[u.vertexShader.template]),{source:i,info:h}=o(t,"vertex");A=i,v=h,S=new iv(m,i,s,h),e.set(m,S),n.vertexShaders+=1}const b=u.fragmentShader;let x;const M=b.id;if(x=h.get(M),x)g=x.src,f="existing";else{f="new";const t=qg[b.template],i=new kg([...b.modifiers]).build(t),{source:e,info:r}=o(i,"fragment",u.hints);g=e,y=r,x=new sv(M,e,s,r),h.set(M,x),n.fragmentShaders+=1}const w=new ev(S,x,s,u);return r.set(u.id,w),n.programs+=1,n.totalMs+=ti.performance.now()-i,w}catch(t){throw Ji(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return ti.alert(t),new Error(t)}))}}})(this.gl,!this.fE),this.lD=(()=>{const t=ti.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new jA("Failed to get Text canvas rendering context");return i.fillStyle="#fff",(s,e,h,n)=>{const o=`${e.style} ${e.weight} ${e.size*h}px ${e.family}`;i.font=o,i.textBaseline="alphabetic",i.textAlign="left";const a=i.measureText(s);if(0===a.width)return;const l=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),u=a.width,c=Math.round(e.size*h),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=l>0?l:u,t.height=2*c,i.font=o,i.textBaseline="alphabetic",i.textAlign="left",n?(i.clearRect(0,0,t.width,t.height),i.fillStyle="#fff"):(i.fillStyle="rgba(255,255,255,0)",i.fillRect(0,0,t.width,t.height),i.fillStyle="#000"),i.fillText(s,d,c);const f=i.getImageData(0,0,t.width,t.height);let A=0,g=0;const v=f.width;for(let t=0;t<f.height;t+=1){for(let i=0;i<v;i+=1)if(0!==f.data[t*v*4+4*i+3]){A=t;break}if(0!==A)break}for(let t=f.height-1;t>=0;t-=1){for(let i=0;i<v;i+=1)if(0!==f.data[t*v*4+4*i+3]){g=t;break}if(0!==g)break}const y=i.canvas.height/2-A,p=g-A+1,m=v,S=new Uint8ClampedArray(m*p*1);for(let t=0;t<p;t+=1)for(let i=0;i<m;i+=1)S[1*t*m+1*i+0]=f.data[(t+A)*m*4+4*i+3];return[S,{advance:u,offsetX:d,baseline:y,glyph:s,size:r(m,p)}]}})(),t.bE||(this.cE?this.iE.style.display="none":(this.iE.style.position="absolute",this.iE.style.top="0",this.iE.style.left="0",this.iE.style.right="0",this.iE.style.bottom="0",this.iE.style.width="100%",this.iE.style.height="100%",this.iE.style.boxSizing="content-box",this.iE.style.display="block",this.iE.style.pointerEvents="none")),this.iE.classList.add("lcjs-canvas"),t.xE&&this.iE.setAttribute("data-lcjs-id",t.xE),s||ti.document.body.appendChild(this.iE),ti.IntersectionObserver&&(this.ME=new ti.IntersectionObserver((t=>{for(let i=0;i<t.length;i+=1){const s=t[i];this.XD(s)}}),{threshold:Array.from(Array(100)).map(((t,i)=>i/100))})),ti.addEventListener("resize",this.HD,{passive:!0}),!this.fE){if(this.OD=this.SE(Qg["2DCompose"],Qg.Color({dataType:"texture-coord-calc-gpu"}),Qg.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.OD.wD)throw new jA("Unable to setup composition shader!");const t=this.gl,i=t.getUniformLocation(this.OD.wD,"uColorTexture");if(!i)throw new jA("Unable to setup composition shader! Failed to find uColorTexture");const s=t.getUniformLocation(this.OD.wD,"uMatrix");if(!s)throw new jA("Unable to setup composition shader! Failed to find uMatrix");this.ND=i,this.GD=s,this.$D=t.getAttribLocation(this.OD.wD,"aPos"),this.zD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.zD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.VD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.VD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}yE(t){return i=>{this.RD=null;const s=this.gl.canvas,e=Array.from(this.BD.values());this.UD=!1,e.forEach((e=>{const h=e.KD();(this.U.x<h.x||this.U.y<h.y)&&(this.U.x=Math.max(this.U.x,h.x),this.U.y=Math.max(this.U.y,h.y),s instanceof HTMLCanvasElement&&(s.width=this.U.x,s.height=this.U.y)),e.na&&e.wE(i),t(0,0,0,0,[e])})),this.UD&&this.mE()}}pE(t){return i=>{this.RD=null,"style"in this.gl.canvas&&!this.Ba._E&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const s=this.gl.canvas,e=this.iE.clientHeight,h=this.iE.clientWidth;let r=0,n=0;if(s instanceof HTMLCanvasElement){s.width===h*this.eE&&s.height===e*this.eE||(s.width=h*this.eE,s.height=e*this.eE);const t=s.getBoundingClientRect();r=t.x,n=t.y}const o=Array.from(this.BD.values());this.UD=!1,o.sort(((t,i)=>t.kE()-i.kE())).forEach((t=>{t.na&&t.wE(i)})),t(r,n,h,e,o),this.UD&&this.mE()}}mE(t){return cv(this.gl)||(!this.UD&&t&&(this.UD=!0),this.RD||this.ui||(this.RD=ti.requestAnimationFrame(this.vE))),this}CE(t){const i=this.jD();return t.On.setAttribute("data-lcjs-engine-id",i),this.PD.set(i,t),t.TE(this.PD.size-1),t.JD(!0),this.BD.set(i,t),this.ME&&this.ME.observe(t.On),this.WD&&clearTimeout(this.WD),this.WD=setTimeout((()=>this.ta()),0),this}FE(t){const i=t.On.getAttribute("data-lcjs-engine-id");return i?(this.PD.delete(i),this.BD.delete(i),this.ME&&this.ME.unobserve(t.On),t.On.removeAttribute("data-lcjs-engine-id"),this):this}ta(){if(this.ME){const t=this.ME.takeRecords();for(let i=0;i<t.length;i+=1){const s=t[i];this.XD(s)}}return!this.cE&&this.lE&&Array.from(this.PD.values()).sort(((t,i)=>function(t,i){if(t===i)return 0;const s={a:lv(t),b:lv(i)};let e;for(;s.a[s.a.length-1]===s.b[s.b.length-1];)t=s.a.pop(),i=s.b.pop(),e=t;const h=av(ov(s.a)),r=av(ov(s.b));if(h===r&&e){const t=e.childNodes,i={a:s.a[s.a.length-1],b:s.b[s.b.length-1]};let h=t.length;for(;h--;){const s=t[h];if(s===i.a)return 1;if(s===i.b)return-1}}return Math.sign(h-r)}(t.On,i.On))).forEach(((t,i)=>t.TE(i))),this.mE(!0),this}FB(){return this.mE(),this}IE(){this.ui||this.PD.forEach((t=>t.Bg.layout()))}N(){var t;if(this.ui)return;this.ui=!0,super.N(),this.RD&&(ti.cancelAnimationFrame(this.RD),this.RD=null),this.UD=!1,this.za&&(this.za.disconnect(),this.za=void 0),this.ME&&(this.ME.disconnect(),this.ME=void 0),ti.removeEventListener("resize",this.HD),this.HD=void 0,this.PD.forEach((t=>{t.N()})),this.PD.clear(),Array.from(this.DD.values()).forEach((t=>{t.wc(!0)})),this.DD.clear();const i=this.gl;i.deleteBuffer(this.zD),i.deleteBuffer(this.VD),this.iE&&!this.Ba.iE?(this.iE.width=1,this.iE.height=1,null===(t=this.iE.parentElement)||void 0===t||t.removeChild(this.iE),this.iE=void 0):this.iE=void 0,this.SE=void 0,this.lD=void 0,this.vE=()=>{},this.AE.WEBGL_lose_context&&this.AE.WEBGL_lose_context.loseContext()}}const fv=(t,i,s,e)=>h=>{const r={theme:$f,...s,...h},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new QA(n.Ba,h,n,n.N.bind(n),r,o);return n.Qa((t=>a.Mc(t))).Ja((()=>a.Y())).Ps(),a},Av=(t,i)=>{t.Qa((t=>{i.th(t)})).Ja((()=>i.Y())).Ps()},gv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new al(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,null==h?void 0:h.legend);return Av(n,a),a},vv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Qc(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h);return Av(n,a),a},yv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new lf(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h);return Av(n,a),a},pv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new gd(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h);return Av(n,a),a},mv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(h&&h.type?h.type:EA)(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},Sv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new gA(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},bv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(h&&h.type?h.type:Ld)(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},xv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new(h&&h.type?h.type:Hd)(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},Mv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Lu(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h,void 0);return Av(n,a),a},wv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new su(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},_v=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new Hf(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0);return Av(n,a),a},kv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new iA(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},Cv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new rd(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h);return Av(n,a),a},Tv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i||e?qA(n,e,null==s?void 0:s.licenseInformation):void 0,a=new fA(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,h);return Av(n,a),a},Fv=(t,i,s,e)=>h=>{const r={...s,...h,theme:(null==h?void 0:h.theme)||$f},n=t(r),o=i?qA(n,e):void 0,a=new xA(n.Ba,UA(n,1).VP(0),K,n.N.bind(n),o,void 0,h);return Av(n,a),a},Iv={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>Iv.multiply(t,Iv.translation(i,s,e)),xRotate:(t,i)=>Iv.multiply(t,Iv.xRotation(i)),yRotate:(t,i)=>Iv.multiply(t,Iv.yRotation(i)),zRotate:(t,i)=>Iv.multiply(t,Iv.zRotation(i)),rotateXYZ(t,i){let s=Iv.xRotate(t,i.x);return s=Iv.yRotate(s,i.y),s=Iv.zRotate(s,i.z),s},scale:(t,i,s,e)=>Iv.multiply(t,Iv.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],l=i[7],u=i[8],c=i[9],d=i[10],f=i[11],A=i[12],g=i[13],v=i[14],y=i[15],p=t[0],m=t[1],S=t[2],b=t[3],x=t[4],M=t[5],w=t[6],_=t[7],k=t[8],C=t[9],T=t[10],F=t[11],I=t[12],L=t[13],P=t[14],B=t[15],D=[];return D[0]=s*p+e*x+h*k+r*I,D[1]=s*m+e*M+h*C+r*L,D[2]=s*S+e*w+h*T+r*P,D[3]=s*b+e*_+h*F+r*B,D[4]=n*p+o*x+a*k+l*I,D[5]=n*m+o*M+a*C+l*L,D[6]=n*S+o*w+a*T+l*P,D[7]=n*b+o*_+a*F+l*B,D[8]=u*p+c*x+d*k+f*I,D[9]=u*m+c*M+d*C+f*L,D[10]=u*S+c*w+d*T+f*P,D[11]=u*b+c*_+d*F+f*B,D[12]=A*p+g*x+v*k+y*I,D[13]=A*m+g*M+v*C+y*L,D[14]=A*S+g*w+v*T+y*P,D[15]=A*b+g*_+v*F+y*B,D},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],A=t[12],g=t[13],v=t[14],y=t[15],p=d*y,m=v*f,S=a*y,b=v*l,x=a*f,M=d*l,w=h*y,_=v*r,k=h*f,C=d*r,T=h*l,F=a*r,I=u*g,L=A*c,P=n*g,B=A*o,D=n*c,E=u*o,R=s*g,O=A*e,z=s*c,V=u*e,N=s*o,G=n*e,$=p*o+b*c+x*g-(m*o+S*c+M*g),U=m*e+w*c+C*g-(p*e+_*c+k*g),Y=S*e+_*o+T*g-(b*e+w*o+F*g),j=M*e+k*o+F*c-(x*e+C*o+T*c),H=1/(s*$+n*U+u*Y+A*j);return i[0]=H*$,i[1]=H*U,i[2]=H*Y,i[3]=H*j,i[4]=H*(m*n+S*u+M*A-(p*n+b*u+x*A)),i[5]=H*(p*s+_*u+k*A-(m*s+w*u+C*A)),i[6]=H*(b*s+w*n+F*A-(S*s+_*n+T*A)),i[7]=H*(x*s+C*n+T*u-(M*s+k*n+F*u)),i[8]=H*(I*l+B*f+D*y-(L*l+P*f+E*y)),i[9]=H*(L*r+R*f+V*y-(I*r+O*f+z*y)),i[10]=H*(P*r+O*l+N*y-(B*r+R*l+G*y)),i[11]=H*(E*r+z*l+G*f-(D*r+V*l+N*f)),i[12]=H*(P*d+E*v+L*a-(D*v+I*a+B*d)),i[13]=H*(z*v+I*h+O*d-(R*d+V*v+L*h)),i[14]=H*(R*a+G*v+B*h-(N*v+P*h+O*a)),i[15]=H*(N*d+D*h+V*a-(z*a+G*d+E*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,0,0,2/(e-s),0,0,0,0,2/(h-r),0,(t+i)/(t-i),(s+e)/(s-e),(h+r)/(h-r),1],quaternionToRotationMatrix(t){const i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]),s=[t[0]/i,t[1]/i,t[2]/i,t[3]/i],e=s[0]+s[0],h=s[1]+s[1],r=s[2]+s[2],n=s[0]*e,o=s[0]*h,a=s[0]*r,l=s[1]*h,u=s[1]*r,c=s[2]*r,d=s[3]*e,f=s[3]*h,A=s[3]*r;return[1-(l+c),o-A,a+f,0,o+A,1-(n+c),u-d,0,a-f,u+d,1-(n+l),0,0,0,0,1]}};function Lv(t,i,s,e,h,r){let n=i.x.Bt(t.max.x),o=i.x.Bt(t.min.x),a=i.y.Bt(t.max.y),l=i.y.Bt(t.min.y),u=n-o,c=a-l;if(u<1){const t=(o+n)/2;o=t-.5,n=t+.5,u=1}if(c<1){const t=(l+a)/2;l=t-.5,a=t+.5,c=1}const d=u/c,f=u*s.x,A=c*s.y,g=u-f,v=c-A,y=f>g?[g,f]:[f,g],p=A>v?[v,A]:[A,v];let m,S,b=1,x=1;switch(e){default:case R.closestSide:if(m=y[0]/u,S=p[0]/c,h===E.circle){const t=Math.min(m*d,S);b=t,x=t}else b=m*d,x=S;break;case R.farthestSide:if(m=y[1]/u,S=p[1]/c,h===E.circle){const t=Math.max(m*d,S);b=t,x=t}else b=m*d,x=S;break;case R.closestCorner:if(S=p[0]/c,h===E.circle){m=y[0]/u*d;const t=Math.sqrt(m*m+S*S);b=t,x=t}else{m=y[0]/u;const t=Math.sqrt(m*m+S*S);b=t*d,x=t}break;case R.farthestCorner:if(S=p[1]/c,h===E.circle){m=y[1]/u*d;const t=Math.sqrt(m*m+S*S);b=t,x=t}else{m=y[1]/u;const t=Math.sqrt(m*m+S*S);b=t*d,x=t}}return{bounds:[o*r,l*r,u*r,c*r],center:[s.x*d,s.y],distance:[Math.max(b,1e-4),Math.max(x,1e-4)],aspectRatio:d}}function Pv(t,i,s,e){const h=i.x.Bt(t.max.x),n=i.x.Bt(t.min.x),o=i.y.Bt(t.max.y),a=i.y.Bt(t.min.y),l=h-n,u=o-a,c=Math.abs(l*Math.sin(s))+Math.abs(u*Math.cos(s)),d=r(l/2-Math.sin(s)*(c/2),u/2-Math.cos(s)*(c/2)),f=r(l/2+Math.sin(s)*(c/2),u/2+Math.cos(s)*(c/2));return{bounds:[n*e,a*e,l*e,u*e],startPoint:[d.x*e,d.y*e],endPoint:[f.x*e,f.y*e]}}class Bv{constructor(t){this.XB=t}}class Dv{constructor(){this.LE=new Array,this.PE=t=>(this.LE.push(t),t),this.BE=this.PE(new Map),this.DE=this.PE(new Map),this.EE=this.PE(new Map),this.RE=this.PE(new Map),this.OE=this.PE(new Map),this.zE=this.PE(new Map),this.VE=this.PE(new Map),this.NE=this.PE(new Map)}GE(){this.LE.forEach((t=>{t.forEach((t=>t.GE())),t.clear()}))}}const Ev=(t,i,s=void 0)=>()=>{t.$E=i,s&&s()},Rv=(t,i,s,e,h)=>{const r=Math.min(s/t,e/i),n=t*r,o=i*r,a=s/n,l=e/o,u=n/s,c=o/e;let d=0,f=1,A=0,g=1;switch(h){case Ot.Fill:l<a?(d=0,f=1,A=.5+-u/2,g=.5+u/2):(A=0,g=1,d=.5+-c/2,f=.5+c/2);break;case Ot.Fit:l<a?(A=0,g=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,A=.5+-l/2,g=.5+l/2);break;case Ot.Center:{const h=s/t,r=e/i;d=.5+-h/2,f=.5+h/2,A=.5+-r/2,g=.5+r/2}break;case Ot.Tile:d=0,f=s/t,A=0,g=e/i;break;case Ot.Stretch:default:d=0,f=1,A=0,g=1}return new Float32Array([d,g,f,g,f,A,d,A])};class Ov{constructor(t,i){if(this.UE=0,this.YE=0,this.jE=!1,this.$E=!1,this.HE=!1,this.WE=!1,this.XE=!1,this.ZE=new Set,this.JE=new Set,this.Zs=i,this.MD=t,this.QE=null,this.jE=i instanceof ti.HTMLVideoElement,this.Zs instanceof ti.HTMLImageElement)this.Zs.addEventListener("load",(()=>{this.WE=!0,this.KE()})),this.Zs.addEventListener("error",(()=>{this.XE=!0})),this.Zs.complete&&(this.WE=!0,this.KE());else if(this.Zs instanceof ti.HTMLVideoElement){const t=this;this.Zs.addEventListener("canplay",(function(){t.YE=this.videoHeight,t.UE=this.videoWidth,t.WE=!0,t.KE()}),!0),this.Zs.addEventListener("play",Ev(this,!0,(()=>this.KE()))),this.Zs.addEventListener("playing",Ev(this,!0,(()=>this.KE()))),this.Zs.addEventListener("pause",Ev(this,!1)),this.Zs.addEventListener("ended",Ev(this,!1)),this.Zs.readyState>=1&&(this.UE=this.Zs.videoWidth,this.YE=this.Zs.videoHeight,this.$E=!this.Zs.paused,this.WE=!0,this.KE())}else this.WE=!0,this.KE()}Qc(t){0===this.JE.size&&this.WE&&this.KE(),this.JE.add(t)}nD(t){this.JE.delete(t),0===this.JE.size&&this.unbindResources()}qE(t){this.ZE.add(t),this.HE&&(t(),this.tR(t))}tR(t){this.ZE.delete(t)}KE(){if(this.XE||this.HE||!this.WE)return;const t=this.MD.gl;if(!this.QE&&this.Zs&&t){this.QE=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.QE),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Zs,n=this.UE>0?this.UE:r.width,o=this.YE>0?this.YE:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.UE=n,this.YE=o,t.bindTexture(t.TEXTURE_2D,null)}this.HE=!0,this.ZE&&this.ZE.forEach((t=>{t(),this.tR(t)}))}Vr(){const t=this.MD.gl;if(!this.XE&&this.HE&&this.QE){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.Zs;r&&(t.bindTexture(t.TEXTURE_2D,this.QE),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}iR(){return this.QE}unbindResources(){return this.HE&&(this.QE&&(this.MD.QB(this.QE),this.QE=null),this.HE=!1),this}}class zv extends Ft{constructor(t,i,s){super(t.gi,i,s),this.rv=!0,this.sv=d(lh),this.Hs=t,this.oi=t.oi}sR(){var t;return this.sv.o&&this.sv.C().type!==(null===(t=this.eR)||void 0===t?void 0:t.type)}uv(t){return this.rv=t,this}}const Vv=(t,i,s,e)=>{const h=t.hR(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o=Math.round(s.offset.x*h),a=Math.round(s.offset.y*h),l=t.rR(),u=t.nR(),c=t.oR(),d=t.aR(),f=t.lR();t.uR("disabled"),t.uv(!1),t.cR(!1);const A=t.gi.ia.fE,g=i.dR(),v=r+n/2,y=((t,i,s,e)=>{const h=t.gl,r=t.hR(),n=t.fR();t.AR(h.FRAMEBUFFER,e.frameBuffer),h.bindRenderbuffer(h.RENDERBUFFER,e.depthBuffer),h.bindTexture(h.TEXTURE_2D,e.texture),h.clearDepth(1),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);const o=e.sizeDpr;t.gR(0,0,o.x,o.y);const a=[],l=t.gi.ia.fE;return i.forEach((i=>{let e;if(i instanceof Tn){e=i.ls||i.Hs.Kg();let t=!1;if(!e){const s=i.Hs.vR(i);s&&s.max.x-s.min.x>0&&s.max.y-s.min.y>0&&(e={x:s.min.x,y:s.min.y,width:s.max.x-s.min.x,height:s.max.y-s.min.y},t=!0)}e&&(e.width>0&&e.height>0?(t&&(e.x-=s.left/r,e.y-=s.top/r,e.width+=(s.left+s.right)/r,e.height+=(s.top+s.bottom)/r),a.push({x:e.x,y:e.y,width:e.width,height:e.height})):e=void 0)}else i instanceof zv&&(e=i.Hs.km());if(e){const i=e.x+(l?0:s.left),h=e.y+(l?0:s.bottom),n=Math.max(e.width-(l?0:s.left+s.right),0),o=Math.max(e.height-(l?0:s.bottom+s.top),0);t.yR(i*r,h*r,n*r,o*r)}else t.cR(!1);i.Mc(2,0)})),t.AR(h.FRAMEBUFFER,n),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),t.cR(!1),a})(t,e,{left:v+(o<0?-o:0),top:v+(a>0?a:0),right:v+(o>0?o:0),bottom:v+(a<0?-a:0)},g),p=g,m=r+n+5,S=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Ms(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=Os(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Tn||t instanceof zv?t.Hs.vR(t):Ss;if(Ki(i))return Ss;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?Ss:h})).filter((t=>!Ki(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=Js(t.min,e),s=Js(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.pR(n),vertexCount:r}})(t,e,{left:m+(o<0?-o:0),top:m+(a>0?a:0),right:m+(o>0?o:0),bottom:m+(a<0?-a:0)},i.mR()),b=i.dR(p),x=t.SE(Qg["2D"],Qg.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),Qg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl,o=t.fR();t.AR(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearDepth(1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.gR(0,0,s.sizeDpr.x,s.sizeDpr.y),t.SR(e,((o,a,l,u)=>(t.Qc(e),r&&r(o),t.wR(o("uIsHighlighted"),0).$I(o("uHighlightColorOffset"),C).wR(o("uRenderEffectMask"),0).MR(o("uTexture"),i.texture,0).xR(u("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).xR(o("uScale"),s.uniforms._R()).xR(o("uDisp"),s.uniforms.kR()).xR(o("uScaling"),[s.size.x,s.size.y]).xR(o("uTranslationAxis"),[0,0]).bR(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Vk(n.TRIANGLES,h.vertexCount,0),!0))),t.AR(n.FRAMEBUFFER,o),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,p,b,x,S,((i,s,e,h)=>(t.xR(i("uOffsetPx"),[o+1,a+1]),!0))),t.cR(u),t.CR(f),A&&(((t,i)=>{if(void 0===i||i.length<1)return;const s=t.gl,e=6*i.length*2,h=[e];let r=0;for(let t=0;t<i.length;t+=1){const s=i[t];h[r+0]=s.x,h[r+1]=s.y,h[r+2]=s.x+s.width,h[r+3]=s.y,h[r+4]=s.x,h[r+5]=s.y+s.height,h[r+6]=s.x+s.width,h[r+7]=s.y,h[r+8]=s.x+s.width,h[r+9]=s.y+s.height,h[r+10]=s.x,h[r+11]=s.y+s.height,r+=12}const n=t.pR(h,!0),o={x:t.gi._t().x,y:t.gi._t().y},a=K.d2({scaleXYConstructor:J}).X(o).ti(0,o.x).ii(0,o.y),l=new Uv;l.TR(a);const u=t.SE(Qg["2D"],Qg.VertexLocation({scaling:{dataType:"uniform"},translation:void 0,axisWorldTranslation:"linear",normalSource:void 0}),Qg.Color({dataType:"uniform"}));t.FR(!0),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,1,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),t.Qc(u).LR(u.ID("aPos"),n).xR(u.TD("uDisp"),l.kR()).xR(u.TD("uScaling"),[1,1]).xR(u.TD("uScale"),l._R()).IR(u.TD("uColor"),[1,1,1,1]).Vk(s.TRIANGLES,e/2),t.PR(n),s.colorMask(!0,!0,!0,!0)})(t,y),t.gl.stencilFunc(t.gl.EQUAL,1,255),t.gl.stencilOp(t.gl.KEEP,t.gl.KEEP,t.gl.KEEP),t.FR(!0));const M=t.SE(Qg["2D"],Qg.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),Qg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.gi._t().x,y:t.gi._t().y};t.gR(0,0,n.x*t.hR(),n.y*t.hR());const o=K.d2({scaleXYConstructor:J}).X(n).ti(0,n.x).ii(0,n.y),a=new Uv;a.TR(o),t.SR(s,((o,l,u,c)=>(t.Qc(s),h&&h(o),t.wR(o("uIsHighlighted"),0).$I(o("uHighlightColorOffset"),C).wR(o("uRenderEffectMask"),0).MR(o("uTexture"),i.texture,0).xR(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).xR(o("uScale"),a._R()).xR(o("uDisp"),a.kR()).xR(o("uScaling"),[n.x,n.y]).xR(o("uTranslationAxis"),[0,0]).bR(e.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Vk(r.TRIANGLES,e.vertexCount,0),!0)))})(t,g,M,S,((i,e,h,r)=>(t.MR(i("uTextureFirstGlowPass"),b.texture,1).$I(i("uGlowColor"),s.color),!0))),t.gR(l.x,l.y,l.width,l.height),t.uR(c),t.uv(d),t.PR(S.vertexBuffer),A&&t.FR(!1)};class Nv{constructor(t){this.BR=[],this.XB=t}DR(t,i){Vv(this.XB,this,i,t)}mR(){const t=this.XB.gi._t();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}dR(...t){const i=this.BR,s=this.mR(),e={x:Math.ceil(s.x*this.XB.hR()),y:Math.ceil(s.y*this.XB.hR())},h=this.XB.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.X(s).ti(0,s.x).ii(0,s.y),r.uniforms.TR(r.scale)),r;const n=h.createTexture(),o=this.XB.ER(),a=this.XB.RR();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.XB.fR();this.XB.AR(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),this.XB.AR(h.FRAMEBUFFER,l),h.bindRenderbuffer(h.RENDERBUFFER,null);const u=K.d2({scaleXYConstructor:J}).X(s).ti(0,s.x).ii(0,s.y),c=new Uv;c.TR(u);const d={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:c};return i.push(d),d}N(){[this.BR].forEach((t=>{t.forEach((t=>{this.XB.OR(t.depthBuffer),this.XB.zR(t.frameBuffer),this.XB.QB(t.texture)})),t.length=0}))}}class Gv{constructor(t,i,s,e,h=!0){this.VR=new Dv,this.NR=new Map,this.GR=new Map,this.$R=[],this.oE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(ti.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.rv=!1,this.UR=!1,this.xR=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.YR=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.IR=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.jR=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.HR=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.WR=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this.$I=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.wR=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.XR=(t,i)=>(this.gl.uniform1i(t,i),this),this.MR=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new jA("Could not bind a texture.")},this.ZR=t=>(((t,i)=>{i===Ot.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.pR=(t,i=!1,s,e=Float32Array)=>{const h=t.length,r=this.JR(h,s);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof e?t:new e(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new jA("Could not create vertex buffer")},this.QR=(t,i,s,e=Float32Array)=>{const h=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),i&&i.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,i instanceof e?i:new e(i),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,t*e.BYTES_PER_ELEMENT,this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof e?i:new e(i))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new jA("Could not create vertex buffer")},this.KR=(t,i,s,e=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*e.BYTES_PER_ELEMENT,s instanceof e?s:new e(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.qR=(t,i,s,e,h)=>{if(e&&t&&(t.usedSize=0),!t){const t=i.length+s,e=new h(t);return e.set(i),{buffer:this.QR(t,e,void 0,h),dataCache:e,preallocSize:t,usedSize:i.length}}if(t.usedSize+i.length>t.preallocSize){const e=t.usedSize+i.length+s,r=new h(e);return r.set(t.dataCache),r.set(i,t.usedSize),{buffer:this.QR(e,r,t.buffer,h),dataCache:r,preallocSize:e,usedSize:t.usedSize+i.length}}return t.dataCache.set(i,t.usedSize),this.KR(t.buffer,t.usedSize,i,h),t.usedSize+=i.length,t},this.tO=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.iO=(t,i)=>{const s=t.length,e=this.JR(s,i);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new jA("Could not create index buffer")},this.sO=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new jA("Could not create float buffer")},this.LR=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.eO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.bR=(t,i,...s)=>{var e;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const h=s.length;let r=0;for(let t=0;t<h;t+=1)r+=s[t].size;for(let t=0;t<h;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let n=0;for(let t=0;t<h;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT+(null!==(e=i.extraOffset)&&void 0!==e?e:0)),n+=i.size}if(void 0!==i)for(let t=0;t<h;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.hO(e,i)}return this},this.rO=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.nO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.oO=(t,i,s,e=0)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,e),this.gl.enableVertexAttribArray(t),void 0!==s&&this.hO(t,s)),this),this.aO=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.lO=null,this.Vk=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.uO=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.cO=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.AE.ANGLE_instanced_arrays)return ti.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.AE.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.dO=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.AE.ANGLE_instanced_arrays)return ti.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.AE.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.hO=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.AE.ANGLE_instanced_arrays)return ti.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.AE.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.fO=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h);const r=this.fR();this.AR(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const n=this.nR();n&&this.cR(!1),t(),n&&this.cR(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.AR(this.gl.FRAMEBUFFER,r)},this.zi=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.AO=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.Qc=t=>(this.gl.useProgram(t.wD),this),this.gO=!1,this.vO=[],this.gi=t,this.Lg=i,this.gi=t,this.gl=s.ctx,this.yO=s.antialias,this.pO=!!this.gi.ia.ED&&s.lineAntialias,this.gE=this.gi.ia.gE,this.mO=new Map,this.gl1=this.gi.ia.gl1,this.gl2=this.gi.ia.gl2,h&&(this.CR(!0),this.SO()),this.AE=this.gi.ia.AE,this.JB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.iD=this.bO(),this.SE=this.gi.ia.SE,this.xO=new jv(this),this.lD=this.gi.ia.lD,this.MO=new Nv(this),this.DD=this.gi.ia.DD,this.wO=this.pR([0,0,1,0,1,1,0,1]),this._O=this.pR([0,0,1,0,0,1,0,1,1,0,1,1])}uR(t){return t!==this.kO&&(this.kO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}oR(){return this.kO||"disabled"}uv(t){return t!==this.rv&&(this.rv=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}FR(t){return t!==this.UR&&(this.UR=t,t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST)),this}aR(){return this.rv}CO(t){return this.oE=t,this}hR(){return this.oE}JR(t,i){let s;if(i){const e=this.mO.get(i);e&&e.size>=t&&e.size-t<1e6?s=i:this.PR(i)}return s||(s=this.gl.createBuffer(),this.mO.set(s,{size:t})),s}nx(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new jA("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}QB(t){this.gl.deleteTexture(t)}ER(){const t=this.gl.createFramebuffer();if(!t)throw new jA("Couldn't reserve Framebuffer.");return t}AR(t,i){this.lO=i,this.gl.bindFramebuffer(t,i)}fR(){return this.lO}zR(t){this.gl.deleteFramebuffer(t)}RR(){const t=this.gl.createRenderbuffer();if(!t)throw new jA("Couldn't reserve Render buffer.");return t}OR(t){this.gl.deleteRenderbuffer(t)}TO(){const t=this.gl;switch(t.checkFramebufferStatus(t.FRAMEBUFFER)){default:case t.FRAMEBUFFER_COMPLETE:ti.console.log("FRAMEBUFFER_COMPLETE");break;case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:ti.console.log("FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:ti.console.log("FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:ti.console.log("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_UNSUPPORTED:ti.console.log("FRAMEBUFFER_UNSUPPORTED")}}gR(t,i,s,e){return this.gl.viewport(t,i,s,e),this.FO&&t===this.FO.x&&i===this.FO.y&&s===this.FO.width&&e===this.FO.height||(this.FO={x:t,y:i,width:s,height:e}),this}rR(){return this.FO||{x:0,y:0,width:0,height:0}}yR(t,i,s,e){return this.cR(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}cR(t){return t===this.IO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.IO=t),this}CR(t){return t!==this.gO&&(this.gO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}lR(){return this.gO}SO(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}nR(){return void 0!==this.IO&&this.IO}SR(t,i){const s=new Hv(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}PR(t){t&&(this.gl.deleteBuffer(t),this.mO.delete(t))}LO(t,i,s){this.xR(t.uniform("uCenter"),i.center).xR(t.uniform("uDistance"),i.distance).IR(t.uniform("uBounds"),i.bounds).wR(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.$I(t.uniform(`color_${i}`),e[i].color).wR(t.uniform(`stop_${i}`),e[i].offset);return this}PO(t,i,s){this.xR(t.uniform("uStartPoint"),i.startPoint).xR(t.uniform("uEndPoint"),i.endPoint).IR(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this.$I(t.uniform(`color_${i}`),e[i].color).wR(t.uniform(`stop_${i}`),e[i].offset);return this}_r(t){const i=this.DD.get(t);if(!i){const i=new ug(this);return this.DD.set(t,i),i}return i}BO(t){const i=this.NR.get(t);if(!i){const i=new Ov(this,t);return this.DO(t,i),i}return i}DO(t,i){this.NR.set(t,i)}bO(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.Lg.Da&&ti.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}EO(t,i,s,e){if(s)this.bR(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.LR(s,i),void 0!==e&&this.hO(s,e)}return this}RO(){this.AE.WEBGL_lose_context&&this.AE.WEBGL_lose_context.loseContext()}OO(t){if(this.zO&&this.zO.bufferIdsCount>=t)return this.zO.buffer;this.zO&&(this.PR(this.zO.buffer),this.zO=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.pR(s);return this.zO={buffer:e,bufferIdsCount:i},e}VO(){return this.gl2?void 0:"attribute"}NO(t,i){if("attribute"===this.VO()){const s=this.OO(i);this.bR(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}GO(){return this.gl2?void 0:"attribute"}$O(t,i){if("attribute"===this.GO()){const s=this.OO(i);this.bR(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}UO(t,i,s,e,h,r,n,o,a){const l=t.createBuffer();return this.vO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),$v(t,(()=>this.gi.ui),t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.vO.splice(this.vO.indexOf(l),1)}))}YO(t,i,s,e,h,r,n,o){const a=this.gl,l=this.fR();this.AR(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),this.AR(this.gl.FRAMEBUFFER,l)}jO(t){const i=this.GR.get(t);if(!i){const i=this.gl.createTexture();if(!i)throw new jA("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,i);const e=[];let h=255;for(let i=0;i<t.length;i+=1){for(let s=0;s<t[i];s+=1)e.push(h);h=255===h?0:255}const r=e.length;if(!this.gl2&&(s=e.length)&s-1){const t=(t=>{t-=1;for(let i=1;i<32;i<<=1)t|=t>>1;return t+1})(e.length);for(let i=e.length;i<t;i+=1)e[i]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const n={HO:i,WO:r,XO:e.length};return this.GR.set(t,n),n}var s;return i}ZO(t,i,s){const{uniform:e}=t;this.$I(e("uFallbackColor"),i.getFallbackColor());for(let t=0;t<i.steps.length;t+=1)this.wR(e(`uLUTValue${t}`),i.steps[t].value),this.$I(e(`uLUTColor${t}`),i.steps[t].color);if(i.percentageValues){if(!s)return Ji(0,(()=>{})),this;this.wR(e("uMinValue"),s.min),this.wR(e("uMaxValue"),s.max)}return this}JO(t,i,s,e,h,r){const n=s&&s.getSource()||e&&e.Zs,o=s?s.getFitMode():Ot.Stretch,a=t=>{t.texCoordsBuffer=this.pR(r(t.texture.UE,t.texture.YE,o),!1,t.texCoordsBuffer)};if(n){let e=i;if((!i||n!==i.source)&&n){i&&(i.texture.nD(t),this.PR(i.texCoordsBuffer));const h=this.BO(n);h.Qc(t);const r=s?s.getSourceMissingColor():yr.color;e={texture:h,source:n,texCoordsBuffer:this.pR([]),sourceMissingTexture:this.nx(new Uint8Array([r.getR(),r.getG(),r.getB(),r.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&n&&(a(e),this.gi.Ps())}},h.qE(e.textureReadyCallback),a(e)}return e&&e.texture.HE&&e.texture.jE&&e.texture.$E&&(e.texture.Vr(),this.gi.Ps()),h&&e&&e.texture.HE&&a(e),e}i&&this.QO(t,i)}QO(t,i){i&&(i.texture.nD(t),i.texture.tR(i.textureReadyCallback),this.QB(i.sourceMissingTexture),this.PR(i.texCoordsBuffer))}KO(t,i,s,e){var h,r,n,o;const{uniform:a,uniformOptional:l,attribute:u}=t,c=s.oi,d=this.hR();if(this.$I(a("uHighlightColorOffset"),1===i||2===i?T:s.Si).wR(a("uRenderEffectMask"),2===i?1:0).xR(l("uRatioPxClip"),[2/this.gi._t().x,2/this.gi._t().y]).wR(l("uDevicePixelRatio"),d),void 0===e.highlightBuffer)this.wR(a("uIsHighlighted"),1===i||2===i?0:s.Ai);else{if(!e.highlightBuffer)throw new Error("Highlight buffer not supplied for attribute highlighting");this.bR(e.highlightBuffer,null!==(h=e.highlightAttribDivisor)&&void 0!==h?h:void 0,{location:u("aIsHighlighted"),size:1})}c instanceof J||c instanceof Rh?this.xR(a("uScale"),e.uniforms._R()).xR(a("uDisp"),e.uniforms.kR()).xR(l("uScaleStart_highpart"),e.uniforms.qO()).xR(l("uScaleStart_lowpart"),e.uniforms.tz()):c instanceof Q&&this.xR(l("uScaleStart"),e.uniforms.MixedScaleXY.uScaleStart).xR(l("uScaleStartLog"),e.uniforms.MixedScaleXY.uScaleStartLog).xR(l("uScaleInterval"),e.uniforms.MixedScaleXY.uScaleInterval).xR(l("uScaleIntervalLog"),e.uniforms.MixedScaleXY.uScaleIntervalLog).xR(a("uViewportStart"),e.uniforms.MixedScaleXY.uViewportStart).xR(a("uViewportSize"),e.uniforms.MixedScaleXY.uViewportSize);const f=!0===e.coordsHighPrecision;if(e.coordsX)if(f){const t=u("aPos_highpartX"),i=u("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.oO(u("aPosX"),e.coordsX);if(e.coordsY)if(f){const t=u("aPos_highpartY"),i=u("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(i,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(i)}else this.oO(u("aPosY"),e.coordsY);if(1===i){if(this.XR(a("uFirstId"),e.idFirst),void 0!==e.mousePickingOffsetBuffer){if(!e.mousePickingOffsetBuffer)throw new Error("No mouse picking offset buffer for attribute mouse picking");this.oO(u("aPickingIdOffset"),e.mousePickingOffsetBuffer,null!==(r=e.mousePickingOffsetAttribDivisor)&&void 0!==r?r:void 0)}}else{if(e.fillStyleSolid&&this.$I(a("uColor"),e.fillStyleSolid.getColor()),e.fillStylePaletted){if("value"===e.fillStylePaletted.getLookUpProperty()&&null!==e.lookupValueBuffer){if(!e.lookupValueBuffer)return!1;const t=u("aLookupValue");this.oO(t,e.lookupValueBuffer,e.lookupValueAttribDivisor,null!==(n=e.lookupValueBufferByteOffset)&&void 0!==n?n:0)}this.ZO(t,e.fillStylePaletted.lut,e.lookupValueRange)}if(e.fillStyleLinearGradient){if(!e.linearGradientInfo)return!1;this.PO(t,e.linearGradientInfo,e.fillStyleLinearGradient)}if(e.fillStyleRadialGradient){if(!e.radialGradientInfo)return!1;this.LO(t,e.radialGradientInfo,e.fillStyleRadialGradient)}if(e.fillStyleIndividual&&null!==e.colorBuffer){if(!e.colorBuffer)return!1;const t=u("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,null!==(o=e.colorBufferByteOffset)&&void 0!==o?o:0),this.gl.enableVertexAttribArray(t),void 0!==e.colorAttribDivisor&&this.hO(t,e.colorAttribDivisor)}if(e.fillStyleImage){if(!e.texturedFillGLInfo)return!1;const t=e.texturedFillGLInfo&&e.texturedFillGLInfo.texture.iR();this.$I(l("uColor"),e.fillStyleImage.getSurroundingColor()).MR(a(Sg),t||e.texturedFillGLInfo.sourceMissingTexture,0).bR(e.texturedFillGLInfo.texCoordsBuffer,e.texCoordAttribDivisor,{location:u("aTextureCoord"),size:2}).ZR(e.fillStyleImage.fitMode)}if(e.maskTexture){const t=e.maskTexture&&e.maskTexture.texture.iR();this.MR(a(Mg),t||e.maskTexture.sourceMissingTexture,0).bR(e.maskTexture.texCoordsBuffer,e.maskTextureCoordsAttribDivisor,{location:u("aMaskTextureCoord"),size:2})}}return void 0!==e.useInstanceID&&this.$O(t,e.useInstanceID),void 0!==e.useVertexID&&this.NO(t,e.useVertexID),!0}iz(t,i,s){if(t)return Pv(s||i.Ti(),i.oi,t.getAngle(!0),this.hR())}sz(t,i,s){if(t)return Lv(s||i.Ti(),i.oi,t.getPosition(),t.getExtent(),t.getShape(),this.hR())}}const $v=async(t,i,s,e,h,r,n,o)=>{const a=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s,e)=>{const h=void 0!==e.flags?e.flags:0,r=void 0!==e.retryTimeout?e.retryTimeout:10;return new Promise(((e,n)=>{const o=()=>{if(s())return e(void 0);const a=t.clientWaitSync(i,h,0);return a===t.WAIT_FAILED?n(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):a!==t.TIMEOUT_EXPIRED?e(void 0):void ti.setTimeout(o,r)};ti.setTimeout(o,0)}))})(t,a,i,{retryTimeout:10}).then((()=>{if(!i())return t.deleteSync(a),t.bindBuffer(s,e),t.getBufferSubData(s,h,r,n,o),t.bindBuffer(s,null),r})).catch((t=>{throw t}))};class Uv{TR(t){if(t instanceof J||t instanceof Rh){const i=t.jt();this.ez=i.x.scaling,this.hz=-i.x.displacement,this.rz=i.y.scaling,this.nz=-i.y.displacement;const s=Math.fround(i.x.highPrecisionOffset),e=Math.fround(i.y.highPrecisionOffset);this.oz=s,this.az=i.x.highPrecisionOffset-s,this.lz=e,this.uz=i.y.highPrecisionOffset-e}else t instanceof Q&&(this.MixedScaleXY=t.jt());return this}kR(){return[this.hz,this.nz]}_R(){return[this.ez,this.rz]}qO(){return[this.oz,this.lz]}tz(){return[this.az,this.uz]}}class Yv{constructor(){this.ez=0,this.rz=0,this.cz=0,this.hz=0,this.nz=0,this.dz=0}fz(t){return this.ez=t.q(),this.hz=t.getInnerStart()+.5*this.ez*t.tt(),this}Az(t){return this.rz=t.q(),this.nz=t.getInnerStart()+.5*this.rz*t.tt(),this}gz(t){return this.cz=t.q(),this.dz=t.getInnerStart()+.5*this.cz*t.tt(),this}_R(){return[this.ez,this.rz,this.cz]}kR(){return[this.hz,this.nz,this.dz]}vz(t,i,s,e,h){const n=r(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),o=Iv.multiply(e,[n.x,n.y,h,1]);return a(o[0],o[1],o[2])}}class jv{constructor(t){this.XB=t}Mc(t,i,s,e,h,r=0){const n=this.XB,o=void 0===e;if(!(e=e||n.ER()))throw new jA("Could not bind a framebuffer.");const a=n.rR(),l=n.lR();n.CR(!1),n.fO((()=>{n.gR(0,0,s.x,s.y),t()}),e,i,r),o&&n.zR(e),this.XB.AO(h),this.XB.gR(a.x,a.y,a.width,a.height),n.CR(l)}}class Hv{constructor(t,i){this.yz=[],this.pz=[],this.uniform=t=>{const i=this.shader.TD(t);return this.pz.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.FD(t);return this.pz.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.ID(t);return this.yz.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.yz)this.glUtils.rO(t.location),this.glUtils.hO(t.location,0)}}class Wv extends Tn{constructor(t,i,s,e,h){super(t,i,s,e),this.mz=new Map,this.Sz=t,this.bz=i,this.XB=t.xz(),this.Mz=h,this.bz=i}wc(){return this}Mc(t,i){if(!this.Mz||0!==t||0===this.mz.size)return{};let s=Array.from(this.mz.values()).map((t=>t.wz.filter((t=>t._z)).map((t=>t.As)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(this.gi.mc&&(s=s.filter((t=>!(t instanceof On)))),0===s.length)return{};const e=this.Mz;return this.XB.MO.DR(s,e),{}}_c(t,i,s,e,h){return{}}Vr(){return this}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}lu(){return 0}uu(){return 0}ys(t,i){const s={wz:[]},e=(t,i)=>{const e={As:t||[],_z:void 0===i||i};s.wz.push(e);const h={_s:t=>(e.As=t,h),Ls:t=>(e._z=t,h),Bs:()=>e._z};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={oA:e,...h};this.mz.set(t,s);const n=()=>{this.mz.delete(t),t.removeEventListener("dispose",n)};return ti.requestAnimationFrame((()=>{t.addEventListener("dispose",n)})),r}}function Xv(t,i,s,e,h,n=Math.floor(Math.sqrt(e>h?25*e:25*h))){const o=Array(n+2),a=Math.PI;let l=0,u=0;const c=i*a/180,d=(s*a/180-c)/n;for(o[l]=r(t.x,t.y),l+=1;l<=n+1;)o[l]=r(t.x+e*Math.cos(c+u*d),t.y+h*Math.sin(c+u*d)),l+=1,u+=1;return[o,n]}const Zv=(t,i,s)=>((t,i,s)=>{const e=[];let h=0;const n=Hs(i,s/2);let o,a,l,u,c=t[t.length-1],d=0;for(let s=0;s<t.length;s+=1){o=t[s],a=s===t.length-1?t[0]:t[s+1],s>0&&(c=t[s-1]),ii(o,c)&&(c=Ws(o,Us(Hs(Xs(a,o),-1)))),ii(o,a)&&(a=Ws(o,Us(Hs(Xs(c,o),-1))));const f=Js(c,i),A=Js(o,i),g=Js(a,i),v=Us(Xs(A,f)),y=Us(Xs(g,A)),p=Ws(v,y),m=r(-p.y,p.x),S=r(-v.y,v.x),b=1/Ks(m,S),x=js(m),M=Us(Xs(v,y)),w=Math.sign(Ks(m,M))||1,_=Zs(m,Hs(n,b)),k=Zs(m,Hs(n,-b));if(x<1||b===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},l={x:0,y:0};const u=r(-y.y,y.x),f=Math.sign(Ks(v,m))||w,A=Zs(S,Hs(n,f)),g=Zs(u,Hs(n,f));1===w?(t=A,i=k,s=g,l=k):(t=_,i=A,s=_,l=g);const p=4*Is(c,o),x=4*Is(o,a);(b>p||b>x)&&(1===w?(t=A,i=g,s=g,l=A):(t=g,i=A,s=A,l=g));const M=Ws(o,t),C=Ws(o,i),T=Ws(o,s),F=Ws(o,l);e[h]=M,h+=1,e[h]=C,h+=1,e[h]=T,h+=1,e[h]=F,h+=1,d=4}else{const t=Ws(o,_),i=Ws(o,k);e[h]=t,h+=1,e[h]=i,h+=1,d=2}u=l,l=t[s]}return e[h]=e[0],h+=1,e[h]=e[1],h+=1,[e,d,[u,l]]})(t,i,s)[0];class Jv extends Gn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bD=new Uv,this.kz=Ss,this.Cz=Ss,this.Tz=Vh({arcStyleSolid:()=>Ce(this.Xe)&&this.Xe,arcStyleRadialGradient:()=>V(this.Xe)&&this.Xe,arcStyleLinearGradient:()=>$(this.Xe)&&this.Xe}),this.Sz=t,this.bz=i,this.XB=t.xz()}Fz(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.XB.gl.TRIANGLE_STRIP}else e=t,s=this.XB.gl.TRIANGLE_FAN;const r=Ti(e,this.oi.Ot());return h=e.length,[e,this.XB.pR(r),h,s]}Iz(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[Ti(h,this.oi.Ot()),h.length];const r=Zv(h,e,s);return[Ti(r,this.oi.Ot()),r.length]}Vr(){const t=this.ul(),i=this.li.C();if(this.cl()){const s=Math.abs(this.$t.C()-this.Du.C());this.bD.TR(this.oi);const e=this.oi.si()||t,h=this.oi.ri(),n=this.Eu.C(),o=this.Ru.C(),[a,l]=Xv(this.In.C(),this.Du.C(),this.$t.C(),this.Eu.C(),this.Ru.C(),this.zu.C()),c=this.Ou.C(),d=c>0?Xv(this.In.C(),this.Du.C(),this.$t.C(),this.Eu.C()*c/100,this.Ru.C()*c/100,l)[0]:[this.In.C()],f=a.length-1;if(2===f){const t=(a[f-1].x+a[1].x)/2,i=(a[f-1].y+a[1].y)/2;this.Vu=r(t,i)}else{const t=Math.floor(f/2);this.Vu=r(a[t].x,a[t].y)}this.Nu=a[1];const A=a.length-1;this.Gu=a[A],this.Ou.C()&&(a.shift(),d.shift());let g=!1;(this.In.o||this.Du.o||this.$t.o||this.Eu.o||this.Ru.o||this.Ou.o||this.zu.o||e)&&(this.Cz=u(r(this.zl().x-n,this.zl().y-o),r(this.zl().x+n,this.zl().y+o)),g=!0,this.In.o=!1,this.Du.o=!1,this.$t.o=!1,this.Eu.o=!1,this.Ru.o=!1,this.Ou.o=!1,this.zu.o=!1);const v=this.al();(g||v)&&this.Xe!==xe&&(this.Ou.C()?(this.Lz&&this.XB.PR(this.Lz),[this.Pz,this.Lz,this.Bz,this.Dz]=this.Fz(a,d)):(this.Lz&&this.XB.PR(this.Lz),[this.Pz,this.Lz,this.Bz,this.Dz]=this.Fz(a,void 0)),V(this.Xe)?this.Ez=Lv(this.Cz,this.oi,this.Xe.getPosition(),this.Xe.getExtent(),this.Xe.getShape(),this.XB.hR()):$(this.Xe)?this.Rz=Pv(this.Cz,this.oi,this.Xe.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0));const y=this.Tz.arcStyleSolid(v),p=this.Tz.arcStyleLinearGradient(v),m=this.Tz.arcStyleRadialGradient(v),S=y||p||m;v&&(this.Oz=S?this.XB.SE(Qg["2D"],Qg.Color({dataType:V(this.Xe)||$(this.Xe)?["gradient",this.Xe]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.dl(this.Xe));const b=this.Ze;if(_h(b)&&(g||this.vl(b.getThickness())||e)){this.Ou.C()?360===s?(a.pop(),d.pop(),[this.zz,this.Vz]=this.Iz(a,void 0,b.getThickness(),h),this.Nz&&this.zz?this.XB.tO(this.Nz,this.zz,!0):!this.Nz&&this.zz?this.Nz=this.XB.pR(this.zz,!0):this.Nz&&!this.zz&&(this.XB.PR(this.Nz),this.Nz=void 0),[this.Gz,this.$z]=this.Iz(d,void 0,b.getThickness(),h),this.Uz&&this.Gz?this.XB.tO(this.Uz,this.Gz,!0):!this.Uz&&this.Gz?this.Uz=this.XB.pR(this.Gz,!0):this.Uz&&!this.Gz&&(this.XB.PR(this.Uz),this.Uz=void 0)):([this.zz,this.Vz]=this.Iz(a,d,b.getThickness(),h),this.Nz&&this.zz?this.XB.tO(this.Nz,this.zz,!0):!this.Nz&&this.zz?this.Nz=this.XB.pR(this.zz,!0):this.Nz&&!this.zz&&(this.XB.PR(this.Nz),this.Nz=void 0),this.Gz&&(this.Uz&&this.XB.PR(this.Uz),this.Uz=void 0,this.$z=0)):(360===s&&(a.shift(),a.pop()),[this.zz,this.Vz]=this.Iz(a,void 0,b.getThickness(),h),this.Nz&&this.zz?this.XB.tO(this.Nz,this.zz,!0):!this.Nz&&this.zz?this.Nz=this.XB.pR(this.zz,!0):this.Nz&&!this.zz&&(this.XB.PR(this.Nz),this.Nz=void 0));const t=b.getFillStyle();V(t)?this.Yz=Lv(this.Cz,this.oi,t.getPosition(),t.getExtent(),t.getShape(),this.XB.hR()):$(t)?this.jz=Pv(this.Cz,this.oi,t.getAngle(!0),this.XB.hR()):(this.Yz=void 0,this.jz=void 0),this.Wz=t===xe?void 0:this.XB.SE(Qg["2D"],Qg.Color({dataType:V(t)||$(t)?["gradient",t]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})),this.yl(b)}if(g){let t=1,i=1;_h(b)&&(t=b.getThickness()*h.x,i=b.getThickness()*h.y),this.kz=u(r(this.Cz.min.x-t,this.Cz.min.y-i),r(this.Cz.max.x+t,this.Cz.max.y+i))}this.Xz=i&&S?this.Xz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.Zz=i&&this.Ze!==$t?this.Zz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0}return this}Mc(t,i){if(this.cl()){const s=1===t?this.Xz:this.Oz,e=this.Xe,h=this.Lz;s&&h&&this.XB.Qc(s).SR(s,((s,r,n,o)=>{if(this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(o("uScaleStart_highpart"),this.bD.qO()).xR(o("uScaleStart_lowpart"),this.bD.tz()).EO(n,h,this.oi.Ot(),void 0).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),1===t)this.XB.XR(s("uFirstId"),i).$O(n,1);else if(Ce(e))this.XB.$I(s("uColor"),e.getColor());else if(V(e)){if(!this.Ez)return!1;this.XB.LO(n,this.Ez,e)}else if($(e)){if(!this.Rz)return!1;this.XB.PO(n,this.Rz,e)}return this.XB.Vk(this.Dz,this.Bz),!0}));const r=this.Ze;_h(r)&&(void 0!==this.Nz&&this.Jz(t,this.Nz,this.Vz,r,i),void 0!==this.Uz&&this.Jz(t,this.Uz,this.$z,r,i))}return{idCount:1}}_c(t,i,s,e,h){return{}}Jz(t,i,s,e,h){const r=1===t?this.Zz:this.Wz,n=e.getFillStyle();r&&this.XB.Qc(r).SR(r,((r,o,a,l)=>{if(this.XB.xR(r("uScale"),this.bD._R()).xR(r("uDisp"),this.bD.kR()).EO(a,i,this.oi.Ot(),void 0).wR(r("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(r("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(r("uRenderEffectMask"),2===t?1:0),1===t)this.XB.XR(r("uFirstId"),h).$O(a,1);else if(Ce(n))this.XB.$I(r("uColor"),n.getColor());else if(V(n)){if(!this.Yz)return!1;this.XB.LO(a,this.Yz,n)}else if($(n)){if(!this.jz)return!1;this.XB.PO(a,this.jz,n)}const u=e.getThickness(),c=-1===u||1===u;return this.XB.Vk(c?this.XB.gl.LINE_LOOP:this.XB.gl.TRIANGLE_STRIP,s),!0}))}wc(){return this.Qz&&(this.XB.PR(this.Qz),this.Qz=void 0),this.Kz&&(this.XB.PR(this.Kz),this.Kz=void 0),this.Lz&&(this.XB.PR(this.Lz),this.Lz=void 0),this.Nz&&(this.XB.PR(this.Nz),this.Nz=void 0),this.Uz&&(this.XB.PR(this.Uz),this.Uz=void 0),this.Oz=void 0,this.Wz=void 0,this.Xz=void 0,this.Zz=void 0,this}Hi(){return this.Cz.max.x}ji(){return this.Cz.min.x}Xi(){return this.Cz.max.y}Wi(){return this.Cz.min.y}lu(){return hs(this.Ze)}uu(){return hs(this.Ze)}}class Qv{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}qz(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}tV(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}iV(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}sV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.tV(),this}eV(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.iV(),this}hV(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.eV(i);return this}rV(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const Kv=((t=0)=>(new Qv).qz(t))(),qv=(t,i,s,e,h,r,n,o,a,l)=>(void 0===o&&void 0===n||Kv.tV(),r.push(t,i),h.push(Kv.first,Kv.second,Kv.third),o=void 0,n=void 0,h.push(Kv.third,Kv.fourth,Kv.second),a=Kv.third,Kv.iV(),l&&r.push(s,e),[n,o,a]),ty=(t,i,s,e,h,r,n,o,a,l,u)=>{void 0===a&&void 0===o||Kv.tV(),n.push(t,i),h.push(Kv.first,Kv.second,Kv.third);const c=ee(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push(Kv.third,Kv.fourth,Kv.fifth),l=Kv.fourth),Kv.iV(),u&&n.push(s,e),[o,a,l]},iy=(t,i,s,e,h,r,n,o,a,l)=>(void 0===n&&void 0===r||Kv.tV(),h.push(t,i),e.push(Kv.first,Kv.second,Kv.third),r=s,n=void 0,o=Kv.third,l?h.push(s):a=!0,[r,n,o,a]),sy=(t,i,s,e,h,r,n,o,a,l,u)=>(0!==r.length?(void 0===o&&void 0===n||Kv.tV(),Kv.tV()):a>0&&(Kv.tV(),u>0&&(u-=1)),r.push(t),h.push(Kv.first,Kv.second,Kv.third),a=Kv.second,n=t,o=void 0,l&&r.push(s,e),[n,o,a,u]),ey=(t,i=0)=>{Kv.qz(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,l,u=i,c=0,d=s[c],f=e[c],A=s[c],g=e[c],v=!1,y=u>0?A.y!==g.y?2:1:0;if(h>1)for(;c<h-1;){A=d,g=f,c+=1,d=s[c],f=e[c];const t=c===h-1;A.y>g.y?d.y>f.y?[a,l,u]=qv(A,g,d,f,r,o,a,l,u,t):d.y<f.y?[a,l,u]=ty(A,g,d,f,r,n,o,a,l,u,t):[a,l,u,v]=iy(A,g,d,r,o,a,l,u,v,t):A.y<g.y?d.y<f.y?[a,l,u]=qv(A,g,d,f,n,o,a,l,u,t):d.y>f.y?[a,l,u]=ty(A,g,d,f,n,r,o,a,l,u,t):[a,l,u,v]=iy(A,g,d,n,o,a,l,u,v,t):d.y===f.y?(a=A,v&&(o.push(A),v=!1,Kv.tV()),0===o.length&&u>0&&y>0&&(y-=1)):d.y>f.y?[a,l,u,y]=sy(A,0,d,f,r,o,a,l,u,t,y):[a,l,u,y]=sy(A,0,d,f,n,o,a,l,u,t,y)}return[o,new Uint16Array(r),new Uint16Array(n),u,y]};class hy extends Nn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bD=new Uv,this.nV=0,this.hu=Array(),this.oV=0,this.aV=new Uint16Array(0),this.lV=new Uint16Array(0),this.Tz=Vh({hightFillSolid:()=>Ce(this.Xe)&&this.Xe,hightFillRadialGradient:()=>V(this.Xe)&&this.Xe,hightFillLinearGradient:()=>$(this.Xe)&&this.Xe,hightFillPaletted:()=>Pe(this.Xe)&&this.Xe,lowFillSolid:()=>Ce(this.yu)&&this.yu,lowFillRadialGradient:()=>V(this.yu)&&this.yu,lowFillLinearGradient:()=>$(this.yu)&&this.yu,lowFillPaletted:()=>Pe(this.yu)&&this.yu}),this.Sz=t,this.bz=i,this.XB=t.xz()}Vr(){const t=this.ul(),i=this.li.C(),s=this.pu;if(this.cl()){this.bD.TR(this.oi);const e=s;if(e&&(this.nV=0,this.aV=new Uint16Array(0),this.lV=new Uint16Array(0),this.hu.length=0,this.oV=0,this.fu>1)){const[t,i,s,e]=ey([this.cu,this.du]);this.nV=e,this.aV=i,this.lV=s,this.hu=t,this.oV=t.length}if(this.vu&&this.gu[0].length>1){const[t,i]=this.gu,s=t.length,[e,h,r,n,o]=ey([t,i],this.nV);this.nV=n;const a=e.length;for(let t=o;t<a;t+=1)this.hu[this.oV]=e[t],this.oV+=1;this.aV=he(this.aV,h),this.lV=he(this.lV,r);for(let e=o>0||this.fu>0?1:o;e<s;e+=1)this.cu[this.fu]=t[e],this.du[this.fu]=i[e],this.fu+=1;this.Au=!0,this.vu=!1,this.gu=[]}const h=this.Xe,r=this.ll!==h,n=this.Tz.hightFillSolid(r),o=this.Tz.hightFillRadialGradient(r),a=this.Tz.hightFillLinearGradient(r),l=this.Tz.hightFillPaletted(r),u=n||o||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,c=this.yu,d=this.Pu!==c,f=this.Tz.lowFillSolid(d),A=this.Tz.lowFillRadialGradient(d),g=this.Tz.lowFillLinearGradient(d),v=this.Tz.lowFillPaletted(d),y=f||A||g||v&&["x","y"].includes(v.getLookUpProperty())&&v;if((r||t)&&(this.uV=u?this.XB.SE(Qg["2D"],Qg.Color({dataType:a?["gradient",a]:o?["gradient",o]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),o?this.Ez=Lv(this.fi||this.ru,this.oi,o.getPosition(),o.getExtent(),o.getShape(),this.XB.hR()):a?this.Rz=Pv(this.fi||this.ru,this.oi,a.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),(d||t)&&(this.cV=y?this.XB.SE(Qg["2D"],Qg.Color({dataType:g?["gradient",g]:A?["gradient",A]:v?["lookup",v.getLookUpProperty(),v.lut]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),A?this.dV=Lv(this.fi||this.ru,this.oi,A.getPosition(),A.getExtent(),A.getShape(),this.XB.hR()):g?this.fV=Pv(this.fi||this.ru,this.oi,g.getAngle(!0),this.XB.hR()):(this.dV=void 0,this.fV=void 0),(t||this.Au||e)&&this.Au||e){const t=this.hu,i=Ti(t,this.oi.Ot());this.AV=this.XB.pR(i,!1,this.AV),u&&(this.gV=this.XB.iO(this.aV,this.gV),this.vV=this.aV.length),y&&(this.yV=this.XB.iO(this.lV,this.yV),this.pV=this.lV.length),this.Au=!1}this.Xz=i&&(y||u)?this.Xz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.dl(this.Xe),this.Bu(this.yu),this.pu=!1}return this}Mc(t,i){const s=this.Xe,e=this.yu,h=1===t?this.Xz:this.cV;if(h&&this.AV&&this.yV){const s=this.AV,r=this.yV;this.XB.Qc(h).SR(h,((h,n,o,a)=>{if(this.XB.EO(o,s,this.oi.Ot(),void 0).aO(r).wR(h("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(h("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(h("uRenderEffectMask"),2===t?1:0),this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(h("uScale"),this.bD._R()).xR(h("uDisp"),this.bD.kR()).xR(a("uScaleStart_highpart"),this.bD.qO()).xR(a("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(a("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(a("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(a("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(a("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(h("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(h("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.XB.XR(h("uFirstId"),i).$O(o,1);else if(Ce(e))this.XB.$I(h("uColor"),e.getColor());else if(V(e)){if(!this.dV)return!1;this.XB.LO(o,this.dV,e)}else if($(e)){if(!this.fV)return!1;this.XB.PO(o,this.fV,e)}else if(Pe(e)){const t=Nh(e,this,void 0);if(!t&&e.lut.percentageValues)return!1;this.XB.ZO(o,e.lut,t)}return this.XB.uO(this.pV),!0}))}const r=1===t?this.Xz:this.uV;if(r&&this.AV&&this.gV){const e=this.AV,h=this.gV;this.XB.Qc(r).SR(r,((r,n,o,a)=>{if(this.XB.EO(o,e,this.oi.Ot(),void 0).aO(h).wR(r("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(r("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(r("uRenderEffectMask"),2===t?1:0),this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(r("uScale"),this.bD._R()).xR(r("uDisp"),this.bD.kR()).xR(a("uScaleStart_highpart"),this.bD.qO()).xR(a("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(a("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(a("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(a("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(a("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(r("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(r("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.XB.XR(r("uFirstId"),i).$O(o,1);else if(Ce(s))this.XB.$I(r("uColor"),s.getColor());else if(V(s)){if(!this.Ez)return!1;this.XB.LO(o,this.Ez,s)}else if($(s)){if(!this.Rz)return!1;this.XB.PO(o,this.Rz,s)}else if(Pe(s)){const t=Nh(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.XB.ZO(o,s.lut,t)}return this.XB.uO(this.vV),!0}))}return{idCount:1}}_c(t,i,s,e,h){return{}}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return 0}uu(){return 0}ob(t){this.Cu()>0&&this.Vr();const[i,s]=this.xu(),e=i.length>2&&i[1].x<i[0].x,h=xt(i,t,bt.NearestX,this.mu,this.Su,this.oi,this.gi.oi,this.ru,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}Dx(t){this.Cu()>0&&this.Vr();const[i,s]=this.xu(),e=i.length;if(0===e)return;const h=this.mu?1:0,r=e-(this.Su?2:1),n=i.length>2&&i[1].x<i[0].x,o=Ct(i,tt(t,this.gi.oi,this.oi),"x",n,h,r);if(!o)return;const a=[Bs(i[o.a],i[o.b],o.lerpAmount),Bs(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.yV&&(this.XB.PR(this.yV),this.yV=void 0),this.gV&&(this.XB.PR(this.gV),this.gV=void 0),this.AV&&(this.XB.PR(this.AV),this.AV=void 0),this}wc(){return this.dispose(),this}}class ry extends Bv{constructor(t,i){super(t),this.mV=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.SV();this.bV=t.pR(s),this.xV=t.iO(e),this.MV=h,this.wV=r}Qc(t,i){return this.XB.bR(this.bV,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.XB.aO(this.xV),this}Vk(t,i){return this.XB.dO(void 0!==i?i:this.wV,this.MV,0,t,this.XB.gl.UNSIGNED_BYTE),this}SV(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.mV;e+=1){const h=s-e*Math.PI/this.mV;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.mV;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.XB.gl.TRIANGLES}}GE(){this.XB.PR(this.bV),this.XB.PR(this.xV)}}const ny=(t,i,s=!0)=>((t,i)=>{let s=t.VR.RE.get(i);return s||(s=new ry(t,i),t.VR.RE.set(i,s),s)})(t,s?i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2:1),oy={_V:(t,i,s,e,h,r,n=1)=>{const{attribute:o}=e,a=i.gl;if(a.bindBuffer(a.ARRAY_BUFFER,s),t){const t=o("aLocationA_highpart"),s=o("aLocationA_lowpart"),e=o("aLocationB_highpart"),l=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.hO(t,n),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,n),a.enableVertexAttribArray(s),a.vertexAttribPointer(e,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.hO(e,n),a.enableVertexAttribArray(e),a.vertexAttribPointer(l,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(l,n),a.enableVertexAttribArray(l)}else{const t=o("aLocationA"),s=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.hO(t,n),a.enableVertexAttribArray(t),a.vertexAttribPointer(s,2,a.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,n),a.enableVertexAttribArray(s)}},kV:(t,i,s,e,h,r,n,o)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,s),a.vertexAttribPointer(e,r,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),t.hO(e,1),a.enableVertexAttribArray(e),a.vertexAttribPointer(h,r,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),t.hO(h,1),a.enableVertexAttribArray(h)},CV:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.hO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.hO(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.hO(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.hO(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.hO(s,1),o.enableVertexAttribArray(s)}},TV:(t,i,s,e,h,r,n,o,a,l)=>{const u=t.gl;u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(e,r,a,o,2*r*l,n*l),t.hO(e,1),u.enableVertexAttribArray(e),u.vertexAttribPointer(h,r,a,o,2*r*l,(n+r)*l),t.hO(h,1),u.enableVertexAttribArray(h)},Mc:(t,i,s,e,h,r,n)=>{const o=t.xz(),{uniform:a,uniformOptional:l}=s,u=1/t.Ba.Ea,c=(h?Math.max(r,u):Math.max(r,0))+1;o.wR(a("uThicknessPixels"),c).wR(l("uAALimit"),1-(c-1)/c).xR(a("uRatioPxClip"),[2/t._t().x,2/t._t().y]),i.Qc(s,e).Vk(n)}},ay={_V:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t);const i=n("aPos_lowpart");o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},kV:(t,i,s,e,h,r)=>{const n=t.gl;n.bindBuffer(n.ARRAY_BUFFER,s),n.vertexAttribPointer(e,h,n.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),n.enableVertexAttribArray(e)},CV:(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aPos_highpart"),i=n("aPos_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t),o.vertexAttribPointer(i,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)}else{const t=n("aPos");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(t)}},FV:(t,i)=>{const s=t.xz();s.Vk(s.gl.LINE_STRIP,i,0)},IV:(t,i)=>{const s=t.xz();s.Vk(s.gl.LINES,2*i,0)}},ly=(t,i,s,e,h,r,n,o,a,l,u=n,c=0)=>{const d=t.gl;if(s){const s=i.attribute(`${h}A_highpart${r}`),f=i.attribute(`${h}A_lowpart${r}`),A=i.attribute(`${h}B_highpart${r}`),g=i.attribute(`${h}B_lowpart${r}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,n,a,o,2*u*l,2*c*l),d.vertexAttribPointer(f,n,a,o,2*u*l,(u+2*c)*l),t.hO(s,1),t.hO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.vertexAttribPointer(A,n,a,o,2*u*l,(2*u+2*c)*l),d.vertexAttribPointer(g,n,a,o,2*u*l,(3*u+2*c)*l),t.hO(A,1),t.hO(g,1),d.enableVertexAttribArray(A),d.enableVertexAttribArray(g),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const s=i.attribute(`${h}A${r}`),f=i.attribute(`${h}B${r}`);d.bindBuffer(d.ARRAY_BUFFER,e),d.vertexAttribPointer(s,n,a,o,u*l,(0+c)*l),d.vertexAttribPointer(f,n,a,o,u*l,(u+c)*l),t.hO(s,1),t.hO(f,1),d.enableVertexAttribArray(s),d.enableVertexAttribArray(f),d.bindBuffer(d.ARRAY_BUFFER,null)}};class uy extends Zn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bD=new Uv,this.ru=Ss,this.Tz=Vh({lineStyleSolid:()=>_h(this.hc)&&this.hc,lineStyleDashed:()=>Fh(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return Ce(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return $(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return V(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return Pe(t)&&t}}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.LV=this.XB.pO}Vr(){const t=this.fl(),i=this.hc,s=this.Tz.lineStyleSolid(t),e=this.Tz.lineStyleDashed(t),h=s||e,n=this.Tz.strokeFillSolid(t),o=this.Tz.strokeFillLinearGradient(t),a=this.Tz.strokeFillRadialGradient(t),l=this.Tz.strokeFillPaletted(t),c=n||o||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,d=this.Ut(),f=this.Gt(),A=this.li.C(),g=this.li.o,v=i.Yi();if(e&&this.oi instanceof Q)return ti.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.bD.TR(this.oi),this.lc&&(this.PV=this.XB.pR(Ti([d,f],this.oi.Ot()),!1,this.PV),this.ru=u(r(d.x,d.y),r(f.x,f.y))),t||g){const t=this.cl()&&h&&c&&v>0,i=o?["gradient",o]:a?["gradient",a]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform";this.BV=t?{type:"triangulated",shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),this.LV?Qg.AliasedEdge:void 0,e&&Qg.StippleTextureInstanced),mousePickingShader:A?this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),e&&Qg.StippleTextureInstanced):void 0,geometry:ny(this.XB,v),thickness:v,lineStyleSolid:s,lineStyleDashed:e,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l}:void 0}if(a?this.Yz=Lv(In(this.ru,{x:this.lu(),y:this.uu()},this.oi),this.oi,a.getPosition(),a.getExtent(),a.getShape(),this.XB.hR()):o?this.jz=Pv(In(this.ru,{x:this.lu(),y:this.uu()},this.oi),this.oi,o.getAngle(!0),this.XB.hR()):(this.Yz=void 0,this.jz=void 0),e){if(t||this.lc){const t=[0,0,Math.abs(f.x-d.x),Math.abs(f.y-d.y)];this.DV=this.XB.pR(t,!1,this.DV)}this.EV=this.XB.jO(e.getPattern())}else this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.EV=void 0;return this.ac(i),this.lc=!1,this.li.o=!1,this}Mc(t,i){var s,e;const h=this.PV;if(!h)return{};const r=this.BV;if(!r)return{};const{fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l,lineStyleDashed:u,thickness:c}=r,d=1===t?null===(s=this.BV)||void 0===s?void 0:s.mousePickingShader:null===(e=this.BV)||void 0===e?void 0:e.shader;return d?(this.XB.Qc(d).SR(d,((s,e,d,f)=>{if(this.XB.wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(f("uScaleStart_highpart"),this.bD.qO()).xR(f("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(f("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(f("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(f("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(f("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.XB.XR(s("uFirstId"),i).$O(d,1);else if(n)this.XB.$I(s("uColor"),n.getColor());else if(a){if(!this.Yz)return!1;this.XB.LO(d,this.Yz,a)}else if(o){if(!this.jz)return!1;this.XB.PO(d,this.jz,o)}else if(l){const t=Nh(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.XB.ZO(d,l.lut,t)}if(u){if(!this.DV||!this.EV)return!1;oy.kV(this.XB,d,this.DV,e("aLengthSoFarA"),e("aLengthSoFarB"),2,2,0),this.XB.xR(s("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(f("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(s("uStippleScale"),u.getPatternScale()).MR(s("uStippleTexture"),this.EV.HO,1)}return oy._V(this.oi.Ot(),this.XB,h,d,this.oi.Ot()?4:2,0),oy.Mc(this.Sz,r.geometry,d,this.LV&&1!==t,1===t,c,1),!0})),{idCount:1}):{}}_c(t,i,s,e,h){return{}}dispose(){return super.dispose(),this.BV=void 0,this.PV&&(this.XB.PR(this.PV),this.PV=void 0),this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.EV=void 0,this}wc(){return this}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return hs(this.hc)}uu(){return hs(this.hc)}}class cy extends Jn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.RV=[],this.OV=!1,this.zV=!1,this.VV=!1,this.NV=!1,this.GV=!1,this.bD=new Uv,this.ru=Ss,this.Tz=Vh({lineStyleSolid:()=>_h(this.hc)&&this.hc,lineStyleDashed:()=>Fh(this.hc)&&this.hc,lineFillSolid:()=>{const t=this.hc.getFillStyle();return Ce(t)&&t},lineFillRadialGradient:()=>{const t=this.hc.getFillStyle();return V(t)&&t},lineFillLinearGradient:()=>{const t=this.hc.getFillStyle();return $(t)&&t},lineIndividualPointFill:()=>{const t=this.hc.getFillStyle();return Fe(t)&&t}}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.LV=this.XB.pO,this.$V=t.Ba.Oa}jo(){const t={Ts:i=>this.UV(t,i),Fi:i=>this.YV(t,i),MA:(i,s)=>this.jV(t,i,s),$I:i=>this.HV(t,i),Yt:{x:0,y:0},$t:{x:0,y:0},Ai:0,tP:void 0,WV:this.RV.length,jA:!0,XV:!0};return this.zV=!0,this.RV.push(t),t}zi(){return this.RV.length=0,this.OV=!0,this.gi.ki(this),this}ZV(){return this.RV.length}C(t){const i=this.RV[t];return[i.Yt,i.$t]}Bv(){return this.RV}Xd(t){const i=this.RV.indexOf(t);i>=0&&(this.RV.splice(i,1),t.XV||(this.OV=!0),this.gi.ki(this))}UV(t,i){if(i&&!t.jA)t.WV=this.RV.length,this.RV.push(t);else if(!i){const i=this.RV.indexOf(t);this.RV.splice(i,1)}return t.jA=i,t.XV||(this.NV=!0),t}YV(t,i){return t.Ai=i,t.XV||(this.VV=!0),t}jV(t,i,s){return t.Yt=i,t.$t=s,t.XV||(this.OV=!0),t}HV(t,i){return t.tP=i,t.XV||(this.GV=!0),t}Vr(){const t=this.li.C(),i=this.li.o,s=this.fl(),e=this.hc,h=this.RV,r=this.VV,n=this.OV,o=this.NV,a=this.GV,l=this.zV,u=this.Tz.lineStyleSolid(s),c=this.Tz.lineStyleDashed(s),d=u||c,f=this.Tz.lineFillSolid(s),A=this.Tz.lineIndividualPointFill(s),g=this.Tz.lineFillRadialGradient(s),v=this.Tz.lineFillLinearGradient(s),y=f||A||v||g,p=e.Yi(),m=c?"triangulated":e.getThickness()<0?"primitive":"triangulated";if(c&&this.oi instanceof Q)return ti.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.bD.TR(this.oi);const S=this.cc,b=n||o,x=!b&&l;if(b||x){const t=b?h:h.filter((t=>t.XV)),i=[],s=t.length;let e=ps,r=ps,n=ms,o=ms;for(let h=0;h<s;h+=1){const s=t[h];i.push(s.Yt),i.push(s.$t),e=Math.min(e,s.Yt.x,s.$t.x),r=Math.min(r,s.Yt.y,s.$t.y),n=Math.max(n,s.Yt.x,s.$t.x),o=Math.max(o,s.Yt.y,s.$t.y)}this.PV=this.XB.qR(this.PV,Ti(i,this.oi.Ot()),S*(this.oi.Ot()?8:4),b,Float32Array),this.ru=x?Os(this.ru,{min:{x:e,y:r},max:{x:n,y:o}}):{min:{x:e,y:r},max:{x:n,y:o}}}if(s||i){const i=f?"uniform":A?"attribute":v?["gradient",v]:g?["gradient",g]:void 0,s=d&&y&&p>0&&i;this.BV=s?"triangulated"===m?{type:"triangulated",shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,snapToNearestPixel:this.$V,ensureMinimumSegmentLength:void 0!==this.uc}),this.LV?Qg.AliasedEdge:void 0,c&&Qg.StippleTextureInstanced,Qg.AttributeHighlight),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,snapToNearestPixel:this.$V,ensureMinimumSegmentLength:void 0!==this.uc}),c&&Qg.StippleTextureInstanced,Qg.AttributeHighlight)}:void 0,geometry:ny(this.XB,p,!1),thickness:p,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:A,fillStyleLinearGradient:v,fillStyleRadialGradient:g}:{type:"primitive",shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,snapToNearestPixel:this.$V}),Qg.AttributeHighlight),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,snapToNearestPixel:this.$V}),Qg.AttributeHighlight)}:void 0,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:A,fillStyleLinearGradient:v,fillStyleRadialGradient:g}:void 0}if(c){if(s||b||x){const t=b||s?h:h.filter((t=>t.XV)),i=new Float32Array(4*t.length);let e=0;for(let s=0;s<t.length;s+=1){const h=t[s].Yt,r=t[s].$t;i[e]=0,i[e+1]=0,i[e+2]=Math.abs(r.x-h.x),i[e+3]=Math.abs(r.y-h.y),e+=4}this.DV=this.XB.qR(this.DV,i,4*S,b||s,Float32Array)}this.EV=this.XB.jO(c.getPattern())}else this.DV&&(this.XB.PR(this.DV.buffer),this.DV=void 0),this.EV=void 0;if(r||b||x){const t="triangulated"===m?1:2,i=b||r?h:h.filter((t=>t.XV)),s=new Float32Array(i.length*t);let e=0;i.forEach((i=>{for(let h=0;h<t;h+=1)s[e+h]=i.Ai;e+=t})),this.JV=this.XB.qR(this.JV,s,S*t,b||r,Float32Array)}if((a||b||x||s)&&A){const t=b||a||s?h:h.filter((t=>t.XV)),i=new Uint32Array(2*t.length);let e=0;t.forEach((t=>{const s=(t.tP||A.color).toUint32();for(let t=e;t<e+2;t+=1)i[t]=s;e+=2})),this.QV=this.XB.qR(this.QV,i,2*S,b||a,Uint32Array)}if(t){if(b||x||i){const t="triangulated"===m?1:2,s=b||i?h:h.filter((t=>t.XV)),e=new Float32Array(s.length*t);let r=0;s.forEach((i=>{for(let s=0;s<t;s+=1)e[r+s]=i.WV||0;r+=t})),this.KV=this.XB.qR(this.KV,e,S*t,b,Float32Array)}}else this.KV&&(this.XB.PR(this.KV.buffer),this.KV=void 0);g?this.Ez=Lv(this.fi||this.ru,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.XB.hR()):v?this.Rz=Pv(this.fi||this.ru,this.oi,v.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),this.ac(e),this.VV=!1,this.NV=!1,this.OV=!1,this.GV=!1,this.li.o=!1,this.zV=!1;for(const t of h)t.XV=!1;return this}Mc(t,i){var s;const e=this.PV,h=this.JV,r=this.KV;if(!e||!h)return{};const n=this.BV;if(!n)return{};const{type:o,fillStyleSolid:a,fillStyleIndividual:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,lineStyleDashed:d}=n,f=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;return f?(this.XB.Qc(f).SR(f,((s,f,A,g)=>{if(this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(g("uScaleStart_highpart"),this.bD.qO()).xR(g("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(g("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(g("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(g("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(g("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.$V&&this.XB.xR(g("uViewportSizePx"),[this.gi._t().x*this.XB.hR(),this.gi._t().y*this.XB.hR()]),void 0!==this.uc&&this.XB.xR(s("uMinSegmentPixelVector"),[this.uc.x,this.uc.y]),this.XB.$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.XB.XR(s("uFirstId"),i),!r)return!1;"triangulated"===o?this.XB.bR(r.buffer,1,{location:f("aPickingIdOffset"),size:1}):this.XB.oO(f("aPickingIdOffset"),r.buffer)}else if(a)this.XB.$I(s("uColor"),a.getColor());else if(l){if(!this.QV)return!1;if("triangulated"===o)oy.TV(this.XB,A,this.QV.buffer,f("aColorA"),f("aColorB"),4,0,!0,this.XB.gl.UNSIGNED_BYTE,1);else{const t=f("aColor");this.XB.gl.bindBuffer(this.XB.gl.ARRAY_BUFFER,this.QV.buffer),this.XB.gl.vertexAttribPointer(t,4,this.XB.gl.UNSIGNED_BYTE,!0,0,0),this.XB.gl.enableVertexAttribArray(t)}}else if(c){if(!this.Ez)return!1;this.XB.LO(A,this.Ez,c)}else if(u){if(!this.Rz)return!1;this.XB.PO(A,this.Rz,u)}if(d){if(!this.DV||!this.EV)return!1;oy.TV(this.XB,A,this.DV.buffer,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0,!1,this.XB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),this.XB.xR(s("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(g("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(s("uStippleScale"),d.getPatternScale()).MR(s("uStippleTexture"),this.EV.HO,0)}if("triangulated"===o){const{geometry:i,thickness:s}=n;oy.CV(this.oi.Ot(),this.XB,e.buffer,A,this.oi.Ot()?4:2,0),this.XB.bR(h.buffer,1,{location:f("aIsHighlighted"),size:1}),oy.Mc(this.Sz,i,A,this.LV&&1!==t,1===t,s,this.RV.length)}else ay.CV(this.oi.Ot(),this.XB,e.buffer,A,this.oi.Ot()?4:2,0),this.XB.oO(f("aIsHighlighted"),h.buffer),ay.IV(this.Sz,this.RV.length);return!0})),{idCount:this.RV.length}):{}}dispose(){return super.dispose(),this.BV=void 0,this.PV&&(this.XB.PR(this.PV.buffer),this.PV=void 0),this.DV&&(this.XB.PR(this.DV.buffer),this.DV=void 0),this.JV&&(this.XB.PR(this.JV.buffer),this.JV=void 0),this.KV&&(this.XB.PR(this.KV.buffer),this.KV=void 0),this.QV&&(this.XB.PR(this.QV.buffer),this.QV=void 0),this.EV=void 0,this}_c(t,i,s,e,h){return{collectionMember:this.RV.find((s=>i+s.WV===t))}}wc(){return this}Fi(t){super.Fi(t);for(const i of this.RV)i.Fi(t);return this}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return hs(this.hc)}uu(){return hs(this.hc)}}class dy{constructor(t,i){this.qV=!1,this.tN=!1,this.oi=t,this.iN=i,this.iN.Mi("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.qV="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.qV="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.tN=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.qV?t[0].x:t[0].y,end:"x"===this.qV?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.qV?"x"===this.qV?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),e=Math.min(t[i-1].x,t[0].x);let h=t[0].y,n=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>h&&(h=i.y),i.y<n&&(n=i.y)}return u(r(e,n),r(s,h))}return Ss}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),e=Math.min(t[i-1].y,t[0].y);let h=t[0].x,n=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>h&&(h=i.x),i.x<n&&(n=i.x)}return u(r(n,e),r(h,s))}return Ss}(t):Es(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const fy=Math.min(1,1.5);class Ay extends dy{constructor(t,i,s){super(t,i),this.sN=!1,this.eN={enabled:!1,totalDataPointsAtTime:0},this.hN=[],this.Ps=s,this.rN=t instanceof J?{type:"linear",scale:t}:t instanceof Q?{type:"mixed",scale:t}:{type:"unknown"},this.iN.Mi("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.sN=!0)}))}nN(t,i=!1){if(this.sN||!this.qV||"linear"!==this.rN.type)return!1;!1===i&&this.oN&&(clearTimeout(this.oN),this.oN=void 0);const s="x"===this.qV?this.rN.scale.x.Zf:this.rN.scale.y.Zf;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.qV?h.x:h.y,"x"===this.qV?r.x:r.y,e),o=this.rN.scale,a=Math.abs("x"===this.qV?o.ri().x:o.ri().y),l=a/n,u=Math.floor(l*fy),c=u*n,d=ti.performance.now(),f=!(d-s.jh<500)&&(s.Vh?d-s.Yh<1e3:d-s.Nh<2e3||s.$h),A=e>2*this.eN.totalDataPointsAtTime;if(f&&!A)return this.oN=setTimeout((()=>this.aN(t)),1e3),!1;const g=u>=10,v=this.eN.enabled?this.eN.columnWidthAxis/a<1.5:void 0,y=this.eN.enabled&&u>this.eN.dataPointsPerColumn?u/this.eN.dataPointsPerColumn>=2:void 0;let p;!0===this.eN.enabled?v?y&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}):p=g?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:g&&(p={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:e});const m=!1===i;return p?(m&&(this.eN=p),!0):(m&&(this.eN={...this.eN,totalDataPointsAtTime:e}),!1)}lN(){this.uN=void 0,this.hN.length=0,this.oN&&(clearTimeout(this.oN),this.oN=void 0)}cN(t){if(0===t.length)return t;if(this.sN||!this.qV||"linear"!==this.rN.type||!this.eN.enabled)return t;let i;i=this.hN.length>0?$i(this.hN,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.uN,o=-1,a=-1,l=0,u=0;if("x"!==this.qV||this.tN)if("x"===this.qV&&this.tN){const t=this.eN.columnWidthAxis;let c=this.uN?this.uN.x:i[0].x,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.x>=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}else if("y"!==this.qV||this.tN){if("y"===this.qV&&this.tN){const t=this.eN.columnWidthAxis;let c=this.uN?this.uN.y:i[0].y,d=c-t;for(let f=0;f<s;f+=1){const s=i[f];s.y>=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c-t,h=s,o=f,r=s,a=f,l=f,u=f)}}}else{const t=this.eN.columnWidthAxis;let c=this.uN?this.uN.y:i[0].y,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.y<=d?((!h||s.x>h.x)&&(h=s,o=f),(!r||s.x<r.x)&&(r=s,a=f),u=f):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}else{const t=this.eN.columnWidthAxis;let c=this.uN?this.uN.x:i[0].x,d=c+t;for(let f=0;f<s;f+=1){const s=i[f];s.x<=d?((!h||s.y>h.y)&&(h=s,o=f),(!r||s.y<r.y)&&(r=s,a=f),u=f):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,d=c+t,h=s,o=f,r=s,a=f,l=f,u=f)}}if(h||r){const t=i.slice(l,u+1);this.hN=t}else this.hN.length=0;const c=e.length;return c>0&&(this.uN=e[c-1]),e}dN(t){var i,s;if(this.qV&&"linear"===this.rN.type){const e="x"===this.qV?this.rN.scale.x.Zf:this.rN.scale.y.Zf;if(!e)throw new Error("CP helper has no information about Axis state.");if((null===(i=e.Er)||void 0===i?void 0:i.id)===Ir||(null===(s=e.Er)||void 0===s?void 0:s.id)===Lr){const i=Math.abs("x"===this.qV?this.rN.scale.x.getInnerInterval():this.rN.scale.y.getInnerInterval());if(this.eN.enabled)return 2*i/this.eN.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.qV?e.x:e.y,"x"===this.qV?h.x:h.y,s)}}}fN(t,i,s){if(!this.qV)return i;const e=s.length;let h=kt(s,t.min,this.qV,this.tN,0,e-1);void 0===h&&(h=this.tN?e-1:0);let r=kt(s,t.max,this.qV,this.tN,0,e-1);return void 0===r&&(r=this.tN?0:e-1),1+Math.abs(r-h)}AN(){this.oN&&(clearTimeout(this.oN),this.oN=void 0)}aN(t){this.nN(t,!0)&&this.Ps()}}class gy extends dy{renderVisibleOnly(t,i,s=!1){const e=this.oi.x.getInnerStart(),h=this.oi.x.getInnerEnd(),r=Math.min(e,h),n=Math.max(e,h),o=this.oi.y.getInnerStart(),a=this.oi.y.getInnerEnd(),l=Math.min(o,a),u=Math.max(o,a);t.forEach(((t,e)=>{t.existingCoordinatesCount<=1||!1===s&&(t.boundaries.max.x<r||t.boundaries.min.x>n||t.boundaries.max.y<l||t.boundaries.min.y>u)||i(t)}))}}class vy{constructor(t,i,s){this.gN=i,this.vN=s,this.yN=t,this.pN=[]}mN(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.yN[this.yN.length-1];do{const t=this.yN.length;let h;o||(o=this.SN(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.vN&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.yN[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.yN.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.bN()}xN(t){const i=t,s=this.yN.indexOf(i);s>=0&&this.yN.splice(s,1),i.droppedTimestamp=ti.performance.now(),this.pN.push(i)}MN(){this.yN.slice().forEach((t=>this.xN(t)))}wN(){this.yN.forEach((t=>this.gN(t))),this.pN.forEach((t=>this.gN(t))),this.yN.length=0,this.pN.length=0}SN(t,i){const s=2*t/3,e=4*t/3,h=this.pN.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.pN[h];return this.pN.splice(h,1),this.yN.push(t),t}}bN(){if(this.pN.length>5){const t=ti.performance.now();for(let i=0;i<this.pN.length-5;i+=1){const s=this.pN[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.gN(s),this.pN.splice(i,1),i-=1)}}}}class yy extends dy{_N(t,i){if(!i||"object"!=typeof i)return 0;const s=this.oi.x.getInnerStart(),e=this.oi.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.oi.y.getInnerStart(),o=this.oi.y.getInnerEnd(),a=Math.min(n,o),l=Math.max(n,o);if("maxDataPointCount"in i)return this.kN(t,i.maxDataPointCount,h,r,a,l);if("minDataPointCount"in i)return this.CN(t,i.minDataPointCount,h,r,a,l);if("progressiveDataCleaningThreshold"in i)return this.TN(t,i.progressiveDataCleaningThreshold,h,r,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}kN(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}TN(t,i,s,e,h,r){if(void 0===i||!this.qV)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],l=this.tN?"x"===this.qV?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.qV?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.tN?"x"===this.qV?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.qV?a.boundaries.max.x<i:a.boundaries.max.y<i)&&l&&a.existingCoordinatesCount>2))break;n+=1}return n}CN(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(o>i)if(this.qV){if(this.tN?"x"===this.qV?l.boundaries.min.x>e:l.boundaries.min.y>r:"x"===this.qV?l.boundaries.max.x<s:l.boundaries.max.y<h){n=1+a;break}}else l.boundaries.max.x<s||l.boundaries.min.x>e||l.boundaries.max.y<h||l.boundaries.min.y>r?n+=1:n=0;o+=l.existingDataPointsCount}return n}FN(t,i){const s=t.reduce(((t,i)=>Os(t,i.boundaries)),Ss);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.qV||this.tN?"x"===this.qV&&this.tN?s.max.x=Math.min(s.max.x,t):"y"!==this.qV||this.tN?"y"===this.qV&&this.tN&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class py extends Qn{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bD=new Uv,this.wx=[],this.IN=new gy(this.oi,this),this.LN=new Ay(this.oi,this,(()=>this.gi.Ps())),this.PN=new vy(this.wx,(t=>{t.coordsBuffer&&this.XB.PR(t.coordsBuffer),t.DV&&this.XB.PR(t.DV)}),!0),this.DN=new yy(this.oi,this),this.EN=0,this.RN=0,this.ON=!1,this.Tz=Vh({lineStyleSolid:()=>_h(this.hc)&&this.hc,lineStyleDashed:()=>Fh(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return Ce(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return $(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return V(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return Pe(t)&&t}}),this.bz=i,this.Ba=r,this.BV={type:"none"},this.XB=t.xz(),this.Sz=t,this.LV=this.XB.pO;const n=this.oi.Ot(),o=!0===(null==r?void 0:r.individualLookupValuesEnabled);let a,l,u,c=0;n||(a=c,c+=2),n&&(l=c,c+=4),o&&(u=c,c+=1);const d=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>Ti(i,t,Float32Array))(n,o);this.zN={individualLookupValuesEnabled:o,attributesPerVertex:c,attributeOffsetCoordinateLowPrecision:a,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:u,prepareRenderData:(t,i)=>d(t,this.hc.getFillStyle())}}VN(t,i,s){const e=new Float32Array(2*i);let h=0,r=s||t[0];for(let s=0;s<i;s+=1){const i=t[s];this.EN+=Math.abs(r.x-i.x),this.RN+=Math.abs(r.y-i.y),e[h]=this.EN,e[h+1]=this.RN,h+=2,r=i}return e}Vr(){const t=this.pu,i=this.hc,s=this.fl(),e=this.gu,h=e.length,r=h>0,n=this.li.C(),o=this.li.o,a=this.Tz.lineStyleSolid(s),l=this.Tz.lineStyleDashed(s),u=a||l,c=u&&u.getThickness(),d=this.Tz.strokeFillSolid(s),f=this.Tz.strokeFillLinearGradient(s),A=this.Tz.strokeFillRadialGradient(s),g=this.Tz.strokeFillPaletted(s),v=d||f||A||g,y=this.zN.individualLookupValuesEnabled;if(l&&this.oi instanceof Q)return ti.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;r&&(this.dc=$i(this.dc,e,{canReturnB:!0}),this.fc+=h);let p=this.Ac.o;const m=this.DN._N(this.wx,this.Ac.C());if(m>0){let t=0;for(let i=0;i<m;i+=1){const i=this.wx[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=Ss,i.lastDataPoint=void 0,this.PN.xN(i)}this.dc=this.dc.slice(t),this.fc=this.dc.length,p=!0}let S=e,b=!1;(this.LN.nN(this.dc)||t)&&(b=!0),l&&!this.ON?(b=!0,this.ON=!0,this.PN.wN()):!l&&this.ON&&(this.wx.forEach((t=>{t.DV&&(this.XB.PR(t.DV),t.DV=void 0)})),this.ON=!1),b&&(this.LN.lN(),this.wx.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Ss,t.lastDataPoint=void 0})),this.PN.MN(),S=this.dc,this.EN=0,this.RN=0);const x=this.LN.cN(S),M=x.length;if(M>0){let t=this.LN.dN(this.dc)||(this.Mi("ApplicationType",(t=>"InternalUI"===t.type))?this.fc:1e5);M/t>10&&(t=M/10),this.PN.mN(x,t,((t,i,s,e)=>{const h=this.IN.calculateUserDataPointsBoundaries(i),r=this.LN.fN(h,s,this.dc)-e;return this.NN=i[s-1],{allocatedCoordinatesCount:t,existingDataPointsCount:r,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.XB.QR(t*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s)),lastDataPoint:i[s-1],DV:this.ON?this.XB.QR(2*t,this.VN(i,s,this.NN)):void 0}}),((t,i,s,e)=>{const h=Os(t.boundaries,this.IN.calculateUserDataPointsBoundaries(i)),r=this.LN.fN(h,t.existingCoordinatesCount+s,this.dc)-(t.jointPointsCount+e);this.XB.KR(t.coordsBuffer,t.existingCoordinatesCount*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s)),this.ON&&t.DV&&this.XB.KR(t.DV,2*t.existingCoordinatesCount,this.VN(i,s,this.NN)),this.NN=i[s-1],t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}if(p&&(this.ru=this.DN.FN(this.wx,this.Ac.C())),this.bD.TR(this.oi),A?this.Yz=Lv(this.fi||this.ru,this.oi,A.getPosition(),A.getExtent(),A.getShape(),this.XB.hR()):f?this.jz=Pv(this.fi||this.ru,this.oi,f.getAngle(!0),this.XB.hR()):(this.Yz=void 0,this.jz=void 0),s||o){if(g&&"value"===g.getLookUpProperty()&&!y){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw ti.alert(t),new Error(t)}if(v&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",i=f?["gradient",f]:A?["gradient",A]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform";this.BV="primitive"===t?{type:t,shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),l&&Qg.StippleTexture),mousePickingShader:n?this.XB.SE(Qg["2D"],Qg.MousePicking({useVertexId:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),l&&Qg.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:"triangulated"===t?{type:t,shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),this.LV?Qg.AliasedEdge:void 0,l&&Qg.StippleTextureInstanced),mousePickingShader:n?this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),l&&Qg.StippleTextureInstanced):void 0,geometry:ny(this.XB,c),thickness:c,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:A,fillStylePaletted:g}:{type:"none"}}else this.BV={type:"none"}}return this.EV=l?this.XB.jO(l.getPattern()):void 0,this.ac(i),this.pu=!1,this.gu=[],this.li.o=!1,this}Mc(t,i){const s=this.XB.gl,e=this.BV;if(!e||"none"===e.type)return{};const h=1===t?e.mousePickingShader:e.shader;if(!h)return{};const{lineStyleDashed:r,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:l}=e;return this.XB.Qc(h).SR(h,((h,u,c,d)=>{let f=!1;if(this.XB.wR(h("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(h("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(h("uRenderEffectMask"),2===t?1:0),this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(h("uScale"),this.bD._R()).xR(h("uDisp"),this.bD.kR()).xR(d("uScaleStart_highpart"),this.bD.qO()).xR(d("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(d("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(d("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(d("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(d("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(h("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(h("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t);else if(n)this.XB.$I(h("uColor"),n.getColor());else if(a){if(!this.Yz)return!1;this.XB.LO(c,this.Yz,a)}else if(o){if(!this.jz)return!1;this.XB.PO(c,this.jz,o)}else if(l){const t=Nh(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.XB.ZO(c,l.lut,t)}const A=fs(i);return this.IN.renderVisibleOnly(this.wx,(i=>{const{coordsBuffer:n}=i;if(!n)return;if(1===t){const[t,s]=A.ts(i.existingDataPointsCount);this.XB.XR(h("uFirstId"),t),"triangulated"===e.type?this.XB.$O(c,s):this.XB.NO(c,s)}s.bindBuffer(s.ARRAY_BUFFER,n);const o="triangulated"===e.type?oy._V:ay._V;if(this.oi.Ot()||void 0===this.zN.attributeOffsetCoordinateLowPrecision?this.oi.Ot()&&void 0!==this.zN.attributeOffsetCoordinateHighPrecision&&o(!0,this.XB,n,c,this.zN.attributesPerVertex,this.zN.attributeOffsetCoordinateHighPrecision):o(!1,this.XB,n,c,this.zN.attributesPerVertex,this.zN.attributeOffsetCoordinateLowPrecision),r){if(!i.DV||!this.EV)return;"triangulated"===e.type?oy.kV(this.XB,c,i.DV,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0):ay.kV(this.XB,c,i.DV,u("aLengthSoFar"),2,0),this.XB.xR(h("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(d("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(h("uStippleScale"),r.getPatternScale()).MR(h("uStippleTexture"),this.EV.HO,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.zN.attributeOffsetLookUpValue&&1!==t)if("triangulated"===e.type){const t=u("aLookupValueA");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(t,1),s.enableVertexAttribArray(t);const i=u("aLookupValueB");s.vertexAttribPointer(i,1,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.zN.attributeOffsetLookUpValue+this.zN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(i,1),s.enableVertexAttribArray(i)}else{const t=u("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),s.enableVertexAttribArray(t)}if("triangulated"===e.type){const{thickness:s}=e;oy.Mc(this.Sz,e.geometry,c,this.LV&&1!==t,1===t,s,i.existingCoordinatesCount-1)}else ay.FV(this.Sz,i.existingCoordinatesCount);f=!0}),void 0===this.ls),s.bindBuffer(s.ARRAY_BUFFER,null),f})),{idCount:this.fc}}_c(t,i,s,e,h){return{}}bu(t,i){return Array.isArray(t)||(t=[t]),this.gu=$i(this.gu,t,{canReturnB:!0}),this.ru=Os(this.ru,i||i||this.IN.calculateUserDataPointsBoundaries(t)),this}zi(){return super.zi(),this.EN=0,this.RN=0,this.NN=void 0,this}dispose(){return super.dispose(),this.PN.wN(),this.LN.AN(),this.BV={type:"none"},this.EV=void 0,this}wc(){return this}ob(t){this.Cu()>0&&this.Vr();const i=this.xu(),s=xt(i,t,this.xi(),this.mu,this.Su,this.oi,this.engine.oi,this.ru,this.IN.qV,this.IN.tN);return void 0!==s?i[s]:void 0}Dx(t){this.Cu()>0&&this.Vr();const i=this.xu(),s=i.length;if(0===s)return;const e=this.mu?1:0,h=s-(this.Su?2:1),r=this.xi();if(r===bt.Nearest){let e,h,r=ps;for(let n=0;n<s;n+=1){const s=tt(i[n],this.oi,this.gi.oi);if(void 0!==h){const i=Ts(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?tt(e,this.gi.oi,this.oi):void 0}if("x"===this.IN.qV&&r===bt.NearestX||"y"===this.IN.qV&&r===bt.NearestY){const s=Ct(i,tt(t,this.gi.oi,this.oi),this.IN.qV,this.IN.tN,e,h);return s?Bs(i[s.a],i[s.b],s.lerpAmount):void 0}return this.ob(t)}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return hs(this.hc)}uu(){return hs(this.hc)}}class my extends Rn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BV={fill:void 0,border:void 0},this.bD=new Uv,this.ru=Ss,this.GN=!1,this.$N=!1,this.UN=!1,this.YN=!1,this.jN=!1,this.Hd=[],this.Tz=Vh({polygonStyleSolid:()=>Ce(this.Xe)&&this.Xe,polygonStyleImage:()=>Nt(this.Xe)&&this.Xe,polygonStyleRadialGradient:()=>V(this.Xe)&&this.Xe,polygonStyleLinearGradient:()=>$(this.Xe)&&this.Xe,polygonStylePaletted:()=>Pe(this.Xe)&&this.Xe,polygonStyleIndividual:()=>Fe(this.Xe)&&this.Xe,lineStyleSolid:()=>_h(this.Ze)&&this.Ze,lineStyleDashed:()=>Fh(this.Ze)&&this.Ze,lineStyleFilled:()=>{const t=this.Ze&&this.Ze.getFillStyle();return Ce(t)&&t}}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.LV=this.XB.pO}jo(){const t={Ts:i=>this.UV(t,i),Fi:i=>this.YV(t,i),ou:i=>this.HN(t,i),_S:i=>this.WN(t,i),$I:i=>this.HV(t,i),hu:[],S:void 0,XN:void 0,Ai:0,jA:!0,ZN:this.Hd.length};return this.Hd.push(t),t}zi(){return this.Hd.length=0,this.GN=!0,this.gi.ki(this),this}Bv(){return this.Hd}Xd(t){const i=this.Hd.indexOf(t);i>=0&&(this.Hd.splice(i,1),this.jN=!0,this.gi.ki(this,t))}UV(t,i){return t.jA=i,this.jN=!0,t.jA||this.gi.ki(this,t),t}YV(t,i){return t.Ai=i,this.YN=!0,t}HN(t,i){return t.hu=i,this.GN=!0,t}WN(t,i){return t.S=i,this.$N=!0,t}HV(t,i){return t.XN=null==i?void 0:i.toUint32(),this.UN=!0,t}Vr(){const t=this.li.C(),i=this.li.o,e=this.al(),h=this.YN,r=this.GN,n=this.$N,o=this.UN,a=this.jN,l=this.Ze,u=this.fl(),c=this.Hd.filter((t=>t.jA&&t.hu.length>0));if(this.bD.TR(this.oi),(r||a)&&(this.ru=Os(...c.map((t=>Es(t.hu))))),r||a){const t=c.map((t=>[...t.hu,t.hu[0],{x:Number.NaN,y:Number.NaN}])).flat(),i=Ti(t,!1,Float64Array),e=this.oi.Ot()?Ti(t,!0):i;this.PV=this.XB.pR(e,!1,this.PV);let h=[];c.reduce(((t,e)=>{const r=t,n=2*(e.hu.length+1),o=new Float64Array(i.buffer,r,n),a=s(o,void 0,2),l=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let t=0;t<a.length;t+=1)a[t]+=l;return h=$i(h,a,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT}),0);const r=new Uint32Array(h);this.JN=this.XB.iO(r,this.JN),this.QN=r.length,this.KN=i.length/2-1}const d=this.Tz.polygonStyleSolid(e),f=this.Tz.polygonStylePaletted(e),A=this.Tz.polygonStyleIndividual(e),g=this.Tz.polygonStyleRadialGradient(e),v=this.Tz.polygonStyleLinearGradient(e),y=this.Tz.polygonStyleImage(e),p=d||f||v||g||y||A,m=this.Tz.lineStyleSolid(u),S=this.Tz.lineStyleDashed(e),b=m||S,x=this.Tz.lineStyleFilled(u),M=x,w=b&&Math.max(b.getThickness(),0);if((e||u||i)&&(this.BV.fill=p?{shader:this.XB.SE(Qg["2D"],d&&Qg.Color({dataType:"uniform"}),v&&Qg.Color({dataType:["gradient",v]}),g&&Qg.Color({dataType:["gradient",g]}),f&&Qg.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&Qg.Color({dataType:"attribute"}),y&&Qg.Color({dataType:["image",y]}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),Qg.AttributeHighlight),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),Qg.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:v,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:y,fillStyleIndividual:A}:void 0,this.BV.border=b&&M&&"number"==typeof w&&0!==w?{shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:"uniform"}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),this.LV?Qg.AliasedEdge:void 0,S&&Qg.StippleTextureInstanced,Qg.AttributeHighlight),geometry:ny(this.XB,w),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),S&&Qg.StippleTextureInstanced,Qg.AttributeHighlight)}:void 0,fillStyleSolid:x,lineStyleDashed:S,thickness:w}:void 0),h||r){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.hu.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.Ai;s+=e})),this.qN=this.XB.pR(i,!0,this.qN)}if(t){if(r){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;c.forEach((t=>{const e=t.hu.length+2;for(let h=s;h<s+e;h+=1)i[h]=t.ZN;s+=e})),this.tG=this.XB.pR(i,!1,this.tG)}}else this.tG&&(this.XB.PR(this.tG),this.tG=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Float32Array(t);let s=0;const e={min:ps,max:ms};c.forEach((t=>{const h=void 0!==t.S?t.S:Yt,r=t.hu.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r,void 0!==t.S&&(e.min=Math.min(e.min,h),e.max=Math.max(e.max,h))})),this.iG=e,this.sG=this.XB.pR(i,!1,this.sG)}if(o||r&&A){const t=c.reduce(((t,i)=>t+i.hu.length+2),0),i=new Uint32Array(t);let s=0;const e=A?A.getFallbackColor().toUint32():C.toUint32();c.forEach((t=>{const h=void 0!==t.XN?t.XN:e,r=t.hu.length+2;for(let t=s;t<s+r;t+=1)i[t]=h;s+=r})),this.eG=this.XB.pR(i,!1,this.eG,Uint32Array)}if(g?this.Ez=Lv(this.fi||this.ru,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.XB.hR()):v?this.Rz=Pv(this.fi||this.ru,this.oi,v.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),S){if(r){const t=c.reduce(((t,i)=>t+i.hu.length),2*c.length),i=new Float32Array(2*t);let s=0;c.forEach((t=>{let e=t.hu[0],h=0,r=0;for(const n of t.hu)h+=Math.abs(n.x-e.x),r+=Math.abs(n.y-e.y),i[s]=h,i[s+1]=r,s+=2,e=n;i[s+0]=h+Math.abs(t.hu[0].x-e.x),i[s+1]=r+Math.abs(t.hu[0].y-e.y),i[s+2]=Number.NaN,i[s+3]=Number.NaN,s+=4})),this.DV=this.XB.pR(i,!1,this.DV)}this.EV=this.XB.jO(S.getPattern())}else this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.EV=void 0;return this.hG=this.XB.JO(this,this.hG,y,void 0,r||a||this.oi.si(),((t,i,s)=>this.rG(t,i,s,c))),this.YN=!1,this.jN=!1,this.GN=!1,this.$N=!1,this.UN=!1,this.li.o=!1,this.dl(this.Xe),this.yl(l),this}wi(){return this.iG}Mc(t,i){var s,e;const{fill:h,border:r}=this.BV,n=this.PV,o=this.qN,a=this.tG;if(!n||!o)return{};if(h){const{fillStyleSolid:e,fillStyleLinearGradient:r,fillStyleRadialGradient:l,fillStylePaletted:u,fillStyleImage:c,fillStyleIndividual:d}=h,f=this.JN,A=this.QN,g=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;g&&n&&f&&void 0!==A&&this.XB.Qc(g).SR(g,((s,h,g,v)=>{if(this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(v("uScaleStart_highpart"),this.bD.qO()).xR(v("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(v("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(v("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(v("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(v("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.XB.EO(g,n,this.oi.Ot(),void 0).aO(f).oO(h("aIsHighlighted"),o).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.XB.XR(s("uFirstId"),i),!a)return!1;this.XB.oO(h("aPickingIdOffset"),a)}else if(e)this.XB.$I(s("uColor"),e.getColor());else if(l){if(!this.Ez)return!1;this.XB.LO(g,this.Ez,l)}else if(r){if(!this.Rz)return!1;this.XB.PO(g,this.Rz,r)}else if(u){const t=Nh(u,this,this.iG);if(!t&&u.lut.percentageValues)return!1;if(this.XB.ZO(g,u.lut,t),"value"===u.getLookUpProperty()){if(!this.sG)return!1;this.XB.oO(h("aLookupValue"),this.sG)}}else if(c){if(!this.hG)return!1;this.XB.$I(v("uColor"),c.getSurroundingColor()).MR(s(Sg),this.hG.texture.iR()||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:h("aTextureCoord"),size:2}).ZR(c.fitMode)}else if(d){if(!this.eG)return!1;const t=h("aColor");this.XB.gl.bindBuffer(this.XB.gl.ARRAY_BUFFER,this.eG),this.XB.gl.vertexAttribPointer(t,4,this.XB.gl.UNSIGNED_BYTE,!0,0,0),this.XB.gl.enableVertexAttribArray(t)}return this.XB.uO(A,void 0,void 0,this.XB.gl.UNSIGNED_INT),!0}))}if(r){const{geometry:s,fillStyleSolid:h,thickness:l,lineStyleDashed:u}=r,c=this.KN,d=1===t?null===(e=r.mousePicking)||void 0===e?void 0:e.shader:r.shader;d&&n&&c&&this.XB.Qc(d).SR(d,((e,r,d,f)=>{if(this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(e("uScale"),this.bD._R()).xR(e("uDisp"),this.bD.kR()).xR(f("uScaleStart_highpart"),this.bD.qO()).xR(f("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(f("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(f("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(f("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(f("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(e("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(e("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),this.XB.bR(o,1,{location:r("aIsHighlighted"),size:1}).$I(e("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(e("uRenderEffectMask"),2===t?1:0),1===t){if(this.XB.XR(e("uFirstId"),i),!a)return!1;this.XB.oO(r("aPickingIdOffset"),a,1)}else h&&this.XB.$I(e("uColor"),h.getColor());if(u){if(!this.EV||!this.DV)return!1;oy.kV(this.XB,d,this.DV,r("aLengthSoFarA"),r("aLengthSoFarB"),2,2,0),this.XB.xR(e("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(f("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(e("uStippleScale"),u.getPatternScale()).MR(e("uStippleTexture"),this.EV.HO,1)}return oy._V(this.oi.Ot(),this.XB,n,d,this.oi.Ot()?4:2,0),oy.Mc(this.Sz,s,d,this.LV&&1!==t,1===t,l,c),!0}))}return{idCount:this.Hd.length}}rG(t,i,s,e){const h=tt({x:this.ru.min.x,y:this.ru.min.y},this.oi,this.gi.oi),r=tt({x:this.ru.max.x,y:this.ru.max.y},this.oi,this.gi.oi),n={x:Math.abs(h.x-r.x),y:Math.abs(h.y-r.y)},o=Rv(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=e.reduce(((t,i)=>t+i.hu.length+2),0),f=new Float32Array(2*d),A=this.ru.max.x-this.ru.min.x,g=this.ru.max.y-this.ru.min.y,v=l-u,y=c-a;let p=0;for(const t of e){for(const i of t.hu){const t=u+v*((i.x-this.ru.min.x)/A),s=a+y*((i.y-this.ru.min.y)/g);f[p]=t,f[p+1]=s,p+=2}const i=u+v*((t.hu[0].x-this.ru.min.x)/A),s=a+y*((t.hu[0].y-this.ru.min.y)/g);f[p]=i,f[p+1]=s,p+=2,f[p]=Number.NaN,f[p+1]=Number.NaN,p+=2}return f}_c(t,i,s,e,h){return{collectionMember:this.Hd.find((s=>i+s.ZN===t))}}wc(){return this.JN&&(this.XB.PR(this.JN),this.JN=void 0),this.PV&&(this.XB.PR(this.PV),this.PV=void 0),this.qN&&(this.XB.PR(this.qN),this.qN=void 0),this.tG&&(this.XB.PR(this.tG),this.tG=void 0),this.sG&&(this.XB.PR(this.sG),this.sG=void 0),this.eG&&(this.XB.PR(this.eG),this.eG=void 0),this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.BV={fill:void 0,border:void 0},this.hG=this.XB.QO(this,this.hG),this}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return hs(this.Ze)}uu(){return hs(this.Ze)}}class Sy extends zn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bD=new Uv,this.nG=Ss,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>V(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>$(this.Xe)&&this.Xe,fillStyleImage:()=>Nt(this.Xe)&&this.Xe,strokeStyleSolid:()=>_h(this.Ze)&&this.Ze,strokeFillSolid:()=>{const t=this.Ze.getFillStyle();return Ce(t)&&t},strokeFillLinearGradient:()=>{const t=this.Ze.getFillStyle();return $(t)&&t},strokeFillRadialGradient:()=>{const t=this.Ze.getFillStyle();return V(t)&&t}}),this.rG=(t,i,s)=>{const e=tt(this.zl(),this.oi,this.gi.oi),h=Xs(tt(Ws(this.zl(),this._t()),this.oi,this.gi.oi),e);return Rv(t,i,h.x,h.y,s)},this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i}Vr(){super.Vr();const t=this.li.C(),i=this.al(),s=this.In.o||this.U.o||this.wl.o||this.kl.o,e=this.Ze,h=this.fl(),n=e.getThickness(),o=this.wl.C();this.bD.TR(this.oi);const a=this.oi.si();if(s){const t=this.U.C();this.hu=function(t,i,s,e,h){const n=((t,i,s)=>[t,r(t.x+i,t.y),r(t.x+i,t.y+s),r(t.x,t.y+s)])(t,i,s);if(0!==e||e%360!=0){const t=e*Math.PI/180;n[0]=Gs(n[0],h,t),n[1]=Gs(n[1],h,t),n[2]=Gs(n[2],h,t),n[3]=Gs(n[3],h,t)}return n}(this.In.C(),t.x,t.y,o,this.kl.C());const i=Ti(this.hu,this.oi.Ot());this.Lz=this.XB.pR(i,!1,this.Lz),this.Bz=this.hu.length,this.nG=Es(this.hu)}const l=this.Tz.fillStyleSolid(i),u=this.Tz.fillStyleRadialGradient(i),c=this.Tz.fillStyleLinearGradient(i),d=this.Tz.fillStyleImage(i),f=l||u||c||d;i&&(this.Oz=f?this.XB.SE(Qg["2D"],l&&Qg.Color({dataType:"uniform"}),c&&Qg.Color({dataType:["gradient",c]}),u&&Qg.Color({dataType:["gradient",u]}),d&&Qg.Color({dataType:["image",d]}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),u?this.Ez=Lv(this.fi||this.nG,this.oi,u.getPosition(),u.getExtent(),u.getShape(),this.XB.hR()):c?this.Rz=Pv(this.fi||this.nG,this.oi,c.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),this.hG=this.XB.JO(this,this.hG,d,void 0,a||s,this.rG);const A=this.Tz.strokeStyleSolid(h),g=this.Tz.strokeFillSolid(h),v=this.Tz.strokeFillLinearGradient(h),y=this.Tz.strokeFillRadialGradient(h),p=A,m=g||v||y;if(p&&(s||h||a&&1!==n)){if(1===n||-1===n)[this.zz,this.oG]=[this.hu,void 0];else{const t=this.oi;[this.zz,this.oG]=t instanceof Q?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.ni(e,h,o,-o),s.ni(h,e,-o,-o),s.ni(n,r,-o,-o),s.ni(r,n,o,-o),s.ni(e,h,-o,o),s.ni(h,e,o,o),s.ni(n,r,o,o),s.ni(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.hu,n,t):((t,i,s)=>{const e=t[0],h=t[1],n=t[2],o=t[3],a=r(i.x*s*.5,i.y*s*.5),l=Us($s(h,e)),u=Us($s(o,e)),c=Qs(l),d=Qs(u);return[[Ws(e,Ws(Hs(c,a.x),Hs(d,a.y))),Ws(h,Ws(Hs(l,a.x),Hs(d,a.y))),Ws(o,Ws(Hs(c,a.x),Hs(u,a.y))),Ws(n,Ws(Hs(l,a.x),Hs(u,a.y))),Ws(e,Ws(Hs(l,a.x),Hs(u,a.y))),Ws(h,Ws(Hs(c,a.x),Hs(u,a.y))),Ws(o,Ws(Hs(l,a.x),Hs(d,a.y))),Ws(n,Ws(Hs(c,a.x),Hs(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.hu,t.ri(),n)}this.Nz=this.XB.pR(Ti(this.zz,this.oi.Ot()),!1,this.Nz),this.oG?(this.xV=this.XB.iO(new Uint16Array(this.oG),this.xV),this.Vz=this.oG.length):(this.xV&&this.XB.PR(this.xV),this.xV=void 0,this.Vz=this.zz.length)}return h&&(this.Wz=p&&m?this.XB.SE(Qg["2D"],Qg.Color({dataType:y?["gradient",y]:v?["gradient",v]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),y?this.Yz=Lv(this.nG,this.oi,y.getPosition(),y.getExtent(),y.getShape(),this.XB.hR()):v?this.jz=Pv(this.nG,this.oi,v.getAngle(!0),this.XB.hR()):(this.Yz=void 0,this.jz=void 0),this.Xz=t&&f?this.Xz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.Zz=t&&this.Ze!==$t?this.Zz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.dl(this.Xe),this.yl(e),this.In.o=!1,this.wl.o=!1,this.U.o=!1,this.kl.o=!1,this}Mc(t,i){const s=1===t?this.Xz:this.Oz,e=this.Lz,h=this.Bz,r=this.Tz.fillStyleSolid(!1),n=this.Tz.fillStyleRadialGradient(!1),o=this.Tz.fillStyleLinearGradient(!1),a=this.Tz.fillStyleImage(!1);s&&e&&h&&this.Xe!==xe&&(this.XB.Qc(s),this.XB.SR(s,((s,l,u,c)=>{if(this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(c("uScaleStart_highpart"),this.bD.qO()).xR(c("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(c("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(c("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(c("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(c("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.XB.XR(s("uFirstId"),i).$O(u,1);else if(r)this.XB.$I(s("uColor"),r.getColor());else if(n){if(!this.Ez)return!1;this.XB.LO(u,this.Ez,n)}else if(o){if(!this.Rz)return!1;this.XB.PO(u,this.Rz,o)}else if(a){if(!this.hG)return!1;const t=this.hG&&this.hG.texture.iR();this.XB.$I(c("uColor"),a.getSurroundingColor()).MR(s(Sg),t||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).ZR(a.fitMode)}return this.XB.wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0).EO(u,e,this.oi.Ot(),void 0).Vk(this.XB.gl.TRIANGLE_FAN,h),!0})));const l=1===t?this.Zz:this.Wz,u=this.Tz.strokeStyleSolid(!1),c=this.Tz.strokeFillSolid(!1),d=this.Tz.strokeFillLinearGradient(!1),f=this.Tz.strokeFillRadialGradient(!1),A=this.Nz;return l&&A&&u&&(this.XB.Qc(l),this.XB.SR(l,((s,e,h,r)=>{if(this.oi instanceof J||this.oi instanceof Rh?this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(r("uScaleStart_highpart"),this.bD.qO()).xR(r("uScaleStart_lowpart"),this.bD.tz()):this.oi instanceof Q&&this.XB.xR(r("uScaleStart"),this.bD.MixedScaleXY.uScaleStart).xR(r("uScaleStartLog"),this.bD.MixedScaleXY.uScaleStartLog).xR(r("uScaleInterval"),this.bD.MixedScaleXY.uScaleInterval).xR(r("uScaleIntervalLog"),this.bD.MixedScaleXY.uScaleIntervalLog).xR(s("uViewportStart"),this.bD.MixedScaleXY.uViewportStart).xR(s("uViewportSize"),this.bD.MixedScaleXY.uViewportSize),1===t)this.XB.XR(s("uFirstId"),i).$O(h,1);else if(c)this.XB.$I(s("uColor"),c.getColor());else if(f){if(!this.Yz)return!1;this.XB.LO(h,this.Yz,f)}else if(d){if(!this.jz)return!1;this.XB.PO(h,this.jz,d)}return this.XB.wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0).EO(h,A,this.oi.Ot(),void 0),this.xV?this.XB.aO(this.xV).uO(this.Vz):this.XB.Vk(this.XB.gl.LINE_LOOP,this.Vz),!0}))),{idCount:1}}_c(t,i,s,e,h){return{}}wc(){return this.xV&&(this.XB.PR(this.xV),this.xV=void 0),this.Lz&&(this.XB.PR(this.Lz),this.Lz=void 0),this.Nz&&(this.XB.PR(this.Nz),this.Nz=void 0),this.hG=this.XB.QO(this,this.hG),this.Oz=void 0,this.Wz=void 0,this.Xz=void 0,this.Zz=void 0,this}Hi(){return Math.max(this.In.C().x,this.In.C().x+this.U.C().x)}ji(){return Math.min(this.In.C().x,this.In.C().x+this.U.C().x)}Xi(){return Math.max(this.In.C().y,this.In.C().y+this.U.C().y)}Wi(){return Math.min(this.In.C().y,this.In.C().y+this.U.C().y)}lu(){return hs(this.Ze)}uu(){return hs(this.Ze)}}class by extends Vn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.bD=new Uv,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStylePaletted:()=>Pe(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>V(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>$(this.Xe)&&this.Xe,fillStyleImage:()=>Nt(this.Xe)&&this.Xe,strokeLineStyleSolid:()=>_h(this.Ze)&&this.Ze,strokeLineSolidFill:()=>{const t=this.Ze.getFillStyle();return Ce(t)&&t},strokeLinearGradientFill:()=>{const t=this.Ze.getFillStyle();return $(t)&&t},strokeRadialGradientFill:()=>{const t=this.Ze.getFillStyle();return V(t)&&t}}),this.rG=(t,i,s)=>{const e=tt({x:this.ru.min.x,y:this.ru.min.y},this.oi,this.gi.oi),h=tt({x:this.ru.max.x,y:this.ru.max.y},this.oi,this.gi.oi),r={x:Math.abs(e.x-h.x),y:Math.abs(e.y-h.y)},n=Rv(t,i,r.x,r.y,s),o=n[1],a=n[4],l=n[6],u=n[7],c=new Float32Array(2*this.hu.length),d=this.ru.max.x-this.ru.min.x,f=this.ru.max.y-this.ru.min.y,A=a-l,g=u-o;let v=0;for(const t of this.hu){const i=l+A*((t.x-this.ru.min.x)/d),s=o+g*((t.y-this.ru.min.y)/f);c[v]=i,c[v+1]=s,v+=2}return c},this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i}yd(t){let i,s=Number.MAX_VALUE;for(const e of this.hu){const h=Is(tt(e,this.oi,this.gi.oi),t);h<s&&(s=h,i=e)}return i}Vr(){const t=this.li.C(),i=this.al(),e=this.nu,h=this.hu.length>=3,r=this.Ze,n=this.fl(),o=r.getThickness(),a=this.vl(o);this.bD.TR(this.oi),this.re=this.oi.ri();const l=this.oi.si();if(e&&(this.ru=Es(this.hu)),e&&h){const t=Ti(this.hu,this.oi.Ot());this.Lz=this.XB.pR(t,!1,this.Lz),this.aG=new Uint16Array(s(t)),this.lG=this.XB.iO(this.aG,this.lG),this.Bz=this.aG.length}const u=this.Tz.fillStyleSolid(i),c=this.Tz.fillStylePaletted(i),d=this.Tz.fillStyleRadialGradient(i),f=this.Tz.fillStyleLinearGradient(i),A=this.Tz.fillStyleImage(i),g=u||c&&"value"!==c.getLookUpProperty()&&c||f||d||A;if(i&&(this.Oz=g?this.XB.SE(Qg["2D"],u&&Qg.Color({dataType:"uniform"}),f&&Qg.Color({dataType:["gradient",f]}),d&&Qg.Color({dataType:["gradient",d]}),c&&Qg.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),A&&Qg.Color({dataType:["image",A]}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),d?this.Ez=Lv(this.fi||this.ru,this.oi,d.getPosition(),d.getExtent(),d.getShape(),this.XB.hR()):f?this.Rz=Pv(this.fi||this.ru,this.oi,f.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),this.hG=this.XB.JO(this,this.hG,A,void 0,l||e,this.rG),(e||a||l&&1!==o)&&h){const t=1===o||-1===o?this.hu:Zv(this.hu,this.re,o);this.zz=Ti(t,this.oi.Ot()),this.Nz=this.XB.pR(this.zz,!0,this.Nz),this.Vz=t.length}const v=this.Tz.strokeLineStyleSolid(n),y=this.Tz.strokeLineSolidFill(n),p=this.Tz.strokeLinearGradientFill(n),m=this.Tz.strokeRadialGradientFill(n),S=v,b=y||p||m;return n&&(this.Wz=S&&b?this.XB.SE(Qg["2D"],Qg.Color({dataType:m?["gradient",m]:p?["gradient",p]:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0),m?this.Yz=Lv(this.fi||this.ru,this.oi,m.getPosition(),m.getExtent(),m.getShape(),this.XB.hR()):p?this.jz=Pv(this.fi||this.ru,this.oi,p.getAngle(!0),this.XB.hR()):(this.Yz=void 0,this.jz=void 0),this.Xz=t&&g?this.Xz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.Zz=t&&this.Ze!==$t?this.Xz||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})):void 0,this.nu=!1,this.dl(this.Xe),this.yl(r),this}Mc(t,i){const s=1===t?this.Xz:this.Oz,e=this.Lz,h=this.Bz,r=this.Tz.fillStyleSolid(!1),n=this.Tz.fillStyleRadialGradient(!1),o=this.Tz.fillStyleLinearGradient(!1),a=this.Tz.fillStylePaletted(!1),l=this.Tz.fillStyleImage(!1);s&&e&&h&&this.XB.Qc(s).SR(s,((s,h,u,c)=>{if(this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).xR(c("uScaleStart_highpart"),this.bD.qO()).xR(c("uScaleStart_lowpart"),this.bD.tz()).EO(u,e,this.oi.Ot(),void 0).aO(this.lG).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),1===t)this.XB.XR(s("uFirstId"),i).$O(u,1);else if(r)this.XB.$I(s("uColor"),r.getColor());else if(n){if(!this.Ez)return!1;this.XB.LO(u,this.Ez,n)}else if(o){if(!this.Rz)return!1;this.XB.PO(u,this.Rz,o)}else if(a){const t=Nh(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.XB.ZO(u,a.lut,t)}else if(l){if(!this.hG)return!1;this.XB.$I(c("uColor"),l.getSurroundingColor()).MR(s(Sg),this.hG.texture.iR()||this.hG.sourceMissingTexture,0).bR(this.hG.texCoordsBuffer,void 0,{location:h("aTextureCoord"),size:2}).ZR(l.fitMode)}return this.XB.uO(this.Bz),!0}));const u=1===t?this.Zz:this.Wz,c=this.Ze,d=this.Nz,f=this.Vz;return u&&d&&f&&this.XB.Qc(u).SR(u,((s,e,h,r)=>{this.XB.wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0).xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).EO(h,d,this.oi.Ot(),void 0);const n=c.getFillStyle();if(1===t)this.XB.XR(s("uFirstId"),i).$O(h,1);else if(Ce(n))this.XB.$I(s("uColor"),n.getColor());else if(V(n)){if(!this.Yz)return!1;this.XB.LO(h,this.Yz,n)}else if($(n)){if(!this.jz)return!1;this.XB.PO(h,this.jz,n)}const o=c.getThickness(),a=-1===o||1===o;return this.XB.Vk(a?this.XB.gl.LINE_LOOP:this.XB.gl.TRIANGLE_STRIP,this.Vz),!0})),{idCount:1}}_c(t,i,s,e,h){return{}}wc(){return this.lG&&(this.XB.PR(this.lG),this.lG=void 0),this.Lz&&(this.XB.PR(this.Lz),this.Lz=void 0),this.Nz&&(this.XB.PR(this.Nz),this.Nz=void 0),this.Oz=void 0,this.Wz=void 0,this.Xz=void 0,this.Zz=void 0,this.hG=this.XB.QO(this,this.hG),this}}class xy extends Bv{constructor(t){super(t);const{vertices:i,drawMode:s,drawSize:e}=this.SV();this.bV=t.pR(i),this.MV=e,this.wV=s}Qc(t){return this.XB.bR(this.bV,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Vk(t,i,s){return this.XB.cO(void 0!==i?i:this.wV,s||0,this.MV,t),this}SV(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.XB.gl.TRIANGLES,drawSize:6}}GE(){this.XB.PR(this.bV)}}const My=t=>{let i=t.VR.OE.get(void 0);return i||(i=new xy(t),t.VR.OE.set(void 0,i),i)};class wy extends Bv{constructor(t,i,s,e,h){super(t),this.wV=s,this.uG=i.length,this.zB=t.pR(Ti(i,!1)),this.cG=e,h&&(this.dG={...h,zB:t.pR(h.yM,!1),uG:h.yM.length/4})}fG(t){return t>1}Vk(t,i,s,e,h,r){return"object"==typeof h?i?this.XB.oO(t.attribute("aOffsetScale"),i,1,s*Float32Array.BYTES_PER_ELEMENT).xR(t.uniform(bg),[h.width,h.height]):this.XB.wR(t.uniform("uOffsetScale"),h.scale).xR(t.uniform(bg),[h.width,h.height]):r?i?this.XB.oO(t.attribute(`${wy.AG}Amount`),i,1,s*Float32Array.BYTES_PER_ELEMENT):this.XB.wR(t.uniform(`${wy.AG}Amount`),h):this.XB.wR(t.uniform("uPointSize"),h),r?this.XB.bR(this.zB,0,{location:t.attribute(wy.AG),size:2}).cO(this.wV,0,this.uG,e):this.XB.Vk(this.XB.gl.POINTS,e),this}gG(t,i,s,e,h,r){return!(!this.dG||!h||(i?this.XB.oO(t.attribute(`${wy.AG}Amount`),i,1):this.XB.wR(t.uniform(`${wy.AG}Amount`),e),this.XB.wR(t.uniform(`${wy.vG}Amount`),r).bR(this.dG.zB,0,{location:t.attribute(wy.AG),size:2},{location:t.attribute(wy.vG),size:2}).cO(this.dG.wV,0,this.dG.uG,s),0))}GE(){var t;this.XB.PR(this.zB),this.XB.PR(null===(t=this.dG)||void 0===t?void 0:t.zB)}}wy.AG="aFillOffset",wy.vG="aBorderOffset";const _y=(t,i=0)=>{const s=[r(-.5,-.5),r(.5,-.5),r(.5,.5),r(-.5,.5)];return new wy(t,s,t.gl.TRIANGLE_FAN,i,{yM:[-.5,-.5,0,0,-.5,-.5,-1,-1,.5,-.5,0,0,.5,-.5,1,-1,.5,.5,0,0,.5,.5,1,1,-.5,.5,0,0,-.5,.5,-1,1,-.5,-.5,0,0,-.5,-.5,-1,-1],wV:t.gl.TRIANGLE_STRIP})},ky=(t,i=0)=>{const s=.05,e=[r(-.5,-.05),r(.5,-.05),r(.5,s),r(.5,s),r(-.5,s),r(-.5,-.05),r(-.05,-.5),r(s,-.5),r(s,-.05),r(s,-.05),r(-.05,-.05),r(-.05,-.5),r(-.05,.5),r(s,.5),r(s,s),r(s,s),r(-.05,s),r(-.05,.5)];return new wy(t,e,t.gl.TRIANGLES,i,{yM:[-.05,.5,0,0,-.05,.5,-1,1,s,.5,0,0,s,.5,1,1,s,s,0,0,s,s,1,1,.5,s,0,0,.5,s,1,1,.5,-.05,0,0,.5,-.05,1,-1,s,-.05,0,0,s,-.05,1,-1,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,-.05,0,0,-.05,-.05,-1,-1,-.5,-.05,0,0,-.5,-.05,-1,-1,-.5,s,0,0,-.5,s,-1,1,-.05,s,0,0,-.05,s,-1,1,-.05,.5,0,0,-.05,.5,-1,1],wV:t.gl.TRIANGLE_STRIP})},Cy=(t,i,s)=>{if(Ph(t))return Cy(Qe.Square,i,s);let e=i.VR.BE.get(t);if(t===Qe.Circle||t===Qe.HollowCircle){const h=s<=3?4:s<=5?8:s<=10?16:24;return t===Qe.Circle?(e=i.VR.DE.get(h)||((t,i,s=0)=>{const e=2*Math.PI/i,h=[],r=[];h.push({x:0,y:0});for(let t=0;t<=i;t+=1){const i=t*e,s=Math.cos(i),n=Math.sin(i),o=.5*s,a=.5*n;h.push({x:o,y:a}),r.push(o,a,0,0,o,a,s,n)}return new wy(t,h,t.gl.TRIANGLE_FAN,s,{yM:r,wV:t.gl.TRIANGLE_STRIP})})(i,h),i.VR.DE.set(h,e),e):(e=i.VR.EE.get(h)||((t,i,s=0)=>{const e=[],h=2*Math.PI/i;for(let t=0;t<=i;t+=1){const i=t*h,s=Math.cos(i),r=Math.sin(i);e.push({x:.5*s,y:.5*r}),e.push({x:.3*s,y:.3*r})}return new wy(t,e,t.gl.TRIANGLE_STRIP,s,void 0)})(i,h),i.VR.EE.set(h,e),e)}if(!e){switch(t){case Qe.Triangle:e=((t,i=0)=>{const s=[{x:-.5773502691892515,y:.3333333333333333},{x:0,y:-.6666666666666666},{x:.5773502691892515,y:.3333333333333333}];return new wy(t,s,t.gl.TRIANGLES,i,{yM:[s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y,s[1].x,s[1].y,0,0,s[1].x,s[1].y,2*s[1].x,2*s[1].y,s[2].x,s[2].y,0,0,s[2].x,s[2].y,2*s[2].x,2*s[2].y,s[0].x,s[0].y,0,0,s[0].x,s[0].y,2*s[0].x,2*s[0].y],wV:t.gl.TRIANGLE_STRIP})})(i);break;case Qe.Square:e=_y(i);break;case Qe.Plus:e=ky(i);break;case Qe.Cross:e=ky(i,45);break;case Qe.Diamond:e=_y(i,45);break;case Qe.Arrow:e=((t,i=0)=>{const s=.05,e=[r(-.05,-.5),r(s,-.5),r(s,.45),r(s,.45),r(-.05,.45),r(-.05,-.5),r(-.5,0),r(-.4,0),r(0,.4),r(0,.4),r(0,.5),r(-.5,0),r(.5,0),r(.4,0),r(0,.4),r(0,.4),r(0,.5),r(.5,0)];return new wy(t,e,t.gl.TRIANGLES,i,{yM:[-.5,0,0,0,-.5,0,-2,-1,0,.5,0,0,0,.5,0,1,.5,0,0,0,.5,0,2,-1,.4,0,0,0,.4,0,0,-1,s,.355,0,0,s,.355,1,-2,s,-.5,0,0,s,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,.355,0,0,-.05,.355,-1,-2,-.4,0,0,0,-.4,0,0,-1,-.5,0,0,0,-.5,0,-2,-1],wV:t.gl.TRIANGLE_STRIP})})(i);break;case Qe.Star:e=((t,i=0)=>new wy(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,i,{yM:[0,.5,0,0,0,.5,0,1,.1,.1,0,0,.1,.1,1,1,.5,.1,0,0,.5,.1,2,1,.2,-.1,0,0,.2,-.1,1,-1,.3,-.5,0,0,.3,-.5,1,-2,0,-.25,0,0,0,-.25,0,-1,-.3,-.5,0,0,-.3,-.5,-1,-2,-.2,-.1,0,0,-.2,-.1,-1,-1,-.5,.1,0,0,-.5,.1,-2,1,-.1,.1,0,0,-.1,.1,-1,1,0,.5,0,0,0,.5,0,1],wV:t.gl.TRIANGLE_STRIP}))(i);break;case Qe.Minus:e=((t,i=0)=>{const s=.05,e=[r(-.5,-.05),r(.5,-.05),r(.5,s),r(.5,s),r(-.5,s),r(-.5,-.05)];return new wy(t,e,t.gl.TRIANGLES,i,{yM:[-.5,-.05,0,0,-.5,-.05,-1,-1,.5,-.05,0,0,.5,-.05,1,-1,.5,s,0,0,.5,s,1,1,-.5,s,0,0,-.5,s,-1,1,-.5,-.05,0,0,-.5,-.05,-1,-1],wV:t.gl.TRIANGLE_STRIP})})(i);break;default:return ss(0,"LightningChart JS unidentified point shape")}i.VR.BE.set(t,e)}return e};class Ty extends Xn{constructor(t,i,s,e){super(t,i,s,e,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.yG=kn.fillStyle,this.pG=d("bottom"),this.mG=kn.fillStyle,this.SG=$t,this.bG=d(Qe.Circle),this.xG=d(5),this.MG=d(0),this.wG=d(void 0),this.Bw=!0,this._G={x:0,y:0}}Ww(t){this.pG.C()!==t&&this.pG._(t)}Rd(t){return this.yG=Ln(this.yG,t),this}zw(){return this.yG}kG(){return Pn(this.CG,this.yG)}TG(){return Pn(this.FG,this.mG)}IG(){return this.SG!==this.LG}Ed(t){return this.mG=Ln(this.mG,t),Nt(this.mG)&&(this.zd(Qe.Square),this.jd(1)),this}$d(){return this.mG}Ud(t){return this.SG="function"==typeof t?t(this.SG):t,this}Yd(){return this.SG}zd(t){return this.bG._(t),Ph(this.bG.C())&&this.jd(1),this}Vd(){return this.bG.C()}jd(t){return this.xG._(t),this}Vw(){return this.xG.C()}Nd(t){return this.MG._(t),this}Gd(){return this.MG.C()}UA(t){return this._G=t,this}Nw(){return this._G}Pw(t){return this.wG._(t),this}Gw(){return this.wG.C()}}class Fy extends dy{constructor(t,i){super(t,i),this.sN=!1,this.eN={PG:!1,BG:0},this.rN=t instanceof J?{type:"linear",scale:t}:{type:"unknown"},this.iN.Mi("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.sN=!0)}))}DG(t,i,s){const e=null==t?void 0:t.Qc(i),h=null==e?void 0:e.td,r=null==e?void 0:e.sd,n=null==t?void 0:t.Lc,o=null==t?void 0:t.Ic,a=null==t?void 0:t.Jc(i);if(!t||this.sN||!a||"linear"!==this.rN.type||!h||!r||void 0===n||void 0===o||!s){const t=this.eN.PG;return this.eN={PG:!1,BG:null!=n?n:0},{cpStateChanged:t,cpActive:!1}}const l=Ke(a),u=t.Ad(i),c=t.fd(i),d=u?u[l]:void 0,f=c?c[l]:void 0;if(n<2||void 0===d||void 0===f||f===d){const t=this.eN.PG;return this.eN={PG:!1,BG:null!=n?n:0},{cpStateChanged:t,cpActive:!1}}const A=this.calculateAvgStepBetweenDataPoints(f,d,n),g=this.rN.scale,v=Math.abs(g.ri()[l]),y=v/A,p=Math.floor(.8*y),m=p*A,S=p>=4,b=this.eN.PG?this.eN.EG/v<1.5:void 0,x=this.eN.PG&&p>this.eN.OG?p/this.eN.OG>=2:void 0;let M;return!0===this.eN.PG?b?x&&(M={PG:!0,EG:m,OG:p,BG:n}):M=S?{PG:!0,EG:m,OG:p,BG:n}:{PG:!1,BG:n}:S&&(M={PG:!0,EG:m,OG:p,BG:n}),this.eN=M||{...this.eN,BG:n},!!M&&this.lN(),{cpStateChanged:!!M,cpActive:this.eN.PG}}zG(t,i){var s,e,h;const r=null==t?void 0:t.Qc(i),n=r.dataPattern,o=r.td,a=r.sd,l=t.Pc,u=t.Lc,c=t.Ic,d=t.zc;if(this.sN||!this.eN.PG||!o||!a||void 0===n)return;const f=Ke(n),A=qe(n),g="x"===f?o:a,v="x"===f?a:o,y=g.length,p="x"===f?this.oi.x:this.oi.y,m=this.eN.EG,S=Math.min(p.getInnerStart(),p.getInnerEnd()),b=Math.max(p.getInnerStart(),p.getInnerEnd()),x=oo(S,b,g,l,u,c,qe(n)?"progressive":"regressive",1);if(!x)return;const M=g[x.iFirstSampleDataArray];if(this.VG){if(this.VG.NG<x.iFirstSample){const t=Math.min(Math.floor((M-this.VG.kl)/m),this.VG.GG);if(t>0)if(this.VG.GG-=t,this.VG.GG>0){this.VG.$G.splice(0,2*t),this.VG.UG.splice(0,2*t),this.VG.YG&&this.VG.YG.splice(0,2*t),this.VG.jG&&this.VG.jG.splice(0,2*t),this.VG.kl+=t*m;const i=ao(this.VG.kl,Math.max(l-1-y+1,0),l-1,A,(t=>g[no(t,l,y)])),s=no(i,l,y);this.VG.NG=g[s]>=this.VG.kl?i:i+1}else this.VG=void 0}if(void 0!==(null===(s=this.VG)||void 0===s?void 0:s.HG)&&this.VG.HG>x.iLastSample){const t=g[x.iLastSampleDataArray],i=Math.min(Math.floor((this.VG.kl+this.VG.GG*m-t)/m),this.VG.GG);if(i>0)if(this.VG.GG-=i,this.VG.GG>0){for(let t=0;t<2*i;t+=1)this.VG.$G.pop(),this.VG.UG.pop(),this.VG.YG&&this.VG.YG.pop(),this.VG.jG&&this.VG.jG.pop();const t=ao(this.VG.kl+this.VG.GG*m,Math.max(l-1-y+1,0),l-1,A,(t=>g[no(t,l,y)])),s=no(t,l,y);this.VG.HG=g[s]<=this.VG.kl+this.VG.GG*m?t:t-1}else this.VG=void 0}}const w=this.VG||{kl:M,GG:0,$G:[],UG:[],YG:r.ed?[]:void 0,jG:r.nd?[]:void 0,WG:r.rd?[]:void 0,XG:r.hd?[]:void 0,NG:x.iFirstSample,HG:void 0},_=(t,i,s,e)=>{let h=Math.min(t,t+s*m),r=Math.max(t,t+s*m);const n=[];if(s<0&&h<S||s>0&&r>b)return n;let o=e,a=ms,u=ms,c=-1,f=ps,A=ps,p=-1,M=0;for(;o<=x.iLastSample&&o>=x.iFirstSample;){const e=o%y,x=g[e],_=v[e];if(d&&Number.isNaN(x))o+=i;else if(h<=x&&x<=r)M+=1,d&&Number.isNaN(_)||(_>u&&(a=x,u=_,c=o),_<A&&(f=x,A=_,p=o)),o+=i;else{if(M>0)a=a===ms?Number.NaN:a,u=u===ms?Number.NaN:u,f=f===ps?Number.NaN:f,A=A===ps?Number.NaN:A,c<p?(n.push({iFirst:c,iSecond:p}),i>0?(w.$G.push(a),w.UG.push(u),w.$G.push(f),w.UG.push(A)):(w.$G.unshift(f),w.UG.unshift(A),w.$G.unshift(a),w.UG.unshift(u))):(n.push({iFirst:p,iSecond:c}),i>0?(w.$G.push(f),w.UG.push(A),w.$G.push(a),w.UG.push(u)):(w.$G.unshift(a),w.UG.unshift(u),w.$G.unshift(f),w.UG.unshift(A)));else{const t=i>0?w.HG:w.NG;if(void 0===t)n.push({iFirst:0,iSecond:0}),i>0?(w.$G.push(Number.NaN),w.UG.push(Number.NaN),w.$G.push(Number.NaN),w.UG.push(Number.NaN)):(w.$G.unshift(Number.NaN),w.UG.unshift(Number.NaN),w.$G.unshift(Number.NaN),w.UG.unshift(Number.NaN));else{const s=no(t,l,y),e=g[s],o=v[s],a=oi((e+x)/2,h,r),u=oi((a+x)/2,h,r),c=o+(a-e)/(x-e)*(_-o),d=o+(u-e)/(x-e)*(_-o);n.push({iFirst:t,iSecond:t}),i>0?(w.$G.push(a),w.UG.push(c),w.$G.push(u),w.UG.push(d)):(w.$G.unshift(u),w.UG.unshift(d),w.$G.unshift(a),w.UG.unshift(c))}}if(w.GG+=1,i>0?w.HG=o-1:(w.NG=o+1,w.kl=s>0?r:h),h=Math.min(t+n.length*s*m,t+(n.length+1)*s*m),r=Math.max(t+n.length*s*m,t+(n.length+1)*s*m),M=0,a=ms,u=ms,c=-1,f=ps,A=ps,p=-1,s<0&&h<S||s>0&&r>b)break}}return n},k=_(w.kl+(qe(n)?1:-1)*w.GG*m,1,1*(qe(n)?1:-1),void 0!==(null===(e=this.VG)||void 0===e?void 0:e.HG)?this.VG.HG+1:x.iFirstSample),C=_(w.kl,-1,-1*(qe(n)?1:-1),void 0!==(null===(h=this.VG)||void 0===h?void 0:h.NG)?this.VG.NG-1:x.iFirstSample);if(0===C.length&&0===k.length)return;const T=r.ed&&w.YG?[r.ed,w.YG]:void 0,F=r.nd&&w.jG?[r.nd,w.jG]:void 0,I=r.rd&&w.WG?[r.rd,w.WG]:void 0,L=r.hd&&w.XG?[r.hd,w.XG]:void 0;if(T||F||I||L){for(const t of k){const i=no(t.iFirst,l,y),s=no(t.iSecond,l,y);T&&T[1].push(T[0][i],T[0][s]),F&&F[1].push(F[0][i],F[0][s]),I&&I[1].push(I[0][i],I[0][s]),L&&L[1].push(L[0][i],L[0][s])}for(const t of C){const i=no(t.iFirst,l,y),s=no(t.iSecond,l,y);T&&T[1].unshift(T[0][s],T[0][i]),F&&F[1].unshift(F[0][s],F[0][i]),I&&I[1].unshift(I[0][s],I[0][i]),L&&L[1].unshift(L[0][s],L[0][i])}}return this.VG=w.GG>0?w:void 0,{ZG:"x"===f?w.$G:w.UG,JG:"y"===f?w.$G:w.UG,tP:w.YG,QG:w.jG,U:w.WG,wl:w.XG}}lN(){this.VG=void 0}AN(){}}class Iy extends Ty{constructor(t,i,s,e){super(t,i,s,e),this.bD=new Uv,this.LN=new Fy(this.oi,this),this.Tz=Vh({lineStyleSolid:()=>_h(this.hc)&&this.hc,lineStyleDashed:()=>Fh(this.hc)&&this.hc,strokeFillSolid:()=>{const t=this.hc.getFillStyle();return Ce(t)&&t},strokeFillLinearGradient:()=>{const t=this.hc.getFillStyle();return $(t)&&t},strokeFillRadialGradient:()=>{const t=this.hc.getFillStyle();return V(t)&&t},strokeFillIndividual:()=>{const t=this.hc.getFillStyle();return Fe(t)&&t},strokeFillPaletted:()=>{const t=this.hc.getFillStyle();return Pe(t)&&t},areaFillSolid:()=>Ce(this.yG)&&this.yG,areaFillLinearGradient:()=>$(this.yG)&&this.yG,areaFillRadialGradient:()=>V(this.yG)&&this.yG,areaFillIndividual:()=>Fe(this.yG)&&this.yG,areaFillPaletted:()=>Pe(this.yG)&&this.yG,markerFillSolid:()=>Ce(this.mG)&&this.mG,markerFillLinearGradient:()=>$(this.mG)&&this.mG,markerFillRadialGradient:()=>V(this.mG)&&this.mG,markerFillPaletted:()=>Pe(this.mG)&&this.mG,markerFillIndividual:()=>Fe(this.mG)&&this.mG,markerFillImage:()=>Nt(this.mG)&&this.mG,markerShapeIcon:()=>{const t=this.bG.C();return Ph(t)&&t},markerStrokeFillSolid:()=>{const t=this.SG.getFillStyle();return Ce(t)&&t}}),this.Bd=d(void 0),this.KG=[],this.pu=!1,this.qG=[],this.t$=void 0,this.rG=(t,i,s)=>{var e;const h=null===(e=this.i$)||void 0===e?void 0:e.shapeIcon;let r=t,n=i;return h&&(r=h._t().x,n=h._t().y),Rv(t,i,r*this.xG.C(),n*this.xG.C(),s)},this.s$=Ly(),this.bz=i,this.BV={type:"none"},this.XB=t.xz(),this.Sz=t,this.LV=this.XB.pO}Dd(t,i){var s;return this.LN.lN(),this.e$=void 0,this.t$=void 0,t&&i?(this.Bd._(us(t,this.Bd.C(),(()=>({change:t=>{this.KG.push({min:t.iDataStart,max:t.iDataEnd}),this.e$&&this.qG.length>1e3&&Date.now()-this.e$.h$>5e3&&(this.e$=void 0,this.qG.length=0),this.e$&&this.qG.push({min:t.iDataStart,max:t.iDataEnd})},clear:()=>{this.pu=!0,this.e$=void 0,this.t$=void 0,this.LN.lN()},loop:()=>{this.e$=void 0,this.qG.length=0}})))),this.Ew=i,this):(null===(s=this.Bd.C())||void 0===s||s.Ki(),this.Bd._(void 0),this.Ew=void 0,this)}hl(){var t;const i=null===(t=this.Bd.C())||void 0===t?void 0:t.qi,s=null==i?void 0:i.Jc(this.Ew);return s&&{Yw:Ke(s),jw:()=>this.Jv()}}Jv(){var t,i,s,e,h,n,o,a,l,u,c,d,f,A,g,v,y,p,m,S,b,x,M,w,_,k,C,T,F,I,L,P,B;const D=null===(t=this.Bd.C())||void 0===t?void 0:t.qi,E=this.Bd.o,R=this.Ew,O=null==D?void 0:D.Qc(R),z=null==O?void 0:O.td,V=null==O?void 0:O.sd;if(!(D&&z&&V&&R))return;const N=O.dataPattern,G=N&&this.oi[Ke(N)],$=O.nd,U=O.ed,Y=O.rd,j=O.hd,H=D.Pc,W=D.Lc,X=D.Ic,Z=E||this.fl()||this.kG()||this.TG()||this.IG()||this.pG.o,J=this.Tz.lineStyleSolid(Z),Q=this.Tz.lineStyleDashed(Z),K=J||Q,q=K&&K.getThickness(),tt=this.Tz.strokeFillSolid(Z),it=this.Tz.strokeFillLinearGradient(Z),st=this.Tz.strokeFillRadialGradient(Z),et=this.Tz.strokeFillIndividual(Z),ht=this.Tz.strokeFillPaletted(Z),rt=tt||it||st||et||ht,nt=this.Tz.areaFillSolid(Z),ot=this.Tz.areaFillLinearGradient(Z),at=this.Tz.areaFillRadialGradient(Z),lt=this.Tz.areaFillIndividual(Z),ut=this.Tz.areaFillPaletted(Z),ct=nt||ot||at||lt||ut,dt=this.Tz.markerFillSolid(Z),ft=this.Tz.markerFillLinearGradient(Z),At=this.Tz.markerFillRadialGradient(Z),gt=this.Tz.markerFillPaletted(Z),vt=this.Tz.markerFillIndividual(Z),yt=this.Tz.markerFillImage(Z),pt=dt||ft||At||gt||vt||yt,mt=this.Tz.markerStrokeFillSolid(Z),St=this.bG.C(),bt=this.bG.o,xt=this.Tz.markerShapeIcon(bt),Mt=this.xG.C(),wt=this.xG.o,_t=this.wG.o,kt=this.KG.length>0||_t,Ct=this.pu||E,Tt=Ct?[D.ud()]:(t=>{const i=[];for(const s of t){let t=!1;for(const e of i)if(s.min>=e.min&&s.min<=e.max||s.max>=e.min&&s.max<=e.max){e.min=Math.min(e.min,s.min),e.max=Math.min(e.max,s.max),t=!0;break}t||i.push(s)}return i})(this.KG),Ft=!!Q,It=this.li.C(),Lt=this.li.o;E&&Object.entries(R).forEach((([t,i])=>{if(D.$c&&!D.$c[i])throw new Error(`LightningChart JS data supply error - key ${i} does not exist in data set. Mapped to '${t}'`)})),(E||Z)&&((ht&&"value"===ht.lookUpProperty||ut&&"value"===ut.lookUpProperty||gt&&"value"===gt.lookUpProperty)&&void 0===R.lookupValue&&ti.console.warn('LightningChart JS warning - using PalettedFill with lookUpProperty=value, but there is no data mapping for "lookupValue"'),(et||lt||vt)&&void 0===R.color&&ti.console.warn('LightningChart JS warning - using IndividualPointFill, but there is no data mapping for "color"'));const Pt=this.Bw&&(!!K||!!ct),{cpStateChanged:Bt,cpActive:Dt}=this.LN.DG(D,R,Pt);if(N&&Dt&&G&&(Bt||Ct||kt||G.et||Z)){const t=this.LN.zG(D,R);if(t){const r=!(Bt||Ct||Z||E);this.r$=Py(this.XB,[t.ZG,t.JG],t.tP,t.QG,t.U,t.wl,Ft,this.r$,r,N,1e3,this.oi.Ot(),(t=>Ci(t,this.oi.Ot())),D.zc),this.n$={min:ps,max:ms};const u="x"===Ke(N)?t.JG:t.ZG,c=u.length;for(let t=0;t<c;t+=1){const i=u[t];D.zc&&Number.isNaN(i)||(this.n$.min=Math.min(this.n$.min,i),this.n$.max=Math.max(this.n$.max,i))}(null===(i=this.o$)||void 0===i?void 0:i.bufferX)!==this.r$.bufferX&&(this.XB.PR(null===(s=this.o$)||void 0===s?void 0:s.bufferX),this.XB.PR(null===(e=this.o$)||void 0===e?void 0:e.bufferY),this.XB.PR(null===(h=this.o$)||void 0===h?void 0:h.bufferColors),this.XB.PR(null===(n=this.o$)||void 0===n?void 0:n.bufferLengthSoFar),this.XB.PR(null===(o=this.o$)||void 0===o?void 0:o.bufferRotations),this.XB.PR(null===(a=this.o$)||void 0===a?void 0:a.bufferLookupValues),this.XB.PR(null===(l=this.o$)||void 0===l?void 0:l.bufferSizes)),this.o$=void 0}}if(N&&G&&!Dt){if(Bt||Ct||kt||G.et||_t||Z){const t=Math.min(G.getInnerStart(),G.getInnerEnd()),i=Math.max(G.getInnerStart(),G.getInnerEnd()),s="x"===Ke(N)?z:V,e="x"===Ke(N)?V:z,h=oo(t,i,s,H,W,X,qe(N)?"progressive":"regressive",1);if(!this.a$||(null==h?void 0:h.iFirstSample)!==this.a$.iFirstSample||h.iLastSample!==this.a$.iLastSample||Ct){const t=this.s$(O,this.a$,h,Ct||Bt,s,e,D.zc);this.n$=t.visibleBoundaries,this.l$=t.avgPointGap}if(this.a$=h,void 0===h)this.XB.PR(null===(u=this.r$)||void 0===u?void 0:u.bufferX),this.XB.PR(null===(c=this.r$)||void 0===c?void 0:c.bufferY),this.XB.PR(null===(d=this.r$)||void 0===d?void 0:d.bufferColors),this.XB.PR(null===(f=this.r$)||void 0===f?void 0:f.bufferLengthSoFar),this.XB.PR(null===(A=this.r$)||void 0===A?void 0:A.bufferRotations),this.XB.PR(null===(g=this.r$)||void 0===g?void 0:g.bufferLookupValues),this.XB.PR(null===(v=this.r$)||void 0===v?void 0:v.bufferSizes),this.r$=void 0,this.XB.PR(null===(y=this.o$)||void 0===y?void 0:y.bufferX),this.XB.PR(null===(p=this.o$)||void 0===p?void 0:p.bufferY),this.XB.PR(null===(m=this.o$)||void 0===m?void 0:m.bufferColors),this.XB.PR(null===(S=this.o$)||void 0===S?void 0:S.bufferLengthSoFar),this.XB.PR(null===(b=this.o$)||void 0===b?void 0:b.bufferRotations),this.XB.PR(null===(x=this.o$)||void 0===x?void 0:x.bufferLookupValues),this.XB.PR(null===(M=this.o$)||void 0===M?void 0:M.bufferSizes),this.o$=void 0,this.u$=h;else if(Bt||Ct||!this.u$||h.iFirstSample<this.u$.iFirstSample||h.iLastSample>this.u$.iLastSample||Z){const t=eo({srcLoopArray:z,dataRanges:h.dataRanges,NewArray:O.Kc}),i=eo({srcLoopArray:V,dataRanges:h.dataRanges,NewArray:O.qc}),s=U?eo({srcLoopArray:U,dataRanges:h.dataRanges,NewArray:Uint32Array}):void 0,e=$?eo({srcLoopArray:$,dataRanges:h.dataRanges,NewArray:Float32Array}):void 0,n=Y?eo({srcLoopArray:Y,dataRanges:h.dataRanges,NewArray:Float32Array}):void 0,o=j?eo({srcLoopArray:j,dataRanges:h.dataRanges,NewArray:Float32Array}):void 0,a=!(Bt||Ct||Z||E),l=Pt||this.Mi("ApplicationType",(t=>"InternalUI"===t.type))?1e3:Math.min(null!==(w=D.getMaxSampleCount())&&void 0!==w?w:1e6,1e6);this.o$=Py(this.XB,[t,i],s,e,n,o,Ft,this.o$,a,N,l,this.oi.Ot(),(t=>Ci(t,this.oi.Ot())),D.zc);let u=t,c=i,d=s,f=e;const A=this.wG.C();if(A){const h="spline"===A.type?((t,i,s)=>{const e=Ke(s),h="x"===e?t.xValues:t.yValues,n="x"===e?t.yValues:t.xValues,{lookupValues:o,colors:a}=t;if(h.length<=2)return{xValues:Array.from(t.xValues),yValues:Array.from(t.yValues),lookupValues:o?Array.from(o):void 0,colors:a?Array.from(a):void 0};const l=((t,i)=>{const s=1e-5,e=t.length-1,h=Array(e);if(e>1){let n=r(0,0),o=r(0,0),a=r(0,0),l=Us(Xs({x:t.elementAt(1),y:i.elementAt(1)},{x:t.elementAt(0),y:i.elementAt(0)}));const u=3;let c=0,d=0;for(let f=0;f<e;f+=1){const A=t.elementAt(f),g=t.elementAt(f+1),v=i.elementAt(f),y=i.elementAt(f+1),p=Array(4);p[0]={x:A,y:v},p[1]={x:A,y:v},p[3]={x:g,y:y},p[2]={x:g,y:y},a=l,n=o,Number.isNaN(n.y)&&(n=r(0,0));const m=f+2<i.length?i.elementAt(f+2):Number.NaN;if(f+1<e&&!Number.isNaN(m)){const i=t.elementAt(f+2);l=i===g&&m===y?r(0,0):Us(Xs({x:i,y:m},{x:g,y:y})),o=Us(Ws(a,l))}else o=r(0,0);if(y===v)c=0,d=0;else{const t=g-A;c=Math.abs(n.x)>s?Math.abs(t/(u*n.x)):1,d=Math.abs(o.x)>s?Math.abs(t/(u*o.x)):1}p[1]=Ws(Hs(n,c),p[1]),p[2]=Xs(p[2],Hs(o,d)),h[f]=p}}return h.length>0?h:[]})(h,n),u=l.length,c=[],d=[],f=[],A=[];for(let t=0;t<u;t+=1){const s=l[t];for(let t=0;t<i;t+=1){const e=t/(i-1),h=e*e,r=h*e,n=1-e,o=n*n,a=o*n;c.push(a*s[0].x+3*e*o*s[1].x+3*h*n*s[2].x+r*s[3].x),d.push(a*s[0].y+3*e*o*s[1].y+3*h*n*s[2].y+r*s[3].y)}}if(o)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=o.elementAt(s);A[t]=e}if(a)for(let t=0;t<c.length;t+=1){const s=Math.round(t/i),e=a.elementAt(s);f[t]=e}return{xValues:"x"===e?c:d,yValues:"x"===e?d:c,lookupValues:o?A:void 0,colors:a?f:void 0}})({xValues:t,yValues:i,lookupValues:e,colors:s},A.resolution||20,N):"step"===A.type?((t,i,s)=>{const{lookupValues:e,colors:h}=t,r=Ke(s),n="x"===r?t.xValues:t.yValues,o="x"===r?t.yValues:t.xValues,a=[],l=[],u=[],c=[],d=n.length,f="before"===i?0:"after"===i?1:.5;if(d>0){let t=0,i=n.elementAt(0),s=o.elementAt(0);a[t]=i,l[t]=s,t+=1;for(let e=1;e<d;e+=1){const h=n.elementAt(e),r=o.elementAt(e);if(f<=0)a[t]=i,l[t]=r,t+=1;else{const e=i*(1-f)+h*f;a[t]=e,l[t]=s,t+=1,a[t]=e,l[t]=r,t+=1}a[t]=h,l[t]=r,t+=1,i=h,s=r}}if(e)if("before"===i){c[0]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[2*t-1]=i,c[2*t]=i}}else if("middle"===i||"after"===i){c[0]=e.elementAt(0),c[1]=e.elementAt(0);for(let t=1;t<d;t+=1){const i=e.elementAt(t);c[3*t-1]=i,c[3*t]=i,c[3*t+1]=i}}if(h)if("before"===i){u[0]=h.elementAt(0);for(let t=1;t<d;t+=1){const i=h.elementAt(t);u[2*t-1]=i,u[2*t]=i}}else if("middle"===i||"after"===i){u[0]=h.elementAt(0),u[1]=h.elementAt(0);for(let t=1;t<d;t+=1){const i=h.elementAt(t);u[3*t-1]=i,u[3*t]=i,u[3*t+1]=i}}return{xValues:"x"===r?a:l,yValues:"x"===r?l:a,lookupValues:e?c:void 0,colors:h?u:void 0}})({xValues:t,yValues:i,lookupValues:e,colors:s},null!==(_=A.step)&&void 0!==_?_:"middle",N):void 0;u=h?h.xValues:u,c=h?h.yValues:c,d=(null==h?void 0:h.colors)?h.colors:d,f=(null==h?void 0:h.lookupValues)?h.lookupValues:f}this.r$=u===t&&c===i?this.o$:Py(this.XB,[u,c],d,f,void 0,void 0,Ft,(null===(k=this.r$)||void 0===k?void 0:k.bufferX)===this.o$.bufferX?void 0:this.r$,!(!a||_t||A),N,1e3,this.oi.Ot(),(t=>Ci(t,this.oi.Ot())),D.zc),this.u$=h}}}else this.a$=void 0;if(!N&&(Ct||kt||Z)){if(!this.r$||this.r$.bufferSize<D.Lc||Ft){const t=void 0!==D.Hc?D.Hc:D.Lc;let i,s=0,e=0;if(Ft){const h=By(z,V,z[0],V[0],0,0,D.zc);i=this.XB.QR(2*t,h[0],null===(C=this.r$)||void 0===C?void 0:C.bufferLengthSoFar,Float32Array),s=h[1],e=h[2]}this.r$={bufferX:this.XB.QR(t*(this.oi.Ot()?2:1),Ci(z,this.oi.Ot()),null===(T=this.r$)||void 0===T?void 0:T.bufferX),bufferY:this.XB.QR(t*(this.oi.Ot()?2:1),Ci(V,this.oi.Ot()),null===(F=this.r$)||void 0===F?void 0:F.bufferY),bufferColors:U?this.XB.QR(t,U,null===(I=this.r$)||void 0===I?void 0:I.bufferColors,Uint32Array):void 0,bufferLookupValues:$?this.XB.QR(t,$,null===(L=this.r$)||void 0===L?void 0:L.bufferLookupValues,Float32Array):void 0,bufferSizes:Y?this.XB.QR(t,Y,null===(P=this.r$)||void 0===P?void 0:P.bufferSizes,Float32Array):void 0,bufferRotations:j?this.XB.QR(t,j,null===(B=this.r$)||void 0===B?void 0:B.bufferRotations,Float32Array):void 0,bufferLengthSoFar:i,lengthSoFarX:s,lengthSoFarY:e,bufferSize:t,valueCount:D.Lc}}else{const t=this.r$.bufferX,i=this.r$.bufferY;Tt.forEach((s=>{var e,h,r,n;const o=z.subarray(s.min,s.max+1),a=V.subarray(s.min,s.max+1);if(this.XB.KR(t,s.min*(this.oi.Ot()?2:1),Ci(o,this.oi.Ot())),this.XB.KR(i,s.min*(this.oi.Ot()?2:1),Ci(a,this.oi.Ot())),U&&(null===(e=this.r$)||void 0===e?void 0:e.bufferColors)){const t=U.subarray(s.min,s.max+1);this.XB.KR(this.r$.bufferColors,s.min,t,Uint32Array)}if($&&(null===(h=this.r$)||void 0===h?void 0:h.bufferLookupValues)){const t=$.subarray(s.min,s.max+1);this.XB.KR(this.r$.bufferLookupValues,s.min,t,Float32Array)}if(j&&(null===(r=this.r$)||void 0===r?void 0:r.bufferRotations)){const t=j.subarray(s.min,s.max+1);this.XB.KR(this.r$.bufferRotations,s.min,t,Float32Array)}if(Y&&(null===(n=this.r$)||void 0===n?void 0:n.bufferSizes)){const t=Y.subarray(s.min,s.max+1);this.XB.KR(this.r$.bufferSizes,s.min,t,Float32Array)}})),this.r$.valueCount=D.Lc}this.o$=this.r$}if(Z||wt||bt||Lt){if(rt&&K&&!1!==q){const t=-1===q?"primitive":"triangulated",i=ht?["lookup",ht.lookUpProperty,ht.lut]:et?"attribute":it?["gradient",it]:st?["gradient",st]:"uniform";this.BV="primitive"===t?{type:t,shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0}),Q&&Qg.StippleTexture),lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:ht,mousePickingShader:It&&this.XB.SE(Qg["2D"],Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0}),Q&&Qg.StippleTexture,Qg.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:i}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0}),this.LV?Qg.AliasedEdge:void 0,Q&&Qg.StippleTextureInstanced),geometry:ny(this.XB,q),thickness:q,lineStyleSolid:J,lineStyleDashed:Q,fillStyleSolid:tt,fillStyleLinearGradient:it,fillStyleRadialGradient:st,fillStyleIndividual:et,fillStylePaletted:ht,mousePickingShader:It&&this.XB.SE(Qg["2D"],Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0}),Q&&Qg.StippleTextureInstanced,Qg.MousePicking())}:{type:"none"}}else this.BV={type:"none"};if(this.c$=ct?{shader:this.XB.SE(Qg["2D"],ut&&Qg.Color({dataType:["lookup",ut.lookUpProperty,ut.lut]}),lt&&Qg.Color({dataType:"attribute"}),nt&&Qg.Color({dataType:"uniform"}),ot&&Qg.Color({dataType:["gradient",ot]}),at&&Qg.Color({dataType:["gradient",at]}),Qg.Area2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0,fill:this.pG.C()})),geometry:My(this.XB),fillStyleSolid:nt,fillStyleLinearGradient:ot,fillStyleRadialGradient:at,fillStyleIndividual:lt,fillStylePaletted:ut,mousePickingShader:It&&this.XB.SE(Qg["2D"],Qg.Area2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0,fill:this.pG.C()}),Qg.MousePicking())}:void 0,pt){const t=!(!yt&&!xt),i=Mt>1||t,s=Y?"attribute":"uniform",e=!i&&Qg.PointSize("uniform"),h=Qg.VertexLocation({offsets:[i&&!t?{directionVar:wy.AG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:wy.AG,dataType:s,sizeUnit:"scale",rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:void 0],axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0});this.i$={shader:this.XB.SE(Qg["2D"],e,h,dt&&Qg.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!xt}),ft&&Qg.Color({dataType:["gradient",ft],overrideOpacity:!0,maskTexture:!!xt}),At&&Qg.Color({dataType:["gradient",At],overrideOpacity:!0,maskTexture:!!xt}),gt&&Qg.Color({dataType:["lookup",gt.getLookUpProperty(),gt.getPalette()],overrideOpacity:!0,maskTexture:!!xt}),vt&&Qg.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!xt}),yt&&Qg.Color({dataType:["image",yt],overrideOpacity:!0,maskTexture:!!xt})),geometry:Cy(St,this.XB,"uniform"===s?Mt:25),fillStyleSolid:dt,fillStyleLinearGradient:ft,fillStyleRadialGradient:At,fillStylePaletted:gt,fillStyleIndividual:vt,fillStyleImage:yt,mousePickingShader:It&&this.XB.SE(Qg["2D"],e,h,Qg.MousePicking({useVertexId:!i})),shapeIcon:xt,pointSizeAsScale:t,instancedRendering:i,borders:mt&&!t&&{shader:this.XB.SE(Qg["2D"],e,Qg.VertexLocation({offsets:[i&&!t?{directionVar:wy.AG,dataType:s,sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:i&&t?{directionVar:wy.AG,dataType:s,sizeUnit:"scale",rotation:{dataType:j?"attribute-deg":"uniform"},useAlignment:!0}:void 0,{directionVar:wy.vG,dataType:"uniform",sizeUnit:"px",symmetric:!0,rotation:{dataType:j?"attribute-deg":"uniform"}}],axisWorldTranslation:Oh(this.oi),normalSource:void 0,splitPosAttribute:!0}),Qg.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!xt})),fillStyleSolid:mt}}}else this.i$=void 0}if((void 0===this.t$||kt)&&$&&(Gh(ht)||Gh(ut)||Gh(gt))){const t=this.t$?Tt:[D.ud()];let i=this.t$?this.t$.max:ms,s=this.t$?this.t$.min:ps;const e=$;t.forEach((t=>{for(let h=t.min;h<=t.max;h+=1){const t=e[h];s=t<s?t:s,i=t>i?t:i}})),this.t$={min:s,max:i}}this.hG=this.XB.JO(this,this.hG,yt,xt,wt,this.rG),this.EV=Q?this.XB.jO(Q.getPattern()):void 0,this.ac(this.hc),this.CG=this.yG,this.FG=this.mG,this.LG=this.SG,this.bG.o=!1,this.xG.o=!1,this.KG.length=0,this.pu=!1,this.wG.o=!1,this.Bd.o=!1,this.li.o=!1,this.pG.o=!1}Vr(){this.Jv();const t=this.Tz.strokeFillLinearGradient(!1),i=this.Tz.strokeFillRadialGradient(!1),s=this.Tz.areaFillLinearGradient(!1),e=this.Tz.areaFillRadialGradient(!1),h=this.Tz.markerFillLinearGradient(!1),r=this.Tz.markerFillRadialGradient(!1);if(this.bD.TR(this.oi),s||e){let t;const i=this.pG.C();t=In("bottom"===i||"top"===i?{min:{x:this.ji(!1),y:Math.min(this.oi.y.getInnerStart(),this.oi.y.getInnerEnd(),this.Wi(!1),this.Xi(!1))},max:{x:this.Hi(!1),y:Math.max(this.oi.y.getInnerStart(),this.oi.y.getInnerEnd(),this.Wi(!1),this.Xi(!1))}}:{min:{x:Math.min(this.oi.x.getInnerStart(),this.oi.x.getInnerEnd(),this.ji(!1),this.Hi(!1)),y:this.Wi(!1)},max:{x:Math.max(this.oi.x.getInnerStart(),this.oi.x.getInnerEnd(),this.ji(!1),this.Hi(!1)),y:this.Xi(!1)}},{x:this.lu()/2,y:this.uu()/2},this.oi),this.d$=this.XB.iz(s,this,t),this.f$=this.XB.sz(e,this,t)}if(t||i||h||r){const s=In({min:{x:this.ji(!1),y:this.Wi(!1)},max:{x:this.Hi(!1),y:this.Xi(!1)}},{x:this.lu()/2,y:this.uu()/2},this.oi);this.A$=this.XB.iz(t,this,s),this.g$=this.XB.sz(i,this,s),this.v$=this.XB.iz(h,this,s),this.y$=this.XB.sz(r,this,s)}return this}Mc(t,i){var s,e,h,r,n,o,a,l,u,c,d,f,A,g,v,y,p,m,S;const b=this.XB.gl,x=null===(s=this.r$)||void 0===s?void 0:s.bufferX,M=null===(e=this.r$)||void 0===e?void 0:e.bufferY,w=null===(h=this.r$)||void 0===h?void 0:h.bufferColors,_=null===(r=this.r$)||void 0===r?void 0:r.bufferLookupValues,k=null===(n=this.r$)||void 0===n?void 0:n.valueCount,C=null===(o=this.o$)||void 0===o?void 0:o.valueCount,T=null===(a=this.Bd.C())||void 0===a?void 0:a.qi,F=null==T?void 0:T.Jc(this.Ew),I=Math.max((null===(l=this.r$)||void 0===l?void 0:l.valueCount)||0,(null===(u=this.o$)||void 0===u?void 0:u.valueCount)||0);if(!x||!M||!T)return{};const L=(i,s,e)=>{if(ly(this.XB,i,this.oi.Ot(),x,"aLocation","X",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),ly(this.XB,i,this.oi.Ot(),M,"aLocation","Y",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),s&&1!==t){if(!w)return!1;ly(this.XB,i,!1,w,"aColor","",4,!0,b.UNSIGNED_BYTE,1,void 0)}if(e&&"value"===e.lookUpProperty&&1!==t){if(!_)return!1;ly(this.XB,i,!1,_,"aLookupValue","",1,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}return!0},P=1===t?null===(c=this.c$)||void 0===c?void 0:c.mousePickingShader:null===(d=this.c$)||void 0===d?void 0:d.shader;if(this.c$&&P&&void 0!==k&&k>0&&F&&2!==t){const s=this.c$;this.XB.Qc(P).SR(P,((e,h,r,n)=>!!this.XB.KO(r,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:1===t?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStylePaletted:s.fillStylePaletted,linearGradientInfo:this.d$,radialGradientInfo:this.f$,lookupValueRange:s.fillStylePaletted?Nh(s.fillStylePaletted,this,this.t$):void 0,lookupValueBuffer:null})&&!!L(r,s.fillStyleIndividual,s.fillStylePaletted)&&(null==s||s.geometry.Qc(r).Vk(k-1),!0)))}const B="none"===this.BV.type?void 0:1===t?this.BV.mousePickingShader:this.BV.shader;if("none"!==this.BV.type&&B&&void 0!==k&&k>0){const s=this.BV;this.XB.Qc(B).SR(B,((e,h,r,n)=>{var o,a;if(!this.r$)return!1;if(!this.XB.KO(r,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:1===t&&"triangulated"===s.type?I:void 0,useVertexID:1===t&&"primitive"===s.type?I:void 0,fillStyleSolid:s.fillStyleSolid,fillStylePaletted:s.fillStylePaletted,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,fillStyleIndividual:s.fillStyleIndividual,linearGradientInfo:this.A$,radialGradientInfo:this.g$,lookupValueRange:s.fillStylePaletted?Nh(s.fillStylePaletted,this,this.t$):void 0,lookupValueBuffer:"primitive"===s.type?_:null,colorBuffer:"primitive"===s.type?w:null,coordsX:"primitive"===s.type?x:void 0,coordsY:"primitive"===s.type?M:void 0,coordsHighPrecision:this.oi.Ot()}))return!1;if(s.lineStyleDashed){if(!this.EV)return!1;this.XB.xR(e("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(n("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(e("uStippleScale"),s.lineStyleDashed.getPatternScale()).MR(e("uStippleTexture"),this.EV.HO,1)}if("primitive"===s.type){if(s.lineStyleDashed){if(!(null===(o=this.r$)||void 0===o?void 0:o.bufferLengthSoFar))return!1;this.XB.LR(h("aLengthSoFar"),this.r$.bufferLengthSoFar)}ay.FV(this.Sz,k)}else{if(!L(r,s.fillStyleIndividual,s.fillStylePaletted))return!1;if(s.lineStyleDashed){if(!(null===(a=this.r$)||void 0===a?void 0:a.bufferLengthSoFar))return!1;ly(this.XB,r,!1,this.r$.bufferLengthSoFar,"aLengthSoFar","",2,!1,b.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}oy.Mc(this.Sz,s.geometry,r,this.LV&&1!==t,1===t,s.thickness,this.r$.valueCount-1)}return!0}))}const D=null===(f=this.o$)||void 0===f?void 0:f.bufferX,E=null===(A=this.o$)||void 0===A?void 0:A.bufferY,R=null===(g=this.o$)||void 0===g?void 0:g.bufferColors,O=null===(v=this.o$)||void 0===v?void 0:v.bufferLookupValues,z=null===(y=this.o$)||void 0===y?void 0:y.bufferSizes,V=null===(p=this.o$)||void 0===p?void 0:p.bufferRotations,N=1===t?null===(m=this.i$)||void 0===m?void 0:m.mousePickingShader:null===(S=this.i$)||void 0===S?void 0:S.shader,G=this.i$;let $=1;if(F&&(P||B)&&void 0!==this.l$&&!Number.isNaN(this.l$)){const t="x"===Ke(F)?this.oi.x:this.oi.y,i=this.l$,s=t.getInnerInterval()/i,e=this.xG.C(),h=t.Mt()/e/1,r=2*h;$=s<=h?1:Math.max(1-(s-h)/(r-h),0)}if(N&&G&&D&&E&&$>0&&void 0!==C&&C>0){const s=G,e=s.instancedRendering?1:0;if(G.borders&&0===t){const h=G.borders;this.XB.Qc(h.shader).SR(h.shader,((r,n,o,a)=>{if(!this.XB.KO(o,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:h.fillStyleSolid}))return!1;if(this.oi.Ot()?this.XB.bR(D,e,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).bR(E,e,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.XB.oO(n("aPosX"),D,e).oO(n("aPosY"),E,e),this.XB.wR(r("uOpacity"),$),s.instancedRendering)if(V)this.XB.oO(n("aRotDeg"),V,e).wR(r("uBaseRotDeg"),s.geometry.cG);else{const t=te(this.MG.C()+s.geometry.cG),i=Math.sin(t),e=Math.cos(t);this.XB.xR(r("uRot"),[i,e])}return this.XB.xR(a("uOffsetAlignment"),[-this._G.x/2,-this._G.y/2]),s.geometry.gG(o,z,C,this.xG.C(),s.instancedRendering,this.SG.getThickness())}))}this.XB.Qc(N).SR(N,((h,r,n,o)=>{if(!this.o$)return!1;if(!this.XB.KO(n,t,this,{uniforms:this.bD,idFirst:i,useInstanceID:s.instancedRendering&&1===t?I:void 0,useVertexID:s.instancedRendering||1!==t?void 0:I,fillStyleSolid:s.fillStyleSolid,fillStyleLinearGradient:s.fillStyleLinearGradient,fillStyleRadialGradient:s.fillStyleRadialGradient,linearGradientInfo:this.v$,radialGradientInfo:this.y$,fillStylePaletted:s.fillStylePaletted,fillStyleIndividual:s.fillStyleIndividual,lookupValueRange:s.fillStylePaletted?Nh(s.fillStylePaletted,this,this.t$):void 0,lookupValueBuffer:O,lookupValueAttribDivisor:e,colorBuffer:R,colorAttribDivisor:e,fillStyleImage:s.fillStyleImage,texturedFillGLInfo:this.hG,texCoordAttribDivisor:0,maskTexture:s.shapeIcon&&this.hG,maskTextureCoordsAttribDivisor:0}))return!1;if(this.oi.Ot()?this.XB.bR(D,e,{location:r("aPos_highpartX"),size:1},{location:r("aPos_lowpartX"),size:1}).bR(E,e,{location:r("aPos_highpartY"),size:1},{location:r("aPos_lowpartY"),size:1}):this.XB.oO(r("aPosX"),D,e).oO(r("aPosY"),E,e),1!==t&&this.XB.wR(h("uOpacity"),$),s.instancedRendering)if(V)this.XB.oO(r("aRotDeg"),V,e).wR(h("uBaseRotDeg"),s.geometry.cG);else{const t=te(this.MG.C()+s.geometry.cG),i=Math.sin(t),e=Math.cos(t);this.XB.xR(h("uRot"),[i,e])}return this.XB.xR(o("uOffsetAlignment"),[-this._G.x/2,-this._G.y/2]),s.geometry.Vk(n,z,0,this.o$.valueCount,s.pointSizeAsScale&&this.hG?{scale:this.xG.C(),width:s.shapeIcon?s.shapeIcon._t().x:this.hG.texture.UE,height:s.shapeIcon?s.shapeIcon._t().y:this.hG.texture.YE}:this.xG.C(),s.instancedRendering),!0}))}return{idCount:I}}wi(){return this.t$}_c(t,i,s,e,h){var r;const n=null===(r=this.Bd.C())||void 0===r?void 0:r.qi;if(null==n?void 0:n.Jc(this.Ew))return{};const o=t-i;return{info:{dataPoint:null==n?void 0:n.vd(this.Ew,o)}}}dispose(){var t,i,s,e,h,r,n,o,a,l,u,c,d;return super.dispose(),this.XB.PR(null===(t=this.r$)||void 0===t?void 0:t.bufferX),this.XB.PR(null===(i=this.r$)||void 0===i?void 0:i.bufferY),this.XB.PR(null===(s=this.r$)||void 0===s?void 0:s.bufferColors),this.XB.PR(null===(e=this.r$)||void 0===e?void 0:e.bufferLookupValues),this.XB.PR(null===(h=this.r$)||void 0===h?void 0:h.bufferRotations),this.XB.PR(null===(r=this.r$)||void 0===r?void 0:r.bufferSizes),this.XB.PR(null===(n=this.o$)||void 0===n?void 0:n.bufferX),this.XB.PR(null===(o=this.o$)||void 0===o?void 0:o.bufferY),this.XB.PR(null===(a=this.o$)||void 0===a?void 0:a.bufferColors),this.XB.PR(null===(l=this.o$)||void 0===l?void 0:l.bufferLookupValues),this.XB.PR(null===(u=this.o$)||void 0===u?void 0:u.bufferRotations),this.XB.PR(null===(c=this.o$)||void 0===c?void 0:c.bufferSizes),this.BV={type:"none"},this.c$=void 0,this.i$=void 0,this.LN.lN(),null===(d=this.Bd.C())||void 0===d||d.Ki(),this.r$=void 0,this.o$=void 0,this.A$=void 0,this.g$=void 0,this.d$=void 0,this.f$=void 0,this.v$=void 0,this.y$=void 0,this.XB.QO(this,this.hG),this}wc(){return this.dispose(),this}p$(t){if(!this.Ew)return this.e$||Ss;if(!this.e$){const i=t.ad(this.Ew);if(0===i.xValues.length)return Ss;this.e$={min:{x:ps,y:ps},max:{x:ms,y:ms},h$:Date.now()};const s=i.xValues.length;for(let t=0;t<s;t+=1){const s=i.xValues[t],e=i.yValues[t];this.e$.min.x=s<this.e$.min.x?s:this.e$.min.x,this.e$.min.y=e<this.e$.min.y?e:this.e$.min.y,this.e$.max.x=s>this.e$.max.x?s:this.e$.max.x,this.e$.max.y=e>this.e$.max.y?e:this.e$.max.y}return this.qG.length=0,this.e$}const i=t.Qc(this.Ew),s=i.td,e=i.sd;if(this.qG.length>0&&s&&e){for(const t of this.qG){for(let i=t.min;i<=t.max;i+=1){const t=s[i],h=e[i];this.e$.min.x=t<this.e$.min.x?t:this.e$.min.x,this.e$.min.y=h<this.e$.min.y?h:this.e$.min.y,this.e$.max.x=t>this.e$.max.x?t:this.e$.max.x,this.e$.max.y=h>this.e$.max.y?h:this.e$.max.y}this.qG.length=0}return this.e$}return this.e$}Hi(t=!0){var i,s,e,h,r;const n=null===(i=this.Bd.C())||void 0===i?void 0:i.qi;if(!n)return 0;const o=n.Jc(this.Ew);return"ProgressiveX"===o?(null===(s=n.Ad(this.Ew))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=n.fd(this.Ew))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(h=this.n$)||void 0===h?void 0:h.max)||0:"RegressiveY"===o&&t?(null===(r=this.n$)||void 0===r?void 0:r.max)||0:this.p$(n).max.x}ji(t=!0){var i,s,e,h,r;const n=null===(i=this.Bd.C())||void 0===i?void 0:i.qi;if(!n)return 0;const o=n.Jc(this.Ew);return"ProgressiveX"===o?(null===(s=n.fd(this.Ew))||void 0===s?void 0:s.x)||0:"RegressiveX"===o?(null===(e=n.Ad(this.Ew))||void 0===e?void 0:e.x)||0:"ProgressiveY"===o&&t?(null===(h=this.n$)||void 0===h?void 0:h.min)||0:"RegressiveY"===o&&t?(null===(r=this.n$)||void 0===r?void 0:r.min)||0:this.p$(n).min.x}Xi(t=!0){var i,s,e,h,r;const n=null===(i=this.Bd.C())||void 0===i?void 0:i.qi;if(!n)return 0;const o=n.Jc(this.Ew);return"ProgressiveX"===o&&t?li(null===(s=this.n$)||void 0===s?void 0:s.max,0):"RegressiveX"===o&&t?li(null===(e=this.n$)||void 0===e?void 0:e.max,0):"ProgressiveY"===o?li(null===(h=n.Ad(this.Ew))||void 0===h?void 0:h.y,0):"RegressiveY"===o?li(null===(r=n.fd(this.Ew))||void 0===r?void 0:r.y,0):this.p$(n).max.y}Wi(t=!0){var i,s,e,h,r;const n=null===(i=this.Bd.C())||void 0===i?void 0:i.qi;if(!n)return 0;const o=n.Jc(this.Ew);return"ProgressiveX"===o&&t?li(null===(s=this.n$)||void 0===s?void 0:s.min,0):"RegressiveX"===o&&t?li(null===(e=this.n$)||void 0===e?void 0:e.min,0):"ProgressiveY"===o?li(null===(h=n.fd(this.Ew))||void 0===h?void 0:h.y,0):"RegressiveY"===o?li(null===(r=n.Ad(this.Ew))||void 0===r?void 0:r.y,0):this.p$(n).min.y}lu(){var t,i;let s=this.xG.C();this.hG&&(s=Math.max(this.hG.texture.UE,this.hG.texture.YE)*this.xG.C());const e=Boolean(null===(t=this.Ew)||void 0===t?void 0:t.size),h=Math.max(hs(this.hc),e?25:s),r=null===(i=this.Bd.C())||void 0===i?void 0:i.qi.Jc(this.Ew);return!r||"ProgressiveX"!==r&&"RegressiveX"!==r?h:0}uu(){var t,i;let s=this.xG.C();this.hG&&(s=Math.max(this.hG.texture.UE,this.hG.texture.YE)*this.xG.C());const e=Boolean(null===(t=this.Ew)||void 0===t?void 0:t.size),h=Math.max(hs(this.hc),e?25:s),r=null===(i=this.Bd.C())||void 0===i?void 0:i.qi.Jc(this.Ew);return!r||"ProgressiveY"!==r&&"RegressiveY"!==r?h:0}}const Ly=()=>{const t=1e3,i=(t,i,s,e,h)=>{const r={min:ps,max:ms};let n,o=0,a=0;for(let l=e;l<=h;l+=1){const e=l%t.length,h=t[e],u=i[e];s&&Number.isNaN(u)?n=void 0:(r.min=Math.min(r.min,u),r.max=Math.max(r.max,u),void 0!==n&&(o+=1,a+=Math.abs(h-n)),n=h)}return{visibleBoundaries:r,avgPointGap:a/o,sampleMin:e,sampleMax:h,finitePointPairCount:o}};let s;return(e,h,r,n,o,a,l)=>{if(!r)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};if(r.iLastSample-r.iFirstSample+1<2e3)return i(o,a,l,r.iFirstSample,r.iLastSample);n&&(s=void 0),s||(s={iFirst:r.iFirstSample,chunks:[]});let u=s.iFirst,c=s.iFirst+s.chunks.length*t-1;for(;;){const e=c+1,h=c+t;if(!(r.iLastSample>=h))break;{const t=i(o,a,l,e,h);s.chunks.push(t),c=h}}for(;;){const e=u-1,h=u-t;if(!(r.iFirstSample<=h))break;{const t=i(o,a,l,h,e);s.chunks.unshift(t),s.iFirst=h,u=h}}for(let i=0;i<s.chunks.length&&s.chunks[i].sampleMin<r.iFirstSample;i++)s.chunks.splice(i,1),s.iFirst+=t,i--;for(let t=s.chunks.length-1;t>=0&&s.chunks[t].sampleMax>r.iLastSample;t--)s.chunks.splice(t,1);if(0===s.chunks.length)return s=void 0,{visibleBoundaries:void 0,avgPointGap:0};const d={min:ps,max:ms},f=[];for(const t of s.chunks)d.min=Math.min(t.visibleBoundaries.min,d.min),d.max=Math.max(t.visibleBoundaries.max,d.max),f.push(t.avgPointGap);const A=i(o,a,l,r.iFirstSample,s.iFirst-1),g=i(o,a,l,s.chunks[s.chunks.length-1].sampleMax+1,r.iLastSample);return A.finitePointPairCount>0&&(d.min=Math.min(A.visibleBoundaries.min,d.min),d.max=Math.max(A.visibleBoundaries.max,d.max),f.push(A.avgPointGap)),g.finitePointPairCount>0&&(d.min=Math.min(g.visibleBoundaries.min,d.min),d.max=Math.max(g.visibleBoundaries.max,d.max),f.push(g.avgPointGap)),{visibleBoundaries:d,avgPointGap:f.reduce(((t,i)=>t+i/f.length),0)}}},Py=(t,i,s,e,h,r,n,o,a,l,u,c,d,f)=>{const A=Ke(l),g=qe(l),v=Array.isArray(i[0])?eo(i[0]):i[0],y=Array.isArray(i[1])?eo(i[1]):i[1],p=s&&Array.isArray(s)?eo(s):s,m=e&&Array.isArray(e)?eo(e):e,S=h&&Array.isArray(h)?eo(h):h,b=r&&Array.isArray(r)?eo(r):r,x=v.length,M=v.elementAt(0),w=v.elementAt(x-1),_=y.elementAt(0),k=y.elementAt(x-1),C=c?2:1;if(o&&a&&void 0!==o.firstX&&void 0!==o.lastX&&void 0!==o.firstY&&void 0!==o.lastY&&("ProgressiveX"===l&&M>=o.firstX||"RegressiveX"===l&&M<=o.firstX||"ProgressiveY"===l&&_>=o.firstY||"RegressiveY"===l&&_<=o.firstY)){const i="x"===A?v:y,s="x"===A?o.lastX:o.lastY,e=ao(s,0,x-1,g,(t=>i.elementAt(t)));if(i.elementAt(e)===s){const i=o.bufferSize-o.valueCount,s=e+1,h=x-s;if(0===h)return o;if(i>=h){const i=v.toArray(s,s+h-1),e=y.toArray(s,s+h-1);if(t.KR(o.bufferX,o.valueCount*C,d(i),Float32Array),t.KR(o.bufferY,o.valueCount*C,d(e),Float32Array),p&&o.bufferColors){const i=p.toArray(s,s+h-1);t.KR(o.bufferColors,o.valueCount,i,Uint32Array)}if(m&&o.bufferLookupValues){const i=m.toArray(s,s+h-1);t.KR(o.bufferLookupValues,o.valueCount,i,Float32Array)}if(S&&o.bufferSizes){const i=S.toArray(s,s+h-1);t.KR(o.bufferSizes,o.valueCount,i,Float32Array)}if(b&&o.bufferRotations){const i=b.toArray(s,s+h-1);t.KR(o.bufferRotations,o.valueCount,i,Float32Array)}if(n&&o.bufferLengthSoFar){const[s,h,r]=By(i,e,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY,f);t.KR(o.bufferLengthSoFar,2*o.valueCount,s,Float32Array),o.lengthSoFarX=h,o.lengthSoFarY=r}return o.valueCount+=h,o.lastX=w,o.lastY=k,o}}}const T=v.toArray(0,x-1),F=y.toArray(0,x-1),I=x+u,L=t.QR(I*C,d(T),null==o?void 0:o.bufferX,Float32Array),P=t.QR(I*C,d(F),null==o?void 0:o.bufferY,Float32Array),B=p?t.QR(I,p.toArray(0,x-1),null==o?void 0:o.bufferColors,Uint32Array):void 0,D=m?t.QR(I,m.toArray(0,x-1),null==o?void 0:o.bufferLookupValues,Float32Array):void 0,E=S?t.QR(I,S.toArray(0,x-1),null==o?void 0:o.bufferSizes,Float32Array):void 0,R=b?t.QR(I,b.toArray(0,x-1),null==o?void 0:o.bufferRotations,Float32Array):void 0;let O,z=0,V=0;if(n){const i=By(T,F,T[0],F[0],0,0,f);O=t.QR(2*I,i[0],null==o?void 0:o.bufferLengthSoFar,Float32Array),z=i[1],V=i[2]}return{bufferX:L,bufferY:P,bufferColors:B,bufferLookupValues:D,bufferSizes:E,bufferRotations:R,bufferSize:I,bufferLengthSoFar:O,valueCount:x,firstX:M,lastX:w,firstY:_,lastY:k,lengthSoFarX:z,lengthSoFarY:V}},By=(t,i,s,e,h,r,n)=>{const o=t.length,a=new Float32Array(2*o);if(0===o)return[a,0,0];let l=0,u=s,c=e,d=h,f=r;if(n)for(let s=0;s<o;s+=1){const e=t[s],h=i[s];Number.isNaN(e)||Number.isNaN(h)||Number.isNaN(u)||Number.isNaN(c)?(d=0,f=0,a[l]=0,a[l+1]=0,l+=2):(d+=Math.abs(u-e),f+=Math.abs(c-h),a[l]=d,a[l+1]=f,l+=2),u=e,c=h}else for(let s=0;s<o;s+=1){const e=t[s],h=i[s];d+=Math.abs(u-e),f+=Math.abs(c-h),a[l]=d,a[l+1]=f,l+=2,u=e,c=h}return[a,d,f]},Dy={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>Dy.multiply(t,Dy.translation(i,s)),rotate:(t,i)=>Dy.multiply(t,Dy.rotation(i)),scale:(t,i,s)=>Dy.multiply(t,Dy.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=i[0],d=i[1],f=i[2],A=i[3],g=i[4],v=i[5],y=i[6],p=i[7],m=i[8];return[c*s+d*r+f*a,c*e+d*n+f*l,c*h+d*o+f*u,A*s+g*r+v*a,A*e+g*n+v*l,A*h+g*o+v*u,y*s+p*r+m*a,y*e+p*n+m*l,y*h+p*o+m*u]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class Ey extends On{constructor(t,i,s,e,h){super(t,i,s,e,h),this.m$=[],this.bD=new Uv,this.S$=[r(0,0),r(0,0),r(0,0),r(0,0)],this.b$=u(r(0,0),r(0,0)),this.x$=u(r(0,0),r(0,0)),this.M$=r(0,0),this.w$=r(0,0),this._$=r(0,0),this.k$=0,this.C$=0,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>V(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>$(this.Xe)&&this.Xe}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i,this.$V=t.Ba.Oa}Vr(){const t=this.cl(),i=this.ul(),s=this.li.C();if(t){const t=this.al(),e=this.Tz.fillStyleSolid(t),h=this.Tz.fillStyleRadialGradient(t),n=this.Tz.fillStyleLinearGradient(t),o=e||h||n,a=this.XB,l=this.XB.hR(),u=l!==this.C$;if(this.C$=l,this.bD.TR(this.oi),this._l.o||u){this.T$&&this.T$.nD(this),this.font._(Sn(this._l.C(),l));const t=this.font.C();this.T$=this.XB._r(t.properties.family),this.T$.Qc(this)}const c=this.font.o||this.pl.o;if(c&&this.T$){const t=this.font.C();[this.F$,this.x$]=this.T$.aD(this.pl.C(),t,this.Sz.bi.isDark),this.m$.forEach((t=>{t.texCoordBuff&&a.PR(t.texCoordBuff),t.vertexBuff&&a.PR(t.vertexBuff)})),this.m$=this.F$.map((t=>({texCoordBuff:a.pR(t.texCoords,!1),texture:t.texture,info:t}))),this._l.o=!1,this.font.o=!1,this.pl.o=!1}const d=this.oi.si()||i,f=this.In.o||this.xl.o||this.bl.o||this.Ml.o||this.Nn.o||this.nt.o||c||d,A=this.Nn.C(),g=Hs(r(this.xl.C()+1,this.bl.C()+1),.5);if(f&&this.F$&&(this.M$=r(-(A.left*l+this.x$.max.x-this.x$.min.x+A.right*l)*g.x,-(A.bottom*l+this.x$.max.y-this.x$.min.y+A.top*l)*g.y)),(f||d||this.wl.o||this.al())&&this.Xe!==xe){if(this.F$){const t=Ws(this.In.C(),this.Ml.C()),i=tt(t,this.oi,this.gi.oi),s=Hs(i,l);this._$=s;const e=te(this.wl.C());this.k$=e,c&&this.m$.forEach((t=>{const i=t.info;i&&(t.vertexBuffLen=i.vertices.length/2,t.vertexBuff=a.pR(i.vertices,!0,t.vertexBuff))}));const h=this.nt.C(),n=[Ws(Gs(r((this.x$.min.x+(-h.left-A.left)*l+this.M$.x)/l,(this.x$.max.y+(h.top+A.top)*l+this.M$.y)/l),this.kl,e),i),Ws(Gs(r((this.x$.max.x+(h.right+A.right)*l+this.M$.x)/l,(this.x$.max.y+(h.top+A.top)*l+this.M$.y)/l),this.kl,e),i),Ws(Gs(r((this.x$.max.x+(h.right+A.right)*l+this.M$.x)/l,(this.x$.min.y+(-h.bottom-A.bottom)*l+this.M$.y)/l),this.kl,e),i),Ws(Gs(r((this.x$.min.x+(-h.left-A.left)*l+this.M$.x)/l,(this.x$.min.y+(-h.bottom-A.bottom)*l+this.M$.y)/l),this.kl,e),i)];this.S$=[tt(n[0],this.gi.oi,this.oi),tt(n[1],this.gi.oi,this.oi),tt(n[2],this.gi.oi,this.oi),tt(n[3],this.gi.oi,this.oi)];const o=Es(n);this.w$=r(-(o.max.x-o.min.x)*l*g.x-o.min.x*l+this._$.x,-(o.max.y-o.min.y)*l*g.y-o.min.y*l+this._$.y),this.Lh=Xs(o.max,o.min),this.w$={x:this.w$.x/l,y:this.w$.y/l};const u=Es(this.S$),d=this.oi.Jt(u.min,this.w$),f=this.oi.Jt(u.max,this.w$);this.b$=Es([d,f]),this.w$={x:this.w$.x*l,y:this.w$.y*l}}h?this.Ez=Lv(this.b$,this.oi,h.getPosition(),h.getExtent(),h.getShape(),this.XB.hR()):n?this.Rz=Pv(this.b$,this.oi,n.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0)}this.al()&&(this.wD=o?this.XB.SE(Qg["2D"],Qg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.$V}),Qg.Color({dataType:h?["gradient",h]:n?["gradient",n]:"uniform",maskTextureText:!0})):void 0),this.I$=!this.Vl||this.Xe===xe||e&&0===e.getColor().getA()?void 0:this.I$||this.XB.SE(Qg["2D"],Qg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.$V}),Qg.Color({dataType:"uniform",maskTextureText:!0})),this.L$=s&&o?this.L$||this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.$V})):void 0,this.In.o=!1,this.xl.o=!1,this.bl.o=!1,this.Ml.o=!1,this.wl.o=!1,this.dl(this.Xe)}return this.Cl=t,this}Mc(t,i){if(this.ml){const t=Math.min(this.S$[0].x,this.S$[1].x),i=Math.max(this.S$[0].x,this.S$[1].x),s=Math.min(this.S$[0].y,this.S$[2].y),e=Math.max(this.S$[0].y,this.S$[2].y);this.Hs.Kg();const h=Math.min(this.oi.x.G,this.oi.x.$),r=Math.max(this.oi.x.G,this.oi.x.$),n=Math.min(this.oi.y.G,this.oi.y.$),o=Math.max(this.oi.y.G,this.oi.y.$);if(!(t<=r&&h<=i&&s<=o&&n<=e))return{idCount:1}}if(this.cl()){const s=0===t?this.I$:void 0,e=this.Vl,h=1===t?this.L$:this.wD;if(!h||0===this.m$.length)return{};const r=this.Tz.fillStyleSolid(!1),n=this.Tz.fillStyleRadialGradient(!1),o=this.Tz.fillStyleLinearGradient(!1),a=this.gi.KD(),l=a.x,u=a.y;let c=Dy.projection(l,u,-1);const d=Dy.translation(this.M$.x,this.M$.y),f=Dy.translation(this.w$.x,this.w$.y);c=Dy.translate(c,this._$.x,this._$.y),c=Dy.multiply(c,f),c=Dy.rotate(c,this.k$),c=Dy.multiply(c,d),1===t&&(c=Dy.scale(c,this.x$.max.x,this.x$.max.y)),s&&e&&(c=Dy.translate(c,this.Sl.x,this.Sl.y),this.XB.Qc(s).SR(s,((t,i,s,h)=>(this.XB.HR(t("uMatrix"),c).wR(t("uIsHighlighted"),0).$I(t("uHighlightColorOffset"),T).wR(t("uRenderEffectMask"),0).$I(t("uColor"),e),this.$V&&this.XB.xR(h("uViewportSizePx"),[a.x*this.XB.hR(),a.y*this.XB.hR()]),this.m$.forEach((s=>{this.XB.LR(i("aPos"),s.vertexBuff).LR(i("aMaskTextureCoord"),s.texCoordBuff).MR(t("uMaskTexture"),s.texture,0).Vk(this.XB.gl.TRIANGLES,s.vertexBuffLen)})),!0))),c=Dy.translate(c,-this.Sl.x,-this.Sl.y)),this.XB.Qc(h).SR(h,((s,e,h,l)=>{if(this.XB.HR(s("uMatrix"),c).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),this.$V&&this.XB.xR(l("uViewportSizePx"),[a.x*this.XB.hR(),a.y*this.XB.hR()]),1===t)this.XB.XR(s("uFirstId"),i).$O(h,1);else if(r)this.XB.$I(s("uColor"),r.getColor());else if(n&&this.Ez){this.XB.xR(s("uCenter"),this.Ez.center).xR(s("uDistance"),this.Ez.distance).IR(s("uBounds"),this.Ez.bounds).wR(s("uAspect"),this.Ez.aspectRatio);const t=n.getColorStops();for(let i=0;i<t.length;i+=1)this.XB.$I(s(`color_${i}`),t[i].color).wR(s(`stop_${i}`),t[i].offset)}else if(o&&this.Rz){this.XB.xR(s("uStartPoint"),this.Rz.startPoint).xR(s("uEndPoint"),this.Rz.endPoint).IR(s("uBounds"),this.Rz.bounds);const t=o.getColorStops();for(let i=0;i<t.length;i+=1)this.XB.$I(s(`color_${i}`),t[i].color).wR(s(`stop_${i}`),t[i].offset)}return 1===t&&this.XB.LR(e("aPos"),this.XB._O).Vk(this.XB.gl.TRIANGLES,6),1!==t&&this.m$.forEach((t=>{this.XB.LR(e("aPos"),t.vertexBuff).LR(e("aMaskTextureCoord"),t.texCoordBuff).MR(s("uMaskTexture"),t.texture,0).Vk(this.XB.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return{idCount:1}}_c(t,i,s,e,h){return{}}yc(){return this.cl()?Es(this.S$):Ss}bc(){return this.cl()&&this.Lh?this.Lh:r(0,0)}_t(){if(this.cl()&&this.b$){const t=this.b$;return r(t.max.x-t.min.x,t.max.y-t.min.y)}return r(0,0)}wc(){return this.m$.forEach((t=>{t.texCoordBuff&&this.XB.PR(t.texCoordBuff),t.vertexBuff&&this.XB.PR(t.vertexBuff)})),this.m$=[],this.T$&&this.T$.nD(this),this.wD=void 0,this.I$=void 0,this.L$=void 0,this}Hi(){return this.b$.max.x}ji(){return this.b$.min.x}Xi(){return this.b$.max.y}Wi(){return this.b$.min.y}lu(){return 0}uu(){return 0}}class Ry{constructor(t){this.ZV=0,this.P$=null,this.B$=t}D$(){return this.B$}E$(t,i,s,e){for(var h,r,n,o,a,l,u,c,d,f,A=this.P$,g=null,v=null,y=!1,p=!1;A&&(null===g&&(this.R$(t,i,null===(h=A.head)||void 0===h?void 0:h.px,null===(r=A.head)||void 0===r?void 0:r.py)?(g=A,y=!0):this.R$(t,i,null===(n=A.tail)||void 0===n?void 0:n.px,null===(o=A.tail)||void 0===o?void 0:o.py)&&(g=A)),null===v&&(this.R$(s,e,null===(a=A.head)||void 0===a?void 0:a.px,null===(l=A.head)||void 0===l?void 0:l.py)?(v=A,p=!0):this.R$(s,e,null===(u=A.tail)||void 0===u?void 0:u.px,null===(c=A.tail)||void 0===c?void 0:c.py)&&(v=A)),null==v||null==g);)A=A.next;switch((null!=g?1:0)|(null!=v?2:0)){case 0:var m={px:t,py:i,prev:null},S={px:s,py:e,next:null};m.next=S,S.prev=m,g={head:m,tail:S,next:this.P$,prev:null,closed:!1},this.P$&&(this.P$.prev=g),this.P$=g,++this.ZV;break;case 1:var b={px:s,py:e};y?(b.next=g.head,b.prev=null,g.head.prev=b,g.head=b):(b.next=null,b.prev=g.tail,g.tail.next=b,g.tail=b);break;case 2:b={px:t,py:i},p?(b.next=v.head,b.prev=null,v.head.prev=b,v.head=b):(b.next=null,b.prev=v.tail,v.tail.next=b,v.tail=b);break;case 3:if(g===v){b={px:null===(d=g.tail)||void 0===d?void 0:d.px,py:null===(f=g.tail)||void 0===f?void 0:f.py,next:g.head,prev:null},g.head.prev=b,g.head=b,g.closed=!0;break}switch((y?1:0)|(p?2:0)){case 0:this.O$(g);case 1:v.tail.next=g.head,g.head.prev=v.tail,v.tail=g.tail,this.z$(g);break;case 3:this.O$(g);case 2:g.tail.next=v.head,v.head.prev=g.tail,g.tail=v.tail,this.z$(v)}}}z$(t){t.prev?t.prev.next=t.next:this.P$=t.next,t.next&&(t.next.prev=t.prev),--this.ZV}V$(t,i,s=1e-10){return Math.abs(t-i)<Math.min(Math.abs(t),Math.abs(i))*s}R$(t,i,s,e){return!!(t&&i&&s&&e)&&this.V$(t,s)&&this.V$(i,e)}O$(t){for(var i=t.head;i;){var s=i.next;i.next=i.prev,i.prev=s,i=s}s=t.head,t.head=t.tail,t.tail=s}}class Oy{constructor(t){this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5),this.contours={},t&&(this.N$=t)}G$(t,i,s,e){const h=i.length-1,r=s.length-1;var n=this.h,o=this.sh,a=this.xh,l=this.yh;const u=e.length;this.contours={};for(var c,d,f,A,g,v=function(t,i){return(n[i]*a[t]-n[t]*a[i])/(n[i]-n[t])},y=function(t,i){return(n[i]*l[t]-n[t]*l[i])/(n[i]-n[t])},p=0,m=0,S=0,b=0,x=[0,1,1,0],M=[0,0,1,1],w=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],_=r-1;_>=0;_--)for(var k=0;k<h;k++){let h=t(k,_),r=t(k+1,_),L=t(k,_+1),P=t(k+1,_+1);var C=Math.min(L,h),T=Math.min(P,r);if(A=Math.min(C,T),C=Math.max(L,h),T=Math.max(P,r),!((g=Math.max(C,T))<e[0]&&A>e[u-1]))for(var F=0;F<u;F++)if(e[F]>=A&&e[F]<=g){for(var I=4;I>=0;I--)I>0?(n[I]=t(k+x[I-1],_+M[I-1])-e[F],a[I]=i[k+x[I-1]],l[I]=s[_+M[I-1]]):(n[0]=.25*(n[1]+n[2]+n[3]+n[4]),a[0]=.5*(i[k]+i[k+1]),l[0]=.5*(s[_]+s[_+1])),n[I]>1e-10?o[I]=2:n[I]<-1e-10?o[I]=0:o[I]=1;for(I=1;I<=4;I++)if(d=4!=I?I+1:1,0!=(f=w[o[c=I]][o[0]][o[d]])){switch(f){case 1:p=a[c],S=l[c],m=a[0],b=l[0];break;case 2:p=a[0],S=l[0],m=a[d],b=l[d];break;case 3:p=a[d],S=l[d],m=a[c],b=l[c];break;case 4:p=a[c],S=l[c],m=v(0,d),b=y(0,d);break;case 5:p=a[0],S=l[0],m=v(d,c),b=y(d,c);break;case 6:p=a[d],S=l[d],m=v(c,0),b=y(c,0);break;case 7:p=v(c,0),S=y(c,0),m=v(0,d),b=y(0,d);break;case 8:p=v(0,d),S=y(0,d),m=v(d,c),b=y(d,c);break;case 9:p=v(d,c),S=y(d,c),m=v(c,0),b=y(c,0)}this.N$(p,S,m,b,e[F],F)}}}}N$(t,i,s,e,h,r){let n=this.contours[r];n||(n=this.contours[r]=new Ry(h)),n.E$(t,i,s,e)}get $$(){var t=[],i=this.contours;for(var s in i)for(var e=i[s].P$,h=i[s].B$;e;){var r=e.head,n=[];for(n.ax=[],n.ay=[],n.level=h,n.k=s;r&&r.px&&r.py;)n.ax.push(r.px),n.ay.push(r.py),r=r.next;t.push(n),e=e.next}return t.sort(((t,i)=>t.length-i.length)),t}}class zy extends En{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.U$=d("bilinear"),this.Y$=d(void 0),this.j$=!0,this.Yt={x:0,y:0},this.H$={x:1,y:1},this.sp=kn.lineStyle,this.W$=d(void 0),this.engine=t;const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.Ba={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.X$=new Oy}cp(t){return this.U$._(t),this}dp(){return this.U$.C()}mx(t){return this.Y$._(t),this}Sx(){return this.Y$.C()}np(t,i){return this.j$=this.Yt!=t||this.H$!=i,this.Yt=t,this.H$=i,this}op(){return{start:this.Yt,step:this.H$,end:{x:this.Yt.x+this.H$.x*this.Ba.columns,y:this.Yt.y+this.H$.y*this.Ba.rows}}}ep(t){return this.sp="function"==typeof t?t(this.sp):t,this}up(){return this.sp}ap(t){return this.W$._(t),this}lp(){return this.W$.C()}}class Vy extends zy{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.bD=new Uv,this.BV={},this.Z$=[],this.J$=!1,this.pu=!1,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStylePaletted:()=>Pe(this.Xe)&&this.Xe,wireframeStyleLine:()=>_h(this.sp)&&this.sp,wireframeStyleFill:()=>{const t=this.sp&&this.sp.getFillStyle();return Ce(t)&&t}}),this.Q$=void 0,this.K$=dc,this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i;const n=Math.min(this.XB.JB,void 0!==r.ux?r.ux:2048),o={x:Math.min(n,this.Ba.primaryDimensionVectorsCount),y:Math.min(n,this.Ba.secondaryDimensionVectorsCount)},a=((t,i,s)=>{const e=[],h=s(t.primaryDimensionVectorsCount,i.x),r=s(t.secondaryDimensionVectorsCount,i.y);let n;return h.forEach((t=>r.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};e.push(s)})))),n=[],e.forEach((t=>{let i=n.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},n.push(i)),i.tiles.push(t)})),{gridTiles:e,gridTileSizes:n}})(this.Ba,o,this.K$),l=a.gridTiles.map((t=>({...t,intensityData:void 0,hasIntensityData:!1}))),u=a.gridTileSizes.map((t=>({...t,tiles:l.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.q$={gridTiles:l,gridTileSizes:u},this.np(this.Yt,this.H$),this.tU=[],this.iU=new Za((()=>{const t=new Iy(this.Sz,this.bz,this.oi,ri);return t.Rd(xe).Ed(xe),t})),this.sU=[],this.eU=new Za((()=>{const t=new Ey(this.Sz,this.bz,this.oi,ri,[]);return t.Xl({x:0,y:0}),t}))}hU(){return this.XB.gi.ia.fE}wi(){return this.rU}nU(t){return t.intensityData||(t.intensityData=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary)),t.intensityData}oU(t,i){return 0<=t&&t<i?t:t<0?t%i+i:t%i}aU(t,i){const s=tt(t,this.oi,this.bz.gi.oi),e=tt(i,this.oi,this.bz.gi.oi);let h=180*Math.atan2(s.y-e.y,e.x-s.x)/Math.PI;return(h<-90||90<h)&&(h+=180),h}lU(t,i,s,e){const h=ee(t,i,s,e);if(h){let r=Math.min(t.x,i.x,s.x,e.x),n=Math.max(t.x,i.x,s.x,e.x),o=Math.min(t.y,i.y,s.y,e.y),a=Math.max(t.y,i.y,s.y,e.y);if(h.x<=r||n<=h.x||h.y<=o||a<=h.y)return}return h}uU(t,i,s,e){if(i.length<5)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};void 0===this.Q$&&(this.Q$=new Ey(this.Sz,this.bz,this.oi,this.yi,[]));const h=t.labelFont;let r=this.Q$.qr(e).Cr(0).kr(h).Vr()._t().x;Number.isNaN(r)&&(this.Q$.dispose(),this.Q$=new Ey(this.Sz,this.bz,this.oi,this.yi,[]),r=this.Q$.qr(e).Cr(0).kr(h).Vr()._t().x);const n=this.Q$,o=this.oi.x.G,a=this.oi.x.$,l=this.oi.y.G,u=this.oi.y.$,c={x:o,y:l},d={x:a,y:u},f=[{x:c.x,y:c.y},{x:c.x,y:d.y}],A=[{x:c.x,y:d.y},{x:d.x,y:d.y}],g=[{x:d.x,y:c.y},{x:d.x,y:d.y}],v=[{x:c.x,y:c.y},{x:d.x,y:c.y}];let y={x:i[0],y:s[0]},p={x:i[1],y:s[1]},m=[];const S=c.x,b=d.x,x=c.y,M=d.y,w=(t,i,s,e)=>{const h=Ns(t,c,d),r=Ns(i,c,d);if(h&&r)return e?(s.push(t),s.push(i),!1):(s.push(i),!1);{if(!h&&!r&&(t.x<S&&i.x<S||t.y<x&&i.y<x||b<t.x&&b<i.x||M<t.y&&M<i.y))return!(0<s.length&&0==isNaN(s[s.length-1].x)&&(s.push({x:NaN,y:NaN}),0));const n=this.lU(f[0],f[1],t,i),o=this.lU(A[0],A[1],t,i),a=this.lU(g[0],g[1],t,i),l=this.lU(v[0],v[1],t,i),u=[];if(n&&u.push(n),o&&u.push(o),a&&u.push(a),l&&u.push(l),1==u.length){if(h)e&&s.push(t),s.push(i),s.push({x:NaN,y:NaN});else if(r)return s.push(t),s.push(i),!1}else 2==u.length&&(0<s.length&&0==isNaN(s[s.length-1].x)&&s.push({x:NaN,y:NaN}),s.push(u[0]),s.push(u[1]),s.push({x:NaN,y:NaN}));return!0}};let _=w(y,p,m,!0);const k=4*this.oi.x.getPixelSize()/2;for(let t=2;t<i.length;t++)p={x:i[t],y:s[t]},k<=Math.abs(p.x-y.x)+Math.abs(p.y-y.y)&&(_=w(y,p,m,_),y=p);const C=m.length;if(C<2)return{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]};y={x:i[i.length-1],y:s[s.length-1]},Ns(y,c,d)&&y.x==m[0].x&&y.y==m[0].y&&m.push(m[0]);let T=[];const F=[];let I=0;for(let t=I+1;t<2*C;t++){let i=this.oU(t,C);if(C<t&&r<this.vf(m[i],m[0]))break;let s=this.oU(I,C);if(isNaN(m[s].x)){0<T.length&&(F.push(T),T=[]),++I,t=I;continue}const e=isNaN(m[i].x);let h=0;if(e){0<T.length&&(F.push(T),T=[]),++t,I=t;continue}const n=0;if(m[i].x<c.x+n||d.x-n<m[i].x||m[i].y<c.y+n||d.y-n<m[i].y)++t,I=t;else if(h=this.vf(m[i],m[s]),r<h){const e=m[s],h=m[i];let r=Number.MIN_VALUE;const n=0;for(let i=I+1;i<t-1;i++){const t=this.oU(i,C);if(isNaN(m[t].x))break;if(r!=Number.MIN_VALUE&&(m[t].x<c.x+n||d.x-n<m[t].x||m[t].y<c.y+n||d.y-n<m[t].y))continue;const s=Ps({x:m[t].x,y:m[t].y},e,h);r<s&&(r=s)}if(r!=Number.MIN_VALUE&&(T.push({x:r,y:s,z:i}),C<=t&&0<=s))break;++I,t=I}else e&&(++I,t=I)}p={x:0,y:0};let L=-1;const P=[],B=[];F.length<1&&0<T.length&&F.push(T);for(let t=0;t<F.length;t++){T=F[t],T.sort(((t,i)=>t.x-i.x)),L=T[0].y;let e=0,r=T[0].z;this.sU.forEach(((t,o)=>{const a=n.ih({x:t.position.x,y:t.position.y}).Cr(t.angle).kr(t.font).Vr().yc();if(isNaN(a.min.x))return;let l=L,u=r;if(m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){let t=this.aU(m[l],m[u]),r=n.ih({x:i[L],y:s[L]}).Cr(t).kr(h).Vr().yc();for(;Ms(a,r)&&e<T.length-1;)if(l=T[++e].y,u=T[e].z,m[l]&&m[u]&&!isNaN(m[l].x)&&!isNaN(m[u].x)){const i=(m[l].x+m[u].x)/2,s=(m[l].y+m[u].y)/2;t=this.aU(m[l],m[u]),r=n.ih({x:i,y:s}).Cr(t).kr(h).Vr().yc()}}})),T.length<=e&&(e=0);let o=T[e].y,a=T[e].z,l=0;l=o<a?a-o:C-o+a,3<l&&(l-=2),L=o;let u=Number.NaN,c=Number.NaN;if(m[0].x==m[m.length-1].x&&m[0].y===m[m.length-1].y){L=o;let t=this.oU(o-1,m.length),i=this.oU(o+l,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else if(o<4){L=3,o=L,a=this.oU(o+l+1,m.length);let t=this.oU(o,m.length),i=this.oU(a,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}else{for(L=o-1;L<m.length&&isNaN(m[L].x);)++L;if(L==m.length)for(;L<m.length&&isNaN(m[L].x);)++L;let t=this.oU(L,m.length),i=this.oU(L+l+1,m.length);u=(m[t].x+m[i].x)/2,c=(m[t].y+m[i].y)/2}0<=L&&(y=m[o],p=m[a],P.push({x:u,y:c}),B.push(this.aU(y,p)))}return 0<=P.length?{labelPos:P,labelAngle:B}:{labelPos:[{x:NaN,y:NaN}],labelAngle:[Number.NaN]}}vf(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}cU(t,i){if(!this.q$)return this;if(!t)return this.dU(!0),this.fU(!0),this;if(!i)return(this.oi.x.It||this.oi.x.et||this.oi.y.It||this.oi.y.et)&&this.AU(t),this;if(!this.q$.gridTiles)return this;if(!this.gU)return this;const s=this.gU.boundaries.min.x,e=this.gU.boundaries.min.y,h=this.gU.boundaries.max.x,r=this.gU.boundaries.max.y;if(null==s||null==e||null==h||null==r)return this;const n=this.Ba.columns,o=this.Ba.rows,a=(h-s)/n,l=(r-e)/o,u=new Array(n).fill(0,0,n).map(((t,i)=>s+i*a+a/2)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l+l/2));let d=[];t.levels.forEach((t=>{d.push(t.value)}));const f=(t,i)=>"rows"==this.Ba.dataOrder?i:t,A=(t,i)=>"rows"==this.Ba.dataOrder?t:i;return this.X$.G$(((t,i)=>this.vU(f(t,i),A(t,i))),u,c,d),this.yU(t),this.AU(t),this}yU(t){this.dU();let i=new Map;return t.levels.forEach((t=>{i.set(t.value,t.strokeStyle)})),this.X$.$$.forEach((t=>{let s=t.level;const e=i.get(s),h=this.tU.find((t=>t.lineStyle===e));if(h)h.points.appendSample({xValues:NaN,yValues:NaN}),h.points.appendSamples({xValues:t.ax,yValues:t.ay});else{const i=new ro({warnings:!1,schema:{xValues:{pattern:null},yValues:{pattern:null}}});i.appendSamples({xValues:t.ax,yValues:t.ay});const s={lineStyle:e,points:i};this.tU.push(s)}})),this}AU(t){this.fU();const i=Pe(this.Xe)?this.Xe.lut:void 0;return this.X$.$$.forEach((s=>{var e,h,r;let n=[],o=[];const a=s.k,l=t.levels[a],u=null!==(h=null!==(e=l.label)&&void 0!==e?e:null==i?void 0:i.getFormatter()(l.value,{min:i.min,max:i.max}))&&void 0!==h?h:l.value.toString();if(t.showLabels&&(({labelPos:n,labelAngle:o}=this.uU(t.levels[a],s.ax,s.ay,u)),0<n.length))for(let i=0;i<n.length;i++)this.sU.push({text:u,position:n[i],angle:o[i],font:l.labelFont,fill:l.labelFillStyle,shadow:null!==(r=t.shadows)&&void 0!==r?r:void 0})})),this}Vr(){const t=this.Z$,i=this.Xe,s=this.al(),e=this.sp,h=e!==this.pU,r=this.Tz.wireframeStyleLine(h),n=this.Tz.wireframeStyleFill(h),o=r&&n&&!this.oi.Ot(),a=this.Tz.fillStylePaletted(s),l=this.Tz.fillStyleSolid(s),u=this.U$.o,c=this.Y$.o,d=this.U$.C(),f=this.pu,A=this.li.C();this.mU=this.mU||this.SU();const g=this.mU,v=Ac(t,g,f?"intensity":void 0,(t=>t.sizeHeatmapDataVectors)),y=this.W$.C(),p=y!==this.bU;this.cU(y,p||v.size>0||this.j$),this.bU=this.W$.C(),this.j$=!1,v.size>0&&(mc(this.XB,v,(t=>this.nU(t.tileData)),(t=>t.intensityDataTexture)),this.J$=!0),this.bD.TR(this.oi);const m=this.BV;if((s||u||c)&&(m.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.XB.SE(Qg["2D"],Qg.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===d&&"bilinear",flipXY:"rows"===this.Ba.dataOrder,intensityTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut,aggregation:this.Y$.C()}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}))}:l?{renderMode:"solid",fillStyleSolid:l,shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:"uniform"}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}))}:void 0),h&&(m.wireframe=o&&r&&n?-1===r.getThickness()?{renderMode:"primitive",shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:"uniform"}),Qg.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Ba.dataOrder,axisWorldTranslation:Oh(this.oi),normalSource:void 0})),fillStyleSolid:n}:{renderMode:"triangulated",shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:"uniform"}),Qg.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Ba.dataOrder,axisWorldTranslation:Oh(this.oi),normalSource:void 0})),geometry:ny(this.XB,1),solidLine:r,fillStyleSolid:n}:void 0,m.wireframe?this.xU=this.xU||this.MU():this.xU&&(this.XB.PR(this.xU.wireframeCoordinatesBuffer),this.xU=void 0)),m.mousePicking=A?this.BV.mousePicking||{shader:this.XB.SE(Qg["2D"],Qg.MousePicking(),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}))}:void 0,this.BV=m,void 0===this.rU&&a&&"value"===a.lookUpProperty&&a.lut.percentageValues){let t=ps,i=ms;this.mU.gridTiles.forEach((s=>{const e=this.nU(s.tileData);for(let s=0;s<e.length;s+=1){const h=e[s];h<t&&(t=h),h>i&&(i=h)}})),this.rU={min:t,max:i}}return this.pu=!1,this.Z$.length=0,this.dl(i),this.pU=e,this.U$.o=!1,this.Y$.o=!1,this}SU(){const t=this.q$.gridTiles.map((t=>{const i=pc(this.XB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i,tileData:t}})),i=this.q$.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.XB.pR(new Float32Array(16)),e=this.XB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}MU(){const t=this.Ba.primaryDimensionVectorsCount+1+this.Ba.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.Ba.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.Ba.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.Ba.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.Ba.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.XB.pR(i),wireframeSegmentsLength:t}}np(t,i){super.np(t,i);const s=this.Ba,e=u({x:Math.min(this.Yt.x,this.Yt.x+s.columns*this.H$.x),y:Math.min(this.Yt.y,this.Yt.y+s.rows*this.H$.y)},{x:Math.max(this.Yt.x,this.Yt.x+s.columns*this.H$.x),y:Math.max(this.Yt.y,this.Yt.y+s.rows*this.H$.y)}),h=new Map;return this.q$.gridTiles.forEach((t=>{const i="columns"===this.Ba.dataOrder?{x:this.Yt.x+this.H$.x*t.iFirstVector.primary,y:this.Yt.y+this.H$.y*t.iFirstVector.secondary}:{x:this.Yt.x+this.H$.x*t.iFirstVector.secondary,y:this.Yt.y+this.H$.y*t.iFirstVector.primary},s="columns"===this.Ba.dataOrder?{x:this.H$.x*t.sizeHeatmapDataVectors.primary,y:this.H$.y*t.sizeHeatmapDataVectors.secondary}:{x:this.H$.x*t.sizeHeatmapDataVectors.secondary,y:this.H$.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.Ba.dataOrder?{x:this.Yt.x+this.H$.x*t.iFirstUniqueVector.primary,y:this.Yt.y+this.H$.y*t.iFirstUniqueVector.secondary}:{x:this.Yt.x+this.H$.x*t.iFirstUniqueVector.secondary,y:this.Yt.y+this.H$.y*t.iFirstUniqueVector.primary},r="columns"===this.Ba.dataOrder?{x:this.H$.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.H$.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.H$.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.H$.y*t.sizeUniqueHeatmapDataVectors.primary};h.set(t,{startLocationAxis:i,sizeAxis:s,startRenderLocationAxis:e,renderSizeAxis:r})})),this.gU={boundaries:e,tilesInfo:h},this}Mc(t,i){var s,e;const h=this.mU,r=this.gU;if(this.Y$.C()&&"bilinear"===this.U$.C())return ti.console.warn("LightningChart JS error | heatmap has both bilinear interpolation and aggregation enabled at same time. Disable one of them"),{idCount:0};const n=1===t?null===(s=this.BV.mousePicking)||void 0===s?void 0:s.shader:null===(e=this.BV.tile)||void 0===e?void 0:e.shader;if(this.BV.tile&&n&&h&&r){const s=n,e=this.BV.tile,o={x:(r.boundaries.max.x-r.boundaries.min.x)*Math.sign(this.H$.x),y:(r.boundaries.max.y-r.boundaries.min.y)*Math.sign(this.H$.y)},a={x:o.x/this.Ba.columns,y:o.y/this.Ba.rows},l=this.oi.ri(),u={x:a.x/l.x,y:a.y/l.y};this.XB.Qc(s).SR(s,((s,n,o,a)=>{let l=!1;if(!this.XB.KO(o,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:"solid"===e.renderMode&&e.fillStyleSolid}))return!1;if("solid"===e.renderMode||1===t){const t=Ti([{x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.H$.x*this.Ba.columns,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.H$.y*this.Ba.rows},{x:this.Yt.x+this.H$.x*this.Ba.columns,y:this.Yt.y+this.H$.y*this.Ba.rows}],this.oi.Ot());this.XB.KR(h.rectangleLocationsBuffer,0,t),this.XB.EO(o,h.rectangleLocationsBuffer,this.oi.Ot(),void 0).Vk(this.XB.gl.TRIANGLE_STRIP,4),l=!0}else if("paletted"===e.renderMode){if(this.XB.ZO(o,e.fillStylePaletted.lut,this.rU),this.Y$.C()){const t=u.x<1?Math.max(Math.ceil(.5/u.x),1):0,i=u.y<1?Math.max(Math.ceil(.5/u.y),1):0;this.XB.xR(s("uAggregationWindowSize"),[t,i])}c=t=>{this.XB.xR(s("uTileDimensions"),["columns"===this.Ba.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Ba.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,i)=>{const e=r.tilesInfo.get(t.tileData);if(!e)return;let n;const a=this.XB.hR();if("bilinear"===this.U$.C()){const t=(this.oi.x.Bt(e.startLocationAxis.x)+u.x/2)*a,i=(this.oi.y.Bt(e.startLocationAxis.y)+u.y/2)*a;n=[t,i,(this.oi.x.Bt(e.startLocationAxis.x+e.sizeAxis.x)-u.x/2)*a-t,(this.oi.y.Bt(e.startLocationAxis.y+e.sizeAxis.y)-u.y/2)*a-i]}else{const t=this.oi.x.Bt(e.startLocationAxis.x)*a,i=this.oi.y.Bt(e.startLocationAxis.y)*a;n=[t,i,this.oi.x.Bt(e.startLocationAxis.x+e.sizeAxis.x)*a-t,this.oi.y.Bt(e.startLocationAxis.y+e.sizeAxis.y)*a-i]}const c=Ti([{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y},{x:e.startRenderLocationAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y},{x:e.startRenderLocationAxis.x+e.renderSizeAxis.x,y:e.startRenderLocationAxis.y+e.renderSizeAxis.y}],this.oi.Ot());this.XB.KR(h.rectangleLocationsBuffer,0,c),this.XB.IR(s("uTileBounds"),n).MR(s("uTileIntensityValues"),t.intensityDataTexture,1).EO(o,h.rectangleLocationsBuffer,this.oi.Ot(),void 0).Vk(this.XB.gl.TRIANGLE_STRIP,4),l=!0},h.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))}))}var c,d;return 1===t&&this.XB.$O(o,1),l}))}const o=this.xU,a=this.BV.wireframe,l=1===t||null==a?void 0:a.shader;if(o&&a&&l&&"primitive"===a.renderMode){const{fillStyleSolid:i}=a;this.XB.Qc(l).SR(l,((s,e,h)=>((this.oi instanceof J||this.oi instanceof Rh)&&this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()),this.XB.wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0).$I(s("uColor"),i.getColor()).bR(o.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).xR(s("uScaling"),[this.H$.x,this.H$.y]).xR(s("uTranslationAxis"),[this.Yt.x,this.Yt.y]).Vk(this.XB.gl.LINES,2*o.wireframeSegmentsLength),!0)))}else if(o&&a&&l&&"triangulated"===a.renderMode){const{geometry:i,solidLine:s,fillStyleSolid:e}=a;this.XB.Qc(l).SR(l,((h,r,n)=>((this.oi instanceof J||this.oi instanceof Rh)&&this.XB.xR(h("uScale"),this.bD._R()).xR(h("uDisp"),this.bD.kR()),this.XB.wR(h("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(h("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(h("uRenderEffectMask"),2===t?1:0).$I(h("uColor"),e.getColor()).wR(h("uThicknessPixels"),s.getThickness()).xR(h("uRatioPxClip"),[2/this.gi._t().x,2/this.gi._t().y]).bR(o.wireframeCoordinatesBuffer,1,{location:r("aLocationA"),size:2},{location:r("aLocationB"),size:2}).xR(h("uScaling"),[this.H$.x,this.H$.y]).xR(h("uTranslationAxis"),[this.Yt.x,this.Yt.y]),i.Qc(n,!1).Vk(o.wireframeSegmentsLength),!0)))}if(0===t){const i=this.hU()&&this.sU,s=this.XB,e=this.oi.x.Ut(),h=this.oi.x.Gt(),r=this.oi.y.Ut(),n=this.oi.y.Gt(),o=(t,i,s)=>{const o=i.position;return e<o.x&&o.x<h&&r<o.y&&o.y<n&&(s.add().ih(o).Kr(i.shadow).qr(i.text).Cr(i.angle).kr(i.font).Ke(i.fill).Vr().Mc(t,0),!0)},a=this.eU.zA();i&&(((t,i)=>{if(void 0===i)return;const s=t.gl;t.FR(!0),s.clearStencil(1),s.clear(s.STENCIL_BUFFER_BIT),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.REPLACE),s.stencilMask(255),s.colorMask(!1,!1,!1,!1),i(),s.colorMask(!0,!0,!0,!0)})(s,(()=>{this.sU.forEach((t=>{o(1,t,a)}))})),s.gl.stencilFunc(s.gl.EQUAL,1,255),s.gl.stencilOp(s.gl.KEEP,s.gl.KEEP,s.gl.KEEP),s.FR(!0));const l=this.iU.zA();if(l){const i=l.add();this.tU.forEach((s=>{i.Dd(s.points,{x:"xValues",y:"yValues"}),i.fh(s.lineStyle),i.Vr(),i.Mc(t,0)}))}l.finishPlot(),i&&s.FR(!1),this.sU&&this.sU.forEach((i=>{o(t,i,a)})),a.finishPlot()}return{idCount:1}}_c(t,i,s,e,h){return{}}fp(t){return 0===t.lengthPrimary||0===t.lengthSecondary||(this.Z$.push(t),yc(this.q$.gridTiles,t,(t=>(t.hasIntensityData=!0,this.nU(t))),((t,i)=>{t.hasIntensityData=!0,t.intensityData=i})),this.rU=void 0),this}zi(){return this.J$&&(this.q$.gridTiles.forEach((t=>{t.intensityData&&t.intensityData.fill(0),t.hasIntensityData=!1})),this.pu=!0,this.J$=!1,this.rU=void 0),this}dU(t=!1){return t&&this.iU.$A(),this.tU.length=0,this}fU(t=!1){return t&&(this.eU.$A(),this.Q$&&(this.Q$.dispose(),this.Q$=void 0)),this.sU.length=0,this}dispose(){super.dispose();const t=this.mU;t&&(t.gridTiles.forEach((t=>{this.XB.QB(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((()=>{})),t.gridTileSizes.length=0,this.XB.PR(t.rectangleLocationsBuffer)),this.mU=void 0;const i=this.xU;return i&&this.XB.PR(i.wireframeCoordinatesBuffer),this.xU=void 0,this.dU(!0),this.fU(!0),this.BV={},this}wc(){return this.dispose(),this}yd(t){const i=t,s="columns"===this.Ba.dataOrder?i.x:i.y,e="columns"===this.Ba.dataOrder?i.y:i.x,h="columns"===this.Ba.dataOrder?this.Yt.x:this.Yt.y,r="columns"===this.Ba.dataOrder?this.Yt.y:this.Yt.x;let n=(s-h)/("columns"===this.Ba.dataOrder?this.H$.x:this.H$.y),o=(e-r)/("columns"===this.Ba.dataOrder?this.H$.y:this.H$.x);n=Math.floor(oi(n,0,this.Ba.primaryDimensionVectorsCount-1)),o=Math.floor(oi(o,0,this.Ba.secondaryDimensionVectorsCount-1));const a=this.vU(n,o),l="columns"===this.Ba.dataOrder?{x:this.Yt.x+(n+.5)*this.H$.x,y:this.Yt.y+(o+.5)*this.H$.y}:{x:this.Yt.x+(o+.5)*this.H$.x,y:this.Yt.y+(n+.5)*this.H$.y},u="columns"===this.Ba.dataOrder?n:o,c="columns"===this.Ba.dataOrder?o:n;return{x:l.x,y:l.y,column:u,row:c,cellValue:a}}vx(t){const i=this.gU;if(!i||t.x<i.boundaries.min.x||t.x>i.boundaries.max.x||t.y<i.boundaries.min.y||t.y>i.boundaries.max.y)return;const s=t,e="columns"===this.Ba.dataOrder?s.x:s.y,h="columns"===this.Ba.dataOrder?s.y:s.x,r="columns"===this.Ba.dataOrder?this.Yt.x:this.Yt.y,n="columns"===this.Ba.dataOrder?this.Yt.y:this.Yt.x,o="columns"===this.Ba.dataOrder?this.H$.x:this.H$.y,a="columns"===this.Ba.dataOrder?this.H$.y:this.H$.x,l=oi((e-r)/o-.5,0,this.Ba.primaryDimensionVectorsCount-1),u=oi((h-n)/a-.5,0,this.Ba.secondaryDimensionVectorsCount-1),c=oi(Math.ceil(l)-1,0,this.Ba.primaryDimensionVectorsCount-1),d=oi(Math.ceil(u)-1,0,this.Ba.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.vU(c,d)},A={point:{x:c,y:d+1},value:this.vU(c,d+1)},g={point:{x:c+1,y:d},value:this.vU(c+1,d)},v={point:{x:c+1,y:d+1},value:this.vU(c+1,d+1)},y=ih({x:l,y:u},f,A,g,v);if(void 0===y)return;const p=oi(Math.floor(l+.5),0,this.Ba.primaryDimensionVectorsCount-1),m=oi(Math.floor(u+.5),0,this.Ba.secondaryDimensionVectorsCount-1),S="columns"===this.Ba.dataOrder?p:m,b="columns"===this.Ba.dataOrder?m:p,x=t;return{x:x.x,y:x.y,column:S,row:b,cellValue:y}}vU(t,i){for(let s=0;s<this.q$.gridTiles.length;s+=1){const e=this.q$.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){if(!e.intensityData)return 0;const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}Hi(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.boundaries.max.x)||0}ji(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.boundaries.min.x)||0}Xi(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.boundaries.max.y)||0}Wi(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.boundaries.min.y)||0}lu(){return 0}uu(){return 0}yx(){const t=[];return this.q$.gridTiles.forEach((i=>{if(!i.hasIntensityData||!i.intensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class Ny extends En{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Yt={x:0,y:0},this.H$={x:1,y:1},this.Y$=d(void 0),this.sp=kn.lineStyle,this.Ac=d(void 0),this.U$=d("bilinear"),this.engine=t,this.Ba=r}np(t,i){return this.Yt=t,this.H$=i,this}op(){return{start:this.Yt,step:this.H$}}mx(t){return this.Y$._(t),this}Sx(){return this.Y$.C()}ep(t){return this.sp="function"==typeof t?t(this.sp):t,this}up(){return this.sp}Mx(t){return this.Ac._(t),this}wU(){return this.Ac.C()}cp(t){return this.U$._(t),this}dp(){return this.U$.C()}}class Gy extends Ny{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this._U=0,this.wx=[],this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i,this.ru="columns"===r.scrollDimension?u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+r.resolution*this.H$.y}):u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+r.resolution*this.H$.x,y:this.Yt.y}),this.kU={dataPerSegment:2048}}Vr(){this.DN||(this.pi.push({type:"DataPattern",args:{pattern:"columns"===this.Ba.scrollDimension?this.H$.x>0?"ProgressiveX":"RegressiveX":this.H$.y>0?"ProgressiveY":"RegressiveY"}}),this.DN=new yy(this.oi,this));const t=this.DN._N(this.wx,this.Ac.C());if(t>0){for(let i=0;i<t;i+=1)this.wx[0].shape.dispose().wc(),this.wx.shift();"columns"===this.Ba.scrollDimension?this.ru.min.x=this.wx.length>0?this.wx[0].boundaries.min.x:ps:this.ru.min.y=this.wx.length>0?this.wx[0].boundaries.min.y:ps}this.wx.forEach((t=>t.shape.mx(this.Y$.C()).Vr()));const i=this.wx.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,li(null===(s=i.shape.rU)||void 0===s?void 0:s.min,ps)),t.max=Math.max(t.max,li(null===(e=i.shape.rU)||void 0===e?void 0:e.max,ms)),t}),{min:ps,max:ms});return this.wx.forEach((t=>{t.shape.rU=i})),this.Ac.o=!1,this}Mc(t,i){let s=0;return this.wx.forEach((e=>{const{idCount:h}=e.shape.Mc(t,i+s);void 0!==h&&(s+=h)})),{idCount:s}}wi(){if(0!==this.wx.length)return this.wx.reduce(((t,i)=>{const s=i.shape.wi();return s?{min:Math.min(s.min,t.min),max:Math.max(s.max,t.max)}:t}),{min:ps,max:ms})}_c(t,i,s,e,h){return{}}pp(t){if(0===t.length)return this;let i=0;const s=this.kU.dataPerSegment,e=t.length;do{let h=this.wx[this.wx.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.Ba.scrollDimension?s:this.Ba.resolution,rows:"rows"===this.Ba.scrollDimension?s:this.Ba.resolution,heatmapDataType:this.Ba.heatmapDataType,dataOrder:this.Ba.scrollDimension};let i="columns"===this.Ba.scrollDimension?{x:this.Yt.x+this.H$.x*this._U,y:this.Yt.y}:{x:this.Yt.x,y:this.Yt.y+this.H$.y*this._U};this.wx.length>0&&(i="columns"===this.Ba.scrollDimension?{x:i.x-1*this.H$.x,y:i.y}:{x:i.x,y:i.y-1*this.H$.y},n=!0);const e=new Vy(this.Sz,this.bz,this.oi,ri,[],t).cp(this.U$.C()).Ke(this.Xe).ep(this.sp).np(i,this.H$);h={shape:e,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this._U,hasJoint:!1,boundaries:{min:{x:e.ji(),y:e.Wi()},max:{x:e.Hi(),y:e.Xi()}}},this.wx.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),l=t.slice(i,i+a),u={type:"intensity",values:l,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Ba.resolution};n&&(u.values.unshift(this.CU),u.lengthPrimary+=1,h.hasJoint=!0),h.shape.fp(u),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),this.CU=l[l.length-1],this._U+=a,i+=a}while(i<e);return this.ru.max="columns"===this.Ba.scrollDimension?{...this.ru.max,x:this.Yt.x+this._U*this.H$.x}:{...this.ru.max,y:this.Yt.y+this._U*this.H$.y},this}fp(t,i){if(i.length<=0)return this;const s=t,e=t+i.length-1,h=i[0].length;if(h<=0)return this;this.wx.forEach((t=>{const r=t.dataStartIndex,n=t.dataStartIndex+t.existingDataPointsCount-1;if(e<r||s>n)return;const o=Math.max(s,r),a=Math.min(e,n),l=a-o+1,u=i.slice(o-s,a-s+1),c=s-r+(t.hasJoint?1:0),d={type:"intensity",startSecondary:0,lengthSecondary:h,startPrimary:c,lengthPrimary:l,values:u};t.shape.fp(d)}));const r=this._U-1;if(e>r){const t=e-r,s=i.slice(-t);if(s.length<t){const i=this.CU||new Array(h).fill(0);for(let e=s.length;e<t;e+=1)s.unshift(i)}this.pp(s)}return this}mp(){return this._U}zi(){return this.wx.forEach((t=>{t.shape.dispose().wc()})),this.wx.length=0,this.ru="columns"===this.Ba.scrollDimension?u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.Ba.resolution*this.H$.y}):u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.Ba.resolution*this.H$.x,y:this.Yt.y}),this._U=0,this.CU=void 0,this}np(t,i){return super.np(t,i),this.wx.forEach(((s,e)=>{const h={x:t.x+("columns"===this.Ba.scrollDimension?s.dataStartIndex*i.x:0),y:t.y+("rows"===this.Ba.scrollDimension?s.dataStartIndex*i.y:0)};s.shape.np(h,i),s.boundaries={min:{x:s.shape.ji(),y:s.shape.Wi()},max:{x:s.shape.Hi(),y:s.shape.Xi()}}})),this.wx.length>0?this.ru=Os(...this.wx.map((t=>t.boundaries))):this.ru="columns"===this.Ba.scrollDimension?u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.Ba.resolution*this.H$.y}):u({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.Ba.resolution*this.H$.x,y:this.Yt.y}),this}Ke(t){return super.Ke(t),this.wx.forEach((t=>t.shape.Ke(this.Xe))),this}ep(t){return super.ep(t),this.wx.forEach((t=>t.shape.ep(this.sp))),this}cp(t){return super.cp(t),this.wx.forEach((i=>i.shape.cp(t))),this}dispose(){return super.dispose(),this.wx.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.wx.forEach((i=>i.shape.setVisible(t))),this}wc(){return this.wx.forEach((t=>t.shape.wc())),this}yd(t){const i=tt(t,this.oi,this.engine.oi),s=this.wx.reduce(((s,e)=>{const h=e.shape.yd(t);if(h){const t=Ls(tt(h,this.oi,this.engine.oi),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Ba.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Ba.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Ba.scrollDimension&&t>=this._U||"rows"===this.Ba.scrollDimension&&i>=this._U)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}vx(t){const i=tt(t,this.oi,this.engine.oi),s=this.wx.reduce(((s,e)=>{const h=e.shape.vx(t);if(h){const t=Ls(tt(h,this.oi,this.engine.oi),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.Ba.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.Ba.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.Ba.scrollDimension&&t>=this._U||"rows"===this.Ba.scrollDimension&&i>=this._U)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return 0}uu(){return 0}Fi(t){return super.Fi(t),this.wx.forEach((i=>i.shape.Fi(t))),this}}class $y extends En{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.U$=d("bilinear"),this.sp=kn.lineStyle,this.Ba=r}cp(t){return this.U$._(t),this}dp(){return this.U$.C()}ep(t){return this.sp="function"==typeof t?t(this.sp):t,this}up(){return this.sp}}class Uy extends $y{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.bD=new Uv,this.BV={},this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStylePaletted:()=>Pe(this.Xe)&&this.Xe}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.bz=i,this.Ax=new Vy(this.Sz,t.TU,t.oi,ri,[],{columns:r.sectors,rows:r.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===r.dataOrder?"rows":"columns",ux:this.XB.JB}).ep($t);const n=2*Math.PI/360,o=new Float32Array(724);let a=0;o[a+0]=0,o[a+1]=0,a+=2;for(let t=0;t<=360;t+=1){const i=t*n,s=Math.cos(i),e=Math.sin(i);o[a+0]=s,o[a+1]=e,a+=2}this.FU={vertexBuffer:this.XB.pR(o),drawMode:this.XB.gl.TRIANGLE_FAN,drawLength:362}}Vr(){const t=this.al(),i=this.Xe,s=this.Tz.fillStyleSolid(t),e=this.Tz.fillStylePaletted(t),h=s||e,r=this.U$.C(),n=this.U$.o,o=this.li.C(),a=this.li.o;return this.bD.TR(this.oi),this.Ax.Vr(),this.Ax.mU?((t||n)&&(this.BV.fill=h?{shader:this.XB.SE(Qg["2D"],Qg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Oh(this.oi),normalSource:void 0}),e&&Qg.PolarHeatmap({interpolation:"bilinear"===r&&"bilinear",intensityTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Ba.dataOrder,lut:e.lut}),s&&Qg.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:e,fillStyleSolid:s}:void 0),a&&(this.BV.mousePicking=o?{shader:this.XB.SE(Qg["2D"],Qg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Oh(this.oi),normalSource:void 0}),Qg.MousePicking())}:void 0),this.dl(i),this.U$.o=!1,this.li.o=!1,this):this}Mc(t,i){var s;const{vertexBuffer:e,drawLength:h,drawMode:r}=this.FU,n=this.Ax.mU;if(!this.BV.fill||!n)return{};const{fillStylePaletted:o,fillStyleSolid:a}=this.BV.fill,l=1===t?null===(s=this.BV.mousePicking)||void 0===s?void 0:s.shader:this.BV.fill.shader;if(!l)return{};const u=this.oi.ae(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.Ba.amplitudeStart,this.Ba.amplitudeStart+(this.Ba.annuli-1)*this.Ba.amplitudeStep),A=Math.max(this.Ba.amplitudeStart,this.Ba.amplitudeStart+(this.Ba.annuli-1)*this.Ba.amplitudeStep);let g;return g=u.end>u.start?Math.min(A,d)-u.start:Math.max(f,c)-u.start,this.XB.Qc(l).SR(l,((s,l,u,c)=>{if(this.XB.xR(s("uScale"),this.bD._R()).xR(s("uDisp"),this.bD.kR()).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0).xR(c("uViewportSize"),[this.Sz._t().x*this.XB.hR()/(1===t?this.gi.Ba.Ea:1),this.Sz._t().y*this.XB.hR()/(1===t?this.gi.Ba.Ea:1)]).xR(s("uScaling"),[g,g]).xR(s("uTranslationAxis"),[0,0]).bR(e,void 0,{location:l("aPos"),size:2}).wR(c("uAngleOffset"),this.oi.fe()%(2*Math.PI)).wR(c("uAngleDirection"),this.oi.ce()?1:-1).wR(c("uSectors"),this.Ba.sectors).wR(c("uAnnuli"),this.Ba.annuli),1===t)this.XB.XR(s("uFirstId"),i).$O(u,1);else{if(o){const t=this.Ax.rU;this.XB.wR(s("uAmplitudeStart"),this.Ba.amplitudeStart).wR(s("uAmplitudeStep"),this.Ba.amplitudeStep).wR(s("uAmplitudeAxisStart"),this.oi.ae().start).wR(s("uAmplitudeAxisEnd"),this.oi.ae().end).ZO(u,o.lut,t).MR(s("uTileIntensityValues"),n.gridTiles[0].intensityDataTexture,0)}a&&this.XB.$I(s("uColor"),a.getColor())}return this.XB.Vk(r,h),!0})),{idCount:1}}wi(){return this.Ax.wi()}_c(t,i,s,e,h){return{}}fp(t){return this.Ax.fp(t),this}zi(){return this.Ax.zi(),this}dispose(){return super.dispose(),this.Ax.dispose(),this.BV={},this.XB.PR(this.FU.vertexBuffer),this}wc(){return this.dispose(),this}Ke(t){return super.Ke(t),this.Ax.Ke(this.Xe),this}yd(t){const i=this.Ba.amplitudeStart,s=this.Ba.amplitudeStart+(this.Ba.annuli-1)*this.Ba.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)&&(t.angle=oi(t.angle,0,360),t.amplitude=oi(t.amplitude,h,h));let r=Math.round((t.angle-0)/360*this.Ba.sectors);r>=this.Ba.sectors&&(r=0);const n=Math.round((t.amplitude-i)/(s-i)*(this.Ba.annuli-1));return{iAnnulus:n,iSector:r,cellValue:this.vU(n,r),angle:r*(360/this.Ba.sectors),amplitude:i+n*(s-i)/(this.Ba.annuli-1)}}vx(t){const i=this.Ba.amplitudeStart,s=this.Ba.amplitudeStart+(this.Ba.annuli-1)*this.Ba.amplitudeStep,e=Math.min(i,s),h=Math.max(i,s);(t.angle<0||t.angle>360||t.amplitude<e||t.amplitude>h)&&(t.angle=oi(t.angle,0,360),t.amplitude=oi(t.amplitude,h,h));const r=(t.angle-0)/360*this.Ba.sectors,n=(t.amplitude-i)/(s-i)*(this.Ba.annuli-1),o=Math.floor(r),a=Math.floor(n),l={point:{x:a,y:o},value:this.vU(a,o)},u={point:{x:a,y:o+1},value:this.vU(a,o+1)},c={point:{x:a+1,y:o},value:this.vU(a+1,o)},d={point:{x:a+1,y:o+1},value:this.vU(a+1,o+1)},f=ih({x:n,y:r},l,u,c,d);if(void 0!==f)return{iAnnulus:a,iSector:o,cellValue:f,angle:t.angle,amplitude:t.amplitude}}vU(t,i){const s="annuli"===this.Ba.dataOrder?t:i,e="annuli"===this.Ba.dataOrder?i:t;for(let t=0;t<this.Ax.q$.gridTiles.length;t+=1){const i=this.Ax.q$.gridTiles[t];if(s>=i.iFirstVector.primary&&s<=i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1&&e>=i.iFirstVector.secondary&&e<=i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1){const t=s-i.iFirstVector.primary,h=e-i.iFirstVector.secondary,r=t*i.sizeHeatmapDataVectors.secondary+h;return i.intensityData?i.intensityData[r]:0}}return 0}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}lu(){return 0}uu(){return 0}}class Yy{constructor(t,i,s){this.Di=new Set,this.IU=t=>(this.Di.add(t),t),this.LU=t=>(this.Di.delete(t),t.wc(),this),this.gi=t,this.Un=i,this.PU=s}kB(t){this.Di.delete(t)&&this.Di.add(t)}N(){for(const t of this.Di)t.wc().dispose();this.gi.Ta(this.Un)}Ps(){return this.gi.Ps(),this}Ca(){return this.Un}}class jy extends Yy{constructor(){super(...arguments),this.BU=d(void 0),this.el=!1}Cm(t){return this.BU._(t),this}Kg(){return this.BU.C()}}class Hy extends Rn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.BV={fill:void 0,border:void 0},this.bD=new Uv,this.ru=Ss,this.DU=!1,this.EU=!1,this.RU=!1,this.OU=!1,this.Hd=[],this.zU=0,this.Tz=Vh({rectangleStyleSolid:()=>Ce(this.Xe)&&this.Xe,rectangleStyleImage:()=>Nt(this.Xe)&&this.Xe,rectangleStyleRadialGradient:()=>V(this.Xe)&&this.Xe,rectangleStyleLinearGradient:()=>$(this.Xe)&&this.Xe,rectangleStylePaletted:()=>Pe(this.Xe)&&this.Xe,rectangleStyleIndividual:()=>Fe(this.Xe)&&this.Xe,lineStyleSolid:()=>_h(this.Ze)&&this.Ze,lineStyleDashed:()=>Fh(this.Ze)&&this.Ze,lineStyleFilled:()=>{const t=this.Ze&&this.Ze.getFillStyle();return Ce(t)&&t}}),this.Sz=t,this.bz=i,this.XB=t.xz(),this.LV=this.XB.pO}jo(){const t={Ts:i=>this.UV(t,i),Fi:i=>this.YV(t,i),xd:(i,s,e,h)=>this.VU(t,i,s,e,h),bd:i=>this.NU(t,i),_S:i=>this.WN(t,i),$I:i=>this.HV(t,i),GU:0,$U:0,UU:0,YU:0,S:void 0,XN:void 0,Ai:0,jA:!0,ZN:this.Hd.length,jU:void 0};return this.Hd.push(t),t}zi(){return this.Hd.length=0,this.DU=!0,this.gi.ki(this),this}Bv(){return this.Hd}Xd(t){const i=this.Hd.indexOf(t);i>=0&&(this.Hd.splice(i,1),this.DU=!0,this.gi.ki(this,t))}UV(t,i){return t.jA=i,this.DU=!0,t.jA||this.gi.ki(this,t),t}YV(t,i){return t.Ai=i,this.OU=!0,t}VU(t,i,s,e,h){return t.GU=i,t.$U=s,t.UU=e,t.YU=h,this.DU=!0,t}NU(t,i){return t.jU=!0===(null==i?void 0:i.c_x1_y1)||!0===(null==i?void 0:i.c_x1_y2)||(null==i?void 0:i.c_x2_y1)||!0===(null==i?void 0:i.c_x2_y2)?i:void 0,this.DU=!0,t}WN(t,i){return t.S=i,this.EU=!0,t}HV(t,i){return t.XN=null==i?void 0:i.toUint32(),this.RU=!0,t}Vr(){const t=this.li.C(),i=this.li.o,s=this.al(),e=this.OU;let h=this.DU;const r=this.EU,n=this.RU,o=this.Ze,a=this.fl(),l=this.Hd.filter((t=>t.jA)),u=void 0!==this.Hd.find((t=>t.jU)),c=this.oi.si();u&&c&&(h=!0);const d=this.Tz.rectangleStyleSolid(s),f=this.Tz.rectangleStylePaletted(s),A=this.Tz.rectangleStyleIndividual(s),g=this.Tz.rectangleStyleRadialGradient(s),v=this.Tz.rectangleStyleLinearGradient(s),y=this.Tz.rectangleStyleImage(s),p=d||f||v||g||y||A,m=this.Tz.lineStyleSolid(a),S=this.Tz.lineStyleDashed(s),b=m||S,x=this.Tz.lineStyleFilled(a),M=x,w=b&&Math.max(b.getThickness(),0);if(this.bD.TR(this.oi),h&&(this.ru=Os(...l.map((t=>Es([{x:t.GU,y:t.$U},{x:t.UU,y:t.YU}]))))),h||a&&S){const t=[],i=[],s=[];let e=0,h=0;const r=[];let n=0;if(u){const o=this.oi instanceof J?this.oi.ri():{x:1e-4,y:1e-4},a=5;this.zU=4+4*a;const u=Math.sign(this.oi.x.$-this.oi.x.G),c=Math.sign(this.oi.y.$-this.oi.y.G);l.forEach((l=>{var d,f,A,g,v;const y=Math.sign(l.UU-l.GU),p=Math.sign(l.YU-l.$U),m={x:y===u?l.GU:l.UU,y:p===c?l.$U:l.YU},S={x:y===u?l.UU:l.GU,y:p===c?l.YU:l.$U},b=e,x=h,M=Math.abs((S.x-m.x)/o.x),w=Math.abs((S.y-m.y)/o.y),_=l.jU&&!0!==l.jU.skipTooSmallCheck&&Math.min(M,w)<2*l.jU.extent;t[b+0]=(l.GU+l.UU)/2,i[b+0]=(l.$U+l.YU)/2,s[x+0]=0,s[x+1]=0,t[b+1]=Number.NaN,i[b+1]=Number.NaN,s[x+2]=0,s[x+3]=0,e+=2,h+=4;for(let o=0;o<=3;o+=1){const u=0===o||3===o?S.x:m.x,c=0===o||1===o?S.y:m.y,y=u===l.GU&&c===l.$U?null===(d=l.jU)||void 0===d?void 0:d.c_x1_y1:u===l.UU&&c===l.$U?null===(f=l.jU)||void 0===f?void 0:f.c_x2_y1:u===l.GU&&c===l.YU?null===(A=l.jU)||void 0===A?void 0:A.c_x1_y2:null===(g=l.jU)||void 0===g?void 0:g.c_x2_y2,p=null===(v=l.jU)||void 0===v?void 0:v.extent;if(y&&p&&!_){const l=.5*o*Math.PI;for(let d=0;d<a;d+=1){const f=l+d/(a-1)*.5*Math.PI;let A,g;0===o?(A=Math.cos(f)-1,g=-1+Math.sin(f)):1===o?(A=1+Math.cos(f),g=Math.sin(f)-1):2===o?(A=1+Math.cos(f),g=1+Math.sin(f)):(A=-1+Math.cos(f),g=1+Math.sin(f)),t[e+0]=u,i[e+0]=c,s[h+0]=A*p,s[h+1]=g*p,e>1&&(r[n+0]=b,r[n+1]=e-1,r[n+2]=e,n+=3),e+=1,h+=2}}else for(let o=0;o<a;o+=1)t[e+0]=u,i[e+0]=c,s[h+0]=0,s[h+1]=0,r[n+0]=b,r[n+1]=e-1,r[n+2]=e,n+=3,e+=1,h+=2}r[n+0]=b,r[n+1]=b+2,r[n+2]=e-1,n+=3,t[e+0]=t[b+2],i[e+0]=i[b+2],s[h+0]=s[x+4],s[h+1]=s[x+5],t[e+1]=Number.NaN,i[e+1]=Number.NaN,s[h+2]=0,s[h+3]=0,e+=2,h+=4}))}else this.zU=6,l.forEach((o=>{t[e+0]=o.GU,i[e+0]=o.$U,s[h+0]=0,s[h+1]=0,t[e+1]=o.UU,i[e+1]=o.$U,s[h+2]=0,s[h+3]=0,t[e+2]=o.UU,i[e+2]=o.YU,s[h+4]=0,s[h+5]=0,t[e+3]=o.GU,i[e+3]=o.YU,s[h+6]=0,s[h+7]=0,t[e+4]=o.GU,i[e+4]=o.$U,s[h+8]=0,s[h+9]=0,t[e+5]=Number.NaN,i[e+5]=Number.NaN,s[h+10]=0,s[h+11]=0,r[n+0]=e+0,r[n+1]=e+1,r[n+2]=e+3,r[n+3]=e+1,r[n+4]=e+3,r[n+5]=e+2,e+=6,h+=12,n+=6}));if(this.HU=this.XB.pR(Ci(t,this.oi.Ot()),void 0,this.HU),this.WU=this.XB.pR(Ci(i,this.oi.Ot()),void 0,this.WU),this.XU=this.XB.pR(s,void 0,this.XU),this.ZU=this.XB.iO(new Uint32Array(r),this.ZU),this.JU=r.length,this.QU=e-1,S){const s=new Float32Array(2*t.length);let e=0,h=0,r=0,n=t[0],o=i[0];for(let a=0;a<t.length;a+=1){const l=t[a],u=i[a];Number.isNaN(l)||(h+=Math.abs(l-n),r+=Math.abs(u-o),n=l,o=u),s[e]=h,s[e+1]=r,e+=2}this.DV=this.XB.pR(s,!1,this.DV)}this.KU=[t,i]}if((s||a||i)&&(this.BV.fill=p?{shader:this.XB.SE(Qg["2D"],d&&Qg.Color({dataType:"uniform"}),v&&Qg.Color({dataType:["gradient",v]}),g&&Qg.Color({dataType:["gradient",g]}),f&&Qg.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),A&&Qg.Color({dataType:"attribute"}),y&&Qg.Color({dataType:["image",y]}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Qg.AttributeHighlight),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Qg.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:v,fillStyleRadialGradient:g,fillStylePaletted:f,fillStyleImage:y,fillStyleIndividual:A}:void 0,this.BV.border=b&&M&&"number"==typeof w&&0!==w?{shader:this.XB.SE(Qg["2D"],Qg.Color({dataType:"uniform"}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),this.LV?Qg.AliasedEdge:void 0,S&&Qg.StippleTextureInstanced,Qg.AttributeHighlight),geometry:ny(this.XB,w),mousePicking:t?{shader:this.XB.SE(Qg["2D"],Qg.MousePicking({useAttribute:!0}),Qg.LineInstanced2D({axisWorldTranslation:Oh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),S&&Qg.StippleTextureInstanced,Qg.AttributeHighlight)}:void 0,fillStyleSolid:x,lineStyleDashed:S,thickness:w}:void 0),e||h){const t=new Float32Array(l.length*this.zU);l.forEach(((i,s)=>{for(let e=0;e<this.zU;e+=1)t[s*this.zU+e]=i.Ai})),this.qU=this.XB.pR(t,!0,this.qU)}if(t){if(h||i){const t=new Float32Array(l.length*this.zU);l.forEach(((i,s)=>{for(let e=0;e<this.zU;e+=1)t[s*this.zU+e]=i.ZN})),this.tY=this.XB.pR(t,!1,this.tY)}}else this.tY&&(this.XB.PR(this.tY),this.tY=void 0);if(r||h&&f&&"value"===f.getLookUpProperty()){const t=new Float32Array(l.length*this.zU),i={min:ps,max:ms};l.forEach(((s,e)=>{const h=void 0!==s.S?s.S:Yt;for(let i=0;i<this.zU;i+=1)t[e*this.zU+i]=h;void 0!==s.S&&(i.min=Math.min(i.min,h),i.max=Math.max(i.max,h))})),this.iG=i,this.iY=this.XB.pR(t,!1,this.iY)}if(n||h&&A){const t=new Uint32Array(l.length*this.zU),i=A?A.getFallbackColor().toUint32():C.toUint32();l.forEach(((s,e)=>{const h=void 0!==s.XN?s.XN:i;for(let i=0;i<this.zU;i+=1)t[e*this.zU+i]=h})),this.sY=this.XB.pR(t,!1,this.sY,Uint32Array)}return g?this.Ez=Lv(this.fi||this.ru,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.XB.hR()):v?this.Rz=Pv(this.fi||this.ru,this.oi,v.getAngle(!0),this.XB.hR()):(this.Ez=void 0,this.Rz=void 0),S?this.EV=this.XB.jO(S.getPattern()):(this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.EV=void 0),this.hG=this.XB.JO(this,this.hG,y,void 0,h||this.oi.si(),((t,i,s)=>this.rG(t,i,s,l))),this.OU=!1,this.DU=!1,this.EU=!1,this.RU=!1,this.li.o=!1,this.dl(this.Xe),this.yl(o),this}Mc(t,i){var s,e;const{fill:h,border:r}=this.BV,n=this.HU,o=this.WU,a=this.XU,l=this.ZU,u=this.JU,c=this.QU,d=this.qU,f=this.tY;if(!(d&&n&&o&&a))return{};if(h&&l&&u){const e=1===t?null===(s=h.mousePicking)||void 0===s?void 0:s.shader:h.shader;e&&this.XB.Qc(e).SR(e,((s,e,r,c)=>!!this.XB.KO(r,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:h.fillStyleSolid,fillStyleLinearGradient:h.fillStyleLinearGradient,fillStyleRadialGradient:h.fillStyleRadialGradient,fillStylePaletted:h.fillStylePaletted,fillStyleImage:h.fillStyleImage,fillStyleIndividual:h.fillStyleIndividual,linearGradientInfo:this.Rz,radialGradientInfo:this.Ez,texturedFillGLInfo:this.hG,colorBuffer:this.sY,lookupValueBuffer:this.iY,lookupValueRange:this.iG,highlightBuffer:d,coordsX:n,coordsY:o,coordsHighPrecision:this.oi.Ot(),mousePickingOffsetBuffer:f})&&(this.XB.bR(a,void 0,{location:e("aGeoAmount"),size:2}).aO(l),this.XB.uO(u,this.XB.gl.TRIANGLES,void 0,this.XB.gl.UNSIGNED_INT),!0)))}if(r&&c){const{geometry:s,thickness:h,lineStyleDashed:l}=r,u=1===t?null===(e=r.mousePicking)||void 0===e?void 0:e.shader:r.shader;u&&this.XB.Qc(u).SR(u,((e,u,A,g)=>{if(!this.XB.KO(A,t,this,{uniforms:this.bD,idFirst:i,fillStyleSolid:r.fillStyleSolid,highlightBuffer:d,highlightAttribDivisor:1,mousePickingOffsetBuffer:f,mousePickingOffsetAttribDivisor:1}))return!1;if(l){if(!this.EV||!this.DV)return!1;oy.kV(this.XB,A,this.DV,u("aLengthSoFarA"),u("aLengthSoFarB"),2,2,0),this.XB.xR(e("uStippleCount"),[this.gi._t().x/this.EV.XO,this.gi._t().y/this.EV.XO]).wR(g("uStippleTextureWidthLimiter"),this.EV.WO/this.EV.XO).wR(e("uStippleScale"),l.getPatternScale()).MR(e("uStippleTexture"),this.EV.HO,1)}return ly(this.XB,A,this.oi.Ot(),n,"aLocation","X",1,!1,this.XB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),ly(this.XB,A,this.oi.Ot(),o,"aLocation","Y",1,!1,this.XB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),ly(this.XB,A,!1,a,"aGeo","",2,!1,this.XB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),oy.Mc(this.Sz,s,A,this.LV&&1!==t,1===t,h,c),!0}))}return{idCount:this.Hd.length}}rG(t,i,s,e){if(!this.KU)return new Float32Array;const h=tt({x:this.ru.min.x,y:this.ru.min.y},this.oi,this.gi.oi),r=tt({x:this.ru.max.x,y:this.ru.max.y},this.oi,this.gi.oi),n={x:Math.abs(h.x-r.x),y:Math.abs(h.y-r.y)},o=Rv(t,i,n.x,n.y,s),a=o[1],l=o[4],u=o[6],c=o[7],d=this.ru.max.x-this.ru.min.x,f=this.ru.max.y-this.ru.min.y,A=l-u,g=c-a,v=new Float32Array(2*this.KU[0].length);let y=0;for(let t=0;t<this.KU[0].length;t+=1){const i=this.KU[0][t],s=this.KU[1][t],e=u+A*((i-this.ru.min.x)/d),h=a+g*((s-this.ru.min.y)/f);v[y]=e,v[y+1]=h,y+=2}return v}_c(t,i,s,e,h){return{collectionMember:this.Hd.find((s=>i+s.ZN===t))}}wc(){return this.HU=this.XB.PR(this.HU),this.WU=this.XB.PR(this.WU),this.XU=this.XB.PR(this.XU),this.qU&&(this.XB.PR(this.qU),this.qU=void 0),this.tY&&(this.XB.PR(this.tY),this.tY=void 0),this.iY&&(this.XB.PR(this.iY),this.iY=void 0),this.sY&&(this.XB.PR(this.sY),this.sY=void 0),this.DV&&(this.XB.PR(this.DV),this.DV=void 0),this.ZU&&(this.XB.PR(this.ZU),this.ZU=void 0),this.BV={fill:void 0,border:void 0},this.hG=this.XB.QO(this,this.hG),this}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}lu(){return hs(this.Ze)}uu(){return hs(this.Ze)}}class Wy extends jy{constructor(t,i,s){super(t,i,s),this.Sz=t,this.gl=t.xz(),this.eY=this.Di}vR(t){const i=t instanceof Fn&&t;if(!i)return Ss;const s=i.ji(),e=i.Hi(),h=i.Wi(),r=i.Xi();if(s===ps||e===ms||h===ps||r===ms)return Ss;const n=i.lu(),o=i.uu(),a=In({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.oi),l={min:tt(a.min,i.oi,t.gi.oi),max:tt(a.max,i.oi,t.gi.oi)},u=this.BU.C();let c;if(u){if(c={min:{x:Math.min(l.min.x,u.x),y:Math.min(l.min.y,u.y)},max:{x:Math.max(l.max.x,u.x+u.width),y:Math.max(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Ss}else c=l;return c}Ah(t){return this.IU(new uy(this.Sz,this,t,this.LU,[]))}bA(t){return this.IU(new cy(this.Sz,this,t,this.LU,[]))}Nv(t,i,s){return this.IU(new py(this.Sz,this,t,this.LU,s,i))}Od(t){return this.IU(new Iy(this.Sz,this,t,this.LU))}wn(t,i){return this.gi.mc&&!1!==i?this.IU(this.gi.mc.wn(this.Sz,this,t,this.LU)):this.IU(new Ey(this.Sz,this,t,this.LU,[]))}Cc(t,i=$n.Simple){if(i===$n.Simple)return this.IU(new by(this.Sz,this,t,this.LU,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}Uv(t){return this.IU(new my(this.Sz,this,t,this.LU,[]))}pd(t){return this.IU(new Hy(this.Sz,this,t,this.LU,[]))}qe(t){return this.IU(new Sy(this.Sz,this,t,this.LU,[]))}Kx(t){return this.IU(new hy(this.Sz,this,t,this.LU,[]))}wd(t){return this.IU(new Jv(this.Sz,this,t,this.LU,[]))}xx(t,i,s){if("intensity"===s.heatmapDataType)return this.IU(new Gy(this.Sz,this,t,this.LU,i,s));throw new jA("Unimplemented Heatmap Grid Static type")}gx(t,i,s){return this.IU(new Vy(this.Sz,this,t,this.LU,i,s))}U_(t,i,s){return this.IU(new Uy(this.Sz,this,t,this.LU,i,s))}hY(t){return this.IU(new Wv(this.Sz,this,this.LU,[],t))}Vr(){if(this.el){this.el=!1;const t=Array.from(this.Di).sort(((t,i)=>t.nl()-i.nl()));this.Di.clear();for(const i of t)this.Di.add(i)}for(const t of this.Di)t.Vr();return this}Mc(t,i,s){var e;const h=this.BU.C();let r;if(h){const t=h.x*this.gl.hR()*i,s=h.y*this.gl.hR()*i,e=Math.ceil(t),n=Math.ceil(s);r=[e,n,Math.floor(t+h.width*this.gl.hR()*i)-e,Math.floor(s+h.height*this.gl.hR()*i)-n],this.gl.yR(r[0],r[1],r[2],r[3])}if(1!==t){for(const s of this.Di)if(s.getVisible()){if(s.ls){const t=s.ls.x*this.gl.hR()*i,e=s.ls.y*this.gl.hR()*i,h=Math.ceil(t),r=Math.ceil(e),n=Math.floor(t+s.ls.width*this.gl.hR()*i)-h,o=Math.floor(e+s.ls.height*this.gl.hR()*i)-r;this.gl.yR(h,r,n,o)}s.Mc(t,0),s.ls&&r&&this.gl.yR(r[0],r[1],r[2],r[3])}}else{let h=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const n=Array.from(this.eY.values());for(let e=0;e<n.length;e+=1){const o=n[e];if(o.getPointerEvents()&&o.getVisible()){if(o.ls){const t=o.ls.x*this.gl.hR()*i,s=o.ls.y*this.gl.hR()*i,e=Math.ceil(t),h=Math.ceil(s),r=Math.floor(t+o.ls.width*this.gl.hR()*i)-e,n=Math.floor(s+o.ls.height*this.gl.hR()*i)-h;this.gl.yR(e,h,r,n)}const{idCount:n}=o.Mc(t,h);o.ls&&r&&this.gl.yR(r[0],r[1],r[2],r[3]),void 0!==n&&(s.push({entity:o,layer:this,entityIndex:e,idFirst:h,idCount:n,idLast:h+n-1}),h+=n)}}}return this.gl.cR(!1),this}}class Xy extends Bv{constructor(t){super(t)}}class Zy extends Xy{constructor(t){super(t),this.rY="attribute";const{vertices:i,drawSize:s,drawMode:e}=Jy(t.gl);this.zB=t.pR(i),this.MV=s,this.wV=e}Vk(t,i,s,e){return this.XB.bR(this.zB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).cO(this.wV,0,this.MV,i),this}GE(){this.XB.PR(this.zB)}}const Jy=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class Qy extends Xy{constructor(t,i){super(t),this.rY="attribute",this.nY=i;const{vertices:s,indices:e}=Ky();this.zB=t.pR(s),this.xV=t.iO(e),this.MV=e.length,this.wV=t.gl.TRIANGLES}Vk(t,i,s,e){return this.XB.bR(this.zB,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).aO(this.xV).wR(t.uniform("uEdgeRoundness"),this.nY/2).dO(this.wV,this.MV,0,i),this}GE(){this.XB.PR(this.zB),this.XB.PR(this.xV)}oY(t){return this.nY=t,this}aY(){return this.nY}}const Ky=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=ys.multiply(n,-1),l=ys.multiply(o,-1),u=s;i[s]={thicknessDirection:ys.addVec(t,n,o),edge:ys.addVec(a,l),normal:t},s+=1;const c=s;i[s]={thicknessDirection:ys.addVec(t,a,o),edge:ys.addVec(n,l),normal:t},s+=1;const d=s;i[s]={thicknessDirection:ys.addVec(t,a,l),edge:ys.addVec(n,o),normal:t},s+=1;const f=s;i[s]={thicknessDirection:ys.addVec(t,n,l),edge:ys.addVec(a,o),normal:t},s+=1,e[h+0]=d,e[h+1]=u,e[h+2]=f,e[h+3]=d,e[h+4]=c,e[h+5]=u,h+=6;const A=[{A:n,B:o},{A:a,B:o},{A:a,B:l},{A:n,B:l}];for(const e of A){e.thicknessDirection=ys.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=ys.normalize(ys.lerp(t,r.direction,n)),a=Math.PI/2-ys.angle(o,t),l=ys.addVec(ys.multiply(ys.multiply(r.direction,-1),1-Math.cos(a)),ys.multiply(ys.multiply(t,-1),1-Math.sin(a)),ys.multiply(r.other,-1)),u=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:l};const c=i[s];s+=1,r.vertices.push({index:u,vertex:c})}}for(let t=0;t<A.length;t+=1){const i=A[t],s=A[t<A.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,l=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=l*Math.cos(r)*1*t.x,u=l*Math.sin(r)*1*t.z,c={x:n,y:a,z:u},d=ys.normalize({x:n,y:a,z:u});i[s]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const l=a+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=l+(t+1)*u+i;let h=0;14===i?(s=l+t*u,h=l+(t+1)*u):(s=l+t*u+i+1,h=l+(t+1)*u+i+1),r.push(l+t*u+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const l=new Float32Array(9*i.length);let u=0;for(const t of i)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(e)}},qy=(t,i)=>{let s=t.VR.NE.get(i);return s||(s=void 0!==i&&i>0?new Qy(t,oi(i,0,1)):new Zy(t),t.VR.NE.set(i,s),s)};class tp extends zv{lv(t){return this.eR=this.sv.C(),this.sv._(t),this}gp(t){return this.lY=t,this}vp(){return this.lY}}class ip extends tp{constructor(t,i,s){super(t,i,s),this.uY=t,this.Sz=t.Sz,this.XB=this.Sz.xz()}}const sp=11;class ep extends ip{constructor(t,i,s){super(t,i,s),this.lY="cull-back",this.ru=bs,this.cY={},this.dY=[],this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStyleIndividual:()=>Fe(this.Xe)&&this.Xe,fillStylePaletted:()=>Pe(this.Xe)&&this.Xe}),this.Xe=kn.fillStyle,this.sv._(dh)}Vr(t){const i=this.dY,s=this.Xe,e=s!==xe,h=this.fY,r=this.al()||this.AY!==h,n=this.sR(),o=this.li.C(),a=this.li.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=this.gY||0;let e=t;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.cY[i]||(e+=1)}let h,l=!1,c=!1;if(l=e!==t,c=l,h=!c&&(i.length<100?"chunks":"all"),l){const i=e*sp,s=new Float32Array(i);this.vY&&s.set(this.vY),this.vY=s,this.yY=i,this.pY=t*sp}const d=Fe(s)?s.getFallbackColor():void 0;for(const t of i){const i=t.id,s=void 0!==i&&this.cY[i],e=[t.xCenter,t.yCenter,t.zCenter,t.xSize,t.ySize,t.zSize,t.color?t.color.r:d?d.r:void 0,t.color?t.color.g:d?d.g:void 0,t.color?t.color.b:d?d.b:void 0,t.color?t.color.a:d?d.a:void 0,t.value];if(s){for(let t=0;t<sp;t+=1)e[t]=void 0!==e[t]?e[t]:s.buffer[t];s.buffer.set(e)}else{const t=this.pY,s=new Float32Array(this.vY.buffer,t*Float32Array.BYTES_PER_ELEMENT,sp);s.set(e),void 0!==i&&(this.cY[i]={location:t,buffer:s}),this.pY+=sp}}if(c&&(this.bV=this.XB.pR(this.vY,!0)),"all"===h)this.XB.KR(this.bV,0,this.vY);else if("chunks"===h)for(const t of i){const i=t.id;if(void 0!==i){const t=this.cY[i];this.XB.KR(this.bV,t.location,t.buffer)}}if(r||n||a){const t=this.Tz.fillStyleSolid(r),i=this.Tz.fillStyleIndividual(r),s=this.Tz.fillStylePaletted(r);t||i||s?(this.mY=qy(this.XB,this.SY()),this.wD=this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:i?"attribute":s?["lookup",s.getLookUpProperty(),s.lut]:"uniform",shadingStyle:this.sv.C().type}),Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:Oh(this.oi),normalSource:this.mY.rY}),void 0!==this.fY&&Qg.RoundedEdges3D),this.L$=o?this.XB.SE(Qg["3D"],Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:Oh(this.oi),normalSource:void 0}),Qg.MousePicking(),void 0!==this.fY&&Qg.RoundedEdges3D):void 0):(this.mY=void 0,this.wD=void 0,this.L$=void 0)}if(i.length>0){const t=u({x:ps,y:ps,z:ps},{x:ms,y:ms,z:ms});for(let i=0;i<this.pY;i+=sp){const s=this.vY[i+0],e=this.vY[i+3]/2,h=s-e,r=s+e,n=this.vY[i+1],o=this.vY[i+4]/2,a=n-o,l=n+o,u=this.vY[i+2],c=this.vY[i+5]/2,d=u-c,f=u+c;t.min.x=t.min.x<h?t.min.x:h,t.min.y=t.min.y<a?t.min.y:a,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>r?t.max.x:r,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.ru=t}this.gY=e,this.dY.length=0}return this.dl(s),this.AY=h,this.sv.o=!1,this.li.o=!1,this}Mc(t,i){const s=1===t?this.L$:this.wD,e=this.mY,h=this.bV,r=this.Xe,n=this.gY,o=this.sv.C(),a=n||0;return s&&h&&void 0!==n&&this.XB.SR(s,((l,u,c)=>{let d=!1;const f=u("aPos"),A=u("aOffsetAxis");this.XB.Qc(s).jR(l("uScale"),this.uY.bD._R()).jR(l("uDisp"),this.uY.bD.kR()).WR(l("uViewProjectionMatrix"),this.bY).wR(l("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(l("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(l("uRenderEffectMask"),2===t?1:0);const g={location:f,size:3},v={location:A,size:3},y={location:void 0,size:4},p={location:void 0,size:1};if(1!==t&&"phong"===o.type&&this.XB.jR(l("uCameraLoc"),this.xY).jR(l("uLightLoc"),this.MY).wR(l("uAmbientReflection"),o.ambientReflection).wR(l("uSpecularReflection"),o.specularReflection).wR(l("uDiffuseReflection"),o.diffuseReflection).wR(l("uShininess"),o.shininess).$I(l("uLightColor"),o.specularColor).$I(l("uAmbientColor"),o.ambientColor),1===t)this.XB.XR(l("uFirstId"),i).$O(c,a);else if(Ce(r))this.XB.$I(l("uColorDiffuse"),r.getColor());else if(Fe(r)){const t=u("aColor");y.location=t}else if(Pe(r)){const t=Nh(r,this,void 0);if(!t&&r.lut.percentageValues)return!1;this.XB.ZO(c,r.lut,t),"value"===r.lookUpProperty&&(p.location=u("aLookupValue"))}return h&&(this.XB.bR(h,1,g,v,y,p),e.Vk(c,n,"phong"===o.type&&1!==t,!1),d=!0),d})),{idCount:a}}_c(t,i,s,e,h){const r=(t-i)*sp;if(!this.vY)return{};const n=this.vY[r+0],o=this.vY[r+1],a=this.vY[r+2],l=this.vY[r+3],u=this.vY[r+4],c=this.vY[r+5],d=li(this.vY[r+6],void 0),f=li(this.vY[r+7],void 0),A=li(this.vY[r+8],void 0),g=li(this.vY[r+9],void 0),v=li(this.vY[r+10],void 0);let y;for(const t of Object.keys(this.cY))if(this.cY[t].location===r){y=t;break}return{info:{dataPoint:{x:n,y:o,z:a,xSize:l,ySize:u,zSize:c,r:d,g:f,b:A,a:g,intensity:v,id:y}}}}dispose(){return super.dispose(),this.bV&&(this.XB.PR(this.bV),this.bV=void 0),this.wD=void 0,this}wc(){return this.dispose(),this}mv(t){this.dY=$i(this.dY,t,{canReturnB:!0})}zi(){this.bV&&(this.XB.PR(this.bV),this.bV=void 0),this.vY=void 0,this.yY=0,this.pY=0,this.cY={},this.gY=0,this.dY=[],this.ru=bs}Ke(t){return this.Xe=Ln(this.Xe,t),this}br(){return this.Xe}vv(t){return this.fY=void 0!==t&&t>0?oi(t,0,1):void 0,this}SY(){return this.fY}Hi(){return this.ru.max.x}ji(){return this.ru.min.x}Xi(){return this.ru.max.y}Wi(){return this.ru.min.y}ye(){return this.ru.max.z}ve(){return this.ru.min.z}lu(){return 0}uu(){return 0}fv(){return 0}al(){return Pn(this.ll,this.Xe)}dl(t){this.ll=t}}class hp extends Bv{constructor(t,i){super(t),this.rY="custom",this.mV=i;const{vertices:s,drawSize:e}=this.SV();this.bV=t.pR(s),this.MV=e}Qc(t){return this.XB.bR(this.bV,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Vk(t){return this.XB.cO(this.XB.gl.TRIANGLE_STRIP,0,this.MV,t),this}SV(){const t=this.mV,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}GE(){this.XB.PR(this.bV)}}const rp=(t,i=16)=>{let s=t.VR.zE.get(i);return s||(s=new hp(t,i),t.VR.zE.set(i,s),s)};class np extends ip{constructor(t,i,s){super(t,i,s),this.lY="cull-back",this.wY=bs,this._Y=[],this.kY=!1,this.hc=kn.lineStyle,this.sv._(lh)}Vr(t){const i=this.kY,s=this.hc,e=this.nc!==s,h=this.sR(),r=i;if(i){const t=Fi(this._Y);this.CY=this.XB.pR(t,!1,this.CY)}if(r&&(this.wY=Rs(this._Y)),e||h){const t=8,i=_h(s)&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.BV=void 0,Ce(i)&&("primitive"===e?this.BV={type:e,shader:this.XB.SE(Qg["3D"],Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}),Qg.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.BV={type:e,shader:this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:"uniform",shadingStyle:this.sv.C().type}),Qg.LineInstanced3D({axisWorldTranslation:Oh(this.oi)})),geometry:rp(this.XB,t),fillStyle:i}))}return this.kY=!1,this.nc=s,this.sv.o=!1,this}Mc(t,i){if(1===t)return{};const s=this.XB.gl,e=this.BV,h=this.CY,r=this.hc,n=this.sv.C();if(e&&h&&_h(r))switch(e.type){case"instanced":{const i=.5*this.Hs.jv(r.thickness),o=e.fillStyle.getColor(),a=e.shader,l=e.geometry;this.XB.SR(a,((e,r,u)=>{this.XB.Qc(a).jR(e("uScale"),this.uY.bD._R()).jR(e("uDisp"),this.uY.bD.kR()).WR(e("uViewProjectionMatrix"),this.bY).$I(e("uColorDiffuse"),o).wR(e("uOffsetWU"),i).wR(e("uIsHighlighted"),this.Ai).$I(e("uHighlightColorOffset"),2===t?T:this.Si).wR(e("uRenderEffectMask"),2===t?1:0),"phong"===n.type&&this.XB.jR(e("uCameraLoc"),this.xY).jR(e("uLightLoc"),this.MY).wR(e("uAmbientReflection"),n.ambientReflection).wR(e("uSpecularReflection"),n.specularReflection).wR(e("uDiffuseReflection"),n.diffuseReflection).wR(e("uShininess"),n.shininess).$I(e("uLightColor"),n.specularColor).$I(e("uAmbientColor"),n.ambientColor),s.bindBuffer(s.ARRAY_BUFFER,h);const c=r("aLocationA"),d=r("aLocationB");return s.vertexAttribPointer(c,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(c,1),s.enableVertexAttribArray(c),s.vertexAttribPointer(d,3,s.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(d,1),s.enableVertexAttribArray(d),l.Qc(u).Vk(this._Y.length/2),!0}));break}case"primitive":{const i=_h(r)?r.getFillStyle():void 0,n=i&&Ce(i)?i.getColor():void 0;if(n){const i=e.shader;this.XB.SR(i,((e,r)=>(this.XB.Qc(i).jR(e("uScale"),this.uY.bD._R()).jR(e("uDisp"),this.uY.bD.kR()).WR(e("uViewProjectionMatrix"),this.bY).$I(e("uColor"),n).wR(e("uIsHighlighted"),this.Ai).$I(e("uHighlightColorOffset"),2===t?T:this.Si).wR(e("uRenderEffectMask"),2===t?1:0).bR(h,void 0,{location:r("aPos"),size:3}).Vk(s.LINES,this._Y.length),!0)))}break}}return{idCount:this._Y.length}}_c(t,i,s,e,h){return{}}bu(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this._Y.push(s),this._Y.push(e)}return this.kY=!0,{Fi(){return this},Ts(){return this}}}zi(){return this._Y.length=0,this.kY=!0,this}Bv(){return[]}Xd(t){}fh(t){return this.hc="function"==typeof t?t(this.hc):t,this}co(){return this.hc}wc(){return this.CY&&(this.XB.PR(this.CY),this.CY=void 0),this}Hi(){return this.wY.max.x}ji(){return this.wY.min.x}Xi(){return this.wY.max.y}Wi(){return this.wY.min.y}ye(){return this.wY.max.z}ve(){return this.wY.min.z}lu(){const t=this.hc;return t===$t?0:t.getThickness()}uu(){const t=this.hc;return t===$t?0:t.getThickness()}fv(){const t=this.hc;return t===$t?0:t.getThickness()}}class op extends Bv{constructor(t,i,s){super(t),this.rY="gpu-calculate",this.TY=i,this.FY=s;const{vertices:e,drawSize:h}=this.SV();this.bV=t.pR(e),this.MV=h}Vk(t,i,s,e){return this.XB.bR(this.bV,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).cO(this.XB.gl.TRIANGLES,0,this.MV,i),this}SV(){const t=this.FY,i=this.TY,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const l=i*h,u=Math.PI/2-t*r,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),A=Math.sin(u);s[e]=d,s[e+1]=A,s[e+2]=f,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&Ji(0,(()=>{this.XB.Lg.Da&&e>s.length&&ti.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}GE(){this.XB.PR(this.bV)}}const ap=(t,i)=>{const s=Math.round(i);s<3&&Ji(0,ri);const e=s;let h=t.VR.VE.get(Array.from(t.VR.VE.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new op(t,s,e),t.VR.VE.set({sectors:s,stacks:e},h),h)};class lp extends ip{constructor(t,i,s,e){super(t,i,s),this.lY="cull-back",this.wx=[],this.BV={},this.PN=new vy(this.wx,(t=>t.vertexBuffer&&this.XB.PR(t.vertexBuffer)),!0),this.dc=[],this.fc=0,this.gu=[],this.IY=0,this.ru=bs,this.LY=bs,this.Tz=Vh({lineStyleSolid:()=>{const t=this.hc;return _h(t)&&t},lineFillSolid:()=>{const t=this.hc.getFillStyle();return Ce(t)&&t},lineFillPaletted:()=>{const t=this.hc.getFillStyle();return Pe(t)&&t},jointStyleTriangulatedPoints:()=>ph(this.ny)&&this.ny,jointSizeTriangulated:()=>{const t=this.ny;return ph(t)&&t.getSize()},jointFillSolid:()=>{const t=this.ny.getFillStyle();return Ce(t)&&t},jointFillPaletted:()=>{const t=this.ny.getFillStyle();return Pe(t)&&t},wireframeLineStyleSolid:()=>{const t=ph(this.ny)&&this.ny.getWireframeStyle();return _h(t)&&t},wireframeFillSolid:()=>{const t=ph(this.ny)&&this.ny.getWireframeStyle(),i=t&&t.getFillStyle();return Ce(i)&&i}}),this.rU=d(void 0),this.pu=!1,this.Ba=e,this.hc=kn.lineStyle,this.ny=kn.pointStyle3D,this.sv._(dh);const h=!0===(null==e?void 0:e.individualLookupValuesEnabled);let r,n=0;n+=3,h&&(r=n,n+=1);const o=Ii(!1,!1,h,!1);this.zN={attributeOffsetCoordinate:0,individualLookupValuesEnabled:h,attributesPerVertex:n,attributeOffsetLookUpValue:r,prepareRenderData:(t,i)=>o(t,void 0,this.hc.getFillStyle())}}wi(){return this.rU.C()||this.rU.M}_c(t,i,s,e,h){return{info:{dataPoint:this.dc[t-i]}}}Vr(t){const i=this.pu,s=this.gu,e=this.IY,h=e>0,r=this.hc,n=r!==this.nc,o=this.ny,a=o!==this.PY,l=this.sR(),u=this.li.o,c=this.li.C();this.LY&&(this.ru=zs(this.ru,this.LY),this.LY=void 0),h&&(this.dc=$i(this.dc,s,{canReturnB:!0}),this.fc+=e);let d=s,f=e;if(i&&(this.wx.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=bs})),this.PN.MN(),d=this.dc,f=this.fc),f>0){const t=1e5,i=Math.floor(this.Sz.BY/(this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.Mi("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,e=oi(s,t,i);this.PN.mN(d,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:bs,vertexBuffer:this.XB.QR(t*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s))})),((t,i,s,e)=>{this.XB.KR(t.vertexBuffer,t.existingCoordinatesCount*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}const A=this.Tz.lineStyleSolid(n),g=this.Tz.lineFillSolid(n),v=this.Tz.lineFillPaletted(n),y=g||v;if(n||a||l||u){const t={},i=this.Tz.jointStyleTriangulatedPoints(a),s=this.Tz.jointSizeTriangulated(a),e=this.Tz.jointFillSolid(a),h=this.Tz.jointFillPaletted(a),n=e||h,o=this.Tz.wireframeLineStyleSolid(a),l=this.Tz.wireframeFillSolid(a),u=this.zN.individualLookupValuesEnabled,d=r.getThickness()<0||1===r.getThickness()&&this.Mi("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",f=v?["lookup",v.getLookUpProperty(),v.lut]:"uniform";if(v&&"value"===v.getLookUpProperty()&&!u){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw ti.alert(t),new Error(t)}if("primitive"===d&&y?t.lines={type:"primitive",fillStyleSolid:g,fillStylePaletted:v,shader:this.XB.SE(Qg["3D"],Qg.Color({dataType:f}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})),mousePicking:c?{shader:this.XB.SE(Qg["3D"],Qg.MousePicking({useVertexId:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}))}:void 0}:"instanced"===d&&A&&y&&(t.lines={type:"instanced",lineStyleSolid:A,fillStyleSolid:g,fillStylePaletted:v,shader:this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:f,shadingStyle:this.sv.C().type}),Qg.LineInstanced3D({axisWorldTranslation:Oh(this.oi)})),geometry:up(this.XB,A.getThickness()),mousePicking:c?{shader:this.XB.SE(Qg["3D"],Qg.MousePicking(),Qg.LineInstanced3D({axisWorldTranslation:Oh(this.oi)}))}:void 0}),t.markers=void 0,n&&i){const r=Ni(i.getShape(),{cube:()=>qy(this.XB),sphere:()=>cp(this.XB,i)});t.markers={geometry:r,pointStyle:i,pointSizeNWU:"number"==typeof s&&s,pointSizeAxis:"object"==typeof s&&s,fillStyleSolid:e,fillStylePaletted:h,shader:this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:h?["lookup",h.getLookUpProperty(),h.lut]:"uniform",shadingStyle:this.sv.C().type,wireframe:!1!==l}),Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:Oh(this.oi),normalSource:r.rY})),mousePicking:c?{shader:this.XB.SE(Qg["3D"],Qg.MousePicking(),Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof s?"nwu":"axis",symmetric:"number"==typeof s,halved:!0}],axisWorldTranslation:Oh(this.oi),normalSource:void 0}))}:void 0,wireframe:o&&l&&{thickness:o.getThickness(),fillStyleSolid:l}}}this.BV=t}if(void 0===this.rU.C()&&v&&"value"===v.lookUpProperty&&v.lut.percentageValues){let t=ms,i=ps;for(let s=0;s<this.dc.length;s+=1){const e=this.dc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.rU._({min:i,max:t})}return this.rU.M=void 0,this.pu=!1,this.gu=[],this.IY=0,this.nc=r,this.PY=o,this.sv.o=!1,this.li.o=!1,this}Mc(t,i){var s,e;const h=this.XB.gl,{lines:r,markers:n}=this.BV,o=this.sv.C(),a=this.fc,l=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&l&&"instanced"===r.type){const s=l,{geometry:e,lineStyleSolid:n,fillStyleSolid:a,fillStylePaletted:u}=r;this.XB.SR(s,((r,l,c)=>{let d=!1;if(this.XB.Qc(s).jR(r("uScale"),this.uY.bD._R()).jR(r("uDisp"),this.uY.bD.kR()).WR(r("uViewProjectionMatrix"),this.bY).wR(r("uOffsetWU"),this.Hs.jv(n.getThickness())).wR(r("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(r("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.XB.jR(r("uCameraLoc"),this.xY).jR(r("uLightLoc"),this.MY).wR(r("uAmbientReflection"),o.ambientReflection).wR(r("uSpecularReflection"),o.specularReflection).wR(r("uDiffuseReflection"),o.diffuseReflection).wR(r("uShininess"),o.shininess).$I(r("uLightColor"),o.specularColor).$I(r("uAmbientColor"),o.ambientColor),1===t);else if(a)this.XB.$I(r("uColorDiffuse"),a.getColor());else if(u){const t=Nh(u,this,this.rU.C());if(!t&&u.lut.percentageValues)return!1;this.XB.ZO(c,u.lut,t)}const f=fs(i);return this.wx.forEach((i=>{if(1===t){const[t,s]=f.ts(i.existingDataPointsCount);this.XB.XR(r("uFirstId"),t).$O(c,s)}h.bindBuffer(h.ARRAY_BUFFER,i.vertexBuffer);const s=l("aLocationA"),n=l("aLocationB");if(h.vertexAttribPointer(s,3,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(s,1),h.enableVertexAttribArray(s),h.vertexAttribPointer(n,3,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.zN.attributeOffsetCoordinate+this.zN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(n,1),h.enableVertexAttribArray(n),u&&"value"===u.getLookUpProperty()&&void 0!==this.zN.attributeOffsetLookUpValue&&1!==t){const t=l("aLookupValue");h.vertexAttribPointer(t,1,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(t,1),h.enableVertexAttribArray(t)}e.Qc(c).Vk(i.existingCoordinatesCount-1),d=!0})),d}))}if(r&&l&&"primitive"===r.type){const s=l,{fillStyleSolid:e,fillStylePaletted:n}=r;this.XB.SR(s,((r,o,a)=>{let l=!1;if(this.XB.Qc(s).jR(r("uScale"),this.uY.bD._R()).jR(r("uDisp"),this.uY.bD.kR()).WR(r("uViewProjectionMatrix"),this.bY).wR(r("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(r("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(r("uRenderEffectMask"),2===t?1:0),1===t);else if(e)this.XB.$I(r("uColor"),e.getColor());else if(n){const t=Nh(n,this,this.rU.C());if(!t&&n.lut.percentageValues)return!1;this.XB.ZO(a,n.lut,t)}const u=fs(i);return this.wx.forEach((i=>{if(1===t){const[t,s]=u.ts(i.existingDataPointsCount);this.XB.XR(r("uFirstId"),t).NO(a,s)}h.bindBuffer(h.ARRAY_BUFFER,i.vertexBuffer);const s=o("aPos");if(h.vertexAttribPointer(s,3,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(s),n&&"value"===n.getLookUpProperty()&&void 0!==this.zN.attributeOffsetLookUpValue&&1!==t){const t=o("aLookupValue");h.vertexAttribPointer(t,1,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(t)}this.XB.Vk(h.LINE_STRIP,i.existingCoordinatesCount),l=!0})),l}))}const u=1===t?null===(e=null==n?void 0:n.mousePicking)||void 0===e?void 0:e.shader:null==n?void 0:n.shader;if(n&&u){const s=u,{geometry:e,fillStyleSolid:r,fillStylePaletted:a,pointSizeAxis:l,pointSizeNWU:c,wireframe:d}=n;this.XB.SR(s,((n,u,f,A)=>{let g=!1;if(this.XB.Qc(s).jR(n("uScale"),this.uY.bD._R()).jR(n("uDisp"),this.uY.bD.kR()).WR(n("uViewProjectionMatrix"),this.bY).wR(A("uRatioNwuWu"),this.uY.DY()).wR(n("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(n("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===o.type&&this.XB.jR(n("uCameraLoc"),this.xY).jR(n("uLightLoc"),this.MY).wR(n("uAmbientReflection"),o.ambientReflection).wR(n("uSpecularReflection"),o.specularReflection).wR(n("uDiffuseReflection"),o.diffuseReflection).wR(n("uShininess"),o.shininess).$I(n("uLightColor"),o.specularColor).$I(n("uAmbientColor"),o.ambientColor),1===t);else if(r)this.XB.$I(n("uColorDiffuse"),r.getColor());else if(a){const t=Nh(a,this,this.rU.C());if(!t&&a.lut.percentageValues)return!1;this.XB.ZO(f,a.lut,t)}d&&1!==t&&this.XB.wR(n("uWireframeThickness"),d.thickness).$I(n("uWireframeColor"),d.fillStyleSolid.getColor()),!1!==l&&this.XB.jR(n("uOffsetAxis"),[l.x,l.y,l.z]),!1!==c&&this.XB.wR(n("uOffsetNWU"),c);const v=fs(i);return this.wx.forEach((i=>{if(1===t){const[t,s]=v.ts(i.existingDataPointsCount);this.XB.XR(n("uFirstId"),t).$O(f,s)}h.bindBuffer(h.ARRAY_BUFFER,i.vertexBuffer);const s=u("aPos");if(h.vertexAttribPointer(s,3,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(s,1),h.enableVertexAttribArray(s),a&&"value"===a.getLookUpProperty()&&void 0!==this.zN.attributeOffsetLookUpValue&&1!==t){const t=u("aLookupValue");h.vertexAttribPointer(t,1,h.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.XB.hO(t,1),h.enableVertexAttribArray(t)}e.Vk(f,i.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(d)&&1!==t),g=!0})),g}))}return{idCount:a}}bu(t,i){Array.isArray(t)||(t=[t]),this.gu=$i(this.gu,t,{canReturnB:!0}),this.IY+=t.length;const s=i||Rs(t);return this.LY=this.LY?zs(this.LY,s):s,this}fh(t){return this.hc="function"==typeof t?t(this.hc):t,this}co(){return this.hc}Vv(t){return this.ny="function"==typeof t?t(this.ny):t,this}EY(){return this.ny}Hi(){return this.LY?Math.max(this.LY.max.x,this.ru.max.x):this.ru.max.x}ji(){return this.LY?Math.min(this.LY.min.x,this.ru.min.x):this.ru.min.x}Xi(){return this.LY?Math.max(this.LY.max.y,this.ru.max.y):this.ru.max.y}Wi(){return this.LY?Math.min(this.LY.min.y,this.ru.min.y):this.ru.min.y}ye(){return this.LY?Math.max(this.LY.max.z,this.ru.max.z):this.ru.max.z}ve(){return this.LY?Math.min(this.LY.min.z,this.ru.min.z):this.ru.min.z}lu(){return hs(this.hc)}uu(){return hs(this.hc)}fv(){return hs(this.hc)}xu(){return this.dc}Mu(){return this.gu}ku(){return this.fc}Cu(){return this.IY}zi(){return this.pu=!0,this.dc.length=0,this.fc=0,this.gu=[],this.IY=0,this.ru=bs,this.LY=void 0,this}dispose(){return super.dispose(),this.PN.wN(),this.BV={},this}wc(){return this.dispose(),this}}const up=(t,i)=>rp(t,i>50?20:i>20?16:i>10?12:i>5?8:6),cp=(t,i)=>{const s=i.getSize();return ap(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class dp extends ip{constructor(t,i,s){super(t,i,s),this.lY="disabled",this.RY=!1,this.OY=!1,this.zY={x:1,y:1,z:1},this.wp={x:0,y:0,z:0},this.Mp={x:0,y:0,z:0},this.VY={x:0,y:0,z:0},this.kp={x:0,y:0,z:0,w:1},this.Cp={x:1,y:1,z:1},this.NY=m(255,255,255),this.GY=Iv.projectionOrthographic(-1,1,-1,1,1,-1),this.$Y=Iv.projectionOrthographic(-1,1,-1,1,1,-1),this.UY=!1,this.isEulerRotation=!0,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStyleValuePalette:()=>Pe(this.Xe)&&"value"===this.Xe.lookUpProperty&&this.Xe}),this.Xe=kn.fillStyle,this.sv._(dh)}Vr(t){var i;const s=this.sR(),e=this.li.C(),h=this.li.o,r=this.al();this.Tz.fillStyleSolid(r);const n=this.Tz.fillStyleValuePalette(r),o=this.VY,a=this.Cp;if(this.RY&&this.YY&&(this.bV=this.XB.pR(this.YY.vertices,void 0,this.bV),this.xV=this.XB.iO(this.YY.indices,this.xV),this.jY=this.YY.indices.length),"phong"===this.sv.C().type&&(s||this.RY)&&(null===(i=this.YY)||void 0===i?void 0:i.normals)&&(this.HY=this.XB.pR(this.YY.normals,void 0,this.HY)),!this.WY&&n&&"value"===n.lookUpProperty&&this.YY&&(this.WY=new Float32Array(this.YY.vertices.length/3),this.OY=!0),this.WY&&this.OY&&(this.ZY=this.XB.pR(this.WY,void 0,this.ZY)),s||r||h){if(n&&"value"!==n.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.wD=this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:n?["lookup","value",n.lut]:"uniform",shadingStyle:this.sv.C().type,wireframe:!1}),Qg.Model3D({normalSource:"phong"===this.sv.C().type?"attribute":void 0})),this.L$=e?this.XB.SE(Qg["3D"],Qg.MousePicking({useVertexId:!0}),Qg.Model3D({normalSource:void 0})):void 0}if(this.UY){const t=Iv.projectionOrthographic(-1,1,-1,1,1,-1);if(this.isEulerRotation)this.$Y=Iv.rotateXYZ(t,o),this.GY=Iv.translate(t,a.x/2,a.y/2,a.z/2),this.GY=Iv.rotateXYZ(this.GY,o),this.GY=Iv.translate(this.GY,-a.x/2,-a.y/2,-a.z/2);else{const i=[-this.kp.x,-this.kp.y,-this.kp.z,this.kp.w];this.$Y=Iv.quaternionToRotationMatrix(i),this.GY=Iv.translate(t,a.x/2,a.y/2,a.z/2),this.GY=Iv.multiply(this.GY,this.$Y),this.GY=Iv.translate(this.GY,-a.x/2,-a.y/2,-a.z/2)}this.UY=!1}return this.sv.o=!1,this.dl(this.Xe),this.li.o=!1,this.RY=!1,this.OY=!1,this}Mc(t,i){var s;const e=1===t?this.L$:this.wD,h=1===t,r=this.xV,n=this.bV,o=this.HY,a=this.ZY,l=this.wp,u=this.Mp,c=this.zY,d=this.Cp,f=this.GY,A=this.$Y,g=this.Tz.fillStyleValuePalette(!1),v=this.Tz.fillStyleSolid(!1),y=this.sv.C(),p={location:void 0,size:1};let m=this.jY;if(!(e&&n&&r&&this.YY))return{};const S=this.YY?null===(s=this.YY)||void 0===s?void 0:s.parts.length:0;if(S<1)return{};const b=this.YY.vertices.length;return this.XB.SR(e,((s,x,M,w)=>{var _;this.XB.Qc(e).jR(s("uScale"),this.uY.bD._R()).jR(s("uDisp"),this.uY.bD.kR()).WR(s("uViewProjectionMatrix"),this.bY).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),this.Si).wR(s("uRenderEffectMask"),2===t?1:0).WR(s("uModelRotation"),f).jR(s("uModelScale"),[c.x,c.y,c.z]).jR(s("uLocationAxis"),[l.x,l.y,l.z]).jR(s("uModelAlignment"),[u.x,u.y,u.z]).jR(s("uModelSize"),[d.x,d.y,d.z]).bR(n,0,{location:M.attribute("aGeoPos"),size:3}).aO(r);let k=!1;if(h)this.XB.XR(s("uFirstId"),i).NO(M,b);else{if(this.Xe===xe&&b<1)return!1;if(v)this.XB.$I(s("uColorDiffuse"),v.getColor());else if(g){if(!a)return!1;const t=g.getPalette();p.location=x("aLookupValue"),this.XB.ZO(M,t,void 0).bR(a,void 0,p),k=!0}}"phong"!==y.type||h||(this.XB.jR(s("uCameraLoc"),this.xY).jR(s("uLightLoc"),this.MY).wR(s("uAmbientReflection"),y.ambientReflection).wR(s("uSpecularReflection"),y.specularReflection).wR(s("uDiffuseReflection"),y.diffuseReflection).wR(s("uShininess"),y.shininess).$I(s("uLightColor"),y.specularColor).$I(s("uAmbientColor"),y.ambientColor).WR(s("uModelRotationNormals"),A),o&&this.XB.bR(o,void 0,{location:M.attribute("aNormal"),size:3}));let C=!1;for(let t=0;t<S;t+=1){m=0;let i=this.NY,e=0,r=0,n=0,o=!0;this.YY&&this.YY.parts&&this.YY.parts[t].material&&(i=this.YY.parts[t].material.specular,m=this.YY.parts[t].count,r=this.YY.parts[t].count,n=this.YY.parts[t].offset,o=this.YY.parts[t].useIndexBuffer,e=this.YY.parts[t].indexStart,h||v||k||this.XB.$I(s("uColorDiffuse"),this.YY.parts[t].material.diffuse)),(m>0||r>0)&&("phong"!==y.type||h||(this.XB.$I(s("uLightColor"),i),A?this.XB.WR(s("uModelRotationNormals"),A):this.XB.$I(s("uLightColor"),y.specularColor)),o?this.XB.uO(m,this.XB.gl.TRIANGLES,e,(null===(_=this.YY)||void 0===_?void 0:_.indices)instanceof Uint32Array?this.XB.gl.UNSIGNED_INT:this.XB.gl.UNSIGNED_SHORT):this.XB.Vk(this.XB.gl.TRIANGLES,r,n),C=!0)}return C})),{idCount:b}}JY(t){if(this.QY)return this.QY;const i=this.wp,s=this.Mp,e=this.zY,h=this.Cp,r=this.VY,n=this.kp,o=this.uY.tS(i),a=[],l=Iv.projectionOrthographic(-1,1,-1,1,1,-1);let u;if(this.isEulerRotation)u=Iv.translate(l,h.x/2,h.y/2,h.z/2),u=Iv.rotateXYZ(u,r),u=Iv.translate(u,-h.x/2,-h.y/2,-h.z/2);else{const t=[-n.x,-n.y,-n.z,n.w];u=Iv.translate(l,h.x/2,h.y/2,h.z/2),u=Iv.multiply(u,Iv.quaternionToRotationMatrix(t)),u=Iv.translate(u,-h.x/2,-h.y/2,-h.z/2)}const c=(s.x+1)*(h.x/2),d=(s.y+1)*(h.y/2),f=(s.z+1)*(h.z/2);for(let i=0;i<t.vertices.length;i+=3){const s=Iv.multiply(u,[t.vertices[i],t.vertices[i+1],t.vertices[i+2],1]),h={x:o.x+(s[0]-c)*e.x,y:o.y+(s[1]-d)*e.y,z:o.z+(s[2]-f)*e.z};a.push(h)}return this.QY=a,this.QY}Dp(t){const i=this.YY;if(!i)return;const s=this.JY(i),e=t(s);0!==e.length&&(e.length!==s.length&&!0===this.gi.Ba.Da&&ti.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.WY=e instanceof Float32Array?e:new Float32Array(e),this.OY=!0)}_c(t,i,s,e,h){return{info:{iVertex:t-i}}}Lp(t,i){const s=this.YY;if(!s||void 0===(null==t?void 0:t.iVertex))return;if(s.indices.length>0){const e=[];for(let i=0;i<s.indices.length;i+=3){const h=s.indices[i],r=s.indices[i+1],n=s.indices[i+2];h!==t.iVertex&&r!==t.iVertex&&n!==t.iVertex||e.push([h,r,n])}const h=this.JY(s),r=this.gi.rh(i.clientX,i.clientY),n=e.map((t=>t.map((t=>{const i={x:s.vertices[3*t],y:s.vertices[3*t+1],z:s.vertices[3*t+2]},e=h[t],n=this.uY.iS(e),o=this.uY.Wv(n);return{index:t,vertex:i,world:e,axis:n,dist:o?Ls(o,r):ps}})))).flat();n.sort(((t,i)=>t.dist-i.dist));const o=n[0];if(!o)return;const a=this.WY?this.WY[o.index]:void 0;return{coordModel:o.vertex,coordAxis:o.axis,index:o.index,value:a}}const e=t.iVertex,h=this.WY?this.WY[e]:void 0,r={x:s.vertices[3*e],y:s.vertices[3*e+1],z:s.vertices[3*e+2]},n=this.JY(s)[e];return{coordModel:r,coordAxis:this.uY.iS(n),index:e,value:h}}dispose(){return super.dispose(),this.bV&&(this.XB.PR(this.bV),this.bV=void 0),this.xV&&(this.XB.PR(this.xV),this.xV=void 0),this.HY&&(this.XB.PR(this.HY),this.HY=void 0),this.ZY&&(this.XB.PR(this.ZY),this.ZY=void 0),this.wD=void 0,this.L$=void 0,this.YY=void 0,this.WY=void 0,this}wc(){return this.dispose(),this}Pp(t){return this.YY=t,this.RY=!0,this.Cp=t.modelSize,this}Ke(t){return this.Xe=Ln(this.Xe,t),this}br(){return this.Xe}Ep(t){return this.zY=t,this.QY=void 0,this}_R(){return this.zY}Rp(t){return this.wp=t,this.QY=void 0,this}Op(t){return this.Mp=t,this.QY=void 0,this}zp(t){return this.VY=t,this.UY=!0,this.isEulerRotation=!0,this.QY=void 0,this}Vp(t){return this.kp=t,this.UY=!0,this.isEulerRotation=!1,this.QY=void 0,this}Np(t){return this.lY=t,this}Gp(){return this.lY}Hi(){return ms}ji(){return ps}Xi(){return ms}Wi(){return ps}ye(){return ms}ve(){return ps}lu(){return 0}uu(){return 0}fv(){return 0}al(){return Pn(this.ll,this.Xe)}dl(t){this.ll=t}}class fp extends ip{constructor(t,i,s,e){super(t,i,s),this.lY="cull-back",this.wx=[],this.PN=new vy(this.wx,(t=>t.vertexBuffer&&this.XB.PR(t.vertexBuffer)),!1),this.dc=[],this.fc=0,this.gu=[],this.IY=0,this.ru=bs,this.LY=bs,this.pu=!1,this.Tz=Vh({fillStyleSolid:()=>{const t=this.uy.getFillStyle();return Ce(t)&&t},fillStyleIndividual:()=>{const t=this.uy.getFillStyle();return Fe(t)&&t},fillStylePalette:()=>{const t=this.uy.getFillStyle();return Pe(t)&&t},triangulatedPointStyle:()=>{const t=this.uy;return ph(t)&&t},wireframeLineStyleSolid:()=>{const t=ph(this.uy)&&this.uy,i=t&&t.getWireframeStyle();return _h(i)&&i},wireframeFillStyleSolid:()=>{const t=ph(this.uy)&&this.uy,i=t&&t.getWireframeStyle(),s=i&&i.getFillStyle();return Ce(s)&&s}}),this.rU=d(void 0),this.Ba=e,this.uy=kn.pointStyle3D,this.sv._(dh);const h=!0===(null==e?void 0:e.individualPointColorEnabled),r=!0===(null==e?void 0:e.individualPointSizeEnabled),n=!0===(null==e?void 0:e.individualLookupValuesEnabled),o=!0===(null==e?void 0:e.individualPointSizeAxisEnabled);let a,l,u,c,f=0;f+=3,h&&(a=f,f+=4),r&&(l=f,f+=1),n&&(u=f,f+=1),o&&(c=f,f+=3);const A=Ii(h,r,n,o);this.zN={individualPointColorEnabled:h,individualPointSizeEnabled:r,individualLookupValuesEnabled:n,individualPointSizeAxisEnabled:o,attributesPerVertex:f,attributeOffsetCoordinate:0,attributeOffsetColor:a,attributeOffsetSize:l,attributeOffsetLookUpValue:u,attributeOffsetPointSize3D:c,prepareRenderData:(t,i)=>A(t,this.uy,this.uy.fillStyle)}}wi(){return this.rU.C()||this.rU.M}_c(t,i,s,e,h){return{info:{dataPoint:this.dc[t-i]}}}Vr(t){const i=this.pu,s=this.gu,e=this.IY,h=e>0,r=this.uy,n=this.uy!==this.KY,o=this.li.C(),a=this.li.o,l=this.sR();this.LY&&(this.ru=zs(this.ru,this.LY),this.LY=void 0),h&&(this.dc=$i(this.dc,s,{canReturnB:!0}),this.fc+=e);let u=s,c=e;if(i&&(this.wx.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=bs})),this.PN.MN(),u=this.dc,c=this.fc),c>0){const t=Math.floor(this.Sz.BY/(this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=oi(c,1e5,t);this.PN.mN(u,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:bs,vertexBuffer:this.XB.QR(t*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s))})),((t,i,s)=>{this.XB.KR(t.vertexBuffer,t.existingCoordinatesCount*this.zN.attributesPerVertex,this.zN.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=r.getFillStyle(),f=this.Tz.fillStyleSolid(n),A=this.Tz.fillStyleIndividual(n),g=this.Tz.fillStylePalette(n),v=d===xe&&xe;if(n||l||a){let t;const i=r.getSize(),s=this.zN.individualPointColorEnabled,e=this.zN.individualPointSizeEnabled,h=this.zN.individualPointSizeAxisEnabled,a=this.zN.individualLookupValuesEnabled;if(A&&!s){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw ti.alert(t),new Error(t)}if(g&&"value"===g.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw ti.alert(t),new Error(t)}const l=this.Tz.wireframeLineStyleSolid(n),u=this.Tz.wireframeFillStyleSolid(n);if(f||A||g||u){const s=A?"attribute":g?["lookup",g.getLookUpProperty(),g.lut]:"uniform",n=e&&"number"==typeof i,a=h&&"object"==typeof i,c=n||a?"attribute":"uniform";if(ph(r)){const h=Ni(r.getShape(),{cube:()=>qy(this.XB),sphere:()=>Ap(this.XB,r,e)});t={type:"instanced",shader:this.XB.SE(Qg["3D"],Qg.ColorShaded3D({dataType:s,shadingStyle:this.sv.C().type,wireframe:!1!==u}),Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:Oh(this.oi),normalSource:h.rY})),pointStyle:r,useIndividualPointSize:n,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,fillStyleEmpty:v,mousePickingShader:o&&this.XB.SE(Qg["3D"],Qg.MousePicking(),Qg.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:c,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i}],axisWorldTranslation:Oh(this.oi),normalSource:void 0})),geometry:h,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else bh(r)&&"number"==typeof i&&(t={type:"primitive",shader:this.XB.SE(Qg["3D"],Qg.PointSize(c),Qg.Color({dataType:s}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:n,fillStyleSolid:f,fillStyleIndividual:A,fillStylePaletted:g,mousePickingShader:o&&this.XB.SE(Qg["3D"],Qg.PointSize(c),Qg.MousePicking({useVertexId:!0}),Qg.VertexLocation({axisWorldTranslation:Oh(this.oi),normalSource:void 0}))})}this.BV=t}if(void 0===this.rU.C()&&g&&"value"===g.lookUpProperty&&g.lut.percentageValues){let t=ms,i=ps;for(let s=0;s<this.dc.length;s+=1){const e=this.dc[s];void 0!==e.value&&e.value<i&&(i=e.value),void 0!==e.value&&e.value>t&&(t=e.value)}this.rU._({min:i,max:t})}return this.rU.M=void 0,this.pu=!1,this.gu=[],this.IY=0,this.KY=r,this.sv.o=!1,this}Mc(t,i){const s=this.XB.gl,e=this.BV,h=this.fc;if(!e)return{};const r=1===t?e.mousePickingShader:e.shader;if(!r)return{};const n=this.sv.C(),{fillStyleSolid:o,fillStylePaletted:a,useIndividualPointSize:l}=e,u="instanced"===e.type&&e.useIndividualPointSize3D,c="instanced"===e.type&&e.wireframe;return this.XB.SR(r,((h,d,f,A)=>{let g=!1;if(this.XB.Qc(r).jR(h("uScale"),this.uY.bD._R()).jR(h("uDisp"),this.uY.bD.kR()).WR(h("uViewProjectionMatrix"),this.bY).wR(h("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(h("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(h("uRenderEffectMask"),2===t?1:0),"instanced"===e.type){const{pointSizeAxis:t,pointSizeNWU:i}=e;!1!==t&&!1===u&&this.XB.jR(h("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===l&&this.XB.wR(h("uOffsetNWU"),i).wR(A("uRatioNwuWu"),this.uY.DY())}else if("primitive"===e.type){const{pointSizePixels:t}=e;l||this.XB.wR(h("uPointSize"),t).wR(h("uDevicePixelRatio"),this.XB.hR())}if(1===t);else if("instanced"===e.type?("phong"===n.type&&this.XB.jR(h("uCameraLoc"),this.xY).jR(h("uLightLoc"),this.MY).wR(h("uAmbientReflection"),n.ambientReflection).wR(h("uSpecularReflection"),n.specularReflection).wR(h("uDiffuseReflection"),n.diffuseReflection).wR(h("uShininess"),n.shininess).$I(h("uLightColor"),n.specularColor).$I(h("uAmbientColor"),n.ambientColor),c&&this.XB.wR(h("uWireframeThickness"),c.thickness).$I(h("uWireframeColor"),c.fillStyleSolid.getColor()),o&&this.XB.$I(h("uColorDiffuse"),o.getColor()),e.fillStyleEmpty&&this.XB.$I(h("uColorDiffuse"),T)):"primitive"===e.type&&o&&this.XB.$I(h("uColor"),o.getColor()),a){const t=Nh(a,this,this.rU.C());if(!t&&a.lut.percentageValues)return!1;this.XB.ZO(f,a.lut,t)}const v=fs(i);return this.wx.forEach((i=>{if(1===t){const[t,s]=v.ts(i.existingDataPointsCount);this.XB.XR(h("uFirstId"),t),"instanced"===e.type?this.XB.$O(f,s):this.XB.NO(f,s)}s.bindBuffer(s.ARRAY_BUFFER,i.vertexBuffer);const r=d("aPos");if(s.vertexAttribPointer(r,3,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.XB.hO(r,1),s.enableVertexAttribArray(r),e.fillStyleIndividual&&void 0!==this.zN.attributeOffsetColor&&1!==t){const t=d("aColor");s.vertexAttribPointer(t,4,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.XB.hO(t,1),s.enableVertexAttribArray(t)}if(l&&void 0!==this.zN.attributeOffsetSize){"instanced"===e.type?this.XB.wR(A("uRatioNwuWu"),this.uY.DY()):"primitive"===e.type&&this.XB.wR(h("uDevicePixelRatio"),this.XB.hR());const t=d("instanced"===e.type?"aOffsetNWU":"aPointSize");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.XB.hO(t,1),s.enableVertexAttribArray(t)}if(u&&void 0!==this.zN.attributeOffsetPointSize3D&&"instanced"===e.type){const t=d("aOffsetAxis");s.vertexAttribPointer(t,3,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.XB.hO(t,1),s.enableVertexAttribArray(t)}if(e.fillStylePaletted&&"value"===e.fillStylePaletted.getLookUpProperty()&&void 0!==this.zN.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");s.vertexAttribPointer(t,1,s.FLOAT,!1,this.zN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.zN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===e.type&&this.XB.hO(t,1),s.enableVertexAttribArray(t)}"instanced"===e.type?(e.geometry.Vk(f,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(c)&&1!==t),g=!0):"primitive"===e.type&&(this.XB.Vk(s.POINTS,i.existingCoordinatesCount),g=!0)})),g})),{idCount:h}}bu(t,i){Array.isArray(t)||(t=[t]),this.gu=$i(this.gu,t,{canReturnB:!0}),this.IY+=t.length;const s=i||Rs(t);return this.LY=this.LY?zs(this.LY,s):s,this.rU._(void 0),this}Ay(t){return this.uy="function"==typeof t?t(this.uy):t,this}qY(){return this.uy}Hi(){return this.LY?Math.max(this.LY.max.x,this.ru.max.x):this.ru.max.x}ji(){return this.LY?Math.min(this.LY.min.x,this.ru.min.x):this.ru.min.x}Xi(){return this.LY?Math.max(this.LY.max.y,this.ru.max.y):this.ru.max.y}Wi(){return this.LY?Math.min(this.LY.min.y,this.ru.min.y):this.ru.min.y}ye(){return this.LY?Math.max(this.LY.max.z,this.ru.max.z):this.ru.max.z}ve(){return this.LY?Math.min(this.LY.min.z,this.ru.min.z):this.ru.min.z}lu(){const t=this.uy,i=t.getSize();return"number"==typeof i?ph(t)?i/2:bh(t)?5:0:0}uu(){return this.lu()}fv(){return this.lu()}xu(){return this.dc}Mu(){return this.gu}ku(){return this.fc}Cu(){return this.IY}zi(){return this.pu=!0,this.dc.length=0,this.fc=0,this.gu=[],this.IY=0,this.ru=bs,this.LY=void 0,this.rU._(void 0),this}dispose(){return super.dispose(),this.PN.wN(),this.BV=void 0,this}wc(){return this.dispose(),this}}const Ap=(t,i,s)=>{const e=i.getSize();return ap(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class gp extends ip{constructor(t,i,s,e){super(t,i,s),this.lY="disabled",this.Xe=kn.fillStyle,this.sp=kn.lineStyle,this.U$=d("bilinear"),this.tj=new Ah,this.ij=new fh.Simple,this.sj=[],this.ej=void 0,this.BV={},this.hj=!1,this.Tz=Vh({fillStyleSolid:()=>Ce(this.Xe)&&this.Xe,fillStylePaletted:()=>Pe(this.Xe)&&this.Xe,wireframeStyleLine:()=>_h(this.sp)&&this.sp,wireframeStyleFill:()=>{const t=this.sp&&this.sp.getFillStyle();return Ce(t)&&t}}),this.W$=d(void 0),this.Yt={x:0,z:0},this.H$={x:1,z:1},this.j$=!1,this.sv._(lh);const h="columns"===e.dataOrder?e.columns:e.rows,r="columns"===e.dataOrder?e.rows:e.columns;this.Ba={...e,primaryDimensionVectorsCount:h,secondaryDimensionVectorsCount:r},this.rj=new Array(this.Ba.primaryDimensionVectorsCount).fill(void 0),this.Ax=new Vy(this.Sz,t.Sz.TU,t.gi.oi,ri,[],this.Ba).ep($t),this.Ax.K$=fc;const n=this.Ax.q$.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),n={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,heightmapData:r,normalmapSize:n}})),o=this.Ax.q$.gridTileSizes.map((t=>{const i=n.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),a=n.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.nj={gridTiles:n,gridTileSizes:o,largestGridTileSize:a},this.np(this.Yt,this.H$),this.X$=new Oy,this.iU=[]}ap(t){return this.W$._(t),this}lp(){return this.W$.C()}_c(t,i,s,e,h){const r=t-i,n=r%(this.Ba.secondaryDimensionVectorsCount-1),o=Math.floor(r/(this.Ba.secondaryDimensionVectorsCount-1)),a="columns"===this.Ba.dataOrder?o:n,l="rows"===this.Ba.dataOrder?o:n,u=[{x:this.Yt.x+a*this.H$.x,z:this.Yt.z+l*this.H$.z,y:this.oj(o,n),intensity:this.aj(o,n),column:"columns"===this.Ba.dataOrder?o:n,row:"columns"===this.Ba.dataOrder?n:o},{x:this.Yt.x+(a+("columns"===this.Ba.dataOrder?1:0))*this.H$.x,z:this.Yt.z+(l+("rows"===this.Ba.dataOrder?1:0))*this.H$.z,y:this.oj(o+1,n),intensity:this.aj(o+1,n),column:"columns"===this.Ba.dataOrder?o+1:n,row:"columns"===this.Ba.dataOrder?n:o+1},{x:this.Yt.x+(a+1)*this.H$.x,z:this.Yt.z+(l+1)*this.H$.z,y:this.oj(o+1,n+1),intensity:this.aj(o+1,n+1),column:"columns"===this.Ba.dataOrder?o+1:n+1,row:"columns"===this.Ba.dataOrder?n+1:o+1},{x:this.Yt.x+(a+("columns"===this.Ba.dataOrder?0:1))*this.H$.x,z:this.Yt.z+(l+("rows"===this.Ba.dataOrder?0:1))*this.H$.z,y:this.oj(o,n+1),intensity:this.aj(o,n+1),column:"columns"===this.Ba.dataOrder?o:n+1,row:"columns"===this.Ba.dataOrder?n+1:o}],c=u.map((t=>this.uY.Wv(t))).map((t=>void 0===t?ps:Ls(t,{x:e,y:h}))).map(((t,i)=>({i:i,dist:t})));return c.sort(((t,i)=>t.dist-i.dist)),{info:{dataPoint:{...u[c[0].i]}}}}oj(t,i){for(let s=0;s<this.nj.gridTiles.length;s+=1){const e=this.nj.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.heightmapData[r]}}return 0}aj(t,i){if(this.Ax.J$)for(let s=0;s<this.Ax.q$.gridTiles.length;s+=1){const e=this.Ax.q$.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData?e.intensityData[r]:void 0}}}lj(t){this.uj=t,this.ej=void 0}np(t,i){this.j$=this.j$||this.Yt!=t||this.H$!=i,this.Yt=t,this.H$=i;const s=this.Ba,e={min:{x:Math.min(this.Yt.x,this.Yt.x+(s.columns-1)*this.H$.x),z:Math.min(this.Yt.z,this.Yt.z+(s.rows-1)*this.H$.z)},max:{x:Math.max(this.Yt.x,this.Yt.x+(s.columns-1)*this.H$.x),z:Math.max(this.Yt.z,this.Yt.z+(s.rows-1)*this.H$.z)}},h=new Map;return this.nj.gridTiles.forEach((t=>{const i="columns"===this.Ba.dataOrder?{x:this.H$.x*(t.sizeHeatmapDataVectors.primary-1),z:this.H$.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.H$.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.H$.z*(t.sizeHeatmapDataVectors.primary-1)},s="columns"===this.Ba.dataOrder?{x:this.Yt.x+this.H$.x*t.iFirstVector.primary,z:this.Yt.z+this.H$.z*t.iFirstVector.secondary}:{x:this.Yt.x+this.H$.x*t.iFirstVector.secondary,z:this.Yt.z+this.H$.z*t.iFirstVector.primary};h.set(t,{sizeAxis:i,startLocationAxis:s})})),this.gU={cj:e,tilesInfo:h},this}op(){return{start:this.Yt,step:this.H$,end:{x:this.Yt.x+this.H$.x*this.Ba.columns,z:this.Yt.z+this.H$.z*this.Ba.rows}}}cU(t,i){if(!this.nj)return this;if(!t)return this.dj(),this;if(!i)return this.iU.forEach((t=>{t.bY=this.bY,t.Vr(!0)})),this;if(!this.nj.gridTiles)return this;if(!this.gU)return this;const s=this.gU.cj.min.x,e=this.gU.cj.min.z,h=this.gU.cj.max.x,r=this.gU.cj.max.z;if(null==s||null==e||null==h||null==r)return this;const n=this.Ba.columns,o=this.Ba.rows,a=(h-s)/(n-1),l=(r-e)/(o-1),u=new Array(n).fill(0,0,n).map(((t,i)=>s+i*a)),c=new Array(o).fill(0,0,o).map(((t,i)=>e+i*l));let d=[];const f=[];t.levels.forEach((t=>{d.push(t.value),f.push({level:t.value,width:t.strokeStyle.getThickness(),fill:t.strokeStyle.getFillStyle()})}));const A=(t,i)=>"rows"==this.Ba.dataOrder?i:t,g=(t,i)=>"rows"==this.Ba.dataOrder?t:i;let v,y;const p=h-s,m=r-e;switch(t.valueSource){case"y":v=(t,i)=>this.oj(A(t,i),g(t,i)),y=(t,i,s,e)=>{i.push({x:t.ax[s],y:e,z:t.ay[s]})};break;case"intensity":v=(t,i)=>this.aj(A(t,i),g(t,i)),y=(t,i,h,r)=>{const u=t.ax[h],c=t.ay[h],d=Math.floor((u-s)/p*(n-1)),f=Math.floor((c-e)/m*(o-1)),v=s+d*a,y=e+f*l,S=ih({x:u,y:c},{point:{x:v,y:y},value:this.oj(A(d,f),g(d,f))},{point:{x:v,y:y+l},value:this.oj(A(d,f+1),g(d,f+1))},{point:{x:v+a,y:y},value:this.oj(A(d+1,f),g(d+1,f))},{point:{x:v+a,y:y+l},value:this.oj(A(d+1,f+1),g(d+1,f+1))});i.push({x:u,y:S,z:c})}}return this.X$.G$(v,u,c,d),this.dj(),this.X$.$$.forEach((i=>{var s,e;const h=[];i.ax.forEach(((t,s)=>{y(i,h,s,i.level)})),i.ax[0]==i.ax[i.ax.length-1]&&i.ay[0]==i.ay[i.ay.length-1]&&y(i,h,i.ax.length-1,i.level);const r=null===(s=t.levels.find((t=>t.value==i.level)))||void 0===s?void 0:s.strokeStyle;if(0<this.iU.length){const t=this.iU.find((t=>t.co()===r));if(t)return t.bu({x:Number.NaN,y:Number.NaN,z:Number.NaN}),void t.bu(h)}const n=r.getThickness(),o=new lp(this.uY,this.yi,this.pi,void 0);1<n?o.Vv(new yh({shape:"sphere",size:n,fillStyle:null===(e=f.find((t=>t.level==i.level)))||void 0===e?void 0:e.fill})):o.Vv(this.tj),o.fh(r),o.bu(h),o.lv(this.ij),this.iU.push(o)})),this}Vr(t){const i=this.sj,s=Pn(this.ll,this.Xe),e=this.Tz.fillStyleSolid(s),h=this.Tz.fillStylePaletted(s),r=this.sp,n=this.sp!==this.pU,o=this.Tz.wireframeStyleLine(n),a=this.Tz.wireframeStyleFill(n),l=!1!==a,u=this.U$.o,c=this.U$.C(),d=this.sv.C(),f=this.sR(),A=this.li.C();this.Ax.Vr();const g=this.Ax.mU;if(!g)return this;this.fj=this.fj||this.Aj(g);const v=this.fj;this.gj(v);const y=Ac(i,v,void 0,(t=>t.sizeGeometryDataVectors));if(y.size>0&&(mc(this.XB,y,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.hj=!0),"phong"===d.type&&(y.size>0||f)){const t=this.XB.gl,i=this.XB.SE(Qg["2D"],Qg.DrawToNormalTexture({flipXZ:"rows"===this.Ba.dataOrder,vertexIdSource:this.XB.VO(),normalTextureType:this.XB.gl2?"uint":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN}));v.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{var h;const r=e.normalmapTexture,n=null===(h=this.gU)||void 0===h?void 0:h.tilesInfo.get(e.tileData);if(!r||!n)return;const o={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},a=o.x*o.y;this.XB.xO.Mc((()=>{this.XB.SR(i,((h,r,o,l)=>(this.XB.Qc(i).NO(o,a).xR(h("uTileDimensionsXZ"),["columns"===this.Ba.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.Ba.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).YR(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).xR(h("uTileStartLocationAxisXZ"),[n.startLocationAxis.x,n.startLocationAxis.z]).xR(h("uTileSizeAxisXZ"),[n.sizeAxis.x,n.sizeAxis.z]).MR(h("uHeightmapTexture"),e.heightmapDataTexture,1).Vk(t.POINTS,a),!0)))}),r,o,void 0,this.gi.xa(),0)}))}))}const p=this.BV;if(s||n||u){const t=o&&a?{wireframeSolid:o,wireframeFillSolid:a}:void 0;e?p.surface={shader:this.XB.SE(Qg["3D"],Qg.SurfaceGrid({axisWorldTranslation:Oh(this.oi),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Ba.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.gE?"float":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:h&&"value"===h.getLookUpProperty()?p.surface={shader:this.XB.SE(Qg["3D"],Qg.SurfaceGrid({axisWorldTranslation:Oh(this.oi),fillColor:["lookup","value",h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Ba.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.gE?"float":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h},wireframe:t}:h?p.surface={shader:this.XB.SE(Qg["3D"],Qg.SurfaceGrid({axisWorldTranslation:Oh(this.oi),fillColor:["lookup",h.getLookUpProperty(),h.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Ba.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.gE?"float":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h},wireframe:t}:l&&(p.surface={shader:this.XB.SE(Qg["3D"],Qg.SurfaceGrid({axisWorldTranslation:Oh(this.oi),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Ba.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.gE?"float":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}p.mousePicking=A?this.BV.mousePicking||{shader:this.XB.SE(Qg["3D"],Qg.MousePicking(),Qg.SurfaceGrid({axisWorldTranslation:Oh(this.oi),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Ba.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.XB.gl2?"uint":"ubyte",intensityTextureType:this.XB.gE?"float":"ubyte",heightmapTextureType:this.XB.gE?"float":"ubyte",littleEndian:this.XB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.BV=p,this.sj.length=0,this.ll=this.Xe,this.pU=r,this.sv.o=!1;const m=this.W$.C(),S=m!==this.bU;return this.cU(m,S||y.size>0||this.j$),this.j$=!1,this.bU=this.W$.C(),this}Aj(t){const i=this.nj.gridTiles.map((i=>{const s=pc(this.XB,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0,tileData:i}})),s=this.nj.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.XB.pR([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.XB.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}gj(t){var i;if("phong"===this.sv.C().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.XB.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.XB.nx(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.XB.gl;h=this.XB.nx(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.XB.QB(t.normalmapTexture),t.normalmapTexture=void 0)}))}Mc(t,i){var s,e,h,r;const n=this.XB.gl,o=this.fj;if(!o)return{};const a=this.sv.C(),l=this.BV,c=1===t?null===(s=l.mousePicking)||void 0===s?void 0:s.shader:null===(e=l.surface)||void 0===e?void 0:e.shader;if(!c)return{};const d=1!==t?null===(h=l.surface)||void 0===h?void 0:h.wireframe:void 0,f=1!==t?null===(r=l.surface)||void 0===r?void 0:r.fill:void 0;return this.XB.SR(c,((s,e,h,r)=>{let l=!1;if(this.XB.Qc(c).$O(h,this.nj.largestGridTileSize.cells).jR(s("uScale"),this.uY.bD._R()).jR(s("uDisp"),this.uY.bD.kR()).WR(s("uViewProjectionMatrix"),this.bY).wR(s("uIsHighlighted"),1===t||2===t?0:this.Ai).$I(s("uHighlightColorOffset"),1===t||2===t?T:this.Si).wR(s("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===a.type&&this.XB.jR(s("uCameraLoc"),this.xY).jR(s("uLightLoc"),this.MY).wR(s("uAmbientReflection"),a.ambientReflection).wR(s("uSpecularReflection"),a.specularReflection).wR(s("uDiffuseReflection"),a.diffuseReflection).wR(s("uShininess"),a.shininess).$I(s("uLightColor"),a.specularColor).$I(s("uAmbientColor"),a.ambientColor),d)){const{wireframeFillSolid:t,wireframeSolid:i}=d,e=i.getThickness()<0?1:i.getThickness();this.XB.$I(s("uWireframeColor"),t.getColor()).wR(s("uWireframeThickness"),e)}return 1===t||"solid"===(null==f?void 0:f.fillMode)&&this.XB.$I(s("uColorDiffuse"),f.fillStyleSolid.getColor()),o.gridTileSizes.forEach((r=>{this.XB.xR(s("uTileDimensionsXZ"),["columns"===this.Ba.dataOrder?r.sizeHeatmapData.primary:r.sizeHeatmapData.secondary,"columns"===this.Ba.dataOrder?r.sizeHeatmapData.secondary:r.sizeHeatmapData.primary]).YR(s("uTileDimensions"),[r.sizeHeatmapData.primary,r.sizeHeatmapData.secondary]),r.tiles.forEach((a=>{var c;const A=null===(c=this.gU)||void 0===c?void 0:c.tilesInfo.get(a.tileData);if(!A)return;let g=0,v=(a.sizeHeatmapDataVectors.primary-1)*(a.sizeHeatmapDataVectors.secondary-1);if(this.uj){const t=this.uj.fill.iFirstPrimary,i=this.uj.fill.iFirstPrimary+this.uj.fill.amountPrimary-1,s=a.iFirstVector.primary,e=a.iFirstVector.primary+a.sizeHeatmapDataVectors.primary-1;if(s>i||e<t)return;const h=((t,i,s,e)=>u(Math.max(t,s),Math.min(i,e)))(t,i,s,e);g=(h.min-a.iFirstVector.primary)*(r.sizeGeometryData.secondary-1),v=(h.max-h.min)*(r.sizeGeometryData.secondary-1)}if(!(g<0||v<=0)){if("intensity"===(null==f?void 0:f.fillMode)){const{fillStylePaletted:t}=f,i=this.Ax.rU;this.XB.ZO(h,t.lut,i).MR(s("uTileIntensityValues"),a.intensityDataTexture,2).IR(s("uTileBoundsAxisXZ"),[A.startLocationAxis.x,A.startLocationAxis.z,A.sizeAxis.x,A.sizeAxis.z])}if("xyz"===(null==f?void 0:f.fillMode)){const{fillStylePaletted:t}=f,i="x"===t.getLookUpProperty()?{min:this.ji(),max:this.Hi()}:"y"===t.getLookUpProperty()?{min:this.Wi(),max:this.Xi()}:"z"===t.getLookUpProperty()?{min:this.ve(),max:this.ye()}:void 0;if(!i&&t.lut.percentageValues)return;this.XB.ZO(h,t.lut,i)}1!==t&&"phong"===this.sv.C().type&&a.normalmapTexture&&this.XB.MR(s("uNormalmapTexture"),a.normalmapTexture,3),1===t&&this.XB.XR(s("uFirstId"),i+g),this.XB.bR(o.rectangleLocationsBuffer,0,{location:e("aGeoCellOffset"),size:2},{location:d?e("aTriangleBary"):void 0,size:3}).XR(s("uBaseInstance"),g).xR(s("uTileStartLocationAxisXZ"),[A.startLocationAxis.x,A.startLocationAxis.z]).xR(s("uTileSizeAxisXZ"),[A.sizeAxis.x,A.sizeAxis.z]).MR(s("uHeightmapTexture"),a.heightmapDataTexture,0).cO(o.rectangleLocationsDrawMode,0,o.rectangleLocationsDrawLength,v),l=!0,n.bindBuffer(n.ARRAY_BUFFER,null)}}))})),l})),1!==t&&this.iU.forEach((i=>{i.bY||(i.bY=this.uY.bY),i.xY||(i.xY=[this.uY.xY.x,this.uY.xY.y,this.uY.xY.z]),i.MY||(i.MY=[this.uY.xY.x,this.uY.xY.y,this.uY.xY.z]),i.Vr(!0),i.Mc(t,0)})),{idCount:this.Ba.columns*this.Ba.rows}}wi(){return this.Ax.wi()}dj(){return this.iU.forEach((t=>t.dispose())),this.iU.length=0,this}dispose(){return super.dispose(),this.Ax.dispose(),this.fj&&(this.fj.gridTileSizes.forEach((t=>{})),this.fj.gridTiles.forEach((t=>{this.XB.QB(t.heightmapDataTexture),t.normalmapTexture&&this.XB.QB(t.normalmapTexture)})),this.XB.PR(this.fj.rectangleLocationsBuffer),this.fj=void 0),this.dj(),this.BV={},this}wc(){return this.dispose(),this.Ax.wc(),this}fp(t){return this.Ax.fp(t),this}Ap(t){this.sj.push(t),yc(this.nj.gridTiles,t,(t=>t.heightmapData),((t,i)=>{t.heightmapData=i}));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.rj[i]=void 0;return this.ej=void 0,this}cp(t){return this.U$._(t),this}dp(){return this.U$.C()}Ke(t){return this.Xe=Ln(this.Xe,t),this.Ax.Ke(this.Xe),this}br(){return this.Xe}ep(t){return this.sp="function"==typeof t?t(this.sp):t,this}up(){return this.sp}Hi(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.cj.max.x)||0}ji(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.cj.min.x)||0}Xi(){const t=this.ej||this.vj();return this.ej=t,t.max}Wi(){const t=this.ej||this.vj();return this.ej=t,t.min}ye(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.cj.max.z)||0}ve(){var t;return(null===(t=this.gU)||void 0===t?void 0:t.cj.min.z)||0}lu(){return 0}uu(){return 0}fv(){return 0}vj(){if(this.ej)return this.ej;const t=this.uj?this.uj.fill.iFirstPrimary:0,i=this.uj?t+this.uj.fill.amountPrimary-1:this.Ba.primaryDimensionVectorsCount-1;let s=ps,e=ms;return this.nj.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.rj[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:ps,max:ms},this.rj[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.ej={min:s,max:e},this.ej}}class vp extends ip{constructor(t,i,s,e){super(t,i,s),this.lY="disabled",this._U=0,this.CU={},this.yj=new Map,this.Yt={x:0,z:0},this.H$={x:1,z:1},this.Ba={...e,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.cj={min:{x:this.Yt.x,z:this.Yt.z},max:{x:"rows"===e.scrollDimension?this.Yt.x+(e.columns-1)*this.H$.x:this.Yt.x,z:"columns"===e.scrollDimension?this.Yt.z+(e.rows-1)*this.H$.z:this.Yt.z}};const h=()=>({shape:new gp(this.uY,ri,this.pi,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),dataOrder:e.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this.wx=[h(),h()]}Vr(t){this.wx.forEach((i=>{i.shape.Vr(t)}));const i=this.wx.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,li(null===(s=i.shape.Ax.rU)||void 0===s?void 0:s.min,ps)),t.max=Math.max(t.max,li(null===(e=i.shape.Ax.rU)||void 0===e?void 0:e.max,ms)),t}),{min:ps,max:ms}),s=this.wx.reduce(((t,i)=>{var s,e;return t.min=Math.min(t.min,li(null===(s=i.shape.ej)||void 0===s?void 0:s.min,ps)),t.max=Math.max(t.max,li(null===(e=i.shape.ej)||void 0===e?void 0:e.max,ms)),t}),{min:ps,max:ms});return this.wx.forEach((t=>{t.shape.Ax.rU=i,t.shape.ej=s})),this}Mc(t,i){let s=0,e=i;return this.wx.forEach((i=>{if(!i.hasData)return;i.shape.bY=this.bY,i.shape.xY=this.xY,i.shape.MY=this.MY;const{idCount:h}=i.shape.Mc(t,e);void 0!==h&&(1===t&&this.yj.set(i,{idFirst:e,idCount:h}),s+=h,e+=h)})),{idCount:s}}_c(t,i,s,e,h){const r=Array.from(this.yj).find((i=>Fs(t,i[1].idFirst,i[1].idFirst+i[1].idCount-1)));return r?r[0].shape._c(t,r[1].idFirst,r[1].idCount,e,h):{}}np(t,i){return this.Yt=t,this.H$=i,this.wx.forEach((t=>{t.shape.np("columns"===this.Ba.scrollDimension?{x:t.shape.op().start.x,z:this.Yt.z}:{x:this.Yt.x,z:t.shape.op().start.z},this.H$)})),"columns"===this.Ba.scrollDimension?(this.cj.min.z=t.z,this.cj.max.z=this.Yt.z+(this.Ba.rows-1)*this.H$.z):(this.cj.min.x=t.x,this.cj.max.x=this.Yt.x+(this.Ba.columns-1)*this.H$.x),this}op(){return{start:this.Yt,step:this.H$}}zi(){return this._U=0,this.CU={},this.cj={min:{x:this.Yt.x,z:this.Yt.z},max:{x:"rows"===this.Ba.scrollDimension?this.Yt.x+(this.Ba.columns-1)*this.H$.x:this.Yt.x,z:"columns"===this.Ba.scrollDimension?this.Yt.z+(this.Ba.rows-1)*this.H$.z:this.Yt.z}},this.wx.forEach((t=>{t.shape.setVisible(!1),t.shape.hj=!1,t.hasData=!1})),this}pp(t){var i;const s=this.wx[0],e=this.wx[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this._U/this.Ba.scrollDimensionSize)%this.wx.length,n=this.wx[i],o=this._U%this.Ba.scrollDimensionSize,a=this.Ba.scrollDimensionSize-o,l=0===o,u=Math.min(a,h),c=o+u,d=o,f=d+1,A=r,g=r+u,v=this._U>=this.Ba.scrollDimensionSize&&c<=this.Ba.scrollDimensionSize-1,y=l;l&&(n.shape.np("columns"===this.Ba.scrollDimension?{x:this.Yt.x+(this._U-1)*this.H$.x,z:this.Yt.z}:{x:this.Yt.x,z:this.Yt.z+(this._U-1)*this.H$.z},this.H$),n.shape.setVisible(!0));const p=v?0:1,m=c+(v?1:0);n.shape.lj({fill:{iFirstPrimary:p,amountPrimary:m},wireframe:{iFirstPrimary:p,amountPrimary:m,connectNext:!1}});const S=n===s?e:s,b=c+1,x=1+this.Ba.scrollDimensionSize-b;S.shape.lj({fill:{iFirstPrimary:b,amountPrimary:x},wireframe:{iFirstPrimary:b,amountPrimary:x-1,connectNext:!0}});const M={};if(t.heightMapValues){const i=t.heightMapValues.slice(A,g);let s=!1;y&&this.CU.yValues&&(s=!0,i.splice(0,0,this.CU.yValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Ba.staticDimensionSize,values:i,type:"y"};n.shape.Ap(e),n.hasData=!0,M.yValues=Array.from(i[u-1])}if(t.intensityValues){const i=t.intensityValues.slice(A,g);let s=!1;y&&this.CU.intensityValues&&(s=!0,i.splice(0,0,this.CU.intensityValues));const e={startPrimary:s?d:f,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.Ba.staticDimensionSize,values:i,type:"intensity"};n.shape.fp(e),n.hasData=!0,M.intensityValues=Array.from(i[u-1])}this._U+=u,r+=u,this.CU=M}while(r<h);return"columns"===this.Ba.scrollDimension?(this.cj.min.x=this.Yt.x+Math.max(this._U-this.Ba.scrollDimensionSize,0)*this.H$.x,this.cj.max.x=this.Yt.x+(this._U-1)*this.H$.x):(this.cj.min.z=this.Yt.z+Math.max(this._U-this.Ba.scrollDimensionSize,0)*this.H$.z,this.cj.max.z=this.Yt.z+(this._U-1)*this.H$.z),this}fp(t){var i;const{iSample:s,yValues:e,intensityValues:h}=t,r=e||h;if(!r)return this;const n=s,o=s+r.length-1,a=r[0].length;this.wx.forEach(((t,i)=>{const s=Math.floor(this._U/this.Ba.scrollDimensionSize)%this.wx.length,r=this._U%this.Ba.scrollDimensionSize;let l,u;if(i===s?0===r?(u=-1,l=-1):(u=this._U-1,l=u-r+1):(u=this._U-r-1,l=u-this.Ba.scrollDimensionSize+1),o<l||n>u)return;const c=Math.max(n,l),d=Math.min(o,u),f=d-c+1,A=h&&h.slice(c-n,d-n+1),g=e&&e.slice(c-n,d-n+1),v=A&&{type:"intensity",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:A},y=g&&{type:"y",startSecondary:0,lengthSecondary:a,startPrimary:c+1,lengthPrimary:f,values:g};v&&t.shape.fp(v),y&&t.shape.Ap(y),d===this._U-1&&(this.CU={yValues:g?Array.from(g[g.length-1]):void 0,intensityValues:A?Array.from(A[A.length-1]):void 0})}));const l=this._U-1;if(o>l){const t=o-l,s=e&&e.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),r=h&&h.slice(-t).map((t=>Array.isArray(t)?t:Array.from(t))),n=s?s.length:null!==(i=null==r?void 0:r.length)&&void 0!==i?i:0;if(n<t){const i=this.CU||new Array(a).fill(0);for(let e=n;e<t;e+=1)s&&i.yValues&&s.unshift(i.yValues),r&&i.intensityValues&&r.unshift(i.intensityValues)}this.pp({heightMapValues:s,intensityValues:r,lengthPrimary:n,lengthSecondary:a})}return this}mp(){return this._U}cp(t){return this.wx.forEach((i=>i.shape.cp(t))),this}dp(){return this.wx[0].shape.dp()}Ke(t){return this.wx.forEach((i=>i.shape.Ke(t))),this}br(){return this.wx[0].shape.br()}ep(t){return this.wx.forEach((i=>i.shape.ep(t))),this}up(){return this.wx[0].shape.up()}wc(){return this.dispose(),this.wx.forEach((t=>t.shape.wc())),this}dispose(){return super.dispose(),this.wx.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.wx.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}lv(t){return super.lv(t),this.wx.forEach((i=>i.shape.lv(t))),this}Hi(){return this.cj.max.x}ji(){return this.cj.min.x}Xi(){return Math.max(this.wx[0].shape.Xi(),this.wx[1].shape.Xi())}Wi(){return Math.min(this.wx[0].shape.Wi(),this.wx[1].shape.Wi())}ye(){return this.cj.max.z}ve(){return this.cj.min.z}lu(){return 0}uu(){return 0}fv(){return 0}Fi(t){return super.Fi(t),this.wx.forEach((i=>i.shape.Fi(t))),this}}class yp extends Yy{constructor(t,i,s,e){super(t,i,s),this.xY=a(0,0,1),this.pj=a(0,0,-1),this.mj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.sv=new oh,this.oi=e}km(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.oi,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.gi._t();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this.xY=t,this}getCameraLocation(){return this.xY}setCameraDirection(t){return this.pj=ys.normalize(t),this}getCameraDirection(){return this.pj}setLightLocation(t){return this.MY=t,this}getLightLocation(){return this.MY}Sj(){return a(this.mj[0],this.mj[1],this.mj[2])}bj(){return a(this.mj[4],this.mj[5],this.mj[6])}}class pp extends yp{constructor(t,i,s,e){super(t,i,s,e),this.bD=new Yv,this.xj=!0,this.Mj=()=>{this.xj=!0},this.wj="perspective",this.Sz=t,this.gl=t.xz(),this.eY=this.Di,this.gi.R("resize",this.Mj),e.addEventListener("cellresize",this.Mj)}vR(t){const i=t.ji(),s=t.Wi(),e=t.ve(),h=t.Hi(),r=t.Xi(),n=t.ye();if(i===ps||h===ms||s===ps||r===ms||e===ps||n===ms)return Ss;const o=t.lu(),a=t.uu(),l=t.fv(),u=Math.abs(t.Hs.jv(o)*t.oi.x.q()),c=Math.abs(t.Hs.jv(a)*t.oi.y.q()),d=Math.abs(t.Hs.jv(l)*t.oi.z.q()),f=i-u,A=h+u,g=s-c,v=r+c,y=e-d,p=n+d;let m;return[{x:f,y:g,z:y},{x:A,y:g,z:y},{x:f,y:v,z:y},{x:A,y:v,z:y},{x:f,y:g,z:p},{x:A,y:g,z:p},{x:f,y:v,z:p},{x:A,y:v,z:p}].map((i=>t.Hs.Wv(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};m=m?Os(m,{min:t,max:t}):i})),m||Ss}Wv(t){if(this._j(),this.kj(),!this.bY)return;const i=this.bD.kR(),s=a(i[0],i[1],i[2]),e=this.bD._R(),h=a(e[0],e[1],e[2]),n=ys.divideVec(ys.subtractVec(t,s),h),o=this.bY,l=Iv.multiply(o,[n.x,n.y,n.z,1]),u=r(l[0]/l[3],l[1]/l[3]),c=this.gi._t();return{x:.5*(1+u.x)*c.x,y:.5*(1+u.y)*c.y}}tS(t){const i=this.bD.kR(),s=this.bD._R(),e=ys.divideVec(ys.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}iS(t){const i=this.bD.kR(),s=this.bD._R(),e=ys.addVec(ys.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}jv(t){return t/1e3}DY(){return.001}Vr(){const t=this.xY,i=this.MY,s=this.oi.x.o||this.oi.y.o||this.oi.z.o;if(!i)throw Ji(0,(()=>Qi()));const{viewProjectionMatrix:e}=this._j();this.kj();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.Di.forEach((t=>{t.bY=e,t.xY=h,t.MY=r,t.Vr(s)})),this}Qm(t){this.wj!==t&&(this.wj=t,this.xj=!0)}Km(){return this.wj}_j(){if(!this.xj&&this.bY)return{viewProjectionMatrix:this.bY};const t=this.km(),i=t.width/t.height;if("perspective"===this.wj)this.Cj=Iv.projectionPerspective(45,i,.1,100);else{let t,s;const e=.5*ys.length(this.xY);i>1?(t=e,s=t/i):(s=e,t=s*i),this.Cj=Iv.projectionOrthographic(-t,t,-s,s,-400,100)}const s=this.xY;this.mj[12]=s.x,this.mj[13]=s.y,this.mj[14]=s.z;const e=this.pj,h=a(0,1,0),r=ys.multiply(e,-1),n=ys.normalize(ys.cross(h,r)),o=ys.normalize(ys.cross(r,n));this.mj[0]=n.x,this.mj[1]=n.y,this.mj[2]=n.z,this.mj[4]=o.x,this.mj[5]=o.y,this.mj[6]=o.z,this.mj[8]=r.x,this.mj[9]=r.y,this.mj[10]=r.z,this.Tj=Iv.inverse(this.mj);const{cellIndex:l,cellSpan:u,cellsAmount:c}=this.oi,d=u.x/c.x,f=u.y/c.y,A=(l.x+u.x/2)/c.x,g=(l.y+u.y/2)/c.y,v=Iv.multiply(Iv.translation(th(-1,1,A),th(-1,1,g),0),Iv.scaling(d,f,1));return this.bY=Iv.multiply(v,Iv.multiply(this.Cj,this.Tj)),this.Fj=Iv.inverse(this.bY),this.xj=!1,{viewProjectionMatrix:this.bY}}kj(){this.bD.fz(this.oi.x),this.bD.Az(this.oi.y),this.bD.gz(this.oi.z)}Mc(t,i,s){var e;const h=this.gl.hR(),r=this.km(),n={x:r.x*h*i,y:r.y*h*i,width:r.width*h*i,height:r.height*h*i};this.gl.yR(n.x,n.y,n.width,n.height);let o=((null===(e=s[s.length-1])||void 0===e?void 0:e.idLast)||0)+1;const a=Array.from(this.eY.values());for(let i=0;i<a.length;i+=1){const e=a[i];if(e.getVisible())if(this.gl.uR(e.lY),this.gl.uv(e.rv),1!==t)e.Mc(t,0);else if(1===t&&e.getPointerEvents()){const{idCount:h}=e.Mc(t,o);void 0!==h&&(s.push({entity:e,layer:this,entityIndex:i,idFirst:o,idCount:h,idLast:o+h-1}),o+=h)}}return this.gl.uR("disabled"),this.gl.uv(!1),this.gl.cR(!1),this}setCameraLocation(t){return this.xY.x===t.x&&this.xY.y===t.y&&this.xY.z===t.z||(this.xj=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.pj.x===t.x&&this.pj.y===t.y&&this.pj.z===t.z||(this.xj=!0),super.setCameraDirection(t),this}N(){super.N(),this.gi.V("resize",this.Mj),this.oi.removeEventListener("cellresize",this.Mj)}gy(t){return this.IU(new fp(this,this.LU,[],t))}Nv(t,i){return this.IU(new lp(this,this.LU,t,i))}yv(){return this.IU(new ep(this,this.LU,[]))}Ip(){return this.IU(new dp(this,this.LU,[]))}bA(){return this.IU(new np(this,this.LU,[]))}hp(t){return this.IU(new gp(this,this.LU,[],t))}yp(t){return this.IU(new vp(this,this.LU,[],t))}}class mp{constructor(t,i){this.Ij=[],this.Lj=[],this.Pj=(t,i)=>{const s=this.Ij.find((i=>i.gc===t));s&&("pointerenter"!==i.type&&"pointermove"!==i.type||this.gi.Na(s,!0,i.timeStamp),"pointerleave"===i.type&&this.gi.Na(s,!1,i.timeStamp))},this.gi=t,this.Sc="init"in i?i.init({engine:t.Bg,handleEvent:this.Pj}):i,this.Bj=0,this.Dj=String(Math.round(1e6*Math.random()))}wn(t,i,s,e){const h=new Kn(t,i,s,e,`${this.Dj}-${this.Bj}`);return this.Ij.push(h),h.addEventListener("dispose",(()=>{var t;const i=this.Ij.indexOf(h);i>=0&&this.Ij.splice(i,1),(null===(t=this.gi.Ga)||void 0===t?void 0:t.entity)===h&&this.gi.Na(void 0,!1,ti.performance.now())})),this.Bj+=1,h}Qo(){const t=this.Ij.filter((t=>t.getVisible()&&t.en().length>0&&Ce(t.Xe))).map((t=>t.vc())),i=this.Lj;this.Sc.update({textList:t,engine:this.gi.Bg,obstructingOverlays:i}),this.Lj.length=0}N(){const t=this.Ij.filter((t=>t.getVisible()&&t.en().length>0&&Ce(t.Xe))).map((t=>t.vc()));this.Sc.dispose&&this.Sc.dispose({textList:t,engine:this.gi.Bg})}TA(t){this.Lj.push(t)}}class Sp extends Cn{constructor(t,i,s,e=Gv){if(super(t,i,s),this.U=n(1,1),this.Ej=!1,this.Rj=0,this.Oj=!0,this.zj=0,this.BY=8388608,this.rE=[null,null],this.Vj=null,this.Nj=null,this.Gj=0,this.kg=!1,this.$j=0,this.Ps=(t=!1)=>(this.ui||this.da||cv(this.XB.gl)||(t&&(this.Ej=!0),this.na=!0,this.Uj||this.ia.mE(t)),this),this.Uj=!1,this.wE=t=>{if(this.ui||this.da)return;const i=t-this.Rj;if(i>=this.Va||-1===this.Va){this.Uj=!0,this.Rj=t,this.Ej=!1;const s=i>50?1e3/60:i;this.oa&&this.oa(s),this.xs.Vr(i),this.wa(),this._a(),this.na=!1,-1!==this.Va&&this.Ej&&(this.ia.mE(this.Ej),this.na=!0),this.aa&&this.aa(),this.Uj=!1,this.P.D("renderframe",{}),this.na&&this.Ps(this.Ej)}else this.na=!0,this.ia.mE()},this.Yj=new Map,this.xz=()=>this.XB,this.jj=()=>{var t,i;const s=this.Fa(),e=this.Oj,h=ti.performance.now(),r=null===(t=this.Hj)||void 0===t?void 0:t.Wj.reduce(((t,i)=>t?i.Xj&&t.Xj&&i.Xj>t.Xj?i:t:i),void 0),n=null==r?void 0:r.Xj,o=null===(i=this.va)||void 0===i?void 0:i.timeStamp,a=this.Zj;return e?(this.Ps(!0),!1):void 0===r||(void 0===r||!r.Jj)&&(void 0!==n&&void 0===s?h-n>=1e3:!(void 0!==n&&void 0!==o&&h-o>=2e3&&(void 0===a||h-a>=2e3))||h-n>=1e3)},this.Qj=()=>{var t,i;this.Kj=void 0;const s=null===(i=null===(t=this.Hj)||void 0===t?void 0:t.qj)||void 0===i?void 0:i.tH;void 0===s||s>=this.zj||this.iH()},this._a=()=>{if(this.ui||this.da)return this;const t=this.XB.gl,i=ti.performance.now();this.XB.AR(t.FRAMEBUFFER,this.ia.fE?this.rE[0]:null);const s=this.U,e=s.x>0&&s.y>0,h=this.XB.hR();if(this.ba.o&&this.XB.AO(this.ba.C()),this.ia.cE&&this.tE&&(this.tE.canvas.width=s.x*h,this.tE.canvas.height=s.y*h),t.resize&&e&&t.resize(s.x*h,s.y*h),this.XB.gR(0,0,s.x*h,s.y*h),this.XB.yR(0,0,s.x*h,s.y*h),this.XB.zi(),e)for(const t of this.ea.values())t.Mc(0,1,[]);if(this.mc&&this.mc.Qo(),this.Ba.Ra&&e&&(this.Kj&&(ti.clearTimeout(this.Kj),this.Kj=void 0),this.jj()?(this.iH(),this.XB.AR(t.FRAMEBUFFER,this.ia.fE?this.rE[0]:null)):this.Kj=ti.setTimeout(this.Qj,500)),this.Y(),this.qo(),Array.from(this.Aa.values()).forEach((t=>{t.lastEvent.isLcjsArtificialEvent=!0,this.ga("pointermove",t.lastEvent)})),this.ia.fE){const i=this.XB.gl2.ctx;i.bindFramebuffer(i.READ_FRAMEBUFFER,this.rE[0]),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.rE[1]),i.clearBufferfv(i.COLOR,0,[1,1,1,1]),i.blitFramebuffer(0,0,this.U.x*h,this.U.y*h,0,0,this.U.x*h,this.U.y*h,t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.qD),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.U.x*h,this.U.y*h,0),t.bindTexture(t.TEXTURE_2D,null);return this.XB.AR(t.FRAMEBUFFER,null),cv(this.XB.gl)?this.ia.QD(0,0,this.U.x*h,this.U.y*h,[this]):this.ia.mE(),this.Oj=!1,this.zj=i,this},this.wa=()=>{if("use-window"===this.sH.mode){const t=ti.devicePixelRatio||1;this.XB.CO(t)}const t=this.U;if(0===t.x||0===t.y)return this;this.Xa.X(t);for(const t of this.ea.values())t.Vr();return this.Y(),this},this.ia=t,this.ia.cE){this.eH=ti.document.createElement("canvas"),this.eH.style.width="100%",this.eH.style.height="100%",this.eH.style.display="block",this.eH.style.boxSizing="content-box",this.eH.style.position="absolute";const t=this.eH.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new jA("No Canvas context available.");this.tE=t,this.On.appendChild(this.eH)}this.ia.CE(this);const h={preserveDrawingBuffer:!0,antialias:i?i.antialias:void 0,alpha:!0,lineAntialias:!i||(!0===i.lineAntiAlias||!1===i.lineAntiAlias?i.lineAntiAlias:!1!==i.antialias)};let r;if(this.ia.fE&&t.gl2&&(r=new e(this,this.Ba,{type:"webgl2",ctx:t.gl2.ctx,antialias:h.antialias,lineAntialias:h.lineAntialias},this.bi.isDark)),r||this.ia.fE||(r=new e(this,this.Ba,{type:"webgl1",ctx:t.gl,antialias:h.antialias,lineAntialias:h.lineAntialias},this.bi.isDark)),!r)throw new jA("No WebGL context available");if(this.XB=r,"number"==typeof(null==i?void 0:i.devicePixelRatio))this.sH={mode:"fixed",value:i.devicePixelRatio},this.XB.CO(i.devicePixelRatio);else{const t=ti.document.head.querySelector('meta[name="viewport"]'),s=!0===i.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),e=ti.devicePixelRatio||1;this.sH=s?{mode:"use-window"}:{mode:"fixed",value:e},this.XB.CO(e)}const o=i?i.width:void 0,a=i?i.height:void 0;this.ja=this.hH(o),this.Wa=this.hH(a),this.rH(this.ja,this.Wa),this.TU=this.OP("engine offscreen",1e6),this.nH=this.OP("engine bg",0);const l="function"==typeof this.bi.lcjsBackgroundFillStyle?qt({resourcesBaseUrl:this.Ba.pe,styleFactory:this.bi.lcjsBackgroundFillStyle,apply:t=>this.setBackgroundFillStyle(t)}):this.bi.lcjsBackgroundFillStyle;this.Xa=this.nH.qe(this.oi).Ke(l).Qe(this.bi.lcjsBackgroundStrokeStyle).setPointerEvents(!1).ih({x:0,y:0});const u=this.OP("engine effects",200001).hY(this.bi.effect);this.vs=u;const c=this.ia.fE,d=this._t();c&&(this.rE=[r.ER(),r.ER()]);const f=this.XB.gl;c&&(this.Vj=f.createRenderbuffer(),this.Nj=f.createRenderbuffer()),this.qD=f.createTexture();const A=d.x*this.XB.hR(),g=d.y*this.XB.hR();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.Vj);const t=this.XB.gl2.ctx;this.Gj=this.ia.YD&&!1!==i.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.Gj,t.RGBA8,A,g),f.bindRenderbuffer(f.RENDERBUFFER,this.Nj),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.Gj,t.DEPTH24_STENCIL8,A,g)}c&&(this.XB.AR(f.FRAMEBUFFER,this.rE[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.Vj),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this.Nj)),f.bindTexture(f.TEXTURE_2D,this.qD),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,A,g,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.XB.AR(f.FRAMEBUFFER,this.rE[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.qD,0)),this.XB.AR(f.FRAMEBUFFER,null),this.ma(),this.qo(),this.Bg=bn(this),this.xc={bi:this.bi,xs:this.xs,oi:this.oi,Ps:t=>this.Ps(t),f_:()=>this.na,Fa:()=>this.Fa(),Is:t=>(this.Zj=ti.performance.now(),this.Is({x:t.clientX,y:t.clientY})),pF:t=>this.pF(t),Ba:this.Ba,Ia:t=>this.Ia(t),vs:this.vs,tl:t=>this.tl(t),il:t=>this.il(t),er:{Lh:(t,i,s)=>{const e=this.XB._r(i.family).oD(t,i,s,this.bi.isDark);return this.mc?{x:e.x,y:e.y,isEstimate:!1}:e}},Gs:()=>this.Aa.size>0,$s:(t,i)=>void 0!==Array.from(this.Aa.values()).find((s=>!(void 0!==t&&s.entity!==t||void 0!==i&&i!==s.collectionMember)))},i.textRenderer&&(this.mc=new mp(this,i.textRenderer));const v=()=>{this.N()};ti.addEventListener("unload",v),this.la.push((()=>{ti.removeEventListener("unload",v)}))}get oH(){return this.ea}sa(t,i){let s=this.Yj.get(t);if(!s){const i=this.XB.BO(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.Yj.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{mF:()=>i.HE,SF:t=>{i.HE?t():n.push(t)}}},this.Yj.set(t,s),i.Qc(this),i.qE((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new Lh(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}pF(t){const i=Array.from(this.Yj.values()).find((i=>i.instances.has(t)));if(!i)throw Ji(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}Is(t){var i;if(this.Ga&&this.Ga.entity.getPointerEvents()){if(this.Ga.pointed||!(ti.performance.now()-this.Ga.timestamp>=50))return{entity:this.Ga.entity,collectionMember:void 0,info:void 0};this.Ga=void 0}const s=null===(i=this.Hj)||void 0===i?void 0:i.qj;if(!s)return;(!this.pa||ti.performance.now()-this.pa>100)&&this.qo();const e=this.rh(t.x,t.y),h=Math.round(e.x*this.XB.hR()),r=Math.round(e.y*this.XB.hR());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.aH(s,h+t[0]/s.lH,r+t[1]/s.lH))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity,collectionMember:i.collectionMember,info:i.info}:t}),void 0)}aH(t,i,s){const e=Math.round(i*t.lH),h=Math.round(s*t.lH);if(e<0||e>=t.U.x||h<0||h>=t.U.y)return;const r=4*(e+h*t.U.x),n=t.uH[r+0],o=t.uH[r+1],a=t.uH[r+2],l=t.uH[r+3];if(void 0===n||void 0===o||void 0===a||void 0===l)return;if(0===n&&0===o&&0===a&&0===l)return;const u=16777216*n+65536*o+256*a+l,c=t.cH.find((t=>u>=t.idFirst&&u<=t.idLast));if(!c)return;const{collectionMember:d,info:f}=c.entity._c(u,c.idFirst,c.idCount,i,s);return{entity:c.entity,collectionMember:d,entityIndex:c.entityIndex,layerIndex:c.layer.Ca(),info:f}}Jo(t,i,s,e=1){const h=1!==e,r=this.XB.gl;let n,o=!this.ia.fE||h||!this.kg;if(this.mc){const t=this.mc;this.mc=void 0;const i=[],s=[];this.ea.forEach((t=>{t.Di.forEach((t=>{t.getVisible()&&t instanceof Kn&&s.push(t)}))})),s.forEach((t=>{const s=t.Hs.wn(t.oi);i.push(s),s.ih(t.zl()).qr(t.en()).kr(t._r()).Ke(t.br()).Xl(t.jl()).xn(t.Zl()).Mn(t.Jl()).Cr(t.Tr()).Kr(t.Nl()).rl(t.nl()).setPointerEvents(!1)})),n={ctr:t,temporaryWebglTextObjects:i},o=!0}const a=this.U;h&&this.ma({x:a.x*e,y:a.y*e}),o&&(h&&this.oa&&this.oa(0),this.wa(),this._a()),this.ia.fE?(this.XB.AR(r.FRAMEBUFFER,this.rE[1]),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.qD,0)):this.XB.AR(r.FRAMEBUFFER,null);const l=this.KD(),u=l.x,c=l.y,d=new Uint8Array(u*c*4);r.readPixels(0,0,u,c,r.RGBA,r.UNSIGNED_BYTE,d),n&&(n.temporaryWebglTextObjects.forEach((t=>t.dispose())),this.mc=n.ctr,this._a());const f=new ImageData(new Uint8ClampedArray(d),u,c),A=document.createElement("canvas"),g=A.getContext("2d");if(!g)throw new Error("Failed to create 2D context for saving image.");A.width=u,A.height=c,g.putImageData(f,0,0),g.translate(0,c),g.scale(1,-1),g.drawImage(A,0,0),this.ia.fE&&(this.XB.AR(r.FRAMEBUFFER,this.rE[0]),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.Vj),this.XB.AR(r.FRAMEBUFFER,this.rE[1]),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.qD,0)),this.XB.AR(r.FRAMEBUFFER,null);const v=A.toDataURL(t,i);return h&&this.ma(a),s?v:(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=ti.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new ti.Blob([e.buffer],{type:i})})(v)}Qo(t,i,s=!1){this.ma(r(Math.round(t),Math.round(i))),this.Ma();const e=this.XB.gl.drawingBufferWidth,h=this.XB.gl.drawingBufferHeight,n=new Uint8Array(e*h*4);if(this.XB.gl.readPixels(0,0,e,h,this.XB.gl.RGBA,this.XB.gl.UNSIGNED_BYTE,n),!s){const t=h/2|0,i=4*e,s=new Uint8Array(4*e);for(let e=0;e<t;e+=1){const t=e*i,r=(h-e-1)*i;s.set(n.subarray(t,t+i)),n.copyWithin(t,r,r+i),n.set(s,r)}}return this.ra={x:0,y:i},n}cB(t){return void 0!==this.ja?this.ja[0]=t:this.ja=[t,void 0],this.On.style.minWidth=`${this.ja[0]}px`,this.ma(),this}fB(t){return void 0!==this.ja?this.ja[1]=t:this.ja=[void 0,t],this.On.style.maxWidth=`${this.ja[1]}px`,this.ma(),this}gB(t){return void 0!==this.Wa?this.Wa[0]=t:this.Wa=[t,void 0],this.On.style.minHeight=`${this.Wa[0]}px`,this.ma(),this}yB(t){return void 0!==this.Wa?this.Wa[1]=t:this.Wa=[void 0,t],this.On.style.maxHeight=`${this.Wa[1]}px`,this.ma(),this}rH(t,i){return this.ja=t,this.Wa=i,this.On.style.minWidth=`${this.ja[0]}px`,this.On.style.maxWidth=`${this.ja[1]}px`,this.On.style.minHeight=`${this.Wa[0]}px`,this.On.style.maxHeight=`${this.Wa[1]}px`,this.ma(),this}JD(t){return this.kg!==t&&(this.P.D("inviewchanged",{isInView:t}),this.kg=t),this}ZD(){return this.kg}TE(t){this.$j=t}kE(){return this.$j}OP(t,i=this.qa()){const s=this.Ka(i);if(s){if(Ji(0,(()=>{})),!(s instanceof Wy))throw new Error("Unexpected Engine Layer error");return s}return this.ka(new Wy(this,i,t))}NP(t,i,s){const e=this.Ka(i);if(e){if(Ji(0,(()=>{})),!(e instanceof pp))throw new Error("Unexpected Engine Layer error");return e}return this.ka(new pp(this,i,t,s))}_t(){return this.U}KD(){const t=this.XB.hR();return{x:Math.round(this.U.x*t),y:Math.round(this.U.y*t)}}hH(t){return t instanceof Array||(t=[t,t]),t}dH(){return this.ia.iE}fH(){return cv(this.XB.gl)}iH(){var t;const i=this.XB.gl,s=ti.performance.now(),e=this.Ba.Ea,h={x:Math.ceil(this.U.x*this.XB.hR()*e),y:Math.ceil(this.U.y*this.XB.hR()*e)};this.Hj||(this.Hj={lH:e,AH:h,Wj:[],qj:void 0});let r=this.Hj.Wj.find((t=>!t.Jj)),n=!1;r||(n=!0,r={Jj:!1,U:h,HO:i.createTexture(),gH:this.XB.ER(),Nj:this.XB.RR(),vH:new Uint8Array,Xj:void 0},this.Hj.Wj.push(r));const o=r;(n||o.U.x!==h.x||o.U.y!==h.y)&&(i.bindTexture(i.TEXTURE_2D,o.HO),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,h.x,h.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.XB.AR(i.FRAMEBUFFER,o.gH),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o.HO,0),i.bindRenderbuffer(i.RENDERBUFFER,o.Nj),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,h.x,h.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,o.Nj),o.vH=new Uint8Array(h.x*h.y*4),o.U=h),o.Jj=!0,o.Xj=s,this.XB.AR(i.FRAMEBUFFER,o.gH),i.clearDepth(1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(h.x,h.y),this.XB.gR(0,0,h.x,h.y);const a=[];for(const t of this.ea.values())t.Mc(1,e,a);this.XB.AR(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const l=null===(t=this.XB.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this.Hj){const t=this.Hj.qj;if(t&&t.tH>s)return;this.Hj.qj={tH:s,lH:e,U:h,uH:o.vH,cH:a}}};l?this.XB.UO(l,o.gH,0,0,h.x,h.y,i.RGBA,i.UNSIGNED_BYTE,o.vH).then((()=>{this.ui||(o.Jj=!1,u())})).catch((t=>{this.ui||(o.Jj=!1,ti.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.XB.YO(o.gH,0,0,h.x,h.y,i.RGBA,i.UNSIGNED_BYTE,o.vH),o.Jj=!1,u())}ma(t){const i=this.XB.hR();if("use-window"===this.sH.mode){const t=ti.devicePixelRatio||1;this.XB.CO(t)}const s=this.U.x,e=this.U.y,h=t||{x:this.On.offsetWidth,y:this.On.offsetHeight},r=this.XB.hR();if(0!==h.x&&0!==h.y&&(h.x!==s||h.y!==e||i!==r)){this.U=h,this.oi.x.H(0,h.x).X(h.x),this.oi.y.H(0,h.y).X(h.y);const t=h.x*r,i=h.y*r,s=this.XB.gl,e=this.ia.fE;if(this.qD&&(s.bindTexture(s.TEXTURE_2D,this.qD),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,i,0,s.RGBA,s.UNSIGNED_BYTE,null)),e){const e=this.XB.gl2.ctx;this.Vj&&(s.bindRenderbuffer(s.RENDERBUFFER,this.Vj),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.Gj,e.RGBA8,t,i)),this.Nj&&(s.bindRenderbuffer(s.RENDERBUFFER,this.Nj),e.renderbufferStorageMultisample(e.RENDERBUFFER,this.Gj,e.DEPTH24_STENCIL8,t,i))}s.bindRenderbuffer(s.RENDERBUFFER,null),this.P.D("resize",{engineWidth:this.U.x,engineHeight:this.U.y,width:this.U.x,height:this.U.y})}}N(){var t;this.ui||(super.N(),this.mc&&this.mc.N(),this.Kj&&(ti.clearTimeout(this.Kj),this.Kj=void 0),Array.from(this.XB.DD.entries()).forEach((([t,i])=>{i.wc(!1),this.XB.DD.delete(t)})),Array.from(this.XB.NR.values()).forEach((t=>{t.unbindResources()})),this.XB.NR.clear(),this.XB.VR.GE(),this.XB.MO.N(),this.XB.PR(this.XB.wO),this.XB.PR(this.XB._O),this.XB.mO.forEach(((t,i)=>{this.XB.gl.deleteBuffer(i)})),this.XB.mO.clear(),this.XB.zO&&(this.XB.PR(this.XB.zO.buffer),this.XB.zO=void 0),this.XB.zR(this.rE[0]),this.XB.zR(this.rE[1]),this.XB.OR(this.Vj),this.XB.QB(this.qD),this.XB.OR(this.Nj),this.Hj&&(this.Hj.Wj.forEach((t=>{this.XB.OR(t.Nj),this.XB.zR(t.gH),this.XB.QB(t.HO)})),this.Hj=void 0),this.XB.vO.forEach((t=>this.XB.PR(t))),this.Yj.clear(),this.ia.FE(this),this.eH&&(null===(t=this.eH.parentElement)||void 0===t||t.removeChild(this.eH),this.eH=void 0),this.tE&&(this.tE=void 0),this.XB.gl=void 0)}}var bp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xp={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.KE(t||0,i||10,s||"be"))}var r;"object"==typeof xp?xp.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,l=t.charCodeAt(o)-48;h<<=4,h|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var l=t.charCodeAt(a)-48;r*=h,n=l>=49?l-49+10:l>=17?l-17+10:l,s(l>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.KE=function(t,i,e){if("number"==typeof t)return this.yH(t,i,e);if("object"==typeof t)return this.pH(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.mH(t,h):this.SH(t,i,h),"-"===t[0]&&(this.negative=1),this.bH(),"le"===e&&this.pH(this.toArray(),i,e)},h.prototype.yH=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.pH(this.toArray(),i,e)},h.prototype.pH=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.bH()},h.prototype.mH=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.bH()},h.prototype.SH=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,l=0,u=s;u<a;u+=e)l=o(t,u,u+e,i),this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this.xH(l);if(0!==n){var c=1;for(l=o(t,u,t.length,i),u=0;u<n;u++)c*=i;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.xH(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.MH=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.wH=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.bH=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._H()},h.prototype._H=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var l=1;l<e;l++){for(var u=a>>>26,c=67108863&a,d=Math.min(l,i.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var A=l-f|0;u+=(n=(h=0|t.words[A])*(r=0|i.words[f])+c)/67108864|0,c=67108863&n}s.words[l]=0|c,a=0|u}return 0!==a?s.words[l]=0|a:s.length--,s.bH()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?u[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];e="";var A=this.clone();for(A.negative=0;!A.isZero();){var g=A.modrn(f).toString(t);e=(A=A.idivn(f)).isZero()?g+e:u[l-g.length]+g+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.bH();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.kH=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.CH=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.TH=function(t){return 32-Math.clz32(t)}:h.prototype.TH=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.FH=function(t){if(0===t)return 26;var i=t,s=0;return 8191&i||(s+=13,i>>>=13),127&i||(s+=7,i>>>=7),15&i||(s+=4,i>>>=4),3&i||(s+=2,i>>>=2),1&i||s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.TH(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.FH(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.bH()},h.prototype.ior=function(t){return s(!(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.bH()},h.prototype.iand=function(t){return s(!(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.bH()},h.prototype.ixor=function(t){return s(!(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.wH(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.bH()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.wH(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.bH()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._H();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._H();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._H()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._H();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.bH()},h.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,l=0,u=0|n[0],c=8191&u,d=u>>>13,f=0|n[1],A=8191&f,g=f>>>13,v=0|n[2],y=8191&v,p=v>>>13,m=0|n[3],S=8191&m,b=m>>>13,x=0|n[4],M=8191&x,w=x>>>13,_=0|n[5],k=8191&_,C=_>>>13,T=0|n[6],F=8191&T,I=T>>>13,L=0|n[7],P=8191&L,B=L>>>13,D=0|n[8],E=8191&D,R=D>>>13,O=0|n[9],z=8191&O,V=O>>>13,N=0|o[0],G=8191&N,$=N>>>13,U=0|o[1],Y=8191&U,j=U>>>13,H=0|o[2],W=8191&H,X=H>>>13,Z=0|o[3],J=8191&Z,Q=Z>>>13,K=0|o[4],q=8191&K,tt=K>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,lt=ot>>>13,ut=0|o[8],ct=8191&ut,dt=ut>>>13,ft=0|o[9],At=8191&ft,gt=ft>>>13;s.negative=t.negative^i.negative,s.length=19;var vt=(l+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,$))+Math.imul(d,G)|0))<<13)|0;l=((r=Math.imul(d,$))+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(A,G),h=(h=Math.imul(A,$))+Math.imul(g,G)|0,r=Math.imul(g,$);var yt=(l+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,j)|0)+Math.imul(d,Y)|0))<<13)|0;l=((r=r+Math.imul(d,j)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(y,G),h=(h=Math.imul(y,$))+Math.imul(p,G)|0,r=Math.imul(p,$),e=e+Math.imul(A,Y)|0,h=(h=h+Math.imul(A,j)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,j)|0;var pt=(l+(e=e+Math.imul(c,W)|0)|0)+((8191&(h=(h=h+Math.imul(c,X)|0)+Math.imul(d,W)|0))<<13)|0;l=((r=r+Math.imul(d,X)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(S,G),h=(h=Math.imul(S,$))+Math.imul(b,G)|0,r=Math.imul(b,$),e=e+Math.imul(y,Y)|0,h=(h=h+Math.imul(y,j)|0)+Math.imul(p,Y)|0,r=r+Math.imul(p,j)|0,e=e+Math.imul(A,W)|0,h=(h=h+Math.imul(A,X)|0)+Math.imul(g,W)|0,r=r+Math.imul(g,X)|0;var mt=(l+(e=e+Math.imul(c,J)|0)|0)+((8191&(h=(h=h+Math.imul(c,Q)|0)+Math.imul(d,J)|0))<<13)|0;l=((r=r+Math.imul(d,Q)|0)+(h>>>13)|0)+(mt>>>26)|0,mt&=67108863,e=Math.imul(M,G),h=(h=Math.imul(M,$))+Math.imul(w,G)|0,r=Math.imul(w,$),e=e+Math.imul(S,Y)|0,h=(h=h+Math.imul(S,j)|0)+Math.imul(b,Y)|0,r=r+Math.imul(b,j)|0,e=e+Math.imul(y,W)|0,h=(h=h+Math.imul(y,X)|0)+Math.imul(p,W)|0,r=r+Math.imul(p,X)|0,e=e+Math.imul(A,J)|0,h=(h=h+Math.imul(A,Q)|0)+Math.imul(g,J)|0,r=r+Math.imul(g,Q)|0;var St=(l+(e=e+Math.imul(c,q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(d,q)|0))<<13)|0;l=((r=r+Math.imul(d,tt)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(k,G),h=(h=Math.imul(k,$))+Math.imul(C,G)|0,r=Math.imul(C,$),e=e+Math.imul(M,Y)|0,h=(h=h+Math.imul(M,j)|0)+Math.imul(w,Y)|0,r=r+Math.imul(w,j)|0,e=e+Math.imul(S,W)|0,h=(h=h+Math.imul(S,X)|0)+Math.imul(b,W)|0,r=r+Math.imul(b,X)|0,e=e+Math.imul(y,J)|0,h=(h=h+Math.imul(y,Q)|0)+Math.imul(p,J)|0,r=r+Math.imul(p,Q)|0,e=e+Math.imul(A,q)|0,h=(h=h+Math.imul(A,tt)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,tt)|0;var bt=(l+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(d,st)|0))<<13)|0;l=((r=r+Math.imul(d,et)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(F,G),h=(h=Math.imul(F,$))+Math.imul(I,G)|0,r=Math.imul(I,$),e=e+Math.imul(k,Y)|0,h=(h=h+Math.imul(k,j)|0)+Math.imul(C,Y)|0,r=r+Math.imul(C,j)|0,e=e+Math.imul(M,W)|0,h=(h=h+Math.imul(M,X)|0)+Math.imul(w,W)|0,r=r+Math.imul(w,X)|0,e=e+Math.imul(S,J)|0,h=(h=h+Math.imul(S,Q)|0)+Math.imul(b,J)|0,r=r+Math.imul(b,Q)|0,e=e+Math.imul(y,q)|0,h=(h=h+Math.imul(y,tt)|0)+Math.imul(p,q)|0,r=r+Math.imul(p,tt)|0,e=e+Math.imul(A,st)|0,h=(h=h+Math.imul(A,et)|0)+Math.imul(g,st)|0,r=r+Math.imul(g,et)|0;var xt=(l+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(d,rt)|0))<<13)|0;l=((r=r+Math.imul(d,nt)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(P,G),h=(h=Math.imul(P,$))+Math.imul(B,G)|0,r=Math.imul(B,$),e=e+Math.imul(F,Y)|0,h=(h=h+Math.imul(F,j)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,j)|0,e=e+Math.imul(k,W)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(C,W)|0,r=r+Math.imul(C,X)|0,e=e+Math.imul(M,J)|0,h=(h=h+Math.imul(M,Q)|0)+Math.imul(w,J)|0,r=r+Math.imul(w,Q)|0,e=e+Math.imul(S,q)|0,h=(h=h+Math.imul(S,tt)|0)+Math.imul(b,q)|0,r=r+Math.imul(b,tt)|0,e=e+Math.imul(y,st)|0,h=(h=h+Math.imul(y,et)|0)+Math.imul(p,st)|0,r=r+Math.imul(p,et)|0,e=e+Math.imul(A,rt)|0,h=(h=h+Math.imul(A,nt)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,nt)|0;var Mt=(l+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((r=r+Math.imul(d,lt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(E,G),h=(h=Math.imul(E,$))+Math.imul(R,G)|0,r=Math.imul(R,$),e=e+Math.imul(P,Y)|0,h=(h=h+Math.imul(P,j)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,j)|0,e=e+Math.imul(F,W)|0,h=(h=h+Math.imul(F,X)|0)+Math.imul(I,W)|0,r=r+Math.imul(I,X)|0,e=e+Math.imul(k,J)|0,h=(h=h+Math.imul(k,Q)|0)+Math.imul(C,J)|0,r=r+Math.imul(C,Q)|0,e=e+Math.imul(M,q)|0,h=(h=h+Math.imul(M,tt)|0)+Math.imul(w,q)|0,r=r+Math.imul(w,tt)|0,e=e+Math.imul(S,st)|0,h=(h=h+Math.imul(S,et)|0)+Math.imul(b,st)|0,r=r+Math.imul(b,et)|0,e=e+Math.imul(y,rt)|0,h=(h=h+Math.imul(y,nt)|0)+Math.imul(p,rt)|0,r=r+Math.imul(p,nt)|0,e=e+Math.imul(A,at)|0,h=(h=h+Math.imul(A,lt)|0)+Math.imul(g,at)|0,r=r+Math.imul(g,lt)|0;var wt=(l+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((r=r+Math.imul(d,dt)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,G),h=(h=Math.imul(z,$))+Math.imul(V,G)|0,r=Math.imul(V,$),e=e+Math.imul(E,Y)|0,h=(h=h+Math.imul(E,j)|0)+Math.imul(R,Y)|0,r=r+Math.imul(R,j)|0,e=e+Math.imul(P,W)|0,h=(h=h+Math.imul(P,X)|0)+Math.imul(B,W)|0,r=r+Math.imul(B,X)|0,e=e+Math.imul(F,J)|0,h=(h=h+Math.imul(F,Q)|0)+Math.imul(I,J)|0,r=r+Math.imul(I,Q)|0,e=e+Math.imul(k,q)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(C,q)|0,r=r+Math.imul(C,tt)|0,e=e+Math.imul(M,st)|0,h=(h=h+Math.imul(M,et)|0)+Math.imul(w,st)|0,r=r+Math.imul(w,et)|0,e=e+Math.imul(S,rt)|0,h=(h=h+Math.imul(S,nt)|0)+Math.imul(b,rt)|0,r=r+Math.imul(b,nt)|0,e=e+Math.imul(y,at)|0,h=(h=h+Math.imul(y,lt)|0)+Math.imul(p,at)|0,r=r+Math.imul(p,lt)|0,e=e+Math.imul(A,ct)|0,h=(h=h+Math.imul(A,dt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,dt)|0;var _t=(l+(e=e+Math.imul(c,At)|0)|0)+((8191&(h=(h=h+Math.imul(c,gt)|0)+Math.imul(d,At)|0))<<13)|0;l=((r=r+Math.imul(d,gt)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(z,Y),h=(h=Math.imul(z,j))+Math.imul(V,Y)|0,r=Math.imul(V,j),e=e+Math.imul(E,W)|0,h=(h=h+Math.imul(E,X)|0)+Math.imul(R,W)|0,r=r+Math.imul(R,X)|0,e=e+Math.imul(P,J)|0,h=(h=h+Math.imul(P,Q)|0)+Math.imul(B,J)|0,r=r+Math.imul(B,Q)|0,e=e+Math.imul(F,q)|0,h=(h=h+Math.imul(F,tt)|0)+Math.imul(I,q)|0,r=r+Math.imul(I,tt)|0,e=e+Math.imul(k,st)|0,h=(h=h+Math.imul(k,et)|0)+Math.imul(C,st)|0,r=r+Math.imul(C,et)|0,e=e+Math.imul(M,rt)|0,h=(h=h+Math.imul(M,nt)|0)+Math.imul(w,rt)|0,r=r+Math.imul(w,nt)|0,e=e+Math.imul(S,at)|0,h=(h=h+Math.imul(S,lt)|0)+Math.imul(b,at)|0,r=r+Math.imul(b,lt)|0,e=e+Math.imul(y,ct)|0,h=(h=h+Math.imul(y,dt)|0)+Math.imul(p,ct)|0,r=r+Math.imul(p,dt)|0;var kt=(l+(e=e+Math.imul(A,At)|0)|0)+((8191&(h=(h=h+Math.imul(A,gt)|0)+Math.imul(g,At)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,W),h=(h=Math.imul(z,X))+Math.imul(V,W)|0,r=Math.imul(V,X),e=e+Math.imul(E,J)|0,h=(h=h+Math.imul(E,Q)|0)+Math.imul(R,J)|0,r=r+Math.imul(R,Q)|0,e=e+Math.imul(P,q)|0,h=(h=h+Math.imul(P,tt)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(F,st)|0,h=(h=h+Math.imul(F,et)|0)+Math.imul(I,st)|0,r=r+Math.imul(I,et)|0,e=e+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(C,rt)|0,r=r+Math.imul(C,nt)|0,e=e+Math.imul(M,at)|0,h=(h=h+Math.imul(M,lt)|0)+Math.imul(w,at)|0,r=r+Math.imul(w,lt)|0,e=e+Math.imul(S,ct)|0,h=(h=h+Math.imul(S,dt)|0)+Math.imul(b,ct)|0,r=r+Math.imul(b,dt)|0;var Ct=(l+(e=e+Math.imul(y,At)|0)|0)+((8191&(h=(h=h+Math.imul(y,gt)|0)+Math.imul(p,At)|0))<<13)|0;l=((r=r+Math.imul(p,gt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,J),h=(h=Math.imul(z,Q))+Math.imul(V,J)|0,r=Math.imul(V,Q),e=e+Math.imul(E,q)|0,h=(h=h+Math.imul(E,tt)|0)+Math.imul(R,q)|0,r=r+Math.imul(R,tt)|0,e=e+Math.imul(P,st)|0,h=(h=h+Math.imul(P,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(F,rt)|0,h=(h=h+Math.imul(F,nt)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,nt)|0,e=e+Math.imul(k,at)|0,h=(h=h+Math.imul(k,lt)|0)+Math.imul(C,at)|0,r=r+Math.imul(C,lt)|0,e=e+Math.imul(M,ct)|0,h=(h=h+Math.imul(M,dt)|0)+Math.imul(w,ct)|0,r=r+Math.imul(w,dt)|0;var Tt=(l+(e=e+Math.imul(S,At)|0)|0)+((8191&(h=(h=h+Math.imul(S,gt)|0)+Math.imul(b,At)|0))<<13)|0;l=((r=r+Math.imul(b,gt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,q),h=(h=Math.imul(z,tt))+Math.imul(V,q)|0,r=Math.imul(V,tt),e=e+Math.imul(E,st)|0,h=(h=h+Math.imul(E,et)|0)+Math.imul(R,st)|0,r=r+Math.imul(R,et)|0,e=e+Math.imul(P,rt)|0,h=(h=h+Math.imul(P,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(F,at)|0,h=(h=h+Math.imul(F,lt)|0)+Math.imul(I,at)|0,r=r+Math.imul(I,lt)|0,e=e+Math.imul(k,ct)|0,h=(h=h+Math.imul(k,dt)|0)+Math.imul(C,ct)|0,r=r+Math.imul(C,dt)|0;var Ft=(l+(e=e+Math.imul(M,At)|0)|0)+((8191&(h=(h=h+Math.imul(M,gt)|0)+Math.imul(w,At)|0))<<13)|0;l=((r=r+Math.imul(w,gt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,st),h=(h=Math.imul(z,et))+Math.imul(V,st)|0,r=Math.imul(V,et),e=e+Math.imul(E,rt)|0,h=(h=h+Math.imul(E,nt)|0)+Math.imul(R,rt)|0,r=r+Math.imul(R,nt)|0,e=e+Math.imul(P,at)|0,h=(h=h+Math.imul(P,lt)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,lt)|0,e=e+Math.imul(F,ct)|0,h=(h=h+Math.imul(F,dt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,dt)|0;var It=(l+(e=e+Math.imul(k,At)|0)|0)+((8191&(h=(h=h+Math.imul(k,gt)|0)+Math.imul(C,At)|0))<<13)|0;l=((r=r+Math.imul(C,gt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,rt),h=(h=Math.imul(z,nt))+Math.imul(V,rt)|0,r=Math.imul(V,nt),e=e+Math.imul(E,at)|0,h=(h=h+Math.imul(E,lt)|0)+Math.imul(R,at)|0,r=r+Math.imul(R,lt)|0,e=e+Math.imul(P,ct)|0,h=(h=h+Math.imul(P,dt)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,dt)|0;var Lt=(l+(e=e+Math.imul(F,At)|0)|0)+((8191&(h=(h=h+Math.imul(F,gt)|0)+Math.imul(I,At)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,e=Math.imul(z,at),h=(h=Math.imul(z,lt))+Math.imul(V,at)|0,r=Math.imul(V,lt),e=e+Math.imul(E,ct)|0,h=(h=h+Math.imul(E,dt)|0)+Math.imul(R,ct)|0,r=r+Math.imul(R,dt)|0;var Pt=(l+(e=e+Math.imul(P,At)|0)|0)+((8191&(h=(h=h+Math.imul(P,gt)|0)+Math.imul(B,At)|0))<<13)|0;l=((r=r+Math.imul(B,gt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,ct),h=(h=Math.imul(z,dt))+Math.imul(V,ct)|0,r=Math.imul(V,dt);var Bt=(l+(e=e+Math.imul(E,At)|0)|0)+((8191&(h=(h=h+Math.imul(E,gt)|0)+Math.imul(R,At)|0))<<13)|0;l=((r=r+Math.imul(R,gt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Dt=(l+(e=Math.imul(z,At))|0)+((8191&(h=(h=Math.imul(z,gt))+Math.imul(V,At)|0))<<13)|0;return l=((r=Math.imul(V,gt))+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,a[0]=vt,a[1]=yt,a[2]=pt,a[3]=mt,a[4]=St,a[5]=bt,a[6]=xt,a[7]=Mt,a[8]=wt,a[9]=_t,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=Ft,a[14]=It,a[15]=Lt,a[16]=Pt,a[17]=Bt,a[18]=Dt,0!==l&&(a[19]=l,s.length++),s};function g(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),l=Math.max(0,r-t.length+1);l<=a;l++){var u=r-l,c=(0|t.words[u])*(0|i.words[l]),d=67108863&c;o=67108863&(d=d+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(d>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.bH()}function v(t,i,s){return g(t,i,s)}Math.imul||(A=f),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?A(this,t,i):s<63?f(this,t,i):s<1024?g(this,t,i):v(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),v(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.bH()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var l=0;l<n;l++)a.words[l]=this.words[l];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,l=0;l<this.length;l++)this.words[l]=this.words[l+n];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=h);l--){var c=0|this.words[l];this.words[l]=u<<26-r|c>>>r,u=c&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.bH()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.bH()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.xH(t)},h.prototype.xH=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.bH()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.IH=function(t,i,e){var h,r,n=t.length+e;this.wH(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.bH();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.bH()},h.prototype.LH=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.TH(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=e.clone().IH(r,1,a);0===u.negative&&(e=u,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var d=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(d=Math.min(d/n|0,67108863),e.IH(r,d,c);0!==e.negative;)d--,e.negative=0,e.IH(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=d)}return o&&o.bH(),e.bH(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.LH(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.bH(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),l=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++l;for(var u=e.clone(),c=i.clone();!i.isZero();){for(var d=0,f=1;!(i.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var A=0,g=1;!(e.words[0]&g)&&A<26;++A,g<<=1);if(A>0)for(e.iushrn(A);A-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(l)}},h.prototype.PH=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var l=0,u=1;!(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,d=1;!(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return!(1&this.words[0])},h.prototype.isOdd=function(){return!(1&~this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.wH(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.bH(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new M(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).BH(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.BH=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.BH(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.DH(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.DH(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red.EH(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red.EH(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red.EH(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red.EH(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red.EH(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red.EH(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function p(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.RH()}function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var i=h.OH(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.PH(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p.prototype.RH=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.bH(),s},p.prototype.split=function(t,i){t.iushrn(this.n,0,i)},p.prototype.imulK=function(t){return t.imul(this.k)},e(m,p),m.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(S,p),e(b,p),e(x,p),x.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.OH=function(t){if(y[t])return y[t];var i;if("k256"===t)i=new m;else if("p224"===t)i=new S;else if("p192"===t)i=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new x}return y[t]=i,i},M.prototype.EH=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},M.prototype.DH=function(t,i){s(!(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).BH(this):(a(t,t.umod(this.m).BH(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).BH(this)},M.prototype.add=function(t,i){this.DH(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.BH(this)},M.prototype.iadd=function(t,i){this.DH(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},M.prototype.sub=function(t,i){this.DH(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.BH(this)},M.prototype.isub=function(t,i){this.DH(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},M.prototype.shl=function(t,i){return this.EH(t),this.imod(t.ushln(i))},M.prototype.imul=function(t,i){return this.DH(t,i),this.imod(t.imul(i))},M.prototype.mul=function(t,i){return this.DH(t,i),this.imod(t.mul(i))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new h(2*u*u).toRed(this);0!==this.pow(u,l).cmp(a);)u.redIAdd(a);for(var c=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),A=n;0!==f.cmp(o);){for(var g=f,v=0;0!==g.cmp(o);v++)g=g.redSqr();s(v<A);var y=this.pow(c,new h(1).iushln(A-v-1));d=d.redMul(y),c=y.redSqr(),f=f.redMul(c),A=v}return d},M.prototype.invm=function(t){var i=t.PH(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},M.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var l=i.words[e],u=a-1;u>=0;u--){var c=l>>u&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===u)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},M.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},M.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new w(t)},e(w,M),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},w.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.BH(this)},w.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).BH(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.BH(this)},w.prototype.invm=function(t){return this.imod(t.PH(this.m).mul(this.r2)).BH(this)}}(0,bp);var Mp=xp.exports;function wp(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const _p=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},kp=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),1&o){const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}else r=0;if(s[0].push(r),1&a){const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}else n=0;s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Cp{constructor(t,i){this.type=t,this.p=new Mp(i.p,16),this.red=i.prime?Mp.red(i.prime):Mp.mont(this.p),this.zero=new Mp(0).toRed(this.red),this.one=new Mp(1).toRed(this.red),this.two=new Mp(2).toRed(this.red),this.n=i.n&&new Mp(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.zH=new Array(4),this.VH=new Array(4),this.NH=new Array(4),this.GH=new Array(4),this.$H=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.UH=!0,this.redN=this.n.toRed(this.red))}YH(t,i){const s=t.jH(),e=_p(i,1,this.$H);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}HH(t,i){let s=4;const e=t.WH(s);s=e.wnd;const h=e.points,r=_p(i,s,this.$H);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}XH(t,i,s,e,h){const r=this.zH,n=this.VH,o=this.NH;let a=0;for(let s=0;s<e;s++){const e=i[s].WH(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=_p(s[e],r[e],this.$H),o[h]=_p(s[h],r[h],this.$H),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const l=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(l[1]=i[e].add(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].add(i[h].neg())):(l[1]=i[e].toJ().mixedAdd(i[h]),l[2]=i[e].toJ().mixedAdd(i[h].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=kp(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=u[3*(i+1)+(s+1)],o[h][t]=0,n[e]=l}}let l=this.jpoint(null,null,null);const u=this.GH;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)u[i]=0|o[i][t],0!==u[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,l=l.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=u[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),l="affine"===s.type?l.mixedAdd(s):l.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?l:l.toP()}decodePoint(t,i){t=wp(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Tp{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}ZH(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.ZH(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.WH(8),i.doubles=this.jH(4,t),i.beta=this.JH(),this.precomputed=i,this}QH(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}jH(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}WH(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}JH(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class Fp extends Cp{constructor(t){super("short",t),this.a=new Mp(t.a,16).toRed(this.red),this.b=new Mp(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.KH(t),this.qH=new Array(4),this.tW=new Array(4)}pointFromJSON(t,i){return Ip.fromJSON(this,t,i)}KH(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new Mp(t.beta,16).toRed(this.red);else{const t=this.iW(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new Mp(t.lambda,16);else{const t=this.iW(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new Mp(t.a,16),b:new Mp(t.b,16)}))):this.sW(s),{beta:i,lambda:s,basis:e}}iW(t){const i=t===this.p?this.red:Mp.mont(t),s=new Mp(2).toRed(i).redInvm(),e=s.redNeg(),h=new Mp(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}sW(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,l,u,c=t,d=this.n.clone(),f=new Mp(1),A=new Mp(0),g=new Mp(0),v=new Mp(1),y=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=g.sub(t.mul(f));const n=v.sub(t.mul(A));if(!h&&l.cmp(i)<0)s=a.neg(),e=f,h=l.neg(),r=u;else if(h&&2==++y)break;a=l,d=c,c=l,g=f,f=u,v=A,A=n}n=l.neg(),o=u;const p=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(p)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}eW(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),l=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(l).neg()}}point(t,i,s){return new Ip(this,t,i,s)}pointFromX(t,i){(t=new Mp(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}hW(t,i,s){const e=this.qH,h=this.tW;let r=0;for(r=0;r<t.length;r++){const s=this.eW(i[r]);let n=t[r],o=n.JH();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.XH(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new Lp(this,t,i,s)}}class Ip extends Tp{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new Mp(i,16),this.y=new Mp(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new Ip(this,t,i,s)}JH(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Mp(t,16),this.isInfinity()?this:this.QH(t)?this.curve.YH(this,t):this.curve.endo?this.curve.hW([this],[t]):this.curve.HH(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.hW(e,h):this.curve.XH(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.hW(e,h,!0):this.curve.XH(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Lp extends Tp{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Mp(0)):(this.x=new Mp(i,16),this.y=new Mp(s,16),this.z=new Mp(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new Lp(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=o.redSqr(),u=l.redMul(o),c=e.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(r.redMul(u)),A=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(d,f,A)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),l=a.redMul(n),u=s.redMul(a),c=o.redSqr().redIAdd(l).redISub(u).redISub(u),d=o.redMul(u.redISub(c)).redISub(h.redMul(l)),f=this.z.redMul(n);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),l=a.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let A=u.redMul(f);A=A.redIAdd(A).redISub(l);const g=o.redMul(r);s+1<t&&(n=n.redMul(l)),e=d,r=g,o=A}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.rW():this.curve.threeA?this.nW():this.oW()}rW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a,i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(l),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}nW(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let l=r.redIAdd(r);l=l.redIAdd(l),l=l.redIAdd(l),i=o.redMul(n.redISub(a)).redISub(l),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let l=h.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),i=n.redMul(o.redISub(t)).redISub(l)}return this.curve.jpoint(t,i,s)}oW(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const l=a.redMul(n),u=o.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=o.redMul(c).redISub(d),A=s.redAdd(s).redMul(e);return this.curve.jpoint(u,f,A)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let u=i.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(o).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(n.redMul(o)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,d,f)}mul(t,i){return t=new Mp(t,i),this.curve.HH(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Pp{constructor(t){this.curve=new Fp(t),this.g=this.curve.g,this.n=this.curve.n}}const Bp={};var Dp,Ep;Bp.PresetCurve=Pp,Dp="secp256k1",Ep={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Bp,Dp,{configurable:!0,enumerable:!0,get(){const t=new Pp(Ep);return Object.defineProperty(Bp,Dp,{configurable:!0,enumerable:!0,value:t}),t}});class Rp{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.aW(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Rp?i:new Rp(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}aW(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function Op(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class zp{constructor(){this.place=0}}class Vp{constructor(t,i){if(t instanceof Vp)return t;this.lW(t,i)||(this.r=new Mp(t.r,16),this.s=new Mp(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}lW(t,i){t=wp(t,i);const s=new zp;if(48!==t[s.place++])return!1;const e=Op(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=Op(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=Op(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new Mp(r),this.s=new Mp(o),this.recoveryParam=null,!0}}class Np{constructor(t){if(!(this instanceof Np))return new Np(t);"string"==typeof t&&(t=Bp[t]),t instanceof Bp.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Rp.fromPublic(this,t,i)}uW(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.uW(new Mp(t,16)),s=this.keyFromPublic(s,e);const h=(i=new Vp(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.UH){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const l=this.g.jmulAdd(o,s.getPublic(),a);return!l.isInfinity()&&l.eqXToP(h)}}var Gp,$p={exports:{}},Up={exports:{}};Up.exports=(Gp=Gp||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==bp&&bp.crypto&&(s=bp.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),l=r.enc={},u=l.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=l.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.yM=new a.init,this.cW=0},dW:function(t){"string"==typeof t&&(t=d.parse(t)),this.yM.concat(t),this.cW+=t.sigBytes},fW:function(i){var s,e=this.yM,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),l=(o=i?t.ceil(o):t.max((0|o)-this.AW,0))*n,u=t.min(4*l,r);if(l){for(var c=0;c<l;c+=n)this.gW(h,c);s=h.splice(0,l),e.sigBytes-=u}return new a.init(s,u)},clone:function(){var t=o.clone.call(this);return t.yM=this.yM.clone(),t},AW:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.vW()},update:function(t){return this.dW(t),this.fW(),this},finalize:function(t){return t&&this.dW(t),this.yW()},blockSize:16,pW:function(t){return function(i,s){return new t.init(s).finalize(i)}},mW:function(t){return function(i,s){return new A.HMAC.init(t,s).finalize(i)}}});var A=r.algo={};return r}(Math),Gp);var Yp={exports:{}};Yp.exports=function(t){return function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=[];!function(){function t(t){for(var s=i.sqrt(t),e=2;e<=s;e++)if(!(t%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)t(e)&&(h<8&&(o[h]=s(i.pow(e,.5))),a[h]=s(i.pow(e,1/3)),h++),e++}();var l=[],u=n.SHA256=r.extend({vW:function(){this.SW=new h.init(o.slice(0))},gW:function(t,i){for(var s=this.SW.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],u=s[5],c=s[6],d=s[7],f=0;f<64;f++){if(f<16)l[f]=0|t[i+f];else{var A=l[f-15],g=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,v=l[f-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[f]=g+l[f-7]+y+l[f-16]}var p=e&h^e&r^h&r,m=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),S=d+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+a[f]+l[f];d=c,c=u,u=o,o=n+S|0,n=r,r=h,h=e,e=S+(m+p)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+u|0,s[6]=s[6]+c|0,s[7]=s[7]+d|0},yW:function(){var t=this.yM,s=t.words,e=8*this.cW,h=8*t.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=i.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,t.sigBytes=4*s.length,this.fW(),this.SW},clone:function(){var t=r.clone.call(this);return t.SW=this.SW.clone(),t}});s.SHA256=r.pW(u),s.HmacSHA256=r.mW(u)}(Math),t.SHA256}(Up.exports);var jp=Yp.exports;$p.exports=function(t){return s=(i=t).lib.WordArray,e=i.algo,h=e.SHA256,r=e.SHA224=h.extend({vW:function(){this.SW=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},yW:function(){var t=h.yW.call(this);return t.sigBytes-=4,t}}),i.SHA224=h.pW(r),i.HmacSHA224=h.mW(r),t.SHA224;var i,s,e,h,r}(Up.exports);var Hp=$p.exports,Wp={exports:{}};Wp.exports=Up.exports.enc.Hex;var Xp=Wp.exports,Zp={exports:{}};Zp.exports=Up.exports.enc.Utf8;var Jp=Zp.exports,Qp={exports:{}};!function(t){return s=(i=t).lib.WordArray,i.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.bW;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,e=this.bW,h=this.xW;if(!h){h=this.xW=[];for(var r=0;r<e.length;r++)h[e.charCodeAt(r)]=r}var n=e.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,e){for(var h=[],r=0,n=0;n<i;n++)if(n%4){var o=e[t.charCodeAt(n-1)]<<n%4*2|e[t.charCodeAt(n)]>>>6-n%4*2;h[r>>>2]|=o<<24-r%4*8,r++}return s.create(h,r)}(t,i,h)},bW:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var i,s}(Up.exports);!function(t){(function(i){var s=t,e=s.lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*i.abs(i.sin(t+1))|0}();var a=n.MD5=r.extend({vW:function(){this.SW=new h.init([1732584193,4023233417,2562383102,271733878])},gW:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.SW.words,n=t[i+0],a=t[i+1],f=t[i+2],A=t[i+3],g=t[i+4],v=t[i+5],y=t[i+6],p=t[i+7],m=t[i+8],S=t[i+9],b=t[i+10],x=t[i+11],M=t[i+12],w=t[i+13],_=t[i+14],k=t[i+15],C=r[0],T=r[1],F=r[2],I=r[3];C=l(C,T,F,I,n,7,o[0]),I=l(I,C,T,F,a,12,o[1]),F=l(F,I,C,T,f,17,o[2]),T=l(T,F,I,C,A,22,o[3]),C=l(C,T,F,I,g,7,o[4]),I=l(I,C,T,F,v,12,o[5]),F=l(F,I,C,T,y,17,o[6]),T=l(T,F,I,C,p,22,o[7]),C=l(C,T,F,I,m,7,o[8]),I=l(I,C,T,F,S,12,o[9]),F=l(F,I,C,T,b,17,o[10]),T=l(T,F,I,C,x,22,o[11]),C=l(C,T,F,I,M,7,o[12]),I=l(I,C,T,F,w,12,o[13]),F=l(F,I,C,T,_,17,o[14]),C=u(C,T=l(T,F,I,C,k,22,o[15]),F,I,a,5,o[16]),I=u(I,C,T,F,y,9,o[17]),F=u(F,I,C,T,x,14,o[18]),T=u(T,F,I,C,n,20,o[19]),C=u(C,T,F,I,v,5,o[20]),I=u(I,C,T,F,b,9,o[21]),F=u(F,I,C,T,k,14,o[22]),T=u(T,F,I,C,g,20,o[23]),C=u(C,T,F,I,S,5,o[24]),I=u(I,C,T,F,_,9,o[25]),F=u(F,I,C,T,A,14,o[26]),T=u(T,F,I,C,m,20,o[27]),C=u(C,T,F,I,w,5,o[28]),I=u(I,C,T,F,f,9,o[29]),F=u(F,I,C,T,p,14,o[30]),C=c(C,T=u(T,F,I,C,M,20,o[31]),F,I,v,4,o[32]),I=c(I,C,T,F,m,11,o[33]),F=c(F,I,C,T,x,16,o[34]),T=c(T,F,I,C,_,23,o[35]),C=c(C,T,F,I,a,4,o[36]),I=c(I,C,T,F,g,11,o[37]),F=c(F,I,C,T,p,16,o[38]),T=c(T,F,I,C,b,23,o[39]),C=c(C,T,F,I,w,4,o[40]),I=c(I,C,T,F,n,11,o[41]),F=c(F,I,C,T,A,16,o[42]),T=c(T,F,I,C,y,23,o[43]),C=c(C,T,F,I,S,4,o[44]),I=c(I,C,T,F,M,11,o[45]),F=c(F,I,C,T,k,16,o[46]),C=d(C,T=c(T,F,I,C,f,23,o[47]),F,I,n,6,o[48]),I=d(I,C,T,F,p,10,o[49]),F=d(F,I,C,T,_,15,o[50]),T=d(T,F,I,C,v,21,o[51]),C=d(C,T,F,I,M,6,o[52]),I=d(I,C,T,F,A,10,o[53]),F=d(F,I,C,T,b,15,o[54]),T=d(T,F,I,C,a,21,o[55]),C=d(C,T,F,I,m,6,o[56]),I=d(I,C,T,F,k,10,o[57]),F=d(F,I,C,T,y,15,o[58]),T=d(T,F,I,C,w,21,o[59]),C=d(C,T,F,I,g,6,o[60]),I=d(I,C,T,F,x,10,o[61]),F=d(F,I,C,T,f,15,o[62]),T=d(T,F,I,C,S,21,o[63]),r[0]=r[0]+C|0,r[1]=r[1]+T|0,r[2]=r[2]+F|0,r[3]=r[3]+I|0},yW:function(){var t=this.yM,s=t.words,e=8*this.cW,h=8*t.sigBytes;s[h>>>5]|=128<<24-h%32;var r=i.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(s.length+1),this.fW();for(var o=this.SW,a=o.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.SW=this.SW.clone(),t}});function l(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function u(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function d(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}s.MD5=r.pW(a),s.HmacMD5=r.mW(a)})(Math),t.MD5}(Up.exports);!function(t){return s=(i=t).lib,e=s.WordArray,h=s.Hasher,r=i.algo,n=[],o=r.SHA1=h.extend({vW:function(){this.SW=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},gW:function(t,i){for(var s=this.SW.words,e=s[0],h=s[1],r=s[2],o=s[3],a=s[4],l=0;l<80;l++){if(l<16)n[l]=0|t[i+l];else{var u=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=u<<1|u>>>31}var c=(e<<5|e>>>27)+a+n[l];c+=l<20?1518500249+(h&r|~h&o):l<40?1859775393+(h^r^o):l<60?(h&r|h&o|r&o)-1894007588:(h^r^o)-899497514,a=o,o=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+a|0},yW:function(){var t=this.yM,i=t.words,s=8*this.cW,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.fW(),this.SW},clone:function(){var t=h.clone.call(this);return t.SW=this.SW.clone(),t}}),i.SHA1=h.pW(o),i.HmacSHA1=h.mW(o),t.SHA1;var i,s,e,h,r,n,o}(Up.exports);var Kp,qp,tm;qp=(Kp=Up.exports).lib.Base,tm=Kp.enc.Utf8,Kp.algo.HMAC=qp.extend({init:function(t,i){t=this.MW=new t.init,"string"==typeof i&&(i=tm.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var h=this.wW=i.clone(),r=this._W=i.clone(),n=h.words,o=r.words,a=0;a<s;a++)n[a]^=1549556828,o[a]^=909522486;h.sigBytes=r.sigBytes=e,this.reset()},reset:function(){var t=this.MW;t.reset(),t.update(this._W)},update:function(t){return this.MW.update(t),this},finalize:function(t){var i=this.MW,s=i.finalize(t);return i.reset(),i.finalize(this.wW.clone().concat(s))}}),function(t){return e=(s=(i=t).lib).Base,h=s.WordArray,n=(r=i.algo).MD5,o=r.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:n,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,r=e.hasher.create(),n=h.create(),o=n.words,a=e.keySize,l=e.iterations;o.length<a;){s&&r.update(s),s=r.update(t).finalize(i),r.reset();for(var u=1;u<l;u++)s=r.finalize(s),r.reset();n.concat(s)}return n.sigBytes=4*a,n}}),i.EvpKDF=function(t,i,s){return o.create(s).compute(t,i)},t.EvpKDF;var i,s,e,h,r,n,o}(Up.exports);(function(t){t.lib.Cipher||function(){var i=t,s=i.lib,e=s.Base,h=s.WordArray,r=s.BufferedBlockAlgorithm,n=i.enc;n.Utf8;var o=n.Base64,a=i.algo.EvpKDF,l=s.Cipher=r.extend({cfg:e.extend(),createEncryptor:function(t,i){return this.create(this.kW,t,i)},createDecryptor:function(t,i){return this.create(this.TW,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.FW=t,this.IW=i,this.reset()},reset:function(){r.reset.call(this),this.vW()},process:function(t){return this.dW(t),this.fW()},finalize:function(t){return t&&this.dW(t),this.yW()},keySize:4,ivSize:4,kW:1,TW:2,pW:function(){function t(t){return"string"==typeof t?p:v}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});s.StreamCipher=l.extend({yW:function(){return this.fW(!0)},blockSize:1});var u=i.mode={},c=s.BlockCipherMode=e.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.LW=t,this.PW=i}}),d=u.CBC=function(){var t=c.extend();function i(t,i,s){var e,h=this.PW;h?(e=h,this.PW=undefined):e=this.BW;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.LW,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.BW=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.LW,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.BW=r}}),t}(),f=(i.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,r=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(r);var a=h.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};s.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.FW==this.kW?t=e.createEncryptor:(t=e.createDecryptor,this.AW=1),this.DW&&this.DW.EW==t?this.DW.init(this,s&&s.words):(this.DW=t.call(e,this,s&&s.words),this.DW.EW=t)},gW:function(t,i){this.DW.processBlock(t,i)},yW:function(){var t,i=this.cfg.padding;return this.FW==this.kW?(i.pad(this.yM,this.blockSize),t=this.fW(!0)):(t=this.fW(!0),i.unpad(t)),t},blockSize:4});var A=s.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),g=(i.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?h.create([1398893684,1701076831]).concat(s).concat(i):i).toString(o)},parse:function(t){var i,s=o.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=h.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),A.create({ciphertext:s,salt:i})}},v=s.SerializableCipher=e.extend({cfg:e.extend({format:g}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return A.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this.RW(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},RW:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),y=(i.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=h.random(8));var r=a.create({keySize:i+s}).compute(t,e),n=h.create(r.words.slice(i),4*s);return r.sigBytes=4*i,A.create({key:r,iv:n,salt:e})}},p=s.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:y}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=v.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this.RW(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,v.decrypt.call(this,t,i,h.key,e)}})}()})(Up.exports),Qp.exports=function(t){return function(){var i=t,s=i.lib.BlockCipher,e=i.algo,h=[],r=[],n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var A=e^e<<1^e<<2^e<<3^e<<4;A=A>>>8^255&A^99,h[s]=A,r[A]=s;var g=t[s],v=t[g],y=t[v],p=257*t[A]^16843008*A;n[s]=p<<24|p>>>8,o[s]=p<<16|p>>>16,a[s]=p<<8|p>>>24,l[s]=p,p=16843009*y^65537*v^257*g^16843008*s,u[A]=p<<24|p>>>8,c[A]=p<<16|p>>>16,d[A]=p<<8|p>>>24,f[A]=p,s?(s=g^t[t[t[y^g]]],e^=t[t[e]]):s=e=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54],g=e.AES=s.extend({vW:function(){if(!this.OW||this.zW!==this.IW){for(var t=this.zW=this.IW,i=t.words,s=t.sigBytes/4,e=4*((this.OW=s+6)+1),r=this.VW=[],n=0;n<e;n++)n<s?r[n]=i[n]:(l=r[n-1],n%s?s>6&&n%s==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]):(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=A[n/s|0]<<24),r[n]=r[n-s]^l);for(var o=this.NW=[],a=0;a<e;a++){if(n=e-a,a%4)var l=r[n];else l=r[n-4];o[a]=a<4||n<=4?l:u[h[l>>>24]]^c[h[l>>>16&255]]^d[h[l>>>8&255]]^f[h[255&l]]}}},encryptBlock:function(t,i){this.GW(t,i,this.VW,n,o,a,l,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.GW(t,i,this.NW,u,c,d,f,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},GW:function(t,i,s,e,h,r,n,o){for(var a=this.OW,l=t[i]^s[0],u=t[i+1]^s[1],c=t[i+2]^s[2],d=t[i+3]^s[3],f=4,A=1;A<a;A++){var g=e[l>>>24]^h[u>>>16&255]^r[c>>>8&255]^n[255&d]^s[f++],v=e[u>>>24]^h[c>>>16&255]^r[d>>>8&255]^n[255&l]^s[f++],y=e[c>>>24]^h[d>>>16&255]^r[l>>>8&255]^n[255&u]^s[f++],p=e[d>>>24]^h[l>>>16&255]^r[u>>>8&255]^n[255&c]^s[f++];l=g,u=v,c=y,d=p}g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^s[f++],v=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^s[f++],y=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^s[f++],p=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^s[f++],t[i]=g,t[i+1]=v,t[i+2]=y,t[i+3]=p},keySize:8});i.AES=s.pW(g)}(),t.AES}(Up.exports);var im=Qp.exports,sm={exports:{}};sm.exports=function(t){return t.mode.CTR=(s=(i=t.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,i){var s=this.LW,e=s.blockSize,h=this.PW,r=this.$W;h&&(r=this.$W=h.slice(0),this.PW=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),i.Decryptor=s,i),t.mode.CTR;var i,s}(Up.exports);var em=sm.exports,hm={exports:{}};hm.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var i=t.lib.WordArray,s=i.init,e=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var i=t.byteLength,e=[],h=0;h<i;h++)e[h>>>2]|=t[h]<<24-h%4*8;s.call(this,e,i)}else s.apply(this,arguments)};e.prototype=i}}(),t.lib.WordArray}(Up.exports);var rm=hm.exports,nm={exports:{}};nm.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(Up.exports);var om=nm.exports;const am="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",lm=9e5,um={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAyNTExMjU="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vcHl0aG9uLWNoYXJ0cy8="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI=","aG9zdA==","dG9w"],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Q2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ==","dW5leHBlY3RlZA==","ZXJyb3I="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA==","aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vcGx1Z2lu"]},cm=ti,dm=(...t)=>t.slice(1).reduce(((i,s)=>i+cm.atob(um[t[0]][s].toString())),"");let fm,Am,gm,vm=new Uint8Array([]);const ym=t=>t&&"cGx1Z2lu"in t&&"cHl0aG9u"===t.cGx1Z2lu?dm(-2,3):dm(-2,2);class pm{set e(t){fm=t}get e(){Am={Ao:!1,vo:!1,yo:!1,po:!1,mo:!1,So:!1,bo:!1,xo:!1,Mo:!1,wo:!1,_o:!1,ko:!1,Co:!1,To:!1,Fo:!1,Io:!1,Lo:!1,Po:!1,Bo:!1,Do:!1,Eo:!1,Ro:!1,Oo:!1,zo:!1,Vo:!1,No:!1,Go:!1};const t=vm.length,i=t>=1?vm[0]:void 0,s=t>=2?vm[1]:void 0,e=t>=3?vm[2]:void 0,h=t>=4?vm[3]:void 0;return void 0!==i&&(Am.Ao=!!(1&i),Am.vo=!!(2&i),Am.yo=!!(4&i),Am.po=!!(8&i),Am.mo=!!(16&i),Am.So=!!(32&i),Am.bo=!!(64&i),Am.xo=!!(128&i)),void 0!==s&&(Am.Mo=!!(1&s),Am.wo=!!(2&s),Am._o=!!(4&s),Am.ko=!!(8&s),Am.Co=!!(16&s),Am.To=!!(32&s),Am.Fo=!!(64&s),Am.Io=!!(128&s)),void 0!==e&&(Am.Lo=!!(1&e),Am.Po=!!(2&e),Am.Bo=!!(4&e),Am.Do=!!(8&e),Am.Eo=!!(16&e),Am.Ro=!!(32&e),Am.Oo=!!(64&e),Am.zo=!!(128&e)),void 0!==h&&(Am.Vo=!!(1&h),Am.No=!!(2&h),Am.Go=!!(4&h)),Am.So}set l(t){gm=t}get l(){return gm}}let mm=!1;const Sm=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},bm=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},xm=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),Mm=t=>{const i={},s=t.split("-");if(3!==s.length)return{UW:dm(0,0,1,7,1,12,5)};let e=0;const h=Uint8Array.from(cm.atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.YW=o,e=0;const l=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,l.set(o.subarray(e,e+=l.byteLength)),vm=new Uint8Array(l);const u=bm(o.subarray(e,e+=4)),c=dm(-3,0);if(!u)return{UW:dm(0,0,1,7,1,12,5)};if(u<c)return{UW:dm(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=bm(o.subarray(e,e+=4)),i=xm(new Date);if(!t)return{UW:dm(0,0,1,7,1,12,5)};if(t<i)return{UW:dm(0,0,1,2,1,3,1,4,5),jW:ym()}}i.HW=e;const d=`${s[0]}-${s[1]}`,f=Array.prototype.reduce.call(cm.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return km(d,f)?i:{UW:dm(0,0,1,7,1,12,5)}},wm=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(Sm(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return~e>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(xm(o)<dm(-3,0))return{UW:dm(0,0,1,2,1,3,1,4,5),jW:ym()};if(i.every(((t,i)=>e[i]===t)))return{};break}case"0002":return Mm(t);default:return{UW:dm(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{UW:dm(0,0,1,2,1,7,1,12,5)}},_m=t=>{if(!t)return{UW:dm(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const i=(t[dm(-1,9)]||t[dm(-1,37)]).map((t=>(t||"").trim())),s=cm[dm(-1,41)];try{if(s&&i.indexOf(s[dm(-1,6)][dm(-1,7)])>-1)return{WW:!0}}catch(t){}if(i.indexOf(cm[dm(-1,6)][dm(-1,7)])>-1)return{WW:!0};const e=i.filter((t=>t.indexOf("*")>-1));try{if(s&&Lm(s[dm(-1,6)][dm(-1,7)],e))return{WW:!0}}catch(t){}if(Lm(cm[dm(-1,6)][dm(-1,7)],e))return{WW:!0};const h=t[dm(-1,8)]||t[dm(-1,38)];if(""!==h&&null!=h){try{if(s&&Lm(s[dm(-1,6)][dm(-1,7)],[h]))return{WW:!1}}catch(t){}if(Lm(cm[dm(-1,6)][dm(-1,7)],[h]))return{WW:!1};try{if(s&&h===s[dm(-1,6)][dm(-1,7)])return{WW:!1}}catch(t){}if(h===cm[dm(-1,6)][dm(-1,7)])return{WW:!1}}return{UW:dm(0,14,1,20,5),jW:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},km=(t,i)=>{const s=new Np("secp256k1").keyFromPublic(dm(-4,0),"hex"),e=Hp(t).toString();return s.verify(e,i)},Cm=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!km(h,r))return{UW:dm(0,21,1,2,1,7,1,12,5)};const n=Xp.parse(h);s=im.decrypt({ciphertext:Xp.parse(e)},n,{mode:em,padding:om,iv:Xp.parse("00000000000000000000000000000001")}).toString(Jp)}catch(t){return{UW:dm(0,21,1,2,1,7,1,12,5)}}try{i=JSON.parse(s)}catch(t){return{UW:dm(0,21,1,2,1,7,1,12,5)}}if(void 0===i[dm(-1,5)]||null===i[dm(-1,4)]||!i[dm(-1,9)])return{UW:dm(0,21,1,2,1,7,1,12,5)};const e=parseInt(dm(-3,0),10)||Number(parseInt(dm(-3,0),10));return i[dm(-1,5)]<e?{UW:dm(0,21,1,2,1,3,1,4,5)}:_m(i)})(t);case"0002":return(t=>{const i=Mm(t),s=i.YW,e=i.HW;if(i.UW||void 0===s||void 0===e)return i;let h,r="";try{const t=s.slice(i.HW,e+16),h=new DataView(t.buffer),n=new Int32Array(4);for(let t=0;t<n.length;t+=1)n[t]=h.getInt32(4*t,!1);const o=rm.create(Array.from(n)),a=e+16,l=s.slice(a,s.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=rm.create(Array.from(c)),f=im.decrypt({ciphertext:d},o,{mode:em,padding:om,iv:Xp.parse("00000000000000000000000000000001")});r=cm.atob(f.toString(Jp))}catch(t){return{UW:dm(0,21,1,2,1,7,1,12,5)}}try{h=JSON.parse(r)}catch(t){return{UW:dm(0,21,1,2,1,7,1,12,5)}}return h[dm(-1,37)]?_m(h):{UW:dm(0,21,1,2,1,7,1,12,5)}})(t);default:return{UW:dm(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Tm=(t,i)=>{switch(t.slice(0,4)){case"0001":return((t,i)=>{if(!i)return{UW:dm(0,39,1,40,1,41,5),jW:am};const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!km(`${e}-${h}`,r))return{UW:dm(0,21,1,2,1,7,1,12,5)};const n=Uint8Array.from(Sm(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(dm(-3,0),10)||Number(parseInt(dm(-3,0),10))))return{UW:dm(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(Sm(e,8)),l=jp(i[dm(-1,31)]).toString(Xp),u=Int32Array.from(Sm(l,8)),c=jp(i[dm(-1,32)]).toString(Xp),d=Int32Array.from(Sm(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return a.every(((t,i)=>f[i]===t))?{}:{UW:dm(0,21,1,2,1,7,1,12,5)}})(t,i);case"0002":return((t,i)=>{if(!i)return{UW:dm(0,39,1,40,1,41,5),jW:am};const s=Mm(t),e=s.YW,h=s.HW;if(s.UW||void 0===e||void 0===h)return s;const r=e.slice(h,e.length),n=new DataView(r.buffer),o=new Int32Array(8);for(let t=0;t<o.length;t+=1)o[t]=n.getInt32(4*t,!1);const a=jp(i[dm(-1,31)]).toString(Xp),l=Int32Array.from(Sm(a,8)),u=jp(i[dm(-1,32)]).toString(Xp),c=Int32Array.from(Sm(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return o.every(((t,i)=>d[i]===t))?{}:{UW:dm(0,21,1,2,1,7,1,12,5)}})(t,i);default:return{UW:dm(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Fm=(t,i,s=!0,e)=>{mm=!1,i.Ua();const h=i.On,r=!!h&&(h===ti.document.body||ti.document.body.contains(h)),n=h&&r?h:document.body;if(void 0===Array.from(n.children).find((t=>"lcjs-error"===t.id))){const h=ti.document.createElement("div");h.id="lcjs-error",n.append(h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.width="100%",h.style.height="100%",h.style.backgroundColor="black",h.style.boxSizing="border-box",h.style.padding="20px",h.style.font="Arial",h.style.fontSize="20px";let r,o=(t||"LICENSE_ERROR").split("_").join(" ");if(o=(s?dm(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1),e){const t=ti.document.createElement("a");t.href=e,r=t}else r=ti.document.createElement("p1");h.append(r),r.innerHTML=o,r.style.color="red",i.fH()&&cm.console.error(o)}},Im=(t,i,s)=>{i?(t[dm(-1,17)](dm(-1,19),s),t[dm(-1,17)](dm(-1,20),s),t[dm(-1,17)](dm(-1,21),s),t[dm(-1,17)](dm(-1,22),s)):(t[dm(-1,18)](dm(-1,19),s),t[dm(-1,18)](dm(-1,20),s),t[dm(-1,18)](dm(-1,21),s),t[dm(-1,18)](dm(-1,22),s))},Lm=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},Pm=new Map,Bm=(t,i)=>{let s="object"==typeof t?t.license:t;s&&(s=s.trim());const e="object"==typeof t?t.licenseInformation:i,h="object"==typeof t?t:void 0,r=new pm;r.e=s;let n=Pm.get(s||"E");return n||(n=((t,i)=>{let s,e,h=!1,r=!1,n=!1,o=!1,a="",l=!1,u=!1,c=!1;try{if(fm){const e=(()=>{if(!fm)return;const t=fm.split("-");if(t.length>0)switch(t[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";case"P001":return"P001";default:return}})(),a=t&&"cGx1Z2lu"in t;if("0001"===e){vm=new Uint8Array([2]);const i=(()=>{if(!fm)return;const t=fm.split("-");return 4===t.length?t[1].startsWith("m")?2:1:0})();if(1===i){const t=Cm(fm);n=!t.WW,s=t,h=!0}else 2===i?(s=Tm(fm,t),r=!0):(mm=!0,s=wm(fm),o=!0);a&&(s={UW:dm(0,0,1,7,1,12,5)})}else if("0002"===e){const i=(()=>{if(!fm)return;const t=fm.split("-");return t.length>=2?Uint8Array.from(cm.atob(t[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===i)mm=!0,s=wm(fm),o=!0;else if(189===i){const t=Cm(fm);n=!t.WW,s=t,h=!0}else 159===i?(s=Tm(fm,t),r=!0):s={UW:dm(0,0,1,7,1,12,5)};const e=vm.length>3&&2&vm[3];(e&&!a||!e&&a||e&&a&&"cHl0aG9u"!==t.cGx1Z2lu)&&(s={UW:dm(0,0,1,7,1,12,5)})}else if("T001"===e){const e=((t,i)=>{const s=fm.split("-");if(3!==s.length)return{UW:dm(0,0,1,7,1,12,5)};const e=`${s[1]}`,h=Array.prototype.reduce.call(cm.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!km(e,h))return{UW:dm(0,0,1,7,1,12,5)};let r=0;const n=Uint8Array.from(cm.atob(s[1]),(t=>t.charCodeAt(r))),o=n.subarray(r,r+=20),a=new DataView(n.buffer).getUint16(r,!0);r+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+r]^o[t%o.byteLength];r=0;const u=new DataView(l.buffer),c=bm(l.subarray(r,r+=4)),d=dm(-3,0);if(!c)return{UW:dm(0,0,1,7,1,12,5)};if(c<d)return{UW:dm(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,A=new Date;f.setDate(f.getDate()+1),A.setDate(A.getDate()-1);const g=xm(A),v=xm(f);if(c<g||c>v)return{UW:dm(0,0,1,2,1,3,1,4,5)};const y=u.getUint16(r,!0),p=l.subarray(r+=2,r+y);if(vm=new Uint8Array(p),i&&"dHJhZGVy"in i&&"dGVjaG5pY2FsIGFuYWx5c2lz"===i.dHJhZGVy)return{XW:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(i&&"logoGraphic"in i&&i.logoGraphic){const t=i.logoGraphic.split("-");return 3===t.length&&km(t[0],t[2])?{XW:t[0]}:{UW:dm(0,0,1,7,1,12,5)}}return{UW:dm(0,0,1,7,1,12,5)}})(0,t);s=e;const r=e.XW;r&&i?("string"==typeof r&&(i.l=r),h=!0):s={UW:dm(0,0,1,7,1,12,5)}}else"P001"===e?(s=((t,i)=>{const s=fm.split("-");if(3!==s.length)return{UW:dm(0,0,1,7,1,12,5)};const e=`${s[0]}-${s[1]}`,h=Array.prototype.reduce.call(cm.atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!km(e,h))return{UW:dm(0,0,1,7,1,12,5)};let r=0;const n=Uint8Array.from(cm.atob(s[1]),(t=>t.charCodeAt(0)));r+=1;const o=n.subarray(r,r+=20),a=new DataView(n.buffer).getUint16(r,!0);r+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=n[t+r]^o[t%o.byteLength];r=0;const u=new DataView(l.buffer).getUint16(r,!0);r+=2;const c=l.subarray(r,u+r),d=new TextDecoder("utf-8").decode(c);return i&&"cGx1Z2lu"in i&&d===cm.atob(i.cGx1Z2lu)?(vm=new Uint8Array([38]),{}):{UW:dm(0,0,1,7,1,12,5)}})(0,t),!s.UW&&i&&(h=!0,u=!0)):s={UW:dm(0,0,1,7,1,12,5)}}else{const i=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(cm[dm(-1,6)][dm(-1,7)])||i.test(cm[dm(-1,6)][dm(-1,7)])?s={UW:dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),jW:ym(t)}:cm[dm(-1,6)][dm(-1,40)]===cm.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,l=!1,vm=new Uint8Array([38]),s={}):(c=!0,l=!0,vm=new Uint8Array([38]),s={})}}catch(t){s={UW:dm(0,0,1,7,1,12,5,1,70,1,71,5)}}try{o&&(e=cm[dm(-1,34)][dm(-1,35)](dm(-1,39))||void 0)}catch(t){cm.console.error(t)}let d=!1;if(e){const t=e.split("-");if(2===t.length&&km(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(d=!0)}}const f=!(c||l||u||s.UW||h||r||d),A=(()=>{const t=new(cm[dm(-1,0)]);return t.open(dm(0,26),dm(-2,0)),t.setRequestHeader(dm(-1,24),dm(-1,25)),t.withCredentials=!0,t})(),g=new Pt;if(f){let t;try{t=parseInt(fm?fm.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());a=(t^i).toString();const s={};let e="",h="",r="";fm=fm||"";const n=dm(-4,0);for(let t=0;t<fm.length;t+=1){const i=fm.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const o=dm(-3,0);for(let t=0;t<o.length;t+=1)h+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<a.length;t+=1)r+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));s[dm(-1,3)]=cm.btoa(e),s[dm(-1,4)]=cm.btoa(h),s.h=cm.btoa(r),s.v=3,s.s=cm[dm(-1,34)][dm(-1,35)](dm(-1,33))||void 0,A.send(JSON.stringify(s))}return(h,r)=>{const o=[],c={Ia:t=>{o.indexOf(t)>=0||(o.push(t),d(),Am&&Am.Go&&g.D("logochange",{logoDataURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAAhCAYAAAAbDs+XAAAACXBIWXMAAAsSAAALEgHS3X78AAAIiUlEQVR4nO2bTWwkVxHHf5uEoHFAkIz5zAxIiIwDSNlBQgibQIKcC8i+ILW3L611TmGXC9LeVssp0t583YjbLC1E4z7aByTwAUWyxc1GIJE5wKEHASJDxAEP7IHNoaqma9rd4xl7vNll5y+N3P36vXrVrz5fvfal+/fvM8fjgyc+aAbmeLB4qqwxTtIFYBVoAsdAfwZz1fXXjcJgZwb05jgDLhVdugr7GrAThUF31hPGSdpGlOmtKAyOdb5WFAaHs57rIhAnaT0Kg1kYwAeCMoFvAIcXIWw3Rxto620b2IrCIKvou6p9+srXYZykrUn5i5P0OpBN6lXiJK0DC54fbbsN3ARuALtRGOxPQu9hQ5nAr0dhcOciJtOFMwHWgR4i7OOK/ivAVeAIeBcYICFmA9jS8Y0oDLrqKey6DqwA+6iAgENyJTtU79JSmjVHYwMJZR0TuiroJiLwdhQG+zpHW2n1dWwbqLm2ps7XNAVx4/qAKe0IX9Ov7OQYieG6AKWWNg3iJP0BkHrXFyfpD4GXXLcBY4StqGm/d8gX8ba2rQMHwBoiiBawGSfpHUTIA30G8A/EQg2rrh/AIE7SPeTd24hS+bVo6nUL2IiTNHNjN+Ik3UYUrK5t68CPgFuOfgvYAX6s9AfA28C33LhV4M0x63FuzDxLj5P0+8BXEYuwtm8yKuxdYG8CbT4A9pCFuK2L1kWEvwU0ECuHXECvocqk4wE+hyjPsf4aiBAHwF2gA6xpHlFDrHvP8WHzmuDXtX0LUbZMaRr9WpykL2sfo78MPEuuxPvAvcK4xinrcW6cWeDOXfm2V4FX9bYVJ2krTtJngZddt+0psvRVZDF39b6JWMOxusZFoK5xfpXcRYIIabnQ1tXfXaWVqattAj33TgsFPryFe3oWOj6m930kdGwD/wP6LtYPgP/q3BkSOj7t+DrUZxeKqQUeJ+kLcZLeAl4vtK8ArwAfds0hYnHP6/2gYDnj5rFt3CYSx7uIxe4gi9xGLOcYETbIQpoyrSOLnOm4LqIATSQf8MIz4VvfTRO+8lFTOk03xzG5F/uT0moBS+QW3/P09fkauSL+0vG1pHxdKEaSNnWZS2UWGCfpp4BvI+7aYs5Njasr2v5ScRzwT+A5vd6LwmBb6a3P9+MPHqWFF484SZ9BLOorwBcYteB2nKQD4MuIhpbhOXd9UNFnjgeESoGroC8jQn5e/xbxHeCPwOcZVYQy9Kr22hXzNxFX2vPJnXP1/XEFkKrx09Ao9D1BZ1o4ngx9JF+ozaruYVvNqrUuE/iTcZJ+DXgReBL4IvDJCvqfAP5T8vyvwGcKbdMWKq4hC30TiZeGdSTmvcX4ku8GUsF7o+TZChJLT6MBcAVR/C1GE7aJ4fbxtcKju0j+0QDK+Jx2niayXTwCSmspZQJ/EfgI8Azixk+z3GK23gP+rDQ+6tonLp1qEaOOaGpRIMfIwmeF/sMtjVpLi3z/O7ROvbdCx4LLzE0YRau3+Xo6dvieZRbvPAKIMtUR5YU88bTkrIckpP0in2eEzVvpScsE/gSyXXjhDBMOEM36BvIyX9L2oynrzya8MsZXAVyyuMGo5fS0qIK23wCIk7Sre/cbru9VRAB1REHQvn1kL24ZdF8rc34scZIOK4Vxkm5qX49dcoPYLSapTtnqRT5VAUbmQ9bxTskzq9rZ/Gtxkq6Zd7N5ojDIygT+WeBDJe2Ge8DTFc92VBC/Aj5OnuRNezBiCeCIwNV6ALr60lcRJbN9+hry8raQtu9eRuoCdcSNX0MU8hfa36p3e8jiLwNLcZLa1H1n3Uazpb+GuuzlkmcZebWvLKQN36eEzz4SRtD3WQUuq/BsfXYRb9VQ3pt6bXt9VBGbSO0iG+7DldAVxgs7A35f8axre+woDO4Bvwb+hrjlaeO3d4keTdf+ml531HKsb+b67RWeLZDnA1khUbIDFs/ror2bo3mo/UwZ7Sh5EIXBVsGKhwpb4eHG8dlEhLlOHoJAvNaQF0TQu5qk1XSu/SgMMpVpXd+5Dgx84cU0pQq/1Rf/N1Ix8hggRZAhojD4O1IrrlKQcfCCrWo3N24C9PGrOL6uPFU+I0/IltzzhrsuxsdiVc57I5vPnyUUq3eQhxEb6xV9E0ku/SELiGcavo8Kd8eN932HglY6Ne/SfUJSxEEUBh3VmFeAvzC6Tdsp0+AoDN6Ok/R3Y+hWwRZ6M07SQ2XWu+p33PUV7WPxK2NUwJCfzEEuoJbmAEVvYvfvFmjata+e2cGO0bvu5reFP0Ky/NvuXUA8SVExjM8GuqUs8DXQfMFX8YARharHSboO7Gt49bH9wFt4nXIcRGHQUcYyZN/tLXzoyssQhcG/lKFmIcstRaFPTZm1cqTx2EPKm2aFa4wuXgNdcEfPL3SfvNZuimOZs9EZunHnGWzBF5S3TOfb1rGXyWO2zddRfv27rCGKN1QMx2em/U3wa46muWlPH+XxGFGuuvYfaHsnCoM39Lc/LK3GSfoTTmIobEOcpE8D3wO+q0TfPKUAsk5e7+7qIu2dt7RaKGIs6Uue4PeiUdwSIjG3hWTvF/YRyVnxFJywKkPp4kVhcC9O0t8AX0eSjUm3W3YkWFWCnRa3Cvdm9Q8aLfJ9Nmi2/zAKG/J9+GKhfaylRGHwXpykP4vC4A8TzpMhLmhxhgcmW+763GXPcyDzvDysgjaYwH38PprELU4hbEMHuBEnqR1DngsPy8Kqh3tkPmo0gZtL7zGjM1k7atXbJSS27SDbv2EmPceDhWXpTfSDQmCxYs84LQZIVrpMvqVaJ/9aZRZzzDElLv3059sLSF3WasImmM5FxMU4/+698yh/3/2owgRONHrm3EQOJTKmr4NXYQEJHYtIoebccXyO6XHiu3SPkgP78+LUDw7muFiMFfgc/3+Y//foY4a5wB8zvA/xX9auz5FT8QAAAABJRU5ErkJggg=="}))},Pa:g},d=()=>{o.forEach((t=>{const i=y(t);if(!i)return;const{ZW:s,JW:e}=i,h=e?dm(-2,1):void 0,r=`${dm(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${s}${h?dm(0,5,1,63,1,64,1,59,1,65,1,41,5):""}`;Fm(r,p,!1,h)}))},v=t=>cm.atob(t),y=t=>{const i=Object.values(ln).includes(t)?t:void 0;if(i){switch(t){case ln.yo:return Am.Ao||Am.yo?void 0:{ZW:v(i),JW:!0};case ln.bo:return Am.Ao||Am.bo?void 0:{ZW:v(i),JW:!0};case ln.xo:return Am.Ao||Am.vo||Am.xo?void 0:{ZW:v(i),JW:!0};case ln.vo:return Am.Ao||Am.vo?void 0:{ZW:v(i),JW:!0};case ln.Co:return Am.Ao||Am.vo||Am.Co?void 0:{ZW:v(i),JW:!0};case ln.Io:return Am.Ao||Am.vo||Am.Io?void 0:{ZW:v(i),JW:!0};case ln.Do:return Am.Ao||Am.vo||Am.Do?void 0:{ZW:v(i),JW:!0};case ln.Ro:return Am.Ao||Am.vo||Am.Ro?void 0:{ZW:v(i),JW:!0};case ln.Oo:return Am.Ao||Am.vo||Am.Oo?void 0:{ZW:v(i),JW:!0};case ln.Eo:return Am.Ao||Am.vo||Am.Eo?void 0:{ZW:v(i),JW:!0};case ln.wo:return Am.Ao||Am.vo||Am.wo?void 0:{ZW:v(i),JW:!0};case ln.Fo:return Am.Ao||Am.vo||Am.Fo?void 0:{ZW:v(i),JW:!0};case ln.ko:return Am.Ao||Am.vo||Am.ko?void 0:{ZW:v(i),JW:!0};case ln.Lo:return Am.Ao||Am.vo||Am.Lo?void 0:{ZW:v(i),JW:!0};case ln.Bo:return Am.Ao||Am.vo||Am.Bo?void 0:{ZW:v(i),JW:!0};case ln.Po:return Am.Ao||Am.vo||Am.Po?void 0:{ZW:v(i),JW:!0};case ln.Mo:return Am.Ao||Am.vo||Am.Mo?void 0:{ZW:v(i),JW:!0};case ln._o:return Am.Ao||Am.vo||Am._o?void 0:{ZW:v(i),JW:!0};case ln.To:return Am.Ao||Am.vo||Am.To?void 0:{ZW:v(i),JW:!0};case ln.zo:return Am.Ao||Am.vo||Am.zo?void 0:{ZW:v(i),JW:!0};case ln.Vo:return Am.Ao||Am.vo||Am.Vo?void 0:{ZW:v(i),JW:!0};case ln.Ao:case ln.po:case ln.So:case ln.mo:case ln.No:case ln.Go:return}return ss(0,"")}},p=new Sp(r,h,c);Array.from(p.On.children).forEach((t=>{"lcjs-error"===t.id&&p.On.removeChild(t)})),(null==s?void 0:s.UW)&&Fm(s.UW,p,void 0,s.jW);const S=t=>{if("error"===(null==t?void 0:t.type)&&e){const t=e.split("-");if(2===t.length&&km(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+lm>s)return mm=!1,void Im(A,!1,b)}}if(A.readyState===cm[dm(-1,0)].DONE)if(200===A.status){const t=JSON.parse(A[dm(-1,23)]);if(!km(a+dm(-3,0),t.h)){const t=dm(0,0,1,27,1,28,1,29,1,30,1,31,5);Fm(t,p)}cm[dm(-1,34)][dm(-1,36)](dm(-1,39),t.t),cm[dm(-1,34)][dm(-1,36)](dm(-1,33),t.s),mm=!1}else{let i=dm(0,0,1,2,1,7,1,12,5);try{i=t&&"loadend"!==t.type?dm(0,0,1,23,1,32,1,24,5):JSON.parse(A[dm(-1,23)]).message,Im(A,!1,b)}catch(t){console.error(t)}Fm(i,p,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},b=t=>{S(t)};if(Im(A,!0,b),f?setTimeout((()=>{if(mm){let t=!0;if(e){const i=e.split("-");if(2===i.length&&km(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+lm>e&&(t=!1)}}t&&Fm(dm(0,25,1,23,1,32,1,24,5),p)}}),1e4):Im(A,!1,b),l){const s=(()=>{const t=new(cm[dm(-1,0)]);return t.open(dm(0,26),dm(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),e=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),h=h=>{if("error"===(null==h?void 0:h.type)){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,r)}if(s.readyState===cm.XMLHttpRequest.DONE){const h=s.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==s.status||h&&"1"!==h){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,r)}else{const h=JSON.parse(s.responseText);if(!km(e,h.s)){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,r)}void 0!==i&&(i.l=h.l),g.D("logochange",{logoDataURI:h.l})}}else{const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,r)}},r=t=>{h(t)};Im(s,!0,r),s.send(e),setTimeout((()=>{if(s.readyState<2){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,r)}}),1e4)}if(u){const s=(()=>{const t=new(cm[dm(-1,0)]);return t.open(dm(0,26),dm(1,1)),t.setRequestHeader(dm(-1,24),dm(-1,25)),t.withCredentials=!0,t})();let e;try{e=parseInt(fm?fm.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(t){e=Math.floor(1e6*Math.random())}const h=Math.floor(1e6*Math.random());a=(e^h).toString();const r={};let n="",o="";fm=fm||"";const l=dm(-4,0);for(let t=0;t<fm.length;t+=1){const i=fm.charCodeAt(t)^l.charCodeAt(t);n+=String.fromCharCode(i)}for(let t=0;t<a.length;t+=1)o+=String.fromCharCode(a.charCodeAt(t)^l.charCodeAt(t));r[dm(-1,3)]=cm.btoa(n),r.h=cm.btoa(o),r.v=1,s.send(JSON.stringify(r));const u=e=>{var h;if("error"===(null==e?void 0:e.type)){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,c)}if(s.readyState===cm.XMLHttpRequest.DONE)if(200===s.status){const e=JSON.parse(s.responseText);if(!km(a,e.h)){const i=dm(0,0,1,7,1,12,5);Fm(i,p,!1,ym(t)),Im(A,!1,c)}const h=e.l.split("-"),r=h[0],n=h[1];if(km(r,n))void 0!==i&&(i.l=r,g.D("logochange",{logoDataURI:r}));else{const i=dm(0,0,1,7,1,12,5);Fm(i,p,!1,ym(t))}const o=e.f,l=Uint8Array.from(cm.atob(o),(t=>t.charCodeAt(0)));let u=0;const f=l.subarray(u,u+=20),v=new DataView(l.buffer).getUint16(u,!0);u+=2;const y=Uint8Array.from(Array(v));for(let t=0;t<v;t+=1)y[t]=l[t+u]^f[t%f.byteLength];const m=new DataView(y.buffer);u=0;const S=Uint8Array.from(Array(m.getUint16(u,!0)));u+=2,S.set(y.subarray(u,u+=S.byteLength)),vm=new Uint8Array(S),i&&i.e&&d()}else{const i=null!==(h=JSON.parse(s.responseText).message)&&void 0!==h?h:dm(0,0,1,7,1,12,5);Fm(i,p,!1,ym(t)),Im(A,!1,c)}else{const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,c)}},c=t=>{u(t)};Im(s,!0,c),setTimeout((()=>{if(s.readyState<2){const i=dm(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Fm(i,p,!1,ym(t)),Im(A,!1,c)}}),1e4)}return n?(t=>{let i;mm=!1;const s=()=>{i&&(t.Ta(i.Ca()),i=void 0);const s=t._t();i=t.OP("deployment test"),i.wn(t.oi).qr(dm(0,34,1,33)).ih({x:s.x/2,y:s.y/2}).Il(50).Cr(13).Ke(new ke({color:m(128,128,128,100)})).Tl("Arial").Pl(500).setPointerEvents(!1),t.wa()._a()};t.R("resize",(()=>{s()})),setTimeout(s,0),setInterval((()=>{i&&i.Ca()<t.qa()-1?s():i||s()}),1e3)})(p):A.readyState===cm[dm(-1,0)].DONE&&S(),p}})(e,r)),((t,i,s,e)=>{var h,r,n,o,a,l,u,c;let d;if(s&&s.license){const t=s.license.split("-");d=t[t.length-1]}const f=null===(h=null==s?void 0:s.webgl)||void 0===h?void 0:h.version,A={iE:null===(r=null==s?void 0:s.sharedContextOptions)||void 0===r?void 0:r.canvas,Da:null==s?void 0:s.warnings,dE:"webgl1"===f?1:"webgl2"===f?2:void 0,aE:!1!==(null===(n=null==s?void 0:s.sharedContextOptions)||void 0===n?void 0:n.antialias),oE:(null===(o=null==s?void 0:s.sharedContextOptions)||void 0===o?void 0:o.devicePixelRatio)||void 0,bE:(null===(a=null==s?void 0:s.sharedContextOptions)||void 0===a?void 0:a.noCanvasStyles)||void 0,_E:(null===(l=null==s?void 0:s.sharedContextOptions)||void 0===l?void 0:l.noCanvasTransform)||void 0,uE:!1!==(null===(u=null==s?void 0:s.sharedContextOptions)||void 0===u?void 0:u.useStackingOrder),cE:!1!==(null===(c=null==s?void 0:s.sharedContextOptions)||void 0===c?void 0:c.useIndividualCanvas),xE:d||void 0},g=new dv(A),v=i=>t({...i,textRenderer:i.textRenderer?i.textRenderer:void 0,textPixelSnappingEnabled:void 0!==(null==i?void 0:i.textPixelSnappingEnabled)?i.textPixelSnappingEnabled:!(null==i?void 0:i.textRenderer)&&void 0},g);return{Dashboard:fv(v,i,s,e),ChartXY:vv(v,i,s,e),Spider:yv(v,i,s,e),Polar:pv(v,i,s,e),Pie:mv(v,i,s,e),UIPanel:gv(v,i,s,e),Gauge:Sv(v,i,s,e),Funnel:bv(v,i,s,e),Pyramid:xv(v,i,s,e),Chart3D:wv(v,i,s,e),Map:Mv(v,i,s,e),DataGrid:_v(v,i,s,e),BarChart:kv(v,i,s,e),ParallelCoordinateChart:Fv(v,i,s,e),ZoomBandChart:Cv(v,i,s,e),TreeMapChart:Tv(v,i,s,e),dispose:g.N.bind(g),layout:g.IE.bind(g)}})(n,r.e,h,r.l)};export{Wl as AbstractCursor,Et as Animation,Dt as AnimationEasings,Rt as Animator,_c as AreaRangeSeries,sa as Axis,pl as Axis3D,Yc as AxisPosition,Pr as AxisScrollStrategies,Br as AxisTickStrategies,ea as AxisXYTitlePositionOptions,kr as Band,iA as BarChart,qf as BarChartBar,Qf as BarChartCategoryAxis,eA as BarChartSorting,sA as BarChartTypes,Kf as BarChartValueAxis,to as BorderedPicture,Ju as BoxFigure,tc as BoxSeries,dl as BoxSeries3D,$o as Button,ll as Chart,su as Chart3D,Xe as ChartComponent,Ll as ChartWithSeries,Qc as ChartXY,Jc as ChartXYTitlePositionOptions,y as Color,x as ColorCSS,S as ColorHEX,b as ColorHSV,sh as ColorPalettes,m as ColorRGBA,fh as ColorShadingStyles,M as ColorUint32,Cr as ConstantLine,hu as Cursor2D,Jl as Cursor3D,ru as CursorBuilder2D,Ql as CursorBuilder3D,Bc as CursorBuilderXY,kf as CursorBuilders,Pc as CursorXY,on as CustomTick,QA as Dashboard,Th as DashedLine,Hf as DataGrid,Wf as DataGridCellContentAlignmentOptions,ro as DataSetXY,Ra as DateTimeTickStrategy,ic as EllipseFigure,sc as EllipseSeries,be as EmptyFill,Yr as EmptyTickStrategy,vn as EmptyUIElement,Pt as Eventer,Zu as Figure,qu as FigureSeries,P as FontSettings,de as FormattingFunctions,Cd as FunnelChart,Bd as FunnelChartTypes,Pd as FunnelChartWithLabelsInsideSlices,Ld as FunnelChartWithLabelsOnSides,Dd as FunnelLabelSide,md as FunnelSlice,wd as FunnelSliceModes,gA as GaugeChart,Xr as GenericAxis,Dh as GlowEffect,R as GradientExtent,E as GradientShape,Sc as HeatmapGridSeries,bc as HeatmapGridSeriesIntensityValues,xc as HeatmapScrollingGridSeries,Mc as HeatmapScrollingGridSeriesIntensityValues,He as HighlightModes,Ze as Highlighter,Lh as Icon,Vt as ImageFill,Ot as ImageFitMode,Te as IndividualPointFill,ye as LUT,rl as Legend,hl as LegendEntryClickBehaviors,el as LegendOrientation,sl as LegendPosition,wl as LineAndPointSeries3D,_l as LineSeries3D,G as LinearGradientFill,et as LinearGradientFillPalette,Lu as MapChart,Mu as MapRegions,Au as MapRegionsAfrica,gu as MapRegionsAsia,vu as MapRegionsAustralia,yu as MapRegionsCanada,pu as MapRegionsEurope,bu as MapRegionsNorthAmerica,xu as MapRegionsSouthAmerica,Su as MapRegionsUSA,mu as MapRegionsWorld,wu as MapTypes,Yl as MeshModel3D,gr as MouseStyles,Ya as NumericTickStrategy,kc as OHLCSeries,Tc as OHLCSeriesBars,Cc as OHLCSeriesCandlesticks,Fc as OHLCSeriesTypes,_r as OSMPosition,Rc as OnScreenMenu,cr as OnScreenMenuAnimationsButton,er as OnScreenMenuButton,jh as OnScreenMenuButtonShape,Yh as OnScreenMenuButtonType,Uh as OnScreenMenuControlBase,fr as OnScreenMenuCustomButton,Ar as OnScreenMenuOsmToggleButton,hr as OnScreenMenuToggleButton,rr as OnScreenMenuZoomInButton,nr as OnScreenMenuZoomInXButton,or as OnScreenMenuZoomInYButton,ar as OnScreenMenuZoomOutButton,lr as OnScreenMenuZoomOutXButton,ur as OnScreenMenuZoomOutYButton,dr as OnScreenMenuZoomToFitButton,Le as PalettedFill,nl as Panel,SA as ParallelCoordinateAxis,xA as ParallelCoordinateChart,bA as ParallelCoordinateSeries,uh as PhongShadingStyle,qn as Picture,BA as PieChart,OA as PieChartTypes,RA as PieChartWithLabelsInsideSlices,EA as PieChartWithLabelsOnSides,Rd as PieSlice,Sh as PixelatedPoints3D,Fl as PointCloudSeries3D,Oc as PointLineAreaSeries,kl as PointLineSeries3D,Tl as PointSeries3D,Il as PointSeriesTypes3D,Qe as PointShape,xh as PointStyle3D,Hu as PolarAreaSeries,Wu as PolarAreaSeriesInterior,Du as PolarAxis,Ru as PolarAxisAmplitude,Eu as PolarAxisTick,gd as PolarChart,ad as PolarHeatmapSeries,Xu as PolarLineSeries,nd as PolarPointLineSeries,od as PolarPointSeries,zu as PolarPolygon,ju as PolarPolygonSeries,Ad as PolarSector,Nu as PolarSeries,ec as PolygonFigure,hc as PolygonSeries,$d as PyramidChart,Xd as PyramidChartTypes,Wd as PyramidChartWithLabelsInsideSlices,Hd as PyramidChartWithLabelsOnSides,Zd as PyramidLabelSide,zd as PyramidSlice,Ed as PyramidSliceModes,z as RadialGradientFill,st as RadialGradientFillPalette,wc as RangeSeries,rc as RectangleFigure,nc as RectangleSeries,oc as SegmentFigure,ac as SegmentSeries,Vu as Series2D,cl as Series3D,Qu as SeriesXY,oh as SimpleShadingStyle,pd as Slice,Md as SliceLabelFormatters,bd as SliceLabelIndices,xd as SliceSorters,ke as SolidFill,it as SolidFillPalette,wh as SolidLine,Qd as SpiderAxis,lf as SpiderChart,tf as SpiderSeries,Jd as SpiderWebMode,kh as StipplePatterns,Rl as SurfaceGridSeries3D,Ol as SurfaceScrollingGridSeries3D,uc as TextFigure,We as TextObjectIdentifier,cc as TextSeries,Gf as Themes,ia as Tick,la as TickStyle,Sa as TimeFormattingFunctions,xa as TimeTickStrategy,fA as TreeMapChart,yh as TriangulatedPoints3D,jl as UIBackgrounds,So as UICircle,Io as UIColumnGrid,bo as UIDiamond,Zt as UIDirections,Xt as UIDraggingModes,ta as UIElementBuilders,To as UIElementColumn,ko as UIElementLine,Co as UIElementRow,hn as UIElementWithBackground,yn as UIEmptyBackground,yo as UILabel,Cf as UILayoutBuilders,_o as UILayoutGap,wA as UILegendPanel,sn as UIObject,vr as UIOrigins,al as UIPanel,Mo as UIPoint,xo as UIPointer,io as UIPolygon,mo as UIRectangle,Lo as UIRowGrid,Ht as UISpace,Wt as UIVisibilityModes,_e as VisibleFill,rd as ZoomBandChart,tt as _translatePoint,nt as contoursFromLUT,ha as defaultAxisIntervalRestrictionsXY,wr as defaultOsmBackgroundColor,Yf as disableTextShadows,Uf as disableThemeEffects,xe as emptyFill,$t as emptyLine,gh as emptyPoints3D,ca as emptyTick,me as formatLUTValue,Pu as formatLongitudeLatitude,fe as formatNumberAsUnicodeSuperscript,$h as htmlTextRenderer,St as interpolateColor,mt as isArtificialLCJSEvent,p as isColor,Vl as isCoordinate3D,tA as isCoordinateBarChart,Ee as isCoordinateClient,fd as isCoordinatePolar,Oe as isCoordinateXY,Fh as isDashedLine,Me as isEmptyFill,da as isEmptyTick,B as isFontSettings,Eh as isGlowEffect,At as isHitBox,dt as isHitBox3D,gt as isHitEllipse,ot as isHitHeatmap,ct as isHitMeshModel,lt as isHitOHLC,ut as isHitPolarHeatmap,vt as isHitPolygon,ft as isHitRectangle,pt as isHitSampleXY,yt as isHitSegment,at as isHitSurface,Ph as isIcon,Nt as isImageFill,Fe as isIndividualPointFill,pe as isLUT,$ as isLinearGradientFill,Pe as isPalettedFill,ch as isPhongShadingStyle,bh as isPixelatedPoints3D,V as isRadialGradientFill,hd as isSeriesSupportedByZoomBandChart,ah as isSimpleShadingStyle,Ce as isSolidFill,_h as isSolidLine,ua as isTickStyle,ph as isTriangulatedPoints3D,Bm as lightningChart,mr as onScreenMenuControlBaseHeight,Sr as onScreenMenuControlBaseWidth,br as onScreenMenuControlOpacity,Mr as onScreenMenuDefaultButtonShape,xr as onScreenMenuSpriteURL,rt as regularColorSteps,ja as saveToFile,jf as scaleTheme,ht as synchronizeAxisIntervals,yr as transparentFill,pr as transparentLine,I as uint32ColorFromObject,F as uint32ColorFromRGBA,CA as useCursorDataPointColor,kA as useCursorFormatterSeriesOverride,ys as vec3Utils,ra as xDimensionStrategy,na as yDimensionStrategy};
