var eventer=function(r){"use strict";var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])},t(r,n)};function n(r){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&r[t],i=0;if(n)return n.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(r,t){var n="function"==typeof Symbol&&r[Symbol.iterator];if(!n)return r;var i,e,o=n.call(r),u=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)u.push(i.value)}catch(r){e={error:r}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return u}function e(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(i(arguments[t]));return r}var o=function(r){function n(t){var i,e="EventError: "+t+"}";return i=r.call(this,e)||this,Object.setPrototypeOf(i,n.prototype),i}return function(r,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(n,r),n}(Error),u=function(r,t){return{token:r+"-"+t,ownerIndex:r,id:t}},f=0,a=function(r,t){return new o("Event listener with "+r.token+" id does not exist at Eventer with "+t+" id.")},c=function(){function r(){this.id=++f,this.lastEventIndex=0,this.topics=new Map}return r.prototype.on=function(r,t,n){var i=this.topics.get(r),e=n||u(this.id,this.lastEventIndex+=1);return i?i.set(e,t):this.topics.set(r,new Map([[e,t]])),e},r.prototype.has=function(r,t){var e,u;if(t)return(s=this.topics.get(t))?(h=s.get(r))||a(r,this.id):new o("Eventer with "+r.ownerIndex+" does not have "+t+".");try{for(var f=n(this.topics),c=f.next();!c.done;c=f.next()){var s,h,v=i(c.value,2);v[0];if(h=(s=v[1]).get(r))return h}}catch(r){e={error:r}}finally{try{c&&!c.done&&(u=f.return)&&u.call(f)}finally{if(e)throw e.error}}return a(r,this.id)},r.prototype.off=function(r,t){var e,o;if(t)return!(!(a=this.topics.get(t))||!a.delete(r));try{for(var u=n(this.topics),f=u.next();!f.done;f=u.next()){var a,c=i(f.value,2);c[0];if((a=c[1]).delete(r))return!0}}catch(r){e={error:r}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error}}return!1},r.prototype.allOff=function(){return this.topics.clear(),this},r.prototype.topicOff=function(r){return this.topics.delete(r)},r.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.topics.get(r);if(i){var o=Array.from(i.values()),u=o.map((function(r){return r.apply(void 0,e(t))}));return u}return[]},r.prototype.listeners=function(r){var t=this.topics.get(r);return t||new Map},r}();return r.EventError=o,r.Eventer=c,r.TokenFactory=u,Object.defineProperty(r,"t",{value:!0}),r}({});